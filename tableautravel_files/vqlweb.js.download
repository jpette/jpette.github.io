/*! BEGIN BrowserSupport */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.BrowserSupport=t():e.BrowserSupport=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=0)}([function(e,t,n){"use strict";function o(){var e=window.document.body;if(R&&ee.IsMobile()){var t=document.createElement("div");t.style.setProperty("position","absolute"),t.style.setProperty("top","300px"),t.style.setProperty("left","300px"),t.style.setProperty("width","25px"),t.style.setProperty("height","25px"),t.style.setProperty("z-index","10000");try{e.appendChild(t),T=document.elementFromPoint(310,310)!==t}catch(e){}finally{t.remove()}}}function r(){var e=ee.GetUserAgent();if(F=e.indexOf("Konqueror")>=0,R=e.indexOf("WebKit")>=0,C=e.indexOf("Chrome")>=0,M=e.indexOf("Safari")>=0&&!C,B=e.indexOf("Opera")>=0,M){var t=e.match(/\bVersion\/(\d+\.\d+)/);null!==t&&(_=parseFloat(t[1]))}if(C){var t=e.match(/\bChrome\/(\d+\.\d+)/);null!==t&&(D=parseFloat(t[1]))}U=0,k=!1;var n=e.match(/\bMSIE (\d+\.\d+)/);if(null!==n&&(k=!0,U=parseFloat(n[1])),!k&&!B&&(e.indexOf("Trident")>=0||e.indexOf("Edge/")>=0)){var o=e.match(/\brv:(\d+\.\d+)/),r=e.match(/Edge\/(\d+\.\d+)/);null!==o?(k=!0,j=!1,U=parseFloat(o[1])):null!==r&&(k=!0,j=!0,C=!1,M=!1,U=parseFloat(r[1]))}if(z=!F&&!R&&!k&&e.indexOf("Gecko")>=0,L=z||e.indexOf("Firefox")>=0||e.indexOf("Minefield")>=0,H=/iPhone|iPod|iPad/.test(e)){var u=e.match(/\bOS ([\d+_?]+) like Mac OS X/);null!==u&&(A=parseFloat(u[1].replace(/_/,".").replace(/_/g,"")))}G=e.indexOf("Android")>=0&&!k,V=e.indexOf("Mac")>=0,J=e.indexOf("Windows")>=0,W=i()}function i(){var e;try{e="ontouchstart"in window||u()}catch(t){e=!1}return e}function u(){return!!window.DocumentTouch&&document instanceof window.DocumentTouch}function c(){O=a({transition:"transition",webkitTransition:"-webkit-transition",msTransition:"-ms-transition",mozTransition:"-moz-transition",oTransition:"-o-transition"})||O}function s(){I=a({transform:"transform",webkitTransform:"-webkit-transform",msTransform:"-ms-transform",mozTransform:"-moz-transform",oTransform:"-o-transform"})||I}function a(e){for(var t=Object.keys(e),n=0;n<t.length;++n){var o=t[n];if(o in document.body.style)return e[o]}return null}function f(){N=window.self.devicePixelRatio||1}function d(){var e=document.createElement("canvas");if(null===e||void 0===e)return void(K=1);var t=null;if("getContext"in e&&"function"==typeof e.getContext&&(t=e.getContext("2d")),null===t||void 0===t)return void(K=1);var n=t;K=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||1}function l(){var e=document.createElement("canvas");if(null!==e&&void 0!==e){var t=null;"getContext"in e&&"function"==typeof e.getContext&&(t=e.getContext("2d")),null!==t&&void 0!==t&&(E="function"==typeof t.setLineDash||"mozDash"in t||"webkitLineDash"in t)}}function p(){var e=document.createElement("input");Z="function"==typeof e.setSelectionRange}function m(){q=h("date"),X=h("datetime"),Q=h("datetime-local"),Y=h("time")}function h(e){var t=document.createElement("input");t.setAttribute("type",e),t.style.setProperty("position","absolute"),t.style.setProperty("visibility","hidden"),document.body.appendChild(t);var n=t.getAttribute("type");t.value="@inva/1d:)";var o=n===e&&"@inva/1d:)"!==t.value;return document.body.removeChild(t),o}function y(e,t){e in window||(window[e]=t)}Object.defineProperty(t,"__esModule",{value:!0});var v=n(1),w=n(2),b=n(3),g=!1,S="fonts"in document,x=!1,P=!1,I="transform",O="transition",T=!1,E=!1,M=!1,C=!1,k=!1,j=!1,U=0,D=0,_=0,A=0,L=!1,B=!1,F=!1,R=!1,z=!1,H=!1,G=!1,V=!1,J=!1,W=!1,N=1,K=1,q=!1,X=!1,Q=!1,Y=!1,Z=!1,$={isMobile:function(){return!1}},ee=function(){function e(){}return e.setConfig=function(e){$=e},e.GetComputedStyle=function(){return"getComputedStyle"in window},e.AddEventListener=function(){return"addEventListener"in document},e.SelectStart=function(){return g},e.IsTouch=function(){return W},e.FontLoader=function(){return S},e.Promise=function(){return"Promise"in window},e.PostMessage=function(){return x},e.HistoryApi=function(){return P},e.IsMobile=function(){return G||H},e.IsIos=function(){return H},e.IsAndroid=function(){return G},e.IsChrome=function(){return C},e.IsMac=function(){return V},e.IsIE=function(){return k},e.IsEdge=function(){return j},e.IsFF=function(){return L},e.IsOpera=function(){return B},e.IsSafari=function(){return M},e.IsWindows=function(){return J},e.IsHighDpi=function(){return window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches},e.BrowserVersion=function(){return U},e.SafariVersion=function(){return _},e.GoogleChromeVersion=function(){return D},e.IosVersion=function(){return A},e.RaisesEventOnImageReassignment=function(){return!M},e.ImageLoadIsSynchronous=function(){return k},e.UseAlternateHitStrategy=function(){return T},e.CssTransformName=function(){return I},e.CssTransitionName=function(){return O},e.BackingStoragePixelRatio=function(){return K},e.DevicePixelRatio=function(){return N},e.CanvasLinePattern=function(){return E},e.DateInput=function(){return q},e.DateTimeInput=function(){return X},e.DateTimeLocalInput=function(){return Q},e.TimeInput=function(){return Y},e.SetSelectionRange=function(){return Z},e.MouseWheelEvent=function(){return"onwheel"in window.document.documentElement?"wheel":"onmousewheel"in window.document.documentElement?"mousewheel":"MozMousePixelScroll"},e.MouseCapture=function(){return"releaseCapture"in document},e.OrientationChange=function(){return"onorientationchange"in window},e.ProxyObjectSupport=function(){return"Proxy"in window},e.IsGeolocationSupported=function(){return null!==window.navigator.geolocation||void 0!==window.navigator.geolocation},e.IsIpad=function(){return-1!==window.navigator.userAgent.indexOf("iPad")},e.IsTouchAndNonMobile=function(){return b.TouchScreenUtil.HasUserTouchedScreen&&!$.isMobile()},e.IsTouchScreen=function(){return b.TouchScreenUtil.HasUserTouchedScreen},e.GetUserAgent=function(){return window.navigator.userAgent},e.GetOrigin=function(e){var t=e.origin;return null!==t&&void 0!==t||(t=e.protocol+"//"+e.host),t},e.DetectBrowserSupport=function(){var e=document.body,t=document.createElement("div");e.appendChild(t),g="onselectstart"in t,e.removeChild(t).style.display="none",x="postMessage"in window,P="function"==typeof window.history.pushState&&"function"==typeof window.history.replaceState,r(),c(),s(),o(),f(),d(),m(),l(),p()},e}();t.BrowserSupport=ee,function(){$={isMobile:function(){return!1}},r();var e=function(){b.TouchScreenUtil.Init(),ee.DetectBrowserSupport()};"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?e():document.addEventListener("DOMContentLoaded",e),y("Set",function(){return new w.JsSetPolyfillImpl}),y("Map",function(){return new v.JsMapPolyfillImpl})}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.store={}}return Object.defineProperty(e.prototype,"size",{get:function(){return Object.keys(this.store).length},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){return this.store[e]=t,this},e.prototype.get=function(e){return this.store[e]},e.prototype.delete=function(e){var t=this.has(e);return delete this.store[e],t},e.prototype.clear=function(){this.store={}},e.prototype.has=function(e){return this.store.propertyIsEnumerable(e)},e.prototype.forEach=function(e){var t=this;Object.keys(this.store).forEach(function(n){e(t.store[n],n)})},e}();t.JsMapPolyfillImpl=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.store={}}return Object.defineProperty(e.prototype,"size",{get:function(){return Object.keys(this.store).length},enumerable:!0,configurable:!0}),e.prototype.add=function(e){return this.store[e]=e,this},e.prototype.delete=function(e){var t=this.has(e);return delete this.store[e],t},e.prototype.clear=function(){this.store={}},e.prototype.has=function(e){return this.store.propertyIsEnumerable(e)},e.prototype.forEach=function(e){var t=this;Object.keys(this.store).forEach(function(n){e(t.store[n])})},e}();t.JsSetPolyfillImpl=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return Object.defineProperty(e,"HasUserTouchedScreen",{get:function(){return e.hasUserTouchedScreen},enumerable:!0,configurable:!0}),e.Init=function(){null!==document.body&&void 0!==document.body&&document.body.addEventListener("touchstart",e.HandleTouchStart,!1)},e.HandleTouchStart=function(t){e.hasUserTouchedScreen||(e.hasUserTouchedScreen=!0,document.body.removeEventListener("touchstart",e.HandleTouchStart,!1))},e.hasUserTouchedScreen=!1,e}();t.TouchScreenUtil=o}])});(function(){(function(){'dont use strict';var a={};ss.initAssembly(a,'vqlbrowsersupport')})()}());;
/*! BEGIN FileDropResponder */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@tableau/browser-support")):"function"==typeof define&&define.amd?define(["@tableau/browser-support"],t):"object"==typeof exports?exports.FileDropResponderModule=t(require("@tableau/browser-support")):e.FileDropResponderModule=t(e.BrowserSupport)}("undefined"!=typeof self?self:this,function(e){return function(e){function t(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),n=function(){function e(){this.Counter=0,this.AllowMulti=!1,this.DropAttached=!1,this.SpecialHandleDragLeaveOnFF=!1}return e.prototype.isFF=function(){return o.BrowserSupport.IsFF()},e.prototype.setOnDropInvited=function(e){this.OnDropInvited=e},e.prototype.setOnUploadFiles=function(e){this.OnUploadFiles=e},e.prototype.setSpecialHandleDragLeaveOnFF=function(e){this.SpecialHandleDragLeaveOnFF=e},e.prototype.setupDropZone=function(e){this.dropZoneObj=e},e.prototype.handleDefaultBrowserDragDropEvents=function(){window.addEventListener("dragover",this.DefaultDragDropHandler,!0),window.addEventListener("drop",this.DefaultDragDropHandler,!0),o.BrowserSupport.IsEdge()&&(this.defaultErrorHandler=window.window.onerror,window.window.onerror=this.CatchBrowserError)},e.prototype.detachDefaultBrowserDragDropEvents=function(){window.removeEventListener("dragover",this.DefaultDragDropHandler),window.removeEventListener("drop",this.DefaultDragDropHandler),o.BrowserSupport.IsEdge()&&(window.window.onerror=this.defaultErrorHandler)},e.prototype.enableFileDrop=function(e,t){void 0===t&&(t=!0),this.Counter=0;var r=this.DropAttached;r&&!e?this.DetachFileDrop():!r&&e&&this.AttachFileDrop(),this.AllowMulti=t},e.prototype.AttachFileDrop=function(){var e=this;this.Counter=0,this.dropZoneObj&&(this.DropAttached=!0,this.dropZoneObj.ondragenter=function(t){e.StopEvent(t),1===++e.Counter&&e.OnDragEnter(t)},this.dropZoneObj.ondragleave=function(t){e.Counter--;var r=0===e.Counter;if(!r&&e.SpecialHandleDragLeaveOnFF&&o.BrowserSupport.IsFF()){if(t){var n=t.currentTarget,i=n;if(i){i===e.dropZoneObj&&(r=!0)}}}r&&(e.Counter=0,e.DropInvite(!1))},this.dropZoneObj.ondrop=function(t){e.StopEvent(t),e.OnFileDrop(t),e.Counter=0})},e.prototype.DetachFileDrop=function(){this.Counter=0,this.DropAttached=!1,this.dropZoneObj&&(this.dropZoneObj.ondragenter=this.dropZoneObj.ondragleave=this.dropZoneObj.ondrop=null)},e.prototype.IsFileDropInvited=function(){return!!this.dropZoneObj&&this.dropZoneObj.classList.contains(e.ClassFileDropInvited)},e.prototype.OnFileDrop=function(t){if(this.IsFileDropInvited()){var r=null;try{r=e.GetDragFileList(t)}catch(e){if(this.OnUploadFiles){this.OnUploadFiles(void 0)}}r&&r.length>0&&(this.AllowMulti||r.length,this.Upload(r)),this.DropInvite(!1)}},e.prototype.OnDragEnter=function(t){var r=!0,o=null;try{o=e.GetDragItemList(t)}catch(e){return void this.DropInvite(!0)}if(o){for(var n=!0,i=0;i<o.length;++i){var s=o[i];if(!e.IsDataTransferItemFile(s)){n=!1;break}}r=(this.AllowMulti||1===o.length)&&n}r?this.DropInvite(!0):(t.dataTransfer&&(t.dataTransfer.dropEffect="move"),this.DropInvite(!1))},e.prototype.DropInvite=function(t){t&&this.IsFileDropInvited()||!t&&!this.IsFileDropInvited()||t&&!this.OnUploadFiles||this.dropZoneObj&&(this.OnDropInvited&&this.OnDropInvited(t),t?this.dropZoneObj.classList.add(e.ClassFileDropInvited):this.dropZoneObj.classList.remove(e.ClassFileDropInvited))},e.prototype.Upload=function(e){(this.OnUploadFiles||e.length>0)&&this.OnUploadFiles(e)},e.prototype.CatchBrowserError=function(e,t,r,o,n){var i=e.toString();if("Access is denied"===i.substr(0,"Access is denied".length)){if(this.OnUploadFiles){this.OnUploadFiles(void 0)}return!0}return!!this.defaultErrorHandler&&(this.defaultErrorHandler(i,t,r,o,n),!0)},e.prototype.DefaultDragDropHandler=function(t){if(t){t.preventDefault();var r=t;if(r&&r.dataTransfer){var o=t.target;if(o){var n=null!=o.closest("."+e.ClassFileDropInvited);r.dataTransfer.dropEffect=n?"copy":"none"}}}},e.GetDragItemList=function(e){return e&&e.dataTransfer&&e.dataTransfer.items&&0!==e.dataTransfer.items.length?e.dataTransfer.items:null},e.IsDataTransferItemFile=function(e){return"file"===e.kind},e.prototype.StopEvent=function(e){e.stopPropagation(),e.preventDefault()},e.GetDragFileList=function(e){return e&&e.dataTransfer&&e.dataTransfer.files&&0!==e.dataTransfer.files.length?e.dataTransfer.files:null},e.ClassFileDropInvited="fileDropInvited",e}();t.FileDropResponder=n},function(t,r){t.exports=e}])});(function(){(function(){'dont use strict';var a={};ss.initAssembly(a,'vqlfiledropresponder')})()}());;
/*! BEGIN Core */
/*! BEGIN Underscore */
(function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,g=e.filter,d=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,w=Object.keys,_=i.bind,j=function(n){return n instanceof j?n:this instanceof j?void(this._wrapped=n):new j(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=j),exports._=j):n._=j,j.VERSION="1.6.0";var A=j.each=j.forEach=function(n,t,e){if(null==n)return n;if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a=j.keys(n),u=0,i=a.length;i>u;u++)if(t.call(e,n[a[u]],a[u],n)===r)return;return n};j.map=j.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e.push(t.call(r,n,u,i))}),e)};var O="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=j.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(O);return r},j.reduceRight=j.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=j.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=j.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(O);return r},j.find=j.detect=function(n,t,r){var e;return k(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},j.filter=j.select=function(n,t,r){var e=[];return null==n?e:g&&n.filter===g?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&e.push(n)}),e)},j.reject=function(n,t,r){return j.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},j.every=j.all=function(n,t,e){t||(t=j.identity);var u=!0;return null==n?u:d&&n.every===d?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var k=j.some=j.any=function(n,t,e){t||(t=j.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};j.contains=j.include=function(n,t){return null==n?!1:y&&n.indexOf===y?n.indexOf(t)!=-1:k(n,function(n){return n===t})},j.invoke=function(n,t){var r=o.call(arguments,2),e=j.isFunction(t);return j.map(n,function(n){return(e?t:n[t]).apply(n,r)})},j.pluck=function(n,t){return j.map(n,j.property(t))},j.where=function(n,t){return j.filter(n,j.matches(t))},j.findWhere=function(n,t){return j.find(n,j.matches(t))},j.max=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);var e=-1/0,u=-1/0;return A(n,function(n,i,a){var o=t?t.call(r,n,i,a):n;o>u&&(e=n,u=o)}),e},j.min=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);var e=1/0,u=1/0;return A(n,function(n,i,a){var o=t?t.call(r,n,i,a):n;u>o&&(e=n,u=o)}),e},j.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=j.random(r++),e[r-1]=e[t],e[t]=n}),e},j.sample=function(n,t,r){return null==t||r?(n.length!==+n.length&&(n=j.values(n)),n[j.random(n.length-1)]):j.shuffle(n).slice(0,Math.max(0,t))};var E=function(n){return null==n?j.identity:j.isFunction(n)?n:j.property(n)};j.sortBy=function(n,t,r){return t=E(t),j.pluck(j.map(n,function(n,e,u){return{value:n,index:e,criteria:t.call(r,n,e,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=E(r),A(t,function(i,a){var o=r.call(e,i,a,t);n(u,o,i)}),u}};j.groupBy=F(function(n,t,r){j.has(n,t)?n[t].push(r):n[t]=[r]}),j.indexBy=F(function(n,t,r){n[t]=r}),j.countBy=F(function(n,t){j.has(n,t)?n[t]++:n[t]=1}),j.sortedIndex=function(n,t,r,e){r=E(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;r.call(e,n[o])<u?i=o+1:a=o}return i},j.toArray=function(n){return n?j.isArray(n)?o.call(n):n.length===+n.length?j.map(n,j.identity):j.values(n):[]},j.size=function(n){return null==n?0:n.length===+n.length?n.length:j.keys(n).length},j.first=j.head=j.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:0>t?[]:o.call(n,0,t)},j.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},j.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},j.rest=j.tail=j.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},j.compact=function(n){return j.filter(n,j.identity)};var M=function(n,t,r){return t&&j.every(n,j.isArray)?c.apply(r,n):(A(n,function(n){j.isArray(n)||j.isArguments(n)?t?a.apply(r,n):M(n,t,r):r.push(n)}),r)};j.flatten=function(n,t){return M(n,t,[])},j.without=function(n){return j.difference(n,o.call(arguments,1))},j.partition=function(n,t){var r=[],e=[];return A(n,function(n){(t(n)?r:e).push(n)}),[r,e]},j.uniq=j.unique=function(n,t,r,e){j.isFunction(t)&&(e=r,r=t,t=!1);var u=r?j.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:j.contains(a,r))||(a.push(r),i.push(n[e]))}),i},j.union=function(){return j.uniq(j.flatten(arguments,!0))},j.intersection=function(n){var t=o.call(arguments,1);return j.filter(j.uniq(n),function(n){return j.every(t,function(t){return j.contains(t,n)})})},j.difference=function(n){var t=c.apply(e,o.call(arguments,1));return j.filter(n,function(n){return!j.contains(t,n)})},j.zip=function(){for(var n=j.max(j.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;n>r;r++)t[r]=j.pluck(arguments,""+r);return t},j.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},j.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=j.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},j.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},j.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=r;return i};var R=function(){};j.bind=function(n,t){var r,e;if(_&&n.bind===_)return _.apply(n,o.call(arguments,1));if(!j.isFunction(n))throw new TypeError;return r=o.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(o.call(arguments)));R.prototype=n.prototype;var u=new R;R.prototype=null;var i=n.apply(u,r.concat(o.call(arguments)));return Object(i)===i?i:u}},j.partial=function(n){var t=o.call(arguments,1);return function(){for(var r=0,e=t.slice(),u=0,i=e.length;i>u;u++)e[u]===j&&(e[u]=arguments[r++]);for(;r<arguments.length;)e.push(arguments[r++]);return n.apply(this,e)}},j.bindAll=function(n){var t=o.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return A(t,function(t){n[t]=j.bind(n[t],n)}),n},j.memoize=function(n,t){var r={};return t||(t=j.identity),function(){var e=t.apply(this,arguments);return j.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},j.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},j.defer=function(n){return j.delay.apply(j,[n,1].concat(o.call(arguments,1)))},j.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var c=function(){o=r.leading===!1?0:j.now(),a=null,i=n.apply(e,u),e=u=null};return function(){var l=j.now();o||r.leading!==!1||(o=l);var f=t-(l-o);return e=this,u=arguments,0>=f?(clearTimeout(a),a=null,o=l,i=n.apply(e,u),e=u=null):a||r.trailing===!1||(a=setTimeout(c,f)),i}},j.debounce=function(n,t,r){var e,u,i,a,o,c=function(){var l=j.now()-a;t>l?e=setTimeout(c,t-l):(e=null,r||(o=n.apply(i,u),i=u=null))};return function(){i=this,u=arguments,a=j.now();var l=r&&!e;return e||(e=setTimeout(c,t)),l&&(o=n.apply(i,u),i=u=null),o}},j.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},j.wrap=function(n,t){return j.partial(t,n)},j.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},j.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},j.keys=function(n){if(!j.isObject(n))return[];if(w)return w(n);var t=[];for(var r in n)j.has(n,r)&&t.push(r);return t},j.values=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},j.pairs=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},j.invert=function(n){for(var t={},r=j.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},j.functions=j.methods=function(n){var t=[];for(var r in n)j.isFunction(n[r])&&t.push(r);return t.sort()},j.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},j.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},j.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)j.contains(r,u)||(t[u]=n[u]);return t},j.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]===void 0&&(n[r]=t[r])}),n},j.clone=function(n){return j.isObject(n)?j.isArray(n)?n.slice():j.extend({},n):n},j.tap=function(n,t){return t(n),n};var S=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof j&&(n=n._wrapped),t instanceof j&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;var a=n.constructor,o=t.constructor;if(a!==o&&!(j.isFunction(a)&&a instanceof a&&j.isFunction(o)&&o instanceof o)&&"constructor"in n&&"constructor"in t)return!1;r.push(n),e.push(t);var c=0,f=!0;if("[object Array]"==u){if(c=n.length,f=c==t.length)for(;c--&&(f=S(n[c],t[c],r,e)););}else{for(var s in n)if(j.has(n,s)&&(c++,!(f=j.has(t,s)&&S(n[s],t[s],r,e))))break;if(f){for(s in t)if(j.has(t,s)&&!c--)break;f=!c}}return r.pop(),e.pop(),f};j.isEqual=function(n,t){return S(n,t,[],[])},j.isEmpty=function(n){if(null==n)return!0;if(j.isArray(n)||j.isString(n))return 0===n.length;for(var t in n)if(j.has(n,t))return!1;return!0},j.isElement=function(n){return!(!n||1!==n.nodeType)},j.isArray=x||function(n){return"[object Array]"==l.call(n)},j.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){j["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),j.isArguments(arguments)||(j.isArguments=function(n){return!(!n||!j.has(n,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(n){return"function"==typeof n}),j.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},j.isNaN=function(n){return j.isNumber(n)&&n!=+n},j.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},j.isNull=function(n){return null===n},j.isUndefined=function(n){return n===void 0},j.has=function(n,t){return f.call(n,t)},j.noConflict=function(){return n._=t,this},j.identity=function(n){return n},j.constant=function(n){return function(){return n}},j.property=function(n){return function(t){return t[n]}},j.matches=function(n){return function(t){if(t===n)return!0;for(var r in n)if(n[r]!==t[r])return!1;return!0}},j.times=function(n,t,r){for(var e=Array(Math.max(0,n)),u=0;n>u;u++)e[u]=t.call(r,u);return e},j.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},j.now=Date.now||function(){return(new Date).getTime()};var T={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};T.unescape=j.invert(T.escape);var I={escape:new RegExp("["+j.keys(T.escape).join("")+"]","g"),unescape:new RegExp("("+j.keys(T.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(n){j[n]=function(t){return null==t?"":(""+t).replace(I[n],function(t){return T[n][t]})}}),j.result=function(n,t){if(null==n)return void 0;var r=n[t];return j.isFunction(r)?r.call(n):r},j.mixin=function(n){A(j.functions(n),function(t){var r=j[t]=n[t];j.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),z.call(this,r.apply(j,n))}})};var N=0;j.uniqueId=function(n){var t=++N+"";return n?n+t:t},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;j.template=function(n,t,r){var e;r=j.defaults({},r,j.templateSettings);var u=new RegExp([(r.escape||q).source,(r.interpolate||q).source,(r.evaluate||q).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(D,function(n){return"\\"+B[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,j);var c=function(n){return e.call(this,n,j)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},j.chain=function(n){return j(n).chain()};var z=function(n){return this._chain?j(n).chain():n};j.mixin(j),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];j.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],z.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];j.prototype[n]=function(){return z.call(this,t.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return j})}).call(this);(function(){
/*! BEGIN CoreSlim */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'tabcoreslim');var b=function(){this.$0=null;this.$0=[]};b.__typeName='tab.BaseLogAppender';global.tab.BaseLogAppender=b;var c=function(){this.$2=null;b.call(this)};c.__typeName='tab.ConsoleLogAppender';global.tab.ConsoleLogAppender=c;var d=function(){};d.__typeName='tab.CookieHelper';d.getValueForCookie=function(o){var p=e.getCookie().match(new RegExp('(?:^|;) ?'+o+'=([^;]*)(?:;|$)'));if(ss.isNullOrUndefined(p)||p.length<2){return null}return p[1]};d.setCookie=function(o,p,q,r){var s=o+'='+p+';path='+q+';';if(!ss.staticEquals(r,null)){s+='expires='+r.toUTCString()}e.setCookie(s)};global.tab.CookieHelper=d;var e=function(){};e.__typeName='tab.DocumentHelper';e.get_documentClientWidth=function(){return document.documentElement.clientWidth};e.get_documentClientHeight=function(){return document.documentElement.clientHeight};e.getCookie=function(){return document.cookie};e.setCookie=function(o){document.cookie=o};global.tab.DocumentHelper=e;var f=function(){};f.__typeName='tab.EscapingUtil';f.escapeHtml=function(o){var p=ss.coalesce(o,'');p=p.replace(new RegExp('&','g'),'&amp;');p=p.replace(new RegExp('<','g'),'&lt;');p=p.replace(new RegExp('>','g'),'&gt;');p=p.replace(new RegExp('"','g'),'&quot;');p=p.replace(new RegExp("'",'g'),'&#39;');p=p.replace(new RegExp('/','g'),'&#47;');if((new RegExp('^ +$')).test(p)){p=p.replace(new RegExp(' ','g'),'&nbsp;')}return p};global.tab.EscapingUtil=f;var g=function(){};g.__typeName='tab.LazyUtil';g.lazyInitStaticField=function(o,p,q){var r=o[p];if(ss.isNullOrUndefined(r)){r=q();o[p]=r}return r};global.tab.LazyUtil=g;var h=function(){};h.__typeName='tab.Log';h.get=function(o){return j.lazyGetLogger(ss.getInstanceType(o))};h.get$1=function(o){return j.lazyGetLogger(o)};global.tab.Log=h;var i=function(o){this.$0=null;this.$1$1=null;this.$0=o};i.__typeName='tab.LogAppenderInstance';global.tab.LogAppenderInstance=i;var j=function(o){this.$1=null;this.$1=o};j.__typeName='tab.Logger';j.get_globalLog=function(){return j.global};j.$2=function(){return g.lazyInitStaticField(j,'appenders',function(){return[]})};j.$3=function(){return g.lazyInitStaticField(j,'filters',function(){return[]})};j.$4=function(){return g.lazyInitStaticField(j,'nullLog',function(){return new j('')})};j.clearFilters=function(){var o=j.$2();for(var p=0;p<o.length;p++){var q=o[p];q.clearFilters()}j.$3().splice(0,j.$3().length)};j.filterByLogger=function(o,p){p=p||0;j.$0(function(q,r){return ss.referenceEquals(q,o)&&r>=p})};j.filterByType=function(o,p){p=p||0;j.$0(function(q,r){return r>=p&&ss.referenceEquals(q.get_name(),ss.getTypeName(o))})};j.filterByName=function(o,p){p=p||0;var q=new RegExp(o,'i');j.$0(function(r,s){return s>=p&&ss.isValue(r.get_name().match(q))})};j.clearAppenders=function(){j.$2().splice(0,j.$3().length)};j.hasAppender=function(o){return j.$2().indexOf(o)>-1};j.addAppender=function(o){var p=j.$3();for(var q=0;q<p.length;q++){var r=p[q];o.addFilter(r)}j.$2().push(o)};j.removeAppender=function(o){var p=j.$2().indexOf(o);if(p>-1){j.$2().splice(p,1)}};j.lazyGetLogger=function(o){return g.lazyInitStaticField(o,'_logger',function(){return j.getLogger(o)})};j.getLogger=function(o,p){var q=j.getLoggerWithName(ss.getTypeName(o));if(ss.isValue(p)){}return q};j.getLoggerWithName=function(o){return j.$4()};j.$1=function(){var o=m.getUriQueryParameters(window.self.location.search);if(!ss.keyExists(o,':log')){return}var p=o[':log'];if(p.length===0){}for(var q=0;q<p.length;q++){var r=p[q];var s=r.split(String.fromCharCode(58));var t=1;if(s.length>0&&ss.isValue(s[1])){var u=s[1].toLowerCase();var v=j.loggerLevelNames.indexOf(u);if(v>=0){t=v}}}};j.$0=function(o){j.$3().push(o);var p=j.$2();for(var q=0;q<p.length;q++){var r=p[q];r.addFilter(o)}};global.tab.Logger=j;var k=function(){};k.__typeName='tab.LoggerLevel';global.tab.LoggerLevel=k;var l=function(){};l.__typeName='tab.ScriptEx';global.tab.ScriptEx=l;var m=function(){};m.__typeName='tab.UriExtensions';m.getUriQueryParameters=function(o){var p={};if(ss.isNullOrUndefined(o)){return p}var q=o.indexOf('?');if(q<0){return p}var r=o.substr(q+1);var s=r.indexOf('#');if(s>=0){r=r.substr(0,s)}if(ss.isNullOrEmptyString(r)){return p}var t=r.split('&');for(var u=0;u<t.length;u++){var v=t[u];var w=v.split('=');var x=decodeURIComponent(w[0]);var y;if(ss.keyExists(p,x)){y=p[x]}else{y=[];p[x]=y}if(w.length>1){y.push(decodeURIComponent(w[1]))}}return p};global.tab.UriExtensions=m;var n=function(o){this.$0=null;this.$0=o};n.__typeName='tab.WindowHelper';n.get_windowSelf=function(){return window.self};n.get_windowParent=function(){return window.parent};n.get_selection=function(){if(typeof(window['getSelection'])==='function'){return window.getSelection()}if(typeof(document['getSelection'])==='function'){return document.getSelection()}return null};n.close=function(o){o.close()};n.getOpener=function(o){return o.opener};n.getLocation=function(o){return o.location};n.getPathAndSearch=function(o){return o.location.pathname+o.location.search};n.setLocationHref=function(o,p){o.location.href=p};n.locationReplace=function(o,p){o.location.replace(p)};n.open=function(o,p,q){return window.open(o,p,q)};n.reload=function(o,p){o.location.reload(p)};n.requestAnimationFrame=function(o){return n.$c(o)};n.cancelAnimationFrame=function(o){if(ss.isValue(o)){n.$1(o)}};n.setTimeout=function(o,p){return window.setTimeout(o,p)};n.setInterval=function(o,p){return window.setInterval(o,p)};n.addListener=function(o,p,q){if('addEventListener'in o){o.addEventListener(p,q,false)}else{o.attachEvent('on'+p,q)}};n.removeListener=function(o,p,q){if('removeEventListener'in o){o.removeEventListener(p,q,false)}else{o.detachEvent('on'+p,q)}};n.$0=function(){var o=0;n.$c=function(p){var q=(new Date).getTime();var r=Math.max(0,16-(q-o));o=q+r;var s=window.setTimeout(p,r);return s}};n.clearSelection=function(){var o=n.get_selection();if(ss.isValue(o)){if(typeof(o['removeAllRanges'])==='function'){o.removeAllRanges()}else if(typeof(o['empty'])==='function'){o['empty']()}}};global.tab.WindowHelper=n;ss.initClass(b,a,{clearFilters:function(){ss.clear(this.$0)},addFilter:function(o){this.$0.push(o)},removeFilter:function(o){ss.remove(this.$0,o)},log:function(o,p,q,r){},logInternal:null,formatMessage:function(o,p){if(ss.isNullOrUndefined(p)||p.length===0){return o}var q=new ss.StringBuilder;var r=0;var s=false;for(var t=0;t<o.length;t++){var u=o.charCodeAt(t);if(u===37){if(s){q.append('%');s=false}else{s=true}}else{if(s){switch(u){case 98:case 115:case 100:case 110:case 111:{q.append(((p.length>r)?p[r]:''));r++;break}}}else{q.appendChar(u)}s=false}}return q.toString()}});ss.initClass(c,a,{logInternal:function(o,p,q,r){if(typeof(window.console)!=='object'){return}q=o.get_name()+': '+q;var s=[];var t=s.concat(q);s=t.concat.apply(t,r);try{Function.prototype.apply.call(this.$1(p),window.console,s)}catch(u){}},$1:function(o){var p=window.self['console'];if(ss.isNullOrUndefined(this.$2)){this.$2={};this.$2[(1).toString()]=p.log;this.$2[(4).toString()]=p.error;this.$2[(2).toString()]=p.info;this.$2[(3).toString()]=p.warn}var q=this.$2[o.toString()];if(ss.isNullOrUndefined(q)){q=p.log}return q}},b);ss.initClass(d,a,{});ss.initClass(e,a,{});ss.initClass(f,a,{});ss.initClass(g,a,{});ss.initClass(h,a,{});ss.initClass(i,a,{get_instance:function(){return this.$1$1},set_instance:function(o){this.$1$1=o},enableLogging:function(o){if(ss.isNullOrUndefined(this.get_instance())){this.set_instance(this.$0());j.addAppender(this.get_instance())}else if(!j.hasAppender(this.get_instance())){j.addAppender(this.get_instance())}this.get_instance().addFilter(ss.coalesce(o,function(p,q){return true}))},disableLogging:function(){if(ss.isNullOrUndefined(this.get_instance())){return}j.removeAppender(this.get_instance());this.set_instance(null)}});ss.initClass(j,a,{get_name:function(){return this.$1},debug:function(o,p){},info:function(o,p){},warn:function(o,p){},error:function(o,p){},log:function(o,p,q){},$0:function(o,p,q){try{var r=j.$2();for(var s=0;s<r.length;s++){var t=r[s];t.log(this,o,p,q)}}catch(u){}}});ss.initEnum(k,a,{all:0,debug:1,info:2,warn:3,error:4,off:5});ss.initClass(l,a,{});ss.initClass(m,a,{});ss.initClass(n,a,{get_pageXOffset:function(){return n.$8(this.$0)},get_pageYOffset:function(){return n.$9(this.$0)},get_clientWidth:function(){return n.$3(this.$0)},get_clientHeight:function(){return n.$2(this.$0)},get_innerWidth:function(){return n.$5(this.$0)},get_outerWidth:function(){return n.$7(this.$0)},get_innerHeight:function(){return n.$4(this.$0)},get_outerHeight:function(){return n.$6(this.$0)},get_screenLeft:function(){return n.$a(this.$0)},get_screenTop:function(){return n.$b(this.$0)},isQuirksMode:function(){return document.compatMode==='BackCompat'}});(function(){j.global=j.getLoggerWithName('global');j.loggerLevelNames=[];j.$5=':log';j.loggerLevelNames[0]='all';j.loggerLevelNames[1]='debug';j.loggerLevelNames[2]='info';j.loggerLevelNames[3]='warn';j.loggerLevelNames[4]='error';j.loggerLevelNames[5]='off'})();(function(){c.globalAppender=new i(function(){return new c})})();(function(){n.blank='_blank';n.$5=null;n.$4=null;n.$3=null;n.$2=null;n.$8=null;n.$9=null;n.$a=null;n.$b=null;n.$7=null;n.$6=null;n.$c=null;n.$1=null;if('innerWidth'in window){n.$5=function(w){return w.innerWidth}}else{n.$5=function(w){return w.document.documentElement.offsetWidth}}if('outerWidth'in window){n.$7=function(w){return w.outerWidth}}else{n.$7=n.$5}if('innerHeight'in window){n.$4=function(w){return w.innerHeight}}else{n.$4=function(w){return w.document.documentElement.offsetHeight}}if('outerHeight'in window){n.$6=function(w){return w.outerHeight}}else{n.$6=n.$4}if('clientWidth'in window){n.$3=function(w){return w['clientWidth']}}else{n.$3=function(w){return w.document.documentElement.clientWidth}}if('clientHeight'in window){n.$2=function(w){return w['clientHeight']}}else{n.$2=function(w){return w.document.documentElement.clientHeight}}if(ss.isValue(window.self.pageXOffset)){n.$8=function(w){return w.pageXOffset}}else{n.$8=function(w){return w.document.documentElement.scrollLeft}}if(ss.isValue(window.self.pageYOffset)){n.$9=function(w){return w.pageYOffset}}else{n.$9=function(w){return w.document.documentElement.scrollTop}}if('screenLeft'in window){n.$a=function(w){return w.screenLeft}}else{n.$a=function(w){return w.screenX}}if('screenTop'in window){n.$b=function(w){return w.screenTop}}else{n.$b=function(w){return w.screenY}}{var o='requestAnimationFrame';var p='cancelAnimationFrame';var q=['ms','moz','webkit','o'];var r=null;var s=null;if(o in window){r=o}if(p in window){s=p}for(var t=0;t<q.length&&(ss.isNullOrUndefined(r)||ss.isNullOrUndefined(s));++t){var u=q[t];var v=u+'RequestAnimationFrame';if(ss.isNullOrUndefined(r)&&v in window){r=v}if(ss.isNullOrUndefined(s)){v=u+'CancelAnimationFrame';if(v in window){s=v}v=u+'CancelRequestAnimationFrame';if(v in window){s=v}}}if(ss.isValue(r)){n.$c=function(w){return window[r](w)}}else{n.$0()}if(ss.isValue(s)){n.$1=function(w){window[s](w)}}else{n.$1=window.clearTimeout}}})()})();(function(){'dont use strict';var a={};global.tab=global.tab||{};global.tableau=global.tableau||{};global.tableau.types=global.tableau.types||{};global.tableau.util=global.tableau.util||{};ss.initAssembly(a,'vqlcore');var b=function(){};b.__typeName='ColumnClass';global.ColumnClass=b;var c=function(){};c.__typeName='DrillState';global.DrillState=c;$.fn.focusDelayed=function(e,bO){this.each(function(bP,bQ){window.setTimeout(function(){$(bQ).focus();if(ss.isValue(bO)){bO.call(bQ)}},e)})};$.fn.getTouchEvent=function(e){return e['originalEvent']};$.expr.pseudos.focusable=function(e){return g.$0(e,!isNaN(parseInt($(e).attr('tabindex'),10)))};$.expr.pseudos.tabbable=function(e){var bO=parseInt($(e).attr('tabindex'),10);var bP=isNaN(bO);return(bP||bO>=0)&&g.$0(e,!bP)};var d=function(){};d.__typeName='tab.$0';d.$0=function(e){var bO=d.$4(e);var bP=new bp('stack',d.$2(e),e.name,bO);return bP};d.$2=function(e){var bO=e.get_message();if(ss.isValue(e.get_innerException())){bO+=' inner: '+e.get_innerException().get_message()}return bO};d.$4=function(e){var bO;if(ss.isValue(e.get_innerException())){bO=e.get_innerException().error}else{bO=e._error}return d.$6(bO)};d.$6=function(e){if(ss.isValue(e.stack)&&ss.isValue(e.stack.match(d.$7))){return d.$3(e)}if(ss.isValue(e.stack)){return d.$5(e)}return null};d.$3=function(e){var bO=e.stack.split(String.fromCharCode(10)).filter(function(bP){return ss.isValue(bP.match(d.$7))});return bO.map(function(bP){if(bP.indexOf('(eval ')>-1){bP=ss.replaceAllString(bP,'eval code','eval').replace(d.$b,'')}var bQ=bP.replace(new RegExp('^\\s+'),'').replace(new RegExp('\\(eval code'),'(').split(new RegExp('\\s+')).slice(1);var bR=d.$1(bQ.pop());var bS=ss.coalesce(bQ.join(' '),'undefined');var bT=((ss.indexOf(['eval','<anonymous>'],bR[0])>-1)?'undefined':bR[0]);var bU=parseInt(bR[1]);var bV=parseInt(bR[2]);return new bo(bT,bU,bV,bP,bS)})};d.$5=function(e){var bO=e.stack.split(String.fromCharCode(10)).filter(function(bP){return ss.isNullOrUndefined(bP.match(d.$a))});return bO.map(function(bP){if(bP.indexOf(' > eval')>-1){bP=bP.replace(new RegExp(' line (\\d+)(?: > eval line \\d+)* > eval\\:\\d+\\:\\d+','g'),':$1')}if(bP.indexOf('@')===-1&&bP.indexOf(':')===-1){return new bo(bP,0,0,'',null)}else{var bQ=bP.split('@');var bR=d.$1(bQ.pop());var bS=ss.coalesce(bQ.join('@'),'undefined');var bT=bR[0];var bU=parseInt(bR[1]);var bV=parseInt(bR[2]);var bW=new bo(bT,bU,bV,bP,bS);return bW}})};d.$1=function(e){if(e.indexOf(String.fromCharCode(58))===-1){return[e]}var bO=d.$8.exec(e.replace(d.$9,''));return[bO[1],ss.coalesce(bO[2],'undefined'),ss.coalesce(bO[3],'undefined')]};var f=function(){};f.__typeName='tab.$1';var g=function(){};g.__typeName='tab.$2';g.$0=function(e,bO){var bP=e.nodeName.toLowerCase();if(bP==='area'){return false}var bQ=bO;var bR=new RegExp('input|select|textarea|button|object');if(bR.test(bP)){bQ=!e.disabled}else if(bP==='a'){bQ=!ss.isNullOrEmptyString(e.href)||bO}return bQ&&g.$1(e)};g.$1=function(e){for(var bO='';ss.isValue(e);e=e.parentElement){if(e.style.display==='none'){return false}else if(bO==='visible'){continue}else if(bO.length===0||bO==='inherit'){bO=e.style.visibility}if(bO==='hidden'){return false}}return true};var h=function(e){var bO=function(){};ss.registerGenericClassInstance(bO,h,[e],{current:null,reset:null,moveNext:null,dispose:function(){}},function(){return null},function(){return[ss.IDisposable,ss.IEnumerator,ss.IEnumerator]});return bO};h.__typeName='tab.AbstractEnumerator$1';ss.initGenericClass(h,a,1);global.tab.AbstractEnumerator$1=h;var i=function(){this.startOfWeek=1;this.fiscalYearStart=1;this.minDaysInFirstWeek=1;this.brokenWeeks=true};i.__typeName='tab.CalendarOptions';global.tab.CalendarOptions=i;var j=function(e){this.$0=null;this.$0=e};j.__typeName='tab.CallOnDispose';global.tab.CallOnDispose=j;var k=function(){};k.__typeName='tab.CircleUtil';k.isEmpty=function(e){return t.isApproximatelyZero(e.radius)};k.isEqual=function(e,bO){return t.isApproximatelyEqual(e.radius,bO.radius)&&k.hasTheSameCenter(e,bO)};k.hasTheSameCenter=function(e,bO){return t.isApproximatelyEqual(e.center.x,bO.center.x)&&t.isApproximatelyEqual(e.center.y,bO.center.y)};k.intersectsWith=function(e,bO){var bP=Math.pow(e.center.x-bO.center.x,2)+Math.pow(e.center.y-bO.center.y,2);return Math.pow(e.radius+bO.radius,2)>bP};k.offsetCircle=function(e,bO){var bP={x:e.center.x+bO.x,y:e.center.y+bO.y};return{center:bP,radius:e.radius}};k.clone=function(e){return{center:{x:e.center.x,y:e.center.y},radius:e.radius}};k.boundingBox=function(e){var bO=Math.ceil(e.radius);var bP=Math.floor(e.center.x-bO);var bQ=Math.ceil(e.center.x+bO);var bR=Math.floor(e.center.y-bO);var bS=Math.ceil(e.center.y+bO);return{x:bP,y:bR,w:bQ-bP,h:bS-bR}};k.containmentBox=function(e){var bO=Math.abs(ss.round(e.center.x)-e.center.x);var bP=Math.abs(ss.round(e.center.y)-e.center.y);var bQ=Math.sqrt(2)/2*e.radius-Math.max(bO,bP);var bR=Math.ceil(e.center.x-bQ);var bS=Math.ceil(e.center.y-bQ);var bT=Math.floor(e.center.x+bQ);var bU=Math.floor(e.center.y+bQ);return{x:bR,y:bS,w:bT-bR,h:bU-bS}};k.getChangedRects=function(e,bO){if(!k.hasTheSameCenter(e,bO)){return[]}var bP=((e.radius>bO.radius)?k.boundingBox(e):k.boundingBox(bO));var bQ=((e.radius>bO.radius)?k.containmentBox(bO):k.containmentBox(e));var bR=new Array(4);var bS=ss.Int32.div(bP.h-bQ.h,2);var bT=ss.Int32.div(bP.w-bQ.w,2);bR[0]={x:bP.x,y:bP.y,w:bP.w,h:bS};bR[1]={x:bP.x,y:bP.y+bS+bQ.h,w:bP.w,h:bS};bR[2]={x:bP.x,y:bP.y+bS,w:bT,h:bQ.h};bR[3]={x:bP.x+bT+bQ.w,y:bP.y+bS,w:bT,h:bQ.h};return bR};global.tab.CircleUtil=k;var l=function(){};l.__typeName='tab.DashboardRegionZIndexConstants';global.tab.DashboardRegionZIndexConstants=l;var m=function(){this.ErrorType=null;this.RedirectUrl=null;this.ErrorMessage=null;this.ConnectionClass=null;this.ConnectionName=null;this.DataSourceCaption=null};m.__typeName='tab.DataSourceConnectionAttemptErrorResponse';m.$ctor1=function(e){this.ErrorType=null;this.RedirectUrl=null;this.ErrorMessage=null;this.ConnectionClass=null;this.ConnectionName=null;this.DataSourceCaption=null;if(ss.isNullOrUndefined(e)){return}this.ErrorType=e.exceptionType;this.ErrorMessage=e.exceptionMessage;this.ConnectionName=e.connectionFullName;this.DataSourceCaption=e.datasourceCaption;this.ConnectionClass=(ss.isNullOrUndefined(e.exceptionAttrs)?'':e.exceptionAttrs['class'])};m.tryDeserialize=function(e){try{var bO=JSON.parse(e);return bO}catch(bP){return null}};global.tab.DataSourceConnectionAttemptErrorResponse=m;var n=function(){};n.__typeName='tab.DateTimeAutoFormatMode';global.tab.DateTimeAutoFormatMode=n;var o=function(){};o.__typeName='tab.DateUtil';o.$4=function(){return tab.Logger.lazyGetLogger(o)};o.get_nowAsTime=function(){return(new Date).getTime()};o.adjustDateByPeriod=function(e,bO,bP){var bQ=new Date;switch(bO){case'year':{bQ=new Date(e.getFullYear()+bP,e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());break}case'quarter':{bQ=o.adjustByMonths(e,bP*3);break}case'month':{bQ=o.adjustByMonths(e,bP);break}case'week':{bQ=o.$0(e,bP*7);break}case'day':{bQ=o.$0(e,bP);break}case'hour':{bQ=new Date(e.getTime()+bP*o.oneHour);break}case'minute':{bQ=new Date(e.getTime()+bP*o.oneMinute);break}case'second':{bQ=new Date(e.getTime()+bP*o.oneSecond);break}}return bQ};o.$0=function(e,bO){var bP=new Date(e.getFullYear(),e.getMonth(),e.getDate(),12);var bQ=new Date(bP.getTime()+o.oneDay*bO);return new Date(bQ.getFullYear(),bQ.getMonth(),bQ.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())};o.adjustByMonths=function(e,bO){var bP=e.getMonth();var bQ;var bR;if(bO<0){bQ=-((12-(bP-1)-1-bO)/12)|0}else{bQ=(bP-1+bO)/12|0}bR=bP+(bO-bQ*12);return new Date(e.getFullYear()+bQ,bR,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())};o.adjustDateByPeriodInUTC=function(e,bO,bP){var bQ=new Date;switch(bO){case'year':{bQ=new Date(Date.UTC(e.getUTCFullYear()+bP,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()));break}case'quarter':{bQ=o.adjustByMonthsInUTC(e,bP*3);break}case'month':{bQ=o.adjustByMonthsInUTC(e,bP);break}case'week':{bQ=new Date(e.getTime()+bP*o.oneWeek);break}case'day':{bQ=new Date(e.getTime()+bP*o.oneDay);break}case'hour':{bQ=new Date(e.getTime()+bP*o.oneHour);break}case'minute':{bQ=new Date(e.getTime()+bP*o.oneMinute);break}case'second':{bQ=new Date(e.getTime()+bP*o.oneSecond);break}}return bQ};o.adjustByMonthsInUTC=function(e,bO){var bP=e.getUTCMonth(),bQ,bR;if(bO<0){bQ=-((12-(bP-1)-1-bO)/12)|0}else{bQ=(bP-1+bO)/12|0}bR=bP+(bO-bQ*12);return new Date(Date.UTC(e.getUTCFullYear()+bQ,bR,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()))};o.parsePresModelDate=function(e){if(ss.isNullOrUndefined(e)){return null}var bO=(new RegExp('(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)( (\\d\\d):(\\d\\d):(\\d\\d))?')).exec(e);if(ss.isNullOrUndefined(bO)){return null}var bP=parseInt(bO[1],10);var bQ=parseInt(bO[2],10)-1;var bR=parseInt(bO[3],10);if(ss.isNullOrEmptyString(bO[4])){return new Date(Date.UTC(bP,bQ,bR))}else{var bS=parseInt(bO[5],10);var bT=parseInt(bO[6],10);var bU=parseInt(bO[7],10);return new Date(Date.UTC(bP,bQ,bR,bS,bT,bU))}};o.dateAsYear=function(e){return e.getUTCFullYear()};o.dateAsQuarter=function(e){var bO=o.$3(e);return parseInt(1+ss.Int32.div(bO-1,3))};o.dateAsMonth=function(e){return o.$3(e)};o.dateAsWeek=function(e){var bO=new Date(e.getUTCFullYear(),0,1);var bP=o.$2(e);var bQ=parseInt(1+(bP+o.$1(bO)-2)/7);return bQ};o.dateAsDay=function(e){return e.getUTCDate()};o.dateAsDayOfYear=function(e){return o.$2(e)};o.dateAsDayOfWeek=function(e){return o.$1(e)};o.dateAsMonthYear=function(e){var bO=o.$3(e)*10000+e.getUTCFullYear();return bO};o.dateAsMonthDayYear=function(e){var bO=o.$3(e)*1000000+e.getUTCDate()*10000+e.getUTCFullYear();return bO};o.dateTimeAsHour=function(e){return e.getUTCHours()};o.dateTimeAsMinute=function(e){return e.getUTCMinutes()};o.dateTimeAsSecond=function(e){return e.getUTCSeconds()};o.dateTimeAsOleDate=function(e){return bA.OleDateFromJsDate(e.getTime())};o.$2=function(e){var bO=e.getUTCFullYear();var bP=e.getUTCMonth();var bQ=e.getUTCDate();var bR=new Date(bO,0,1,12,0,0);var bS=new Date(bO,bP,bQ,12,0,0);var bT=Math.round((bS-bR)/86400000);return bT+1};o.$3=function(e){return e.getUTCMonth()+1};o.$1=function(e){return e.getUTCDay()+1};o.daysSinceEpoch=function(e){return Math.floor(e.getTime()/86400000)};global.tab.DateUtil=o;var p=function(e,bO){this.$2=null;this.$1=0;this.$0=null;Z.verifyValue(e,'action');this.$0=e;this.$1=bO};p.__typeName='tab.Debouncer';global.tab.Debouncer=p;var q=function(){this.$0=[]};q.__typeName='tab.DisposableHolder';global.tab.DisposableHolder=q;var r=function(){};r.__typeName='tab.DomUtil';r.$5=function(){return tab.Logger.lazyGetLogger(r)};r.get_documentBody=function(){return document.body};r.getComputedStyle=function(e){if(BrowserSupport.BrowserSupport.GetComputedStyle()){var bO=window.getComputedStyle(e);if(ss.isValue(bO)){return bO}}return e.style};r.getComputedZIndex=function(e){Z.verifyValue(e,'child');var bO=$(e);var bP=bO;var bQ=document.documentElement;var bR=document.body;while(bO.length!==0&&!ss.referenceEquals(bO[0],bR)&&!ss.referenceEquals(bO[0],bQ)){var bS=bO.css('position');if(bS==='absolute'||bS==='fixed'){bP=bO}bO=bO.offsetParent()}return r.$1(bP)};r.resize=function(e,bO){if(typeof(e['resize'])==='function'){e.resize(bO)}else{r.setMarginBox(e.domNode||e,bO)}};r.getContentBox=function(e){var bO=$(e);return{l:parseInt(bO.css('padding-left'),10)||0,t:parseInt(bO.css('padding-top'),10)||0,w:t.roundToInt(bO.width()),h:t.roundToInt(bO.height())}};r.setContentBox=function(e,bO){$(e).width(bO.w).height(bO.h)};r.setMarginBox=function(e,bO){r.setMarginBoxJQ($(e),bO)};r.setMarginBoxJQ=function(e,bO){var bP=e[0];var bQ=bP.style;var bR=window.getComputedStyle(bP);r.$2(bR,bO,bP);if(!isNaN(bO.t)){bQ.top=bO.t+'px'}if(!isNaN(bO.l)){bQ.left=bO.l+'px'}};r.setAbsolutePositionBox=function(e,bO){e.css({left:(bO.l||0)+'px',top:(bO.t||0)+'px',width:(bO.w||0)+'px',height:(bO.h||0)+'px'})};r.getMarginBox=function(e){return r.getMarginBoxJQ($(e))};r.getMarginBoxJQ=function(e){var bO=e.position();return{l:t.roundToInt(bO.left),t:t.roundToInt(bO.top),w:t.roundToInt(e.outerWidth(true)),h:t.roundToInt(e.outerHeight(true))}};r.getRectXY=function(e){var bO=t.roundToInt(r.getPageOffset$1(e).left);var bP=t.roundToInt(r.getPageOffset$1(e).top);var bQ=t.roundToInt(e.outerWidth(true));var bR=t.roundToInt(e.outerHeight(true));return{x:bO,y:bP,w:bQ,h:bR}};r.getRectXY$1=function(e,bO){var bP=r.getRectXY(e);if(bO){var bQ=r.docScroll();bP.x+=bQ.x;bP.y+=bQ.y}return bP};r.docScroll=function(){var e=ss.coalesce(window.pageXOffset,ss.coalesce(document.documentElement.scrollLeft,ss.coalesce(r.get_documentBody().scrollLeft,0)));var bO=ss.coalesce(window.pageYOffset,ss.coalesce(document.documentElement.scrollTop,ss.coalesce(r.get_documentBody().scrollTop,0)));return{x:e,y:bO}};r.isAncestorOf=function(e,bO){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(bO)){return false}return $(bO).parents().index(e)>=0};r.isEqualOrAncestorOf=function(e,bO){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(bO)){return false}return ss.referenceEquals(e,bO)||r.isAncestorOf(e,bO)};r.setElementPosition=function(e,bO,bP,bQ,bR){if(!ss.isValue(bR)||ss.unbox(bR)){var bS=ss.mkdict(['top','0px','left','0px']);var bT=(new ss.StringBuilder('translate3d(')).append(bO).append('px,').append(bP).append('px,').append('0px)').toString();bS[BrowserSupport.BrowserSupport.CssTransformName()]=bT;if(ss.isValue(bQ)){bS[BrowserSupport.BrowserSupport.CssTransitionName()+'-duration']=bQ}e.css(bS);return}var bU=ss.mkdict(['position','absolute','top',bP+'px','left',bO+'px']);bU[BrowserSupport.BrowserSupport.CssTransformName()]='';e.css(bU)};r.getElementPosition=function(e){return bc.fromPosition(e.offset())};r.getElementClientPosition=function(e){var bO=r.getElementPosition(e);bO.x-=$(document.documentElement).scrollLeft();bO.y-=t.roundToInt($(document.documentElement).scrollTop());return bO};r.getTransformOffset=function(e){if(ss.isNullOrUndefined(e)){return{left:0,top:0}}var bO=e.css('transform');if(ss.isNullOrEmptyString(bO)){return{left:0,top:0}}var bP=bO.split('(');var bQ=r.$7[bP[0]];if(ss.isNullOrUndefined(bQ)){return{left:0,top:0}}var bR=bP[1].split(',');return{left:ss.coalesce(t.parseDouble(bR[ss.unbox(bQ)]),0),top:ss.coalesce(t.parseDouble(bR[ss.unbox(bQ)+1]),0)}};r.getTransformScale=function(e){if(ss.isNullOrUndefined(e)){return 1}var bO=e.css('transform');if(ss.isNullOrEmptyString(bO)){return 1}var bP=bO.split('(');if(bP[0]==='scale'||bP[0]==='matrix'||bP[0]==='matrix3d'){return ss.coalesce(t.parseDouble(bP[1]),1)}else{return 1}};r.getPageOffset$1=function(e){var bO=r.getPageOffset(e[0]);return{left:bO.x,top:bO.y}};r.getPageOffset=function(e){var bO=e.getBoundingClientRect();var bP=document.documentElement.getBoundingClientRect();return{x:bO.left-bP.left,y:bO.top-bP.top}};r.getScrollPosition=function(e){return{left:e[0].scrollLeft,top:e[0].scrollTop}};r.scrollPosition=function(e,bO){e[0].scrollLeft=bO.left;e[0].scrollTop=bO.top};r.focusWithoutScrolling=function(e,bO){if(ss.isNullOrUndefined(bO)||bO.length===0){e()}else{bO.attr('data-tab-test-wait','');window.setTimeout(function(){var bP=r.getScrollPosition(bO);e();r.scrollPosition(bO,bP);bO.removeAttr('data-tab-test-wait')},200)}};r.roomAroundPosition=function(e){var bO=e.top-window.pageYOffset;var bP=window.pageYOffset+window.innerHeight-e.top;var bQ=e.left-window.pageXOffset;var bR=window.pageXOffset+window.innerWidth-e.left;return{roomAbove:bO,roomBelow:bP,roomLeft:bQ,roomRight:bR}};r.getElementRelativePosition=function(e,bO){if(ss.isNullOrUndefined(bO)){bO=e.parent()}var bP=e.offset();var bQ=bO.offset();return{x:t.roundToInt(bP.left)-t.roundToInt(bQ.left),y:t.roundToInt(bP.top)-t.roundToInt(bQ.top)}};r.parseWidthFromStyle=function(e){if(ss.isValue(e)&&!S.isNullOrEmpty$3(e.width)){return parseInt(e.width)}return Number.NaN};r.parseHeightFromStyle=function(e){if(ss.isValue(e)&&!S.isNullOrEmpty$3(e.height)){return parseInt(e.height)}return Number.NaN};r.createNamespacedEventName=function(e,bO){if(ss.isValue(bO)){return e+bO}return e.toString()};r.stopPropagationOfInputEvents=function(e,bO){var bP=function(bQ){bQ.stopPropagation()};r.handleInputEvents(e,bO,bP)};r.handleInputEvents=function(e,bO,bP){e.on(r.createNamespacedEventName('touchstart',bO),bP).on(r.createNamespacedEventName('touchcancel',bO),bP).on(r.createNamespacedEventName('touchend',bO),bP).on(r.createNamespacedEventName('touchmove',bO),bP).on(r.createNamespacedEventName('click',bO),bP).on(r.createNamespacedEventName('mousedown',bO),bP).on(r.createNamespacedEventName('mousemove',bO),bP).on(r.createNamespacedEventName('mouseup',bO),bP)};r.isFocusableTextElement=function(e){if(ss.isValue(e)&&ss.isValue(e.tagName)){var bO=e.tagName.toLowerCase();if(bO==='textarea'||bO==='input'||bO==='select'){return true}}return false};r.isCheckboxElement=function(e){if(ss.isValue(e)&&ss.isValue(e.tagName)){var bO=e.tagName.toLowerCase();var bP=$(e).attr('type');if(bO==='input'&&bP==='checkbox'){return true}}return false};r.handleTouchEvents=function(e){if(r.isCheckboxElement(e)){return false}if(r.isFocusableTextElement(e)){return false}return true};r.setCapture=function(e,bO){if(!BrowserSupport.BrowserSupport.MouseCapture()){return}e.setCapture(bO)};r.releaseCapture=function(){if(!BrowserSupport.BrowserSupport.MouseCapture()){return}document.releaseCapture()};r.blur=function(){var e=document.activeElement;if(ss.isValue(e)&&!ss.referenceEquals(e,r.get_documentBody())&&typeof(e['blur'])==='function'){e.blur()}};r.$0=function(e,bO){var bP=parseInt(e,10);return(isNaN(bP)?bO:bP)};r.getSizeFromCssPixelProperty=function(e,bO){var bP=e.css(bO);return r.$0(bP,0)};r.$4=function(e,bO,bP){var bQ=r.$0(e.marginLeft,0);var bR=r.$0(e.borderLeftWidth,0);var bS=r.$0(e.paddingLeft,0);var bT=r.$0(e.paddingRight,0);var bU=r.$0(e.borderRightWidth,0);var bV=r.$0(e.marginRight,0);var bW=Math.max(bO-bQ-bR-bS-bT-bU-bV,0);bP.style.width=bW+'px'};r.$3=function(e,bO,bP){var bQ=r.$0(e.marginTop,0);var bR=r.$0(e.borderTopWidth,0);var bS=r.$0(e.paddingTop,0);var bT=r.$0(e.paddingBottom,0);var bU=r.$0(e.borderBottomWidth,0);var bV=r.$0(e.marginBottom,0);var bW=Math.max(bO-bQ-bR-bS-bT-bU-bV,0);bP.style.height=bW+'px'};r.$2=function(e,bO,bP){if(bO.w>=0){r.$4(e,bO.w,bP)}if(bO.h>=0){r.$3(e,bO.h,bP)}};r.$1=function(e){Z.verifyValue(e,'o');var bO=e.css('z-index');if(_.isNumber(bO)){return bO}if(_.isString(bO)){if(!ss.isNullOrEmptyString(bO)&&bO!=='auto'&&bO!=='inherits'){return parseInt(bO,10)}}return 0};r.makeHtmlSafeId=function(e){return ss.replaceAllString(encodeURIComponent(e),'.','dot')};r.setSelectionRangeOnInput=function(e,bO,bP){if(BrowserSupport.BrowserSupport.SetSelectionRange()){try{e.setSelectionRange(bO,bP)}catch(bQ){}}};r.selectAllInputText=function(e){try{if(BrowserSupport.BrowserSupport.SetSelectionRange()){e.get(0).setSelectionRange(0,e.val().length)}else{e.select()}}catch(bO){}};r.setCursorPosition=function(e,bO){if(typeof(e['createTextRange'])==='function'){var bP=(e.createTextRange?e.createTextRange():null);bP.move('character',bO);bP.select();bP.scrollIntoView();e.focus()}else if(BrowserSupport.BrowserSupport.IsSafari()&&BrowserSupport.BrowserSupport.SetSelectionRange()){e.focus();e.setSelectionRange(bO,bO)}else{e.blur();e.selectionStart=e.selectionEnd=bO;e.focus()}};r.replaceSelection=function(e,bO){var bP=e.value;var bQ=bP.substr(0,e.selectionStart);var bR=bP.substring(e.selectionEnd);var bS=e.selectionStart+bO.length;e.value=bQ+bO+bR;r.setCursorPosition(e,bS)};r.setNativeTooltip=function(e,bO){var bP=ss.isNullOrEmptyString(bO);if(bP){e.removeAttr('title')}else{e.attr('title',bO)}if(tsConfig.is_mobile){e.children('.tab-mobileTooltip').remove();if(!bP){var bQ=$("<div class='tab-mobileTooltip'/>").text(bO);e.append(bQ)}}};r.nodeHasTextSelection=function(e){var bO=window.getSelection();for(var bP=bO.rangeCount-1;bP>=0;--bP){var bQ=bO.getRangeAt(bP);if(ss.referenceEquals(e,bQ.startContainer)||e.contains(bQ.startContainer)||ss.referenceEquals(e,bQ.endContainer)||e.contains(bQ.endContainer)){return true}}return false};r.generateUniqueId=function(){return'tab-ui-id-'+r.$8++};r.getIds=function(e){if(ss.isNullOrUndefined(e)){return[]}return e.map(function(bO,bP){return bP.id}).get()};r.asIDSelector=function(e){return'#'+e};r.asClassSelector=function(e){return'.'+e};r.toMsString=function(e){return e+'ms'};r.toPoint=function(e){return{x:ss.Int32.trunc(e.left),y:ss.Int32.trunc(e.top)}};global.tab.DomUtil=r;var s=function(){};s.__typeName='tab.DoubleRectXYUtil';s.constructDoubleRectXY=function(e,bO,bP,bQ){return{x:e,y:bO,w:bP-e,h:bQ-bO}};s.isEmpty=function(e){if(!ss.isValue(e)){return true}return e.w===0||e.h===0};s.isEqual=function(e,bO){return e.x===bO.x&&e.y===bO.y&&e.w===bO.w&&e.h===bO.h};s.isNull=function(e){return e.x===0&&e.y===0&&e.w===0&&e.h===0};s.inRect=function(e,bO){return bO.x>=e.x&&bO.x<e.x+e.w&&bO.y>=e.y&&bO.y<e.y+e.h};s.inRect$1=function(e,bO,bP,bQ,bR,bS){return bR>=e&&bR<e+bP&&bS>=bO&&bS<bO+bQ};s.intersectsWith=function(e,bO){return!(bO.x+bO.w<e.x||bO.y+bO.h<e.y||bO.x>e.x+e.w||bO.y>e.y+e.h)};s.outsetRect=function(e,bO,bP){return{x:e.x-bO,y:e.y-bP,w:e.w+bO+bO,h:e.h+bP+bP}};s.outsetRectInPlace=function(e,bO,bP){e.x-=bO;e.y-=bP;e.w+=2*bO;e.h+=2*bP};s.toEncompassingRectXY=function(e){var bO=Math.floor(e.x);var bP=Math.floor(e.y);var bQ=Math.ceil(e.x+e.w);var bR=Math.ceil(e.y+e.h);return{x:bO,y:bP,w:bQ-bO,h:bR-bP}};global.tab.DoubleRectXYUtil=s;var t=function(){};t.__typeName='tab.DoubleUtil';t.$0=function(){return tab.Logger.lazyGetLogger(t)};t.isApproximatelyEqual=function(e,bO){if(Math.abs(e-bO)<t.epsilon){return true}if(e===0){return false}var bP=bO/e;if(t.$3<=bP&&bP<=t.$5){return true}return false};t.isApproximatelyZero=function(e){return t.isApproximatelyEqual(0,e)};t.isLessThanAndNotApproximatelyEqual=function(e,bO){return e<bO&&!t.isApproximatelyEqual(e,bO)};t.isLessThanOrApproximatelyEqual=function(e,bO){return e<bO||t.isApproximatelyEqual(e,bO)};t.isGreaterThanAndNotApproximatelyEqual=function(e,bO){return e>bO&&!t.isApproximatelyEqual(e,bO)};t.isGreaterThanOrApproximatelyEqual=function(e,bO){return e>bO||t.isApproximatelyEqual(e,bO)};t.sigFigs=function(e,bO){if(e===0||bO===0){return e}var bP=Math.pow(10,bO-Math.floor(Math.log(Math.abs(e))/Math.LN10)-1);return ss.round(e*bP)/bP};t.roundToInt=function(e){return ss.round(e)};t.parseDouble=function(e){var bO=parseFloat(e);return(isFinite(bO)?bO:null)};t.isValidDouble=function(e){if(ss.isNullOrEmptyString(e)){return false}return $.isNumeric(e)};t.parse64BitInteger=function(e){var bO={};if(!ss.Int32.tryParse(e,bO)){return null}var bP=t.parseValidDouble(e);if(ss.Nullable$1.gt(bP,9.22337203685477E+18)||ss.Nullable$1.lt(bP,-9.22337203685477E+18)){return null}return bO.$};t.isValid32BitInteger=function(e){if(ss.isNullOrEmptyString(e)){return false}var bO=t.parse64BitInteger(e);if(ss.isNullOrUndefined(bO)){return false}return ss.Nullable$1.le(bO,2147483647)&&ss.Nullable$1.ge(bO,-2147483648)};t.isValid64BitInteger=function(e){if(ss.isNullOrEmptyString(e)){return false}var bO=t.parse64BitInteger(e);if(ss.isNullOrUndefined(bO)){return false}return true};t.parseValidDouble=function(e){if(ss.isNullOrEmptyString(e)){return Number.NaN}if(!t.isValidDouble(e)){return Number.NaN}return parseFloat(e)};t.multiplyBy100=function(e){return e*1000/10};t.truncateTwoDecimalPlaces=function(e){return ss.Int32.trunc(t.multiplyBy100(e))/100};t.roundTwoDecimalPlaces=function(e){return ss.round(t.multiplyBy100(e))/100};global.tab.DoubleUtil=t;var u=function(){};u.__typeName='tab.ErrorTrace';u.install=function(){var e=tsConfig.clientErrorReportingLevel;if(!ss.isNullOrEmptyString(e)){if(e==='debug'){u.$2=true}}u.$0('setTimeout');u.$0('setInterval')};u.wrap=function(bO){return function(){try{return bO.apply(this,Array.prototype.slice.call(arguments))}catch(bP){var e=ss.Exception.wrap(bP);u.report(e);throw bP}}};u.$0=function(e){var bO=window[e];var bP=function(){var bQ=ss.arrayClone(Array.prototype.slice.call(arguments));var bR=bQ[0];if(ss.isInstanceOfType(bR,Function)){bQ[0]=u.wrap(bR)}return bO.apply(this,bQ)};window[e]=bP};u.windowOnError=function(e,bO,bP,bQ,bR){var bS=d.$6(bR);var bT=new bp('onError',e,'window.onError',bS);u.$5.push(bT);if(ss.isValue(u.$3)){u.$3(e,bO,bP,bQ,bR)}return false};u.getStackTraceFor=function(e){var bO=new bp('stack',d.$2(e),e.name,null);if(u.$2){var bP=null;try{bP=d.$0(e)}catch(bQ){var inner=ss.Exception.wrap(bQ);if(u.$6){throw inner}}if(ss.isValue(bP)){return bP}}else{return bO}bO.traceMode='failed';return bO};u.hasTraces=function(){return u.$5.length>0};u.dequeueTraces=function(){var e=u.$5;u.$5=[];return e};u.installGlobalHandler=function(){if(u.$4||!u.$1){return}u.$3=window.onerror;window.onerror=u.windowOnError;u.$4=true};u.report=function(e){var bO=u.getStackTraceFor(e);u.$5.push(bO)};global.tab.ErrorTrace=u;var v=function(){};v.__typeName='tab.FeatureFlags';v.isEnabled=function(e){if(ss.isValue(tsConfig.features)&&ss.keyExists(tsConfig.features,e)){return tsConfig.features[e]}if(ss.isValue(v.$0)&&ss.keyExists(v.$0,e)){return v.$0[e]}return false};v.setDefaults=function(e){v.$0=e};global.tab.FeatureFlags=v;var w=function(){};w.__typeName='tab.FeatureParam';global.tab.FeatureParam=w;var x=function(){};x.__typeName='tab.FeatureParamsLookup';x.getBool=function(e){if(ss.keyExists(x.$4,e)){return x.$4[e]||false}return false};x.getFloat=function(e){if(ss.keyExists(x.$6,e)){return x.$6[e]}return null};x.getInt=function(e){if(ss.keyExists(x.$8,e)){return x.$8[e]}return null};x.getString=function(e){if(ss.keyExists(x.$b,e)){return x.$b[e]}return null};x.$1=function(e,bO,bP){x.$5.push(bO);x.$d[e]=bO;x.$4[bO]=bP};x.$2=function(e,bO){x.$9.push(bO);x.$d[e]=bO;x.$8[bO]=null};x.$3=function(e,bO){x.$c.push(bO);x.$d[e]=bO;x.$b[bO]=null};x.$0=function(){var e=window.self.location.search;var bO=ss.coalesce(tab.CookieHelper.getValueForCookie('featureParams'),'');var bP=((S.isNullOrEmpty$3(e)||S.isNullOrEmpty$3(bO))?(e+bO):(e+'&'+bO));var bQ=tab.UriExtensions.getUriQueryParameters(bP);var bR=new ss.ObjectEnumerator(bQ);try{while(bR.moveNext()){var bS=bR.current();var bT=bS.key.toLowerCase();var bU=0;if(ss.keyExists(x.$d,bT)){bU=x.$d[bT]}else{continue}if(bS.value.length>0){var bV=bS.value[0];if(ss.contains(x.$5,bU)){var bW=bV.toLowerCase()==='true';x.$4[bU]=bW}else if(ss.contains(x.$7,bU)){var bX=parseFloat(bV);x.$6[bU]=bX}else if(ss.contains(x.$9,bU)){var bY=parseInt(bV);x.$8[bU]=bY}else if(ss.contains(x.$c,bU)){x.$b[bU]=bV}else{continue}}else{continue}}}finally{bR.dispose()}};global.tab.FeatureParamsLookup=x;var y=function(){};y.__typeName='tab.GestureModelSettings';y.get_newModelEnabled=function(){return x.getBool(55)||v.isEnabled('TouchSmoothTooltips')};y.get_onboardingEnabled=function(){return x.getBool(56)||v.isEnabled('SmoothTooltipsOnboarding')};y.get_currentGestureModelVersion=function(){return(y.get_newModelEnabled()?'v2':'v1')};global.tab.GestureModelSettings=y;var z=function(){};z.__typeName='tab.GestureModelVersion';global.tab.GestureModelVersion=z;var A=function(){};A.__typeName='tab.HistoryUtil';A.pushState=function(e,bO,bP,bQ){if(BrowserSupport.BrowserSupport.HistoryApi()){try{e.history.pushState(bO,bP,bQ)}catch(bR){var e=ss.Exception.wrap(bR)}}};A.replaceState=function(e,bO,bP,bQ){if(BrowserSupport.BrowserSupport.HistoryApi()){try{e.history.replaceState(bO,bP,bQ)}catch(bR){var e=ss.Exception.wrap(bR)}}};global.tab.HistoryUtil=A;var B=function(){};B.__typeName='tab.HttpResponseCodes';global.tab.HttpResponseCodes=B;var C=function(){};C.__typeName='tab.IAppendableView';global.tab.IAppendableView=C;var D=function(){};D.__typeName='tab.IBrowserViewport';global.tab.IBrowserViewport=D;var E=function(){};E.__typeName='tab.ICommonBannerProvider';global.tab.ICommonBannerProvider=E;var F=function(){};F.__typeName='tab.ICommonDialogProvider';global.tab.ICommonDialogProvider=F;var G=function(){};G.__typeName='tab.InstrumentationTools';G.isArray=function(e){return ss.isInstanceOfType(e,Array)};G.isTypedArray=function(e){return ss.isInstanceOfType(e,Uint8Array)||ss.isInstanceOfType(e,Uint16Array)||ss.isInstanceOfType(e,Uint32Array)||ss.isInstanceOfType(e,Int32Array)||ss.isInstanceOfType(e,Float32Array)||ss.isInstanceOfType(e,Float64Array)};global.tab.InstrumentationTools=G;var H=function(e,bO){this.$0=0;this.$1=0;this.$0=e;this.$1=bO};H.__typeName='tab.IntegerRange';H.itemToTileRange=function(e,bO){var bP=new H(0,0);bP.set_from(Math.floor(e.get_from()/bO));bP.set_to(Math.floor(e.get_to()/bO));return bP};H.pixelToItemRange=function(e,bO){var bP=new H(0,0);bP.set_from(Math.floor(e.get_from()/bO));bP.set_to(Math.floor(e.get_to()/bO));return bP};H.pixelToTileRange=function(e,bO,bP){return H.itemToTileRange(H.pixelToItemRange(e,bO),bP)};H.isEqual=function(e,bO){return ss.isValue(e)&&ss.isValue(bO)&&e.get_to()===bO.get_to()&&e.get_from()===bO.get_from()};H.union=function(e,bO){if(ss.isNullOrUndefined(e)){return bO}if(ss.isNullOrUndefined(bO)){return e}var bP=new H(0,0);bP.set_from(Math.min(e.get_from(),bO.get_from()));bP.set_to(Math.max(e.get_to(),bO.get_to()));return bP};global.tab.IntegerRange=H;var I=function(e){var bO=function(){};ss.registerGenericInterfaceInstance(bO,I,[e],{get_viewModel:null,get_rootElement:null},function(){return[ss.IDisposable,C]});ss.setMetadata(bO,{variance:[1]});return bO};I.__typeName='tab.IView$1';ss.initGenericInterface(I,a,1);global.tab.IView$1=I;var J=function(){};J.__typeName='tab.IViewModel';global.tab.IViewModel=J;var K=function(){};K.__typeName='tab.IWidget';global.tab.IWidget=K;var L=function(){};L.__typeName='tab.jQueryEventExtensions';L.isOnlyMetaKeyPressed=function(e){return e.metaKey&&e.which===91};global.tab.jQueryEventExtensions=L;var M=function(){};M.__typeName='tab.ListExtensions';M.where=function(e){return function(bO,bP){var bQ=[];var bR=ss.getEnumerator(bO);try{while(bR.moveNext()){var bS=bR.current();if(bP(bS)){bQ.push(bS)}}}finally{bR.dispose()}return bQ}};M.except=function(e){return function(bO,bP){return M.where(e).call(null,bO,function(bQ){return!ss.contains(bP,bQ)})}};M.any=function(e){return function(bO,bP){for(var bQ=0;bQ<bO.length;bQ++){var bR=bO[bQ];if(bP(bR)){return true}}return false}};global.tab.ListExtensions=M;var N=function(){};N.__typeName='tab.LocaleStrings';global.tab.LocaleStrings=N;var O=function(){ss.Exception.call(this)};O.__typeName='tab.LoopBreakException';O.$ctor1=function(e){ss.Exception.call(this,e)};O.$ctor2=function(e,bO){ss.Exception.call(this,e,bO)};global.tab.LoopBreakException=O;var P=function(){};P.__typeName='tab.MapUtil';P.getZoomFactorForDesiredZoomLevel=function(e,bO){return Math.exp(-(Math.LN2*(bO-e)))};P.allowZoomAtCurrentLevel=function(e,bO){return e+P.convertZoomFactorToZoomLevel(bO)>=0};P.convertZoomFactorToZoomLevel=function(e){return-(Math.log(e)/Math.log(2))};P.allowZoomAtCurrentLevelLeaflet=function(e,bO){return e-bO>=0};P.getVisiblePixelWidth=function(e,bO,bP){var bQ=Math.pow(2,e)*bP;var bR=Math.floor(bO*bQ);return bR};P.getScrollDeltaForZoomFactor=function(e){return Math.floor(P.$1*(Math.log(e)/Math.log(2)))};P.getLeafletZoomOffsetForTileSize=function(e){return((e===P.$0)?-1:0)};P.calculateZoomFactor=function(e){var bO=ss.Int32.div(e,8);var bP=ss.Int32.div(bO,15);var bQ=1;var bR=ss.round(Math.log(bQ)/Math.log(2)*4)/4+bP/4;bQ=Math.pow(2,bR);return bQ};global.tab.MapUtil=P;var Q=function(){};Q.__typeName='tab.MapUtility';Q.forEachWithInterrupt=function(e,bO){return function(bP,bQ){try{bP.forEach(bQ)}catch(bR){bR=ss.Exception.wrap(bR);if(ss.isInstanceOfType(bR,O)){}else{throw bR}}}};Q.forEachWithInterrupt$1=function(e,bO){return function(bP,bQ){try{bP.forEach(function(bR,bS){bQ(bR,bS)})}catch(bR){bR=ss.Exception.wrap(bR);if(ss.isInstanceOfType(bR,O)){}else{throw bR}}}};Q.createCopy=function(e,bO){return function(bP){var bQ=new Map;bP.forEach(function(bR,bS){bQ.set(bS,bR)});return bQ}};global.tab.MapUtility=Q;var R=function(){this.$a=null;this.$b=null;this.$8=null;this.$7=null;this.$9=null;this.$a=[];this.$8=[];this.$9=null;this.$7=null};R.__typeName='tab.MetricsLogger';R.get_instance=function(){if(!ss.isValue(R.$c)){R.$c=new R}return R.$c};R.$3=function(e){return e+tabBootstrap.MetricsController.recordingStart};R.$1=function(e,bO){var bP=(bO?', ':',');var bQ=new ss.StringBuilder;bQ.append((bO?R.$a[e.eventType]:e.eventType.toString()));var bR=ss.getKeyCount(e.parameters);if(bR>0){bQ.append('=');bQ.append('{');var bS=0;var bT=(bO?': ':':');var bU=ss.getEnumerator(Object.keys(e.parameters));try{while(bU.moveNext()){var bV=bU.current();if(bV==='id'&&e.eventType!=='init'){continue}if(bS++>0){bQ.append(bP)}bQ.append((bO?R.$b[bV]:bV.toString()));bQ.append(bT);var bW=e.parameters[bV];R.$2(bQ,bW,bO)}}finally{bU.dispose()}bQ.append('}')}return bQ.toString()};R.$0=function(e,bO,bP){var bQ=(bP?', ':',');var bR=(bP?': ':':');var bS=ss.getKeyCount(bO);var bT=0;var bU=ss.getEnumerator(Object.keys(bO));try{while(bU.moveNext()){var bV=bU.current();if(bO.hasOwnProperty(bV)){var bW=bO[bV];e.append(bV);e.append(bR);R.$2(e,bW,bP);if(++bT<bS){e.append(bQ)}}}}finally{bU.dispose()}};R.$2=function(e,bO,bP){var bQ=typeof(bO);if(bQ==='number'&&Math.floor(bO)!==bO){e.append(bO.toFixed(1))}else if(bQ==='string'){if(bP||ss.isValue(bO)&&bO.indexOf('/')!==-1){var bR=new ss.StringBuilder;bR.append('"');bR.append(bO);bR.append('"');if(bP){e.append(bR)}else{e.append(encodeURIComponent(bR.toString()))}}else{e.append(encodeURIComponent(bO))}}else if($.isArray(bO)){e.append('[');e.append(bO);e.append(']')}else if(bQ==='object'){e.append('{');var bS=bO;R.$0(e,bS,bP);e.append('}')}else{e.append(bO)}};global.tab.MetricsLogger=R;var S=function(){};S.__typeName='tab.MiscUtil';S.get_pathName=function(){var e=tabBootstrap.Utility.get_locationWindow();return tab.WindowHelper.getLocation(e).pathname};S.get_urlPathnameParts=function(){var e=S.get_pathName();var bO=tsConfig.site_root;var bP=e.indexOf(bO,0);var bQ=e.substr(bP+bO.length);var bR=bQ.split('/');var bS={};bS[2]=bR[2];bS[3]=bR[3];bS[4]=bR[4];return bS};S.shallowEquals=function(e,bO){if(ss.referenceEquals(e,bO)){return true}if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(bO)){return false}var bP=Object.keys(e);var bQ=Object.keys(bO);if(bP.length!==bQ.length){return false}for(var bR=0;bR<bP.length;bR++){var bS=bP[bR];if(!bO.hasOwnProperty(bS)||!ss.referenceEquals(e[bS],bO[bS])){return false}}return true};S.percentEncode=function(e,bO){e=encodeURIComponent(e);if(ss.isNullOrUndefined(bO)){return e}var bP=new ss.StringBuilder;var bQ=0;while(bQ<e.length){var bR=e.substr(bQ,1);if(bR==='%'){bP.append(e.substr(bQ,3));bQ+=2}else if(!ss.keyExists(bO,bR)){bP.append('%').append(bR.charCodeAt(0).toString(16).toUpperCase())}else{bP.append(bR)}bQ++}return bP.toString()};S.encodeForWG=function(e){var bO={};var bP=function(bQ,bR){for(var bS=bQ;bS<=bR;bS++){var bT=String.fromCharCode(bS);bO[bT]=bT}};bP(97,122);bP(65,90);bP(48,57);bP(95,95);bP(45,45);e=S.percentEncode(e,bO);e=S.percentEncode(e,null);return e};S.isNullOrUndefined=function(e){if(ss.isNullOrUndefined(e)){return true}for(var bO=0;bO<e.length;bO++){if(ss.isNullOrUndefined(e[bO])){return true}}return false};S.isNullOrEmpty$2=function(e){if(ss.isNullOrUndefined(e)){return true}var bO=e;if(ss.isValue(bO['length'])&&bO['length']===0){return true}return false};S.isNullOrEmpty$3=function(e){return ss.isNullOrEmptyString(e)};S.isNullOrEmpty$1=function(e){return ss.isNullOrUndefined(e)||e.length===0};S.isNullOrEmpty=function(e){return ss.isNullOrUndefined(e)||e.length===0};S.isValidIndex=function(e,bO){return e>=0&&e<bO.length};S.toBoolean=function(e,bO){var bP=new RegExp('^(yes|y|true|t|1)$','i');if(S.isNullOrEmpty$3(e)){return bO}var bQ=e.match(bP);return!S.isNullOrEmpty$2(bQ)};S.shouldShowDataTab=function(){return tsConfig.allow_add_new_datasource&&v.isEnabled('DataToTheWeb')&&(!tsConfig.is_mobile||tsConfig.is_mobile&&v.isEnabled('DataToTheWebMobile'))};S.replaceUriQueryParameters=function(e,bO){if(ss.getKeyCount(bO)===0){return e}var bP=new ss.StringBuilder;var bQ=true;var bR=function(){bP.append((bQ?'?':'&'));bQ=false};var bS=_.keys(bO);for(var bT=0;bT<bS.length;bT++){var bU=bS[bT];var bV=bO[bU];var bW=encodeURIComponent(bU);if(ss.isNullOrUndefined(bV)||bV.length===0){bR();bP.append(bW)}else{for(var bX=0;bX<bV.length;bX++){var bY=bV[bX];bR();bP.append(bW).append('=').append(encodeURIComponent(bY))}}}var bZ='';var ca='';if(e.length>0){var cb=e.indexOf('?');var cc=e.indexOf('#');var cd=Math.min(((cb<0)?e.length:cb),((cc<0)?e.length:cc));ca=e.substr(0,cd);bZ=((cc<0)?'':e.substr(cc))}return ca+bP+bZ};S.sanatizeBoolean=function(e){if(ss.isNullOrUndefined(e)){return e}return e.toString().toLowerCase()==='true'};S.dispose$1=function(e){if(ss.isValue(e)){e.dispose()}return null};S.dispose=function(e){if(ss.isValue(e)){for(var bO=0;bO<e.length;bO++){var bP=e[bO];if(ss.isValue(bP)){bP.dispose()}}ss.clear(e)}return null};S.clearTimeout=function(e){if(ss.isValue(e)){window.clearTimeout(ss.unbox(e))}return null};S.clearInterval=function(e){if(ss.isValue(e)){window.clearInterval(ss.unbox(e))}return null};S.cloneObject=function(e){var bO=JSON.stringify(e,function(bP,bQ){if(ss.isInstanceOfType(bQ,Uint32Array)||ss.isInstanceOfType(bQ,Int32Array)||ss.isInstanceOfType(bQ,Float64Array)||ss.isInstanceOfType(bQ,Float32Array)){return Array.prototype.slice.call(bQ)}return bQ});return JSON.parse(bO)};global.tab.MiscUtil=S;var T=function(){};T.__typeName='tab.NaturalLanguageUtil';T.isNlpView=function(){if(!v.isEnabled('NLBox')){return false}return tsConfig.nlpLayoutMode==='landing'||tsConfig.nlpLayoutMode==='exploration'};global.tab.NaturalLanguageUtil=T;var U=function(){};U.__typeName='tab.NavigationMetricsCollector';U.collectMetrics=function(){if(typeof(window)!=='undefined'&&typeof(window.performance)!=='undefined'&&typeof(window.performance.timing)!=='undefined'&&typeof(tabBootstrap.MetricsEvent)!=='undefined'){U.$0=window.performance.timing;if('navigationStart'in U.$0){var e=U.$0[U.$1[0]];var bO=[];for(var bP=0;bP<U.$1.length;bP++){var bQ=U.$1[bP];var bR=U.$0[bQ];bR=((bR===0)?0:(bR-e));bO.push(bR)}var bS={};bS['v']=bO;var bT=new tabBootstrap.MetricsEvent('nav',1,bS);tabBootstrap.MetricsController.logEvent(bT)}}};global.tab.NavigationMetricsCollector=U;var V=function(e,bO){this.$1=null;this.$0=null;this.$1=e;this.$0=bO};V.__typeName='tab.ObjectAccessTracker';V.$0=function(e){return typeof(e)==='symbol'};global.tab.ObjectAccessTracker=V;var W=function(e){this.$2={};this.$1=null;this.$0=null;this.$0=e;W.trackedObjects[e]=this};W.__typeName='tab.ObjectCoverage';W.shouldTrack=function(e){if(ss.isNullOrUndefined(W.$0)){W.$0={};var bO=x.getString(47);if(!ss.isNullOrUndefined(bO)){var bP=bO.split(',');for(var bQ=0;bQ<bP.length;bQ++){var bR=bP[bQ];W.$0[bR]=true}}}return ss.keyExists(W.$0,e)&&W.$0[e]};global.tab.ObjectCoverage=W;var X=function(){};X.__typeName='tab.ObjectRegistry';X.registerType=function(e,bO){return function(){if(ss.isNullOrUndefined(X.$3)){X.$3={}}X.$3[ss.getTypeFullName(e)]=bO}};X.registerDeferredType=function(e){return function(){var bO=$.Deferred();if(ss.isNullOrUndefined(X.$2)){X.$2={}}X.$2[ss.getTypeFullName(e)]=bO}};X.resolveDeferredType=function(e){return function(bO){if(ss.isNullOrUndefined(X.$2)){return}X.$2[ss.getTypeFullName(e)].resolve(bO)}};X.newView$1=function(e){return function(bO,bP){return X.$1(e).call(null,bO,bP)}};X.newView=function(e){return function(bO){return X.$1(e).call(null,e,bO)}};X.newDeferred=function(e){return function(bO){var bP=e;if(ss.isNullOrUndefined(X.$2)){throw new ss.Exception('No deferred types registered')}var bQ=X.$2[ss.getTypeFullName(bP)];if(ss.isNullOrUndefined(bQ)){throw new ss.Exception('Unknown type: '+ss.getTypeFullName(bP))}var bR=$.Deferred();bQ.done(function(bS){bR.resolve(ss.applyConstructor(bS,bO))});return bR}};X.newWidget$2=function(e){return function(bO,bP){return X.$1(e).call(null,bO,bP)}};X.newWidget=function(e){return function(){return X.$1(e).call(null,e,[])}};X.newWidget$1=function(e){return function(bO){return X.$1(e).call(null,e,bO)}};X.$1=function(e){return function(bO,bP){if(ss.isNullOrUndefined(X.$3)){throw new ss.Exception('No types registered')}var bQ=X.$3[ss.getTypeFullName(bO)];if(ss.isNullOrUndefined(bQ)){throw new ss.Exception('Unknown view type: '+ss.getTypeFullName(bO))}var bR=((bP.length===0)?ss.createInstance(bQ):ss.applyConstructor(bQ,bP));return(X.$0(bQ,e)?bR:bR)}};X.newLegacyTooltip=function(e){return function(bO,bP,bQ){if(ss.isNullOrUndefined(X.$3)){throw new ss.Exception('No types registered')}var bR=X.$3[ss.getTypeFullName(bO)];if(ss.isNullOrUndefined(bR)){throw new ss.Exception('Unknown tooltip type: '+ss.getTypeFullName(bO))}var bS=new bR(bP,bQ);return bS}};X.newLegacyTooltipBehavior=function(e){return function(bO,bP){if(ss.isNullOrUndefined(X.$3)){throw new ss.Exception('No types registered')}var bQ=X.$3[ss.getTypeFullName(bO)];if(ss.isNullOrUndefined(bQ)){throw new ss.Exception('Unknown tooltip type: '+ss.getTypeFullName(bO))}var bR=new bQ(bP);return bR}};X.resolve=function(e){return function(bO){var bP=e;if(ss.isNullOrUndefined(X.$3)){throw new ss.Exception('No types registered')}var bQ=X.$3[ss.getTypeFullName(bP)];if(ss.isNullOrUndefined(bQ)){throw new ss.Exception('Unknown type: '+ss.getTypeFullName(bP))}return ss.applyConstructor(bQ,bO)}};X.$0=function(e,bO){return ss.isNullOrUndefined(ss.getGenericTypeDefinition(bO))||ss.isValue(ss.getGenericTypeDefinition(e))};global.tab.ObjectRegistry=X;var Y=function(){};Y.__typeName='tab.ObjectWriteDetectionProxy';global.tab.ObjectWriteDetectionProxy=Y;var Z=function(){};Z.__typeName='tab.Param';Z.createArgumentNullOrUndefinedException=function(e){var bO=new ss.Exception(e+' is null or undefined.');bO.paramName=e;return bO};Z.verifyString=function(e,bO){Z.verifyValue(e,bO);if(e.trim().length===0){var bP=new ss.Exception(bO+' contains only white space');bP.paramName=bO;Z.$1(bP);throw bP}};Z.verifyValue=function(e,bO){if(ss.isNullOrUndefined(e)){var bP=Z.createArgumentNullOrUndefinedException(bO);Z.$1(bP);throw bP}};Z.$1=function(e){if(Z.suppressAlerts){return}try{throw e}catch(bO){var exceptionWithStack=ss.Exception.wrap(bO);window.alert(Z.$0(exceptionWithStack))}};Z.$0=function(e){var bO;if(ss.isValue(e.stack)){bO=e.stack}else{bO=e.get_message()}return bO};global.tab.Param=Z;var ba=function(){};ba.__typeName='tab.PathnameKey';global.tab.PathnameKey=ba;var bb=function(){};bb.__typeName='tab.PointDUtil';bb.subtract=function(e,bO){return{x:e.x-bO.x,y:e.y-bO.y}};bb.timesScalar=function(e,bO){return{x:e.x*bO,y:e.y*bO}};bb.round=function(e){return{x:Math.round(e.x),y:Math.round(e.y)}};global.tab.PointDUtil=bb;var bc=function(){};bc.__typeName='tab.PointUtil';bc.fromPresModel=function(e){if(ss.isNullOrUndefined(e)){return null}return{x:e.x,y:e.y}};bc.toPresModel=function(e){if(ss.isNullOrUndefined(e)){return null}var bO={x:ss.round(e.x),y:ss.round(e.y)};return bO};bc.fromPosition=function(e){return{x:t.roundToInt(e.left),y:t.roundToInt(e.top)}};bc.fromPointD=function(e){return{x:t.roundToInt(e.x),y:t.roundToInt(e.y)}};bc.add=function(e,bO){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(bO)){return e}return{x:e.x+bO.x,y:e.y+bO.y}};bc.subtract=function(e,bO){return{x:e.x-bO.x,y:e.y-bO.y}};bc.distance=function(e,bO){Z.verifyValue(e,'first');Z.verifyValue(bO,'second');var bP=e.x-bO.x;var bQ=e.y-bO.y;return Math.sqrt(bP*bP+bQ*bQ)};bc.isWithinDistance=function(e,bO,bP){var bQ=e.x-bO.x;var bR=e.y-bO.y;return bQ*bQ+bR*bR<=bP*bP};bc.equals=function(e,bO){return ss.isValue(e)&&ss.isValue(bO)&&bO.x===e.x&&bO.y===e.y};global.tab.PointUtil=bc;var bd=function(e){this.$0=null;ss.EventArgs.call(this);this.$0=e};bd.__typeName='tab.PropertyChangedEventArgs';global.tab.PropertyChangedEventArgs=bd;var be=function(){};be.__typeName='tab.ReadOnlyProxy';global.tab.ReadOnlyProxy=be;var bf=function(){};bf.__typeName='tab.RecordCast';bf.rectPresModelAsRectXY=function(e){return(ss.isNullOrUndefined(e)?null:{x:e.x,y:e.y,w:e.w,h:e.h})};bf.doubleRectPresModelAsDoubleRectXY=function(e){return(ss.isNullOrUndefined(e)?null:{x:e.doubleLeft,y:e.doubleTop,w:e.width,h:e.height})};bf.sizeAsSizePresModel=function(e){return(ss.isNullOrUndefined(e)?null:{w:e.w,h:e.h})};global.tab.RecordCast=bf;var bg=function(){};bg.__typeName='tab.RectUtil';bg.isEmpty=function(e){return e.w===0||e.h===0};bg.isEqual=function(e,bO){return e.t===bO.t&&e.l===bO.l&&e.w===bO.w&&e.h===bO.h};bg.inRect=function(e,bO){return bO.x>=e.l&&bO.x<e.l+e.w&&bO.y>=e.t&&bO.y<e.t+e.h};bg.intersectsWith=function(e,bO){return!(bO.l+bO.w<e.l||bO.t+bO.h<e.t||bO.l>e.l+e.w||bO.t>e.t+e.h)};bg.intersect=function(e,bO){if(!bg.intersectsWith(e,bO)||bg.isEmpty(bO)||bg.isEmpty(e)){return{l:0,t:0,w:0,h:0}}var bP=Math.max(e.l,bO.l);var bQ=Math.max(e.t,bO.t);var bR=Math.min(e.l+e.w,bO.l+bO.w);var bS=Math.min(e.t+e.h,bO.t+bO.h);return{l:bP,t:bQ,w:bR-bP,h:bS-bQ}};bg.translateRectToFitInBounds=function(e,bO){var bP=bO.t;var bQ=bO.l;var bR=bO.t+bO.h-e.h;var bS=bO.l+bO.w-e.w;var bT=Math.max(Math.min(bR,e.t),bP);var bU=Math.max(Math.min(bS,e.l),bQ);return{l:bU,t:bT,w:e.w,h:e.h}};bg.toRectXY=function(e){return{x:e.l,y:e.t,w:e.w,h:e.h}};global.tab.RectUtil=bg;var bh=function(){};bh.__typeName='tab.RectXYUtil';bh.set=function(e,bO){e.x=bO.x;e.y=bO.y;e.w=bO.w;e.h=bO.h};bh.set$1=function(e,bO,bP,bQ,bR){e.x=bO;e.y=bP;e.w=bQ;e.h=bR};bh.isEmpty=function(e){if(!ss.isValue(e)){return true}return e.w===0||e.h===0};bh.isEqual=function(e,bO){return e.x===bO.x&&e.y===bO.y&&e.w===bO.w&&e.h===bO.h};bh.isNull=function(e){return e.x===0&&e.y===0&&e.w===0&&e.h===0};bh.inRect=function(e,bO){return bO.x>=e.x&&bO.x<e.x+e.w&&bO.y>=e.y&&bO.y<e.y+e.h};bh.inRect$1=function(e,bO,bP){return bO>=e.x&&bO<e.x+e.w&&bP>=e.y&&bP<e.y+e.h};bh.inRectPointF=function(e,bO){return bO.x>=e.x&&bO.x<e.x+e.w&&bO.y>=e.y&&bO.y<e.y+e.h};bh.inRectPointF$1=function(e,bO,bP){return bO>=e.x&&bO<e.x+e.w&&bP>=e.y&&bP<e.y+e.h};bh.intersectsWith=function(e,bO){return!(bO.x+bO.w<e.x||bO.y+bO.h<e.y||bO.x>e.x+e.w||bO.y>e.y+e.h)};bh.intersectsWith$1=function(e,bO,bP,bQ,bR){return!(bO+bQ<e.x||bP+bR<e.y||bO>e.x+e.w||bP>e.y+e.h)};bh.intersectsWithMoreThanSharedEdge=function(e,bO){return!(bO.x+bO.w<=e.x||bO.y+bO.h<=e.y||bO.x>=e.x+e.w||bO.y>=e.y+e.h)};bh.toPresModel=function(e){return{x:e.x|0,y:e.y|0,w:e.w|0,h:e.h|0}};bh.fromPresModel=function(e){return{x:e.x|0,y:e.y|0,w:e.w|0,h:e.h|0}};bh.clone=function(e){return{x:e.x,y:e.y,w:e.w,h:e.h}};bh.nonemptyify=function(e){return{x:e.x,y:e.y,w:Math.max(1,e.w),h:Math.max(1,e.h)}};bh.intersectsWithAny=function(e,bO){var bP=false;for(var bQ=0;bQ<bO.length;bQ++){var bR=bO[bQ];if(ss.isNullOrUndefined(bR)){continue}if(bh.intersectsWith(e,bR)){bP=true;break}}return bP};bh.intersectsWithAny$1=function(e,bO,bP){if(bO.y+bO.h<e.y||bO.y>e.y+e.h){return false}var bQ=e.x;var bR=e.x+e.w;for(var bS=0;bS<bP.length;bS++){var bT=bP[bS];var bU=bO.x+bT;var bV=bU+bO.w;if(!(bV<bQ||bU>bR)){return true}}return false};bh.completelyContains=function(e,bO){return bh.inRect(e,{x:bO.x,y:bO.y})&&bh.inRect(e,{x:bO.x+bO.w-1,y:bO.y+bO.h-1})};bh.completelyContains$1=function(e,bO,bP,bQ,bR){return bh.inRect$1(e,bO,bP)&&bh.inRect$1(e,bO+bQ-1,bP+bR-1)};bh.toRect=function(e){return{l:e.x,t:e.y,w:e.w,h:e.h}};bh.offsetRect=function(e,bO){return{x:e.x+bO.x,y:e.y+bO.y,w:e.w,h:e.h}};bh.offsetRectXY=function(e,bO,bP){return{x:e.x+bO,y:e.y+bP,w:e.w,h:e.h}};bh.offsetRectXYInPlace=function(e,bO,bP){e.x+=bO;e.y+=bP};bh.offsetRectF=function(e,bO){return{x:e.x+Math.round(bO.x),y:e.y+Math.round(bO.y),w:e.w,h:e.h}};bh.outsetRect=function(e,bO,bP){return{x:e.x-bO,y:e.y-bP,w:e.w+bO+bO,h:e.h+bP+bP}};bh.outsetRectInPlace=function(e,bO,bP){e.x-=bO;e.y-=bP;e.w+=2*bO;e.h+=2*bP};bh.outsetRectSizeF=function(e,bO){return bh.outsetRect(e,Math.ceil(bO.w),Math.ceil(bO.h))};bh.encompassCircleInPlace=function(e,bO,bP,bQ){var bR=bQ*2;var bS=Math.floor(bO-bQ+0.5);var bT=Math.floor(bP-bQ+0.5);var bU=Math.floor(bR+0.5);bh.unionInPlace$1(e,bS,bT,bU,bU)};bh.union=function(e,bO){if(bh.isEmpty(e)){return bh.clone(bO)}if(bh.isEmpty(bO)){return bh.clone(e)}var bP=Math.min(e.x,bO.x);var bQ=Math.min(e.y,bO.y);var bR=Math.max(e.x+e.w,bO.x+bO.w);var bS=Math.max(e.y+e.h,bO.y+bO.h);return{x:bP,y:bQ,w:bR-bP,h:bS-bQ}};bh.unionInPlace$1=function(e,bO,bP,bQ,bR){if(bh.isEmpty(e)){bh.set$1(e,bO,bP,bQ,bR);return}if(bQ===0||bR===0){return}var bS=Math.min(e.x,bO);var bT=Math.min(e.y,bP);var bU=Math.max(e.x+e.w,bO+bQ);var bV=Math.max(e.y+e.h,bP+bR);bh.set$1(e,bS,bT,bU-bS,bV-bT)};bh.unionInPlace=function(e,bO){bh.unionInPlace$1(e,bO.x,bO.y,bO.w,bO.h)};bh.unionAll=function(e){var bO=e.length;if(bO===0){return{x:0,y:0,w:0,h:0}}var bP=e[0];var bQ=bP.x;var bR=bP.y;var bS=bP.x+bP.w;var bT=bP.y+bP.h;for(var bU=1;bU<bO;bU++){bP=e[bU];bQ=Math.min(bQ,bP.x);bR=Math.min(bR,bP.y);bS=Math.max(bS,bP.x+bP.w);bT=Math.max(bT,bP.y+bP.h)}return{x:bQ,y:bR,w:bS-bQ,h:bT-bR}};bh.rectXYFromCorners=function(e,bO){return bh.rectXYFromCorners$2(e.x,e.y,bO.x,bO.y)};bh.rectXYFromCorners$1=function(e,bO){var bP=Math.round(Math.min(e.x,bO.x));var bQ=Math.round(Math.min(e.y,bO.y));var bR=Math.abs(Math.round(e.x-bO.x));var bS=Math.abs(Math.round(e.y-bO.y));return{x:bP,y:bQ,w:bR,h:bS}};bh.rectXYFromCorners$2=function(e,bO,bP,bQ){var bR=Math.round(Math.min(e,bP));var bS=Math.round(Math.min(bO,bQ));var bT=Math.abs(Math.round(e-bP));var bU=Math.abs(Math.round(bO-bQ));return{x:bR,y:bS,w:bT,h:bU}};bh.rectXYFromBBoxRectF=function(e){return bh.rectXYFromMinAndMax(e.minX,e.minY,e.maxX,e.maxY)};bh.rectXYFromMinAndMax=function(e,bO,bP,bQ){var bR=Math.floor(e);var bS=Math.floor(bO);var bT=Math.ceil(bP);var bU=Math.ceil(bQ);return{x:bR,y:bS,w:bT-bR,h:bU-bS}};bh.dialate=function(e,bO){var bP=e.x-bO;var bQ=e.y-bO;var bR=e.w+2*bO;var bS=e.h+2*bO;return{x:bP,y:bQ,w:bR,h:bS}};bh.intersect=function(e,bO){if(!bh.intersectsWith(e,bO)||bh.isEmpty(bO)||bh.isEmpty(e)){return{x:0,y:0,w:0,h:0}}var bP=Math.max(e.x,bO.x);var bQ=Math.max(e.y,bO.y);var bR=Math.min(e.x+e.w,bO.x+bO.w);var bS=Math.min(e.y+e.h,bO.y+bO.h);return{x:bP,y:bQ,w:bR-bP,h:bS-bQ}};bh.intersectInPlace=function(e,bO){if(!bh.intersectsWith(e,bO)||bh.isEmpty(e)||bh.isEmpty(bO)){bh.set$1(e,0,0,0,0);return}var bP=Math.max(e.x,bO.x);var bQ=Math.max(e.y,bO.y);var bR=Math.min(e.x+e.w,bO.x+bO.w);var bS=Math.min(e.y+e.h,bO.y+bO.h);bh.set$1(e,bP,bQ,bR-bP,bS-bQ)};bh.shiftCoordsTowardsCenter=function(e,bO,bP){if(ss.isNullOrUndefined(bO)){return e}var bQ={x:e.x,y:e.y};bQ=bh.horizontalShiftCoordsTowardsCenter(bQ,bO,bP);return bh.verticalShiftCoordsTowardsCenter(bQ,bO,bP)};bh.horizontalShiftCoordsTowardsCenter=function(e,bO,bP){if(ss.isNullOrUndefined(bO)){return e}var bQ={x:e.x,y:e.y};if(bQ.x<=bO.x+bP){bQ.x+=bP}else if(bQ.x>=bO.x+bO.w-2*bP){bQ.x-=bP}return bQ};bh.verticalShiftCoordsTowardsCenter=function(e,bO,bP){if(ss.isNullOrUndefined(bO)){return e}var bQ={x:e.x,y:e.y};if(bQ.y<=bO.y+bP){bQ.y+=bP}else if(bQ.y>=bO.y+bO.h-2*bP){bQ.y-=bP}return bQ};bh.clampCoords=function(e,bO){var bP=Math.min(Math.max(bO.x,e.x),bO.x+bO.w);var bQ=Math.min(Math.max(bO.y,e.y),bO.y+bO.h);return{x:bP,y:bQ}};bh.getChangedRects=function(e,bO){var bP=[];if(!ss.isValue(e)||!ss.isValue(bO)||!bh.intersectsWith(e,bO)){return bP}var bQ=e.x+e.w;var bR=e.y+e.h;var bS=bO.x+bO.w;var bT=bO.y+bO.h;var bU=Math.min(e.x,bO.x);var bV=Math.max(e.x,bO.x);var bW=Math.min(bQ,bS);var bX=Math.max(bQ,bS);var bY=Math.min(e.y,bO.y);var bZ=Math.max(e.y,bO.y);var ca=Math.min(bR,bT);var cb=Math.max(bR,bT);var cc={x:bU,y:bY,w:bX-bU,h:bZ-bY};var cd={x:bU,y:bZ,w:bV-bU,h:ca-bZ};var ce={x:bW,y:bZ,w:bX-bW,h:ca-bZ};var cf={x:bU,y:ca,w:bX-bU,h:cb-ca};if(!bh.isEmpty(cc)){bP.push(cc)}if(!bh.isEmpty(cd)){bP.push(cd)}if(!bh.isEmpty(ce)){bP.push(ce)}if(!bh.isEmpty(cf)){bP.push(cf)}return bP};bh.reduceRectangles=function(e){if(ss.isNullOrUndefined(e)){return null}var bO=e.length;if(bO===1){return e}var bP=new Array(bO);for(var bQ=0;bQ<bO;bQ++){var bR=bP[bQ]||e[bQ];bP[bQ]=bR;if(bh.isEmpty(bR)){continue}for(var bS=bQ+1;bS<bO;bS++){var bT=bP[bS]||e[bS];if(bh.isEmpty(bT)){continue}var bU=bh.intersect(bR,bT);if(bh.isEmpty(bU)){continue}var bV=bh.$0(bR,bU);if(ss.referenceEquals(bV,bR)){bT=bh.$0(bT,bU)}bP[bQ]=bV;bP[bS]=bT}}for(var bW=bP.length-1;bW>=0;bW--){if(bh.isEmpty(bP[bW])){bP.splice(bW,1)}}return bP};bh.$0=function(e,bO){if(bO.x===e.x&&bO.w===e.w){if(bO.y>e.y){return{x:e.x,y:e.y,w:e.w,h:e.h-bO.h}}else{return{x:e.x,y:e.y+bO.h,w:e.w,h:e.h-bO.h}}}else if(bO.y===e.y&&bO.h===e.h){if(bO.x>e.x){return{x:e.x,y:e.y,w:e.w-bO.w,h:e.h}}else{return{x:e.x+bO.w,y:e.y,w:e.w-bO.w,h:e.h}}}return e};bh.getCenter=function(e){return{x:e.x+ss.Int32.div(e.w,2),y:e.y+ss.Int32.div(e.h,2)}};global.tab.RectXYUtil=bh;var bi=function(){};bi.__typeName='tab.RegionRectUtil';bi.sizesAreEqual=function(e,bO){return ss.isValue(e)&&ss.isValue(bO)&&e.h===bO.h&&e.w===bO.w};global.tab.RegionRectUtil=bi;var bj=function(){};bj.__typeName='tab.ScrollCapabilities';global.tab.ScrollCapabilities=bj;var bk=function(){};bk.__typeName='tab.ScrollCapabilitiesUtil';bk.hasCapabilities=function(e,bO){return(e&bO)===bO};global.tab.ScrollCapabilitiesUtil=bk;var bl=function(){};bl.__typeName='tab.SetUtilities';bl.interserctWith=function(e){return function(bO,bP){var bQ=new Set;for(var bR=0;bR<bP.length;bR++){var bS=bP[bR];if(bO.has(bS)){bQ.add(bS)}}bO.forEach(function(bT){if(!bQ.has(bT)&&_.contains(bP,bT)){bQ.add(bT)}});return bQ}};bl.getValues=function(e){return function(bO){var bP=[];bO.forEach(function(bQ){bP.push(bQ)});return bP}};bl.addAll=function(e){return function(bO,bP){for(var bQ=0;bQ<bP.length;bQ++){var bR=bP[bQ];bO.add(bR)}}};bl.symmetricDifferenceWith=function(e){return function(bO,bP){var bQ=new Set;bO.forEach(function(bR){if(!bP.has(bR)){bQ.add(bR)}});bP.forEach(function(bR){if(!bO.has(bR)){bQ.add(bR)}});return bQ}};global.tab.SetUtilities=bl;var bm=function(){};bm.__typeName='tab.SizeUtil';bm.isEmpty=function(e){return e.w===0&&e.h===0};bm.union=function(e,bO){return{w:Math.max(e.w,bO.w),h:Math.max(e.h,bO.h)}};bm.unionPresModels=function(e,bO){var bP={};bP.w=Math.max(e.w,bO.w);bP.h=Math.max(e.h,bO.h);return bP};bm.add=function(e,bO){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(bO)){return e}return{w:e.w+bO.w,h:e.h+bO.h}};bm.subtract=function(e,bO){return{w:e.w-bO.w,h:e.h-bO.h}};bm.equals=function(e,bO){return ss.isValue(e)&&ss.isValue(bO)&&bO.w===e.w&&bO.h===e.h};global.tab.SizeUtil=bm;var bn=function(){};bn.__typeName='tab.SourceCacheForErrorStacks';bn.$1=function(e){if(ss.isNullOrUndefined(e)){return[]}if(!ss.keyExists(bn.$4,e)){var bO='';if(e.indexOf(document.domain)>-1){bO=bn.$3(e)}bn.$4[e]=(ss.isNullOrEmptyString(bO)?[]:bO.split('\n'))}return bn.$4[e]};bn.$2=function(e,bO){var bP=new RegExp('function ([^(]*)\\(([^)]*)\\)');var bQ=new RegExp('[\'"]?([0-9A-Za-z$_]+)[\'"]?\\s*[:=]\\s*(function|eval|new Function)');var bR='';var bS=10;var bT=bn.$1(e);if(bT.length===0){return'?'}for(var bU=0;bU<bS;bU++){bR=bT[bO]+bR;if(!ss.isNullOrEmptyString(bR)){var bV=bQ.exec(bR);if(ss.isValue(bV)&&bV.length>0){return bV[1]}bV=bP.exec(bR);if(ss.isValue(bV)&&bV.length>0){return bV[1]}}}return'?'};bn.$0=function(e,bO,bP){var bQ=bn.$1(e);if(ss.isNullOrUndefined(bQ)||bQ.length===0){return null}var bR=[];var bS=60;var bT=bQ[bO];var bU=Math.max(0,bP-bS);var bV=Math.min(bP+bS,bT.length);bR.push(bT.substr(bU,bV-bU));return bR};bn.$3=function(e){if(!bn.$6){return''}try{var bO=new XMLHttpRequest;bO.open('GET',e,false);bO.send('');return bO.responseText}catch(bP){return''}};global.tab.SourceCacheForErrorStacks=bn;var bo=function(e,bO,bP,bQ,bR){this.url=null;this.lineNo=0;this.columnNo=0;this.functionName=null;this.context=null;this.url=e;this.lineNo=bO-1;this.columnNo=bP;this.context=bn.$0(this.url,this.lineNo,bP)||[bQ];var bS=bR;if(ss.isNullOrUndefined(bS)){bS=bn.$2(this.url,this.lineNo)}this.functionName=bS};bo.__typeName='tab.StackLocation';global.tab.StackLocation=bo;var bp=function(e,bO,bP,bQ){this.userAgent=window.navigator.userAgent;this.message=null;this.url=null;this.traceMode=null;this.locations=null;this.isIncomplete=false;this.name=null;this.traceMode=e;this.message=bO;this.url=document.URL;this.name=bP;this.locations=bQ||[]};bp.__typeName='tab.StackTrace';global.tab.StackTrace=bp;var bq=function(){tab.BaseLogAppender.call(this)};bq.__typeName='tab.StackTraceAppender';global.tab.StackTraceAppender=bq;var br=function(e,bO){this.$0=null;this.$1=null;this.$0=e;this.$1=bO};br.__typeName='tab.StringTuple';global.tab.StringTuple=br;var bs=function(){};bs.__typeName='tab.StyleUtil';bs.appendCSSRule=function(e,bO){bs.appendCSSRuleToStyleSheet$1('tab-appendedCustomStyle',e,bO)};bs.appendCSSRuleToStyleSheet=function(e,bO,bP){var bQ=bO+' {\n'+bs.createCSSRules(bP)+'}\n';var bR=e.cssRules.length;e.insertRule(bQ,bR)};bs.appendCSSRuleToStyleSheet$1=function(e,bO,bP){if(!ss.keyExists(bs.$3,e)){bs.$0(e)}var bQ=bs.$3[e]||bs.$1(e);bs.appendCSSRuleToStyleSheet(bQ,bO,bP)};bs.createCSSRules=function(e){var bO='';var bP=_.keys(e);for(var bQ=0;bQ<bP.length;bQ++){var bR=bP[bQ];var bS=e[bR];if(!ss.isNullOrEmptyString(bS)){bO+=bR+':'+bS+';\n'}}return bO};bs.clearDefaultStyleSheet=function(){bs.clearStyleSheet('tab-appendedCustomStyle')};bs.clearStyleSheet=function(e){var bO=bs.$3[e];if(ss.isNullOrUndefined(bO)){return}var bP=bO.ownerNode;if(ss.isValue(bP)&&ss.isValue(bP.parentNode)){bP.parentNode.removeChild(bP);delete bs.$3[e]}};bs.isValidCssClassName=function(e){var bO=e.match(bs.$2);return ss.isValue(bO)};bs.$0=function(e){var bO=document.createElement('style');bO.setAttribute('type','text/css');bO.id=e;bO.appendChild(document.createTextNode(''));document.head.appendChild(bO);bs.$3[e]=bs.$1(e);return bO};bs.$1=function(e){var bO=document.getElementById(e);return bO.sheet};global.tab.StyleUtil=bs;var bt=function(e,bO,bP,bQ){this.$3=null;this.$1=0;this.$0=0;this.$2=0;this.$3={x:e,y:bO};this.$1=bP;this.$0=1/bP;this.$2=bQ};bt.__typeName='tab.Transform';bt.none=function(){return bt.$0};bt.offset=function(e,bO){return((e===0&&bO===0)?bt.$0:new bt(e,bO,1,3))};bt.pixelToDomain=function(e,bO,bP){if(t.isApproximatelyZero(e)&&t.isApproximatelyZero(bO)&&t.isApproximatelyEqual(1,bP)){return bt.$0}return new bt(e,bO,bP,1)};bt.domainToPixel=function(e,bO,bP){if(t.isApproximatelyZero(e)&&t.isApproximatelyZero(bO)&&t.isApproximatelyEqual(1,bP)){return bt.$0}return new bt(e,bO,bP,2)};global.tab.Transform=bt;var bu=function(){this.$0=null;this.reset()};bu.__typeName='tab.TransformationMatrix';global.tab.TransformationMatrix=bu;var bv=function(){};bv.__typeName='tab.TransformationType';global.tab.TransformationType=bv;var bw=function(){};bw.__typeName='tab.UriUtil';bw.get_helpVersion=function(){var e='.';var bO=tsConfig.externalVersion.split(e);if(bO.length>=2){var bP=bO[0];var bQ=bO[1];if($.isNumeric(bP)&&$.isNumeric(bQ)){return[bP,bQ].join(e)}}return'0.0'};bw.$0=function(){return(tsConfig.is_saas?'online':'server')};bw.$1=function(){if(ss.isNullOrUndefined(tsConfig.language)){return'en-us'}switch(tsConfig.language){case'de':{return'de-de'}case'en':{return'en-us'}case'es':{return'es-es'}case'fr':{return'fr-fr'}case'ja':{return'ja-jp'}case'ko':{return'ko-kr'}case'pt':{return'pt-br'}case'zh':{return'zh-cn'}default:{return'en-us'}}};bw.makeHelpUri=function(e,bO){var bP;if(tsConfig.useOfflineHelp){bP=bw.getOfflineHelpHref(bO)}else{var bQ=(!ss.isNullOrEmptyString(tsConfig.serverPlatform)?ss.formatString('platform={0}&',tsConfig.serverPlatform.toLowerCase()):'');bP=ss.formatString('{0}/{1}/app/{2}?edition={3}&lang={1}&{5}version={4}','http://www.tableau.com',bw.$1(),e,bw.$0(),bw.get_helpVersion(),bQ)}return bP};bw.getOfflineHelpHref=function(e){var bO=ss.replaceAllString(bw.$1(),'-','_');return ss.formatString('/offline_help/{0}/help.htm#{1}',bO,e)};bw.makeHelpSearchUri=function(e){var bO=encodeURIComponent(e);if(tsConfig.useOfflineHelp){return bw.getOfflineHelpHref(ss.formatString('search-{0}',bO))}return((bw.$1()==='en-us')?ss.formatString('{0}/search/support/{1}','http://www.tableau.com',bO):ss.formatString('{0}/{1}/search/support/{2}','http://www.tableau.com',bw.$1(),bO))};bw.makeSupportUri=function(){return(tsConfig.useOfflineHelp?bw.getOfflineHelpHref('support'):'http://www.tableau.com')+'/support'};global.tab.UriUtil=bw;var bx=function(){this.$2=null;tab.BaseLogAppender.call(this)};bx.__typeName='tab.WindowAppender';global.tab.WindowAppender=bx;var by=function(){};by.__typeName='tab.ZIndexConstants';global.tab.ZIndexConstants=by;var bz=function(){};bz.__typeName='tableau.format';bz.get_isO8601DateFormat=function(){return bz.$17};bz.get_isO8601DateTimeFormat=function(){return bz.$18};bz.get_isO8601TimeFormat=function(){return bz.$19};bz.get_defaultLocaleStrings=function(){return bz.$14};bz.get_baseTimestamp=function(){return bz.$10};bz.convertFullwidthNumberToAscii=function(e){var bO=ss.getEnumerator(Object.keys(bz.$15));try{while(bO.moveNext()){var bP=bO.current();e=ss.replaceAllString(e,bP,bz.$15[bP])}}finally{bO.dispose()}return e};bz.formatDataValue=function(e,bO,bP,bQ,bR){var bS=e.s;if(ss.isNullOrUndefined(bS)||ss.isNullOrUndefined(bS)){var bT=(('t'in e)?e.t:'');var bU=e.v;switch(bT){case's':{return bU}case'b':{return bU.toString()}case'i':{return bz.formatDataValueInt(bO,bP,bU)}case'r':{if(typeof(bU)!=='number'){bU=parseFloat(bU)}return bz.$k(bU,bT,bP,bQ,bO)}case't':{return(_.isDate(bU)?bz.formatJsDateTime(bU,bP,bR,bT):bz.$h((_.isNumber(e.v)?e.v:parseFloat(e.v)),bP,bR,bT))}case'd':{return(_.isDate(bU)?bz.formatJsDateTime(bU,bP,0,bT):bz.$h((_.isNumber(e.v)?e.v:parseFloat(e.v)),bP,0,bT))}}throw new ss.Exception('Invalid Tableau Format Type')}if(bS==='n'){return'null'}if(bS==='m'){return tab.Strings.SpecialMissing}return'#special:'+bS+'#'};bz.formatDataValueInt=function(e,bO,bP){if(typeof(bP)!=='number'){bP=parseInt(bP,10)}if(e==='d'){if(ss.isNullOrUndefined(bO)||bO.length!==10){return bz.$j(bP).toString()}var bQ=bO;var bR=bQ[0];switch(bR){case'':{var bS=ss.arrayClone(bQ);bS[2]='f';return bz.$e(bP,bS)}default:{return bz.$e(bP,bQ)}}}return bz.$e(bP,bO)};bz.parseQuantitativeDataValue=function(e,bO,bP,bQ,bR){switch(bO){case'i':{return parseInt(bz.reformatNumberToJsFormat(e,bP),10)}case'r':{return parseFloat(bz.reformatNumberToJsFormat(e,bP))}case'd':case't':{var bS=bz.formatToJSCompliantFormat(e,bP,bQ,bR);return bA.OleDateFromJsDate((new Date(Date.parse(bS+' GMT'))).getTime())}}return(ss.isValue(bR)?parseFloat(bR.v):0)};bz.reformatNumberToJsFormat=function(e,bO){var bP=bO[8].replace(bz.$1f,'\\$1');if(bP.indexOf(' ')!==-1){bP+=' '}var bQ=bO[7].replace(bz.$1f,'\\$1');if(bP.indexOf('.')===-1&&bQ.indexOf('.')===-1){e=e.replace(new RegExp('\\.','g'),'?')}return e.replace(new RegExp('['+bP+']','g'),'').replace(new RegExp('['+bQ+']','g'),'.')};bz.formatToJSCompliantFormat=function(e,bO,bP,bQ){var bR=bz.normalizeDateTimeFormat(bO,bP,bQ.t);var bS=bz.tokenizeDateTime(e,bR,bP);return(ss.isValue(bS)?bz.$3(bS,bQ):'')};bz.normalizeDateTimeFormat=function(e,bO,bP){var bQ=e.format;var bR=e.timeFormat;if(bQ.charCodeAt(0)===42){bQ=bQ.substr(1)}if(bO!==0&&ss.isValue(bR)&&(ss.isNullOrUndefined(e.originalFormat)||e.originalFormat.length===0||e.originalFormat==='S')&&bP==='t'){if(bR.charCodeAt(0)===42){bR=bR.substr(1)}bQ=bQ+' '+bR}bQ=bQ.replace(new RegExp('ampm','g'),'tt');bQ=ss.replaceAllString(bQ,'H','h');bQ=bQ.replace(bz.$11,function(bS){return bS.replace(new RegExp('m','gi'),'m')});bQ=bQ.replace(bz.$12,function(bS){return bS.replace(new RegExp('m','gi'),'n')});return bQ};bz.tokenizeDateTime=function(e,bO,bP){var bQ=bO;bQ=bQ.replace(bz.$1f,'\\$1');bQ=bQ.replace(bz.$1j,'($1)');bQ=bQ.replace(bz.$1b,'($1)');var bR=bO.match(new RegExp(bQ));var bS=bO;bS=bS.replace(bz.$1f,'\\$1');if(bP===1){bS=bS.replace(bz.$13,'(?:$1 )?$2')}else{bS=bS.replace(bz.$13,'$1(?: $2)?')}bS=bS.replace(bz.$1g,'(?:$1)?');bS=bS.replace(bz.$1b,'(\\d+)');bS=bS.replace(bz.$1j,'([^0-9\\s]+)?');bS=bS.replace(bz.$1h,function(bW){return bW.replace(new RegExp('\\s+','g'),'\\s+')});bS=bS.replace(bz.$1c,'\\s*');var bT=e.match(new RegExp(bS));if(ss.isNullOrUndefined(bT)){return null}var bU={};for(var bV=1;bV<bT.length;++bV){if(ss.isValue(bT[bV])&&bT[bV].length>0){bU[bR[bV].substr(0,1).toLowerCase()]=bT[bV]}}return bU};bz.$3=function(e,bO){if(!ss.keyExists(e,'y')&&!ss.keyExists(e,'m')&&!ss.keyExists(e,'d')){var bP=(bO.v?new Date(bA.JsDateFromOleDate(bO.v)):new Date(bA.javaScriptOLEEpoch()));e['y']=bP.getUTCFullYear().toString();e['m']=(bP.getUTCMonth()+1).toString();e['d']=bP.getUTCDate().toString()}var bQ=e['y'].replace(new RegExp('^(\\d{2})$'),function(bS){var bT=parseInt(bS,10);return((bT<30)?('20'+bS):('19'+bS))});var bR=e['m']+'/'+e['d']+'/'+bQ;if(ss.keyExists(e,'h')&&ss.keyExists(e,'n')){bR+=' '+e['h']+':'+e['n']+':';bR+=(ss.keyExists(e,'s')?e['s']:'00');if(ss.keyExists(e,'t')){if(ss.isValue(e['t'].match(bz.$Z))){bR+=' am'}else if(ss.isValue(e['t'].match(bz.$1d))){bR+=' pm'}}}return bR};bz.mapIcuToOleFormat=function(e){return bz.$p(bz.$16,e)};bz.$p=function(e,bO){if(ss.isNullOrUndefined(e)||ss.isNullOrEmptyString(bO)){return bO}var bP=new ss.StringBuilder;var bQ=0;var bR=0;var bS=null;while(++bR<=bO.length){var bT=e[bO.substring(bQ,bR)];if(ss.isValue(bT)){bS=bT}else{if(ss.isValue(bS)){bP.append(bS);--bR}else{bP.append(bO.substring(bQ,bQ+1))}bQ=bR;bS=null}}if(ss.isValue(bS)){bP.append(bS)}return bP.toString()};bz.escapeHTML=function(e){return tab.EscapingUtil.escapeHtml(e)};bz.formatColumnDisplayName=function(e,bO,bP){var bQ=e.caption;var bR;if(!(typeof(bQ)==='undefined')){bR=bQ}else{var bS=e.name;bR=(bO?ss.arrayExtract(bS,1).join('.'):bz.formatQualifiedName(bS))}return(bP?bR:tab.EscapingUtil.escapeHtml(bR))};bz.formatTupleDisplayName=function(e,bO,bP){if(ss.isNullOrUndefined(e)){return' '}var bQ=e.d;var bR=(ss.isValue(bQ)?bQ:bz.formatTupleUniqueName(e,bP));var bS=(bO?bR:bz.escapeHTML(bR));return ss.coalesce(bS,' ')};bz.formatTupleUniqueName=function(e,bO){var bP='';if(ss.isValue(e)){var bQ=e.t;if(ss.isValue(bQ)){for(var bR=0;bR<bQ.length;bR++){var bS=bQ[bR];if(bP.length!==0){bP+=','}bP+=bz.formatDataValue(bS,bO)}}}return bP};bz.formatTupleDisplayFacet=function(e,bO,bP){var bQ=bz.formatTupleFacet(e,bP);return(bO?bQ:bz.escapeHTML(bQ))};bz.formatTupleFacet=function(e,bO){var bP='';if(ss.isValue(e)){var bQ=e.f;if(ss.isValue(bQ)){for(var bR=0;bR<bQ.length;bR++){var bS=bQ[bR];if(bP.length!==0){bP+=','}bP+=bz.formatDataValue(bS,bO)}}}return bP};bz.formatQualifiedName=function(e){var bO='';for(var bP=0;bP<e.length;bP++){var bQ=e[bP];if(bO.length!==0){bO+='.'}bO+='['+bQ.replace(new RegExp('\\]','g'),']]')+']'}return bO};bz.formatIntAuto=function(e,bO,bP,bQ){var bR=bz.$1(e,bO,bP,bQ);return((bz.$v(e)>=0)?bR:('-'+bR))};bz.isDateTimeWithNonMidnightTime=function(e){return ss.isValue(e)&&(ss.isNullOrEmptyString(e.s)||ss.isNullOrUndefined(e.s))&&e.t==='t'&&!bz.$o(new Date(bA.JsDateFromOleDate(parseFloat(e.v))))};bz.applyDecimalPlaces=function(e,bO,bP){if(bO>=0){var bQ=e-bz.$v(e);var bR=bz.$t(bQ,bO);var bS=parseInt(bR,10);if(Math.abs(bS)===1){return bS}if(bO===0){return''}bR=bR.replace(new RegExp('^-?0\\.'),bP);return bR}return''};bz.formatString=function(e,bO){var bP=bO.dataType;var bQ=bO.formatStrings;var bR=bO.fieldRole;var bS=bQ;var bT;var bU=e;switch(bP){case'cstring':{bT='s';break}case'date':{bT='d';bU=o.parsePresModelDate(e);bS=bz._convertFormatStringsToFormattingInfo(bQ);break}case'datetime':{bT='t';bU=o.parsePresModelDate(e);bS=bz._convertFormatStringsToFormattingInfo(bQ);break}case'integer':{bT='i';bU=parseInt(e);break}case'real':{bT='r';bU=parseFloat(e);break}case'tuple':{bT='s';bU=bz.$m(e);break}case'unknown':default:{bT=null;break}}var bV={t:bT,v:bU};var bW;switch(bR){case'dimension':{bW='d';break}case'measure':{bW='m';break}case'unknown':default:{bW=null;break}}return bz.formatDataValue(bV,bW,bS,null,0)};bz.formatSpecial=function(e,bO){if(ss.isValue(bO)){return bO}switch(e){case'%many-values%':{return tab.Strings.SpecialManyValues}case'%null%':{return''}case'%error%':{return tab.Strings.SpecialError}case'%ragged%':{return tab.Strings.SpecialRagged}case'%skipped%':{return tab.Strings.SpecialSkipped}case'%missing%':{return''}case'%all%':{return tab.Strings.SpecialAll}case'%no-access%':{return tab.Strings.SpecialNoAccess}case'%wildcard%':{return tab.Strings.SpecialWildcard}default:{return'#Special'}}};bz.isSpecialValue=function(e){return bz.$1i[e]};bz.stripFormattedText=function(e){return(ss.isNullOrUndefined(e)?null:$(e).find('run').text())};bz.deriveNumberEditingFormat=function(e){return(ss.isNullOrUndefined(e)?null:['','-1',e[2],'','','','',e[7],e[8],e[9]])};bz.$r=function(e,bO){var bP=e.toString();while(bP.length<bO){bP='0'+bP}return bP};bz.$o=function(e){return ss.isValue(e)&&(e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0||e.getUTCHours()===23&&e.getUTCMinutes()===59&&e.getUTCSeconds()===59)};bz.$5=function(e){return((e.getUTCHours()<12)?'AM':'PM')};bz.$7=function(e){var bO=e.getUTCHours();if(bO<12){if(bO===0){bO=12}}else if(bO>12){bO-=12}return bO};bz.$8=function(e){return e.getUTCHours()};bz.$6=function(e){var bO=new Date(e.getUTCFullYear(),0,1,12);var bP=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),12);return Math.round((bP-bO)/86400000)+1};bz.$4=function(e,bO){return e.getUTCFullYear()+((e.getUTCMonth()+1<bO)?-1:0)};bz.$a=function(e,bO,bP){var bQ=(e.getUTCDay()+7-(bO-1))%7;var bR=-bQ+(7-bP);var bS=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()+bR));return bS.getUTCFullYear()};bz.$9=function(e,bO){var bP;if(bO.fiscalYearStart<=1){var bQ=(bO.brokenWeeks?e.getUTCFullYear():bz.$a(e,bO.startOfWeek,bO.minDaysInFirstWeek));bP=new Date(Date.UTC(bQ,0,1))}else{bP=new Date(Date.UTC(bz.$4(e,bO.fiscalYearStart),bO.fiscalYearStart-1,1))}var bR=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()));var bS=(bP.getUTCDay()+7-(bO.startOfWeek-1))%7;var bT=ss.Int32.div(bR-bP,86400000)+bS;if(bO.fiscalYearStart<=1&&7-bS<bO.minDaysInFirstWeek){bT-=7}return Math.floor(bT/7)+1};bz.dtGetFiscalYear=function(e,bO){var bP=e.getUTCFullYear();var bQ=e.getUTCMonth()+1;return((bQ<bO||bO===1)?0:1)+bP};bz.dtGetFiscalQuarter=function(e,bO){if(bO<1){bO=1}return Math.floor((e.getUTCMonth()+1-bO+12)%12/3)+1};bz.$w=function(e,bO){if(ss.isNullOrUndefined(bO)){return null}return bO.day[e.getUTCDay()+1]};bz.$y=function(e,bO){if(ss.isNullOrUndefined(bO)){return null}return bO.shortDay[e.getUTCDay()+1]};bz.$x=function(e,bO){if(ss.isNullOrUndefined(bO)){return null}return bO.month[e.getUTCMonth()]};bz.$z=function(e,bO){if(ss.isNullOrUndefined(bO)){return null}return bO.shortMonth[e.getUTCMonth()]};bz.formatJsDateTime=function(e,bO,bP,bQ){if(ss.isNullOrUndefined(bO)){bO={format:'*M/d/yyyy',originalFormat:'en_US',timeFormat:''};if(bP===2&&bz.$o(e)){bP=0}}return bz.formatCustomJsDateTime(e,bO,bP,bQ)};bz.formatCustomJsDateTime=function(e,bO,bP,bQ){var bR=bO.format;var bS=bO.timeFormat;var bT=bO.calOpts;var bU=0,bV=0,bW;if(ss.isNullOrUndefined(bT)){bT=new i}var bX=ss.isValue(bS);var bY=ss.isNullOrUndefined(bO.originalFormat)||bO.originalFormat.length===0||bO.originalFormat==='S';var bZ=bQ==='t';if(ss.isValue(bP)&&bP!==0&&bX&&bY&&bZ){if(bS.charCodeAt(0)===42){bS=bS.substr(1)}if(bP===2){bR=bR+' '+bS}else{bR=bS}}if(bR==='L'){bR='*dddd, mmmm dd, yyyy'}if(bR.charCodeAt(0)===42){bR=bR.substr(1)}bW=bR.length;var ca,cb;if(bT.fiscalYearStart>1){ca=cb=bz.dtGetFiscalYear(e,bT.fiscalYearStart)}else{ca=e.getUTCFullYear();cb=(bT.brokenWeeks?ca:bz.$a(e,bT.startOfWeek,bT.minDaysInFirstWeek))}var cc=cb.toString();var cd=cc.substr(cc.length-2);var ce=ca.toString();var cf=ce.substr(ce.length-2);var cg=[];cg.push(new br('ampm',bz.$5(e)));cg.push(new br('tt',bz.$5(e)));cg.push(new br('yyyy',ce));cg.push(new br('yy',cf));cg.push(new br('mmmm',bz.$x(e,bO.locale_formatting_strings)));cg.push(new br('mmm',bz.$z(e,bO.locale_formatting_strings)));cg.push(new br('dddd',bz.$w(e,bO.locale_formatting_strings)));cg.push(new br('ddd',bz.$y(e,bO.locale_formatting_strings)));cg.push(new br('mm',bz.$r(e.getUTCMonth()+1,2)));cg.push(new br('m',(e.getUTCMonth()+1).toString()));cg.push(new br('dd',bz.$r(e.getUTCDate(),2)));cg.push(new br('d',e.getUTCDate().toString()));cg.push(new br('hh',bz.$r(bz.$8(e),2)));cg.push(new br('h',bz.$8(e).toString()));cg.push(new br('nn',bz.$r(e.getUTCMinutes(),2)));cg.push(new br('n',e.getUTCMinutes().toString()));cg.push(new br('ss',bz.$r(e.getUTCSeconds(),2)));cg.push(new br('s',e.getUTCSeconds().toString()));cg.push(new br('ww',bz.$9(e,bT).toString()));cg.push(new br('y',bz.$6(e).toString()));cg.push(new br('w',(e.getUTCDay()+1).toString()));cg.push(new br('q',bz.dtGetFiscalQuarter(e,bT.fiscalYearStart).toString()));var ch=cg;var ci=bz.$c(e,bU,bW,ch,bR,bV,bT,cc,cd,ce,cf);bR=ci.join('');return bR};bz.$c=function(e,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX){var bY=[];var bZ=null;var ca=false;var cb=false;var cc=-1;var cd=false;var ce=false;var cf=false;while(bO<bP){var cg=false;var ch=false;for(var ci=0;ci<bQ.length;ci++){var cj=bQ[ci];var ck=cj.get_first();var cl=cj.get_second();if(ss.referenceEquals(ck,bR.substr(bO,ck.length).toLowerCase())){cg=true;bY.push(cl);bO+=ck.length;if(ss.isValue(bZ)&&ck==='mm'){bY[bY.length-1]=bz.$r(e.getUTCMinutes(),2)}if(ss.isValue(bZ)&&ck==='m'){bY[bY.length-1]=e.getUTCMinutes().toString()}if(ck.charCodeAt(0)===100){bZ=null}if(ck.charCodeAt(0)===104){bZ=ck;bS=bY.length-1}if(ss.isValue(bZ)&&(ck==='ampm'||ck==='tt')){bY[bS]=((bZ==='hh')?bz.$r(bz.$7(e),2):bz.$7(e).toString())}switch(ck.charCodeAt(0)){case 121:{if(ck.length>1){ch=true;cc=bY.length-1;cd=ck.length===4;cf=true;if(ca){if(!bT.brokenWeeks){bY[cc]=(cd?bU:bV);cf=false}ca=false}}break}case 119:{if(ck.length!==2){break}var cm=ca;ca=true;if(!cm&&!cb&&cf){if(!bT.brokenWeeks){bY[cc]=(cd?bU:bV);cf=false}ca=false}cb=false;break}case 109:case 100:case 113:{if((ck==='mm'||ck==='m')&&ss.isValue(bZ)){break}ca=false;cb=true;break}}break}}if(cg){ce=ch;continue}if(bR.charCodeAt(bO)===92){bY.push(bR.substr(bO+1,1));bO+=2}else if(bR.charCodeAt(bO)===34){var cn=bR.charCodeAt(bO);var co=++bO;while(bO<bP&&bR.charCodeAt(bO)!==cn){bO+=1}if(co<bP&&bO>co){bY.push(bR.substr(co,bO-co))}if(bO<bP){bO+=1}}else if(bR.charCodeAt(bO)===91){var cp=++bO;while(cp<bR.length&&bR.charCodeAt(cp)!==93){cp++}var cq=bR.substring(bO,cp);if((cq==='y'||cq==='Y')&&ce){bY[cc]=((cq==='y')?(cd?bW:bX):(cd?bU:bV));cf=false}bO=cp+1}else{bY.push(String.fromCharCode(bR.charCodeAt(bO)));bO+=1}ce=ch}return bY};bz.$h=function(e,bO,bP,bQ){var bR=null;if(!ss.isNullOrUndefined(bO)){bR=S.cloneObject(bO);bR.format=bz.mapIcuToOleFormat(bR.format)}var bS=new Date(bA.JsDateFromOleDate(e));return bz.formatJsDateTime(bS,bR,bP,bQ)};bz.$v=function(e){return((e<0)?Math.ceil(e):Math.floor(e))};bz.$1=function(e,bO,bP,bQ){var bR=Math.abs(bz.$v(e));var bS='';var bT=parseInt(String.fromCharCode(bQ.charCodeAt(0)),10)||3;var bU;if(bR<1E+15){bU=bz.$t(bR,0)}else{bU=bz.$s(bR,14);var bV=bU.match(bz.$1e);if(ss.isValue(bV)){var bW=ss.coalesce(bV[2],'');var bX=parseInt(bV[3],10)-bW.length;var bY='';for(var bZ=0;bZ<bX;bZ++){bY+='0'}bU=bV[1]+bW+bY}}if(bO!=='t'){return bU}for(var ca=bU.length-1,cb=0;ca>=0;ca--,cb++){if(cb>=bT){bS=bP+bS;cb=0}bS=String.fromCharCode(bU.charCodeAt(ca))+bS}return bS};bz.$2=function(e,bO){switch(bO){case'B':case'G':{return e/1000000000}case'M':{return e/1000000}case'K':{return e/1000}default:{return e}}};bz.$0=function(e,bO,bP,bQ,bR){bO=bO.replace(new RegExp('^-'),'');if(e>=0||(new RegExp('^[.0]*$')).test(bO)){return bP+bO+bQ}switch(bz.$n(bR)){case'parenthesis':{return'('+bP+bO+bQ+')'}case'outerSuffix':{return bP+bO+bQ+'-'}case'innerPrefix':{return bP+'-'+bO+bQ}case'innerSuffix':{return bP+bO+'-'+bQ}case'outerPrefix':case'automatic':default:{return'-'+bP+bO+bQ}}};bz.$n=function(e){var bO=parseInt(e,10);var bP=bO<0||bO>=bz.$1a.length;return(bP?'automatic':bz.$1a[bO])};bz.$j=function(e){return bz.$v(e)};bz.$f=function(e,bO,bP,bQ,bR,bS,bT){if(bO==='i'){return bz.$b(e,bO,bP,bQ,bR,bS,bT,null,null)}else{return bz.$b(e,bO,bP,bQ,bR,bS,bT,0.0001,1E+15)}};bz.$g=function(e,bO,bP,bQ,bR,bS){if(bO==='i'){return bz.$b(e,bO,null,bP,bQ,bR,bS,null,1000000)}else{return bz.$b(e,bO,null,bP,bQ,bR,bS,0.0001,1E+15)}};bz.$b=function(e,bO,bP,bQ,bR,bS,bT,bU,bV){var bW;var bX;var bY;if(ss.isValue(bP)&&ss.unbox(bP)<=0){bW=-ss.unbox(bP);bY=bX=false}else{bW=bz.$q(e,bO,true);bY=bX=true}var bZ=Math.abs(e);if(bY&&bZ!==0&&(ss.isValue(bV)&&ss.Nullable$1.ge(bZ,bV)||ss.isValue(bU)&&ss.Nullable$1.lt(bZ,bU))){var ca=bz.$q(1,bO,true);var cb=bz.$d(e,ca,bQ);if(bX){return cb.replace(new RegExp('['+bQ+']?0+e'),'e')}}var cc=e-bz.$v(e);var cd=bz.formatIntAuto(e,bR,bS,bT);var ce='';ce=bz.$t(cc,bW);if(Math.abs(parseFloat(ce))>=1){cd=bz.formatIntAuto(bz.$v(e+parseFloat(ce)),bR,bS,bT);ce=ce.replace(new RegExp('1'),'0')}if(!(ce.indexOf('.')!==-1)){return cd}if(bX){ce=ce.replace(new RegExp('0+$'),'');if(ss.endsWithString(ce,'.')){return cd}}ce=ce.replace(new RegExp('^-?0\\.'),bQ);if(e<0&&cd==='0'&&!(new RegExp('^\\.0+$')).test(ce)){cd='-0'}return cd+ce};bz.$q=function(e,bO,bP){var bQ=((bO==='i')?6:15);var bR=Math.max(0,bQ-Math.abs(bz.$v(e)).toString().length);return(bP?Math.min(bR,9):bR)};bz.$d=function(e,bO,bP){if(isNaN(e)||!isFinite(e)){return e.toString()}if(bO<0||isNaN(bO)){bO=0}if(bO>15){bO=15}var bQ=bz.$s(e,bO);var bR=bQ.indexOf(String.fromCharCode(101));var bS=bQ.substr(bR);if(bS.length<4){bQ=bQ.substr(0,bR+2)+'0'+bQ.substr(bR+2)}bQ=bQ.replace(new RegExp('\\.'),bP);return bQ};bz.$s=function(e,bO){return bz.$u(e,bO,15,function(bP,bQ){return bP.toExponential(bQ)})};bz.$t=function(e,bO){return bz.$u(e,bO,bz.$q(e,'r',false),function(bP,bQ){return bP.toFixed(bQ)})};bz.$u=function(e,bO,bP,bQ){bP=Math.max(bP-1,bO);var bR=bQ(e,bP);var bS=bR.indexOf(String.fromCharCode(101));if(bS===-1){bS=bR.length}var bT=bS-(bP-bO);var bU=bR.charCodeAt(bT);if(bR.charCodeAt(bT-1)===46){bT--}bR=bR.substr(0,bT)+bR.substr(bS,bR.length);if(bU>=53&&bU<=57){var bV;do{bT--;bV=bR.charCodeAt(bT);if(bV===46||bV===45){bV=48;continue}bV++;if(bV>57){bV=48}bR=bR.substr(0,bT)+String.fromCharCode(bV)+bR.substr(bT+1,bR.length)}while(bV===48&&bT>0);if(bV===48&&bT===0){bR=bQ(e,bO)}}return bR};bz.$i=function(e,bO,bP,bQ){if(bP===-1){return bz.$b(e*100,bO,null,bQ[7],bQ[2],bQ[8],bQ[9],null,null)+'%'}else{return bz.$l(e*100,bP,bQ)+'%'}};bz.$k=function(e,bO,bP,bQ,bR){if(ss.isNullOrUndefined(bP)||bP.length!==10){return bz.$f(e,bO,bQ,'.',((bR==='d')?null:'t'),',','3;0')}var bS=parseInt(bP[1],10);switch(bP[0]){case'':{if(bS===-1){return bz.$f(e,bO,null,bP[7],bP[2],bP[8],bP[9])}else{return bz.$f(e,bO,-bS,bP[7],bP[2],bP[8],bP[9])}}case'N':{return bz.$g(e,bO,bP[7],bP[2],bP[8],bP[9])}case'e':{return bz.$d(e,bS,bP[7])}case'p':{return bz.$i(e,bO,bS,bP)}default:{return bz.$l(e,bS,bP)}}};bz.$l=function(e,bO,bP){e=bz.$2(e,bP[5]);var bQ=bP[5]+bP[4];var bR=bz.applyDecimalPlaces(e,bO,bP[7]);if(typeof(bR)==='number'){e+=bR;bR=bz.applyDecimalPlaces(0,bO,bP[7])}var bS=bz.$1(e,bP[2],bP[8],bP[9])+bR;return bz.$0(e,bS,bP[3],bQ,bP[6])};bz.$e=function(e,bO){return bz.$k(bz.$v(e),'i',bO,null,null)};bz._convertFormatStringsToFormattingInfo=function(e){var bO=new i;bO.fiscalYearStart=parseInt(e[4]);var bP={format:e[0],locale:e[1],originalFormat:e[2],timeFormat:e[3],calOpts:bO};if(isNaN(bP.calOpts.fiscalYearStart)){bP.calOpts.fiscalYearStart=0}bP.calOpts.startOfWeek=parseInt(e[5]);if(isNaN(bP.calOpts.startOfWeek)){bP.calOpts.startOfWeek=1}bP.calOpts.minDaysInFirstWeek=parseInt(e[6]);if(isNaN(bP.calOpts.minDaysInFirstWeek)){bP.calOpts.minDaysInFirstWeek=1}bP.calOpts.brokenWeeks=e[7]==='1';return bP};bz.$m=function(e){var bO=44;var bP=40;var bQ=41;var bR=39;var bS=92;var bT=[];e=e.trim();if(e.length===0){return''}var bU=e.length;var bV=0;if(bV>=bU||e.charCodeAt(bV)!==40){return''}++bV;while(bV<bU){var bW=bV;var bX=false;var bY=0;while(bW<bU&&!bX){var bZ=e.charCodeAt(bW);if(bY===0&&(bZ===44||bZ===41)){bX=true;break}else if(bZ===92){bW+=2}else{if(bZ===39){bY=1-bY}++bW}}if(!bX){return''}var ca=e.substring(bV+1,bW-1);ca=ss.replaceAllString(ca,'\\\\','\\');ca=ss.replaceAllString(ca,'\\"','"');ca=ss.replaceAllString(ca,'\\,',',');ca=ss.replaceAllString(ca,'\\(','(');ca=ss.replaceAllString(ca,'\\)',')');bT.push(ca);bV=bW;++bV}return bT.join(', ')};global.tableau.format=bz;var bA=function(){};bA.__typeName='tableau.types';bA.$0=function(){return tab.LazyUtil.lazyInitStaticField(bA,'millisecondsPerDay',function(){return 86400000})};bA.javaScriptOLEEpoch=function(){return tab.LazyUtil.lazyInitStaticField(bA,'javascriptOleEpoch',function(){return Date.UTC(1899,11,30,0,0,0,0)})};bA.JsDateFromOleDate=function(e){var bO=((e<0)?Math.ceil(e):Math.floor(e));var bP=Math.round(Math.abs(e-bO)*bA.$0())+bO*bA.$0();return bP+bA.javaScriptOLEEpoch()};bA.OleDateFromJsDate=function(e){var bO=new Date(e);var bP=Date.UTC(bO.getUTCFullYear(),bO.getUTCMonth(),bO.getUTCDate());var bQ=ss.Int32.div(bP-bA.javaScriptOLEEpoch(),bA.$0());var bR=(e-bP)/bA.$0();return bQ+((bQ<0)?-1:1)*bR};bA.isO=function(e){return e.fieldType==='O'||e.fieldType==='N'};bA.isMetadata=function(e){return e.column_class===0};bA.isOm=function(e){return bA.isO(e)&&bA.isMetadata(e)};bA.getRegionType=function(e){switch(e){case'viz':case'bottomaxis':case'topaxis':case'leftaxis':case'rightaxis':case'xheader':case'yheader':{return't'}case'color':case'shape':case'size':case'map':{return'l'}case'filter':{return'f'}case'current-page':{return'p'}case'title':{return'i'}case'text':{return'x'}case'bitmap':{return'b'}case'web':{return'w'}case'paramctrl':{return'a'}case'draw':{return'd'}case'text-block':{return'k'}case'layout-basic':case'layout-flow':{return'c'}default:{return null}}};global.tableau.types=bA;var bB=function(){};bB.__typeName='tableau.util';bB.assetUrl=function(e,bO){var bP=(bO?tsConfig.local_static_asset_prefix:tsConfig.external_static_asset_prefix);var bQ;if(e.charCodeAt(0)===47){var bR=bP.length-1;if(bP.charCodeAt(bR)===47){bQ=bP.substring(0,bR-1)+e}else{bQ=bP+e}}else{bQ=bP+'/'+e}return bB.adjustForLocalPaths(bQ)};bB.adjustForLocalPaths=function(e){if(tsConfig.useLocalPaths&&e.charCodeAt(0)===47){return e.substring(1,e.length)}else{return e}};bB.isPrintableNonNumericKeyPressed=function(e){return bB.isPrintableNonNumericInput(e.which,e.shiftKey,e.ctrlKey)};bB.isPrintableNonNumericInput=function(e,bO,bP){var bQ=e>=91&&e<=105;var bR=e>=112&&e<=123;var bS=e<47;var bT=!bO&&!bP&&(e>=48&&e<=57);return!bQ&&!bS&&!bT&&!bR};bB.preventNonNumericInput=function(e){if(bB.isPrintableNonNumericKeyPressed(e)){e.preventDefault();e.stopPropagation()}};bB.inputWouldOverflowMaxLength=function(e,bO,bP,bQ){if(ss.isNullOrUndefined(e)){e=''}if(ss.isNullOrUndefined(bO)){bO=''}if(e.length===1){var bR=e.charCodeAt(0);if(bR<=8||bR===127||bR>=14&&bR<=31||bR===11||bR===12){return false}}return e.length-bP+bO.length>bQ};bB.maxLengthEnforcingBeforeInputHandler=function(e){return function(bO){var bP=bO.target.selectionEnd-bO.target.selectionStart;if(bB.inputWouldOverflowMaxLength(bO.data,bO.target.value,bP,e)){bO.preventDefault();bO.stopPropagation()}}};bB.isElementVisible=function(e){return $(e).css('display')!=='none'};bB.findElementByTagName=function(e,bO,bP){e=e||r.get_documentBody();if(bB.isNodeMatch(e,bO,bP)){return e}var bQ=e.getElementsByTagName(bO);var bR=bQ.length;for(var bS=0;bS<bR;bS+=1){if(bB.isNodeMatch(bQ[bS],bO,bP)){return bQ[bS]}}return null};bB.findDirectParentByClassName=function(e,bO,bP){if(ss.isNullOrUndefined(e)||S.isNullOrEmpty$3(bO)){return null}bP=bP||document.body;var bQ=e.parentNode;while(!ss.isNullOrUndefined(bQ)&&!ss.referenceEquals(bQ,bP)){if(!S.isNullOrEmpty$3(bQ.className)){if(ss.referenceEquals(bQ.className.toLowerCase(),bO.toLowerCase())){return bQ}bQ=bQ.parentNode}}return null};bB.isNodeMatch=function(e,bO,bP){if(ss.isNullOrUndefined(e)||!ss.referenceEquals(e.tagName.toLowerCase(),bO.toLowerCase())){return false}if(ss.isNullOrUndefined(bP)){return true}var bQ=ss.getEnumerator(Object.keys(bP));try{while(bQ.moveNext()){var bR=bQ.current();if(bR in bP&&!ss.referenceEquals(e[bR],bP[bR])){return false}}}finally{bQ.dispose()}return true};bB.binarySearch=function(e){return function(bO,bP,bQ,bR,bS){var bT=(S.isValidIndex(ss.coalesce(bQ,-1),bP)?ss.unbox(bQ):0);var bU=(S.isValidIndex(ss.coalesce(bR,-1),bP)?ss.unbox(bR):(bP.length-1));if(ss.isNullOrUndefined(bS)){bS=bB.$0(e)}var bV={};while(bT<=bU){var bW=Math.floor(bT+(bU-bT)/2);var bX=bS(bP[bW],bO);if(bX===0){bV.found=true;bV.index=bW;return bV}else if(bX<0){bT=bW+1}else{bU=bW-1}}bV.found=false;bV.index=bT;return bV}};bB.$0=function(e){return function(bO,bP){if(bO===bP){return 0}else if(bO>bP){return-1}else{return 1}}};bB.transform=function(e,bO){bO=bO||{scale:1,scaleX:1,scaleY:1,translateX:0,translateY:0,transformOrigin:null,time:0};if(ss.isNullOrUndefined(bO.transformOrigin)){bO.transformOrigin={x:ss.Int32.div(e.offsetWidth,2),y:ss.Int32.div(e.offsetHeight,2)}}if(bO.scale!==1){bO.scaleX=bO.scaleY=bO.scale}var bP;if(window.WebKitCSSMatrix!==undefined&&(new WebKitCSSMatrix).m11!==undefined){bP=['translate3d(',bO.translateX.toString(),'px,',bO.translateY.toString(),'px, 0px)'].join('')}else{bP=['translate(',bO.translateX.toString(),'px,',bO.translateY.toString(),'px)'].join('')}bP+=[' scale(',bO.scaleX.toString(),', ',bO.scaleY.toString(),')'].join('');e.style['transitionProperty']='transform';e.style['transitionTimingFunction']='cubic-bezier(0, 0, 0.25, 1)';e.style['transitionDuration']=bO.time+'ms';e.style['transform']=bP;e.style['webkitTransitionProperty']='-webkit-transform';e.style['webkitTransitionTimingFunction']='cubic-bezier(0, 0, 0.25, 1)';e.style['webkitTransitionDuration']=bO.time+'ms';e.style['webkitTransform']=bP;e.style['MozTransitionProperty']='-moz-transform';e.style['MozTransitionTimingFunction']='cubic-bezier(0, 0, 0.25, 1)';e.style['MozTransitionDuration']=bO.time+'ms';e.style['MozTransform']=bP;if(ss.isValue(bO.transformOrigin)){var bQ=bO.transformOrigin.x+'px '+bO.transformOrigin.y+'px';e.style['transformOrigin']=bQ;e.style['webkitTransformOrigin']=bQ;e.style['MozTransformOrigin']=bQ}};bB.parseUri=function(e){var bO=document.createElement('a');var bP=bO;if(ss.isNullOrUndefined(e)){return null}bO.href=e;var bQ=ss.mkdict(['href',e,'host',bP.host,'hostname',bP.hostname,'pathname',bP.pathname,'port',bP.port,'protocol',bP.protocol,'search',bP.search]);return bQ};bB.setupTitleEllipsis=function(e){e.find('div').each(function(bO,bP){var bQ=$(bP);var bR=bQ.children('span');var bS=null;var bT=t.roundToInt(bQ.width());var bU=10;bT-=bU;for(var bV=0;bV<bR.length;bV++){var bW=bR[bV];var bX=t.roundToInt($(bW).width());bS=bW;if(bX>bT){break}bT-=bX}if(ss.isValue(bS)){bQ.css('font-family',bS.style.fontFamily);bQ.css('font-size',bS.style.fontSize);bQ.css('line-height',bS.style.lineHeight);bQ.css('color',bS.style.color);bQ.css('font-weight',bS.style.fontWeight);bQ.css('font-style',bS.style.fontStyle);bQ.css('text-decoration',bS.style.textDecoration)}bQ.css('text-overflow','ellipsis');bQ.css('overflow','hidden')})};global.tableau.util=bB;var bC=function(){};bC.__typeName='tableau.types.CFStyle';global.tableau.types.CFStyle=bC;var bD=function(){};bD.__typeName='tableau.types.CFType';global.tableau.types.CFType=bD;var bE=function(){};bE.__typeName='tableau.types.DataSpecial';global.tableau.types.DataSpecial=bE;var bF=function(){};bF.__typeName='tableau.types.DataType';global.tableau.types.DataType=bF;var bG=function(){};bG.__typeName='tableau.types.FieldTypeTypes';global.tableau.types.FieldTypeTypes=bG;var bH=function(){};bH.__typeName='tableau.types.HFStyle';global.tableau.types.HFStyle=bH;var bI=function(){};bI.__typeName='tableau.types.QFDomain';global.tableau.types.QFDomain=bI;var bJ=function(){};bJ.__typeName='tableau.types.QFFixed';global.tableau.types.QFFixed=bJ;var bK=function(){};bK.__typeName='tableau.types.QFInclude';bK.isRange=function(e){switch(e){case'include-all':case'include-null':case'include-non-null':{return false}default:{return true}}};global.tableau.types.QFInclude=bK;var bL=function(){};bL.__typeName='tableau.types.RegionType';global.tableau.types.RegionType=bL;var bM=function(){};bM.__typeName='tableau.types.TableauTypesFieldRole';global.tableau.types.TableauTypesFieldRole=bM;var bN=function(e){this.$4=null;this.$5=false;this.$4=e;if(BrowserSupport.BrowserSupport.IsTouch()){this.$4.addEventListener('touchstart'.toString(),ss.mkdel(this,this.$0),false)}};bN.__typeName='tableau.util.NoClickDelay';global.tableau.util.NoClickDelay=bN;ss.initEnum(b,a,{CLASS_METADATA:0,CLASS_DATABASE:1,CLASS_NUMERICBIN:2,CLASS_CATEGORICALBIN:3,CLASS_INSTANCE:4,CLASS_MDXCALC:5,CLASS_USERCALC:6,CLASS_DANGLING:7,CLASS_LOCALDATA:8});ss.initEnum(c,a,{DRILLNONE:0,DRILLDOWN:1,DRILLUP:2,DRILLBOTH:3});ss.initClass(d,a,{});ss.initClass(f,a,{});ss.initClass(g,a,{});ss.initClass(i,a,{});ss.initClass(j,a,{dispose:function(){if(ss.isNullOrUndefined(this.$0)){return}this.$0();this.$0=null}},null,[ss.IDisposable]);ss.initClass(k,a,{});ss.initClass(l,a,{});ss.initClass(m,a,{});m.$ctor1.prototype=m.prototype;ss.initEnum(n,a,{showDateOnly:0,showTimeOnly:1,showFullDateTime:2});ss.initClass(o,a,{});ss.initClass(p,a,{get_hasPendingAction:function(){return ss.isValue(this.$2)},invokeActionDelayed:function(){this.cancel();this.$2=window.setTimeout(ss.mkdel(this,function(){this.$2=null;this.$0()}),this.$1)},invokeActionImmediate:function(){this.cancel();this.$0()},cancel:function(){this.$2=S.clearTimeout(this.$2)},dispose:function(){this.cancel();this.$0=null}},null,[ss.IDisposable]);ss.initClass(q,a,{add:function(e){this.$0.push(new j(e))},add$1:function(e){this.$0.push(e)},add$2:function(e){ss.arrayAddRange(this.$0,e)},dispose:function(){for(var e=0;e<this.$0.length;e++){var bO=this.$0[e];S.dispose$1(bO)}ss.clear(this.$0)}},null,[ss.IDisposable]);ss.initClass(r,a,{});ss.initClass(s,a,{});ss.initClass(t,a,{});ss.initClass(u,a,{});ss.initClass(v,a,{});ss.initEnum(w,a,{unknown:0,newFilter:4,fieldTypeConversion:5,newToolbar:9,buttonDelay:11,hoverDelay:12,maxTooltipWhitespace:18,mapsUseLeafletForGeoSearch:19,selectionToolsMobile:23,mapsSearchDebugAlwaysShow:28,analyticsObjectsDragToViz:31,gotoMyLocationButton:32,designTint:33,newQFWorkbookLevelFormatting:35,appearanceOfBlendingIcons:36,outlineStampedShapes:38,progressiveLoadDelay:39,catQFDrowdown:40,opaqueCanvasBackground:42,logStoryPointCacheHits:43,dataHLMaxItems:44,debugTools:46,instrumentObjects:47,greyGlassDelay:48,spinnerDelay:49,cancelDelay:50,runtimeWebHost:51,showRuntimeStatus:53,objectWriteDetector:54,newGestureModel:55,newGestureModelOnboarding:56,devicePreviewMode:57});ss.initClass(x,a,{});ss.initClass(y,a,{});ss.initEnum(z,a,{v1:'v1',v2:'v2'},true);ss.initClass(A,a,{});ss.initClass(B,a,{});ss.initInterface(C,a,{addToDom:null,onAddedToDom:null});ss.initInterface(D,a,{get_dimensions:null,translatePositionToViewport:null,getVisibleRoom:null,getDocumentViewport:null});ss.initInterface(E,a,{showSuccessBanner:null,showErrorBanner:null});ss.initInterface(F,a,{showAlertDialog:null,showConfirmationDialog:null,ShowErrorDialog:null,ShowLocalErrorDialog:null,showSheetAuthenticationOverlay:null,showGenericDataSourceErrorOverlay:null,showSheetAuthenticationDialog:null,showGenericDataSourceErrorDialog:null,showFileDownloadDialog:null,showConnectionMissingFileDialog:null,showEditConnectionInformationDialog:null,showConnectionSignInDialog:null});ss.initClass(G,a,{});ss.initClass(H,a,{get_from:function(){return this.$0},set_from:function(e){this.$0=e},get_to:function(){return this.$1},set_to:function(e){this.$1=e}});ss.initInterface(J,a,{add_disposed:null,remove_disposed:null},[ss.IDisposable]);ss.initInterface(K,a,{});ss.initClass(L,a,{});ss.initClass(M,a,{});ss.initClass(N,a,{});ss.initClass(O,a,{},ss.Exception);O.$ctor1.prototype=O.$ctor2.prototype=O.prototype;ss.initClass(P,a,{});ss.initClass(Q,a,{});ss.initClass(R,a,{logEvent:function(e){if(this.$a.length>=400){this.$a.shift()}this.$a.push(e);this.$1(e);this.$6(250)},$1:function(e){if(!('newrelic'in window)){return}var bO=e.parameters['d'];if(ss.isNullOrUndefined(bO)){return}var bP=new Object;bP.name=ss.coalesce(tabBootstrap.MetricsController.fullMetricNameLookup[bO],bO);var bQ=R.$3(e.parameters['t']);var bR=e.parameters['e'];if(ss.isValue(bR)){bP.end=bQ;bP.start=bQ-bR}else{bP.start=bQ}newrelic.addToTrace(bP)},attach:function(){tabBootstrap.MetricsController.setEventLogger(ss.mkdel(this,this.logEvent))},$6:function(e){if(ss.isValue(this.$9)){return}this.$9=window.setTimeout(ss.mkdel(this,this.$4),e)},$4:function(){this.$9=null;var e;if(this.$a.length>20){e=this.$a.slice(0,20);this.$a=this.$a.slice(20);this.$6(5)}else{e=this.$a;this.$a=[]}this.$2(e);if(tsConfig.metricsReportingEnabled){try{this.$3(e)}catch(bO){}}},$2:function(e){this.$b=this.$b||tab.Logger.lazyGetLogger(R);for(var bO=0;bO<e.length;bO++){var bP=e[bO]}},$3:function(e){var bO=1500;var bP=e.length;var bQ='';if(bP===0){return}for(var bR=0;bR<bP;bR++){var bS=e[bR];if(bS.eventType==='wps'){continue}var bT=R.$1(bS,false);if(bQ.length>0&&bQ.length+bT.length>bO){this.$5(tsConfig.metricsServerHostname,bQ);bQ=''}else if(bQ.length>0){bQ+='&'}bQ+=bT}if(bQ.length>0){this.$5(tsConfig.metricsServerHostname,bQ)}if(ss.isNullOrUndefined(this.$7)){this.$7=window.setTimeout(ss.mkdel(this,this.$0),250)}},$5:function(e,bO){var bP=1;if(S.isNullOrEmpty$3(e)||S.isNullOrEmpty$3(bO)){return}var bQ=document.createElement('img');var bR='v='+bP.toString();var bS=e;bS+='?'+bR+'&'+bO;bQ.src=bS;this.$8.push(bQ);if(this.$8.length>100){this.$8.shift()}},$0:function(){try{this.$7=null;var e=0;while(e<this.$8.length){if(this.$8[e].complete){this.$8.splice(e,1)}else{e++}}if(this.$8.length>0){this.$7=window.setTimeout(ss.mkdel(this,this.$0),250)}}catch(bO){}}});ss.initClass(S,a,{});ss.initClass(T,a,{});ss.initClass(U,a,{});ss.initClass(V,a,{get:function(e,bO,bP){if(!V.$0(bO)){var bQ=this.$0+'!'+bO;if(ss.keyExists(this.$1,bQ)){this.$1[bQ]=true}}return e[bO]}});ss.initClass(W,a,{instrument:function(e,bO){if(bO===''){this.$1=JSON.parse(JSON.stringify(e))}if(e===Object(e)&&!G.isArray(e)){var bP=e;var bQ=new ss.ObjectEnumerator(bP);try{while(bQ.moveNext()){var bR=bQ.current();this.$2[bO+'!'+bR.key]=false;if(bR.value===Object(bR.value)){bP[bR.key]=this.instrument(bR.value,bO+'!'+bR.key)}}}finally{bQ.dispose()}return new Proxy(e,new V(this.$2,bO))}else if(G.isArray(e)){var bS=e;for(var bT=0;bT<bS.length;bT++){this.$2[bO+'!'+bT]=false;var bU=bS[bT];if(bU===Object(bU)){bS[bT]=this.instrument(bS[bT],bO+'!'+bT)}}return new Proxy(e,new V(this.$2,bO))}return e}});ss.initClass(X,a,{});ss.initClass(Y,a,{set:function(e,bO,bP){switch(Y.$0){case 1:{console.error('Write back to protected object detected',e,bO,bP);break}case 2:{debugger;break}}e[bO]=bP}});ss.initClass(Z,a,{});ss.initEnum(ba,a,{workbookName:2,sheetId:3,authoringSheet:4});ss.initClass(bb,a,{});ss.initClass(bc,a,{});ss.initClass(bd,a,{get_propertyName:function(){return this.$0}},ss.EventArgs);ss.initClass(be,a,{instrument:function(e){if(G.isTypedArray(e)){var bO=e;var bP=new Array(bO.length);for(var bQ=0;bQ<bO.length;bQ++){bP[bQ]=bO[bQ]}e=bP}if(e===Object(e)&&!G.isArray(e)){var bR=e;var bS=new ss.ObjectEnumerator(bR);try{while(bS.moveNext()){var bT=bS.current();if(bT.value===Object(bT.value)){bR[bT.key]=this.instrument(bT.value)}}}finally{bS.dispose()}return new Proxy(e,new Y)}else if(G.isArray(e)){var bU=e;for(var bV=0;bV<bU.length;bV++){var bW=bU[bV];if(bW===Object(bW)){bU[bV]=this.instrument(bU[bV])}}return new Proxy(e,new Y)}return e}});ss.initClass(bf,a,{});ss.initClass(bg,a,{});ss.initClass(bh,a,{});ss.initClass(bi,a,{});ss.initEnum(bj,a,{xScrollable:1,yScrollable:2,none:0,bothScrollable:3});ss.initClass(bk,a,{});ss.initClass(bl,a,{});ss.initClass(bm,a,{});ss.initClass(bn,a,{});ss.initClass(bo,a,{});ss.initClass(bp,a,{});ss.initClass(bq,a,{logInternal:function(bO,bP,bQ,bR){bQ=this.formatMessage(ss.replaceAllString(bQ,'\\n','<br />'),bR);if(bP>2){try{throw new ss.Exception('Logged('+tab.Logger.loggerLevelNames[bP]+', from '+bO.get_name()+'): '+bQ)}catch(bS){var e=ss.Exception.wrap(bS);u.report(e)}}}},tab.BaseLogAppender);ss.initClass(br,a,{get_first:function(){return this.$0},get_second:function(){return this.$1}});ss.initClass(bs,a,{});ss.initClass(bt,a,{get_translateX:function(){return this.$3.x},get_translateY:function(){return this.$3.y},get_transformType:function(){return this.$2},get_isNull:function(){return this.$2===0},transformBounds:function(e){switch(this.$2){case 0:{return{x:e.minX,y:e.minY,w:e.maxX-e.minX,h:e.maxY-e.minY}}case 2:{var bO=e.minX*this.$1+this.$3.x;var bP=e.minY*this.$1+this.$3.y;var bQ=e.maxX*this.$1+this.$3.x;var bR=e.maxY*this.$1+this.$3.y;return{x:bO,y:bP,w:bQ-bO,h:bR-bP}}default:{return null}}},transformPoint:function(e){switch(this.$2){case 0:{return e}case 1:case 3:{return{x:(e.x-this.$3.x)*this.$0,y:(e.y-this.$3.y)*this.$0}}default:{return null}}},transformRect:function(e){switch(this.$2){case 0:{return{x:e.x,y:e.y,w:e.w,h:e.h}}case 1:case 3:{return{x:(e.x-this.$3.x)*this.$0,y:(e.y-this.$3.y)*this.$0,w:e.w*this.$0,h:e.h*this.$0}}default:{return null}}},transformCircle:function(e){switch(this.$2){case 0:{return e}case 1:case 3:{var bO=(e.center.x-this.$3.x)*this.$0;var bP=(e.center.y-this.$3.y)*this.$0;return{center:{x:bO,y:bP},radius:e.radius*this.$0}}default:{return null}}},transformPolygon:function(e){switch(this.$2){case 0:{return e}case 1:case 3:{var bO=e.length;var bP=new Array(bO);for(var bQ=0;bQ<bO;bQ=bQ+2){bP[bQ]=(e[bQ]-this.$3.x)*this.$0;bP[bQ+1]=(e[bQ+1]-this.$3.y)*this.$0}return bP}default:{return null}}}});ss.initClass(bu,a,{get_matrix:function(){return this.$0},reset:function(){this.$0=[1,0,0,1,0,0]},rotate:function(e){var bO=Math.cos(e);var bP=Math.sin(e);var bQ=this.$0[0]*bO+this.$0[2]*bP;var bR=this.$0[1]*bO+this.$0[3]*bP;var bS=this.$0[0]*-bP+this.$0[2]*bO;var bT=this.$0[1]*-bP+this.$0[3]*bO;this.$0[0]=bQ;this.$0[1]=bR;this.$0[2]=bS;this.$0[3]=bT},translate:function(e,bO){this.$0[4]=this.$0[4]+this.$0[0]*e+this.$0[2]*bO;this.$0[5]=this.$0[5]+this.$0[1]*e+this.$0[3]*bO},scale:function(e,bO){this.$0[0]=this.$0[0]*e;this.$0[1]=this.$0[1]*e;this.$0[2]=this.$0[2]*bO;this.$0[3]=this.$0[3]*bO},setTransform:function(e){this.$0[0]=e.get_matrix()[0];this.$0[1]=e.get_matrix()[1];this.$0[2]=e.get_matrix()[2];this.$0[3]=e.get_matrix()[3];this.$0[4]=e.get_matrix()[4];this.$0[5]=e.get_matrix()[5]},isEqual:function(e){return this.$0[0]===e.get_matrix()[0]&&this.$0[1]===e.get_matrix()[1]&&this.$0[2]===e.get_matrix()[2]&&this.$0[3]===e.get_matrix()[3]&&this.$0[4]===e.get_matrix()[4]&&this.$0[5]===e.get_matrix()[5]},clone:function(){var e=new bu;e.setTransform(this);return e}});ss.initEnum(bv,a,{none:0,pixelToDomain:1,domainToPixel:2,offset:3});ss.initClass(bw,a,{});ss.initClass(bx,a,{logInternal:function(e,bO,bP,bQ){if(ss.isNullOrUndefined(this.$2)){this.$1()}bP=this.formatMessage(ss.replaceAllString(bP,'\\n','<br />'),bQ);this.$2.html(bP)},$1:function(){this.$2=$("<div class='log-window-appender'>Debug mode ON</div>");this.$2.css(ss.mkdict(['position','absolute','bottom','0px','right','0px','backgroundColor','white','opacity','.8','border','1px solid black','minWidth','5px','minHeight','5px','z-index','100']));$('body').append(this.$2)}},tab.BaseLogAppender);ss.initClass(by,a,{});ss.initClass(bz,a,{});ss.initClass(bA,a,{});ss.initClass(bB,a,{});ss.initClass(bC,a,{});ss.initClass(bD,a,{});ss.initClass(bE,a,{});ss.initClass(bF,a,{});ss.initClass(bG,a,{});ss.initClass(bH,a,{});ss.initClass(bI,a,{});ss.initClass(bJ,a,{});ss.initClass(bK,a,{});ss.initClass(bL,a,{});ss.initClass(bM,a,{});ss.initClass(bN,a,{$0:function(e){var bO=e;switch(e.type){case'touchstart':{this.$3(bO);break}case'touchmove':{this.$2(bO);break}case'touchend':{this.$1(bO);break}}},$3:function(e){e.preventDefault();this.$5=false;this.$4.addEventListener('touchmove'.toString(),ss.mkdel(this,this.$0),false);this.$4.addEventListener('touchend'.toString(),ss.mkdel(this,this.$0),false)},$2:function(e){this.$5=true},$1:function(e){this.$4.removeEventListener('touchmove',ss.mkdel(this,this.$0),false);this.$4.removeEventListener('touchend',ss.mkdel(this,this.$0),false);if(!this.$5){var bO=document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY);if(bO.nodeType===3){bO=bO.parentNode}var bP=document.createEvent('MouseEvents');bP['initEvent']('click',true,true);bO.dispatchEvent(bP)}}});ss.setMetadata(I,{variance:[1]});ss.setMetadata(bj,{enumFlags:true});(function(){bn.$5='?';bn.$4={};bn.$6=true})();(function(){d.$a=new RegExp('^(eval@)?(\\[native code\\])?$');d.$7=new RegExp('^\\s*at .*(\\S+\\:\\d+|\\(native\\))','m');d.$b=new RegExp('(\\(eval at [^\\()]*)|(\\)\\,.*$)');d.$8=new RegExp('(.+?)(?:\\:(\\d+))?(?:\\:(\\d+))?$');d.$9=new RegExp('[\\(\\)]','g')})();(function(){var e={isMobile:function(){return tsConfig.is_mobile}};BrowserSupport.BrowserSupport.setConfig(e)})();(function(){t.epsilon=Math.pow(2,-52);t.$4=1+t.epsilon;t.$5=t.$4;t.$3=1/t.$4;t.$1=9.22337203685477E+18;t.$2=-9.22337203685477E+18})();(function(){l.visibleReadinessChromeZIndex=700;l.readinessChromeResizersZIndex=701;l.gridOverlayZIndex=699;l.zoneRectPreviewZIndex=700})();(function(){bA.ExportDialogType=null;var e={};e['ExportImage']=ss.mkdict(['title',tab.Strings.ExportImageDialogTitle,'mimeType','image/png','message',tab.Strings.ExportImageDialogMessage]);e['ExportData']=ss.mkdict(['title',tab.Strings.ExportDataDialogTitle,'mimeType','text/csv','message',tab.Strings.ExportDataDialogMessage]);e['ExportCrosstab']=ss.mkdict(['title',tab.Strings.ExportCrosstabDialogTitle,'message',tab.Strings.ExportCrosstabDialogMessage]);e['PrintPDF']=ss.mkdict(['title',tab.Strings.PrintPdfDialogTitle,'mimeType','application/pdf','message',tab.Strings.PrintPdfDialogMessage,'noping',true]);bA.ExportDialogType=e})();(function(){o.oneSecond=(new Date(2008,11,21,1,1,2)).getTime()-(new Date(2008,11,21,1,1,1)).getTime();o.oneMinute=(new Date(2008,11,21,1,2)).getTime()-(new Date(2008,11,21,1,1)).getTime();o.oneHour=(new Date(2008,11,21,2)).getTime()-(new Date(2008,11,21,1)).getTime();o.oneDay=(new Date(2008,11,21)).getTime()-(new Date(2008,11,20)).getTime();o.oneWeek=(new Date(2008,11,21)).getTime()-(new Date(2008,11,14)).getTime();o.$5=86400000})();(function(){v.$0=null})();(function(){Z.suppressAlerts=false})();(function(){r.$6='data-tab-test-wait';r.$7=ss.mkdict(['matrix',4,'matrix3d',12,'translate',0,'translate3d',0,'translateX',0,'translateY',-1]);r.$8=1})();(function(){u.$6=false;u.$1=true;u.$2=false;u.$5=[];u.$4=false;u.$3=null})();(function(){x.$a=null;x.$5=null;x.$7=null;x.$9=null;x.$c=null;x.$d=null;x.$4=null;x.$6=null;x.$8=null;x.$b=null;{x.$a=tab.Logger.lazyGetLogger(x);x.$5=[];x.$7=[];x.$9=[];x.$c=[];x.$d={};x.$4={};x.$6={};x.$8={};x.$b={}}x.$1(':newfilter',4,false);x.$1(':fieldconversion',5,true);x.$1(':newtoolbar',9,false);x.$1(':selectiontoolsmobile',23,true);x.$1(':mapssearchdebugalwaysshow',28,false);x.$1(':useleafletforgeosearch',19,false);x.$1(':aodragtoviz',31,false);x.$1(':gotomylocationbutton',32,true);x.$1(':designtint',33,false);x.$1(':newqfwolf',35,false);x.$1(':appearanceofblendingicons',36,true);x.$1(':outlinestampedshapes',38,false);x.$1(':catqfdropdown',40,false);x.$1(':opaquecanvas',42,true);x.$1(':logstorypointcachehits',43,false);x.$1(':debugtools',46,false);x.$1(':showruntimestatus',53,false);x.$1(':newgesturemodel',55,false);x.$1(':newgesturemodelonboarding',56,false);x.$1(':devicepreviewmode',57,false);x.$2(':buttondelay',11);x.$2(':hoverdelay',12);x.$2(':maxtooltipwhitespace',18);x.$2(':datahlmaxitems',44);x.$2(':greyglassdelay',48);x.$2(':spinnerdelay',49);x.$2(':canceldelay',50);x.$2(':owd',54);x.$2(':progloaddelay',39);x.$3(':instrumentobjects',47);x.$3(':runtimewebhost',51);x.$0()})();(function(){B.httpUnauthorizedCode=401;B.httpServiceUnavailable=503;B.httpInternalServerError=500})();(function(){N.afrikaans='af_ZA';N.albanian='sq_AL';N.amharic='am_ET';N.arabic='ar_BH';N.france='fr_FR';N.japan='ja_JP';N.unitedKingdom='en_UK';N.unitedStates='en_US'})();(function(){P.touchEventSamplingRate=4;P.defaultWheelDeltaIncrement=120;P.minimumZoomLevelIncrement=0.25;P.maxWheelDelta=360;P.$1=480;P.$0=512})();(function(){R.$6=100;R.$7=400;R.$8=20;R.$5=250;R.$9=5;R.$4=250;R.$b=null;R.$a=null;R.$c=null;R.$b={};R.$b['d']='DESC';R.$b['t']='TIME';R.$b['id']='ID';R.$b['sid']='SESSION_ID';R.$b['e']='ELAPSED';R.$b['v']='VALS';R.$b['wb']='WORKBOOK';R.$b['s']='SHEET_NAME';R.$b['p']='PROPS';R.$b['m']='MOBILE';R.$a={};R.$a['nav']='Navigation';R.$a['wps']='ProfileStart';R.$a['wp']='ProfileEnd';R.$a['gen']='Generic';R.$a['init']='SessionInit'})();(function(){U.$1=['navigationStart','unloadEventStart','unloadEventEnd','redirectStart','redirectEnd','fetchStart','domainLookupStart','domainLookupEnd','connectStart','connectEnd','secureConnectionStart','requestStart','responseStart','responseEnd','domLoading','domInteractive','domContentLoadedEventStart','domContentLoadedEventEnd','domComplete','loadEventStart','loadEventEnd'];U.$0=null;var e=window;var bO=function(bP){_.defer(U.collectMetrics)};if(ss.isValue(e.addEventListener)){window.addEventListener('load',bO,false)}else if(ss.isValue(e.attachEvent)){e.attachEvent('load',bO)}})();(function(){W.trackedObjects={};W.$0=null})();(function(){X.$3=null;X.$2=null})();(function(){Y.$0=x.getInt(54)})();(function(){bq.globalAppender=new tab.LogAppenderInstance(function(){return new bq})})();(function(){bs.defaultCustomStyleElementId='tab-appendedCustomStyle';bs.$2=new RegExp('-?[_a-zA-Z]+[_a-zA-Z0-9-]*');bs.$3={}})();(function(){bt.$0=null;bt.$0=new bt(0,0,1,0)})();(function(){bw.defaultHelpVersion='0.0';bw.onlineHelpOrigin='http://www.tableau.com';bw.$2='/offline_help/{0}/help.htm#{1}'})();(function(){bx.globalAppender=new tab.LogAppenderInstance(function(){return new bx})})();(function(){by.waitHandlerGlassZIndex=990;by.dialogAboveGlassAndSpinnerStandardZIndex=1000;by.belowGlassAndSpinnerStandardZIndex=988;by.glassStyleZIndex=999})();(function(){bz.specialManyValues='%many-values%';bz.specialNull='%null%';bz.specialError='%error%';bz.specialRagged='%ragged%';bz.specialSkipped='%skipped%';bz.specialMissing='%missing%';bz.specialAll='%all%';bz.specialNoAccess='%no-access%';bz.specialWildcard='%wildcard%';bz.millisPerDay=86400000;bz.$G=15;bz.$F=6;bz.$I=1E+15;bz.$H=1000000;bz.$J=0.0001;bz.$X=9;bz.$D=46;bz.$K=45;bz.$Y=48;bz.$E=53;bz.$V=57;bz.$Q='t';bz.$P='f';bz.$R=10;bz.$T=0;bz.$A='';bz.$W='N';bz.$C='e';bz.$B='p';bz.$L=1;bz.nfUseSeparators=2;bz.$O=3;bz.$S=4;bz.$U=5;bz.$N=6;bz.$M=7;bz.nfGroupSeparatorChars=8;bz.nfGroupingSpec=9;bz.$1a=['automatic','parenthesis','outerPrefix','outerSuffix','innerPrefix','innerSuffix'];bz.$17={};bz.$18={};bz.$19={};bz.$1f=new RegExp('(\\\\|\\^|\\$|\\*|\\+|\\?|\\.|\\:|\\,|\\(|\\)|\\[|\\]|\\{|\\}|\\|)','g');bz.$13=new RegExp('^([yYmMdD\\W]+)\\s+([hnst\\W]+)$');bz.$1g=new RegExp('(\\\\[:.]s+)');bz.$1j=new RegExp('(t+)','g');bz.$1b=new RegExp('([yYmMdDhnswq]+)','g');bz.$1h=new RegExp('\\(\\\\d\\+\\)(?:\\(\\?\\:)?\\s+\\(\\\\d\\+\\)','g');bz.$1c=new RegExp('\\s','g');bz.$11=new RegExp('(^|d)([^h]*)(h|$)','gi');bz.$12=new RegExp('h([^d]*)(d|$)','gi');bz.$Z=new RegExp('^(a|a\\.?m\\.?|㏂|π\\.?µ\\.?|午前)$','i');bz.$1d=new RegExp('^(p|p\\.?m\\.?|㏘|µ\\.?µ\\.?|午後)$','i');bz.$1e=new RegExp('(\\d)(?:\\.(\\d+))?e\\+(\\d+)');bz.$16=ss.mkdict(['yyyyy','yyyyy','yyyy','yyyy','yyy','yyyy','yy','yy','y','yyyy','L','m','LL','mm','LLL','mmm','LLLL','mmmm']);bz.$14={day:['',tab.Strings.Sunday,tab.Strings.Monday,tab.Strings.Tuesday,tab.Strings.Wednesday,tab.Strings.Thursday,tab.Strings.Friday,tab.Strings.Saturday,tab.Strings.Sunday],shortDay:['',tab.Strings.SundayShort,tab.Strings.MondayShort,tab.Strings.TuesdayShort,tab.Strings.WednesdayShort,tab.Strings.ThursdayShort,tab.Strings.FridayShort,tab.Strings.SaturdayShort,tab.Strings.SundayShort],shortMonth:[tab.Strings.JanuaryShort,tab.Strings.FebruaryShort,tab.Strings.MarchShort,tab.Strings.AprilShort,tab.Strings.MayShort,tab.Strings.JuneShort,tab.Strings.JulyShort,tab.Strings.AugustShort,tab.Strings.SeptemberShort,tab.Strings.OctoberShort,tab.Strings.NovemberShort,tab.Strings.DecemberShort],month:[tab.Strings.January,tab.Strings.February,tab.Strings.March,tab.Strings.April,tab.Strings.May,tab.Strings.June,tab.Strings.July,tab.Strings.August,tab.Strings.September,tab.Strings.October,tab.Strings.November,tab.Strings.December]};bz.$10=ss.mkdict(['t','t','v',bA.OleDateFromJsDate(Date.UTC(1918,10,11,11,11,0))]);bz.$1i=null;bz.$15=ss.mkdict(['０','0','１','1','２','2','３','3','４','4','５','5','６','6','７','7','８','8','９','9','－','-','．','.','。','.']);bz.$17.format='yyyy-mm-dd';bz.$17.timeFormat='hh:nn';bz.$18.format='yyyy-mm-ddThh:nn';bz.$19.format='hh:nn';bz.$1i=ss.mkdict(['%many-values%',true,'%null%',true,'%error%',true,'%ragged%',true,'%skipped%',true,'%missing%',true,'%all%',true,'%no-access%',true,'%wildcard%',true])})();(function(){if(BrowserSupport.BrowserSupport.IsMac()){$(document).addClass('tb_mac')}})();(function(){bC.CFS_ALL='all';bC.CFS_SINGLE='single-select';bC.CFS_MULTIPLE='multi-select'})();(function(){bD.CFT_INCLUSIVE='include';bD.CFT_EXCLUSIVE='exclude'})();(function(){bE.DS_NORMAL=null;bE.DS_NULL='n';bE.DS_ALL='a';bE.DS_WILDCARD='w';bE.DS_SKIPPED='s';bE.DS_NOACCESS='p';bE.DS_RAGGED='r';bE.DS_ERROR='e';bE.DS_MISSING='m'})();(function(){bG.FT_QUANTITATIVE='Q';bG.FT_ORDINAL='O';bG.FT_NOMINAL='N';bG.FT_UNKNOWN=null})();(function(){bH.HFS_SINGLE='single-select';bH.HFS_MULTIPLE='multi-select'})();(function(){bI.QFD_ALL='all';bI.QFD_CONTEXT='context';bI.QFD_RELEVANT='relevant';bI.QFD_CASCADING='cascading';bI.QFD_CASCADING_CONTEXT='cascading-context'})();(function(){bJ.QFF_FIXED_START='start';bJ.QFF_FIXED_END='end'})();(function(){bK.QFI_ALL='include-all';bK.QFI_NON_NULL='include-non-null';bK.QFI_NULL_ONLY='include-null';bK.QFI_RANGE='include-range';bK.QFI_RANGE_OR_NULL='include-range-or-null'})();(function(){bL.table='t';bL.legend='l';bL.filter='f';bL.currentPage='p';bL.title='i';bL.text='x';bL.bitmap='b';bL.web='w';bL.draw='d';bL.textBlock='k';bL.layoutContainer='c';bL.parameter='a'})()})()}());;
/*! BEGIN Domain */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqldomain');var b=function(){this.command=null;this.params=null};b.__typeName='tab.$0';var c=function(e,ex,lA,lB){bM.call(this,'none',e,ex,lA,lB)};c.__typeName='tab.$1';var d=function(){};d.__typeName='tab.$10';d.isInstanceOfType=function(){return true};var f=function(){this.$5=null;this.$4=null;this.$3=null;this.$6=null;this.$5={startIndex:0};this.$4=[{field:'name',ascending:true}]};f.__typeName='tab.$11';f.$1=function(e,ex){this.$5=null;this.$4=null;this.$3=null;this.$6=null;this.$5={startIndex:0};this.$4=[e];this.$3=ex};f.$0=function(e,ex){this.$5=null;this.$4=null;this.$3=null;this.$6=null;this.$5={startIndex:0};this.$4=(!tab.MiscUtil.isNullOrEmpty(e)?e:[{field:'name',ascending:true}]);this.$3=ex};var g=function(e,ex){var lA=function(lB,lC){this.$0=ss.getDefaultValue(e);this.$1=ss.getDefaultValue(ex);this.$0=lB;this.$1=lC};ss.registerGenericClassInstance(lA,g,[e,ex],{},function(){return null},function(){return[]});return lA};g.__typeName='tab.$12';ss.initGenericClass(g,a,2);var h=function(e){var ex=function(lA){this.$0=ss.getDefaultValue(e);this.$1=null;this.$2=null;this.$0=lA};ss.registerGenericClassInstance(ex,h,[e],{},function(){return null},function(){return[]});return ex};h.__typeName='tab.$13';ss.initGenericClass(h,a,1);var i=function(e){var ex=function(){this.$2=null;this.$3=null};ss.registerGenericClassInstance(ex,i,[e],{$0:function(lA){var lB=this.$2;this.$2=lA;lA.$1=lB;lA.$2=null;if(ss.isValue(lB)){lB.$2=lA}if(ss.isNullOrUndefined(this.$3)){this.$3=lA}},$1:function(lA){if(ss.referenceEquals(this.$2,lA)){this.$2=lA.$1}if(ss.referenceEquals(this.$3,lA)){this.$3=lA.$2}if(ss.isValue(lA.$2)){lA.$2.$1=lA.$1}if(ss.isValue(lA.$1)){lA.$1.$2=lA.$2}}},function(){return null},function(){return[]});return ex};i.__typeName='tab.$14';ss.initGenericClass(i,a,1);var j=function(e){gV.call(this,e,new hF('sizeItemList'.toString()))};j.__typeName='tab.$15';var k=function(e){gV.call(this,e,new hF('sizeItems'.toString(),1))};k.__typeName='tab.$16';var l=function(e){gV.call(this,e,new hF('sheetListItems'.toString(),1))};l.__typeName='tab.$17';var m=function(e){this.$8=null;this.$j=null;this.$9=null;this.$3=null;this.$4=null;this.$7=null;this.$6=null;this.$0=null;this.$1=null;this.$2=null;this.$e=null;this.$i=null;this.$a=null;this.$5=null;this.$d=null;this.$h=null;this.$b=null;this.$f=null;this.$c=null;this.$g=null;var ex=e.ReferenceLineDetails;this.$8=ex.ReferenceLineSpecId;this.$j=ex.ZOrder;this.$9=ex.ReferenceLineStyleId;this.$3=ex.FillAbove;this.$4=ex.FillBelow;var lA=e.LayoutElements;this.$7=lA.ReferenceLineSpecId;this.$6=lA.PaneIndex;this.$0=lA.AxisOrientation;this.$1=lA.CalculationScope;this.$2=lA.CellIndex;this.$e=e.XValues;this.$i=e.YValues;this.$a=e.TextRun;this.$5=e.Labels;var lB=e.XStyles;this.$d=lB.TextStyles;this.$b=lB.AxisStyles;var lC=e.YStyles;this.$h=lC.TextStyles;this.$f=lC.AxisStyles;this.$c=lB.FillColors;this.$g=lC.FillColors};m.__typeName='tab.$18';var n=function(e,ex,lA,lB,lC){this.$3=null;this.$2=null;var lD=e.$1[lA];var lE=e.$9[ex];var lF=(lB?e.$b:e.$f);var lG=(lB?e.$d:e.$h);var lH=(lB?e.$c[lE]:e.$g[lE]);var lI=(lB?e.$e:e.$i);this.$3=new hY.$ctor2(lC,lB,lD,lF,lE,e.$2,lI,e.$a,lG,e.$5);this.$2=new hY.$ctor1(lC,lB,lD,e.$2,lI,lH,e.$3[ex],e.$4[ex]);if(!this.$2.get_hasFill()){this.$2=null}};n.__typeName='tab.$19';var o=function(e){this.$9=null;this.$7=0;this.$8=null;this.$1$1=null;this.$1$2=null;this.$9=e;this.$7=0;this.$8=[]};o.__typeName='tab.$2';var p=function(e,ex){this.$4=null;this.$3=false;this.$4=ex;this.$3=e};p.__typeName='tab.$20';var q=function(e,ex,lA,lB){this.$c=null;this.$e=null;this.$d=null;this.$b=null;this.$c=e;this.$e=ex;this.$d=lA;this.$b=lB};q.__typeName='tab.$21';var r=function(e,ex,lA){this.$7=null;this.$1$1=false;this.$1$2=false;this.$4(e);this.$6(ex);this.$7=new Array(lA.length);for(var lB=0;lB<lA.length;lB++){this.$7[lB]=bQ.fromArgbInt(lA[lB])}};r.__typeName='tab.$22';var s=function(){};s.__typeName='tab.$23';var t=function(){this.$4=null;this.$4=[]};t.__typeName='tab.$24';var u=function(e,ex){this.$3=null;this.$2=null;this.$3=e;this.$2=ex};u.__typeName='tab.$25';var v=function(){};v.__typeName='tab.$26';v.$0=function(e,ex,lA){var lB=new Set;for(var lC=0;lC<ex.length;lC++){var lD=ex[lC];if(ss.contains(lD.sourceWorksheets,e)&&v.$1(lD,lA)){tab.SetUtilities.addAll(Object).call(null,lB,lD.targetWorksheets)}}return lB};v.$1=function(e,ex){var lA=ch.deserialize(jH.create(e.simpleCommandModel).get_simpleCommand(),true);if(ss.isNullOrUndefined(ex)||bh.isSpecialDateTimeHighlighting(lA)){return true}var lB=bh.getHighlightFieldCaptions(lA,ex.get_highlightCaptions(),ex.get_fieldCaptions());return!tab.MiscUtil.isNullOrEmpty$2(lB)};var w=function(){};w.__typeName='tab.$27';var x=function(){};x.__typeName='tab.$28';var y=function(){this.$1$1=0;this.$1$2=0;this.$1$3=0;this.$1$4=0;this.$1(0);this.$3(0);this.$5(0);this.$7(0)};y.__typeName='tab.$29';y.$0=function(e,ex,lA,lB){this.$1$1=0;this.$1$2=0;this.$1$3=0;this.$1$4=0;this.$1(e);this.$3(ex);this.$5(lA);this.$7(lB)};var z=function(){};z.__typeName='tab.$3';var A=function(e,ex){this.$1$1=0;this.$1$2=0;this.$3(e);this.$1(ex)};A.__typeName='tab.$30';var B=function(e){this.$9=null;this.$a=new Map;this.$8=[];this.$7=false;this.$9=e};B.__typeName='tab.$31';B.$0=function(e,ex){var lA=new Array(e.length);for(var lB=0;lB<e.length;++lB){lA[lB]={item1:e[lB],item2:ex[lB]}}lA.sort(function(lC,lD){return lC.item1-lD.item1});return lA};B.$1=function(e,ex){var lA;if(ex.length===1||ss.isNullOrUndefined(e)){lA=ex}else{lA=_.sortBy(ex,function(lB,lC){return e[lC]})}return lA};var C=function(){};C.__typeName='tab.$32';C.$e=function(){return tab.Logger.lazyGetLogger(iV)};C.$2=function(e,ex,lA,lB,lC){var lD=C.$4(lB,lC);var lE=new B(lC);if(ss.isNullOrUndefined(lD)){return lE}var lF=new Array(lC.length);for(var lG=0;lG<lF.length;++lG){var lH=lB.getColumnIndex(lC[lG]);lF[lG]=lH}var lI={};for(var lJ=0;lJ<lA.length;lJ++){var lK=lA[lJ];var lL=e.getItemNamesFromObjectId(lK);if(ss.isNullOrUndefined(lL)){continue}var lM=true;var lN=[];for(var lO=0;lO<lL.length;lO++){var lP=ex[lO];var lQ=lD[lP];if(ss.isNullOrUndefined(lQ)){continue}lI[lP]=lI[lP]||kL.buildAliasReverseLookup(lB,lQ,Y.get_instance().get_dataDictionary());var lR=lI[lP];var lS=lR[lL[lO]];if(!ss.isValue(lS)){lM=false;break}lN.push(lS)}if(lM){lE.$0(lN,lF)}}return lE};C.$1=function(e,ex){var lA={};for(var lB=0;lB<ex.length;lB++){var lC=ex[lB];var lD=new Array(lC.columnIndices.length);for(var lE=0;lE<lD.length;lE++){var lF=e.getVizDataFieldByIndex(lC.columnIndices[lE]);lD[lE]=lF.get_fieldName()}var lG=lD.join(';');var lH;if(ss.keyExists(lA,lG)){lH=lA[lG]}else{lH=new B(lD);lA[lG]=lH}lH.$0(lC.aliasIndices,lC.columnIndices)}return _.map(lA,function(lI,lJ){return lI})};C.$c=function(e,ex){var lA=[];for(var lB=0;lB<ex.length;lB++){var lC=ex[lB];if(ss.isNullOrUndefined(lC.node)){continue}var lD=lC.node;if(ss.isValue(lD.columnIndices)){for(var lE=0;lE<lD.columnIndices.length;lE++){var lF=lD.columnIndices[lE];var lG=e.get_vizDataModel().getVizDataFieldByIndex(lF);var lH=lG.get_fieldCaption();if(!ss.contains(lA,lH)){lA.push(lH)}}}if(ss.isValue(lD.fn)){var lI=e.get_vizDataModel().getVizDataField(lD.fn);var lJ=lI.get_fieldCaption();if(!ss.contains(lA,lJ)){lA.push(lJ)}}}return Array.prototype.slice.call(lA)};C.$3=function(e,ex,lA){var lB=new B(lA);var lC=C.$4(e,lA);if(ss.isNullOrUndefined(lC)){return lB}for(var lD=0;lD<ex.length;lD++){var lE=ex[lD];var lF=[];var lG=[];for(var lH=0;lH<lA.length;lH++){var lI=lA[lH];var lJ=lC[lI];var lK=lJ.getAliasIndex(lE);lF.push(lK);lG.push(e.getColumnIndex(lI))}if(lF.length!==lA.length){}lB.$0(lF,lG)}return lB};C.$0=function(e,ex,lA,lB){var lC=[];var lD={};var lE=false;e.forEachVizDataField(function(lX,lY){if(C.$d(lX)){var lZ=lX.get_aggType()||'none';lD[lZ]=lY;if(lZ==='none'){lE=true}}return true});var lF=true;var lG=null;ex.forEachVizDataField(function(lX,lY){if(C.$d(lX)){if(ss.isNullOrUndefined(lG)){lG=lX.get_baseColumnName()}else if(!ss.referenceEquals(lG,lX.get_baseColumnName())){lF=false}}return true});var lH=[];if(lF){var lI=[];ex.forEachVizDataField(function(lX,lY){if(C.$d(lX)){var lZ=lX.get_aggType()||'none';if(!lE&&lZ==='none'){var ma=ss.getEnumerator(Object.keys(lD));try{while(ma.moveNext()){var mb=ma.current();if(!ss.contains(lI,mb)){lI.push(mb);var mc=lD[mb];lC.push(new D(mc,lY,mb,'none'));var md=e.getVizDataFieldByIndex(mc);lH.push(md)}}}finally{ma.dispose()}}else if(ss.keyExists(lD,lZ)){if(!ss.contains(lI,lZ)){lI.push(lZ);var me=lD[lZ];lC.push(new D(me,lY,'none','none'));lH.push(lX)}}else if(lE){var mf=lD['none'];lC.push(new D(mf,lY,'none',lZ));lH.push(lX)}}return true})}var lJ=new Array(lH.length);for(var lK=0;lK<lH.length;lK++){var lL=lH[lK];lJ.push(lL.get_fieldCaption())}var lM=new B(lJ);for(var lN=0;lN<lB.length;lN++){var lO=lB[lN];var lP=[];var lQ=[];for(var lR=0;lR<lC.length;lR++){var lS=lC[lR];var lT=e.getVizDataFieldByIndex(lS.$3);var lU=lT.getDataValueIndex(lO);if(ss.isValue(lU)){var lV=lA.getRawValue(lT.get_dataType(),ss.unbox(lU));var lW=C.$5(lV,lS.$2,lS.$0,ss.unbox(lU));lP.push(lW);lQ.push(lS.$3)}}lM.$0(lP,lQ)}return{item1:lM,item2:lC}};C.$b=function(e,ex,lA,lB){var lC=[];if(ss.isNullOrUndefined(lA)||e.$5()){return lC}lA.forEachTupleId(function(lD){var lE=[];var lF=[];for(var lG=0;lG<ex.length;lG++){var lH=ex[lG];var lI=lA.getVizDataFieldByIndex(lH.$1);var lJ=lI.getDataValueIndex(lD);if(ss.isValue(lJ)){var lK=lB.getRawValue(lI.get_dataType(),ss.unbox(lJ));var lL=C.$5(lK,lH.$0,lH.$2,ss.unbox(lJ));lE.push(lL);lF.push(lH.$1)}}if(e.$1(lF,lE)){lC.push(lD)}return true});return lC};C.$a=function(e,ex){var lA=[];if(ss.isNullOrUndefined(ex)||e.$5()){return lA}var lB=e.$4();var lC=C.$4(ex,lB);if(ss.isNullOrUndefined(lC)){return lA}if(!ex.get_hasTupleIdColumn()){return lA}var lD=new Array(lB.length);for(var lE=0;lE<lB.length;lE++){lD[lE]=ex.getColumnIndex(lB[lE])}ex.forEachTupleId(function(lF){var lG=new Array(lB.length);for(var lH=0;lH<lB.length;lH++){var lI=lB[lH];var lJ=lC[lI];var lK=lJ.getAliasIndex(lF);lG[lH]=lK}if(e.$1(lD,lG)){lA.push(lF)}return true});return lA};C.$9=function(e,ex,lA){var lB=[];if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(lA)||ex.$5()){return lB}var lC=ex.$4();var lD=null;var lE=e.get_sceneRuntimeData().get_panes();for(var lF=0;lF<lE.length;lF++){var lG=lE[lF];for(var lH=0;lH<lG.drawPane.length;lH++){var lI=lG.drawPane[lH];if(lI.visualPart==='trend-lines'){for(var lJ=0;lJ<lI.drawItems.length;lJ++){var lK=lI.drawItems[lJ];if(lK.type==='draw-group'){lD=new Array(lC.length);for(var lL=0;lL<lC.length;lL++){lD[lL]=lA.getColumnIndex(lC[lL])}var lM=lK;var lN={};if(ss.isValue(lM.columnIndices)){for(var lO=0;lO<lM.columnIndices.length;lO++){lN[lM.columnIndices[lO]]=lM.aliasIndices[lO]}}var lP=new Array(lC.length);for(var lQ=0;lQ<lC.length;lQ++){if(ss.keyExists(lN,lD[lQ])){lP[lQ]=lN[lD[lQ]]}else{lP[lQ]=null}}if(ex.$1(lD,lP)){lB.push(lM.objectId)}}}}}}return lB};C.$4=function(e,ex){var lA={};for(var lB=0;lB<ex.length;lB++){var lC=ex[lB];var lD=e.getVizDataField(lC);if(ss.isNullOrUndefined(lD)){return null}lA[lC]=lD}return lA};C.$6=function(e,ex,lA){var lB=[];if(ss.isNullOrUndefined(ex)||lA.get_fieldCaptions().length!==e.$4().length){return lB}var lC=e.$4();var lD=lA.get_fieldCaptions();var lE=[];for(var lF=0;lF<lD.length;lF++){var lG=lD[lF];var lH=ss.indexOf(lC,lG);if(lH===-1){return lB}lE.push(lH)}var lI=Y.get_instance().get_dataDictionary();var lJ={};var lK={};var lL=[];var lM=e.$6();for(var lN=0;lN<lM.length;lN++){var lO=lM[lN];var lP=true;lL.length=lO.length;for(var lQ=0;lQ<lL.length;lQ++){var lR=lE[lQ];var lS=lO[lR];if(!ss.isValue(lS)){lP=false;break}var lT=lD[lQ];lJ[lT]=lJ[lT]||ex.getVizDataField(lT);var lU=lJ[lT];lL[lQ]=kL.lookupAliasFromIndex(lS,lU,lI)}if(lP){lK[lL.join(',')]=true}}var lV=lA.get_items();for(var lW=0;lW<lV.length;lW++){var lX=lV[lW];if(lK[lX.itemValues.join(',')]===true){lB.push(lX.objectId)}}return lB};C.$7=function(e,ex,lA){var lB=[];if(ss.isNullOrUndefined(ex.get_vizDataModel())){return lB}var lC=e.$4();for(var lD=0;lD<lA.length;lD++){var lE=lA[lD];var lF=ss.isNullOrUndefined(lE.node)||ss.isNullOrUndefined(lE.node.columnIndices)||ss.isNullOrUndefined(lE.node.aliasIndices);if(lF||lE.node.aliasIndices.length<lC.length){continue}var lG=[];var lH=[];var lI=false;for(var lJ=0;lJ<lE.node.columnIndices.length;++lJ){var lK=lE.node.columnIndices[lJ];var lL=ex.get_vizDataModel().getVizDataFieldByIndex(lK).get_fieldCaption();if(ss.isValue(lL)&&ss.contains(lC,lL)){lG.push(lK);lH.push(lE.node.aliasIndices[lJ]);if(lJ===0){lI=true}}}if(lI&&e.$1(lG,lH)){var lM=jb.nodeSelectionFromDrawGroup(lE);lB.push(lM)}}return lB};C.$8=function(e,ex,lA,lB){var lC=[];if(ss.isNullOrUndefined(lA.get_vizDataModel())){return lC}var lD=new ss.ObjectEnumerator(lA.get_sceneModel().get_visualListModels());try{while(lD.moveNext()){var lE=lD.current();var lF=lE.value.get_groupItemNodes();for(var lG=0;lG<lF.length;lG++){var lH=lF[lG];if(ss.isNullOrUndefined(lH.node.columnIndices)||ss.isNullOrUndefined(lH.node.aliasIndices)||!tab.MiscUtil.isNullOrEmpty$3(lH.node.fn)){continue}var lI=[];for(var lJ=0;lJ<lH.node.columnIndices.length;++lJ){var lK={$:lH.node.columnIndices[lJ]};var lL=_.find(ex,ss.mkdel({nodeColIndex:lK},function(lQ){return lQ.$1===this.nodeColIndex.$}));if(ss.isValue(lL)){var lM=lH.node.aliasIndices[lJ];var lN=lA.get_vizDataModel().getVizDataFieldByIndex(lL.$1);var lO=lB.getRawValue(lN.get_dataType(),lM);if(ss.isValue(lO)){var lP=C.$5(lO,lL.$0,lL.$2,lM);lI.push(lP)}}}if(lI.length===lH.node.aliasIndices.length){if(e.$1(lH.node.columnIndices,lI)){lC.push(jb.nodeSelectionFromDrawGroup(lH))}}}}}finally{lD.dispose()}return lC};C.$d=function(e){if(ss.isNullOrUndefined(e)){return false}var ex=e.get_dataType();if(ex==='datetime'||ex==='date'){return true}var lA=['day','hour','mdy','minute','month','month-year','qtr','trunc-day','trunc-hour','trunc-minute','trunc-month','trunc-qtr','trunc-second','trunc-week','trunc-year','week','weekday','year'];return ss.contains(lA,e.get_aggType())};C.$5=function(e,ex,lA,lB){if(_.isNumber(e)){return e}var lC=(_.isDate(e)?e:tab.DateUtil.parsePresModelDate(e));var lD=lB;if(ex==='none'&&lA!=='none'){switch(lA){case'year':{lD=tab.DateUtil.dateAsYear(lC);break}case'qtr':{lD=tab.DateUtil.dateAsQuarter(lC);break}case'month':{lD=tab.DateUtil.dateAsMonth(lC);break}case'day':{lD=tab.DateUtil.dateAsDay(lC);break}case'hour':{lD=tab.DateUtil.dateTimeAsHour(lC);break}case'minute':{lD=tab.DateUtil.dateTimeAsMinute(lC);break}case'second':{lD=tab.DateUtil.dateTimeAsSecond(lC);break}case'week':{lD=tab.DateUtil.dateAsWeek(lC);break}case'weekday':{lD=tab.DateUtil.dateAsDayOfWeek(lC);break}case'month-year':{lD=tab.DateUtil.dateAsMonthYear(lC);break}case'mdy':{lD=tab.DateUtil.dateAsMonthDayYear(lC);break}}if(ss.isNullOrUndefined(lD)){}}return lD};var D=function(e,ex,lA,lB){this.$3=0;this.$1=0;this.$2=null;this.$0=null;this.$3=e;this.$1=ex;this.$2=lA||'none';this.$0=lB||'none'};D.__typeName='tab.$33';var E=function(){};E.__typeName='tab.$34';var F=function(e){this.$2=null;this.$1=null;this.$2=e;if(ss.isNullOrUndefined(this.$2.dashboardPresModel)){return}var ex={};var lA=this.$2.dashboardPresModel.zones;var lB=_.keys(this.$2.dashboardPresModel.zones);for(var lC=0,lD=lB.length;lC<lD;lC++){var lE=lB[lC];var lF=lA[lE];if(ss.isNullOrUndefined(lF)||ss.isValue(ly.getContent(lF,'imageZone'))){ex[lE]=null}else{ex[lE]=lF.presModelHolder}}this.$1=ex};F.__typeName='tab.$35';var G=function(e,ex,lA,lB,lC){this.$4=null;this.$5=null;this.$e=0;this.$9=0;this.$a=0;this.$b=null;this.$d=null;this.$c=null;this.$7=0;this.$f=null;this.$8=0;this.$6=false;this.$1$1=null;this.$4=e;this.$5=ex;this.$e=lA;this.$a=ss.coalesce(lB,1);this.$9=ss.coalesce(lC,35)};G.__typeName='tab.$4';var H=function(e){bM.call(this,'none',e,null)};H.__typeName='tab.$5';var I=function(e){kG.call(this,e);this.c=true};I.__typeName='tab.$6';var J=function(e){this.$5=null;this.$1$1=0;this.$5=e};J.__typeName='tab.$7';var K=function(e,ex,lA){this.$3=null;this.$1=null;this.$2=null;this.$3=e;this.$1=ex;this.$2=lA};K.__typeName='tab.$8';var L=function(){};L.__typeName='tab.$9';L.$2=function(e){return function(ex,lA,lB){var lC=$.Deferred();var lD=kO.createRequest(ex,lA.$2(),function(){},function(){});lD.success=function(lE,lF,lG){ji.onVizportalPinged();var lH=kO.$3(lE);if(kO.$5(lH)){lC.reject();return}var lI=lB(lH);lC.resolve(lI)};lv.helper(lD);return lC.promise()}};L.$3=function(e){return function(ex,lA){var lB=lA(ex);var lC=ex['moreItems'].toString().toLowerCase()==='true';return{items:lB,moreItems:lC}}};L.$0=function(e){return function(ex,lA,lB,lC){var lD=L.$2(e).call(null,ex,lA,lB);lD.done(function(lE){if(!lE.moreItems){lC();return}lA.$1(lA.$0()+lE.items.length);L.$0(e).call(null,ex,lA,lB,lC)});lD.fail(lC)}};L.$1=function(e){return function(ex,lA,lB,lC,lD){var lE=L.$2(e).call(null,ex,lA,lB);lE.done(function(lF){if(!lF.moreItems){lC();return}lA.$1(lA.$0()+lF.items.length);L.$1(e).call(null,ex,lA,lB,lC,lD)});lE.fail(lD)}};var M=function(e,ex,lA,lB,lC,lD){this.$7=0;this.$3=0;this.$5=0;this.$4=0;this.$6=0;this.$0=0;this.$1=0;this.$2=0;hV.call(this);if(ss.isNullOrUndefined(lC)&&ss.isValue(lD)){lC=lA;lD=lB}this.$7=e;this.$3=lA;this.$5=lB;this.$4=lC;this.$6=lD;var lE=ex;var lF=lC;var lG=lD;var lH=lD/lC;this.$0=(lG-lH*lF-lE+lH)/(-(lF*lF)+2*lF-1);this.$1=lH-2*this.$0*lF;this.$2=lE-lH+this.$0*(2*lF-1)};M.__typeName='tab.AcceleratingRangeTransform';global.tab.AcceleratingRangeTransform=M;var N=function(){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null};N.__typeName='tab.AckbarEventsHelper';N.get=function(){if(ss.isNullOrUndefined(N.instance)){N.instance=new N}return N.instance};global.tab.AckbarEventsHelper=N;var O=function(){};O.__typeName='tab.ActionType';global.tab.ActionType=O;var P=function(){};P.__typeName='tab.ActionUtils';P.$l=function(){return tab.Logger.lazyGetLogger(P)};P.$m=function(){if(ss.isNullOrUndefined(P.$q)){return{item1:{},item2:[]}}return P.$q};P.$n=function(e){P.$q=e};P.isVizSourceOfAction=function(e,ex){return _.any(e.sourceWorksheets,function(lA){return ss.referenceEquals(lA,ex)})};P.isTargetOfActionLocal=function(e){var ex=gY.getVisualModels(Y.get_instance());for(var lA=0;lA<e.targetWorksheets.length;lA++){var lB=e.targetWorksheets[lA];if(ss.keyExists(ex,lB)){return true}}return false};P.isCorrectAction=function(e,ex){if(ss.isNullOrUndefined(e)){return false}return ss.startsWithString(jH.create(e.simpleCommandModel).get_simpleCommand().toString(),cl.serialize(ex))};P.isFilterAction=function(e){return P.isCorrectAction(e,{ns:'tabdoc',cmd:'filter-targets'})};P.isHighlightAction=function(e){return P.isCorrectAction(e,{ns:'tabdoc',cmd:'highlight'})};P.isGroupAction=function(e){return P.isCorrectAction(e,{ns:'tabdoc',cmd:'modify-marks-in-set-v2'})&&e.sourceWorksheets.length>0};P.isNavigationAction=function(e){return P.isCorrectAction(e,{ns:'tabdoc',cmd:'navigate-to-sheet'})&&e.sourceWorksheets.length>0&&e.targetWorksheets.length>0};P.doesWorksheetContainHoverActionsThatMustRunRemotely=function(e){return P.getApplicableActions(e,'on-hover','group').length>0||P.getApplicableActions(e,'on-hover','filter').length>0};P.isFilterSource=function(e,ex){var lA=e.pm;var lB=lA.userActions;for(var lC=0;lC<lB.length;lC++){var lD=lB[lC];if(!P.isVizSourceOfAction(lD,ex)){continue}if(lD.activation!=='on-select'){continue}if(ss.isNullOrUndefined(lD.simpleCommandModel)){continue}var lE=ss.replaceAllString(lD.simpleCommandModel['simpleCommand'.toString()],'simpleCommand=','');var lF=ch.deserialize(lE,true);if(!ss.referenceEquals(lF.commandName,{ns:'tabdoc',cmd:'filter-targets'}.cmd)){continue}var lG=lD.targetWorksheets;if(lG.length===0){continue}return true}return false};P.getApplicableActions=function(e,ex,lA){var lB=Y.get_instance().get_workbook().findContentDashboard().get_actionPresModels();var lC=P.$a(lB,e,ex);if(ss.isValue(lA)){lC=_.filter(lC,P.$6(ss.unbox(lA)))}lC=_.filter(lC,P.$8());return lC};P.$6=function(e){return function(ex){return P.getActionType(ex)===e}};P.$8=function(){return function(e){return P.getActionType(e)==='url'||ss.isValue(e.targetUrl)||e.targetWorksheets.length>0||P.isGroupAction(e)||P.isNavigationAction(e)}};P.couldSheetFilterActionsModifyItself=function(e){var ex=P.getApplicableActions(e,'on-select','filter');var lA=P.$k(ex);var lB=lA&&P.$7(ex,e);return lB};P.couldSheetGroupActionsModifyItself=function(e){return P.$k(P.getApplicableActions(e,'on-select','group'))};P.shouldBlockVizInteractionWhenExecutingActionOnSelection=function(e){var ex=P.getApplicableActions(e,'on-select','filter').concat(Array.prototype.slice.call(P.getApplicableActions(e,'on-select','group')));return P.$k(ex)};P.$k=function(e){return e.length>0&&!Y.get_instance().get_isOffline()};P.$7=function(e,ex){for(var lA=0;lA<e.length;lA++){var lB=e[lA];for(var lC=0;lC<lB.targetWorksheets.length;lC++){var lD=lB.targetWorksheets[lC];if(ss.referenceEquals(lD,ex)){return true}}}return false};P.executeActions=function(e,ex,lA,lB,lC){var lD=e.worksheet;var lE=P.getApplicableActions(lD,ex,'filter');var lF=P.getApplicableActions(lD,ex,'highlight');var lG=P.getApplicableActions(lD,ex,'url');var lH=P.getApplicableActions(lD,ex,'group');var lI=gY.getVisualModel(Y.get_instance(),lD);if(ss.isValue(lA)){if(lG.length>0&&lA.length>0){P.$5(lG,lA,lI)}if(lF.length>0){if(lA.length>0){P.$4(lF,lA,lI,lB)}else{P.$i(lB)}}else if(ss.isValue(lC)&&lC){P.$4(lF,lA,lI,lB)}}P.$2(e,lI,lE,lH,lA,lB)};P.executeAction=function(e,ex,lA,lB){if(!ss.isValue(e)){return}var lC=[e];if(!ss.isNullOrUndefined(e.linkSpec)){P.$5(lC,ex,lA)}else if(true){P.$4(lC,ex,lA,lB)}else{}};P.getActionType=function(e){if(ss.isValue(e.simpleCommandModel)){var ex=ch.deserialize(e.simpleCommandModel['simpleCommand'.toString()],true);if(ss.referenceEquals(ex.commandName,{ns:'tabdoc',cmd:'highlight'}.cmd)){return'highlight'}if(ss.referenceEquals(ex.commandName,{ns:'tabdoc',cmd:'filter-targets'}.cmd)){return'filter'}if(ss.referenceEquals(ex.commandName,{ns:'tabdoc',cmd:'modify-marks-in-set-v2'}.cmd)){return'group'}if(ss.referenceEquals(ex.commandName,{ns:'tabdoc',cmd:'goto-sheet'}.cmd)){return'navigation'}return null}if(ss.isValue(e.linkSpec)){return'url'}return null};P.willActionCauseTabChange=function(e,ex){if(Y.get_instance().get_isOffline()){return false}var lA=P.getApplicableActions(e,ex,'filter').concat(Array.prototype.slice.call(P.getApplicableActions(e,ex,'navigation')));for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];if(ss.isValue(lC.simpleCommandModel)){var lD=ch.deserialize(lC.simpleCommandModel['simpleCommand'.toString()],true);var lE=lD.commandParams['targetSheet'];if(ss.isValue(lE)&&!_.isEqual(lE,tsConfig.current_sheet_name)){return true}}}return false};P.getUrlActionPm=function(e,ex,lA){if(ss.isValue(lA)&&!ss.isNullOrUndefined(e.linkSpec)){var lB=ex.get_vizDataModel();var lC=Y.get_instance().get_dataDictionary();var lD=kN.constructUrl(lC,e.linkSpec,lB,lA,ex.get_worksheetName());return{item1:P.$1(lD,e.linkSpec),item2:lD.item2}}return{item1:null,item2:'urlConstructionFail'}};P.$1=function(e,ex){if(e.item2!=='success'){return null}var lA={url:e.item1};if(tab.FeatureFlags.isEnabled('SpecificWebTargetsForActions')){switch(ex.urlActionTargetType){case'default-zone-or-browser':{var lB=gY.getFirstAvailableWebZoneName(Y.get_instance());if(ss.isValue(lB)){lA.target=lB}break}case'browser':{lA.target='_blank';break}case'specific-zone':{lA.target='frame_'+ex.zoneId.toString();break}}}else{var lC=gY.getFirstAvailableWebZoneName(Y.get_instance());if(ss.isValue(lC)){lA.target=lC}}return lA};P.$4=function(e,ex,lA,lB){var lC=bh.computeFromTuples(lA,ex,e);iV.$f(lC,lB)};P.$i=function(e){iV.$2(e)};P.$5=function(e,ex,lA){if(ss.isValue(ex)&&ex.length>0){var lB=[];for(var lC=0;lC<e.length;lC++){var lD=e[lC];var lE=P.getUrlActionPm(lD,lA,ex).item1;if(ss.isValue(lE)){lB.push(lE)}else{bT.fireDeferredUrlActions=true;return}}if(lB.length>0){bT.get().delayLocalUrlActions(lB)}}};P.$h=function(e,ex){var lA=P.$m().item1;var lB=P.$m().item2;if(ex.length===0&&lB.length===0||ss.referenceEquals(e,lA)&&ex.length===lB.length&&_.every(ex,function(lC){return ss.contains(lB,lC)})){return true}return false};P.$j=function(e,ex){P.$n({item1:e,item2:ex})};P.$f=function(e,ex,lA,lB){for(var lC=0;lC<ex.length;lC++){var lD=ex[lC];var lE=ch.deserialize(lD.simpleCommandModel['simpleCommand'.toString()],true);if(ss.referenceEquals('do-nothing'.toString(),lE.commandParams['onClear'])&&lB.length===0||P.$h(e,lB)){continue}P.$j(e,lB);gY.invalidateAllVisualPresModels(lA)}};P.$2=function(e,ex,lA,lB,lC,lD){if(lA.length>0){P.$3(e.worksheet,lA,lC,lD,ex)}if(lB.length>0){P.$f(e,lB,lD,lC)}};P.$3=function(e,ex,lA,lB,lC){if(Y.get_instance().get_isOffline()){return}if(ss.isValue(ex)){var lD=P.$b(ex);if(lD.length>0){var lE=gY.getSheetInfoPresModel(Y.get_instance(),tsConfig.current_sheet_name);if(ss.isValue(lE)&&!(lE.isDashboard&&ss.isNullOrUndefined(lE.namesOfSubsheets))){var lF=!lE.isDashboard||lE.namesOfSubsheets.length===1;for(var lG=0;lG<lD.length;lG++){var lH=lD[lG];if(lF||!ss.referenceEquals(lH.get_worksheetName(),e)){gY.setVisualValidStateOnPresModel(lB,lH)}}}}if(lA.length>0){var lI=[];for(var lJ=0;lJ<ex.length;lJ++){var lK=ex[lJ];if((lA.length===1||!lK.singleSelectOnly)&&ss.isValue(lK.targetUrl)){var lL={};var lM=lK.targetUrl+'&:exclude='+encodeURIComponent(e);var lN=lC.get_vizDataModel();var lO=Y.get_instance().get_dataDictionary();lL.url=kN.constructUrlForFilterActionFromTargetURL(lO,lM,lK.linkSpec,lN,lA);lI.push(lL)}}if(lI.length>0){bT.get().delayLocalUrlActions(lI)}}}};P.$b=function(e){var ex={};if(ss.isValue(e)){for(var lA=0;lA<e.length;lA++){var lB=e[lA];for(var lC=0;lC<lB.targetWorksheets.length;lC++){var lD=lB.targetWorksheets[lC];var lE=gY.getVisualModel(Y.get_instance(),lD);if(ss.isValue(lE)){ex[lD]=lE}}}}return P.$0(ex)};P.$0=function(e){var ex=[];var lA=new ss.ObjectEnumerator(e);try{while(lA.moveNext()){var lB=lA.current();ex.push(lB.value)}}finally{lA.dispose()}return ex};P.$g=function(e){if(!P.$p){P.$p=true;var ex=tsConfig.schemeWhitelist.split(',');for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];var lC=lB.toLowerCase().trim();if(!ss.endsWithString(lC,':')){lC+=':'}if(lC.length>1){P.$r.push(lC)}}}var lD=new RegExp('(^[A-Za-z][A-Za-z0-9+\\-.]*:)');var lE=lD.exec(e);if(!ss.isValue(lE)){return true}var lF=lE[0].toLowerCase();return ss.contains(P.$r,lF)};P.$a=function(e,ex,lA){var lB=_.filter(e,function(lC){var lD=ss.contains(lC.sourceWorksheets,ex);var lE=!ss.isValue(lA)||ss.unbox(lA)===lC.activation;return lD&&lE});return lB};P.$9=function(e){var ex='_'+tsConfig.layoutid.toString().replace(new RegExp('[^\\w]','g'),'');if(e>0){ex+='_'+e.toString()}return{item1:ex,item2:false}};P.$e=function(e,ex){if(!tab.FeatureFlags.isEnabled('SpecificWebTargetsForActions')){return{item1:e,item2:true}}else if(e==='_blank'){return P.$9(ex)}else if($(P.$c(e)).length>0){return{item1:e,item2:true}}else{return P.$9(ex)}};P.$d=function(e,ex){if(ss.isValue(e.target)){return P.$e(e.target,ex)}else if(tab.FeatureFlags.isEnabled('SpecificWebTargetsForActions')&&ss.isValue(be.linkTarget)&&be.linkTarget.length>0){var lA=be.linkTarget;return{item1:lA,item2:true}}else{return P.$9(ex)}};P.launchActionUrls=function(e,lA){var lB=[];var lC={};if(ss.isNullOrUndefined(e)||e.length===0){return}if(!tab.FeatureFlags.isEnabled('SpecificWebTargetsForActions')&&ss.isValue(be.linkTarget)&&be.linkTarget.length>0){var lD=be.linkTarget;lB.push({item1:lD,item2:false});lC[lD]=e[e.length-1].url}else{var lE=0;for(var lF=0;lF<e.length;lF++){var lG=e[lF];if(!P.$g(lG.url)){if(!P.$o){P.$o=true;lA.ShowErrorDialog(tab.Strings.SecurityBlockedURLActionMessage,tab.Strings.SecurityBlockedURLActionHeader,null)}continue}if(ss.isNullOrUndefined(lG.target)||'t'in lG){lG.target=lG['t']}var lH=P.$d(lG,lE);if(!ss.keyExists(lC,lH.item1)){lB.push(lH)}lC[lH.item1]=lG.url;lE++}}for(var lI=0;lI<lB.length;lI++){var lJ=lB[lI];var lK=lJ.item1;if(lJ.item2){try{$(P.$c(lK)).prop('src',lC[lK])}catch(lL){}}else{try{window.open(lC[lK],lK)}catch(lL){var ex=ss.Exception.wrap(lL);tab.ErrorTrace.report(ex)}}}};P.$c=function(e){return'[name='+e+']'};global.tab.ActionUtils=P;var Q=function(){ss.makeGenericType(bd,[Object,R]).call(this)};Q.__typeName='tab.AddDataServerDataSourceCmd';global.tab.AddDataServerDataSourceCmd=Q;var R=function(e){this.$$c=null;this.$$c=e};R.__typeName='tab.AddDataServerDataSourceCmd$Response';global.tab.AddDataServerDataSourceCmd$Response=R;var S=function(){this.throttleTimeInMs=null;this.shouldUseKeyUp=false;this.propagation=2;this.areAllLocalesSupported=true;this.commandId=null;this.customHintText=null};S.__typeName='tab.AdditionalShortcutOptions';global.tab.AdditionalShortcutOptions=S;var T=function(){ss.makeGenericType(bd,[Object,U]).call(this)};T.__typeName='tab.AddObjectToDashboardCmd';global.tab.AddObjectToDashboardCmd=T;var U=function(e){this.$$c=null;this.$$c=e};U.__typeName='tab.AddObjectToDashboardCmd$Response';global.tab.AddObjectToDashboardCmd$Response=U;var V=function(e){this.$2$1=null;gV.call(this,e,new hF('analyticsPane'.toString()))};V.__typeName='tab.AnalyticsPaneModel';global.tab.AnalyticsPaneModel=V;var W=function(){};W.__typeName='tab.AnnotationClientCommands';W.createMarkAnnotation=function(e,ex,lA){var lB=new cw;lB.c['visualIdPresModel']=lA;lB.c['annotateEnum']='mark';lB.c['targetPoint']={x:e.x|0,y:e.y|0};lB.c['selectionList']=[{selectionType:'tuples',objectIds:ex}];lB.c['formattedText']='<formatted-text/>';lB.c['richTextEditorConfiguration']=iz.get_instance();lB.invoke()};W.createPointAnnotation=function(e,ex){var lA=new cw;lA.c['visualIdPresModel']=ex;lA.c['annotateEnum']='point';lA.c['targetPoint']={x:e.x|0,y:e.y|0};lA.c['selectionList']=[];lA.c['formattedText']='<formatted-text/>';lA.c['richTextEditorConfiguration']=iz.get_instance();lA.invoke()};W.createAreaAnnotation=function(e,ex){var lA=new cw;lA.c['visualIdPresModel']=ex;lA.c['annotateEnum']='area';lA.c['targetPoint']={x:e.x|0,y:e.y|0};lA.c['selectionList']=[];lA.c['formattedText']='<formatted-text/>';lA.c['richTextEditorConfiguration']=iz.get_instance();lA.invoke()};W.removeAnnotation=function(e,ex){var lA={};lA['worksheet']=ex.worksheet;lA['selection']={selectionType:'annotations',objectIds:e};var lB=cl.newCommand({ns:'tabdoc',cmd:'remove-annotation'},lA);bT.SendCommand(new bM('immediately',null,lB))};W.moveAnnotation=function(e,ex,lA){var lB={};switch(e.annotateEnum){case'area':{var lC=e.areaRect.w;var lD=e.areaRect.h;lB['visualIdPresModel']=ex;lB['uid']=e.annotationId;lB['regionRect']=tab.RectXYUtil.toPresModel({x:lA.x,y:lA.y,w:lC,h:lD});lB['pageNumber']=e.pageNumber;var lE=cl.newCommand({ns:'tabdoc',cmd:'move-area-annotation'},lB);bT.SendCommand(new bM('immediately',null,lE));break}case'mark':case'point':{lA.x+=ss.Int32.div(e.areaRect.w,2);lA.y+=ss.Int32.div(e.areaRect.h,2);lB['worksheet']=ex.worksheet;lB['uid']=e.annotationId;lB['pageNumber']=e.pageNumber;lB['pt1']=e.targetPoint;lB['endPoint']=tab.PointUtil.toPresModel(lA);var lF=cl.newCommand({ns:'tabdoc',cmd:'move-point-annotation'},lB);bT.SendCommand(new bM('immediately',null,lF));break}default:{break}}};W.resizeAnnotation=function(e,ex,lA){var lB={};lB['visualIdPresModel']=ex;lB['uid']=e.annotationId;lB['pageNumber']=e.pageNumber;switch(e.annotateEnum){case'area':{lB['regionRect']=tab.RectXYUtil.toPresModel(lA);var lC=cl.newCommand({ns:'tabdoc',cmd:'move-area-annotation'},lB);bT.SendCommand(new bM('immediately',null,lC));break}case'mark':case'point':{lB['w']=lA.w;lB['isRightDrag']=lA.x===e.areaRect.x;var lD=cl.newCommand({ns:'tabdoc',cmd:'resize-point-annotation'},lB);bT.SendCommand(new bM('immediately',null,lD));break}default:{break}}};W.movePointTargetAnnotation=function(e,ex,lA){var lB={};lB['uid']=e.annotationId;lB['visualIdPresModel']=ex;lB['pageNumber']=e.pageNumber;var lC=tab.RectXYUtil.getCenter(tab.RectXYUtil.fromPresModel(e.areaRect));lB['pt1']=tab.PointUtil.toPresModel(lC);lB['endPoint']=tab.PointUtil.toPresModel(lA);var lD=cl.newCommand({ns:'tabdoc',cmd:'move-point-annotation-target'},lB);bT.SendCommand(new bM('immediately',null,lD))};global.tab.AnnotationClientCommands=W;var X=function(){};X.__typeName='tab.ApiClientCommands';X.doApiCommand=function(e,ex,lA){bT.SendCommand(ib.create(e,'immediately',ex,lA))};global.tab.ApiClientCommands=X;var Y=function(){this.$8=null;this.$4=null;this.$6={};this.$5={};this.$7=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;gV.call(this,null,null);this.presModelKey=new hF('applicationPresModel'.toString());this.set_toolbar(new kk(this));this.set_workbook(new lh(this));this.set_colorPalettes(new bR(this));this.set_dataDictionary(new dr(this));this.$8=new jr;this.$4=new el;this.set_serverFonts(null)};Y.__typeName='tab.ApplicationModel';Y.get_instance=function(){if(ss.isNullOrUndefined(Y.$0.get_model())){Y.$0.set_model(new Y)}return Y.$0.get_model()};Y.get_holder=function(){return Y.$0};Y.resetInstance=function(){Y.$0.set_model(null)};global.tab.ApplicationModel=Y;var Z=function(){};Z.__typeName='tab.AuthenticationCommands';Z.performAuthentication=function(e,ex,lA){var lB=$.Deferred();var lC=Z.$4(e);lC.done(function(lD){gZ.load$1('rsa',[]).done(function(lE){var lF=Z.$3(lD);var lG=(ss.isNullOrEmptyString(ex)?'':rsa.encrypt(ex,{n:lD['modulus'],e:lD['exponent']}));lF['crypted']=lG;if(lA){if(lD['rememberPasswordsForever']){lF['reuse_forever']=true}else{lF['reuse']=true}}var lH=Z.$0(lD['actionPath'],lF);lH.done([function(){lB.resolve()}]).fail([function(lI){lB.reject(lI)}])})});return lB.promise()};Z.performAuthenticationWithConnectionName=function(e,ex){return Z.$5(e.widgetAttrPassword,dj.getDSParamsFromPresModelWithConnectionName(e,ex))};Z.performAuthenticationWithConnectionClass=function(e,ex){return Z.$5(e.widgetAttrPassword,dj.getDSParamsFromPresModelWithConnectionClass(e,ex))};Z.$5=function(e,ex){var lA=$.Deferred();ex.done(function(lB){var lC=Z.performAuthentication(Z.$1(lB.$$c['strings']),e,false);lC.done([function(){lA.resolve()}]).fail([function(lD){lA.reject(lD)}])}).fail(function(){lA.reject()});return lA.promise()};Z.$3=function(e){var ex={};ex['username']=e['defaultUsername'];ex['authentication']=e['authenticationMode'];ex['connection']=e['connection'];ex['path']=e['originalPath'];ex['oauthrequest']=false;return ex};Z.$0=function(e,ex){var lA=$.Deferred();var lB={type:'POST',url:e,headers:ss.mkdict(['X-Requested-With','XMLHttpRequest']),contentType:'application/x-www-form-urlencoded',data:ex,success:function(lC,lD,lE){lA.resolve()},error:function(lC,lD,lE){lA.reject(lE)}};ji.onVizportalPinged();lv.helper(lB);return lA.promise()};Z.$1=function(e){var ex={};for(var lA=0;lA<e.length-1;lA+=2){ex[e[lA]]=e[lA+1]}return ex};Z.$2=function(e){var ex={};ex['path']=tsConfig.requestURI;ex['vizqlSessionId']=tsConfig.sessionid;var lA={};lA['attributes']=e;ex['attributes']=JSON.stringify(lA);return ex};Z.$4=function(e){var ex=$.Deferred();var lA=Z.$2(e);lv.helper(kO.createRequest('getDataConnectionAuthInfo',lA,function(lB){ex.resolve(lB)},function(){ex.reject()}));return ex.promise()};global.tab.AuthenticationCommands=Z;var ba=function(){};ba.__typeName='tab.AutomatedInsightsCommands';ba.generateAutomatedInsightsVizIfNeeded=function(){if(!tsConfig.isAutomatedInsightsView||!tab.FeatureFlags.isEnabled('AutomatedInsightsPanel')){return}ba.$0(tsConfig.automatedInsightsCommands,0)};ba.$0=function(e,ex){if(ex>=e.length){return}var lA=JSON.parse(e[ex]);var lB=cl.newCommand({ns:'tabdoc',cmd:lA.command},lA.params);var lC=new bM('immediately',null,lB,function(lD){ba.$0(e,ex+1)},null);bT.SendCommand(lC)};global.tab.AutomatedInsightsCommands=ba;var bb=function(e,ex,lA,lB,lC,lD,lE,lF){this.topLeftSpacer=null;this.topRightSpacer=null;this.bottomLeftSpacer=null;this.view=null;this.topAxis=null;this.rightAxis=null;this.bottomAxis=null;this.leftAxis=null;this.topLeftSpacer=e;this.topRightSpacer=ex;this.bottomLeftSpacer=lA;this.view=lB;this.topAxis=lC;this.rightAxis=lD;this.bottomAxis=lE;this.leftAxis=lF};bb.__typeName='tab.AxisResizerDomElements';global.tab.AxisResizerDomElements=bb;var bc=function(){};bc.__typeName='tab.BackgroundJobProgressState';global.tab.BackgroundJobProgressState=bc;var bd=function(e,ex){var lA=function(){this.c={};this.$1$1=null;this.$1$2=null;this.$1$3=false;this.$1$4=false;this.$1$5=null;this.$1$6=null;this.$1$7=null;this.set_uiBlocking('none');this.set_suppressConnectionDialog(false)};ss.registerGenericClassInstance(lA,bd,[e,ex],{get_uiBlocking:function(){return this.$1$1},set_uiBlocking:function(lB){this.$1$1=lB},get_localWork:function(){return this.$1$2},set_localWork:function(lB){this.$1$2=lB},get_noExceptionDialog:function(){return this.$1$3},set_noExceptionDialog:function(lB){this.$1$3=lB},get_suppressConnectionDialog:function(){return this.$1$4},set_suppressConnectionDialog:function(lB){this.$1$4=lB},get_commandDispatcher:function(){return this.$1$5},set_commandDispatcher:function(lB){this.$1$5=lB},get_commandWaiter:function(){return this.$1$6},set_commandWaiter:function(lB){this.$1$6=lB},get_remoteCommand:function(){return this.$1$7},set_remoteCommand:function(lB){this.$1$7=lB},invoke:null,invoke$1:function(lB){lB.noExceptionDialog=this.get_noExceptionDialog();lB.preserveRootResult=true;this.set_remoteCommand(lB);var lC=this.get_commandDispatcher()||dz.get_instance();return lC.dispatch(e,ex).call(lC,this)}},function(){return null},function(){return[]});return lA};bd.__typeName='tab.BaseCmd$2';ss.initGenericClass(bd,a,2);global.tab.BaseCmd$2=bd;var be=function(e,ex){this.defaultSessionErrorHandler=null;this.$f=null;this.$g=null;this.$j=null;this.$i=null;this.$h=null;this.fileDownloadHelper=null;tab.Param.verifyValue(ex,'commonDialogProvider');this.$f=ex;this.$h=new fH(null);var lA=tabBootstrap.BaseUrlFormatter.formatBaseUrl();var lB=e;if(ss.isNullOrUndefined(lB)){lB=tabBootstrap.BaseUrlFormatter.formatUrlRoot(lA,null)}this.$j=lB;this.$i=ss.coalesce(tsConfig.site_root,lA);this.defaultSessionErrorHandler=new dA(ex,this.$j);var lC=[];if(tab.FeatureFlags.isEnabled('SkipConnectionsDuringLoad')){lC.push(new dD)}if(tab.FeatureFlags.isEnabled('PortableSessionsCheckpoint')){lC.push(new jj(this.$j))}lC.push(this.defaultSessionErrorHandler);this.$g=new ea(Array.prototype.slice.call(lC));this.fileDownloadHelper=new ew(ex,this)};be.__typeName='tab.BaseSession';be.add_stateChanged=function(e){be.$1$1=ss.delegateCombine(be.$1$1,e)};be.remove_stateChanged=function(e){be.$1$1=ss.delegateRemove(be.$1$1,e)};be.get_waitHandler=function(){if(ss.isNullOrUndefined(be.$4)){be.$4=new kU}return be.$4};be.$0=function(){return tab.Logger.lazyGetLogger(be)};be.fireStateChanged=function(e){if(ss.isValue(be.$1$1)){be.$1$1(e)}};be.getErrorMessageFromStringOrException=function(e){var ex='';var lA=ss.safeCast(e,String);var lB=ss.safeCast(e,ss.Exception);if(ss.isValue(lA)){ex=lA}else if(ss.isValue(lB)){ex=lB.get_message()}return ex};global.tab.BaseSession=be;var bf=function(e,ex,lA,lB){this.width=0;this.style=null;this.color=null;this.side=0;this.width=e;this.style=ex;this.color=lA;this.side=lB};bf.__typeName='tab.BorderDefinition';bf.borderStyleToCss=function(e){return ss.coalesce(bf.$1[e],'none')};bf.$0=function(){var e={};e['bs-none']='none';e['bs-hidden']='hidden';e['bs-dotted']='dotted';e['bs-dashed']='dashed';e['bs-solid']='solid';e['bs-double']='double';e['bs-groove']='groove';e['bs-ridge']='ridge';e['bs-inset']='inset';e['bs-outset']='outset';return e};global.tab.BorderDefinition=bf;var bg=function(){};bg.__typeName='tab.BorderDefinition$BorderSide';global.tab.BorderDefinition$BorderSide=bg;var bh=function(){this.$5={};this.$4={};this.$2={};this.$3={};this.$1=true};bh.__typeName='tab.BrushingComputer';bh.$3=function(){return tab.Logger.lazyGetLogger(bh)};bh.createBrushingComputer=function(e,ex,lA,lB,lC){var lD=new bh;var lE=ex.get_vizDataModel();var lF=C.$2(e,lB,lA,lE,lB);for(var lG=0;lG<lB.length;lG++){var lH=lB[lG];if(ex.vizDataContainsDuplicateCaption(lH)){lD.$1=false;return lD}}var lI;if(lC){lI=gY.getVisualModels(Y.get_instance())}else{lI={};var lJ=P.getApplicableActions(ex.get_worksheetName(),'on-select','highlight');for(var lK=0;lK<lJ.length;lK++){var lL=lJ[lK];if(ss.isNullOrUndefined(lL.targetWorksheets)){continue}for(var lM=0;lM<lL.targetWorksheets.length;lM++){var lN=lL.targetWorksheets[lM];var lO=gY.getVisualModel(Y.get_instance(),lN);lI[lN]=lO}}}var lP=gY.findContentDashboard();var lQ=_.keys(lI);for(var lR=0;lR<lQ.length;lR++){var lS=lQ[lR];var lT=lI[lS];if(ss.isNullOrUndefined(lT)){continue}var lU=lT.get_vizDataModel();lD.$5[lS]=C.$a(lF,lU);lD.$4[lS]=C.$9(lT.get_sceneModel(),lF,lU);var lV=[];var lW=new ss.ObjectEnumerator(bh.$2(lT));try{while(lW.moveNext()){var lX=lW.current();var lY=lX.value;var lZ=C.$c(lT,lY);var ma=_.intersection(lZ,lB);if(ma.length>0){var mb=C.$2(e,lB,lA,lE,ma);lV=lV.concat.apply(lV,C.$7(mb,lT,lY))}}}finally{lW.dispose()}lD.$3[lS]=lV;var mc=gY.getModelsForViz(bG).call(null,lP,lT);for(var md=0;md<mc.length;md++){var me=mc[md];if(!me.get_isHighlightEnabled()){continue}var mf=C.$6(lF,lU,me);if(!ss.keyExists(lD.$2,lT.get_worksheetName())){lD.$2[lT.get_worksheetName()]={}}lD.$2[lT.get_worksheetName()][bh.$0(me.get_legendTypeEnum(),me.get_legendNames())]=mf}}return lD};bh.getTuplesAssociatedWithSelectedNodes=function(e,ex){if(ss.isNullOrUndefined(e.get_vizDataModel())||ss.isNullOrUndefined(Y.get_instance().get_dataDictionary())){return[]}var lA=[];for(var lB=0;lB<ex.length;lB++){var lC=ex[lB];if(jb.isCategoricalAndTupleAssociatedHeader(lC)){lA.push(lC)}}if(lA.length===0){return[]}var lD=C.$1(e.get_vizDataModel(),lA);var lE=bh.$1(lD,e);return lE};bh.computeFromTuples=function(e,ex,lA){var lB=new bh;for(var lC=0;lC<lA.length;lC++){var lD=lA[lC];if(ss.isNullOrUndefined(lD.targetWorksheets)){continue}var lE=ch.deserialize(lD.simpleCommandModel['simpleCommand'.toString()],true);for(var lF=0;lF<lD.targetWorksheets.length;lF++){var lG=lD.targetWorksheets[lF];var lH=gY.getVisualModel(Y.get_instance(),lG);if(ss.isNullOrUndefined(lH)){continue}var lI=lH.get_vizDataModel();if(ss.isNullOrUndefined(lI)){continue}if(bh.isSpecialDateTimeHighlighting(lE)){var lJ=Y.get_instance().get_dataDictionary();var lK=C.$0(e.get_vizDataModel(),lI,lJ,ex);var lL=lK.item1;var lM=lK.item2;lB.$5[lG]=C.$b(lL,lM,lI,lJ);lB.$3[lG]=C.$8(lL,lM,lH,lJ);lB.$0(lH,e,ex,lE,lD.name)}else{var lN=bh.getHighlightFieldCaptions(lE,e.get_vizDataModel().get_highlightCaptions(),e.get_vizDataModel().get_fieldCaptions());if(!ss.referenceEquals(e,lH)){lN=_.intersection(lN,lI.get_fieldCaptions())}if(tab.MiscUtil.isNullOrEmpty$2(lN)){continue}for(var lO=0;lO<lN.length;lO++){var lP=lN[lO];if(e.vizDataContainsDuplicateCaption(lP)){lB.$1=false;return lB}}var lQ=C.$3(e.get_vizDataModel(),ex,lN);lB.$5[lG]=C.$a(lQ,lI);var lR=[];var lS=bh.$2(lH);var lT=_.keys(lS);for(var lU=0;lU<lT.length;lU++){var lV=lT[lU];var lW=lS[lV];var lX=C.$c(lH,lW);var lY=_.intersection(lX,lN);if(lY.length>0){var lZ=C.$3(e.get_vizDataModel(),ex,lY);lR=lR.concat.apply(lR,C.$7(lZ,lH,lW))}}lB.$3[lG]=lR;lB.$0(lH,e,ex,lE,lD.name)}}}return lB};bh.$2=function(e){var ex={};var lA=e.get_sceneModel().get_visualListModels();var lB=new ss.ObjectEnumerator(lA);try{while(lB.moveNext()){var lC=lB.current();ex[lC.key]=lC.value.get_groupItemNodes()}}finally{lB.dispose()}var lD=ex['x-labels']||[];ss.arrayAddRange(lD,ex['bottom-axis']||[]);ex['x-labels']=lD;delete ex['bottom-axis'];return ex};bh.isSpecialDateTimeHighlighting=function(e){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.commandParams)){return false}var ex=e.commandParams['specialFields'];return ss.isValue(ex)&&ex==='date-time'};bh.getHighlightFieldCaptions=function(e,ex,lA){var lB=[];if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.commandParams)){return lB}var lC=e.commandParams['fieldCaptions'];if(!ss.isNullOrUndefined(lC)){lB=JSON.parse(lC)}else{var lD=e.commandParams['specialFields'];if(ss.isNullOrUndefined(lD)||lD!=='all'){}lB=ex}if(ss.isValue(lA)){lB=_.intersection(lA,lB)}return lB};bh.$0=function(e,ex){return'LegendType:'+e.toString()+' LegendNames:'+ex.join(';')};bh.$1=function(e,ex){var lA=[];if(ss.isNullOrUndefined(ex.get_vizDataModel())){return lA}for(var lB=0;lB<e.length;lB++){var lC=e[lB];lA=_.union(lA,C.$a(lC,ex.get_vizDataModel()))}return lA};global.tab.BrushingComputer=bh;var bi=function(){ss.makeGenericType(bd,[Object,bj]).call(this)};bi.__typeName='tab.BuildCaptionContextMenuCmd';global.tab.BuildCaptionContextMenuCmd=bi;var bj=function(e){this.$$c=null;this.$$c=e};bj.__typeName='tab.BuildCaptionContextMenuCmd$Response';global.tab.BuildCaptionContextMenuCmd$Response=bj;var bk=function(){ss.makeGenericType(bd,[Object,bl]).call(this)};bk.__typeName='tab.BuildDataTabFieldContextMenuCmd';global.tab.BuildDataTabFieldContextMenuCmd=bk;var bl=function(e){this.$$c=null;this.$$c=e};bl.__typeName='tab.BuildDataTabFieldContextMenuCmd$Response';global.tab.BuildDataTabFieldContextMenuCmd$Response=bl;var bm=function(){ss.makeGenericType(bd,[Object,bn]).call(this)};bm.__typeName='tab.BuildLayoutTreeContextMenuCmd';global.tab.BuildLayoutTreeContextMenuCmd=bm;var bn=function(e){this.$$c=null;this.$$c=e};bn.__typeName='tab.BuildLayoutTreeContextMenuCmd$Response';global.tab.BuildLayoutTreeContextMenuCmd$Response=bn;var bo=function(){ss.makeGenericType(bd,[Object,bp]).call(this)};bo.__typeName='tab.BuildSchemaChangeDataTypeMenuCmd';global.tab.BuildSchemaChangeDataTypeMenuCmd=bo;var bp=function(e){this.$$c=null;this.$$c=e};bp.__typeName='tab.BuildSchemaChangeDataTypeMenuCmd$Response';global.tab.BuildSchemaChangeDataTypeMenuCmd$Response=bp;var bq=function(){ss.makeGenericType(bd,[Object,br]).call(this)};bq.__typeName='tab.BuildServerAxisContextMenuCmd';global.tab.BuildServerAxisContextMenuCmd=bq;var br=function(e){this.$$c=null;this.$$c=e};br.__typeName='tab.BuildServerAxisContextMenuCmd$Response';global.tab.BuildServerAxisContextMenuCmd$Response=br;var bs=function(){ss.makeGenericType(bd,[Object,bt]).call(this)};bs.__typeName='tab.BuildSheetListContextMenuCmd';global.tab.BuildSheetListContextMenuCmd=bs;var bt=function(e){this.$$c=null;this.$$c=e};bt.__typeName='tab.BuildSheetListContextMenuCmd$Response';global.tab.BuildSheetListContextMenuCmd$Response=bt;var bu=function(){ss.makeGenericType(bd,[Object,bv]).call(this)};bu.__typeName='tab.BuildTitleContextMenuCmd';global.tab.BuildTitleContextMenuCmd=bu;var bv=function(e){this.$$c=null;this.$$c=e};bv.__typeName='tab.BuildTitleContextMenuCmd$Response';global.tab.BuildTitleContextMenuCmd$Response=bv;var bw=function(e,ex){this.$2$1=null;gV.call(this,e,new hF(ex))};bw.__typeName='tab.ButtonZoneModel';global.tab.ButtonZoneModel=bw;var bx=function(){ss.makeGenericType(bd,[Object,by]).call(this)};bx.__typeName='tab.CalculationAutoCompleteCmd';global.tab.CalculationAutoCompleteCmd=bx;var by=function(e){this.$$c=null;this.$$c=e};by.__typeName='tab.CalculationAutoCompleteCmd$Response';global.tab.CalculationAutoCompleteCmd$Response=by;var bz=function(e){bB.call(this,e,new hF('calculation'.toString()))};bz.__typeName='tab.CalculationDialogModel';global.tab.CalculationDialogModel=bz;var bA=function(e){this.$2$1=null;gV.call(this,e,new hF('expressionFuncPm'.toString()));this.pm={}};bA.__typeName='tab.CalculationFunctionListModel';global.tab.CalculationFunctionListModel=bA;var bB=function(e,ex){this.$2$1=null;this.$2$2=null;gV.call(this,e,ex);this.pm={};this.set_calculationFunctionListModel(new bA(this))};bB.__typeName='tab.CalculationModel';global.tab.CalculationModel=bB;var bC=function(){};bC.__typeName='tab.CancelCommands';bC.cancelRunningCommand=function(e,ex,lA){bT.get().cancelRunningCommand(e,ex,lA)};global.tab.CancelCommands=bC;var bD=function(){};bD.__typeName='tab.CancellationStatus';global.tab.CancellationStatus=bD;var bE=function(){};bE.__typeName='tab.CancelTelemetry';bE.$0=function(e,ex,lA){if(hf.get_telemetryEnabled()&&tab.FeatureFlags.isEnabled('CommandCancellation')){var lB=lA-ex;hf.logEvent('Cancel_Command',['CommandName',ss.coalesce(e,'UNKNOWN'),'ElapsedTimeToCancelMS',lB,'CancelStatus','Failure'])}};bE.$1=function(e,ex,lA,lB,lC){if(hf.get_telemetryEnabled()&&tab.FeatureFlags.isEnabled('CommandCancellation')){var lD=lC-lB;var lE=lC-lA;hf.logEvent('Cancel_Command',['CommandName',ss.coalesce(e,'UNKNOWN'),'ElapsedTimeToProcessCancelResponseMS',lD,'ElapsedTimeToCancelMS',lE,'CancelStatus',bE.convertCancellationStatusForLog(ex)])}};bE.convertCancellationStatusForLog=function(e){switch(e){case 200:{return'Success'}case 204:{return'NothingToCancel'}default:{return''}}};global.tab.CancelTelemetry=bE;var bF=function(e){gV.call(this,e,new hF('categoricalFilter'.toString()))};bF.__typeName='tab.CategoricalFilterModel';global.tab.CategoricalFilterModel=bF;var bG=function(e,ex,lA){this.$2=null;this.$2$1=null;this.$2$2=null;gV.call(this,e,new hF(ex));this.$2=lA};bG.__typeName='tab.CategoricalLegendModel';bG.$0=function(e,ex){var lA;switch(e){case'color':case'map':{lA=ex.colorLegendItems;break}case'size':{lA=ex.sizeLegendItems;break}case'shape':{lA=ex.shapeLegendItems;break}default:{return null}}return lA};global.tab.CategoricalLegendModel=bG;var bH=function(e){this.$1=null;this.$3$1=null;hN.call(this,e,new hF('categoricalQuickFilter'.toString()));this.set_categoricalFilter(new bF(this))};bH.__typeName='tab.CategoricalQuickFilterModel';global.tab.CategoricalQuickFilterModel=bH;var bI=function(){ss.makeGenericType(bd,[Object,bJ]).call(this)};bI.__typeName='tab.ChangeWorkbookUIModeCmd';global.tab.ChangeWorkbookUIModeCmd=bI;var bJ=function(e){this.$$c=null;this.$$c=e};bJ.__typeName='tab.ChangeWorkbookUIModeCmd$Response';global.tab.ChangeWorkbookUIModeCmd$Response=bJ;var bK=function(){ss.makeGenericType(bd,[Object,bL]).call(this)};bK.__typeName='tab.CheckConnectionCmd';global.tab.CheckConnectionCmd=bK;var bL=function(e){this.$$c=null;this.$$c=e};bL.__typeName='tab.CheckConnectionCmd$Response';global.tab.CheckConnectionCmd$Response=bL;var bM=function(e,ex,lA,lB,lC){this.doLocalWork=null;this.$7=null;this.$6=null;this.$8=null;this.$5=null;this.$2='Unknown';this.hasLocalComponent=false;this.hasRemoteComponent=false;this.useGlobalConnectionErrorHandling=true;this.successCallback=null;this.failureCallback=null;this.$3=null;this.$1=null;this.$4=null;this.$7=e;this.hasLocalComponent=ss.isValue(ex);this.hasRemoteComponent=ss.isValue(lA)&&!Y.get_instance().get_isOffline();this.doLocalWork=ex;this.$6=[];this.$8=new Array;if(this.hasRemoteComponent){this.enqueueCommand(lA);this.$2=lA.commandName}this.successCallback=lB;this.failureCallback=lC;this.$3=[];this.$1=[]};bM.__typeName='tab.ClientCommand';global.tab.ClientCommand=bM;var bN=function(){};bN.__typeName='tab.ClipCase';global.tab.ClipCase=bN;var bO=function(){ss.makeGenericType(bd,[Object,bP]).call(this)};bO.__typeName='tab.CloseDataAlertDialogCmd';global.tab.CloseDataAlertDialogCmd=bO;var bP=function(e){this.$$c=null;this.$$c=e};bP.__typeName='tab.CloseDataAlertDialogCmd$Response';global.tab.CloseDataAlertDialogCmd$Response=bP;var bQ=function(e,ex,lA,lB){this.$7=0;this.$6=0;this.$4=0;this.$3=0;this.$8='';this.$5='';this.$7=e;this.$6=ex;this.$4=lA;this.$3=lB};bQ.__typeName='tab.ColorModel';bQ.fromArgbInt=function(e){var ex=(e&16711680)>>>16;var lA=(e&65280)>>>8;var lB=e&255;var lC=(e&4278190080)>>>24;return new bQ(ex,lA,lB,lC/255)};bQ.fromColorCode=function(e){var ex=bQ.$e.cl[e];if(ss.isValue(ex)){return ex}var lA=function(lJ){return Math.min(Math.max(lJ,0),255)};var lB;var lC;var lD;var lE=1;var lF=bQ.$9.exec(e);if(ss.isValue(lF)){lB=lA(parseInt(lF[1],16));lC=lA(parseInt(lF[2],16));lD=lA(parseInt(lF[3],16));var lG=new bQ(lB,lC,lD,lE);bQ.$e.add(e,lG);return lG}lF=bQ.$b.exec(e);if(ss.isValue(lF)){lB=lA(parseInt(lF[1],10));lC=lA(parseInt(lF[2],10));lD=lA(parseInt(lF[3],10));var lH=new bQ(lB,lC,lD,lE);lH.setRGBStr(e);bQ.$e.add(e,lH);return lH}lF=bQ.$c.exec(e);if(ss.isValue(lF)){lB=lA(parseInt(lF[1],10));lC=lA(parseInt(lF[2],10));lD=lA(parseInt(lF[3],10));lE=parseFloat(lF[4]);if(lE<=1){lE=lE*255}if(lE>255){lE=255}if(lE<0){lE=0}lE=bQ.alpha255ToFraction(lE);var lI=new bQ(lB,lC,lD,lE);bQ.$e.add(e,lI);return lI}throw new ss.Exception('Unknown color format: '+e)};bQ.alpha255ToFraction=function(e){return tab.DoubleUtil.truncateTwoDecimalPlaces(bQ.$7(e))};bQ.$7=function(e){return(e+1)/256};bQ.alphaFractionTo255=function(e){var ex=ss.Int32.trunc(tab.DoubleUtil.multiplyBy100(e));for(var lA=0;lA<256;lA++){var lB=ss.Int32.trunc(tab.DoubleUtil.multiplyBy100(bQ.alpha255ToFraction(lA)));if(lB===ex){return lA}}return 255};bQ.fromColorModelPlusAlpha=function(e,ex){return new bQ(e.get_r(),e.get_g(),e.get_b(),ex)};bQ.convertColorForCanvas=function(e){if(ss.isNullOrUndefined(e)||e.charCodeAt(3)===40){return e}bQ.$3();var ex=bQ.$d[e];if(ss.isValue(ex)){return ex}var lA=bQ.fromColorCode(e);ex=lA.toString();return ex};bQ.isEqual=function(e,ex,lA){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(ex)){return false}if(lA&&e.$3!==ex.$3){return false}return e.$7===ex.$7&&e.$6===ex.$6&&e.$4===ex.$4};bQ.alphaBlend=function(e,ex){if(e.get_a()<1){var lA=bQ.alphaToTransparency(e.get_a());var lB=ex.get_r()*lA+e.get_r()*e.get_a();var lC=ex.get_g()*lA+e.get_g()*e.get_a();var lD=ex.get_b()*lA+e.get_b()*e.get_a();return new bQ(ss.Int32.trunc(lB),ss.Int32.trunc(lC),ss.Int32.trunc(lD),1)}else{return e}};bQ.isFullyTransparent=function(e){return e.get_a()===0};bQ.alphaComposite=function(e,ex){if(ex.get_a()>=0.999989986419678){return bQ.alphaCompositeSolidDest(e,ex)}var lA=bQ.alphaToTransparency(e.get_a());var lB=e.get_a()+ex.get_a()*lA;return new bQ(bQ.$0(e.get_r(),e.get_a(),ex.get_r(),ex.get_a(),lB),bQ.$0(e.get_g(),e.get_a(),ex.get_g(),ex.get_a(),lB),bQ.$0(e.get_b(),e.get_a(),ex.get_b(),ex.get_a(),lB),lB)};bQ.alphaCompositeSolidDest=function(e,ex){return new bQ(bQ.$1(e.get_r(),e.get_a(),ex.get_r()),bQ.$1(e.get_g(),e.get_a(),ex.get_g()),bQ.$1(e.get_b(),e.get_a(),ex.get_b()),1)};bQ.$5=function(e,ex,lA){return 0.2126*bQ.$f[e]+0.7152*bQ.$f[ex]+0.0722*bQ.$f[lA]};bQ.$2=function(e){return Math.min(1,(255-e)/255*1.5)};bQ.$6=function(e,ex){var lA=e.toString(16);while(lA.length<ex){lA='0'+lA}return lA};bQ.$0=function(e,ex,lA,lB,lC){return Math.round((e*ex+lA*lB*bQ.alphaToTransparency(ex))/lC)};bQ.$1=function(e,ex,lA){return Math.round(e*ex+lA*bQ.alphaToTransparency(ex))};bQ.$4=function(e){if(e>0.00885639991611242){return Math.pow(e,0.333333313465118)}else{return 7.78703689575195*e+0.137931004166603}};bQ.$3=function(){if(ss.isValue(bQ.$d)){return}bQ.$d={};bQ.$d['rgba(0,0,0,255)']='rgba(0,0,0,1)';bQ.$d['rgba(0,0,0,0)']='rgba(0,0,0,0)';bQ.$d['rgba(255,255,255,255)']='rgba(255,255,255,1)';bQ.$d['rgba(255,255,255,0)']='rgba(255,255,255,0)'};bQ.transparencyToAlpha=function(e){return Math.min(Math.max(1-e,0),1)};bQ.alphaToTransparency=function(e){return bQ.transparencyToAlpha(e)};global.tab.ColorModel=bQ;var bR=function(e){gV.call(this,e,new hF('colorPalettes'.toString()))};bR.__typeName='tab.ColorPaletteCollectionModel';global.tab.ColorPaletteCollectionModel=bR;var bS=function(){};bS.__typeName='tab.CommandCancellationWhiteList';bS.$0=function(e){if(ss.referenceEquals(e,{ns:'tabsrv',cmd:'refresh-data-server'}.cmd)){return tab.FeatureFlags.isEnabled('AllowCancellationRefreshDataServer')}if(ss.referenceEquals(e,{ns:'tabdoc',cmd:'get-show-data-pres-model'}.cmd)){return tab.FeatureFlags.isEnabled('AllowCancellationGetShowDataPresModel')}if(ss.referenceEquals(e,{ns:'tabdoc',cmd:'categorical-filter'}.cmd)){return tab.FeatureFlags.isEnabled('AllowCancellationCategoricalFilter')}if(ss.referenceEquals(e,{ns:'tabdoc',cmd:'categorical-filter-by-index'}.cmd)){return tab.FeatureFlags.isEnabled('AllowCancellationCategoricalFilter')}if(ss.referenceEquals(e,{ns:'tabdoc',cmd:'connection-count-entity'}.cmd)){return tab.FeatureFlags.isEnabled('AllowCancellationSlowMetaData')}if(ss.referenceEquals(e,{ns:'tabdoc',cmd:'connection-fetch-entity'}.cmd)){return tab.FeatureFlags.isEnabled('AllowCancellationSlowMetaData')}return true};bS.canCancel=function(e){return ss.keyExists(bS.$1,e)&&bS.$0(e)};global.tab.CommandCancellationWhiteList=bS;var bT=function(e,ex,lA){this.$R=null;this.$S=null;this.$X=[];this.$17=new t;this.$15=new ko;this.$V={};this.$Z=[];this.$U=null;this.$16=null;this.$18=null;this.$14=false;this.$13=null;this.$Y=null;this.$Q=null;this.$12=[];this.$T=null;this.$P=false;this.$W=[];this.$O=false;this.$10=false;this.$11={};this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.$1$6=null;this.$1$7=null;this.$1$8=null;this.$1$10=null;this.$1$11=null;this.$1$12=null;this.$1$13=null;this.$1$14=null;this.$1$15=null;this.defaultCommandCanceler=null;this.e2eAutomationTestHooks=null;this.legacySession=null;this.processingRenderModeChange=false;this.processingStoryPointChange=false;this.legacySession=e;this.$S=ex;this.defaultCommandCanceler=lA;window.window.onerror=ss.mkdel(this,this.$r);this.$18=new ls(this.$S);this.$16=new J(this.legacySession);var lB=new o(e);lB.$5('tabsrv',{ns:'tabsrv',cmd:'render-tooltip-server'}.cmd,135);var lC=new ck;lC.commandNamespace={ns:'tabdoc',cmd:'highlight-items'}.ns;lC.commandName={ns:'tabdoc',cmd:'highlight-items'}.cmd;var lD=new ck;lD.commandNamespace={ns:'tabdoc',cmd:'clear-highlighting'}.ns;lD.commandName={ns:'tabdoc',cmd:'clear-highlighting'}.cmd;var lE=new ck;lE.commandNamespace={ns:'tabdoc',cmd:'highlight-items-by-pattern-match'}.ns;lE.commandName={ns:'tabdoc',cmd:'highlight-items-by-pattern-match'}.cmd;var lF=[lC,lD,lE];lB.$4(lF,135);this.$R=lB;this.$R.add_onRemoteCommandResponse(ss.mkdel(this,this.$j));this.$R.add_onRemoteCommandException(ss.mkdel(this,this.$i));this.$T=new dC(ex);this.$m();this.e2eAutomationTestHooks=new K(this.$18,ss.mkdel(this,function(){return ss.getKeyCount(this.$V)}),ss.mkdel(this,this.$n));this.$O=false};bT.__typeName='tab.CommandController';bT.add_switchedViz=function(e){bT.$1$9=ss.delegateCombine(bT.$1$9,e)};bT.remove_switchedViz=function(e){bT.$1$9=ss.delegateRemove(bT.$1$9,e)};bT.add_sheetNameChanged=function(e){bT.$1$16=ss.delegateCombine(bT.$1$16,e)};bT.remove_sheetNameChanged=function(e){bT.$1$16=ss.delegateRemove(bT.$1$16,e)};bT.get_hasInstance=function(){return ss.isValue(bT._instance)};bT.$7=function(){return tab.Logger.lazyGetLogger(bT)};bT.isAllContentReady=function(){return(ss.isNullOrUndefined(bT._instance)?false:bT._instance.$O)};bT.create=function(e,ex,lA){if(ss.isNullOrUndefined(bT._instance)){bT._instance=new bT(e,ex,lA)}return bT._instance};bT.clearInstance=function(){bT._instance=null;window.window.onerror=null};bT.get=function(){if(!ss.isValue(bT._instance)){throw new ss.Exception('Attempted to use CommandController before creating it.')}return bT._instance};bT.handleBootstrapException=function(e,ex){tab.ErrorTrace.report(e);if(bT.$9){return}var lA=new ss.StringBuilder;if(ss.isValue(e['name'])){lA.append(e['name']).append(': ')}lA.append(e.get_message());ex.ShowErrorDialog(tab.Strings.UnhandledExceptionMessage(tsConfig.sessionid,lA.toString()),tab.Strings.UnhandledExceptionTitle,null);bT.$6(JSON.stringify(ep.packageStackTraceData(tab.ErrorTrace.getStackTraceFor(e))));bT.sendParentCompletedMessage();bT.$9=true};bT.sendParentCompletedMessage=function(){if(bT.$a){return}bT.$a=true;var e=tabBootstrap.Utility.sendCommandWithContext('tableau.completed');if(!e){}};bT.$6=function(e){var ex=[];ex.push('tableau.unhandledException');ex.push(e);tabBootstrap.Utility.doPostMessage(ex)};bT.$4=function(e){return e.get_isBlocking()};bT.SendCommand=function(e){var ex=bT.get();if(ex.$10&&tab.FeatureFlags.isEnabled('CommandCancellation')){return}if(hH.get_progressiveLoadEnabled()){ex.$0(e)}ex.$17.$1(e);ex.$o()};bT.SendCommandWithDeferredReturn=function(e,ex){var lA=$.Deferred();bT.SendCommand(ib.create(e,ex,function(lB){lA.resolve(lB)},function(lB){lA.reject()}));return lA.promise()};bT.$1=function(e,ex){return tabBootstrap.BaseUrlFormatter.formatSessionMethod(e,ex.get_id(),ex.get_urlRoot())};bT.$0=function(e,ex,lA){var lB=[];if(!tab.MiscUtil.isNullOrEmpty$3(tsConfig.clientOpenBugUrl)){var lC=tsConfig.clientCheckBugText;var lD=tsConfig.clientCheckBugUrl;var lE=tsConfig.clientOpenBugText;var lF=tsConfig.clientOpenBugUrl;var lG=encodeURIComponent('{errorMessage}');var lH=encodeURIComponent('{sessionId}');var lI=encodeURIComponent('{stack}');var lJ=encodeURIComponent('{url}');if(!ss.isNullOrEmptyString(lC)&&!ss.isNullOrEmptyString(lD)){var lK=ss.replaceAllString(ss.replaceAllString(ss.replaceAllString(ex,'"',''),"'",''),':','');lD=ss.replaceAllString(lD,lG,encodeURIComponent(lK));lB.push({url:lD,displayText:lC})}if(!ss.isNullOrEmptyString(lE)&&!ss.isNullOrEmptyString(lF)){var lL='search splunk for stack.';try{lL=lA.stack;lL=lL.substr(0,400)}catch(lN){}lF=ss.replaceAllString(lF,lG,encodeURIComponent(ss.replaceAllString(ex,':','')));lF=ss.replaceAllString(lF,lH,encodeURIComponent(e));lF=ss.replaceAllString(lF,lI,encodeURIComponent(lL));var lM=((ss.isValue(window.parent)&&ss.isValue(window.parent.location))?window.parent.location:window.location);lF=ss.replaceAllString(lF,lJ,encodeURIComponent(lM.href));lF=ss.replaceAllString(ss.replaceAllString(lF,'"',''),"'",'');lB.push({url:lF,displayText:lE})}}return lB};bT.$5=function(){var e={};e['t']=tabBootstrap.MetricsController.getTiming();e['d']='CLNTLD'.toString();var ex=new tabBootstrap.MetricsEvent('gen',2,e);tabBootstrap.MetricsController.logEvent(ex)};bT.$3=function(e){var ex=0;if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.workbookPresModel)||ss.isNullOrUndefined(e.workbookPresModel.dashboardPresModel)){return null}if(!e.workbookPresModel.dashboardPresModel.isStory){return ex}var lA=e.workbookPresModel.dashboardPresModel.zones;var lB=_.keys(lA);for(var lC=0;lC<lB.length;lC++){var lD=lB[lC];var lE=lA[lD];if(ss.isNullOrUndefined(lE)){continue}var lF=ly.getContent(lE,'flipboard');if(ss.isValue(lF)){return lF.activeStoryPointId}}return null};bT.$2=function(e){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.workbookPresModel)||ss.isNullOrUndefined(e.workbookPresModel.dashboardPresModel)||ss.isNullOrUndefined(e.workbookPresModel.dashboardPresModel.sheetPath)){return''}return e.workbookPresModel.dashboardPresModel.sheetPath.sheetName};global.tab.CommandController=bT;var bU=function(){};bU.__typeName='tab.CommandControllerStoryTelemetry';bU.bootstrapCompleteStoryTelemetry=function(){if(hf.get_telemetryEnabled()&&tab.FeatureFlags.isEnabled('StorytellingOnlineTelemetry')&&!tsConfig.is_authoring){var e=gY.getSheetInfoPresModel(Y.get_instance(),tsConfig.current_sheet_name);if(ss.isValue(e)&&e.isStory){_.defer(function(){bU.$3()})}}};bU.$3=function(){var e={$:null};var ex={$:null};var lA={$:null};var lB={$:null};var lC={$:null};var lD={$:null};var lE={$:null};if(!bU.$9(lA)){bU.$2('Storyboard is not set when we expected it to be.');return}if(!bU.$a(lA.$,e)){bU.$2("'name' is not set in the ZoneCommonPresModel when we expected it to be.");return}if(!bU.$5(lA.$,ex)){bU.$2('FlipboardNavModel is not set when we expected it to be.');return}if(!bU.$6(ex.$,lB)){bU.$2('SelectedStoryPointStyle was not set when we expected it to be.');return}if(!bU.$4(lA.$,lC)){bU.$2('DashboardSize was not set when we expected it to be.');return}if(!bU.$8(ex.$,lD)){bU.$2('StoryPoints is not set when we expected it to be.');return}if(!bU.$7(lE)){bU.$2('SheetsInfo is not set when we expected it to be.');return}var lF=bU.$0(lD.$,ex.$.get_navType());var lG=bU.$1(lE.$);hf.logEvent('StoryViewing.StoryState',['AtBootstrap',true,'DefaultTitle',(ss.referenceEquals(e.$,tsConfig.current_sheet_name.toString())?true:false),'StoryPoints',lD.$.length,'UniqueSheets',lG.$2(),'UniqueDashboards',lG.$0(),'AvgCaptionLengthByChar',lF.$0(),'AvgCaptionLengthByWord',lF.$2(),'LongestCaptionByChar',lF.$4(),'LongestCaptionByWord',lF.$6(),'TitleLengthByChar',e.$.length,'TitleLengthByWord',(!tab.MiscUtil.isNullOrEmpty$3(e.$)?e.$.match(bU.$b).length:0),'TitleVisible',lA.$.get_isTitleVisible(),'NavArrows',ex.$.get_arrowVisibility(),'NavStyle',ex.$.get_navType().toString(),'DashboardHeight',lC.$.h,'DashboardWidth',lC.$.w,'StoryPointHeight',lB.$.h,'StoryPointWidth',lB.$.w,'StoryPointBackgroundColor',lB.$.styledBox.fillColor.toString(),'StoryPointBorderColor',lB.$.styledBox.borderColor.toString()])};bU.$2=function(e){hf.logEvent('Error.StoryState',['Message',e])};bU.$0=function(e,ex){var lA=0,lB=0,lC=0,lD=0;if(ex!=='caption'||e.length<1){return new y}for(var lE=0;lE<e.length;lE++){var lF=e[lE];if(ss.isValue(lF.storyPointCaption)&&!tab.MiscUtil.isNullOrEmpty$3(lF.storyPointCaption.toString())){var lG=lF.storyPointCaption.toString();var lH=lG.match(bU.$b);if(lG.length>lC){lC=lG.length}if(lH.length>lD){lD=lH.length}lA+=lG.length;lB+=lH.length}}return new y.$0(lA/e.length,lB/e.length,lC,lD)};bU.$1=function(e){var ex=new Set;var lA=new Set;for(var lB=0;lB<e.length;lB++){var lC=e[lB];if(lC.isStory){continue}if(lC.isDashboard){lA.add(lC.sheet)}else{ex.add(lC.sheet)}}return new A(ex.size,lA.size)};bU.$9=function(e){e.$=((ss.isValue(Y.get_instance().get_workbook())&&ss.isValue(Y.get_instance().get_workbook().get_storyboard()))?Y.get_instance().get_workbook().get_storyboard():null);return ss.isValue(e.$)};bU.$a=function(e,ex){if(e.get_isTitleVisible()===false){ex.$='';return true}if(ss.isNullOrUndefined(e.get_zoneModels())){ex.$=null;return false}var lA=_.find(e.get_zoneModels(),function(lB){return lB.get_zoneType()==='title'});ex.$=((ss.isValue(lA)&&ss.isValue(lA.get_zoneCommonModel())&&ss.isValue(lA.get_zoneCommonModel().get_zoneCommonPresModel())&&ss.isValue(lA.get_zoneCommonModel().get_zoneCommonPresModel().name))?lA.get_zoneCommonModel().get_zoneCommonPresModel().name.toString():null);return ss.isValue(ex.$)};bU.$5=function(e,ex){ex.$=(ss.isValue(e.get_flipboardNavModel())?e.get_flipboardNavModel():null);return ss.isValue(ex.$)};bU.$4=function(e,ex){ex.$=(ss.isValue(e.get_dashboardSize())?e.get_dashboardSize():null);return ss.isValue(ex.$)};bU.$6=function(e,ex){ex.$=((ss.isValue(e.get_flipboardNavPresModel())&&ss.isValue(e.get_flipboardNavPresModel().selectedStoryPointStyle))?e.get_flipboardNavPresModel().selectedStoryPointStyle:null);return ss.isValue(ex.$)};bU.$8=function(e,ex){ex.$=(ss.isValue(e.get_storyPoints())?e.get_storyPoints():null);return ss.isValue(ex.$)};bU.$7=function(e){e.$=((ss.isValue(Y.get_instance().get_workbook())&&ss.isValue(Y.get_instance().get_workbook().get_sheetsInfo()))?Y.get_instance().get_workbook().get_sheetsInfo():null);return ss.isValue(e.$)};global.tab.CommandControllerStoryTelemetry=bU;var bV=function(){};bV.__typeName='tab.CommandControllerTelemetry';bV.$0=function(){if(hf.get_telemetryEnabled()&&tab.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry')){_.defer(function(){var e=null;hy.getInfo().done(function(ex){e=ex}).always(function(){_.defer(function(){var ex,lA,lB,lC,lD,lE,lF,lG,lH;ex=lA=lB=lC=lD=lE=lF=lG=lH=false;if(ss.isValue(e)){if(ss.isValue(e.get_name())){lA=ss.startsWithString(e.get_name(),'Chrome');lB=ss.startsWithString(e.get_name(),'Microsoft Edge');lC=ss.startsWithString(e.get_name(),'IE');lD=ss.startsWithString(e.get_name(),'Firefox');lF=ss.startsWithString(e.get_name(),'Opera');lG=ss.startsWithString(e.get_name(),'Safari')}if(ss.isValue(e.get_OS().get_family())){ex=ss.startsWithString(e.get_OS().get_family(),'Android');lE=ss.startsWithString(e.get_OS().get_family(),'OS X')||ss.startsWithString(e.get_OS().get_family(),'Mac');lH=ss.startsWithString(e.get_OS().get_family(),'Windows')&&!ss.startsWithString(e.get_OS().get_family(),'Windows Phone')}}var lI=window.screen;var lJ=gY.getSheetInfoPresModel(Y.get_instance(),tsConfig.current_sheet_name);var lK=['Authoring',tsConfig.is_authoring,'Embedded',tsConfig.embedded,'HighDpi',tsConfig.highDpi,'Mobile',tsConfig.is_mobile,'MobileApp',tsConfig.is_mobile_app,'MobileDevice',tsConfig.is_mobile_device,'Version',tsConfig.version,'LocalRender',Y.get_instance().get_isLocalRenderMode(),'Android',ex,'Chrome',lA,'ChromeVersion',BrowserSupport.BrowserSupport.GoogleChromeVersion(),'DevicePixelRatio',BrowserSupport.BrowserSupport.DevicePixelRatio(),'Edge',lB,'Firefox',lD,'Geolocation',BrowserSupport.BrowserSupport.IsGeolocationSupported(),'IE',lC,'IEVersion',BrowserSupport.BrowserSupport.BrowserVersion(),'IOS',BrowserSupport.BrowserSupport.IsIos(),'IOSVersion',BrowserSupport.BrowserSupport.IosVersion(),'Ipad',BrowserSupport.BrowserSupport.IsIpad(),'Mac',lE,'Opera',lF,'Safari',lG,'SafariVersion',BrowserSupport.BrowserSupport.SafariVersion(),'Touch',BrowserSupport.BrowserSupport.IsTouch(),'Windows',lH,'EmbedMode',tabBootstrap.Utility.get_embedMode(),'ScreenWidth',lI.width,'ScreenHeight',lI.height,'ViewportWidth',window.innerWidth,'ViewportHeight',window.innerHeight,'Dashboard',(ss.isValue(lJ)?lJ.isDashboard:false),'Published',(ss.isValue(lJ)?lJ.isPublished:false),'Story',(ss.isValue(lJ)?(ss.isValue(lJ.isStory)&&lJ.isStory):false),'Worksheets',((ss.isValue(lJ)&&ss.isValue(lJ.namesOfSubsheets))?lJ.namesOfSubsheets.length:0),'Tabs',(_.isArray(tsConfig.visible_sheets)?tsConfig.visible_sheets.length:0)];hf.logEvent('Bootstrap',lK);if(ss.isValue(e)){var lL=['Description',ss.coalesce(e.get_description(),''),'Layout',ss.coalesce(e.get_layout(),''),'Manufacturer',ss.coalesce(e.get_manufacturer(),''),'Name',ss.coalesce(e.get_name(),''),'Prerelease',ss.coalesce(e.get_prerelease(),''),'Product',ss.coalesce(e.get_product(),''),'UserAgent',e.get_userAgent(),'Version',ss.coalesce(e.get_version(),''),'System',ss.coalesce(e.get_OS().get_description(),''),'SystemArchitecture',ss.coalesce(e.get_OS().get_architecture(),''),'SystemFamily',ss.coalesce(e.get_OS().get_family(),''),'SystemVersion',ss.coalesce(e.get_OS().get_version(),'')];hf.logEvent('Platform',lL)}})})})}};global.tab.CommandControllerTelemetry=bV;var bW=function(e,ex){this.succeeded=false;this.error=null;this.succeeded=e;this.error=ex};bW.__typeName='tab.CommandExecutionResult';global.tab.CommandExecutionResult=bW;var bX=function(){};bX.__typeName='tab.CommandInterceptorResult';global.tab.CommandInterceptorResult=bX;var bY=function(){ks.call(this)};bY.__typeName='tab.CommandItemBasedUbertipButtonModel';global.tab.CommandItemBasedUbertipButtonModel=bY;var bZ=function(e){this.$0=null;if(ss.isValue(e)){this.$0=e}else{this.$0={};this.set_commandsType('item')}gm.tryUpdateKeyboardShortcut(this.get_commandName(),this,false)};bZ.__typeName='tab.CommandItemWrapper';bZ.create=function(e){if(!ss.isValue(e)){return null}var ex=e['command'.toString()];var lA=ch.deserialize(ex);if(ss.isValue(lA)){var lB={ns:lA.commandNamespace,cmd:lA.commandName};if(kY.get_instance().hasCommand(lB)){return new kW.$ctor1(e)}}return new bZ(e)};global.tab.CommandItemWrapper=bZ;var ca=function(){fA.call(this)};ca.__typeName='tab.CommandKeyboardShortcut';global.tab.CommandKeyboardShortcut=ca;var cb=function(){this.localWorkFactory=null;this.blocking=null};cb.__typeName='tab.CommandLocalOptions';global.tab.CommandLocalOptions=cb;var cc=function(){this.command=null;this.description=null;this.imageRes=null;this.status='enabled';this.$1$1=0;this.$1$2=null};cc.__typeName='tab.CommandModel';global.tab.CommandModel=cc;var cd=function(){ks.call(this)};cd.__typeName='tab.CommandModelBasedUbertipButtonModel';global.tab.CommandModelBasedUbertipButtonModel=cd;var ce=function(e){this.$0=null;this.$0={};var ex=ss.getEnumerator(e);try{while(ex.moveNext()){var lA=ex.current();this.$0[lA]='granted'}}finally{ex.dispose()}};ce.__typeName='tab.CommandPermission';global.tab.CommandPermission=ce;var cf=function(){};cf.__typeName='tab.CommandRedirectRegistry';cf.checkpointRegistry=function(){var e=cf.$0;cf.$0=$.extend(false,{},e);return function(){cf.$0=e}};cf.registerHandler=function(e,ex){tab.Param.verifyValue(e,'commandRedirectType');tab.Param.verifyValue(ex,'handler');if(ss.isNullOrUndefined(cf.$0)){cf.$0={}}cf.$0[e]=ex};cf.handleRedirect=function(e,ex){if(ss.isNullOrUndefined(cf.$0)||!ss.keyExists(cf.$0,e)){throw new ss.Exception('No command redirect registerd for type: '+e)}var lA=cf.$0[e];return lA(ex)};global.tab.CommandRedirectRegistry=cf;var cg=function(){this.$2$1=null;this.$2$2=null;this.$2$3=false;this.$2$4=false;ss.EventArgs.call(this)};cg.__typeName='tab.CommandResponseEventArgs';global.tab.CommandResponseEventArgs=cg;var ch=function(){};ch.__typeName='tab.CommandSerializer';ch.$4=function(){return tab.Logger.lazyGetLogger(ch)};ch.buildDocCommandName=function(e){return ch.buildQualifiedCommandName('tabdoc',e.cmd)};ch.buildQualifiedCommandName=function(e,ex){return e+':'+ex};ch.deserialize=function(e,ex){var lA;ex=ex||false;if(ex){lA=ch.$6[e];if(ss.isValue(lA)){return lA}}var lB=new RegExp('^(\\w+):([\\w-]+)( ((.|\n|\r|\r\n)*))?$');var lC=lB.exec(e);if(ss.isNullOrUndefined(lC)||lC.length===0){return null}lA={commandNamespace:lC[1],commandName:lC[2]};ch.$1(lA,lC[4]);if(ex){ch.$0(e,lA)}return lA};ch.getCommandType=function(e){if(ss.keyExists(ch.$8,e.commandName)){return ch.$8[e.commandName]}else{return null}};ch.$0=function(e,ex){if(ch.$7.length>=15){var lA=ch.$7.shift();delete ch.$6[lA]}ch.$6[e]=ex;ch.$7.push(e)};ch.$1=function(e,ex){if(ss.isNullOrEmptyString(ex)){return}var lA=new ss.StringBuilder;var lB=new Array;for(var lC=ex.length-1;lC>=0;lC--){lB.push(ex.substr(lC,1))}while(lB.length>0){var lD=ch.$2(lB,lA);if(!ss.isValue(lD)){return}var lE=ch.$3(lB,lA);if(ss.isNullOrUndefined(lE)){return}if(lE==='{}'){continue}if(ss.isNullOrUndefined(e.commandParams)){e.commandParams={}}e.commandParams[ss.unbox(lD)]=lE}};ch.$2=function(e,ex){ex.clear();var lA=false;while(e.length>0){var lB=e.pop();switch(lB){case'=':{return ex.toString().trim()}case'-':{lA=true;break}default:{if(lA){ex.append(lB.toUpperCase());lA=false}else{ex.append(lB)}break}}}return null};ch.$3=function(e,ex){ex.clear();var lA=new Array;var lB=function(){return((lA.length>0)?ss.arrayPeekBack(lA):'')};var lC=e.length>1&&ss.arrayPeekBack(e)==='"';while(e.length>0){var lD=e.pop();var lE=true;switch(lD){case'\\':{if(lC){if(lB()!=='\\'){lA.push('\\');lE=false}else{lA.pop()}}break}case'"':{if(lB()==='\\'){lA.pop()}else if(lB()==='"'){lA.pop();if(lA.length===0){lE=false}}else{if(lA.length===0){lE=false}lA.push('"')}break}case'[':{if(lB()==='"'){}else{lA.push('[')}break}case']':{if(lB()==='"'){}else if(lB()!=='['){}else{lA.pop()}break}case'{':{if(lB()==='"'){}else{lA.push('{')}break}case'}':{if(lB()==='"'){}else if(lB()!=='{'){}else{lA.pop()}break}default:{if(lB()==='\\'){lA.pop()}break}}if(lE){ex.append(lD)}if(lA.length===0){return ex.toString()}}return null};global.tab.CommandSerializer=ch;var ci=function(e){this.$1=true;this.$2$1=null;gV.call(this,e,new hF('commands'.toString()))};ci.__typeName='tab.CommandsModel';global.tab.CommandsModel=ci;var cj=function(){cj.$ctor1.call(this,{})};cj.__typeName='tab.CommandsPresModelWrapper';cj.$ctor1=function(e){this.$0=null;this.$0=e;if(ss.isNullOrUndefined(this.get_commandItems())){this.set_commandItems([])}};cj.create=function(e){return(ss.isNullOrUndefined(e)?null:new cj.$ctor1(e))};global.tab.CommandsPresModelWrapper=cj;var ck=function(){this.commandNamespace='';this.commandName=''};ck.__typeName='tab.CommandThrottlerTarget';global.tab.CommandThrottlerTarget=ck;var cl=function(){};cl.__typeName='tab.CommandUtils';cl.newCommand=function(e,ex){var lA={commandName:e.cmd,commandNamespace:e.ns};if(ss.isValue(ex)){lA.commandParams=ex}return lA};cl.serialize=function(e){return e.ns+':'+e.cmd};cl.addVisualIdToCommand=function(e,ex){if(tab.MiscUtil.isNullOrEmpty$3(ex.storyboard)){e['worksheet']=ex.worksheet;if(ss.isValue(ex.dashboard)&&ex.dashboard.toString().length>0){e['dashboard']=ex.dashboard}}else{e['visualIdPresModel']=JSON.stringify(ex)}};cl.addStoryPointToCommand=function(e,ex){if(ss.isValue(ex.storyboard)){e['storyboard']=ex.storyboard;e['flipboardZoneId']=ex.flipboardZoneId.toString();e['storyPointId']=ex.storyPointId.toString()}};cl.duplicateCommand=function(e){var ex={};$.extend(true,ex,e);return ex};cl.createCommandRedirectSuccessHandler=function(e){e=e||$.Deferred();return function(ex){if(_.isObject(ex)&&'commandRedirectType'.toString()in ex){var lA=ex['commandRedirectType'.toString()];var lB=cf.handleRedirect(lA,ex);lB.pipe(function(){e.resolve(ex);return ex},function(){e.reject();return ex})}else{e.resolve(ex)}}};cl.executeSimpleCommand$1=function(e){return function(ex,lA){var lB=$.Deferred();var lC=$.Deferred().done([function(lD){lB.resolve(lD)}]).fail([function(lD){lB.reject.apply(lB,null)}]);jd.executeServerCommand(ch.deserialize(jH.create(ex).get_simpleCommand()),lA,cl.createCommandRedirectSuccessHandler(lC),function(lD){lB.reject.apply(lB,null)});return lB}};cl.executeSimpleCommand=function(e,ex){return cl.executeSimpleCommand$1(Object).call(null,e,ex)};global.tab.CommandUtils=cl;var cm=function(e,ex){this.$3=null;this.$2=null;this.$3=e;this.$2=ex};cm.__typeName='tab.CommentingServer';global.tab.CommentingServer=cm;var cn=function(e){this.$1=null;this.$2=null;this.$2$1=null;gV.call(this,e,new hF('compoundTableCalculationPresModel'.toString()));this.$1=new ka(this);this.$2=new ka(this);this.$2.get_tableCalcIdentifier().update({calcNestingLevel:'secondary',fn:''})};cn.__typeName='tab.CompoundTableCalcModel';cn.$0=function(e,ex){if(ss.isValue(e)&&ss.isValue(e.tableCalculationPresModels)&&e.tableCalculationPresModels.length>ex){return e.tableCalculationPresModels[ex]}return null};global.tab.CompoundTableCalcModel=cn;var co=function(){};co.__typeName='tab.ConnectionClass';co.get_supportedTableauServerClasses=function(){var e=$.Deferred();co.$0().done([function(){e.resolve(co.$2)}]);return e.promise()};co.get_getSupportedFileClasses=function(){return co.fileConnectionClasses};co.$0=function(){if(ss.isValue(co.$3)){return co.$3}var e=$.Deferred();co.$3=e;dj.get_serverConnectionTypes().done(function(ex){var lA=ex.item1;co.$2=[];for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];co.$2.push(lC.valueClassAttr.toString())}_.each(ex.item2,function(lD){co.$1[lD.valueClassAttr]=lD});e.resolve()});return co.$3};co.getConnectionType=function(e){var ex=$.Deferred();co.$0().done([function(){ex.resolve(co.$1[e])}]).fail([function(lA){ex.reject(lA)}]);return ex.promise()};co.getConnectionTypeCategory=function(e){var ex=$.Deferred();co.getConnectionType(e).done(function(lA){ex.resolve((ss.isNullOrUndefined(lA)?'invalid':lA.connectionTypeCategory))}).fail(function(lA){ex.reject(lA)});return ex.promise()};global.tab.ConnectionClass=co;var cp=function(e){eK.$ctor1.call(this,e,[])};cp.__typeName='tab.ConstructableFontFamily';global.tab.ConstructableFontFamily=cp;var cq=function(){ss.makeGenericType(bd,[Object,cr]).call(this)};cq.__typeName='tab.CopyTempFileToSessionSpecificStorageCmd';global.tab.CopyTempFileToSessionSpecificStorageCmd=cq;var cr=function(e){this.$$c=null;this.$$c=e};cr.__typeName='tab.CopyTempFileToSessionSpecificStorageCmd$Response';global.tab.CopyTempFileToSessionSpecificStorageCmd$Response=cr;var cs=function(){ss.makeGenericType(bd,[Object,ct]).call(this)};cs.__typeName='tab.CreateAndEstablishCloudConnectionCmd';global.tab.CreateAndEstablishCloudConnectionCmd=cs;var ct=function(e){this.$$c=null;this.$$c=e};ct.__typeName='tab.CreateAndEstablishCloudConnectionCmd$Response';global.tab.CreateAndEstablishCloudConnectionCmd$Response=ct;var cu=function(){ss.makeGenericType(bd,[Object,cv]).call(this)};cu.__typeName='tab.CreateAndEstablishConnectionCmd';global.tab.CreateAndEstablishConnectionCmd=cu;var cv=function(e){this.$$c=null;this.$$c=e};cv.__typeName='tab.CreateAndEstablishConnectionCmd$Response';global.tab.CreateAndEstablishConnectionCmd$Response=cv;var cw=function(){ss.makeGenericType(bd,[Object,cx]).call(this)};cw.__typeName='tab.CreateAnnotationCmd';global.tab.CreateAnnotationCmd=cw;var cx=function(e){this.$$c=null;this.$$c=e};cx.__typeName='tab.CreateAnnotationCmd$Response';global.tab.CreateAnnotationCmd$Response=cx;var cy=function(){ss.makeGenericType(bd,[Object,cz]).call(this)};cy.__typeName='tab.CreateAnnotationRichTextEditorCmd';global.tab.CreateAnnotationRichTextEditorCmd=cy;var cz=function(e){this.$$c=null;this.$$c=e};cz.__typeName='tab.CreateAnnotationRichTextEditorCmd$Response';global.tab.CreateAnnotationRichTextEditorCmd$Response=cz;var cA=function(){ss.makeGenericType(bd,[Object,cB]).call(this)};cA.__typeName='tab.CreateDataSourceFromFileUploadCmd';global.tab.CreateDataSourceFromFileUploadCmd=cA;var cB=function(e){this.$$c=null;this.$$c=e};cB.__typeName='tab.CreateDataSourceFromFileUploadCmd$Response';global.tab.CreateDataSourceFromFileUploadCmd$Response=cB;var cC=function(){ss.makeGenericType(bd,[Object,cD]).call(this)};cC.__typeName='tab.CreateWorksheetTitleRichTextEditorCmd';global.tab.CreateWorksheetTitleRichTextEditorCmd=cC;var cD=function(e){this.$$c=null;this.$$c=e};cD.__typeName='tab.CreateWorksheetTitleRichTextEditorCmd$Response';global.tab.CreateWorksheetTitleRichTextEditorCmd$Response=cD;var cE=function(){ss.makeGenericType(bd,[Object,cF]).call(this)};cE.__typeName='tab.CreateZoneRichTextEditorCmd';global.tab.CreateZoneRichTextEditorCmd=cE;var cF=function(e){this.$$c=null;this.$$c=e};cF.__typeName='tab.CreateZoneRichTextEditorCmd$Response';global.tab.CreateZoneRichTextEditorCmd$Response=cF;var cG=function(e){cH.call(this,e)};cG.__typeName='tab.CubeAttributeDimensionModel';global.tab.CubeAttributeDimensionModel=cG;var cH=function(e){this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;es.call(this,e)};cH.__typeName='tab.CubeBaseDimensionModel';global.tab.CubeBaseDimensionModel=cH;var cI=function(e){this.$1=null;this.$3$1=null;this.$3$2=null;es.call(this,e)};cI.__typeName='tab.CubeDimensionModel';global.tab.CubeDimensionModel=cI;var cJ=function(e){this.$2=null;this.$1=null;es.call(this,e)};cJ.__typeName='tab.CubeFolderModel';global.tab.CubeFolderModel=cJ;var cK=function(e){this.$1=null;this.$2=null;es.call(this,e)};cK.__typeName='tab.CubeHierarchyModel';global.tab.CubeHierarchyModel=cK;var cL=function(e){this.$4$1=null;cH.call(this,e)};cL.__typeName='tab.CubeStandardDimensionModel';global.tab.CubeStandardDimensionModel=cL;var cM=function(e){this.$3$1=null;kq.call(this,e,new hF('cumulativeTableCalcPresModel'.toString()))};cM.__typeName='tab.CumulativeTableCalcModel';global.tab.CumulativeTableCalcModel=cM;var cN=function(e){this.$0=null;this.$0=e};cN.__typeName='tab.CustomizedViewSession';cN.buildUrl=function(e,ex){return cN.$2(e,function(lA){if(ex){lA.removeAllQueryParams()}})};cN.$2=function(e,ex){var lA=kR.createForViewingSheet(tsConfig.repositoryUrl);if(ss.isValue(e)){lA.updateForCustomizedView(e)}else{lA.set_originalView(true)}lA.removeHash();if(!ss.staticEquals(ex,null)){ex(lA)}return lA.get_absoluteUri()};cN.navigateToCustomizedView=function(e){var ex=tabBootstrap.Utility.get_locationWindow();jk.destroySessionAndForward$1(ex,cN.buildUrl(e,false))};cN.navigateToCustomizedView$1=function(e,ex){var lA=tabBootstrap.Utility.get_locationWindow();jk.destroySessionAndForward$1(lA,cN.$2(e,ex))};cN.navigateToOriginalView=function(e){var ex=tabBootstrap.Utility.get_locationWindow();jk.destroySessionAndForward$1(ex,cN.$2(null,e))};cN.updateTsConfig=function(e,ex){tsConfig.repositoryUrl=cN.$3(e);if(ex){if(ss.isNullOrUndefined(e)){tsConfig.current_custom_view_id=null}else{tsConfig.current_custom_view_id=e.id}}};cN.$3=function(e){var ex=new ie(tsConfig.repositoryUrl);if(ss.isNullOrUndefined(e)){return ss.formatString('{0}/{1}',ex.get_workbookId(),ex.get_sheetId())}return ss.formatString('{0}/{1}/{2}/{3}',ex.get_workbookId(),ex.get_sheetId(),kR.encodeUserName(e.owner.username),e.urlId)};cN.$4=function(e){var ex=function(lA,lB,lC){if(ss.staticEquals(e,null)){return}var lD=cN.$5(lA);var lE=lD;if(ss.isNullOrUndefined(lE)){lE=lC.toString()}e(lE)};return ex};cN.$5=function(e){if(ss.isValue(e.responseText)){try{var ex=JSON.parse(e.responseText);if(ss.isValue(ex.msg)){return ex.msg}}catch(lA){var e=ss.Exception.wrap(lA)}}return null};cN.$6=function(e,ex,lA,lB,lC){var lD=lC.$3(lA);cN.$0(e,ex,lB,lD,lC,'immediately',null)};cN.$7=function(e,ex,lA,lB,lC,lD,lE){var lF=lC.$5(lA);cN.$0(e,ex,lB,lF,lC,lE,lD)};cN.$0=function(e,ex,lA,lB,lC,lD,lE){var lF=lC.$0(null,e,ex,ss.coalesce(lD,'immediately'));var lG=cN.$1(lA,lB,lE);lC.$c(lG,lF)};cN.$1=function(e,ex,lA){var lB={type:ss.coalesce(lA,'POST'),url:ex,headers:ss.mkdict(['Accept','text/javascript']),dataType:'json'};if(ss.isValue(e)){lB.data=e}return lB};global.tab.CustomizedViewSession=cN;var cO=function(e){this.$3$1=null;this.$3$2=null;kq.call(this,e,new hF('customTableCalcPresModel'.toString()));this.set_referenceModel(new kc(this))};cO.__typeName='tab.CustomTableCalcModel';global.tab.CustomTableCalcModel=cO;var cP=function(e){this.$1=[];hB.call(this);for(var ex=0;ex<e.length;ex++){var lA=e[ex];var lB=lA.ns+':'+lA.cmd;this.$1.push(lB)}};cP.__typeName='tab.CustomUIBlockingPluginPresentationLayer';global.tab.CustomUIBlockingPluginPresentationLayer=cP;var cQ=function(){};cQ.__typeName='tab.DashboardClientCommands';cQ.dropSheetOnDashboard=function(e,ex,lA){var lB=new dQ;lB.c['dashboard']=tsConfig.current_sheet_name;lB.c['addAsFloating']=ss.coalesce(lA,false);lB.c['dropLocation']={x:ex.x|0,y:ex.y|0};lB.c['zoneType']='viz';lB.c['worksheet']=e;lB.set_uiBlocking('immediately');return lB.invoke()};cQ.dropNewZoneObjectOnDashboard=function(e,ex,lA,lB,lC,lD,lE){var lF={x:lB.x|0,y:lB.y|0};var lG=new dQ;lG.c['dashboard']=tsConfig.current_sheet_name;lG.c['addAsFloating']=ss.coalesce(lA,false);lG.c['dropLocation']=lF;lG.c['zoneType']=e;lG.c['isHorizontal']=ex;lG.set_uiBlocking('immediately');var lH=lG;if(ss.isValue(lD)){lH.c['zoneParam']=lD}if(ss.isValue(lC)){lH.c['formattedText']=lC}if(lE!=='invalid'){lH.c['dashboardObjectType']=lE}return lH.invoke()};cQ.showImageObjectConfigDialog=function(e){var ex=new jF;ex.c['dashboard']=tsConfig.current_sheet_name;ex.c['zoneId']=e|0;ex.set_uiBlocking('none');var lA=ex;lA.invoke()};cQ.setDashboardDeviceLayout=function(e){var ex=new jl;ex.c['dashboard']=tsConfig.current_sheet_name;ex.c['dashboardDeviceLayout']=e;ex.c['allowPreviewSizeChange']=true;ex.set_uiBlocking('immediately');ex.invoke()};cQ.getSheetDragDropTargets=function(e,ex){var lA=new eY;lA.c['dashboard']=tsConfig.current_sheet_name;lA.set_uiBlocking('none');var lB=lA;if(ss.isValue(e)){lB.c['zoneId']=ss.unbox(e)|0}if(ss.isValue(ex)){lB.c['grabLocation']={x:ex.x|0,y:ex.y|0}}return lB.invoke()};cQ.getThumbnailImage=function(e){var ex=new fs;ex.c['worksheet']=e;ex.set_uiBlocking('none');var lA=ex;return lA.invoke()};cQ.addNewObjectToDashboard=function(e,ex,lA,lB,lC,lD){var lE=new T;lE.c['dashboard']=tsConfig.current_sheet_name;lE.c['zoneType']=e;lE.c['isHorizontal']=ex;lE.c['addAsFloating']=ss.coalesce(lA,false);lE.set_uiBlocking('immediately');var lF=lE;if(ss.isValue(lC)){lF.c['zoneParam']=lC}if(ss.isValue(lB)){lF.c['formattedText']=lB}if(lD!=='invalid'){lF.c['dashboardObjectType']=lD}return lF.invoke()};cQ.addSheetToDashboard=function(e,ex){var lA=cl.newCommand({ns:'tabdoc',cmd:'add-sheet-to-dashboard'},null);lA.commandParams={};lA.commandParams['worksheet']=e;lA.commandParams['addAsFloating']=ss.coalesce(ex,false);bT.SendCommand(ib.create(lA,'immediately'))};cQ.showGridOnDashboard=function(e){var ex=new cW;ex.c['dashboard']=tsConfig.current_sheet_name;ex.c['dashboardShowGrid']=e;ex.set_localWork(function(lA){cQ.$2(e,lA)});ex.set_uiBlocking('none');ex.invoke()};cQ.$2=function(e,ex){var lA=gY.findContentDashboard();var lB=(e?'gom-on':'gom-automatic');if(lB===lA.get_gridMode()){return}var lC=ex.makeMutablePresModel(lA,false);lC.gridOverlayMode=lB};cQ.changeDashboardGridSize=function(e){var ex=new cU;ex.c['dashboard']=tsConfig.current_sheet_name;ex.c['dashboardGridSize']=e|0;ex.set_localWork(function(lA){cQ.$1(e,lA)});ex.set_uiBlocking('none');ex.invoke()};cQ.$1=function(e,ex){var lA=gY.findContentDashboard();if(e===lA.get_gridSize()){return}var lB=ex.makeMutablePresModel(lA,false);lB.size=e};cQ.getCurrentSheetSizeConstraints=function(){var e=$.Deferred();if(tsConfig.current_sheet_type==='worksheet'){e.resolve({sizeMode:'size-mode-auto',dashboardSizingMode:'automatic'})}else{var ex=new fa;ex.c['dashboard']=tsConfig.current_sheet_name;ex.set_uiBlocking('none');ex.invoke().pipe(function(lA){return e.resolve(lA.$$c['dashboardSizePresModel'])},function(lA){return e.reject()})}return e.promise()};cQ.setDashboardSizeFixed=function(e,ex,lA,lB,lC){var lD=function(lE){var lF=lE.makeMutablePresModel(lC,false);var lG={dashboardSizingMode:'fixed',h:lB,w:lA};lF.dashboardSizePresModel=lG};cQ.$0(e,ex,'fixed',lA,lB,lA,lB,lD)};cQ.setDashboardSizeAutomatic=function(e,ex){var lA=function(lB){var lC=lB.makeMutablePresModel(ex,false);var lD={dashboardSizingMode:'automatic'};lC.dashboardSizePresModel=lD};cQ.$0(e,'no','automatic',0,0,0,0,lA)};cQ.setDashboardSizeRange=function(e,ex,lA,lB,lC,lD,lE){var lF=function(lG){var lH=lG.makeMutablePresModel(lE,false);var lI={dashboardSizingMode:'range',maxHeight:ss.coalesce(lD,0),maxWidth:ss.coalesce(lC,0),minHeight:ss.coalesce(lB,0),minWidth:ss.coalesce(lA,0)};lH.dashboardSizePresModel=lI};cQ.$0(e,ex,'range',ss.coalesce(lA,0),ss.coalesce(lB,0),ss.coalesce(lC,0),ss.coalesce(lD,0),lF)};cQ.$0=function(e,ex,lA,lB,lC,lD,lE,lF){var lG=new jn;lG.c['dashboardSizingDimension']=ex;lG.c['dashboard']=e;lG.c['minWidth']=lB|0;lG.c['minHeight']=lC|0;lG.c['maxWidth']=lD|0;lG.c['maxHeight']=lE|0;lG.c['dashboardSizingMode']=lA;lG.set_localWork(lF);lG.set_uiBlocking('immediately');lG.invoke()};cQ.showDashboardTitle=function(e){var ex=new jB;ex.c['dashboard']=e;ex.set_uiBlocking('immediately');var lA=ex;lA.invoke()};cQ.getUrlSubstitutionParameters=function(){var e=new fu;e.c['dashboard']=tsConfig.current_sheet_name;return e.invoke()};cQ.isWebZoneUrlValid=function(e){var ex=new gg;ex.c['urlString']=e;ex.set_uiBlocking('immediately');return ex.invoke()};global.tab.DashboardClientCommands=cQ;var cR=function(e){this.$2$1=null;this.$2$2=null;gV.call(this,e,new hF('dashboardGridDialogPresModel'.toString()));this.pm={}};cR.__typeName='tab.DashboardGridDialogModel';global.tab.DashboardGridDialogModel=cR;var cS=function(e){this.$f={};this.$a=null;this.$d=0;this.$b=null;this.$e=null;this.$g=null;this.$c=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;this.$2$9=null;this.$2$10=null;this.$2$11=null;this.$2$12=null;this.$2$13=null;this.$2$14=null;this.zonesModel=null;this.sheetListModel=null;this.layoutTreeModel=null;this.emptyShowMeModel=null;this.autoUpdate=false;this.invalid=false;gV.call(this,e,new hF('dashboardPresModel'.toString()));this.invalid=false;this.zonesModel=new lz(this);this.$d=0};cS.__typeName='tab.DashboardModel';cS.add_modifiedSheetsChanged=function(e){cS.$2$1=ss.delegateCombine(cS.$2$1,e)};cS.remove_modifiedSheetsChanged=function(e){cS.$2$1=ss.delegateRemove(cS.$2$1,e)};cS.$1=function(e,ex){var lA=e.length;var lB=new Set;for(var lC=0;lC<e.length;lC++){var lD=e[lC];var lE=ex[lD];var lF=[];if(!lE.get_selectionsModel().tupleSelection.isEmpty||lE.get_selectionsModel().get_brushVizForNodeSelection()){ss.arrayAddRange(lF,P.getApplicableActions(lD,'on-select','highlight'));ss.arrayAddRange(lF,P.getApplicableActions(lD,'explicitly','highlight'))}if(!lE.get_brushingsModel().tupleSelection.isEmpty){ss.arrayAddRange(lF,P.getApplicableActions(lD,'on-hover','highlight'))}if(!tab.MiscUtil.isNullOrEmpty$1(lF)){var lG=v.$0(lD,lF,lE.get_vizDataModel());tab.SetUtilities.addAll(Object).call(null,lB,tab.SetUtilities.getValues(Object).call(null,lG));if(lB.size===lA){return lB}}}return lB};cS.$0=function(){if(!ss.staticEquals(cS.$2$1,null)){cS.$2$1()}};global.tab.DashboardModel=cS;var cT=function(){this.$1=false;gV.call(this,null,null);this.$1=false};cT.__typeName='tab.DashboardNewObjectsModel';global.tab.DashboardNewObjectsModel=cT;var cU=function(){ss.makeGenericType(bd,[Object,cV]).call(this)};cU.__typeName='tab.DashboardSetGridSizeCmd';global.tab.DashboardSetGridSizeCmd=cU;var cV=function(e){this.$$c=null;this.$$c=e};cV.__typeName='tab.DashboardSetGridSizeCmd$Response';global.tab.DashboardSetGridSizeCmd$Response=cV;var cW=function(){ss.makeGenericType(bd,[Object,cX]).call(this)};cW.__typeName='tab.DashboardShowGridCmd';global.tab.DashboardShowGridCmd=cW;var cX=function(e){this.$$c=null;this.$$c=e};cX.__typeName='tab.DashboardShowGridCmd$Response';global.tab.DashboardShowGridCmd$Response=cX;var cY=function(){ss.makeGenericType(kV,[Object,cZ]).call(this)};cY.__typeName='tab.DashboardShowGridWebWrapperCmd';cY.get_commandName=function(){return'dashboard-show-grid-web-wrapper'};global.tab.DashboardShowGridWebWrapperCmd=cY;var cZ=function(e){this.$$c=null;this.$$c=e};cZ.__typeName='tab.DashboardShowGridWebWrapperCmd$Response';global.tab.DashboardShowGridWebWrapperCmd$Response=cZ;var da=function(){cY.call(this)};da.__typeName='tab.DashboardShowGridWebWrapperCommand';global.tab.DashboardShowGridWebWrapperCommand=da;var db=function(){};db.__typeName='tab.DashboardSizeCalculator';db.get_dashboardViewportSize=function(){var e=db.get_dashboardViewportSizeWithTabs();e.h-=tabBootstrap.VizLayoutConstants.get_tabsHeight();return e};db.get_dashboardViewportSizeWithTabs=function(){var e=document.getElementById('dashboard-viewport');var ex={w:e.offsetWidth,h:e.offsetHeight};return ex};db.calculateContainerSize=function(e){var ex=(tabBootstrap.VizLayoutConstants.get_shouldShowTabs()?db.calculateDashboardSize():e);var lA={w:ex.w,h:ex.h+tabBootstrap.VizLayoutConstants.get_tabsHeight()};return lA};db.calculateDashboardSize=function(){var e=db.get_dashboardViewportSize();var ex=tabBootstrap.ViewerBootstrap.get_instance().adjustForMinMaxDashboardSizes(e);return ex};db.asSizePresModel=function(e){return{w:e.w,h:e.h}};db.asMetric=function(e){return{w:e.w,h:e.h}};db.asRect=function(e){return{l:0,t:0,w:e.w,h:e.h}};global.tab.DashboardSizeCalculator=db;var dc=function(e){this.$2$1=null;this.dashboardSizeModel=null;this.layoutInfoModel=null;gV.call(this,e,new hF('dashboardSizeControl'.toString()))};dc.__typeName='tab.DashboardSizeControlModel';global.tab.DashboardSizeControlModel=dc;var dd=function(e){this.$2$1=null;gV.call(this,e,new hF('dashboardSizePresModel'.toString()))};dd.__typeName='tab.DashboardSizeModel';global.tab.DashboardSizeModel=dd;var de=function(){var e=[];e.push(kA.currentUser());de.$ctor2.call(this,{},{},e)};de.__typeName='tab.DataAlert';de.$ctor2=function(e,ex,lA){this.$4=null;this.$5=null;this.$3=1440;this.$2=null;this.$1=null;this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.$1$6=null;this.$1$7=null;this.$1$8=false;this.$1$9=null;this.$1$10=null;this.$1$11=false;this.$1$12=false;this.$1$13=null;this.$2=e;this.$1=ex;this.set_recipients(lA);this.set_deviceType('default')};de.$ctor1=function(e){this.$4=null;this.$5=null;this.$3=1440;this.$2=null;this.$1=null;this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.$1$6=null;this.$1$7=null;this.$1$8=false;this.$1$9=null;this.$1$10=null;this.$1$11=false;this.$1$12=false;this.$1$13=null;this.set_selectionCaption(e.fieldName);this.set_measurePresModel(e.dataAlertMeasure);this.set_conditionPresModel({dataAlertConditionOp:e.dataAlertConditionOp,dataAlertThresholdText:e.dataAlertThresholdText,dataType:e.dataType});this.set_threshold(e.dataAlertThresholdText);this.set_alertConditionMet(e.isDataAlertConditionMet);var ex=[];ex.push(kA.currentUser());this.set_recipients(ex);this.set_deviceType('default');this.set_isViewSaveNeeded(e.isViewSaveNeeded)};global.tab.DataAlert=de;var df=function(){};df.__typeName='tab.DataAlertClientCommands';df.newDataAlert=function(e){(new jP).invoke().fail(function(){e()})};df.updateDataAlert=function(e){var ex=$.Deferred();if(e.get_thresholdIsValid()){var lA=new kw;lA.c['dataAlertThresholdText']=e.get_conditionPresModel().dataAlertThresholdText;lA.c['dataAlertConditionOp']=e.get_conditionPresModel().dataAlertConditionOp;lA.invoke().done(function(lB){ex.resolve(lB.$$c['isDataAlertConditionMet'])}).fail(function(){throw new ss.Exception('Failed to update reference line position and shading')})}else{ex.resolve(e.get_alertConditionMet())}return ex};df.closeDataAlertDialog=function(){(new bO).invoke().done(function(e){}).fail(function(){throw new ss.Exception('Failed to close the dialog')})};df.getDataAlertInfoMap=function(e){var ex=$.Deferred();var lA=new fc;lA.c['dataAlertSpecSerializedTextMap']=JSON.stringify(e);lA.invoke().done(function(lB){ex.resolve(lB.$$c['dataAlertInfoMap'])}).fail(function(){throw new ss.Exception('Failed to fetch data alert info')});return ex};global.tab.DataAlertClientCommands=df;var dg=function(){};dg.__typeName='tab.DataAlertConditionOperation';dg.supportedOperations=function(){var e=[];e.push('greater-than-equal');e.push('greater-than');e.push('less-than-equal');e.push('less-than');e.push('equals');return e};dg.displayString=function(e){switch(e){case'equals':{return tab.Strings.OperatorEqual}case'greater-than':{return tab.Strings.OperatorAbove}case'greater-than-equal':{return tab.Strings.OperatorAboveOrEqual}case'less-than':{return tab.Strings.OperatorBelow}case'less-than-equal':{return tab.Strings.OperatorBelowOrEqual}default:{return''}}};global.tab.DataAlertConditionOperation=dg;var dh=function(e){this.$2$1=null;this.$2$2=null;gV.call(this,e,new hF('dataAlertDialogPresModel'.toString()))};dh.__typeName='tab.DataAlertDialogModel';dh.instance=function(){var e=Y.get_instance();return e.modelInstance(dh).call(e)};dh.recreateInstance=function(){var e=Y.get_instance();e.removeModel(dh).call(e);return e.addModel(dh).call(e)};global.tab.DataAlertDialogModel=dh;var di=function(){};di.__typeName='tab.DataAlertNotificationInterval';di.convertToString=function(e){switch(e){case 0:{return tab.Strings.NotificationIntervalEveryTime}case 2147483647:{return tab.Strings.NotificationIntervalOnlyOnce}case 60:{return tab.Strings.NotificationIntervalHourly}case 1440:{return tab.Strings.NotificationIntervalDaily}case 10080:{return tab.Strings.NotificationIntervalWeekly}default:{return''}}};di.supportedIntervals=function(){var e=[];e.push(2147483647);e.push(0);e.push(60);e.push(1440);e.push(10080);return e};global.tab.DataAlertNotificationInterval=di;var dj=function(){};dj.__typeName='tab.DataConnectionCommands';dj.get_serverConnectionTypes=function(){if(ss.isNullOrUndefined(dj.$1)){var e=$.Deferred();dj.$1=e;var ex=dj.$0();ex.done([function(lA){e.resolve(lA)}]).fail([function(lA){dj.$1=null;e.reject(lA)}])}return dj.$1};dj.$0=function(){var e=$.Deferred();dj.getConnectionTypeGroupPresModel('server',function(ex){var lA=[];var lB=[];ex.connectionTypes.forEach(function(lC){if(lC.valueClassAttr==='sqlproxy'){lC.label=tab.Strings.CreateConnectionPublishedDatasources;lA.push(lC)}else{lB.push(lC)}});e.resolve({item1:lA,item2:lB})},function(ex){e.reject(ex)});return e.promise()};dj.acceptConnectionVariables=function(e){var ex=new jp;ex.c['connectionName']=e;ex.set_uiBlocking('immediately');ex.invoke()};dj.editVariableByIndex=function(e,ex,lA,lB,lC,lD){var lE={};lE['connectionName']=e;lE['variableGuid']=ex;lE['valueIndex']=lA;lE['variableValueOperation']=lB;lE['firstValueIndex']=lC;lE['secondValueIndex']=lD;bT.SendCommand(ib.create(cl.newCommand({ns:'tabdoc',cmd:'set-variable-value-by-index'},lE),'immediately'))};dj.editVariableByInput=function(e,ex,lA,lB,lC){var lD={};lD['connectionName']=e;lD['variableGuid']=ex;lD['valueIndex']=lA;lD['variableValueOperation']=lB;lD['valueString']=lC;bT.SendCommand(ib.create(cl.newCommand({ns:'tabdoc',cmd:'set-variable-value-shim'},lD),'immediately'))};dj.addVariable=function(e,ex){var lA=$.Deferred();var lB={};lB['connectionName']=e;lB['variableGuid']=ex;bT.SendCommand(ib.create(cl.newCommand({ns:'tabdoc',cmd:'add-new-variable-value'},lB),'immediately',function(lC){lA.resolve(lC)},function(lC){lA.reject()}));return lA.promise()};dj.deleteVariable=function(e,ex,lA,lB){var lC={};lC['connectionName']=e;lC['variableGuid']=ex;lC['valueIndex']=lA;bT.SendCommand(ib.create(cl.newCommand({ns:'tabdoc',cmd:'delete-variable-value'},lC),'immediately',function(lD){lB()}))};dj.addPublishedDataSourceConnection=function(e,ex,lA){var lB={};lB['datasourceDatabaseName']=e.get_name();lB['repositoryUrl']=e.get_repositoryUrl();var lC=cl.newCommand({ns:'tabsrv',cmd:'add-dataserver-data-source'},lB);lC.preserveRootResult=true;bT.SendCommand(new bM('immediately',null,lC,function(lD){var lE=new R(lD);if(!ss.isNullOrEmptyString(lE.$$c['datasource'])){bT.SendCommand(new H(function(lF){Y.get_instance().get_workbook().get_dataSchema().notifyNewDataSourceAdded(lF.modelUpdateContext,lE.$$c['datasource'])}));ex()}},function(lD){lA()}))};dj.selectDataServerDataSourceForProxy=function(e,ex,lA,lB,lC){var lD=new iR;lD.c['datasource']=lA;lD.c['datasourceDatabaseName']=ex.get_name();lD.c['repositoryUrl']=ex.get_repositoryUrl();lD.set_uiBlocking('immediately');var lE=lD;lE.invoke().then(function(lF){lB()},function(lF){lC()})};dj.getDataSourceDataPresModel=function(e,ex,lA){var lB=new fe;lB.set_commandWaiter(lA);lB.c['datasource']=e;lB.c['cacheOnly']=false;lB.c['useNotificationReturn']=true;lB.c['includeFormattedValues']=true;lB.set_uiBlocking('immediately');lB.invoke().fail(function(lC){ex(lC.toString())})};dj.getConnectionTypeGroupPresModel=function(e,ex,lA){var lB={};lB['connectionTypeGroup']=e;var lC=cl.newCommand({ns:'tabsrv',cmd:'get-supported-connection-types'},lB);jd.executeServerCommand(lC,'none',function(lD){ex(lD)},lA)};dj.getDSParamsFromPresModelWithConnectionName=function(e,ex){var lA=new fi;lA.c['connectionName']=ex;lA.c['widgetConnectionParams']=dj.sanitizeConnectionParamsPresModel(e);return lA.invoke()};dj.getDSParamsFromPresModelWithConnectionClass=function(e,ex){var lA=new fi;lA.c['connectionClassName']=ex;lA.c['widgetConnectionParams']=dj.sanitizeConnectionParamsPresModel(e);return lA.invoke()};dj.checkConnection=function(e,ex){var lA=new bK;lA.c['connectionConfigName']=e;lA.c['lookupTable']=JSON.stringify(ex);lA.set_uiBlocking('immediately');lA.set_suppressConnectionDialog(true);return lA.invoke()};dj.sanitizeConnectionParamsPresModel=function(e){var ex=_.clone(e);ex.widgetAttrPassword='';ex.widgetAttrMdwPassword='';return ex};global.tab.DataConnectionCommands=dj;var dk=function(e){this.$2=null;gV.call(this,e,new hF('variablePromptDialog'.toString()))};dk.__typeName='tab.DataConnectionPromptModel';global.tab.DataConnectionPromptModel=dk;var dl=function(){};dl.__typeName='tab.DataConnectionUtils';dl.connectionNameFromFullConnectionName=function(e){var ex='';var lA=new RegExp('\\[(.)*?\\]','g');lA.exec(e);var lB=lA.exec(e);if(ss.isValue(lB)&&lB.length>1){ex=lB[0].substr(1,lB[0].length-2)}return ex};dl.getConnectionNames=function(e){var ex=new Array(e.dataSourceConnectionAttemptInfos.length);for(var lA=0;lA<e.dataSourceConnectionAttemptInfos.length;lA++){ex[lA]=e.dataSourceConnectionAttemptInfos[lA].connectionFullName}return ex};dl.stripDirectoryFromPath=function(e){var ex=e.lastIndexOf('\\')+1;if(ex===0){ex=e.lastIndexOf('/')+1}ex=Math.max(0,ex);return e.substring(ex)};dl.isEditConnectionForFilesSupported=function(e){return ss.contains(co.get_getSupportedFileClasses(),e)};dl.isEditConnectionMultiFileAllowed=function(e){return ss.isNullOrEmptyString(e)||e==='textscan'};dl.isCategory=function(e,ex){var lA=$.Deferred();co.getConnectionTypeCategory(e).done(function(lB){lA.resolve(lB===ex)});return lA.promise()};dl.isDatabaseClassSupportedInReconnectFlow=function(e){return dl.isCategory(e,'database')};dl.isTableauServerSupportedInReconnectFlow=function(e){var ex=$.Deferred();co.get_supportedTableauServerClasses().done(function(lA){ex.resolve(ss.contains(lA,e))});return ex.promise()};dl.isDataTabSupportedForDataSource=function(e){var ex=Y.get_instance().get_workbook().get_dataSchema().get_dataSources().getDataSource(e);return tsConfig.is_authoring&&ss.isValue(ex)&&ex.get_isDataTabViewSupported()};global.tab.DataConnectionUtils=dl;var dm=function(e){gV.call(this,e,new hF('promptVariables'.toString(),1))};dm.__typeName='tab.DataConnectionVariableArrayModel';global.tab.DataConnectionVariableArrayModel=dm;var dn=function(e,ex){this.$3=null;this.$2=null;gV.call(this,e,new hF(ex.toString()))};dn.__typeName='tab.DataConnectionVariableModel';global.tab.DataConnectionVariableModel=dn;var dp=function(e){gV.call(this,e,new hF('variableValues'.toString(),1))};dp.__typeName='tab.DataConnectionVariableValueArrayModel';global.tab.DataConnectionVariableValueArrayModel=dp;var dq=function(e,ex){gV.call(this,e,new hF(ex.toString()))};dq.__typeName='tab.DataConnectionVariableValueModel';global.tab.DataConnectionVariableValueModel=dq;var dr=function(e){this.$2=null;gV.call(this,e,new hF('dataDictionary'.toString()))};dr.__typeName='tab.DataDictionaryModel';global.tab.DataDictionaryModel=dr;var ds=function(e){this.$3=null;this.$2$1=null;gV.call(this,e,new hF('dataHighlighter'.toString()))};ds.__typeName='tab.DataHighlighterModel';global.tab.DataHighlighterModel=ds;var dt=function(e){this.$1=null;this.$4=null;this.$3=null;this.$2=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;gV.call(this,e,new hF('schemaViewer'.toString()))};dt.__typeName='tab.DataSchemaModel';global.tab.DataSchemaModel=dt;var du=function(){this.$2$1=null;gV.call(this,null,new hF('doc:data-schema-selection-event'.toString()))};du.__typeName='tab.DataSchemaSelectionModel';global.tab.DataSchemaSelectionModel=du;var dv=function(e){this.$2$1=null;this.$2$2=null;this.numRows=0;this.isEmpty=false;this.isExtract=false;this.columnInfoLookup=null;this.dataDictionaryModel=null;gV.call(this,e,new hF('',0));this.numRows=0;this.isEmpty=true;this.isExtract=false;this.columnInfoLookup=null;this.dataDictionaryModel=new dr(this)};dv.__typeName='tab.DataSourceDataModel';global.tab.DataSourceDataModel=dv;var dw=function(e,ex){this.columnInstancesModel=null;this.$2$1=null;this.$2$2=null;this.baseColumnsModel=null;this.$2$3=0;gV.call(this,e,new hF(ex,0));this.baseColumnsModel=new et('fieldList',this)};dw.__typeName='tab.DataSourceModel';dw.splitGlobalFieldName=function(e){return dw.stripBrackets(e).split('].[')};dw.stripBrackets=function(e){var ex=e;if(ex.length>=2&&ex.charCodeAt(0)===91&&ex.charCodeAt(ex.length-1)===93){return ex.substr(1,ex.length-2)}return ex};global.tab.DataSourceModel=dw;var dx=function(e){this.dataSourceModels=null;gV.call(this,e,new hF('schemaViewerDataSources'.toString()));this.dataSourceModels={}};dx.__typeName='tab.DataSourcesModel';global.tab.DataSourcesModel=dx;var dy=function(){};dy.__typeName='tab.DeepCompareUtils';dy.$2=function(){return tab.Logger.lazyGetLogger(dy)};dy.$0=function(e,ex,lA,lB){var lC=e;var lD=ex;if(lC.length!==lD.length){return false}for(var lE=0;lE<lC.length;lE++){if(!dy.$1(lC[lE],lD[lE],lA,lB)){return false}}return true};dy.$1=function(e,ex,lA,lB){if(!ss.referenceEquals(ss.getInstanceType(e),ss.getInstanceType(ex))){return false}else if(_.isNumber(e)){if(Math.abs(e-ex)>lA){return false}}else if(_.isObject(e)){if(!dy.deepCompare(e,ex,lA,lB)){return false}}else if(_.isArray(e)){return dy.$0(e,ex,lA,lB)}else if(!_.isEqual(e,ex)){return false}return true};dy.deepCompare=function(e,ex,lA,lB){if(ss.count(Object.keys(e))!==ss.count(Object.keys(ex))){}var lC=true;var lD=new ss.ObjectEnumerator(e);try{while(lD.moveNext()){var lE=lD.current();if(lE.key==='geoTable'){continue}if(!ss.keyExists(ex,lE.key)){return false}var lF=lE.value;var lG=ex[lE.key];lC=lC&&dy.$1(lF,lG,lA,lB+'.'+lE.key)}}finally{lD.dispose()}return lC};global.tab.DeepCompareUtils=dy;var dz=function(){};dz.__typeName='tab.DefaultCommandDispatcher';dz.get_instance=function(){dz.$0=dz.$0||new dz;return dz.$0};global.tab.DefaultCommandDispatcher=dz;var dA=function(e,ex){this.$5=null;this.$6=null;this.$5=e;this.$6=ex};dA.__typeName='tab.DefaultSessionErrorHandler';dA.$1=function(e){var ex={error:null,success:null,type:'POST',url:e+'/setignore/sessions'};var lA=ss.mkdict(['_method','PUT','target',tsConfig.sessionid]);ex.data=lA;ex.async=false;dA.$0(ex,null)};dA.$0=function(e,ex){return lv.helper(e,ex)};global.tab.DefaultSessionErrorHandler=dA;var dB=function(){this.$1=false;this.$0=false};dB.__typeName='tab.DeferLayoutImpl';dB.get_instance=function(){if(ss.isNullOrUndefined(dB.$0)){dB.$0=new dB}return dB.$0};global.tab.DeferLayoutImpl=dB;var dC=function(e){this.$6=null;this.$7=tab.FeatureFlags.isEnabled('SkipConnectionsDuringLoad');this.$6=e};dC.__typeName='tab.DeferredConnectionsCommandHandler';dC.shouldHandleWithGivenStatus=function(e){switch(e){case 401:case 503:case 500:{return true}default:{return false}}};dC.constructEnsureLayoutForSheetCommand=function(){var e=jt.createSwitchSheetsCommand(tsConfig.current_sheet_name);e.commandParams['forceConnectionAttempt']=true;return ib.create(e,'immediately')};dC.$0=function(e){var ex={};ex['exception']='DataSourceException';ex['name']=e.datasourceCaption;ex['message']=e.exceptionMessage;ex['type']=e.exceptionType;ex['authoring']=tsConfig.is_authoring;ex['attributes']=e.exceptionAttrs;var lA=ss.formatString('{0}/{1}/embeddedVizAuthentication.html?',BrowserSupport.BrowserSupport.GetOrigin(document.location),tsConfig.language);lA=ss.formatString('{0}path={1}',lA,encodeURIComponent(tsConfig.requestURI));lA=ss.formatString('{0}&attributes={1}',lA,encodeURIComponent(JSON.stringify(ex)));return lA};dC.isBadPasswordError=function(e){e=e.toLowerCase();var ex=ss.equalsT('badpassword',e)||ss.equalsT('badoauthcredentials',e)||ss.equalsT('NoAssociatedCustomOAuthKey'.toLowerCase(),e);return ex};dC.$1=function(){return tsConfig.is_authoring&&tab.MiscUtil.shouldShowDataTab()};dC.$2=function(e){var ex=$.Deferred();if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.exceptionAttrs)){ex.resolve(false)}else{var lA=e.exceptionAttrs['class'];dl.isDatabaseClassSupportedInReconnectFlow(lA).done(function(lB){ex.resolve(dC.$1()&&dl.isDataTabSupportedForDataSource(e.datasource)&&lB)})}return ex.promise()};dC.$3=function(e,ex,lA){var lB=$.Deferred();if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.exceptionAttrs)||!ex||!lA){lB.resolve(false)}else{var lC=e.exceptionAttrs['class'];dl.isTableauServerSupportedInReconnectFlow(lC).done(function(lD){lB.resolve(lD)})}return lB.promise()};global.tab.DeferredConnectionsCommandHandler=dC;var dD=function(){this.$0=tab.FeatureFlags.isEnabled('SkipConnectionsDuringLoad')};dD.__typeName='tab.DeferredConnectionsSessionErrorHandler';global.tab.DeferredConnectionsSessionErrorHandler=dD;var dE=function(){this.$0=null;this.exceptionHandler=null};dE.__typeName='tab.DeferredModelEventHandler';global.tab.DeferredModelEventHandler=dE;var dF=function(e){this.$1=null;this.$2=null;this.$2$1=null;gV.call(this,e,new hF('deviceLayoutInfoItem'.toString()));this.$1=[];this.$2=new k(new j(this))};dF.__typeName='tab.DeviceLayoutInfoItemModel';global.tab.DeviceLayoutInfoItemModel=dF;var dG=function(){};dG.__typeName='tab.DialogPlugins';dG.getDialogHandlerCreator=function(e,ex){var lA=null;return function(lB){if(ss.isNullOrUndefined(lA)){lA=new hA(lB,e,document.body,ex)}return lA}};dG.addHybridDialog=function(e,ex,lA,lB){var lC=gZ.registerRawJsModule(e,ex+'.min',ex).andLoadOnDemandIf(true).moduleBeingConfigured;for(var lD=0;lD<dG.$2.length;lD++){var lE=dG.$2[lD];lC.addDependency(lE)}hd.registerHandlerFromJsModule(e,lA,dG.getDialogHandlerCreator(lA,lB));return lC};dG.$1=function(){var e=[];e.push(hz.dialogApiContract);e.push(hz.menuApiContract);e.push(hz.hybridWidgetsContract);return e};dG.$0=function(e,ex){if(ss.keyExists(dG.$3,e)){return dG.$3[e]}var lA=gZ.registerRawJsModule(e,ex+'.min',ex).andLoadOnDemandIf(true).moduleBeingConfigured;dG.$3[e]=lA;return lA};global.tab.DialogPlugins=dG;var dH=function(e){this.$3$1=null;this.$3$2=null;kq.call(this,e,new hF('differenceTableCalcPresModel'.toString()));this.set_referenceModel(new kc(this))};dH.__typeName='tab.DifferenceTableCalcModel';global.tab.DifferenceTableCalcModel=dH;var dI=function(){ss.makeGenericType(bd,[Object,dJ]).call(this)};dI.__typeName='tab.DoubleClickRegionNoReturnServerCmd';global.tab.DoubleClickRegionNoReturnServerCmd=dI;var dJ=function(e){this.$$c=null;this.$$c=e};dJ.__typeName='tab.DoubleClickRegionNoReturnServerCmd$Response';global.tab.DoubleClickRegionNoReturnServerCmd$Response=dJ;var dK=function(){this.woffLocation=null;eN.call(this)};dK.__typeName='tab.DownloadableFontProperties';global.tab.DownloadableFontProperties=dK;var dL=function(){};dL.__typeName='tab.DownloadableFontPropertiesExtensions';dL.toDownloadableFontProperties=function(e,ex){var lA=new dK;lA.set_fontFamily(e.get_fontFamily());lA.set_style(e.get_style());lA.set_weight(e.get_weight());lA.woffLocation=ex;return lA};global.tab.DownloadableFontPropertiesExtensions=dL;var dM=function(){ss.makeGenericType(kV,[Object,dN]).call(this)};dM.__typeName='tab.DownloadWorkbookCmd';dM.get_commandName=function(){return'download-workbook'};global.tab.DownloadWorkbookCmd=dM;var dN=function(e){this.$$c=null;this.$$c=e};dN.__typeName='tab.DownloadWorkbookCmd$Response';global.tab.DownloadWorkbookCmd$Response=dN;var dO=function(){};dO.__typeName='tab.DrawItemFontExtractor';global.tab.DrawItemFontExtractor=dO;var dP=function(e){this.$1=null;es.call(this,e)};dP.__typeName='tab.DrillPathModel';global.tab.DrillPathModel=dP;var dQ=function(){ss.makeGenericType(bd,[Object,dR]).call(this)};dQ.__typeName='tab.DropOnDashboardCmd';global.tab.DropOnDashboardCmd=dQ;var dR=function(e){this.$$c=null;this.$$c=e};dR.__typeName='tab.DropOnDashboardCmd$Response';global.tab.DropOnDashboardCmd$Response=dR;var dS=function(){ss.makeGenericType(bd,[Object,dT]).call(this)};dS.__typeName='tab.DropOnSchemaDrillPathCmd';global.tab.DropOnSchemaDrillPathCmd=dS;var dT=function(e){this.$$c=null;this.$$c=e};dT.__typeName='tab.DropOnSchemaDrillPathCmd$Response';global.tab.DropOnSchemaDrillPathCmd$Response=dT;var dU=function(){ss.makeGenericType(bd,[Object,dV]).call(this)};dU.__typeName='tab.DropOnSchemaFieldCmd';global.tab.DropOnSchemaFieldCmd=dU;var dV=function(e){this.$$c=null;this.$$c=e};dV.__typeName='tab.DropOnSchemaFieldCmd$Response';global.tab.DropOnSchemaFieldCmd$Response=dV;var dW=function(){ss.makeGenericType(bd,[Object,dX]).call(this)};dW.__typeName='tab.DropOnSchemaSectionCmd';global.tab.DropOnSchemaSectionCmd=dW;var dX=function(e){this.$$c=null;this.$$c=e};dX.__typeName='tab.DropOnSchemaSectionCmd$Response';global.tab.DropOnSchemaSectionCmd$Response=dX;var dY=function(e){gV.call(this,e,new hF('',0))};dY.__typeName='tab.DSColumnInfoModel';global.tab.DSColumnInfoModel=dY;var dZ=function(e,ex){this.$2$1=null;gV.call(this,e,new hF(ex.toString()))};dZ.__typeName='tab.EditValueWidgetModel';global.tab.EditValueWidgetModel=dZ;var ea=function(e){this.$0=null;this.$0=e.slice(0)};ea.__typeName='tab.ErrorHandlerChain';global.tab.ErrorHandlerChain=ea;var eb=function(){ss.makeGenericType(bd,[Object,ec]).call(this)};eb.__typeName='tab.EstablishCloudConnectionCmd';global.tab.EstablishCloudConnectionCmd=eb;var ec=function(e){this.$$c=null;this.$$c=e};ec.__typeName='tab.EstablishCloudConnectionCmd$Response';global.tab.EstablishCloudConnectionCmd$Response=ec;var ed=function(){ss.makeGenericType(bd,[Object,ee]).call(this)};ed.__typeName='tab.EstablishCloudConnectionNoUndoCmd';global.tab.EstablishCloudConnectionNoUndoCmd=ed;var ee=function(e){this.$$c=null;this.$$c=e};ee.__typeName='tab.EstablishCloudConnectionNoUndoCmd$Response';global.tab.EstablishCloudConnectionNoUndoCmd$Response=ee;var ef=function(){ss.makeGenericType(bd,[Object,eg]).call(this)};ef.__typeName='tab.EstablishConnectionCmd';global.tab.EstablishConnectionCmd=ef;var eg=function(e){this.$$c=null;this.$$c=e};eg.__typeName='tab.EstablishConnectionCmd$Response';global.tab.EstablishConnectionCmd$Response=eg;var eh=function(){ss.makeGenericType(bd,[Object,ei]).call(this)};eh.__typeName='tab.EstablishConnectionNoUndoCmd';global.tab.EstablishConnectionNoUndoCmd=eh;var ei=function(e){this.$$c=null;this.$$c=e};ei.__typeName='tab.EstablishConnectionNoUndoCmd$Response';global.tab.EstablishConnectionNoUndoCmd$Response=ei;var ej=function(){};ej.__typeName='tab.ExportServerCommands';ej.exportImage=function(e,ex,lA,lB,lC){var lD={};if(ss.isValue(e)){lD['sheet']=e}lD['storyPointId']=ex;lD['scrollOffsetSheets']=JSON.stringify(lB);var lE=lC.length;var lF=new Array(lE);for(var lG=0;lG<lE;lG++){var lH={};lH.x=ss.round(lC[lG].x);lH.y=ss.round(lC[lG].y);lF[lG]=lH}lD['scrollOffsetPoints']=JSON.stringify(lF);var lI;if(tab.FeatureFlags.isEnabled('ImageExportRefactor')){lI=cl.newCommand({ns:'tabsrv',cmd:'p-ngexport-server_-new'},lD)}else{lI=cl.newCommand({ns:'tabsrv',cmd:'png-export-server'},lD)}jd.executeServerCommand(lI,'immediately',function(lJ){var lK=lJ;var lL=bT.get().legacySession;lL.fileDownloadHelper.openDownload(lL.formatSessionTempfileReference(lK.tempfileKey,true,true),lA)},null)};ej.exportPowerPoint=function(){var e={};var ex=cl.newCommand({ns:'tabsrv',cmd:'power-point-export-server'},e);jd.executeServerCommand(ex,'immediately')};global.tab.ExportServerCommands=ej;var ek=function(){};ek.__typeName='tab.ExtensionClientCommands';ek.showChooseExtensionDialog=function(e){var ex=new iT;ex.c['zoneId']=e|0;var lA=ex;lA.invoke()};ek.showPermissionsPromptDialog=function(e){var ex=new gv;ex.c['extensionRegistrationKeyPresModelList']=e;var lA=ex;lA.invoke()};global.tab.ExtensionClientCommands=ek;var el=function(){this.$0={};this.$1$1=null;this.$1$2=null};el.__typeName='tab.ExtensionPermissionsCache';global.tab.ExtensionPermissionsCache=el;var em=function(){};em.__typeName='tab.ExtensionPermissionsProxy';em.$0=function(){return Y.get_instance().get_extensionPermissionsCache()};global.tab.ExtensionPermissionsProxy=em;var en=function(e){this.$1=null;this.$2$1=null;gV.call(this,e,new hF('addInZone'.toString()));this.$1=e.get_zone()};en.__typeName='tab.ExtensionZoneModel';global.tab.ExtensionZoneModel=en;var eo=function(){};eo.__typeName='tab.ExtraHtmlMarkupRemover';eo.stripOutMarkup=function(e){if(ss.isNullOrEmptyString(e)){return e}var ex=[];ex.push(new RegExp('<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>','gi'));ex.push(new RegExp('<html.*?>.+?</html.*?>','gi'));var lA=ex;for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];e=e.replace(lC,'')}return e};global.tab.ExtraHtmlMarkupRemover=eo;var ep=function(){};ep.__typeName='tab.FailureHandler';ep.reportFailures=function(){if(tab.ErrorTrace.hasTraces()){var e=tab.ErrorTrace.dequeueTraces();var ex=[];var lA=e[0].url;var lB=e[0].userAgent;for(var lC=0;lC<e.length;lC++){var lD=e[lC];ex.push(ep.packageStackTraceData(lD))}bT.get().legacySession.$8(lA,lB,ex)}};ep.packageStackTraceData=function(e){var ex=[];var lA=5000;for(var lB=0;lB<e.locations.length;lB++){var lC=e.locations[lB];if(ss.isNullOrUndefined(lC.url)&&ss.isNullOrUndefined(lC.lineNo)&&ss.isNullOrUndefined(lC.functionName)){continue}var lD=new ss.StringBuilder;lD.append(lC.url+':'+lC.lineNo+','+lC.columnNo+' '+lC.functionName);if(ss.isValue(lC.context)&&lC.context.length>0){for(var lE=0;lE<lC.context.length;lE++){var lF=lC.context[lE];var lG=lF;if(lF.length>120){if(ss.isValue(lC.functionName)&&lF.indexOf(lC.functionName)>0){var lH=lF.indexOf(lC.functionName);var lI=Math.max(0,lH-60);var lJ=Math.min(lI+120,lF.length-1);lG=lF.substring(lI,lJ)}else{lG=lF.substr(0,120)}}lD.append('    '+lG.trim())}}lA-=lD.length;if(lA<0){ex.push('...truncated');break}ex.push(lD.toString())}var lK={name:e.name,message:e.message,errorMode:e.traceMode.toString(),stack:ex};return lK};ep.dispose=function(){ep.reportFailures();window.clearInterval(ep.$2);ep.$2=-1};global.tab.FailureHandler=ep;var eq=function(e){this.$3$1=false;es.call(this,e)};eq.__typeName='tab.FieldColumnModel';global.tab.FieldColumnModel=eq;var er=function(){};er.__typeName='tab.FieldInstanceType';global.tab.FieldInstanceType=er;var es=function(e){gV.call(this,e,new hF('field'.toString()))};es.__typeName='tab.FieldModel';es.getField=function(e,ex,lA){if(ss.isNullOrUndefined(e)||e.length<=0){return null}for(var lB=0;lB<e.length;lB++){var lC=e[lB];switch(lA){case'localName':{if(ss.referenceEquals(lC.get_localName(),ex)){return lC}break}case'globalName':{if(ss.referenceEquals(lC.get_globalName(),ex)){return lC}break}case'qualifiedLocalName':{if(ss.referenceEquals(lC.get_qualifiedLocalName(),ex)){return lC}break}case'description':{if(ss.referenceEquals(lC.get_description(),ex)){return lC}break}case'userCaption':{if(ss.referenceEquals(lC.get_userCaption(),ex)){return lC}break}case'displayName':{if(ss.referenceEquals(lC.get_displayName(),ex)){return lC}break}default:{return null}}}return null};global.tab.FieldModel=es;var et=function(e,ex){this.$j=null;this.$q=null;this.$o=null;this.$p=null;this.$n=null;this.$l=null;this.$k=null;this.$m=null;this.fieldsChanged=null;this.rootFields=null;this.rootFieldsNew=null;gV.call(this,ex,new hF(e,0));this.$m=ex;this.$j={};this.$q={};this.$o={};this.$p={};this.$n={};this.$l={}};et.__typeName='tab.FieldsModel';global.tab.FieldsModel=et;var eu=function(){};eu.__typeName='tab.FieldValueType';global.tab.FieldValueType=eu;var ev=function(e){this.$2=0;this.$0=null;this.cl={};this.$1=0;this.$2=e;this.$0=new Array(e)};ev.__typeName='tab.FifoCache';global.tab.FifoCache=ev;var ew=function(e,ex){this.$2=null;this.$3=null;this.$2=e;this.$3=ex};ew.__typeName='tab.FileDownloadHelper';global.tab.FileDownloadHelper=ew;var ey=function(){this.$1$1=null};ey.__typeName='tab.FileUploadTelemetry';ey.getInstance=function(){if(ss.isNullOrUndefined(ey.$1)){ey.$1=new ey}return ey.$1};global.tab.FileUploadTelemetry=ey;var ez=function(){};ez.__typeName='tab.FileUploadTelemetry$AddReplaceType';global.tab.FileUploadTelemetry$AddReplaceType=ez;var eA=function(){};eA.__typeName='tab.FileUploadTelemetry$ErrorType';global.tab.FileUploadTelemetry$ErrorType=eA;var eB=function(){};eB.__typeName='tab.FileUploadTelemetry$FileUploadOrigin';global.tab.FileUploadTelemetry$FileUploadOrigin=eB;var eC=function(){};eC.__typeName='tab.FileUploadTelemetry$FileUploadReason';global.tab.FileUploadTelemetry$FileUploadReason=eC;var eD=function(){};eD.__typeName='tab.FileUploadTelemetry$RetryType';global.tab.FileUploadTelemetry$RetryType=eD;var eE=function(){};eE.__typeName='tab.FilterClientCommands';eE.setQuantitativeFilterRange=function(e,ex,lA,lB,lC){var lD=cl.newCommand({ns:'tabdoc',cmd:'range-filter'},{});cl.addVisualIdToCommand(lD.commandParams,e);lD.commandParams['globalFieldName']=ex;if(ss.isValue(lA)){lD.commandParams['filterRangeMin']=lA.toString()}if(ss.isValue(lB)){lD.commandParams['filterRangeMax']=lB.toString()}lD.commandParams['included']=lC.toString();jd.executeServerCommand(lD,'immediately')};eE.setCategoricalFilterValues=function(e,ex,lA,lB,lC){var lD={};cl.addVisualIdToCommand(lD,e);lD['globalFieldName']=ex;lD['filterValues']=JSON.stringify(lB||[]);lD['filterUpdateType']=lA.toString();lD['heuristicCommandReinterpretation']=lC;jd.executeServerCommand(cl.newCommand({ns:'tabdoc',cmd:'categorical-filter'},lD),'immediately')};eE.setCategoricalFilterValuesByIndex=function(e,ex,lA,lB){if(!ss.isValue(lA)){lA='filter-replace'}if(!ss.isValue(lB)){lB=[]}var lC={};cl.addVisualIdToCommand(lC,e);lC['globalFieldName']=ex;lC['filterIndices']=JSON.stringify(lB);lC['filterUpdateType']=lA.toString();jd.executeServerCommand(cl.newCommand({ns:'tabdoc',cmd:'categorical-filter-by-index'},lC),'immediately')};eE.modifyCategoricalFilterValues=function(e,ex,lA,lB,lC){if((!ss.isValue(lA)||lA.length===0)&&(!ss.isValue(lB)||lB.length===0)){return}var lD={};cl.addVisualIdToCommand(lD,e);lD['globalFieldName']=ex;if(ss.isValue(lA)&&lA.length>0){lD['filterAdd']=JSON.stringify(lA)}if(ss.isValue(lB)&&lB.length>0){lD['filterRemove']=JSON.stringify(lB)}lD['filterUpdateType']='filter-delta'.toString();if(lC){lD['filterUpdateQualifierType']='filter-update-custom-domain'.toString()}jd.executeServerCommand(cl.newCommand({ns:'tabdoc',cmd:'categorical-filter'},lD),'immediately')};eE.modifyCategoricalFilterValuesByIndex=function(e,ex,lA,lB){if((!ss.isValue(lA)||lA.length===0)&&(!ss.isValue(lB)||lB.length===0)){return}var lC={};cl.addVisualIdToCommand(lC,e);lC['globalFieldName']=ex;if(ss.isValue(lA)){lC['filterAddIndices']=JSON.stringify(lA)}if(ss.isValue(lB)){lC['filterRemoveIndices']=JSON.stringify(lB)}lC['filterUpdateType']='filter-delta'.toString();jd.executeServerCommand(cl.newCommand({ns:'tabdoc',cmd:'categorical-filter-by-index'},lC),'immediately')};eE.setCategoricalQuickFilterMode=function(e,ex,lA){var lB={};cl.addVisualIdToCommand(lB,e);lB['categoricalMode']=lA.toString();lB['fn']=ex;jd.executeServerCommand(cl.newCommand({ns:'tabdoc',cmd:'categorical-quick-filter-mode'},lB),'immediately')};eE.setCategoricalQuickFilterDomain=function(e,ex,lA){var lB={};cl.addVisualIdToCommand(lB,e);lB['filterDomainType']=lA.toString();lB['fn']=ex;jd.executeServerCommand(cl.newCommand({ns:'tabdoc',cmd:'domain-quick-filter'},lB),'immediately')};eE.setPatternFilterState=function(e,ex,lA){var lB={};cl.addVisualIdToCommand(lB,e);lB['patternFilterString']=lA;lB['fn']=ex;jd.executeServerCommand(cl.newCommand({ns:'tabdoc',cmd:'categorical-quick-filter-pattern'},lB),'immediately')};eE.addManualFilterItems=function(e,ex,lA,lB){var lC={charsetId:0,name:''};var lD={dataType:'cstring',stringCollation:lC};var lE=lA['tuples'];var lF=[];for(var lG=0;lG<lE.length;lG++){var lH=lE[lG];var lI=lH['d'];if(ss.isNullOrUndefined(lI)){var lJ=lH['t'];if(lJ.length>0){lI=lJ[0].v}}lF.push(lI)}lD.dataValues=lF;var lK={};cl.addVisualIdToCommand(lK,e);lK['dataColumn']=JSON.stringify(lD);lK['fn']=ex;lK['manualAdd']=lB;jd.executeServerCommand(cl.newCommand({ns:'tabdoc',cmd:'add-manual-items-to-filter'},lK),'immediately')};eE.levelDrill=function(e,ex,lA,lB){var lC={};cl.addVisualIdToCommand(lC,e);lC['boolAggregateDrillUp']=lB.toString();lC['shelfType']=lA.toString();lC['position']=ex.toString();jd.executeServerCommand(cl.newCommand({ns:'tabdoc',cmd:'level-drill-up-down'},lC),'immediately')};eE.updateCategoricalFilter=function(e){if(!Y.get_instance().get_isLocalRenderMode()){return}var ex=function(){return true};var lA=function(lB,lC){var lD=kL.lookupAlias(lC,lB,Y.get_instance().get_dataDictionary());return!e.includesValue(lD)};eE.$5(e.get_filterField(),e.get_targetSheets(),ex,lA,true)};eE.updateQuantitativeFilter=function(e){if(!Y.get_instance().get_isLocalRenderMode()){return}var ex=function(){var lB=!ss.isValue(e.get_currentMinVal())||ss.isValue(e.get_previousMinVal())&&tab.DoubleUtil.isGreaterThanOrApproximatelyEqual(ss.unbox(e.get_currentMinVal()),ss.unbox(e.get_previousMinVal()));var lC=!ss.isValue(e.get_currentMaxVal())||ss.isValue(e.get_previousMaxVal())&&tab.DoubleUtil.isLessThanOrApproximatelyEqual(ss.unbox(e.get_currentMaxVal()),ss.unbox(e.get_previousMaxVal()));return lB&&lC};var lA=function(lB,lC){var lD=kL.lookupRawDataValue(lC,lB,Y.get_instance().get_dataDictionary());if(ss.isNullOrUndefined(lD)||lD==='%null%'){return false}if(lB.get_dataType()==='date'||lB.get_dataType()==='datetime'){var lE=tab.DateUtil.parsePresModelDate(lD);return!e.valueInRange(tab.DateUtil.dateTimeAsOleDate(lE))}else{return!e.valueInRange(parseFloat(lD))}};eE.$5(e.get_filterField(),e.get_targetSheets(),ex,lA,false)};eE.applyFilter=function(e,ex,lA){var lB=e.get_vizDataModel();var lC=lB.getVizDataField(ex);var lD=function(lE){return lA(lC,lE)};return lC.tupleIdsThatPass(lD)};eE.doRelativeDateQuickFilter=function(e,ex,lA,lB,lC){var lD=eE.createDoRelativeDateQuickFilterParams(e,ex,lA,lB,lC);jd.executeServerCommand(cl.newCommand({ns:'tabdoc',cmd:'relative-date-filter'},lD),'immediately')};eE.doLevelHierarchialFilter=function(e,ex,lA,lB,lC){var lD=eE.$2(e,ex,lA,lB,lC);jd.executeServerCommand(cl.newCommand({ns:'tabdoc',cmd:'hierarchical-filter'},lD),'immediately')};eE.doMemberHierarchialFilter=function(e,ex,lA,lB,lC){var lD=eE.$3(e,ex,lA,lB,lC);jd.executeServerCommand(cl.newCommand({ns:'tabdoc',cmd:'hierarchical-filter'},lD),'immediately')};eE.doRangeHierarchialFilter=function(e,ex,lA,lB,lC){var lD=eE.$4(e,ex,lA,lB,lC);jd.executeServerCommand(cl.newCommand({ns:'tabdoc',cmd:'hierarchical-filter'},lD),'immediately')};eE.resetQuantitativeFilter=function(e,ex){for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];var lC=gY.getVisualModel(Y.get_instance(),lB);if(ss.isNullOrUndefined(lC)){continue}if(eE.$0(e,lB)){var lD=[];lC.setFilteredTuples(e,lD);lC.setHiddenTuples(e,lD)}kJ.validateVisualModel(lC)}};eE.createDoRelativeDateQuickFilterParams=function(e,ex,lA,lB,lC,lD,lE){var lF={};cl.addVisualIdToCommand(lF,e);lF['globalFieldName']=ex;lF['datePeriodType']=lA;lF['dateRangeType']=lB;if(lB==='lastn'||lB==='nextn'){lF['rangeN']=lC}if(ss.isValue(lD)){lF['anchorDate']=lD}if(ss.isValue(lE)){lF['included']=lE}return lF};eE.$2=function(e,ex,lA,lB,lC){var lD={};cl.addVisualIdToCommand(lD,e);var lE={};lE['filterLevelAdd']=lA;lE['filterLevelRemove']=lB;lD['globalFieldName']=ex;lD['filterOptions']=lE;lD['filterUpdateType']=lC;return lD};eE.$3=function(e,ex,lA,lB,lC){var lD={};cl.addVisualIdToCommand(lD,e);var lE={};lE['filterAdd']=lA;lE['filterRemove']=lB;lD['globalFieldName']=ex;lD['filterOptions']=lE;lD['filterUpdateType']=lC;return lD};eE.$4=function(e,ex,lA,lB,lC){var lD={};cl.addVisualIdToCommand(lD,e);var lE={};lE['filterRangeAdd']=lA;lE['filterRangeRemove']=lB;lD['globalFieldName']=ex;lD['filterOptions']=lE;lD['filterUpdateType']=lC;return lD};eE.$0=function(e,ex){var lA=gY.getVisualModel(Y.get_instance(),ex);return eE.$1(lA,e)};eE.$1=function(e,ex){if(ss.isValue(e)){return e.get_shouldUpdate()&&e.hasFilterFieldData(ex)}return false};eE.$5=function(e,ex,lA,lB,lC){var lD=new H(function(lE){for(var lF=0;lF<ex.length;lF++){var lG=ex[lF];var lH=gY.getVisualModel(Y.get_instance(),lG);if(ss.isNullOrUndefined(lH)){continue}var lI=eE.$1(lH,e);if(!lI||!lA()||ss.isNullOrUndefined(lH.get_vizDataModel().getVizDataField(e))){if(!lC){gY.setVisualValidAndUpToDateStateOnModel(lE,lH,false)}}else{var lJ=[];lJ=eE.applyFilter(lH,e,lB);lH.setFilteredTuples(e,lJ);if(!lC){lH.setHiddenTuples(e,lJ)}gY.setVisualValidAndUpToDateStateOnModel(lE,lH,true)}}});lD.set_commandName((lC?{ns:'tabdoc',cmd:'categorical-filter'}.cmd:{ns:'tabdoc',cmd:'range-filter'}.cmd));bT.SendCommand(lD)};global.tab.FilterClientCommands=eE;var eF=function(e){this.$1=null;this.$2$1=null;gV.call(this,e,new hF('flipboard'.toString()));this.$1=new jT(this);if((!tsConfig.is_authoring||tab.FeatureFlags.isEnabled('StoryPointCache'))&&ss.isNullOrUndefined(eF.presModelCache)){eF.presModelCache=new jU}};eF.__typeName='tab.FlipboardModel';global.tab.FlipboardModel=eF;var eG=function(e){this.$3=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;gV.call(this,e,new hF('flipboardNav'.toString()));this.$3=[]};eG.__typeName='tab.FlipboardNavigatorModel';global.tab.FlipboardNavigatorModel=eG;var eH=function(){};eH.__typeName='tab.FloatingToolbarClientCommands';eH.setDefaultMapToolSelectionCommand=function(e){var ex=cl.newCommand({ns:'tabdoc',cmd:'default-map-tool-selection'},null);ex.commandParams={};ex.commandParams['defaultMapToolEnum']=e;bT.SendCommand(new ib(ex,'immediately',null,null))};global.tab.FloatingToolbarClientCommands=eH;var eI=function(e){this.$1=null;es.call(this,e)};eI.__typeName='tab.FolderModel';global.tab.FolderModel=eI;var eJ=function(e){this.$1=null;es.call(this,e)};eJ.__typeName='tab.FolderNewModel';global.tab.FolderNewModel=eJ;var eK=function(){this.$1$1=null;this.$1$2=null};eK.__typeName='tab.FontFamily';eK.$ctor1=function(e,ex){this.$1$1=null;this.$1$2=null;this.set_fontGroup(e);this.set_fonts(ex)};global.tab.FontFamily=eK;var eL=function(){};eL.__typeName='tab.FontFamilyProviderBuilder';eL.createFontFamilyBuilder=function(){return new kv};global.tab.FontFamilyProviderBuilder=eL;var eM=function(){};eM.__typeName='tab.FontNotificationUtil';eM.add_fontPropertiesIdentified=function(e){eM.$1$1=ss.delegateCombine(eM.$1$1,e)};eM.remove_fontPropertiesIdentified=function(e){eM.$1$1=ss.delegateRemove(eM.$1$1,e)};eM.add_allFontsFound=function(e){eM.$1$2=ss.delegateCombine(eM.$1$2,e)};eM.remove_allFontsFound=function(e){eM.$1$2=ss.delegateRemove(eM.$1$2,e)};eM.notifyFontsFromVisualListPresModel=function(e){if(ss.isNullOrUndefined(e)){return}var ex=new fB;var lA={type:'draw-group',drawItems:e.drawItems};eM.$8(ex.extractFontFromPresModel(lA))};eM.notifyFontsFromTextRegionPresModel=function(e){if(ss.isNullOrUndefined(e)){return}eM.$8(eM.$5(e.html))};eM.getFontsFromUberTipDataPresModel=function(e){if(ss.isNullOrUndefined(e)){return[]}var ex={};for(var lA=0;lA<e.ubertipPaneDatas.length;lA++){var lB=e.ubertipPaneDatas[lA];var lC=eM.$5(lB.htmlTooltip);for(var lD=0;lD<lC.length;lD++){var lE=lC[lD];eM.$1(ex,lE)}}return _.values(ex)};eM.notifyFontsFromUberTipDataPresModel=function(e){eM.$8(eM.getFontsFromUberTipDataPresModel(e))};eM.notifyFontsFromPagePresModel=function(e){if(ss.isNullOrUndefined(e)){return}eM.$8(eM.$5(e.titleHtml))};eM.notifyFontsFromQuantitativeColorLegendPresModel=function(e){if(ss.isNullOrUndefined(e)){return}var ex={};eM.$1(ex,eM.$6(e.labelTextStyle));eM.$2(ex,e.titleHtml);eM.$8(_.values(ex))};eM.notifyFontsFromCategoricalLegendPresModel=function(e){if(ss.isNullOrUndefined(e)){return}var ex={};eM.$1(ex,eM.$6(e.textStyle));eM.$1(ex,eM.$6(e.titleStyleModel));eM.$1(ex,eM.$6(e.selectedTextStyleModel));eM.$2(ex,e.titleHtml);eM.$8(_.values(ex))};eM.notifyFontsFromServerRenderedLegendPresModel=function(e){if(ss.isNullOrUndefined(e)){return}var ex={};eM.$2(ex,e.titleHtml);eM.$8(_.values(ex))};eM.notifyFontsFromUberTipPresModel=function(e){if(ss.isNullOrUndefined(e)){return}eM.$8(eM.$5(e.htmlTooltip))};eM.$5=function(e){var ex={};eM.$2(ex,e);return _.values(ex)};eM.$6=function(e){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.fontName)){return new eN}var ex=new eN;ex.set_fontFamily(e.fontName);ex.set_weight(ss.coalesce(e.fontWeight,''));ex.set_style(ss.coalesce(e.fontStyle,''));return ex};eM.notifyFontsFromTextStylePresModel=function(e){var ex=[];var lA=eM.$6(e);if(!ss.isNullOrEmptyString(lA.get_fontFamily())){ex.push(lA)}eM.$8(ex)};eM.notifyFontsFromMarkLayoutOutput=function(e){if(ss.isValue(e)){eM.notifyFontsFromTextStyleTable(e.TextStyleTable)}};eM.notifyFontsFromTextStyleTable=function(e){if(ss.isValue(e)&&ss.isValue(e.font)){var ex=e.font.map(function(lA,lB){var lC=((ss.isValue(e.font_style)&&lB<e.font_style.length)?eM.$3(e.font_style[lB]):'font-style-normal');var lD=((ss.isValue(e.font_weight)&&lB<e.font_weight.length)?eM.$4(e.font_weight[lB]):'font-weight-normal');var lE=new eN;lE.set_fontFamily(lA);lE.set_style(eM.getFontAttribute(lC));lE.set_weight(eM.getFontAttribute(lD));return lE});eM.$8(ex)}};eM.getFontAttribute=function(e){var ex=3;var lA=e.split('-');return((lA.length===ex)?lA[ex-1]:'')};eM.$1=function(e,ex){if(ss.isNullOrEmptyString(ex.get_fontFamily())){return}e[ex.get_hash()]=ex};eM.$2=function(e,ex){if(ss.isNullOrEmptyString(ex)){return}var lA=$(ex).find('[style]').addBack();for(var lB=0;lB<lA.length;lB++){var lC=lA[lB].style.fontFamily;var lD=lA[lB].style.fontWeight;if(ss.isNullOrEmptyString(lC)){continue}var lE=new eN;lE.set_fontFamily(lC);lE.set_weight(lD);eM.$1(e,lE)}};eM.$0=function(e,ex,lA){var lB='';var lC='';var lD='';if(ss.keyExists(ex,'font_style')&&parseInt(ex['font_style'].dataValues[lA].toString())===1){lC='italic'}if(ss.keyExists(ex,'font_weight')&&parseInt(ex['font_weight'].dataValues[lA].toString())===1){lB='bold'}if(ss.keyExists(ex,'font')){lD=ex['font'].dataValues[lA].toString()}if(ss.isNullOrEmptyString(lD)){return}var lE=new eN;lE.set_fontFamily(lD);lE.set_weight(lB);lE.set_style(lC);var lF=lE;eM.$1(e,lF)};eM.$3=function(e){switch(e){case 0:{return'font-style-normal'}case 1:{return'font-style-italic'}default:{return'font-style-normal'}}};eM.$4=function(e){switch(e){case 0:{return'font-weight-normal'}case 1:{return'font-weight-bold'}default:{return'font-weight-normal'}}};eM.$8=function(e){if(!ss.staticEquals(eM.$1$1,null)&&!tab.MiscUtil.isNullOrEmpty(e)){eM.$1$1(e)}};eM.$7=function(){if(!ss.staticEquals(eM.$1$2,null)){eM.$1$2()}};global.tab.FontNotificationUtil=eM;var eN=function(){this.$2='normal';this.$3='normal';this.$1='';this.$0=''};eN.__typeName='tab.FontProperties';global.tab.FontProperties=eN;var eO=function(e){this.$5=null;this.$6=false;this.$4=ss.mkdict(['line-drop',1]);this.$3$1=null;eR.call(this,e)};eO.__typeName='tab.FormatContainerModel';eO.get_formatPaneModel=function(){return Y.get_instance().get_workbook().get_formatPaneModel()};global.tab.FormatContainerModel=eO;var eP=function(e){eR.call(this,e)};eP.__typeName='tab.FormatControlModel';global.tab.FormatControlModel=eP;var eQ=function(){};eQ.__typeName='tab.FormatItemExtensions';eQ.hasPreview=function(e){return e==='compositeContainer'||e==='tabGroup'};global.tab.FormatItemExtensions=eQ;var eR=function(e){this.$2$1=null;gV.call(this,e,new hF('formatItem'.toString()))};eR.__typeName='tab.FormatItemModel';eR.createModel=function(e,ex,lA){switch(ex.typeOfFormatItem){case'formatContainer':{var lB=new eO(e);lB.update(ex,lA);return lB}case'formatControl':{var lC=new eP(e);lC.update(ex,lA);return lC}default:{return null}}};global.tab.FormatItemModel=eR;var eS=function(){};eS.__typeName='tab.FormattingConverters';eS.getCSSBorderStyle=function(e){var ex='solid';switch(e){case'bs-dashed':{ex='dashed';break}case'bs-dotted':{ex='dotted';break}case'bs-double':{ex='double';break}case'bs-groove':{ex='groove';break}case'bs-hidden':{ex='hidden';break}case'bs-inset':{ex='inset';break}case'bs-outset':{ex='outset';break}case'bs-ridge':{ex='ridge';break}case'bs-solid':{ex='solid';break}case'bs-none':{ex='none';break}default:{break}}return ex};eS.makeStyledBoxCssDict=function(e,ex){var lA={};if(ss.isValue(e)){lA=eS.makeBorderStyleDict(e);if(e.hasFill){var lB=bQ.fromColorCode(e.fillColor);lA['background-color']=(ex?lB.toString():lB.toRgb())}}return lA};eS.makeFormatStyleDict=function(e,ex){if(ss.isNullOrUndefined(e)){return{}}var lA={'font-size':e.fontSize+'pt',color:e.color};if(ss.isValue(e.fontName)&&ss.keyExists(eS.$2,e.fontName)){lA['font-family']=eS.$2[e.fontName]}else if(ss.isValue(e.fontName)){var lB=e.fontName.split(',');eS.addDefaultFontForTableau(lB);for(var lC=0;lC<lB.length;lC++){lB[lC]=eS.addQuotationMarks(lB[lC].trim(),false)}lA['font-family']=lB.join(',');eS.$2[e.fontName]=lA['font-family']}if(ss.isValue(ex)){lA.color=ex}if(e.fontStyle==='font-style-italic'){lA['font-style']='italic'}if(e.fontWeight==='font-weight-bold'){lA['font-weight']='bold'}var lD='none';switch(e.textDecoration){case'text-decoration-overline':{lD='overline';break}case'text-decoration-strikethrough':{lD='line-through';break}case'text-decoration-underline':{lD='underline';break}}if(lD!=='none'){lA['text-decoration']=lD}if(ss.isValue(e.wrapMode)){switch(e.wrapMode){case'text-wrap-off':{lA['white-space']='nowrap';break}case'text-wrap-truncate':{lA['overflow-x']='hidden';break}}}return lA};eS.addQuotationMarks=function(e,ex){if(tab.MiscUtil.isNullOrEmpty$3(e)){return(ex?"''":'""')}var lA=e.length-1;if(e.charCodeAt(0)===39&&e.charCodeAt(lA)===39||e.charCodeAt(0)===34&&e.charCodeAt(lA)===34){return e}if(e.indexOf(' ')!==-1){var lB=(ex?"'":'"');e=lB+e+lB}return e};eS.makeBorderStyleDict=function(e){var ex={};if(ss.isValue(e.uw)){ex['border-width']=e.uw+'px'}if(ss.isValue(e.borderColor)){ex['border-color']=e.borderColor}if(ss.isValue(e.uw)){ex['border-style']=eS.getCSSBorderStyle(e.borderStyle)}return ex};eS.getTextBaseline=function(e){var ex='bottom';switch(e){case'v-align-bottom':{ex='bottom';break}case'v-align-top':{ex='top';break}case'v-align-center':{ex='middle';break}default:{break}}return ex};eS.cleanUpFontFamilyStyles=function(e){var ex=e.find('span');for(var lA=0;lA<ex.length;++lA){var lB=ex.eq(lA);var lC=lB.css('font-family');if(!ss.isNullOrEmptyString(lC)){var lD={};var lE=[];lE.push(lC);if(ss.startsWithString(lC,"'")||ss.startsWithString(lC,'"')){lC=lC.substr(1,lC.length-2)}lC=eS.$1(lB,lE,lD,lC,eS.$4,'font-style','fontStyle',false);lC=eS.$1(lB,lE,lD,lC,eS.$5,'font-weight','fontWeight',true);eS.$1(lB,lE,lD,lC,eS.$3,'font-stretch','fontStretch',false);eS.addDefaultFontForTableau(lE);if(lE.length>1){lD['font-family']=lE.join(',');lB.css(lD)}}}};eS.addDefaultFontForTableau=function(e){var ex='tableau';var lA=false;var lB=e.length;for(var lC=0;lC<lB;lC++){var lD=e[lC].trim();for(var lE=0;lE<2;lE++){if(ss.startsWithString(lD,"'")||ss.startsWithString(lD,'"')){lD=lD.substr(1)}}if(ss.compareStrings(lD.substr(0,ex.length),ex,true)===0){lA=true;break}}if(lA){e.push('Arial');e.push('sans-serif')}};eS.$1=function(e,ex,lA,lB,lC,lD,lE,lF){var lG=lB.toLowerCase();for(var lH=0;lH<lC.length;lH++){var lI=lC[lH];if(ss.endsWithString(lG,lI.item1)){lB=lB.substr(0,lG.lastIndexOf(lI.item1)).trim();ex.push("'"+lB+"'");if(!eS.$0(e,lE)){lA[lD]=lI.item2}if(lF){return lB}}}return lB};eS.$0=function(e,ex){return!ss.isNullOrEmptyString(e.prop('style')[ex])};global.tab.FormattingConverters=eS;var eT=function(){};eT.__typeName='tab.FormattingUtil';eT.get_getBrowserStoredFontString=function(){return window.sessionStorage.getItem(eT.fontListStorageKey)};eT.get_hasBrowserStoredFontList=function(){return ss.isValue(eT.get_getBrowserStoredFontString())};eT.$0=function(){var ex=eT.get_getBrowserStoredFontString();if(ss.isNullOrUndefined(ex)){return null}var lA=null;try{lA=JSON.parse(ex)}catch(lB){var e=ss.Exception.wrap(lB);tab.ErrorTrace.report(e)}return lA};eT.compatibleFontNameList=function(){var e=eT.$0();if(ss.isValue(e)){return e}be.get_waitHandler().showAndLock();var ex=eL.createFontFamilyBuilder();ex.addFontList((new lb(new jI.$ctor1(Y.get_instance().get_serverFonts()))).get_fontFamilies());ex.addFontList((new jI).get_fontFamilies());var lA=ex.toFontFamilyProvider();var lB=[];var lC=lA.get_fontFamilies();for(var lD=0;lD<lC.length;lD++){var lE=lC[lD];lB.push(lE.get_fontGroup())}window.sessionStorage.setItem(eT.fontListStorageKey,JSON.stringify(lB));be.get_waitHandler().unlock();be.get_waitHandler().nudge();return lB};global.tab.FormattingUtil=eT;var eU=function(){ss.makeGenericType(bd,[Object,eV]).call(this)};eU.__typeName='tab.GetAlertMeasuresFromSelectionCmd';global.tab.GetAlertMeasuresFromSelectionCmd=eU;var eV=function(e){this.$$c=null;this.$$c=e};eV.__typeName='tab.GetAlertMeasuresFromSelectionCmd$Response';global.tab.GetAlertMeasuresFromSelectionCmd$Response=eV;var eW=function(){ss.makeGenericType(bd,[Object,eX]).call(this)};eW.__typeName='tab.GetButtonConfigDialogCmd';global.tab.GetButtonConfigDialogCmd=eW;var eX=function(e){this.$$c=null;this.$$c=e};eX.__typeName='tab.GetButtonConfigDialogCmd$Response';global.tab.GetButtonConfigDialogCmd$Response=eX;var eY=function(){ss.makeGenericType(bd,[Object,eZ]).call(this)};eY.__typeName='tab.GetDashboardDragDropCmd';global.tab.GetDashboardDragDropCmd=eY;var eZ=function(e){this.$$c=null;this.$$c=e};eZ.__typeName='tab.GetDashboardDragDropCmd$Response';global.tab.GetDashboardDragDropCmd$Response=eZ;var fa=function(){ss.makeGenericType(bd,[Object,fb]).call(this)};fa.__typeName='tab.GetDashboardSizingCmd';global.tab.GetDashboardSizingCmd=fa;var fb=function(e){this.$$c=null;this.$$c=e};fb.__typeName='tab.GetDashboardSizingCmd$Response';global.tab.GetDashboardSizingCmd$Response=fb;var fc=function(){ss.makeGenericType(bd,[Object,fd]).call(this)};fc.__typeName='tab.GetDataAlertInfoMapCmd';global.tab.GetDataAlertInfoMapCmd=fc;var fd=function(e){this.$$c=null;this.$$c=e};fd.__typeName='tab.GetDataAlertInfoMapCmd$Response';global.tab.GetDataAlertInfoMapCmd$Response=fd;var fe=function(){ss.makeGenericType(bd,[Object,ff]).call(this)};fe.__typeName='tab.GetDataSourceDataPresModelCmd';global.tab.GetDataSourceDataPresModelCmd=fe;var ff=function(e){this.$$c=null;this.$$c=e};ff.__typeName='tab.GetDataSourceDataPresModelCmd$Response';global.tab.GetDataSourceDataPresModelCmd$Response=ff;var fg=function(){ss.makeGenericType(bd,[Object,fh]).call(this)};fg.__typeName='tab.GetDropFieldAggregationOptionsCmd';global.tab.GetDropFieldAggregationOptionsCmd=fg;var fh=function(e){this.$$c=null;this.$$c=e};fh.__typeName='tab.GetDropFieldAggregationOptionsCmd$Response';global.tab.GetDropFieldAggregationOptionsCmd$Response=fh;var fi=function(){ss.makeGenericType(bd,[Object,fj]).call(this)};fi.__typeName='tab.GetDSParamsFromPresModelCmd';global.tab.GetDSParamsFromPresModelCmd=fi;var fj=function(e){this.$$c=null;this.$$c=e};fj.__typeName='tab.GetDSParamsFromPresModelCmd$Response';global.tab.GetDSParamsFromPresModelCmd$Response=fj;var fk=function(){ss.makeGenericType(bd,[Object,fl]).call(this)};fk.__typeName='tab.GetFileConnectionFileListCmd';global.tab.GetFileConnectionFileListCmd=fk;var fl=function(e){this.$$c=null;this.$$c=e};fl.__typeName='tab.GetFileConnectionFileListCmd$Response';global.tab.GetFileConnectionFileListCmd$Response=fl;var fm=function(){ss.makeGenericType(bd,[Object,fn]).call(this)};fm.__typeName='tab.GetHasUnusedFilesCmd';global.tab.GetHasUnusedFilesCmd=fm;var fn=function(e){this.$$c=null;this.$$c=e};fn.__typeName='tab.GetHasUnusedFilesCmd$Response';global.tab.GetHasUnusedFilesCmd$Response=fn;var fo=function(){ss.makeGenericType(bd,[Object,fp]).call(this)};fo.__typeName='tab.GetRuntimeDataModelCmd';global.tab.GetRuntimeDataModelCmd=fo;var fp=function(e){this.$$c=null;this.$$c=e};fp.__typeName='tab.GetRuntimeDataModelCmd$Response';global.tab.GetRuntimeDataModelCmd$Response=fp;var fq=function(){ss.makeGenericType(bd,[Object,fr]).call(this)};fq.__typeName='tab.GetTabbedAuthenticationPresModelCmd';global.tab.GetTabbedAuthenticationPresModelCmd=fq;var fr=function(e){this.$$c=null;this.$$c=e};fr.__typeName='tab.GetTabbedAuthenticationPresModelCmd$Response';global.tab.GetTabbedAuthenticationPresModelCmd$Response=fr;var fs=function(){ss.makeGenericType(bd,[Object,ft]).call(this)};fs.__typeName='tab.GetThumbnailCmd';global.tab.GetThumbnailCmd=fs;var ft=function(e){this.$$c=null;this.$$c=e};ft.__typeName='tab.GetThumbnailCmd$Response';global.tab.GetThumbnailCmd$Response=ft;var fu=function(){ss.makeGenericType(bd,[Object,fv]).call(this)};fu.__typeName='tab.GetURLSubstitutionKeywordsCmd';global.tab.GetURLSubstitutionKeywordsCmd=fu;var fv=function(e){this.$$c=null;this.$$c=e};fv.__typeName='tab.GetURLSubstitutionKeywordsCmd$Response';global.tab.GetURLSubstitutionKeywordsCmd$Response=fv;var fw=function(){ss.makeGenericType(bd,[Object,fx]).call(this)};fw.__typeName='tab.GetWebCategoricalColorDialogCmd';global.tab.GetWebCategoricalColorDialogCmd=fw;var fx=function(e){this.$$c=null;this.$$c=e};fx.__typeName='tab.GetWebCategoricalColorDialogCmd$Response';global.tab.GetWebCategoricalColorDialogCmd$Response=fx;var fy=function(){ss.makeGenericType(bd,[Object,fz]).call(this)};fy.__typeName='tab.GetWebQuantitativeColorDialogCmd';global.tab.GetWebQuantitativeColorDialogCmd=fy;var fz=function(e){this.$$c=null;this.$$c=e};fz.__typeName='tab.GetWebQuantitativeColorDialogCmd$Response';global.tab.GetWebQuantitativeColorDialogCmd$Response=fz;var fA=function(){gl.call(this)};fA.__typeName='tab.GlobalKeyboardShortcut';global.tab.GlobalKeyboardShortcut=fA;var fB=function(){};fB.__typeName='tab.GroupFontExtractor';global.tab.GroupFontExtractor=fB;var fC=function(e){eq.call(this,e)};fC.__typeName='tab.GroupModel';global.tab.GroupModel=fC;var fD=function(){ss.makeGenericType(bd,[Object,fE]).call(this)};fD.__typeName='tab.HasUserSpecificActiveSheetCmd';global.tab.HasUserSpecificActiveSheetCmd=fD;var fE=function(e){this.$$c=null;this.$$c=e};fE.__typeName='tab.HasUserSpecificActiveSheetCmd$Response';global.tab.HasUserSpecificActiveSheetCmd$Response=fE;var fF=function(){ss.makeGenericType(bd,[Object,fG]).call(this)};fF.__typeName='tab.HighlightItemsByPatternMatchCmd';global.tab.HighlightItemsByPatternMatchCmd=fF;var fG=function(e){this.$$c=null;this.$$c=e};fG.__typeName='tab.HighlightItemsByPatternMatchCmd$Response';global.tab.HighlightItemsByPatternMatchCmd$Response=fG;var fH=function(e){this.$1=null;this.$3=null;this.$2=null;this.$0();this.$1=e};fH.__typeName='tab.History';fH.createHistory=function(){if(tab.FeatureFlags.isEnabled('PortableSessionsCheckpoint')){return new fH(null)}else{return new he}};global.tab.History=fH;var fI=function(){};fI.__typeName='tab.HistoryManager';fI.setInitialState=function(e){var ex=fI.$1(e,null,'');tab.HistoryUtil.replaceState(window.self,ex.associatedState,null,null)};fI.addToHistory=function(e,ex,lA){var lB=fI.$1(e,ex,lA);tab.HistoryUtil.pushState(window.self,lB.associatedState,null,null);return lB};fI.tailSessionStateIds=function(e){var ex=Math.max(0,fI.$7-e);var lA=[];for(var lB=ex;lB<fI.$7;lB++){var lC=fI.$5.get(lB);if(ss.isNullOrUndefined(lC)){continue}var lD=lC.sessionStateId;if(ss.isNullOrEmptyString(lD)){continue}lA.push(lD)}return lA};fI.$1=function(e,ex,lA){fI.$0();var lB={id:fI.$8,key:'_vql_state_'};var lC={onBack:e,onForward:ex,id:fI.$8,associatedState:lB,sessionStateId:lA};fI.$5.set(lC.id,lC);fI.$8++;fI.$7=fI.$8;return lC};fI.$0=function(){if(fI.$7<fI.$8){for(var e=fI.$7+1;e<=fI.$8;e++){fI.$5.delete(e)}}};fI.$3=function(e){if(ss.isNullOrUndefined(e)){return}var ex=e;if(ss.isNullOrUndefined(ex.state)||ss.isNullOrUndefined(ex.state.key)||ex.state.key!=='_vql_state_'){return}fI.$4(ex.state)};fI.$4=function(e){var ex=e.id<fI.$7;var lA=fI.$5.get(e.id);if(ss.isNullOrUndefined(lA)){return}fI.$2(ex,lA);fI.$7=e.id};fI.$2=function(e,ex){if(e){if(!ss.staticEquals(ex.onBack,null)){ex.onBack()}}else if(!ss.staticEquals(ex.onForward,null)){ex.onForward()}};global.tab.HistoryManager=fI;var fJ=function(){ss.makeGenericType(bd,[Object,fK]).call(this)};fJ.__typeName='tab.HitTestSceneCmd';global.tab.HitTestSceneCmd=fJ;var fK=function(e){this.$$c=null;this.$$c=e};fK.__typeName='tab.HitTestSceneCmd$Response';global.tab.HitTestSceneCmd$Response=fK;var fL=function(){};fL.__typeName='tab.HTMLEscape';global.tab.HTMLEscape=fL;var fM=function(){};fM.__typeName='tab.IBrushingModelInfo';global.tab.IBrushingModelInfo=fM;var fN=function(){};fN.__typeName='tab.ICommandDispatcher';global.tab.ICommandDispatcher=fN;var fO=function(){};fO.__typeName='tab.ICommandModel';global.tab.ICommandModel=fO;var fP=function(){};fP.__typeName='tab.IContinuousRangeModel';global.tab.IContinuousRangeModel=fP;var fQ=function(){};fQ.__typeName='tab.IDataSourceDataNotification';global.tab.IDataSourceDataNotification=fQ;var fR=function(){};fR.__typeName='tab.IDetachableNotificationHandler';global.tab.IDetachableNotificationHandler=fR;var fS=function(){};fS.__typeName='tab.IDrawItemFontExtractor';global.tab.IDrawItemFontExtractor=fS;var fT=function(){};fT.__typeName='tab.IExportImageHelper';global.tab.IExportImageHelper=fT;var fU=function(){};fU.__typeName='tab.IExportPdfHelper';global.tab.IExportPdfHelper=fU;var fV=function(){};fV.__typeName='tab.IHandleNotifications';global.tab.IHandleNotifications=fV;var fW=function(){};fW.__typeName='tab.IHistory';global.tab.IHistory=fW;var fX=function(){};fX.__typeName='tab.IKeyboardShortcut';global.tab.IKeyboardShortcut=fX;var fY=function(){this.$1=0;this.$0=null;this.$1=0;this.$0=[]};fY.__typeName='tab.ImageTileTracker';fY.$0=function(){fY.$2=fY.$2||new fY;return fY.$2};fY.$1=function(){return tab.Logger.lazyGetLogger(fY)};fY.incrementPendingCount=function(){fY.$0().$1++};fY.decrementPendingCount=function(){var e=fY.$0();if(e.$1>0){--e.$1;if(e.$1===0){for(var ex=0;ex<e.$0.length;ex++){var lA=e.$0[ex];try{lA()}catch(lB){var e=ss.Exception.wrap(lB)}}fY.reset()}}else{}};fY.callWhenImagesLoaded=function(e){if(fY.$0().$1===0){try{e()}catch(ex){var e=ss.Exception.wrap(ex)}}else{fY.$0().$0.push(e)}};fY.reset=function(){fY.$2=null};global.tab.ImageTileTracker=fY;var fZ=function(e){this.$1=null;this.$2$1=null;gV.call(this,e,new hF('imageZone'.toString()));this.$1=e.get_zone()};fZ.__typeName='tab.ImageZoneModel';global.tab.ImageZoneModel=fZ;var ga=function(){};ga.__typeName='tab.IModelEventHandler';global.tab.IModelEventHandler=ga;var gb=function(){this.$0=null;this.$0=null};gb.__typeName='tab.IntersectionFontFamilyProviderBuilder';global.tab.IntersectionFontFamilyProviderBuilder=gb;var gc=function(){this.primarySheet=null;this.suppressActivation=null;this.layoutStatus=null;this.cmdResult=null;this.commandName=null};gc.__typeName='tab.InvalidationInfo';global.tab.InvalidationInfo=gc;var gd=function(e){var ex=function(){};ss.registerGenericInterfaceInstance(ex,gd,[e],{get_model:null,addEventBinding:null,addModelChangedHandler:null,createChildModelHolder:null,newDisposableContext:null,removeEventBinding:null,removeModelChangedHandler:null},function(){return[]});return ex};gd.__typeName='tab.IReadOnlyModelHolder$1';ss.initGenericInterface(gd,a,1);global.tab.IReadOnlyModelHolder$1=gd;var ge=function(){};ge.__typeName='tab.IRemoteCommandHandler';global.tab.IRemoteCommandHandler=ge;var gf=function(){};gf.__typeName='tab.ISessionErrorHandler';global.tab.ISessionErrorHandler=gf;var gg=function(){ss.makeGenericType(bd,[Object,gh]).call(this)};gg.__typeName='tab.IsWebZoneUrlValidCmd';global.tab.IsWebZoneUrlValidCmd=gg;var gh=function(e){this.$$c=null;this.$$c=e};gh.__typeName='tab.IsWebZoneUrlValidCmd$Response';global.tab.IsWebZoneUrlValidCmd$Response=gh;var gi=function(){};gi.__typeName='tab.IWaitForCommands';global.tab.IWaitForCommands=gi;var gj=function(e){this.moduleBeingConfigured=null;this.moduleBeingConfigured=e};gj.__typeName='tab.JsModuleConfigurationBuilder';global.tab.JsModuleConfigurationBuilder=gj;var gk=function(e,ex){this.moduleName=null;this.assemblyName=null;this.loadingMethod=null;this.isRawJavaScriptModule=false;this.shouldExportResult=false;this.exportResultName=null;this.waitUntilModuleReadyFunc=null;this.$0=[];this.$1=[];tab.Param.verifyString(e,'moduleName');this.moduleName=e;this.assemblyName=ss.coalesce(ex,e);this.loadingMethod='asynchronous'};gk.__typeName='tab.JsModuleInfo';global.tab.JsModuleInfo=gk;var gl=function(){};gl.__typeName='tab.KeyboardShortcut';global.tab.KeyboardShortcut=gl;var gm=function(){};gm.__typeName='tab.KeyboardShortcutManager';gm.$b=function(){return tab.Log.get$1(gm)};gm.registerShortcut=function(e){if(!tab.FeatureFlags.isEnabled('WebKeyboardShortcutManager')){return}e.get_keyCombos().removeUnsupportedCombos(e.get_additionalOptions().areAllLocalesSupported);if(!e.get_keyCombos().get_hasCombos()){return}if(tsConfig.debugMode){gm.$2(e)}gm.$0(e)};gm.unregisterShortcut=function(e){if(!tab.FeatureFlags.isEnabled('WebKeyboardShortcutManager')){return}if(ss.isNullOrUndefined(e)){return}e.get_element().off(gm.$3(e),gm.$f[e.toString()]);delete gm.$f[e.toString()];var ex=e.get_keyCombos();for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];delete gm.$e[lB.toString()]}};gm.unregisterShortcutCommand=function(e){if(gm.$6(e)){gm.unregisterShortcut(gm.$c[e]);delete gm.$c[e]}};gm.tryUpdateKeyboardShortcut=function(e,ex,lA){var lB=gm.$4(e);if(ss.isValue(lB)){if(lA){gm.$a(e,ex)}else{gm.$d[e]=ex}if(tab.FeatureFlags.isEnabled('WebKeyboardShortcutHintText')&&ss.isNullOrEmptyString(ex.get_description())&&(lA||ss.isValue(lB.get_additionalOptions().commandId))){ex.set_description(lB.get_hintText())}}};gm.findAssociatedShortcut=function(e){if(ss.isNullOrUndefined(e)){return null}return gm.$4(e.get_commandName())||gm.$4(e.get_commandNameWithoutNamespace())};gm.findAssociatedShortcut$1=function(e){return gm.$c[e.cmd]||gm.$c[e.ns+':'+e.cmd]};gm.associateShortcutWithCommand=function(e,ex,lA){if(tsConfig.debugMode){if(ss.isValue(gm.$4(ex.cmd))||_.any(lA,function(lB){return ss.isValue(gm.$4(lB.cmd))})){}}gm.$c[ex.cmd]=e;_.each(lA,function(lB){gm.$c[lB.cmd]=e})};gm.removeCommandAssociation=function(e){delete gm.$c[e.cmd]};gm.findCommandWrapper=function(e){return gm.$d[e.ns+':'+e.cmd]||gm.$d[e.cmd]};gm.isGloballyAllowed=function(e,ex){var lA=$('.tab-glass');var lB=$('#loadingGlassPane');var lC=gm.$8(lA);var lD=gm.$8(lB);var lE=gm.$7($('[role=dialog]'));var lF=gm.isTargetTextInput(e);gn.logKeyboardShortcut(new go(ex,e,null,null,null,null,true,lE,lC,lD,lF));return!lC&&!lD&&!lF&&!lE};gm.isTargetTextInput=function(e){return $(e.target).is('input,textarea,[contenteditable=true]')};gm.$2=function(e){if(ss.keyExists(gm.$f,e.toString())){}var ex=e.get_keyCombos();for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];var lC=lB.toString();if(ss.keyExists(gm.$e,lC)){for(var lD=0;lD<lB.supportedLocales.length;lD++){var lE={$:lB.supportedLocales[lD]};if(_.any(gm.$e[lC],ss.mkdel({supportedLocale:lE},function(lF){return ss.isNullOrUndefined(lF)||ss.referenceEquals(lF,this.supportedLocale.$)}))){}}}}};gm.$0=function(e){var ex=gm.$1(e);gm.$f[e.toString()]=ex;e.get_element().on(gm.$3(e),ex);gm.$9(e);var lA=e.get_keyCombos();for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];var lD={$:lC.toString()};if(!ss.keyExists(gm.$e,lD.$)){gm.$e[lD.$]=lC.supportedLocales}else{if(_.isEmpty(lC.supportedLocales)){var lE=gm.$e[lD.$];lE.push.apply(lE,null)}_.each(lC.supportedLocales,ss.mkdel({comboKey:lD},function(lF){gm.$e[this.comboKey.$].push(lF)}))}}};gm.$9=function(e){var ex=e.get_additionalOptions().commandId;if(ss.isNullOrUndefined(ex)){return}var lA=ex.ns+':'+ex.cmd;if(gm.$6(lA)){}gm.$c[lA]=e};gm.$a=function(e,ex){if(gm.$6(e)){var lA=gm.$c[e];lA.updateCommandWrapper(ex)}};gm.$6=function(e){return ss.keyExists(gm.$c,e)};gm.$4=function(e){return gm.$c[e]};gm.$1=function(e){var ex=function(lA){gm.$5(lA,e)};if(ss.isValue(e.get_additionalOptions().throttleTimeInMs)){ex=_.throttle(ex,ss.unbox(e.get_additionalOptions().throttleTimeInMs))}return function(lA){ex(lA)}};gm.$5=function(e,ex){if(ss.isNullOrUndefined(e)){return}var lA=ex.get_keyCombos().hasValidCombo(e);gn.logKeyboardShortcut(new go(ex,e,tabBootstrap.MetricsController.getTiming(),null,null,lA,false,null,null,null,null));if(lA){ex.onValidKeyCombo(e);if(ex.get_additionalOptions().propagation===1){gm.stopPropagationAndDefault(e)}if(ex.isAllowed(e)){ex.executeShortcut(e);gn.logKeyboardShortcut(new go(ex,e,null,tabBootstrap.MetricsController.getTiming(),true,null,false,null,null,null,null));if(ex.get_additionalOptions().propagation===2){gm.stopPropagationAndDefault(e)}}}};gm.stopPropagationAndDefault=function(e){e.stopPropagation();e.preventDefault()};gm.$3=function(e){return(e.get_additionalOptions().shouldUseKeyUp?'keyup'.toString():'keydown'.toString())};gm.$8=function(e){var ex=$(document.body);var lA=2;for(var lB=0;lB<e.length;++lB){var lC=$(e[lB]);if(!gm.$7(lC)){continue}var lD=Math.abs(lC.width()-ex.width())<=2;var lE=Math.abs(lC.height()-ex.height())<=2;var lF=lD&&lE;if(lF){return true}}return false};gm.$7=function(e){if(ss.isNullOrUndefined(e)||e.length===0){return false}return _.any(e.get(),function(ex){return $(ex).css('display')!=='none'})};global.tab.KeyboardShortcutManager=gm;var gn=function(){};gn.__typeName='tab.KeyboardShortcutTelemetry';gn.logKeyboardShortcut=function(e){if(!tab.FeatureFlags.isEnabled('WebKeyboardShortcutTelemetry')){return}var ex=e.comboName;if(ss.keyExists(gn.$1,ex)){gn.$1[ex]=go.mergeEvents(gn.$1[ex],e)}else{gn.$1[ex]=e;_.delay(function(lA){var lB=gn.$1[lA];if(lB.shouldAllowLogging()){hf.logEvent('KeyboardShortcut',lB.generateTelemetryPairs())}delete gn.$1[lA]},500,ex)}};global.tab.KeyboardShortcutTelemetry=gn;var go=function(e,ex,lA,lB,lC,lD,lE,lF,lG,lH,lI){this.shortcutName=null;this.comboName=null;this.isGlobalShortcut=false;this.isKnownShortcut=false;this.wasBlockedByDialog=false;this.wasBlockedByGlass=false;this.wasBlockedByLoading=false;this.wasBlockedByTextInput=false;this.numExecutions=0;this.event=null;this.$2=null;this.$3=null;this.$1=null;this.event=ex;this.$3=lA;this.$1=lB;this.isKnownShortcut=lD===true;this.wasBlockedByDialog=lF===true;this.wasBlockedByGlass=lG===true;this.wasBlockedByLoading=lH===true;this.wasBlockedByTextInput=lI===true;this.isGlobalShortcut=lE;this.$2=e;if(lC===true){++this.numExecutions}this.$0()};go.__typeName='tab.KeyboardShortcutTelemetryEvent';go.$d=function(e,ex,lA,lB,lC,lD,lE,lF,lG,lH,lI,lJ){this.shortcutName=null;this.comboName=null;this.isGlobalShortcut=false;this.isKnownShortcut=false;this.wasBlockedByDialog=false;this.wasBlockedByGlass=false;this.wasBlockedByLoading=false;this.wasBlockedByTextInput=false;this.numExecutions=0;this.event=null;this.$2=null;this.$3=null;this.$1=null;this.shortcutName=e;this.comboName=ex;this.event=lA;this.numExecutions=lB;this.wasBlockedByDialog=lG;this.isGlobalShortcut=lC;this.$3=lD;this.$1=lE;this.isKnownShortcut=lF;this.wasBlockedByGlass=lH;this.wasBlockedByLoading=lI;this.wasBlockedByTextInput=lJ};go.mergeEvents=function(e,ex){var lA=((e.numExecutions>0)?e:(e.isKnownShortcut?e:ex)).shortcutName;var lB=e.comboName;var lC=e.event||ex.event;var lD=e.isGlobalShortcut||ex.isGlobalShortcut;var lE=e.numExecutions+ex.numExecutions;var lF=e.$3;if(ss.isNullOrUndefined(lF)){lF=ex.$3}var lG=e.$1;if(ss.isNullOrUndefined(lG)){lG=ex.$1}return new go.$d(lA,lB,lC,lE,lD,lF,lG,e.isKnownShortcut||ex.isKnownShortcut,e.wasBlockedByDialog||ex.wasBlockedByDialog,e.wasBlockedByGlass||ex.wasBlockedByGlass,e.wasBlockedByLoading||ex.wasBlockedByLoading,e.wasBlockedByTextInput||ex.wasBlockedByTextInput)};global.tab.KeyboardShortcutTelemetryEvent=go;var gp=function(){};gp.__typeName='tab.KeyCodeNames';gp.$0=function(e,ex){gp.$1[e]=ex;gp.$2[ex]=e};gp.hasName$1=function(e){return ss.keyExists(gp.$1,e)};gp.hasName=function(e){return ss.keyExists(gp.$2,e)};gp.hasKeyCode=function(e){return ss.keyExists(gp.$2,e)};gp.hasKeyCode$1=function(e){return ss.keyExists(gp.$1,e)};gp.findName=function(e){return gp.$1[e]};gp.findKeyCode=function(e){return gp.$2[e]};global.tab.KeyCodeNames=gp;var gq=function(e){this.supportedLocales=null;this.$1$1=null;this.$1$2=0;if(ss.isNullOrEmptyString(e)){return}var ex=function(lG){return e.indexOf(lG.toString()+'+')!==-1||e.indexOf(gp.findName(lG)+'+')!==-1};var lA=function(lG){return e.indexOf(lG+'+')!==-1};var lB=new gs(false,false,false,false,false,false,false,false,false);lB.alt=ex(18);lB.command=ex(91)&&BrowserSupport.BrowserSupport.IsMac();lB.control=ex(17);lB.controlOrCommand=lA('Ctrl_Command');lB.macControl=lA('Mac_Ctrl');lB.shift=ex(16);lB.winControl=lA('Win_Ctrl');lB.windows=ex(91)&&BrowserSupport.BrowserSupport.IsWindows();this.set_modifiers(lB);if(e.indexOf('++')!==-1){this.set_triggerKey(187)}else{var lC=e.split('+');var lD=lC[lC.length-1];var lE={};if(ss.Int32.tryParse(lD,lE)){this.set_triggerKey(lE.$)}else if(gp.hasName(lD)){this.set_triggerKey(gp.findKeyCode(lD))}else{var lF=lD.split('').map(function(lG){return lG.charCodeAt(0)});this.set_triggerKey(lF[0])}}};gq.__typeName='tab.KeyCombo';gq.$ctor3=function(e,ex,lA){this.supportedLocales=null;this.$1$1=null;this.$1$2=0;this.set_modifiers(e);this.set_triggerKey(ex);this.supportedLocales=lA};gq.$ctor4=function(e,ex,lA){gq.$ctor3.call(this,e,ex,lA)};gq.$ctor2=function(e,ex){gq.$ctor4.call(this,new gs(false,false,false,false,false,false,false,false,false),e,ex)};gq.$ctor1=function(e,ex){gq.$ctor3.call(this,new gs(false,false,false,false,false,false,false,false,false),e,ex)};global.tab.KeyCombo=gq;var gr=function(e,ex){this.supportedLocales=null;this.isCurrentLocalAllowed=false;this.$1$1=null;this.$3([e].concat(ex));this.supportedLocales=this.$1();this.isCurrentLocalAllowed=this.$0()};gr.__typeName='tab.KeyCombos';gr.op_Implicit=function(e){return new gr(e,[])};global.tab.KeyCombos=gr;var gs=function(e,ex,lA,lB,lC,lD,lE,lF,lG){this.alt=false;this.command=false;this.control=false;this.controlOrCommand=false;this.macControl=false;this.nonMacControl=false;this.shift=false;this.winControl=false;this.windows=false;this.alt=e;this.command=ex;this.control=lA||lF||lC||lD;this.nonMacControl=lD;this.controlOrCommand=lB;this.macControl=lC;this.shift=lE;this.winControl=lF;this.windows=lG;if(this.controlOrCommand){this.$1()}};gs.__typeName='tab.KeyModifiers';gs.isControlOrCommandPressed=function(e){return(BrowserSupport.BrowserSupport.IsMac()?e.metaKey:e.ctrlKey)};gs.isCommandPressed=function(e){return BrowserSupport.BrowserSupport.IsMac()&&e.metaKey};gs.isWindowsPressed=function(e){return BrowserSupport.BrowserSupport.IsWindows()&&e.metaKey};gs.isMacControlPressed=function(e){return BrowserSupport.BrowserSupport.IsMac()&&e.ctrlKey};gs.isWinControlPressed=function(e){return BrowserSupport.BrowserSupport.IsWindows()&&e.ctrlKey};gs.isNonMacControlPressed=function(e){return!BrowserSupport.BrowserSupport.IsMac()&&e.ctrlKey};global.tab.KeyModifiers=gs;var gt=function(){ss.makeGenericType(bd,[Object,gu]).call(this)};gt.__typeName='tab.LaunchCustomSqlDialogCmd';global.tab.LaunchCustomSqlDialogCmd=gt;var gu=function(e){this.$$c=null;this.$$c=e};gu.__typeName='tab.LaunchCustomSqlDialogCmd$Response';global.tab.LaunchCustomSqlDialogCmd$Response=gu;var gv=function(){ss.makeGenericType(bd,[Object,gw]).call(this)};gv.__typeName='tab.LaunchPermissionsPromptCmd';global.tab.LaunchPermissionsPromptCmd=gv;var gw=function(e){this.$$c=null;this.$$c=e};gw.__typeName='tab.LaunchPermissionsPromptCmd$Response';global.tab.LaunchPermissionsPromptCmd$Response=gw;var gx=function(e,ex){this.$1=null;this.$2$1=null;gV.call(this,e,new hF('layer-encoding['+ex+']'));this.$1=new gU(this)};gx.__typeName='tab.LayerEncodingModel';global.tab.LayerEncodingModel=gx;var gy=function(e,ex){be.call(this,e,ex)};gy.__typeName='tab.LayoutSession';global.tab.LayoutSession=gy;var gz=function(e){this.$1=null;this.parent=null;this.$0=null;this.$0=e;this.$1=[]};gz.__typeName='tab.LayoutTreeItem';global.tab.LayoutTreeItem=gz;var gA=function(e){this.$5=null;this.$4=null;this.$2$1=null;this.rootNodes=null;gV.call(this,e,new hF('dashboardZoneHierarchy'.toString()));this.$5={};this.$4={};this.rootNodes=[]};gA.__typeName='tab.LayoutTreeModel';gA.$0=function(e){var ex={};if(ss.isValue(e)){for(var lA=0;lA<e.length;lA++){var lB=e[lA];ex[lB.zoneId]=new gz(lB)}}return ex};global.tab.LayoutTreeModel=gA;var gB=function(e,ex,lA,lB){this.$3=null;this.$0=null;this.$4=null;this.$1=false;this.$2=false;this.$3=e;this.$0=ex;this.$2=lA;if(ss.isValue(lB)){this.$4=lB}else{this.$4=[]}};gB.__typeName='tab.LegacyCategoricalQuickFilterData';global.tab.LegacyCategoricalQuickFilterData=gB;var gC=function(e,ex){gD.call(this,e,ex)};gC.__typeName='tab.LegacyCategoricalQuickFilterModel';global.tab.LegacyCategoricalQuickFilterModel=gC;var gD=function(e,ex){this.$2$1=null;gV.call(this,e,new hF('filter['+ex.name.join('_')+']'));this.pm=ex};gD.__typeName='tab.LegacyFilterModel';gD.$1=function(e){if(ss.isValue(e)){var ex={t:e.t,v:e.v};tableau.format.isDateTimeWithNonMidnightTime(ex)}return false};gD.isQuantitativeTimestampFilter=function(e,ex,lA){var lB=gD.$1(ex)||gD.$1(lA);if(!lB&&ss.isValue(e)){if(ss.isValue(e.data)){lB=lB||gD.$1(e.data.min)||gD.$1(e.data.max)}if(!lB&&ss.isValue(e.range)){lB=lB||gD.$1(e.range.min)||gD.$1(e.range.max)}}return lB};gD.$0=function(e){return e.t==='t'||e.t==='d'};gD.isQuantitativeDateFilter=function(e,ex,lA){if(ss.isValue(ex)){return gD.$0(ex)}else if(ss.isValue(lA)){return gD.$0(lA)}else if(ss.isValue(e)){if(ss.isValue(e.data)){if(ss.isValue(e.data.min)){return gD.$0(e.data.min)}else if(ss.isValue(e.data.max)){return gD.$0(e.data.max)}}if(ss.isValue(e.range)){if(ss.isValue(e.range.min)){return gD.$0(e.range.min)}else if(ss.isValue(e.range.max)){return gD.$0(e.range.max)}}}return false};gD.isNormalValue=function(e){return ss.isValue(e)&&(ss.isNullOrUndefined(e.s)||ss.isNullOrUndefined(e.s))&&ss.isValue(e.v)};gD.timestampsWithSameDateOrNull=function(e){var ex=null;for(var lA=0;lA<e.length;lA++){var lB=e[lA];if(ss.isNullOrUndefined(lB)||lB.s==='n'||ss.isNullOrUndefined(lB.v)&&lB.t==='t'){continue}if(!gD.isNormalValue(lB)||lB.t!=='t'){return false}var lC=(ss.Nullable$1.ge(lB.v,0)?Math.floor(lB.v):Math.ceil(lB.v));if(ss.isValue(ex)&&lC!==ex){return false}ex=lC}return ss.isValue(ex)};global.tab.LegacyFilterModel=gD;var gE=function(e,ex){gD.call(this,e,ex)};gE.__typeName='tab.LegacyHierarchicalQuickFilterModel';global.tab.LegacyHierarchicalQuickFilterModel=gE;var gF=function(e){this.$2$1=null;gV.call(this,e,new hF('serverRenderedLegend'.toString()))};gF.__typeName='tab.LegacyLegendModel';global.tab.LegacyLegendModel=gF;var gG=function(e,ex){gD.call(this,e,ex)};gG.__typeName='tab.LegacyQuantitativeQuickFilterModel';global.tab.LegacyQuantitativeQuickFilterModel=gG;var gH=function(e){this.$2=null;this.$3=null;this.$2$1=null;gV.call(this,e,new hF('quickFilterDisplay'))};gH.__typeName='tab.LegacyQuickFilterDisplayModel';global.tab.LegacyQuickFilterDisplayModel=gH;var gI=function(e,ex){gD.call(this,e,ex)};gI.__typeName='tab.LegacyRelativeDateQuickFilterModel';global.tab.LegacyRelativeDateQuickFilterModel=gI;var gJ=function(e){this.$4$1=null;eq.call(this,e)};gJ.__typeName='tab.LevelModel';global.tab.LevelModel=gJ;var gK=function(e,ex){this.$1=0;this.$0=0;hV.call(this);if(e<=ex){this.$1=e;this.$0=ex}else{this.$1=ex;this.$0=e}};gK.__typeName='tab.LinearRangeTransform';global.tab.LinearRangeTransform=gK;var gL=function(e,ex,lA,lB){this.$1=0;this.$0=null;this.$3=null;this.$2=false;this.$1=e;this.$0=ex;this.$3=lA;this.$2=lB};gL.__typeName='tab.LocalUbertipInfo';global.tab.LocalUbertipInfo=gL;var gM=function(e,ex){var lA=function(lB){this.$0={};this.$2=new(ss.makeGenericType(i,[ss.makeGenericType(g,[e,ex])]));this.$1=0;this.$1=lB};ss.registerGenericClassInstance(lA,gM,[e,ex],{add:function(lB,lC){var lD=this.$0[lB];if(ss.isValue(lD)){this.delete$1(lB)}if(ss.getKeyCount(this.$0)===this.$1){this.delete$1(this.$2.$3.$0.$0)}lD=new(ss.makeGenericType(h,[ss.makeGenericType(g,[e,ex])]))(new(ss.makeGenericType(g,[e,ex]))(lB,lC));this.$0[lB]=lD;this.$2.$0(lD)},get:function(lB){var lC=this.$0[lB];if(ss.isValue(lC)){this.$2.$1(lC);this.$2.$0(lC);return lC.$0.$1}return ss.getDefaultValue(ex)},has:function(lB){return ss.keyExists(this.$0,lB)},delete$1:function(lB){if(!this.has(lB)){return}var lC=this.$0[lB];delete this.$0[lB];this.$2.$1(lC)},clear:function(){var lB=_.keys(this.$0);for(var lC=0,lD=lB.length;lC<lD;lC++){this.delete$1(lB[lC])}}},function(){return null},function(){return[]});return lA};gM.__typeName='tab.LruCache$2';ss.initGenericClass(gM,a,2);global.tab.LruCache$2=gM;var gN=function(e){this.$2$1=null;gV.call(this,e,new hF('mapboxMapSource'.toString()))};gN.__typeName='tab.MapboxMapSourceModel';global.tab.MapboxMapSourceModel=gN;var gO=function(){};gO.__typeName='tab.MapClientCommands';gO.boundingBoxPan=function(e,ex){var lA=cl.newCommand({ns:'tabdoc',cmd:'bounding-box-pan'},null);var lB={};lB['mapLatLongRect']=ex;lA.commandParams=lB;if(ss.isValue(e)){cl.addVisualIdToCommand(lA.commandParams,e)}jd.executeServerCommand(lA,'afterDelay',null,null)};gO.geographicSearchQuery=function(e,ex,lA,lB,lC){var lD=cl.newCommand({ns:'tabdoc',cmd:'geographic-search-query'},null);var lE={};lD.commandParams=lE;lD.commandParams['geographicSearchSearchString']=ex;lD.commandParams['geographicSearchLocale']=lA;lD.commandParams['geographicSearchMaxResults']=lB.toString();if(ss.isValue(e)){cl.addVisualIdToCommand(lD.commandParams,e)}jd.executeServerCommand(lD,'none',function(lF){lC(lF)},null)};global.tab.MapClientCommands=gO;var gP=function(e){this.$2$1=null;this.$2$2=null;gV.call(this,e,new hF('lightweightMapOptions'.toString()));this.pm={}};gP.__typeName='tab.MapOptionsInfoModel';global.tab.MapOptionsInfoModel=gP;var gQ=function(e){this.$2$1=null;gV.call(this,e,new hF('mapScaleInfo'.toString()))};gQ.__typeName='tab.MapScaleInfoModel';global.tab.MapScaleInfoModel=gQ;var gR=function(e){this.$8=null;this.$6=null;this.$7=null;this.$9=null;this.$3=0;this.$4=0;this.$a=0;this.$5=0;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=false;gV.call(this,e,new hF('mapServer'.toString()));this.$8=new hO(this);this.$6=new gQ(this);this.$7=new gN(this);this.$9=new hX(this);this.set_allowLocalPanAndZoom(false);this.$3=0;this.$4=0;this.$a=0;this.$5=0};gR.__typeName='tab.MapServerModel';global.tab.MapServerModel=gR;var gS=function(){jO.call(this,null,null,null,null,null)};gS.__typeName='tab.MarginDefinition';gS.$ctor1=function(e){jO.call(this,e.margin,e.marginLeft,e.marginRight,e.marginTop,e.marginBottom)};global.tab.MarginDefinition=gS;var gT=function(e){this.$3=[];this.$2=null;this.$2$1=null;gV.call(this,e,new hF('marksCardPresModel'.toString()))};gT.__typeName='tab.MarksCardModel';global.tab.MarksCardModel=gT;var gU=function(e){this.$2=null;this.$3=null;this.$2$1=null;gV.call(this,e,new hF('markSize'.toString()));this.$2=e};gU.__typeName='tab.MarkSizeModel';global.tab.MarkSizeModel=gU;var gV=function(e,ex){this.pm=null;this.presModelKey=null;this.parent=null;this.parent=e;this.presModelKey=ex};gV.__typeName='tab.Model';gV.nonWorldUpdate=function(e){var ex=new dE;try{e({eventHandler:ex})}finally{if(ss.isValue(ex)){ex.dispose()}}};global.tab.Model=gV;var gW=function(e){var ex=function(){this.$1=null;this.$0=new tab.DisposableHolder;this.$1$1=null;this.$1$2=null;this.$1$3=null};ss.registerGenericClassInstance(ex,gW,[e],{$2:function(lA){this.$1$1=ss.delegateCombine(this.$1$1,lA)},$3:function(lA){this.$1$1=ss.delegateRemove(this.$1$1,lA)},$6:function(lA){this.$1$2=ss.delegateCombine(this.$1$2,lA)},$7:function(lA){this.$1$2=ss.delegateRemove(this.$1$2,lA)},$4:function(lA){this.$1$3=ss.delegateCombine(this.$1$3,lA)},$5:function(lA){this.$1$3=ss.delegateRemove(this.$1$3,lA)},get_model:function(){return this.$1},set_model:function(lA){var lB=this.$1;this.$1=lA;if(!ss.referenceEquals(lB,this.$1)){if(ss.isValue(lB)&&!ss.staticEquals(this.$1$2,null)){this.$1$2(lB)}if(ss.isValue(this.$1)&&!ss.staticEquals(this.$1$1,null)){this.$1$1(this.$1)}if(!ss.staticEquals(this.$1$3,null)){this.$1$3()}}},addModelChangedHandler:function(lA){this.$4(lA);if(ss.isValue(this.$1)){lA()}return this},removeModelChangedHandler:function(lA){this.$5(lA)},addEventBinding:function(lA,lB){this.$2(lA);if(ss.isValue(this.$1)){lA(this.$1)}this.$6(lB);return this},removeEventBinding:function(lA,lB){this.$3(lA);this.$7(lB);if(!ss.staticEquals(lB,null)&&ss.isValue(this.$1)){lB(this.$1)}},createChildModelHolder:function(lA){return function(lB){var lC=new(ss.makeGenericType(gW,[lA]));lC.$0.add$1(this.newDisposableContext().addModelChangedHandler(ss.mkdel(this,function(){var lD=null;if(ss.isValue(this.get_model())){lD=lB(this.get_model())}lC.set_model(lD)})));this.$0.add$1(lC);return lC}},dispose:function(){this.set_model(null);this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$0.dispose()},newDisposableContext:function(){return new(ss.makeGenericType(gX,[e]))(this)}},function(){return null},function(){return[ss.IDisposable,ss.makeGenericType(gd,[e])]});return ex};gW.__typeName='tab.ModelHolder$1';ss.initGenericClass(gW,a,1);global.tab.ModelHolder$1=gW;var gX=function(e){var ex=function(lA){this.$0=null;this.$1=null;this.$0=new tab.DisposableHolder;this.$1=lA};ss.registerGenericClassInstance(ex,gX,[e],{addModelChangedHandler:function(lA){this.$1.addModelChangedHandler(lA);this.$0.add(ss.mkdel(this,function(){this.$1.removeModelChangedHandler(lA)}));return this},addEventBinding:function(lA,lB){this.$1.addEventBinding(lA,lB);this.$0.add(ss.mkdel(this,function(){this.$1.removeEventBinding(lA,lB)}));return this},dispose:function(){this.$0.dispose()}},function(){return null},function(){return[ss.IDisposable]});return ex};gX.__typeName='tab.ModelHolderContext$1';ss.initGenericClass(gX,a,1);global.tab.ModelHolderContext$1=gX;var gY=function(){};gY.__typeName='tab.ModelUtils';gY.getPendingZoneContentModel=function(e){if(!hH.get_progressiveLoadEnabled()){return null}var ex=(bT.get_hasInstance()?bT.get():null);if(ss.isNullOrUndefined(ex)||ss.isNullOrUndefined(ex.get_loader())){return null}return ex.get_loader().getPendingZoneContentModel(e)};gY.getViewSession=function(e){return gY.findContentDashboard().getViewSession(e)};gY.getModelsForViz=function(e){return function(ex,lA){var lB=[];if(ss.isValue(ex)){var lC=ex.get_zoneModels();for(var lD=0;lD<lC.length;lD++){var lE=lC[lD];if(ss.isInstanceOfType(lE.get_model(),e)&&ss.referenceEquals(lE.get_worksheetName(),lA.get_worksheetName())){lB.push(lE.get_model())}}}return lB}};gY.getVisualModels=function(e){var ex=gY.findContentDashboard(e);return gY.getVisualModelsFromDashboard(ex)};gY.getVisualModelsFromDashboard=function(e){var ex={};if(ss.isNullOrUndefined(e)){return ex}var lA=e.get_zoneModels();for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];var lD=lC.get_visualModel();if(ss.isValue(lD)&&ss.isValue(lC.get_worksheetName())){ex[lC.get_worksheetName()]=lD}}if(hH.get_progressiveLoadEnabled()){var lE=(bT.get_hasInstance()?bT.get():null);if(ss.isValue(lE)&&ss.isValue(lE.get_loader())){var lF=lE.get_loader().getPendingVisuals();var lG=_.keys(lF);for(var lH=0;lH<lG.length;lH++){var lI=lG[lH];ex[lI]=lF[lI]}}}return ex};gY.getSheetInfoPresModel=function(e,ex){var lA=e.get_workbook();if(ss.isNullOrUndefined(lA)||ss.isNullOrUndefined(lA.get_sheetsInfo())){return null}var lB=lA.get_sheetsInfo();for(var lC=0;lC<lB.length;lC++){var lD=lB[lC];if(ss.referenceEquals(lD.sheet,ex)){return lD}}return null};gY.getVisualModel=function(e,ex){var lA=null;var lB=gY.findContentDashboard(e);if(ss.isNullOrUndefined(lB)){return lA}var lC=lB.get_zoneModels();for(var lD=0;lD<lC.length;lD++){var lE=lC[lD];var lF=lE.get_visualModel();if(ss.isValue(lF)){var lG=lE.get_worksheetName();if(ss.referenceEquals(lG,ex)){lA=lF;break}}}if(hH.get_progressiveLoadEnabled()&&ss.isNullOrUndefined(lA)){var lH=(bT.get_hasInstance()?bT.get():null);if(ss.isValue(lH)&&ss.isValue(lH.get_loader())){lA=lH.get_loader().getPendingVisual(ex)}}return lA};gY.getVisualModelFromVisualId=function(e,ex){if(ss.isNullOrUndefined(ex)){ex=Y.get_instance()}var lA=null;var lB=gY.findContentDashboard(ex);if(ss.isNullOrUndefined(lB)){return lA}var lC=lB.get_zoneModels();for(var lD=0;lD<lC.length;lD++){var lE=lC[lD];var lF=lE.get_visualModel();if(ss.isValue(lF)){if(_.isEqual(lF.get_visualId(),e)){lA=lF;break}}}return lA};gY.getVisualId=function(e){return gY.getVisualModel(Y.get_instance(),e).get_visualId()};gY.getFirstAvailableWebZoneName=function(e){var ex=null;var lA=gY.findContentDashboard(e);if(ss.isNullOrUndefined(lA)){return ex}var lB=lA.get_zoneModels();for(var lC=0;lC<lB.length;lC++){var lD=lB[lC];if(lD.get_zoneType()==='web'){var lE=lD.get_zoneId();ex='frame_'+lE.toString();break}}return ex};gY.isActiveZone=function(e){switch(tsConfig.current_sheet_type){case'dashboard':case'story':{return e===gY.findContentDashboard().get_activeZoneID()}case'worksheet':default:{return true}}};gY.getZoneIdForSheetName=function(e){var ex=gY.findContentDashboard();var lA=ex.get_zoneModels();for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];if(lC.get_zoneType()==='viz'&&ss.referenceEquals(lC.get_worksheetName(),e)){return lC.get_zoneId()}}return-1};gY.hasBorder=function(e){return e.get_borderStyle()!=='bs-none'&&e.get_borderWidth()!==0};gY.createFilterModel=function(e,ex){switch(ex.type){case'Q':{return new gG(e,ex)}case'H':{return new gE(e,ex)}case'C':{return new gC(e,ex)}case'RD':{return new gI(e,ex)}default:{return new gD(e,ex)}}};gY.findMatchingFilterModel=function(e,ex){var lA=ex.get_fieldName();return e.get_filterModels()[lA]};gY.setVisualValidAndUpToDateStateOnModel=function(e,ex,lA){if(ss.isNullOrUndefined(ex)){return}ex.setIsVisualValidAndUpToDate(lA,e.modelUpdateContext)};gY.invalidateVisuals=function(e){if(ss.isNullOrUndefined(e)){return}for(var ex=0;ex<e.length;ex++){var lA=e[ex];var lB=gY.getVisualModel(Y.get_instance(),lA);if(ss.isValue(lB)){kJ.invalidateVisualModel(lB)}}};gY.setVisualValidStateOnPresModel=function(e,ex){if(ss.isNullOrUndefined(ex)){return}e.makeMutablePresModel(ex,false).valid=false};gY.invalidateAllVisualPresModels=function(e){if(Y.get_instance().get_isOffline()){return}var ex=Y.get_instance().get_workbook().get_sheetsInfo();for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];gY.setVisualValidStateOnPresModel(e,gY.getVisualModel(Y.get_instance(),lB.sheet))}};gY.findContentDashboard=function(e){if(ss.isNullOrUndefined(e)){e=Y.get_instance()}return e.get_workbook().findContentDashboard()};gY.findActiveVisual=function(){var e=gY.findContentDashboard();if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.get_zoneModels())){return null}return e.get_activeVisual()};gY.findActiveOrDefaultVisual=function(){var e=gY.findContentDashboard();if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.get_zoneModels())){return null}var ex=e.get_activeVisual();if(ss.isValue(ex)){return ex}var lA=e.get_zoneModels();for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];if(ss.isValue(lC.get_visualModel())){return lC.get_visualModel()}}return null};gY.reValidateVisualModels=function(e){var ex=gY.getVisualModels(Y.get_instance());var lA=_.values(ex);for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];lC.reValidate(e)}};gY.findActivePaneSpecId=function(){var e=gY.findActiveOrDefaultVisual();if(ss.isValue(e)&&ss.isValue(e.get_marksCardModel())){return e.get_marksCardModel().get_activePaneSpecId()}return null};gY.hasAnyImpliedSelection=function(){var e=gY.getVisualModels(Y.get_instance());var ex=_.keys(e);for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];var lC=e[lB];if(!lC.get_impliedSelectionModel().isEmpty){return true}}return false};gY.mergeMapPresModelDelta=function(e,ex){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(ex)){return}var lA=_.keys(e);for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];var lD=ex[lC];if(typeof(lD)==='undefined'){ex[lC]=e[lC]}else if(lD===null){delete ex[lC]}}};gY.isLegacyMenuItemEnabled=function(e){var ex=Y.get_instance().get_appPresModel().toolbarPresModel.legacyMenus;if(ss.isNullOrUndefined(ex)){return false}var lA=_.find(ex,function(lB){return lB.legacyMenuName===e});return ss.isValue(lA)&&_.every(lA.legacyMenuStates,function(lB){return lB!=='grayed'})};global.tab.ModelUtils=gY;var gZ=function(){};gZ.__typeName='tab.ModuleManager';gZ.$1=function(e,ex){return((ex.length===0)?ss.createInstance(e):ss.applyConstructor(e,ex))};gZ.load=function(e){return function(ex){var lA=gZ.load$1(ss.getTypeFullName(e),ex);return lA}};gZ.load$1=function(e,ex){tab.Param.verifyString(e,'uniqueModuleName');gZ.$2();var lA=gZ.$5(e);if(ss.keyExists(gZ.$j,lA.moduleName)){return gZ.$j[lA.moduleName]}var lB=$.Deferred();gZ.$j[lA.moduleName]=lB;gZ.$b(Object).call(null,lB,lA.moduleName);var lC='tab.'+lA.assemblyName+'Factory';lB.always(function(){gZ.$i.moduleLoaded()});gZ.$i.loadRequested();gZ.$7(lA).done([function(){gZ.$a(ex,lA,lC,lB)}]).fail([function(lD){var lE;var lF='Failed to load dependencies for the module: '+lA.moduleName;if(ss.isNullOrUndefined(lD)){lE=new ss.Exception(lF)}else{var lG=new ss.Exception(lD.toString());lE=new ss.Exception(lF,lG)}lB.reject(lE)}]);return lB};gZ.$7=function(e){var ex=$.Deferred();if(!e.get_hasDependencies()){ex.resolve()}else{var lA=_.map(e.get_dependencies(),function(lF){return lF.moduleName});var lB=function(){ex.resolve()};var lC=function(lF){ex.reject(lF)};gZ.loadModulesSequentially(lB,lC,lA)}if(e.get_hasDependenciesOnStylesheets()){var lD=ss.getEnumerator(e.get_stylesheetDependencies());try{while(lD.moveNext()){var lE=lD.current();gZ.loadCss(lE)}}finally{lD.dispose()}}return ex};gZ.$a=function(e,ex,lA,lB){switch(ex.loadingMethod){case'asynchronous':case'synchronous':{gZ.$8(Object).call(null,e,ex,lA,lB);break}case'alreadyLoaded':default:{if(ex.isRawJavaScriptModule){gZ.$c(ex,null,lB)}else{var lC='vql'+ex.assemblyName.toLowerCase();var lD=ss.load(lC);var lE=gZ.$1(ss.getType(lA,lD),e);gZ.$c(ex,lE,lB)}break}}};gZ.loadModulesSequentially=function(e,ex,lA){lA=lA||[];var lB=0;gZ.load$1(lA[lB],[]).done(function(){gZ.$9(lA,e,1)}).fail(function(lC){if(!ss.staticEquals(ex,null)){ex(lC)}})};gZ.register=function(e){return function(ex,lA){var lB='vql'+ex.toLowerCase();gZ.$0(lB,(tsConfig.debugMode?(lB+'.debug'):lB));var lC=new gk(ex,lA);gZ.$g[ss.getTypeFullName(e)]=lC;if(ss.keyExists(gZ.$j,lC.moduleName)){delete gZ.$j[lC.moduleName]}return new gj(lC)}};gZ.registerDependencyModule=function(e,ex){return gZ.registerRawJsModule(ex,e,ex)};gZ.registerTypicalRawJsModule=function(e){return gZ.registerRawJsModule(e,e+'.min',e)};gZ.registerRawJsModule=function(e,ex,lA){gZ.$0(e,(tsConfig.debugMode?lA:ex));var lB=new gk(e,null);gZ.$g[e]=lB;if(ss.keyExists(gZ.$j,lB.moduleName)){delete gZ.$j[lB.moduleName]}return(new gj(lB)).andMarkAsRawJavaScriptModule()};gZ.registerModulesLoadedCallback=function(e){if(ss.staticEquals(e,null)){throw new ss.ArgumentNullException('callback')}gZ.$i.registerModulesLoadedCallback(e)};gZ.isCssLoaded=function(e){if(gZ.$f.has(e)){return true}var ex=document.getElementsByTagName('link');for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];if(ss.referenceEquals(lB.getAttribute('href'),e)&&lB.getAttribute('rel')==='stylesheet'){return true}}return false};gZ.isScriptLoaded=function(e){var ex=document.getElementsByTagName('script');for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];if(ss.referenceEquals(lB.getAttribute('src'),e)){return true}}return false};gZ.loadCss=function(e){if(gZ.$f.has(e)){return}gZ.$f.add(e);var ex=document.createElement('link');ex.setAttribute('type','text/css');ex.setAttribute('rel','stylesheet');ex.setAttribute('href',e);document.getElementsByTagName('head')[0].appendChild(ex)};gZ.$8=function(e){return function(ex,lA,lB,lC){var lD=lA.moduleName.toLowerCase();if(!lA.isRawJavaScriptModule){lD='vql'+lD}var lE=lA.loadingMethod;if(lE==='synchronous'){be.get_waitHandler().showAndLock()}var lF=function(){if(lE==='synchronous'){be.get_waitHandler().unlock();be.get_waitHandler().nudge()}};var lG=gZ.$4();var lH={};lH['d']='MDLOAD';lH['p']=lA.moduleName;requirejs([lD],function(lI){var lJ;if(lA.isRawJavaScriptModule){lJ=lI}else{var lK=ss.load(lD);lJ=gZ.$1(ss.getType(lB,lK),ex)}if(lA.shouldExportResult){if(typeof(window.self[lA.exportResultName])==='function'){throw new ss.Exception('Such function already defined: '+lA.exportResultName)}window.self[lA.exportResultName]=lI}var lL=$.Deferred();lL.done(function(){var lM=gZ.$4();lH['t']=tabBootstrap.MetricsController.getTiming();lH['e']=lM-lG;var lN=new tabBootstrap.MetricsEvent('gen',15,lH);tabBootstrap.MetricsController.logEvent(lN);lC.resolve(lJ)}).fail(function(lM){lC.reject(lM)}).always(function(){lF()});gZ.$c(lA,lJ,lL)},function(lI){lF();gZ.$6(e).call(null,lI,lC)})}};gZ.$c=function(e,ex,lA){if(ss.staticEquals(e.waitUntilModuleReadyFunc,null)){lA.resolve(ex)}else{var lB=e.waitUntilModuleReadyFunc();lB.done([function(){lA.resolve(ex)}]);lB.fail([function(lC){lA.reject(lC)}])}};gZ.$4=function(){var e;try{e=window.performance.now()}catch(ex){e=(new Date).getTime()}return e};gZ.$9=function(e,ex,lA){if(lA>=ss.count(e)){ex();return}gZ.load$1(ss.getItem(e,lA),[]).done(function(){gZ.$9(e,ex,lA+1)})};gZ.$0=function(e,ex){gZ.$h[e]=ex;if(gZ.$k){requirejs.config({map:ss.mkdict(['*',gZ.$h])})}};gZ.$2=function(){if(gZ.$k){return}gZ.$k=true;var e;if(tsConfig.useLocalPaths){e=tableau.util.adjustForLocalPaths(tsConfig.local_static_asset_prefix)}else{e=tsConfig.external_static_asset_prefix}e=e+'/javascripts';requirejs.config({baseUrl:e,map:ss.mkdict(['*',gZ.$h]),waitSeconds:0})};gZ.$5=function(e){var ex=gZ.$g[e];if(ss.isNullOrUndefined(ex)){throw new ss.Exception('Unknown module: '+e)}return ex};gZ.$6=function(e){return function(ex,lA){var lB=gZ.$3(ex);var lC=new ss.Exception(lB);lA.reject(lC)}};gZ.$3=function(e){var ex=e.message;if(ss.isValue(e.requireModules)&&e.requireModules.length>0){var lA=e.requireModules.join(',');ex+='; Modules='+lA}if(!ss.isNullOrEmptyString(e.requireType)){ex+='; RequireType='+e.requireType}return ex};gZ.$b=function(e){return function(ex,lA){ex.fail(function(lB){var lC=lB;delete gZ.$j[lA];gZ.reportException(lC)})}};gZ.reportException=function(e){throw e};global.tab.ModuleManager=gZ;var ha=function(){this.$3=0;this.$2=[]};ha.__typeName='tab.ModuleTracker';global.tab.ModuleTracker=ha;var hb=function(){es.call(this,null);var e={fn:''};this.swapAndCopyPresModel(e)};hb.__typeName='tab.MultipleFieldsModel';global.tab.MultipleFieldsModel=hb;var hc=function(){};hc.__typeName='tab.NoopModelEventsHandler';hc.get_noopContext=function(){return hc.$0.value()};global.tab.NoopModelEventsHandler=hc;var hd=function(e,ex){this.$2=null;this.$1=null;this.$1$1=null;this.set_notificationId(e);this.$1=ex};hd.__typeName='tab.NotificationHandlerLauncher';hd.registerHandler=function(e,ex){var lA=function(){var lB=$.Deferred();lB.resolve(ex());return lB.promise()};hd.$0(e,lA)};hd.registerHandlerFromModule=function(e){return function(ex,lA){var lB=function(){var lC=be.get_waitHandler();lC.addref(true,true);var lD=$.Deferred();gZ.load(e).call(null,[]).done(function(lE){lD.resolve(lA(lE))}).always(function(){lC.release()});return lD.promise()};hd.$0(ex,lB)}};hd.registerHandlerFromJsModule=function(e,ex,lA){var lB=function(){var lC=$.Deferred();gZ.load$1(e,[]).done(function(lD){lC.resolve(lA(lD))});return lC.promise()};hd.$0(ex,lB)};hd.$0=function(e,ex){var lA=new hd(e,ex);Y.get_holder().addEventBinding(function(lB){lB.registerNotificationHandler(e,ss.mkdel(lA,lA.onNotify))},function(lB){lB.unRegisterNotificationHandler(e,ss.mkdel(lA,lA.onNotify))})};global.tab.NotificationHandlerLauncher=hd;var he=function(){};he.__typeName='tab.NullHistory';global.tab.NullHistory=he;var hf=function(){this.$c=null;this.$4=null;this.$7=null;this.$b=null;this.$5='';this.$9='';this.$d=0;this.$e='';this.$f='';this.$g=0;this.$a=null;this.$6=null;this.$8=tab.Logger.getLogger(hf,4)};hf.__typeName='tab.OnlineAnalyticsClient';hf.add_onLogEvent=function(e){hf.$1$1=ss.delegateCombine(hf.$1$1,e)};hf.remove_onLogEvent=function(e){hf.$1$1=ss.delegateRemove(hf.$1$1,e)};hf.get_telemetryEnabled=function(){return tab.FeatureFlags.isEnabled('OnlineAnalyticsPipelineEnabled')&&!tsConfig.is_guest};hf.$0=function(){if(ss.isNullOrUndefined(hf.$1)){gZ.registerRawJsModule('analytics-client','analytics-client.min','analytics-client').andExportResultAs('AnalyticsClient');hf.$1=new hf}return hf.$1};hf.logEvent=function(e,ex){if(hf.get_telemetryEnabled()){hf.$0().$3(e,ss.mkdict(ex))}};global.tab.OnlineAnalyticsClient=hf;var hg=function(){};hg.__typeName='tab.OrderClause';hg.orderFieldFromString=function(e){try{return e}catch(ex){return'unknown'}};hg.isInstanceOfType=function(){return true};global.tab.OrderClause=hg;var hh=function(e,ex,lA,lB){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.set_description(e);this.set_architecture(ex);this.set_family(lA);this.set_version(lB)};hh.__typeName='tab.OSInfo';global.tab.OSInfo=hh;var hi=function(){jO.call(this,null,null,null,null,null)};hi.__typeName='tab.PaddingDefinition';hi.$ctor1=function(e){jO.call(this,e.padding,e.paddingLeft,e.paddingRight,e.paddingTop,e.paddingBottom)};global.tab.PaddingDefinition=hi;var hj=function(e){this.$1=null;this.$2$1=null;gV.call(this,e,new hF('pageModel'.toString()));this.$1=e.get_zone()};hj.__typeName='tab.PageModel';global.tab.PageModel=hj;var hk=function(e){var ex=function(){};ex.isInstanceOfType=function(){return true};ss.registerGenericClassInstance(ex,hk,[e],{},function(){return null},function(){return[]});return ex};hk.__typeName='tab.PageOfItem$1';ss.initGenericClass(hk,a,1);global.tab.PageOfItem$1=hk;var hl=function(){};hl.__typeName='tab.PageServerCommands';hl.changePage=function(e,ex){var lA=hl.$0(e,ex);jd.executeServerCommand(cl.newCommand({ns:'tabdoc',cmd:'change-page'},lA),'immediately')};hl.syncedChangePage=function(e,ex,lA,lB){var lC=hl.$1(ex,lA,lB);var lD=cl.newCommand({ns:'tabsrv',cmd:'synced-change-page-server'},lC);var lE=new bM('immediately',function(lF){},lD);bT.SendCommand(lE)};hl.toggleTrails=function(e){var ex=hl.$2(e);jd.executeServerCommand(cl.newCommand({ns:'tabdoc',cmd:'page-toggle-trails'},ex),'afterDelay')};hl.$0=function(e,ex){var lA={};cl.addVisualIdToCommand(lA,ex);lA['pageNumber']=e;return lA};hl.$1=function(e,ex,lA){var lB={};cl.addVisualIdToCommand(lB,e);lB['zoneId']=ex;lB['pageNumber']=lA;return lB};hl.$2=function(e){var ex={};cl.addVisualIdToCommand(ex,e);return ex};global.tab.PageServerCommands=hl;var hm=function(e){this.$0=null;this.update(e)};hm.__typeName='tab.PaneIdModel';hm.$ctor1=function(e,ex,lA){this.$0=null;this.$0={};this.$0['columnIndex']=e;this.$0['rowIndex']=ex;if(lA!==0){this.$0['pageIndex']=lA}};global.tab.PaneIdModel=hm;var hn=function(){};hn.__typeName='tab.PanZoomCommands';hn.zoomWithAnchorPoint=function(e,ex,lA,lB,lC,lD){var lE=new Object;var lF=kQ.create(lE);lF.set_r(e);lF.set_x(ex.x);lF.set_y(ex.y);var lG={};lG['vizRegionRect']=lE;var lH=tab.PointUtil.toPresModel(ex);lG['zoomAnchorPoint']=lH;lG['zoomFactor']=lA;var lI=gY.getVisualId(lD);cl.addVisualIdToCommand(lG,lI);var lJ=cl.newCommand({ns:'tabsrv',cmd:'pane-anchor-zoom-server'},lG);var lK=function(){jw.fireSheetDataChanged();lC()};var lL=function(lM){return tab.RuntimeWebModule.proxy.localZoomFactorCommand(lM.get_VM(),lM.get_initialStore(),lM.get_finalStore(),lH.x,lH.y,lA)};hn.$1(lJ,lL,lB,lK,null,lD)};hn.$3=function(e,ex,lA,lB,lC,lD,lE){if(!tsConfig.allow_filter){return}var lF={};var lG={};lG.x=e['x'];lG.y=e['y'];lG.x=Math.round(lG.x);lG.y=Math.round(lG.y);if(ss.isValue(e['h'])&&ss.isValue(e['w'])){lG.h=e['h'];lG.w=e['w']}lF['dragRect']=lG;lF['zoomIn']=lA;lF['focus']=false;lF['zoomFactor']=lC;if(ss.isValue(ex)){ex=hn.$2(ex);var lH=tab.PointUtil.toPresModel(ex);lF['paneResolverLocation']=lH}var lI=gY.getVisualId(lE);cl.addVisualIdToCommand(lF,lI);var lJ=cl.newCommand({ns:'tabdoc',cmd:'pane-zoom'},lF);var lK=function(lM){if(ss.isValue(lB)){lB.setDeferLayoutUpdates(false)}jw.fireSheetDataChanged()};var lL=function(lM){return tab.RuntimeWebModule.proxy.localZoomCommand(lM.get_VM(),lM.get_initialStore(),lM.get_finalStore(),lG.x,lG.y,lG.w,lG.h,lA)};hn.$1(lJ,lL,lD,lK,null,lE)};hn.pan=function(e,ex,lA,lB,lC,lD){if(!tsConfig.allow_filter){return}var lE={};lE['r']=e;lE['panLocation']=tab.PointUtil.toPresModel(hn.$2(ex));lE['panAmount']=tab.PointUtil.toPresModel(hn.$2(lA));var lF=gY.getVisualId(lD);cl.addVisualIdToCommand(lE,lF);var lG=cl.newCommand({ns:'tabsrv',cmd:'pane-pan-server'},lE);var lH=function(){jw.fireSheetDataChanged()};var lI=function(lK){lC()};var lJ=function(lK){var lL=hn.$2(lA);return tab.RuntimeWebModule.proxy.localPanCommand(lK.get_VM(),lK.get_initialStore(),lK.get_finalStore(),lL.x,lL.y)};hn.$1(lG,lJ,lB,lH,lI,lD)};hn.$1=function(e,ex,lA,lB,lC,lD){var lE=gY.getVisualModel(Y.get_instance(),lD);var lF=lE.shouldDoLocalCommand();var lG=lE.get_runtimeReady();var lH=function(lK){hn.$0(lK,lE,ex);lA()};var lI=tabBootstrap.MetricsController.createContext('RTLPRC'.toString(),15,null);var lJ=new bM('none',function(lK){gY.setVisualValidAndUpToDateStateOnModel(lK,lE,false);if(lF&&lG){lH(lK);lI.dispose();iE.logVizUsage$1(e.commandName,lI.elapsedMS())}},e,lB,lC);bT.SendCommand(lJ);if(lF&&!lG){lH(null)}};hn.$2=function(e){var ex=e;if(ss.isValue(e)){ex={x:Math.round(e.x),y:Math.round(e.y)}}return ex};hn.zoomDoubleClick=function(e,ex,lA,lB,lC,lD){lA.set_isZoomin(ex);hn.$3(e,e,ex,lA,lB,lC,lD)};hn.zoomIn=function(e,ex,lA,lB,lC){hn.$3(e,ex,true,null,lA,lB,lC)};hn.zoomOut=function(e,ex,lA,lB){hn.$3(e,e,false,null,ex,lA,lB)};hn.requestRestoreFixedAxes=function(e){if(!tsConfig.allow_filter){return}var ex=function(lC){be.fireStateChanged(lC)};var lA={};cl.addVisualIdToCommand(lA,e);var lB=cl.newCommand({ns:'tabsrv',cmd:'restore-fixed-axes'},lA);bT.SendCommand(new ib(lB,'immediately',ex,function(){}))};hn.$0=function(e,ex,lA){ex.get_runtimeHandles().done(function(lB){lA(lB).done(function(lC){ex.updateRuntimeHandles(new tab.RuntimeHandles(lB.get_VM(),lB.get_initialStore(),lC));if(ss.isValue(e)){var lD=e.makeMutablePresModel(ex.get_sceneModel(),false);lD.runtimeFinalDatastoreLocal=lC.handleValue}})})};global.tab.PanZoomCommands=hn;var ho=function(e){this.$1=null;this.$2$1=null;gV.call(this,e,new hF('parameterControl'.toString()))};ho.__typeName='tab.ParameterCtrlModel';global.tab.ParameterCtrlModel=ho;var hp=function(){};hp.__typeName='tab.ParameterServerCommands';hp.setParameterValue=function(e,ex,lA){hp.setParameterValue$1(e,ex,lA,null,null)};hp.setParameterValue$1=function(e,ex,lA,lB,lC){var lD=hp.$0(e,ex,ss.coalesce(lA,false));var lE=cl.newCommand({ns:'tabdoc',cmd:'set-parameter-value'},lD);jd.executeServerCommand(lE,'immediately',lB,lC)};hp.$0=function(e,ex,lA){var lB={};lB['globalFieldName']=e;lB['valueString']=ex;lB['useUsLocale']=lA;return lB};global.tab.ParameterServerCommands=hp;var hq=function(e){this.$3$1=null;kq.call(this,e,new hF('percentTotalTableCalcPresModel'.toString()))};hq.__typeName='tab.PercentTotalTableCalcModel';global.tab.PercentTotalTableCalcModel=hq;var hr=function(){ss.makeGenericType(kV,[Object,hs]).call(this)};hr.__typeName='tab.PerformTabbedAuthenticationCmd';hr.get_commandName=function(){return'perform-tabbed-authentication'};global.tab.PerformTabbedAuthenticationCmd=hr;var hs=function(e){this.$$c=null;this.$$c=e};hs.__typeName='tab.PerformTabbedAuthenticationCmd$Response';global.tab.PerformTabbedAuthenticationCmd$Response=hs;var ht=function(){hr.call(this)};ht.__typeName='tab.PerformTabbedAuthenticationCommand';global.tab.PerformTabbedAuthenticationCommand=ht;var hu=function(){};hu.__typeName='tab.PermissionManager';hu.buildCommandPermission=function(){var e=[];if(tsConfig.allow_filter){e.push(11);e.push(12);e.push(10);e.push(2);e.push(13);e.push(4);e.push(5);e.push(6)}if(tsConfig.allow_select){e.push(1);e.push(9);e.push(23)}if(tsConfig.allow_sheetlink){e.push(8)}if(tsConfig.allow_view_underlying||tsConfig.allow_summary){e.push(7)}if(tsConfig.is_authoring){e.push(15);e.push(17);e.push(18);e.push(19);e.push(20);e.push(16);if(!tsConfig.is_mobile){e.push(21)}if(tab.FeatureFlags.isEnabled('ReferenceLineNonModal')){e.push(22)}}return new ce(e)};hu.filterCommands=function(e,ex){for(var lA=e.length-1;lA>=0;lA--){if(!ex.test(e[lA])){ss.removeAt(e,lA)}}};global.tab.PermissionManager=hu;var hv=function(e,ex){this.$1=null;gV.call(this,e,new hF(ex.toString()))};hv.__typeName='tab.PillModel';global.tab.PillModel=hv;var hw=function(){ss.makeGenericType(bd,[Object,hx]).call(this)};hw.__typeName='tab.PingSessionCmd';global.tab.PingSessionCmd=hw;var hx=function(e){this.$$c=null;this.$$c=e};hx.__typeName='tab.PingSessionCmd$Response';global.tab.PingSessionCmd$Response=hx;var hy=function(){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.$1$6=null;this.$1$7=null;this.$1$8=null;this.$1$9=null};hy.__typeName='tab.PlatformInfo';hy.$1=function(){if(ss.isNullOrUndefined(hy.$4)){gZ.registerRawJsModule('platform','platform.min','platform').andExportResultAs('Platform');hy.$4=gZ.load$1('platform',[])}return hy.$4};hy.getInfo=function(){return hy.$3||(hy.$3=hy.$0())};hy.$0=function(){var e=$.Deferred();hy.$1().then(function(){var ex=new hy;ex.set_description(platform.description);ex.set_layout(platform.layout);ex.set_manufacturer(platform.manufacturer);ex.set_name(platform.name);ex.set_prerelease(platform.prerelease);ex.set_product(platform.product);ex.set_userAgent(platform.ua);ex.set_version(platform.version);var lA=platform.os.architecture;var lB=new hh(platform.os.toString(),(ss.isValue(lA)?lA.toString():''),platform.os.family,platform.os.version);ex.set_OS(lB);e.resolve(ex)},function(){e.reject()});return e};global.tab.PlatformInfo=hy;var hz=function(){};hz.__typeName='tab.PluginContractModules';global.tab.PluginContractModules=hz;var hA=function(e,ex,lA,lB){this.$4=null;this.$2=null;this.$3=null;this.$5=null;this.$6=null;this.$1$1=null;this.$1$2=null;this.$4=e;this.set_notificationId(ex);this.$2=lA;this.$6=lB};hA.__typeName='tab.PluginDialogNotificationHandler';global.tab.PluginDialogNotificationHandler=hA;var hB=function(){this.$0=new tab.DisposableHolder};hB.__typeName='tab.PluginPresentationLayer';hB.get_instance=function(){hB.$0=hB.$0||new hB;return hB.$0};hB.set_instance=function(e){hB.$0=e};global.tab.PluginPresentationLayer=hB;var hC=function(){};hC.__typeName='tab.PluginTelemetry';hC.get_instance=function(){hC.$0=hC.$0||new hC;return hC.$0};hC.set_instance=function(e){hC.$0=e};global.tab.PluginTelemetry=hC;var hD=function(){};hD.__typeName='tab.PresentationModel';hD.commandResultByName=function(e,ex){var lA=ch.buildQualifiedCommandName(ex.commandNamespace,ex.commandName);var lB=e['vqlCmdResponse'.toString()];var lC=lB.cmdResultList;for(var lD=0;lD<lC.length;lD++){var lE=lC[lD];if(ss.referenceEquals(lE.commandName,lA)){return lE.commandReturn}}return null};hD.fromCommand=function(e,ex){var lA=hD.commandResultByName(e,ex);if(!ex.preserveRootResult&&ss.isValue(lA)&&ss.getKeyCount(lA)===1&&!ss.keyExists(lA,'commandRedirectType'.toString())){var lB=new ss.ObjectEnumerator(lA);try{while(lB.moveNext()){var lC=lB.current();return lC.value}}finally{lB.dispose()}}else{return lA}return null};hD.getConnectionAttemptInfo=function(e){var ex=e['vqlCmdResponse'.toString()];if(ss.isValue(ex.layoutStatus)){var lA=ex.layoutStatus;if(ss.isValue(lA.connectionAttemptInfo)&&lA.connectionAttemptInfo.dataSourceConnectionAttemptInfos.length>0){return lA.connectionAttemptInfo}}return null};hD.ensurePath=function(e,ex,lA){var lB=ex;var lC=e;var lD;var lE;var lF=lA.get_pathList();for(var lG=0,lH=lF.length;lG<lH;lG++){var lI=lF[lG];var lJ=lI.name;lD=lB[lJ];lE=(ss.isValue(lC)?lC[lJ]:null);if(!ss.isValue(lD)){var lK=lG===lH-1;var lL=null;if(lI.type===1&&ss.isValue(lE)){var lM=lE;var lN=[];for(var lO=0;lO<lM.length;lO++){lN[lO]=tab.MiscUtil.cloneObject(lM[lO])}lL=lN}else if(!lK&&ss.isValue(lE)){lL=hD.cloneObjWithScalarsOnly(lE)}else if(lI.type===1){lL=[]}else{lL=new Object}lB[lJ]=lL}lB=lB[lJ];lC=lE}return lB};hD.insertAtPath=function(e,ex,lA,lB){hD.ensurePath(e,ex,lA);hD.$0(ex,lA,lB)};hD.cloneObjWithScalarsOnly=function(e){if(!_.isObject(e)){return e}var ex=new Object;var lA=e;var lB=Object.keys(lA);for(var lC=0;lC<lB.length;lC++){var lD=lB[lC];var lE=lA[lD];if(!_.isObject(lE)){ex[lD]=lE}}return ex};hD.$0=function(e,ex,lA){if(ex.get_pathList().length===0){var lB=lA;var lC=new ss.ObjectEnumerator(lB);try{while(lC.moveNext()){var lD=lC.current();e[lD.key]=lD.value}}finally{lC.dispose()}}else{var lE,lF;var lG=e;var lH=ex.get_pathList();for(lE=0,lF=lH.length;lE<lF-1;lE++){lG=lG[lH[lE].name]}lG[lH[lF-1].name]=lA}};global.tab.PresentationModel=hD;var hE=function(){this.$1=null;this.$0=[]};hE.__typeName='tab.PresModelPath';global.tab.PresModelPath=hE;var hF=function(e,ex){this.name=null;this.type=0;this.name=e;this.type=(ss.isValue(ex)?ex:0)};hF.__typeName='tab.PresModelPathItem';global.tab.PresModelPathItem=hF;var hG=function(){};hG.__typeName='tab.PresModelPathItemType';global.tab.PresModelPathItemType=hG;var hH=function(){this.$j=null;this.$p=null;this.$m=null;this.$o=null;this.$k=null;this.$i=false;this.$q=null;this.$l=null;this.$r={};this.$n=null;this.$1$1=null;this.$1$2=null};hH.__typeName='tab.ProgressiveLoader';hH.get_progressiveLoadEnabled=function(){return!tsConfig.is_authoring&&!tsConfig.isPublic};hH.cloneZone=function(e){if(ss.isNullOrUndefined(e)){return e}var ex=e.presModelHolder;e.presModelHolder=null;var lA=tab.MiscUtil.cloneObject(e);lA.presModelHolder=ex;e.presModelHolder=ex;return lA};hH.removeZoneContent=function(e){if(ss.isValue(e)){var ex=e;delete ex['presModelHolder']}return e};hH.getZoneRoot=function(e){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.workbookPresModel)||ss.isNullOrUndefined(e.workbookPresModel.dashboardPresModel)){return null}var ex=e.workbookPresModel.dashboardPresModel;if(ex.isStory){var lA=ex.zones;ex=null;var lB=_.keys(lA);for(var lC=0;lC<lB.length;lC++){var lD=lB[lC];var lE=lA[lD];if(ss.isValue(lE.zoneCommon)&&lE.zoneCommon.zoneType!=='flipboard'){continue}var lF=ly.getContent(lE,'flipboard');if(ss.isNullOrUndefined(lF)||ss.isNullOrUndefined(lF.storyPoints)){return null}var lG=lF.storyPoints[lF.activeStoryPointId.toString()];if(ss.isNullOrUndefined(lG)){return null}ex=lG.dashboardPresModel;break}}return ex};hH.$0=function(e){var ex={};if(ss.isValue(e)&&ss.isValue(e.zones)){var lA=_.values(e.zones);for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];if(ss.isValue(lC)&&ss.isValue(lC.zoneCommon)){ex[lC.zoneId]=lC.zoneCommon.zoneType}}}return ex};hH.$4=function(e){if(ss.isNullOrUndefined(e)){return false}var ex=e.workbookPresModel;if(ss.isNullOrUndefined(ex)){return false}var lA=ex.dashboardPresModel;if(ss.isNullOrUndefined(lA)){return false}var lB=lA.zones;if(ss.isNullOrUndefined(lB)){return false}return true};hH.$2=function(){if(ss.isValue(hH.$8)){return}hH.$8={};hH.$8['flipboard-nav']=1;hH.$8['flipboard']=1;hH.$8['viz']=2;hH.$8['color']=3;hH.$8['shape']=3;hH.$8['size']=3;hH.$8['map']=3;hH.$8['filter']=4;hH.$8['highlighter']=4;hH.$8['paramctrl']=4;hH.$8['current-page']=4;hH.$8['web']=5;hH.$8['bitmap']=5;hH.$8['dashboard-object']=5;hH.$6={};hH.$6[1]={item1:-1,item2:1};hH.$6[2]={item1:1,item2:0.33};hH.$6[3]={item1:3,item2:0.33};hH.$6[4]={item1:3,item2:0.33};hH.$6[5]={item1:-1,item2:1};hH.$6[6]={item1:-1,item2:1}};hH.$3=function(e){switch(e){case'color':case'size':case'shape':case'filter':{return true}}return false};hH.$1=function(e,ex){if(ss.isNullOrUndefined(e)){return ex}return hD.cloneObjWithScalarsOnly(e)};global.tab.ProgressiveLoader=hH;var hI=function(){};hI.__typeName='tab.PropagationType';global.tab.PropagationType=hI;var hJ=function(e,ex){this.$2$1=null;gV.call(this,e,new hF(ex))};hJ.__typeName='tab.QuantitativeColorLegendModel';global.tab.QuantitativeColorLegendModel=hJ;var hK=function(e,ex,lA,lB,lC,lD){this.$5=null;this.$2=null;this.$1=null;this.$0=null;this.$4=null;this.$3=null;this.$5=e;this.$2=ex;this.$1=lA;this.$0=lB;this.$4=lC;this.$3=lD};hK.__typeName='tab.QuantitativeFilterData';global.tab.QuantitativeFilterData=hK;var hL=function(){};hL.__typeName='tab.QuickFilterDateFormatUtil';hL.$0=function(e){return e==='trunc-day'||e==='trunc-week'||e==='trunc-month'||e==='trunc-qtr'||e==='trunc-year'};hL.getDateTimeFormatMode=function(e,ex,lA,lB){if(ss.isNullOrUndefined(lA)||ss.isNullOrUndefined(lA.isAutoFormat)||!lA.isAutoFormat){return 0}if(hL.$0(ex)){return 0}if(hL.isPureTime(e,ex)){return 1}if(lB===2){return 2}for(var lC=0;lC<e.length;lC++){var lD=e[lC];if(ss.isNullOrUndefined(lD)||!ss.isValue(lD.v)){continue}var lE={t:lD.t,v:ss.unbox(lD.v)};if(tableau.format.isDateTimeWithNonMidnightTime(lE)){return 2}}return 0};hL.isPureTime=function(e,ex){var lA=gD.timestampsWithSameDateOrNull(e);return lA&&!hL.$0(ex)};global.tab.QuickFilterDateFormatUtil=hL;var hM=function(e){this.$2$1=null;this.$2$2=null;this.$2$3=null;gV.call(this,e,new hF('quickFilterDisplay'.toString()));this.set_quickFilterType('unknown')};hM.__typeName='tab.QuickFilterDisplayModel';hM.supportsQuickFilterType=function(e){if(e.quickFilter.quickFilterType==='categorical'){var ex=e.quickFilter;switch(ex.categoricalMode){case'check-list':case'radio-list':{return true}case'check-dropdown':case'dropdown':{return tab.FeatureParamsLookup.getBool(40)}case'slider':case'pattern':case'type-in-list':default:{return false}}}return false};global.tab.QuickFilterDisplayModel=hM;var hN=function(e,ex){gV.call(this,e,ex)};hN.__typeName='tab.QuickFilterModel';global.tab.QuickFilterModel=hN;var hO=function(e){gV.call(this,e,new hF('radialSelectionDistanceInfo'.toString()))};hO.__typeName='tab.RadialSelectionDistanceInfoModel';global.tab.RadialSelectionDistanceInfoModel=hO;var hP=function(){ss.makeGenericType(kV,[Object,hQ]).call(this)};hP.__typeName='tab.RaiseConnectionsSucceededNotificationCmd';hP.get_commandName=function(){return'raise-connections-succeeded-notification'};global.tab.RaiseConnectionsSucceededNotificationCmd=hP;var hQ=function(e){this.$$c=null;this.$$c=e};hQ.__typeName='tab.RaiseConnectionsSucceededNotificationCmd$Response';global.tab.RaiseConnectionsSucceededNotificationCmd$Response=hQ;var hR=function(){hP.call(this)};hR.__typeName='tab.RaiseConnectionsSucceededNotificationCommand';global.tab.RaiseConnectionsSucceededNotificationCommand=hR;var hS=function(){ss.makeGenericType(kV,[Object,hT]).call(this)};hS.__typeName='tab.RaiseDialogClosedNotificationCmd';hS.get_commandName=function(){return'raise-dialog-closed-notification'};global.tab.RaiseDialogClosedNotificationCmd=hS;var hT=function(e){this.$$c=null;this.$$c=e};hT.__typeName='tab.RaiseDialogClosedNotificationCmd$Response';global.tab.RaiseDialogClosedNotificationCmd$Response=hT;var hU=function(){hS.call(this)};hU.__typeName='tab.RaiseDialogClosedNotificationCommand';global.tab.RaiseDialogClosedNotificationCommand=hU;var hV=function(){};hV.__typeName='tab.RangeTransform';global.tab.RangeTransform=hV;var hW=function(e){this.$3$1=null;kq.call(this,e,new hF('rankTableCalcPresModel'.toString()))};hW.__typeName='tab.RankTableCalcModel';global.tab.RankTableCalcModel=hW;var hX=function(e){gV.call(this,e,new hF('rasterMapSource'.toString()))};hX.__typeName='tab.RasterMapSourceModel';global.tab.RasterMapSourceModel=hX;var hY=function(e,ex,lA,lB,lC){this.$4=null;this.$3=null;this.$1=null;this.$2=false;this.$0=null;this.$5={};this.$1$1=0;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.$1$6=0;this.$1$7=0;this.set_lineWidth(0);this.set_lineColor(bQ.fromArgbInt(0));this.set_linePattern('none');this.set_id(e);this.$0=lB;this.set_scope(lA);this.$2=ex;this.$4=new p(this.$2,lC)};hY.__typeName='tab.ReferenceLineElement';hY.$ctor2=function(e,ex,lA,lB,lC,lD,lE,lF,lG,lH){hY.call(this,e,ex,lA,lD,lE);this.set_lineWidth(lB.LineWidth[lC]);this.set_linePattern(tab.EnumConversions.linePatternFromInt(lB.LinePattern[lC]));this.set_lineColor(bQ.fromArgbInt(lB.LineColor[lC]));this.set_lineJoin(tab.EnumConversions.lineJoinFromInt(lB.LineJoin[lC]));this.set_lineCap(tab.EnumConversions.lineCapFromInt(lB.LineCap[lC]));if(ss.isValue(lF)&&lF.text_run.length>0){this.$3=new q(lH,lF,lG,bQ.fromArgbInt(lB.LabelBackgroundColor[lC]))}};hY.$ctor1=function(e,ex,lA,lB,lC,lD,lE,lF){hY.call(this,e,ex,lA,lB,lC);if(lD.length>0){this.$1=new r(lE,lF,lD)}};global.tab.ReferenceLineElement=hY;var hZ=function(e,ex){this.$4={};this.$3={};this.$5={};gV.call(this,e,new hF('ReferenceLines'));if(!ss.isValue(ex)){return}var lA={};var lB={};var lC=ss.getEnumerator(Object.keys(ex));try{while(lC.moveNext()){var lD=lC.current();if(!ss.keyExists(lA,lD)){lA[lD]=[]}if(!ss.keyExists(lB,lD)){lB[lD]=[]}this.$1(ex[lD],lA[lD],lB[lD])}}finally{lC.dispose()}this.$5=hZ.$0(lA);this.$4=this.$2(lA);this.$3=this.$2(lB)};hZ.__typeName='tab.ReferenceLinesModel';hZ.$0=function(e){var ex={};var lA=new ss.ObjectEnumerator(e);try{while(lA.moveNext()){var lB=lA.current();for(var lC=0;lC<lB.value.length;lC++){var lD=lB.value[lC];var lE=lD.item2.get_id();if(!ss.keyExists(ex,lE)){ex[lE]=[]}ex[lE].push(lD.item2)}}}finally{lA.dispose()}return ex};global.tab.ReferenceLinesModel=hZ;var ia=function(e){this.$3$1=null;es.call(this,e)};ia.__typeName='tab.RelationalTableModel';global.tab.RelationalTableModel=ia;var ib=function(e,ex,lA,lB){bM.call(this,ex,null,e,lA,lB)};ib.__typeName='tab.RemoteClientCommand';ib.create=function(e,ex,lA,lB){return new ib(e,ex,lA,lB)};global.tab.RemoteClientCommand=ib;var ic=function(){ss.makeGenericType(bd,[Object,id]).call(this)};ic.__typeName='tab.ReplaceFileConnectionFromFileUploadCmd';global.tab.ReplaceFileConnectionFromFileUploadCmd=ic;var id=function(e){this.$$c=null;this.$$c=e};id.__typeName='tab.ReplaceFileConnectionFromFileUploadCmd$Response';global.tab.ReplaceFileConnectionFromFileUploadCmd$Response=id;var ie=function(e){this.$2=null;this.$1=null;this.$0=null;var ex=e.split('/');this.$2=ex[0].replace(new RegExp('^ds:'),'');this.$1=ex[1];if(ex.length>2){if(ex.length===3){throw new ss.Exception("new RepoPathObject() encountered repo path'"+e+"' with a badly formed customized view")}this.$0=ex[2]+'/'+ex[3]}else{this.$0=''}};ie.__typeName='tab.RepoPathObject';global.tab.RepoPathObject=ie;var ig=function(){ss.makeGenericType(bd,[Object,ih]).call(this)};ig.__typeName='tab.ResetFieldCaptionCmd';global.tab.ResetFieldCaptionCmd=ig;var ih=function(e){this.$$c=null;this.$$c=e};ih.__typeName='tab.ResetFieldCaptionCmd$Response';global.tab.ResetFieldCaptionCmd$Response=ih;var ii=function(){ss.makeGenericType(kV,[Object,ij]).call(this)};ii.__typeName='tab.ResetFieldsCaptionCheckCmd';ii.get_commandName=function(){return'reset-fields-caption-check'};global.tab.ResetFieldsCaptionCheckCmd=ii;var ij=function(e){this.$$c=null;this.$$c=e};ij.__typeName='tab.ResetFieldsCaptionCheckCmd$Response';global.tab.ResetFieldsCaptionCheckCmd$Response=ij;var ik=function(){ss.makeGenericType(bd,[Object,il]).call(this);this.set_uiBlocking('immediately')};ik.__typeName='tab.ResizeAxisRegionCmd';global.tab.ResizeAxisRegionCmd=ik;var il=function(e){this.$$c=null;this.$$c=e};il.__typeName='tab.ResizeAxisRegionCmd$Response';global.tab.ResizeAxisRegionCmd$Response=il;var im=function(){ss.makeGenericType(bd,[Object,io]).call(this);this.set_uiBlocking('immediately')};im.__typeName='tab.ResizeCellWebCmd';global.tab.ResizeCellWebCmd=im;var io=function(e){this.$$c=null;this.$$c=e};io.__typeName='tab.ResizeCellWebCmd$Response';global.tab.ResizeCellWebCmd$Response=io;var ip=function(e){gV.call(this,e,new hF('resizeEntity'.toString()))};ip.__typeName='tab.ResizeEntityModel';global.tab.ResizeEntityModel=ip;var iq=function(){ss.makeGenericType(bd,[Object,ir]).call(this);this.set_uiBlocking('immediately')};iq.__typeName='tab.ResizeHeaderRegionCmd';global.tab.ResizeHeaderRegionCmd=iq;var ir=function(e){this.$$c=null;this.$$c=e};ir.__typeName='tab.ResizeHeaderRegionCmd$Response';global.tab.ResizeHeaderRegionCmd$Response=ir;var it=function(){ss.makeGenericType(bd,[Object,iu]).call(this);this.set_uiBlocking('immediately')};it.__typeName='tab.ResizeHeaderWebCmd';global.tab.ResizeHeaderWebCmd=it;var iu=function(e){this.$$c=null;this.$$c=e};iu.__typeName='tab.ResizeHeaderWebCmd$Response';global.tab.ResizeHeaderWebCmd$Response=iu;var iv=function(e){this.$2$1=null;this.cellSize=null;this.$2$2=null;this.$2$3=null;gV.call(this,e,new hF('resizeInfo'.toString()))};iv.__typeName='tab.ResizeInfoModel';global.tab.ResizeInfoModel=iv;var iw=function(e,ex,lA,lB,lC,lD){this.visualId=null;this.offset=0;this.length=0;this.isXResizer=false;this.minimumOffset=0;this.maximumOffset=0;this.visualId=e;this.offset=ex;this.length=lA;this.isXResizer=lB;this.minimumOffset=lC;this.maximumOffset=lD};iw.__typeName='tab.ResizerViewModelParams';global.tab.ResizerViewModelParams=iw;var ix=function(){};ix.__typeName='tab.ResponseStatusCode';global.tab.ResponseStatusCode=ix;var iy=function(){};iy.__typeName='tab.RichTextClientCommands';iy.isRichTextEditingCommand=function(e){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.commandName)){return false}return e.commandName.toString().indexOf('rich-text-editor')!==-1};iy.callRichTextEditingCommand=function(e){if(ss.referenceEquals(e.commandName.toString(),{ns:'tabdoc',cmd:'create-worksheet-title-rich-text-editor'}.cmd)){iy.createWorksheetTitleRichTextEditor(e.commandParams['worksheet'])}else{var ex=ss.isValue(e.commandParams['isNewZone'])&&e.commandParams['isNewZone'];iy.createTextObjectRichTextEditor(e.commandParams['zoneId'],ex)}};iy.createTextObjectRichTextEditor=function(e,ex){var lA=new cE;lA.c['dashboard']=tsConfig.current_sheet_name;lA.c['zoneId']=e|0;lA.c['isNewZone']=ex;lA.c['richTextEditorConfiguration']=iz.get_instance();lA.set_uiBlocking('afterDelay');var lB=lA;lB.invoke()};iy.createWorksheetTitleRichTextEditor=function(e){var ex=new cC;ex.c['worksheet']=e;ex.c['richTextEditorConfiguration']=iz.get_instance();ex.set_uiBlocking('afterDelay');var lA=ex;if(tsConfig.current_sheet_type==='dashboard'){lA.c['dashboard']=tsConfig.current_sheet_name}lA.invoke()};iy.createAnnotationRichTextEditor=function(e,ex){var lA=new cy;lA.c['worksheet']=e;lA.c['objectIds']=ex;lA.c['richTextEditorConfiguration']=iz.get_instance();lA.set_uiBlocking('afterDelay');var lB=lA;lB.invoke()};global.tab.RichTextClientCommands=iy;var iz=function(){};iz.__typeName='tab.RichTextEditorConfigurationFactory';iz.get_instance=function(){return iz.$2||(iz.$2={contentSecurityPolicy:iz.$0(),fontFamilies:eT.compatibleFontNameList(),fontSizes:eT.fontSizes,cssFontRules:iz.$1(),staticAssetsPath:tsConfig.local_static_asset_prefix})};iz.set_instance=function(e){iz.$2=e};iz.clear=function(){iz.set_instance(null)};iz.$0=function(){var e=ss.replaceAllString(tsConfig.external_static_asset_prefix,tsConfig.local_static_asset_prefix,'');return ss.formatString("default-src 'none'; script-src 'self'; connect-src 'self'; img-src * data:; style-src 'self' 'unsafe-inline'; font-src 'self' {0};",e)};iz.$1=function(){var e='';var ex=je.get_allCustomFonts();for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];e+='@font-face\n{\n'+tab.StyleUtil.createCSSRules(lB.toCSSRules())+'}\n'}return e};global.tab.RichTextEditorConfigurationFactory=iz;var iA=function(){};iA.__typeName='tab.RuntimeDataInvalidation';iA.serverResponseHasVisualField=function(e){if(ss.isValue(e.workbookPresModel)&&ss.isValue(e.workbookPresModel.dashboardPresModel)&&ss.isValue(e.workbookPresModel.dashboardPresModel.zones)){var ex=new ss.ObjectEnumerator(e.workbookPresModel.dashboardPresModel.zones);try{while(ex.moveNext()){var lA=ex.current();if(ss.isValue(lA.value)&&ss.referenceEquals(ly.$2(lA.value),'visual'.toString())){return true}}}finally{ex.dispose()}}return false};iA.shouldRequestNewRuntimeData=function(e,ex){if(tab.FeatureFlags.isEnabled('RuntimeServerPushRuntimeData')){return false}if(ss.isValue(Y.get_instance().get_runtimeInitialized())){return iA.$0(e,ex)&&iA.serverResponseHasVisualField(ex)}return false};iA.$0=function(e,ex){if(ss.isValue(e)){if(iA.$1.has(e)){return false}if(ss.referenceEquals(e,{ns:'tabdoc',cmd:'select'}.cmd)||ss.referenceEquals(e,{ns:'tabsrv',cmd:'select-none'}.cmd)||ss.referenceEquals(e,{ns:'tabdoc',cmd:'select-by-tuple-value'}.cmd)){return ss.isValue(ex)&&ss.isValue(ex.presentationLayerNotifications)&&ss.isValue(ex.presentationLayerNotifications.presModelMap)&&ss.keyExists(ex.presentationLayerNotifications.presModelMap,'doc:filter-changed-event'.toString())}}return true};global.tab.RuntimeDataInvalidation=iA;var iB=function(e){this.$1$1=null;this.$1$2=null;this.$1$3=null;var ex=JSON.parse(e.$$c['text']);if(ss.keyExists(ex,'initialDatastore')){this.set_vtl(ex['vtl']);this.set_dataStore(ex['initialDatastore'])}if(ss.keyExists(ex,'dataStoreUpdater')){this.set_dataStoreUpdater(ex['dataStoreUpdater'])}};iB.__typeName='tab.RuntimeDataResponseParser';iB.$ctor1=function(e){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.set_dataStore(e.runtimeInitialDatastore);this.set_vtl(e.runtimeVtl);this.set_dataStoreUpdater(e.runtimeDatastoreUpdater)};global.tab.RuntimeDataResponseParser=iB;var iC=function(){};iC.__typeName='tab.RuntimeLoader';iC.requestRuntimeLoad=function(){var e=$.Deferred();var ex={};var lA=function(){e.resolve();return true};var lB=function(lE){return tsConfig.external_static_asset_prefix+'/javascripts/'+lE};var lC=function(lE){tab.RuntimeUtil.emscriptenAborted();tab.ErrorTrace.report(new ss.JsErrorException(lE))};ex.onRuntimeInitialized=lA;ex.locateFile=lB;ex.onAbort=lC;var lD=window.self;lD['RuntimeWebModule']=ex;gZ.load$1('runtimeweb',[]);return e.promise()};global.tab.RuntimeLoader=iC;var iD=function(){this.$4=null;this.$3=false;this.$2=false};iD.__typeName='tab.RuntimeStatusView';global.tab.RuntimeStatusView=iD;var iE=function(){};iE.__typeName='tab.RuntimeTelemetry';iE.logVizUsage=function(e,ex){iE.$0(iE.$1[e],ex)};iE.logVizUsage$1=function(e,ex){iE.$0(e,ex)};iE.$0=function(e,ex){hf.logEvent('RuntimeClientEvents',['EventName',e,'ElapsedTime',ex])};global.tab.RuntimeTelemetry=iE;var iF=function(){};iF.__typeName='tab.RuntimeTelemetry$RuntimeTelemetryEventType';global.tab.RuntimeTelemetry$RuntimeTelemetryEventType=iF;var iG=function(){};iG.__typeName='tab.SaveServerCommands';iG.$2=function(){return tab.Logger.lazyGetLogger(iG)};iG.saveWorkbook=function(e){var ex=function(lA){lu.getWorldUpdate(function(){if(ss.isValue(e)){e(lA)}})};iG.$0('publish',tsConfig.workbookName,tsConfig.current_project_id.toString(),tsConfig.showTabsWorkbook,null,null,ex,null,bT.get().legacySession,Y.get_instance().get_workbook().get_oAuthCredentialIds())};iG.saveWorkbookAs=function(e,ex,lA,lB,lC,lD,lE,lF){iG.$0('publish_as',e,ex,lA,lB,lC,lE,lF,bT.get().legacySession,lD)};iG.SaveWorkbookAs=function(e,ex,lA,lB,lC,lD,lE,lF){iG.saveWorkbookAs(e,ex.id,lA,lB,lC,lD,lE,lF)};iG.SaveDatasource=function(e,ex,lA,lB,lC,lD){var lE=bT.get().legacySession;var lF=function(lL,lM,lN){var lO=iG.$1(Object).call(null,lN.responseText);lC(lO)};var lG=function(lL,lM,lN){var lO=iG.$1(Object).call(null,lL.responseText);if(ss.isValue(lD)&&ss.isValue(lO)){lD(lO)}else{lE.$7(lN,lL,false,null)}};var lH={type:'POST',dataType:'json',url:bT.$1('publish_ds',lE)};var lI=ss.mkdict(['project',lB.toString(),'datasource',e,'name',ex]);if(ss.isValue(lA)){lI['no_overwrite']=ss.unbox(lA)}var lJ=lv.getMultipartData(null,lI);lH.contentType='multipart/form-data; boundary='+lJ.header;lH.data=lJ.body;var lK=new jf(lE,null,lF,lG,true,true);lv.helper(lH,lK)};iG.$1=function(e){return function(ex){var lA;try{lA=JSON.parse(ex)}catch(lB){lA=null}return lA}};iG.$0=function(e,ex,lA,lB,lC,lD,lE,lF,lG,lH){var lI=function(lO,lP,lQ){var lR=lO;if(ss.keyExists(lR,'workbook')){var lS=lR['workbook'];lE(lS)}else{lE(null)}};var lJ=function(lO,lP,lQ){var lR=iG.$1(Object).call(null,lO.responseText);var lS=iG.$1(Object).call(null,lO.responseText);if(ss.isValue(lF)&&ss.isValue(lR)){lF(lR)}else if(lO.status===403&&ss.isValue(lS)&&lS.code===60011){lG.get_sessionErrorHandler().handleSessionForbiddenAction(lS.code,lS.message)}else{lG.get_sessionErrorHandler().handleCommandFailure(lQ,lO,null,false)}};var lK={type:'POST',dataType:'json',url:bT.$1(e,lG)};var lL=ss.mkdict(['project',lA,'name',ex,'display_tabs',lB]);if(ss.isValue(lC)){lL['save_db_passwords']=ss.unbox(lC)}if(ss.isValue(lD)){lL['no_overwrite']=ss.unbox(lD)}if(ss.isValue(lH)){lL['oauth_credential_ids']=lH}var lM=lv.getMultipartData(null,lL);lK.contentType='multipart/form-data; boundary='+lM.header;lK.data=lM.body;var lN=new jf(lG,null,lI,lJ,true,true);lv.helper(lK,lN)};iG.transitionSessionAfterLogon=function(e){bT.get().$G(e)};global.tab.SaveServerCommands=iG;var iH=function(){};iH.__typeName='tab.SceneDataUtil';iH.isPaneFlagSet=function(e,ex){return(e&iH.$1[ex])!==0};iH.isMarkFlagSet=function(e,ex){return(e&iH.$0[ex])!==0};iH.isCustomShape=function(e){return!ss.keyExists(iH.shapeMapping,e.toString())};iH.getFogBlendFactor=function(e){var ex=0.185000002384186;var lA=0.275000005960464;var lB=75;var lC=e.get_r()<=lB&&e.get_g()<=lB&&e.get_b()<=lB;return(lC?lA:ex)};iH.fogColorTransform=function(e,ex,lA){var lB=ss.Int32.trunc(ex.get_r()+e.get_r()*lA);var lC=ss.Int32.trunc(ex.get_g()+e.get_g()*lA);var lD=ss.Int32.trunc(ex.get_b()+e.get_b()*lA);return new bQ(lB,lC,lD,e.get_a())};iH.applyFogToBackgroundColor=function(e,ex){var lA=245;if(e.get_r()>=lA&&e.get_g()>=lA&&e.get_b()>=lA){e=new bQ(lA,lA,lA,e.get_a())}var lB=ss.Int32.trunc((1-ex)*e.get_r());var lC=ss.Int32.trunc((1-ex)*e.get_g());var lD=ss.Int32.trunc((1-ex)*e.get_b());return new bQ(lB,lC,lD,e.get_a())};iH.createColorCollection=function(e,ex,lA){var lB={};lB['colorOverrideOpaque']=e.toRgb();lB['colorOverrideNone']=e.toRgba();lB['colorOverrideFog']=iH.fogColorTransform(e,ex,lA).toRgba();return lB};iH.createOpaqueColorCollection=function(e){var ex={};var lA=bQ.fromColorCode(e['colorOverrideNone']);ex['colorOverrideNone']=lA.toRgb();lA=bQ.fromColorCode(e['colorOverrideFog']);ex['colorOverrideFog']=lA.toRgb();lA=bQ.fromColorCode(e['colorOverrideOpaque']);ex['colorOverrideOpaque']=lA.toRgb();return ex};iH.applyFoggingToColor=function(e,ex){var lA=iH.getFogBlendFactor(ex);var lB=iH.applyFogToBackgroundColor(ex,lA);return iH.fogColorTransform(e,lB,lA)};iH.convertShapeToNumber=function(e){var ex;var lA=ss.isValue(e.get_palette())&&ss.unbox(e.get_palette())==='filled';switch(e.get_shapeType()){case'circle':{ex=(lA?'shapeIDFilledCircle':'shapeIDCircle');break}case'square':{ex=(lA?'shapeIDFilledSquare':'shapeIDSquare');break}case'plus':{ex=(lA?'shapeIDFilledPlus':'shapeIDPlus');break}case'times':{ex=(lA?'shapeIDFilledTimes':'shapeIDTimes');break}case'asterisk':{ex=(lA?'shapeIDFilledStar':'shapeIDAsterisk');break}case'diamond':{ex=(lA?'shapeIDFilledDiamond':'shapeIDDiamond');break}case'triangle':{ex=(lA?'shapeIDFilledTriangle':'shapeIDTriangle');break}case'down-triangle':{ex=(lA?'shapeIDFilledDownTriangle':'shapeIDDownTriangle');break}case'left-triangle':{ex=(lA?'shapeIDFilledLeftTriangle':'shapeIDLeftTriangle');break}case'right-triangle':{ex=(lA?'shapeIDFilledRightTriangle':'shapeIDRightTriangle');break}default:{throw new ss.Exception('Unable to map ShapeType to ShapeID')}}return parseInt(iH.reverseShapeMapping[ex])};iH.getNumPaneItems=function(e){return e.endIndex-e.startIndex};iH.calcCellClip=function(e){var ex=0;var lA=iH.isPaneFlagSet(e,'clip-to-cell-x');var lB=iH.isPaneFlagSet(e,'clip-to-cell-y');if(lA&&lB){ex=3}else if(lA){ex=1}else if(lB){ex=2}return ex};iH.isSupportedStampShape=function(e){if(!ss.keyExists(iH.reverseShapeMapping,e)){return false}var ex=true;switch(e){case'shapeIDFilledSquare':case'shapeIDSquare':{ex=false;break}default:{break}}return ex};global.tab.SceneDataUtil=iH;var iI=function(e){this.$2$1=null;this.$2$2=null;this.$2$3=null;gV.call(this,null,new hF('sceneElement'.toString()));this.swapPresModel(e);this.set_sceneElementPM(e);this.set_paneId(new hm(e.paneId));this.set_bounds({minX:e.floatLeft,minY:e.floatTop,maxX:e.floatLeft+e.floatWidth,maxY:e.floatTop+e.floatHeight})};iI.__typeName='tab.SceneElementModel';global.tab.SceneElementModel=iI;var iJ=function(e){this.$d={};this.$7=[];this.$8=[];this.$9=null;this.$c=null;this.$b=null;this.$a=null;this.$2$1=null;gV.call(this,e,new hF('scene'.toString()));this.$9=[];this.$c=[]};iJ.__typeName='tab.SceneModel';global.tab.SceneModel=iJ;var iK=function(){};iK.__typeName='tab.SceneUtils';iK.getPaneDescriptorKeyFromRuntimeData=function(e,ex){var lA=new ss.ObjectEnumerator(ex.PDMarks);try{while(lA.moveNext()){var lB=lA.current();var lC=lB.value;var lD=lC.Encodings.tuple_id;var lE=_.find(lD,function(lF){return lF===e});if(ss.isValue(lE)){return lB.key}}}finally{lA.dispose()}return''};global.tab.SceneUtils=iK;var iL=function(e){this.$9=null;this.$8=null;this.$9=e;this.$8=this.generateFrequencyDescription()};iL.__typeName='tab.Schedule';iL.$1=function(e){var ex=new Date;ex.setHours(ss.Int32.div(e,60));ex.setMinutes(e%60);ex.setSeconds(0);return ex.toLocaleTimeString()};iL.$2=function(e,ex){var lA=e+ex;lA=lA%1440;if(lA<0){lA=1440+lA}return lA};iL.$0=function(e,ex){var lA=e+ex;if(lA>1440){return 1}else if(lA<0){return-1}return 0};global.tab.Schedule=iL;var iM=function(){};iM.__typeName='tab.SchemaClientCommands';iM.addFieldToSheet=function(e,ex){var lA={};lA['fn']=e;lA['worksheet']=tsConfig.current_sheet_name;var lB=cl.newCommand({ns:'tabdoc',cmd:'add-to-sheet'},lA);bT.SendCommand(ib.create(lB,'immediately',function(lC){ex()},function(lC){ex()}))};iM.validateFieldCaption=function(e,ex,lA){var lB={};lB['uniqueName']=e;lB['caption']=ex;var lC=cl.newCommand({ns:'tabdoc',cmd:'validate-field-caption'},lB);jd.executeServerCommand(lC,'none',function(lD){lA(lD)},null)};iM.editFieldCaption=function(e,ex,lA){var lB={};lB['uniqueName']=e;lB['caption']=ex;var lC=cl.newCommand({ns:'tabdoc',cmd:'edit-schema-caption'},lB);bT.SendCommand(new bM('none',function(lD){var lE=lD.makeMutablePresModel(lA.get_fieldsModel(),false);for(var lF=0;lF<lE.length;++lF){if(ss.referenceEquals(lE[lF].fn,e)){lE[lF].fieldCaption=ex;break}}},lC))};iM.validateDrillPathName=function(e,ex,lA,lB){var lC={};lC['datasource']=e;if(ss.isValue(ex)){lC['drillPathName']=ex}lC['newDrillPath']=lA;var lD=cl.newCommand({ns:'tabdoc',cmd:'validate-drill-path-name'},lC);jd.executeServerCommand(lD,'afterDelay',function(lE){lB(lE)},null)};iM.addDrillPath=function(e,ex,lA){var lB={};lB['datasource']=e;lB['newDrillPath']=ex;lB['fieldVector']=lA;var lC=cl.newCommand({ns:'tabdoc',cmd:'add-drill-path'},lB);jd.executeServerCommand(lC,'immediately',cl.createCommandRedirectSuccessHandler(null),null)};iM.renameDrillPath=function(e,ex,lA){var lB={};lB['datasource']=e;lB['drillPathName']=ex;lB['newDrillPath']=lA;var lC=cl.newCommand({ns:'tabdoc',cmd:'rename-drill-path'},lB);jd.executeServerCommand(lC,'immediately',cl.createCommandRedirectSuccessHandler(null),null)};iM.setActiveDataSourceName=function(e,ex){var lA={};lA['datasource']=e;var lB=(ex?{ns:'tabdoc',cmd:'set-active-data-source-name'}:{ns:'tabdoc',cmd:'set-active-datasource'});var lC=cl.newCommand(lB,lA);lC.commandParams['datasource']=e;var lD=Y.get_instance().get_workbook().get_uiMode()==='data-tab';var lE=null;if(lD){lE=function(lG){var lH=lG.makeMutablePresModel(Y.get_instance().get_workbook().get_dataSchema(),false);lH.datasource=e}}var lF=$.Deferred();bT.SendCommand(new bM((lD?'none':'immediately'),lE,lC,function(lG){lF.resolve()},function(lG){lF.reject()}));return lF};iM.dropOnSchemaDrillPath=function(e,ex,lA,lB){var lC=new dS;lC.c['datasource']=e;lC.c['columns']=ex.filter(function(lE){return lE.get_isColumn()}).map(function(lE){return lE.get_qualifiedLocalName()});lC.c['drillpathVector']=ex.filter(function(lE){return lE.get_isDrillPath()}).map(function(lE){return lE.get_localName().toString()});lC.c['drillPathName']=lA.get_localName();lC.set_uiBlocking('immediately');var lD=lC;lD.invoke().done(function(lE){lB(lE.$$c['dropCommandModel'])})};iM.dropOnSchemaField=function(e,ex,lA,lB){var lC=new dU;lC.c['datasource']=e;lC.c['columns']=ex.filter(function(lE){return lE.get_isColumn()}).map(function(lE){return lE.get_qualifiedLocalName()});lC.c['drillpathVector']=ex.filter(function(lE){return lE.get_isDrillPath()}).map(function(lE){return lE.get_localName().toString()});lC.c['fieldNameLocal']=lA.get_qualifiedLocalName();lC.set_uiBlocking('immediately');var lD=lC;lD.invoke().done(function(lE){lB(lE.$$c['dropCommandModel'])})};iM.dropOnSchemaSection=function(e,ex,lA,lB){var lC=new dW;lC.c['datasource']=e;lC.c['columns']=ex.filter(function(lE){return lE.get_isColumn()}).map(function(lE){return lE.get_qualifiedLocalName()});lC.c['drillpathVector']=ex.filter(function(lE){return lE.get_isDrillPath()}).map(function(lE){return lE.get_localName().toString()});lC.c['folderRole']=lA;lC.set_uiBlocking('immediately');var lD=lC;lD.invoke().done(function(lE){lB(lE.$$c['dropCommandModel'])})};iM.requestSchemaContextMenu=function(e,ex){var lA=cl.newCommand({ns:'tabdoc',cmd:'build-data-schema-context-menu'},null);var lB={};lB['datasource']=e;lA.commandParams=lB;bT.SendCommand(ib.create(lA,'none',function(lC){ex(lC)},null))};iM.requestSchemaFieldContextMenu=function(e,ex,lA){var lB=cl.newCommand({ns:'tabdoc',cmd:'build-data-schema-field-context-menu'},null);var lC={};lC['datasource']=e;lC['fn']=ex;lB.commandParams=lC;bT.SendCommand(ib.create(lB,'none',function(lD){lA(lD)},null))};iM.requestDataTabFieldContextMenu=function(e,ex,lA){var lB=new bk;lB.c['datasource']=e;lB.c['fieldVector']=ex;var lC=lB;lC.invoke().then(lA)};iM.requestSchemaFieldChangeDataTypeMenu=function(e,ex,lA){var lB=new bo;lB.c['datasource']=e;lB.c['fieldVector']=ex;var lC=lB;lC.invoke().then(lA)};iM.requestSchemaDrillPathContextMenu=function(e,ex,lA){var lB=cl.newCommand({ns:'tabdoc',cmd:'build-data-schema-drill-path-context-menu'},null);var lC={};lC['datasource']=e;lC['drillPathName']=ex;lB.commandParams=lC;bT.SendCommand(ib.create(lB,'none',function(lD){lA(lD)},null))};iM.requestSchemaDataSourceContextMenu=function(e,ex){var lA=cl.newCommand({ns:'tabdoc',cmd:'build-data-schema-data-source-context-menu'},null);var lB={};lB['datasource']=e;lB['allowSaveDataSource']=tsConfig.allow_save_data_source;lA.commandParams=lB;bT.SendCommand(ib.create(lA,'none',function(lC){ex(lC)},null))};iM.convertUnnamedFields=function(e){var ex=$.Deferred();var lA={};lA['fieldVector']=e;var lB=new ib(cl.newCommand({ns:'tabdoc',cmd:'convert-unnamed-fields'},lA),'immediately',function(lC){ex.resolve(lC)},function(lC){ex.reject()});bT.SendCommand(lB);return ex.promise()};iM.toggleFieldBlending=function(e,ex){var lA=$.Deferred();var lB={};lB['globalFieldName']=e;lB['worksheet']=tsConfig.current_sheet_name;var lC=new bM('immediately',ex,cl.newCommand({ns:'tabdoc',cmd:'toggle-field-blending'},lB),function(lD){lA.resolve(lD)},function(lD){lA.reject()});bT.SendCommand(lC);return lA.promise()};iM.renameDataSource=function(e,ex,lA){if(ss.isNullOrEmptyString(e)){return}var lB={};lB['datasource']=e;lB['newDatasource']=ex;var lC=function(lE){var lF=Y.get_instance().get_workbook().get_dataSchema().findDataSourceByName(e);var lG=lE.makeMutablePresModel(lF,false);lG.datasourceCaption=ex};var lD=new bM('none',lC,cl.newCommand({ns:'tabdoc',cmd:'rename-data-source'},lB),null,function(lE){lA()});bT.SendCommand(lD)};iM.getHasUnusedFiles=function(e){var ex=new fm;var lA=function(lB){e(lB.$$c['bool'])};ex.invoke().then(lA)};global.tab.SchemaClientCommands=iM;var iN=function(){};iN.__typeName='tab.SchemaCommandLocalOptions';iN.$0=function(){var e=function(lC){return function(lD){var lE=ss.safeCast(lC['datasource'],String);var lF=ss.safeCast(lC['newDatasource'],String);var lG=Y.get_instance().get_workbook().get_dataSchema().findDataSourceByName(lE);var lH=lD.makeMutablePresModel(lG,false);lH.datasourceCaption=lF}};var ex=kY.get_instance();var lA={ns:'tabdoc',cmd:{ns:'tabdoc',cmd:'rename-data-source'}.cmd};var lB=new cb;lB.localWorkFactory=e;lB.blocking='none';ex.registerCommandLocalOptions(lA,lB)};iN.$1=function(){var e=Y.get_instance().get_workbook().get_uiMode()==='data-tab';var ex=null;if(e){ex=function(lD){return function(lE){var lF=ss.safeCast(lD['datasource'],String);var lG=lE.makeMutablePresModel(Y.get_instance().get_workbook().get_dataSchema(),false);lG.datasource=lF}};var lA=kY.get_instance();var lB={ns:'tabdoc',cmd:{ns:'tabdoc',cmd:'set-active-data-source-name'}.cmd};var lC=new cb;lC.localWorkFactory=ex;lC.blocking='none';lA.registerCommandLocalOptions(lB,lC)}};global.tab.SchemaCommandLocalOptions=iN;var iO=function(){};iO.__typeName='tab.SchemaUtils';iO.getDataSourceNames=function(e){return _.map(e.get_dataSources(),function(ex){return ex.get_caption().toString()})};iO.isValidNewDatasourceCaption$1=function(e,ex,lA){var lB=iO.getDataSourceNames(ex);return iO.isValidNewDatasourceCaption(e.get_caption(),lB,lA)};iO.isValidNewDatasourceCaption=function(e,ex,lA){lA=(!ss.isNullOrEmptyString(lA)?lA.trim():null);return!(ss.isNullOrEmptyString(lA)||ss.referenceEquals(lA,e)||lA.toString().length>254||ss.contains(ex,lA))};global.tab.SchemaUtils=iO;var iP=function(){ss.makeGenericType(bd,[Object,iQ]).call(this)};iP.__typeName='tab.SelectByTupleValueCmd';global.tab.SelectByTupleValueCmd=iP;var iQ=function(e){this.$$c=null;this.$$c=e};iQ.__typeName='tab.SelectByTupleValueCmd$Response';global.tab.SelectByTupleValueCmd$Response=iQ;var iR=function(){ss.makeGenericType(bd,[Object,iS]).call(this)};iR.__typeName='tab.SelectDataServerDataSourceForProxyCmd';global.tab.SelectDataServerDataSourceForProxyCmd=iR;var iS=function(e){this.$$c=null;this.$$c=e};iS.__typeName='tab.SelectDataServerDataSourceForProxyCmd$Response';global.tab.SelectDataServerDataSourceForProxyCmd$Response=iS;var iT=function(){ss.makeGenericType(bd,[Object,iU]).call(this)};iT.__typeName='tab.SelectExtensionAndAddToDashboardCmd';global.tab.SelectExtensionAndAddToDashboardCmd=iT;var iU=function(e){this.$$c=null;this.$$c=e};iU.__typeName='tab.SelectExtensionAndAddToDashboardCmd$Response';global.tab.SelectExtensionAndAddToDashboardCmd$Response=iU;var iV=function(){};iV.__typeName='tab.SelectionClientCommands';iV.$j=function(){return tab.Logger.lazyGetLogger(iV)};iV.setActiveZone=function(e,ex){if(!tsConfig.allow_select){return}if(gY.isActiveZone(e)){return}bT.SendCommand(iV.buildActiveZoneClientCommand(e,ex))};iV.clearActiveZone=function(){iV.setActiveZone(0,null)};iV.buildActiveZoneClientCommand=function(e,ex){var lA=new bM('none',function(lB){iV.setActiveZoneLocal(e,lB)},iV.$1(e,ex));return lA};iV.updateShowMeCommandsForSelectedFields=function(e,ex,lA){var lB={};lB['fieldVector']=e;lB['worksheet']=tsConfig.current_sheet_name;lB['datasource']=ex;var lC=cl.newCommand({ns:'tabdoc',cmd:'get-show-me'},lB);bT.SendCommand(ib.create(lC,'none',function(lD){lA(lD)},function(lD){lA(null)}))};iV.toggleLegendHighlight=function(e,ex,lA,lB,lC){if(!tsConfig.allow_highlight){return}var lD=iV.buildToggleLegendHighlightCommand(ex,lA,lB,lC,e);bT.SendCommand(lD)};iV.buildToggleLegendHighlightCommand=function(e,ex,lA,lB,lC){var lD=!gY.isActiveZone(lC);var lE={};lE['r']=ex;lE['legendNames']=lA;cl.addVisualIdToCommand(lE,e);if(lD){iV.$0(lC,lE)}var lF=cl.newCommand({ns:'tabsrv',cmd:'toggle-legend-server'},lE);var lG=function(lH){if(ss.isValue(lB)){lB(lH)}};return new bM('immediately',function(lH){if(lD){iV.setActiveZoneLocal(lC,lH)}},lF,lG,null)};iV.$0=function(e,ex){ex['dashboardPm']=gY.findContentDashboard().pm.sheetPath;ex['zoneId']=e};iV.selectRegion=function(e,ex,lA,lB,lC){if(!tsConfig.allow_select||Y.get_instance().get_isOffline()){return}var lD=iV.$9(ex,e,lA,lB,lC,null);var lE=cl.newCommand({ns:'tabsrv',cmd:'select-region-no-return-server'},lD);jd.executeServerCommand(lE,'afterDelay')};iV.selectRectRegionAndDoUbertip=function(e,ex,lA,lB,lC,lD,lE){if(!tsConfig.allow_select){return}var lF=iV.$9(ex,e,lA,lB,lE,lD);var lG=cl.newCommand({ns:'tabsrv',cmd:'select-region-no-return-server'},lF);iV.$b(lC,lG)};iV.selectCircleRegionAndDoUbertip=function(e,ex,lA,lB,lC,lD,lE){if(!tsConfig.allow_select){return}var lF=iV.$9(ex,e,lB,lC,null,null);var lG={};lG.center={};lG.center.x=Math.round(lA.center.x);lG.center.y=Math.round(lA.center.y);lG.radius=Math.round(lA.radius);lF['radialSelection']=lG;lF['radialDistanceHitTest']=lE;var lH=cl.newCommand({ns:'tabsrv',cmd:'select-radial-region-no-return-server'},lF);iV.$b(lD,lH)};iV.selectPolyRegionAndDoUbertip=function(e,ex,lA,lB,lC,lD){if(!tsConfig.allow_select){return}var lE=iV.$9(ex,e,lB,lC,null,null);var lF=lA.length;var lG=new Array(lF);for(var lH=0;lH<lF;lH++){var lI={};lI.x=Math.round(lA[lH].x);lI.y=Math.round(lA[lH].y);lG[lH]=lI}lE['lassoSelection']=lG;var lJ=cl.newCommand({ns:'tabsrv',cmd:'select-lasso-region-no-return-server'},lE);iV.$b(lD,lJ)};iV.$b=function(e,ex){ex.commandNamespace='tabsrv';var lA=new bM('afterDelay',null,ex,function(){e()},null);bT.SendCommand(lA)};iV.clearAllSelections=function(e){if(!tsConfig.allow_select){return}var ex=gY.getZoneIdForSheetName(e.worksheet);if(ex!==-1&&!gY.isActiveZone(ex)){iV.setActiveZone(ex,null);return}var lA=iV.buildClearAllSelectionsCommand(e);bT.SendCommand(lA)};iV.buildClearAllSelectionsCommand=function(e){var ex={};cl.addVisualIdToCommand(ex,e);var lA=cl.newCommand({ns:'tabsrv',cmd:'select-none'},ex);var lB=new bM((Y.get_instance().get_isLocalRenderMode()?'none':'afterDelay'),function(lC){if(Y.get_instance().get_isLocalRenderMode()){var lD=iV.$4(lC);if(lD){P.executeActions(e,'on-select',[],lC,true)}}},lA);return lB};iV.clearAllSelectionsIncludingMaster=function(){if(!tsConfig.allow_select){return}var e=iV.buildClearAllSelectionsIncludingMasterCommand();bT.SendCommand(e)};iV.buildClearAllSelectionsIncludingMasterCommand=function(){var e={};e['sheet']=tsConfig.current_sheet_name;var ex=cl.newCommand({ns:'tabdoc',cmd:'select-none-including-master'},e);var lA=new bM((Y.get_instance().get_isLocalRenderMode()?'none':'afterDelay'),function(lB){iV.$4(lB);iV.$2(lB);var lC=gY.getVisualModelsFromDashboard(gY.findContentDashboard());var lD=ss.getEnumerator(Object.keys(lC));try{while(lD.moveNext()){var lE=lD.current();var lF=lC[lE];P.executeActions(lF.get_visualId(),'on-select',[],lB,true)}}finally{lD.dispose()}},ex);return lA};iV.selectLegendItemsLocal=function(e,ex,lA,lB,lC,lD,lE){if(!tsConfig.allow_select){return}if(tab.MiscUtil.isNullOrEmpty$1(lA)&&!lE){return}var lF=iV.buildSelectLegendItemsLocalCommand(e,ex,lA,lB,lC,lD);bT.SendCommand(lF)};iV.$5=function(e,ex){var lA=gY.getVisualModelFromVisualId(ex);var lB=lA.get_selectionsModel();var lC=lB.get_allLegendSelections();for(var lD=0;lD<lC.length;lD++){var lE=lC[lD];iV.$7(e,lE,false)}};iV.clearHighlighting=function(e,ex,lA,lB){var lC=cl.newCommand({ns:'tabdoc',cmd:'clear-highlighting'},null);var lD={};cl.addVisualIdToCommand(lD,lA);lD['fn']=ex;lC.commandParams=lD;var lE=new bM('none',function(lF){if(lB){iV.$5(lF,lA);iV.$c([],e,gY.getVisualModelFromVisualId(lA),lF)}},lC);bT.SendCommand(lE)};iV.highlightItems=function(e,ex,lA,lB,lC){var lD=cl.newCommand({ns:'tabdoc',cmd:'highlight-items'},null);var lE={};cl.addVisualIdToCommand(lE,lB);lE['fn']=ex;lE['objectIds']=lA;lD.commandParams=lE;var lF=new bM('none',function(lG){if(lC){if(lA.length===0){iV.$5(lG,lB)}iV.$c(lA,e,gY.getVisualModelFromVisualId(lB),lG)}},lD);bT.SendCommand(lF)};iV.buildSelectLegendItemsLocalCommand=function(e,ex,lA,lB,lC,lD){var lE=gY.getVisualModelFromVisualId(lB);var lF=lE.get_selectionsModel();var lG=lF.getLegendSelection(lD,lC.get_legendNames());var lH=jb.resolveLegendSelection(ex,lA,lC,lG);var lI=cl.newCommand({ns:'tabdoc',cmd:'select-legend-items'},iV.$8(lH,lB,lC,lD,e));var lJ=new bM('none',function(lK){iV.setActiveZoneLocal(e,lK);if(!lG.isAnyLegendItemSelected()&&lH.length===0&&!gY.isActiveZone(e)){return}var lL=lK.makeMutablePresModel(lG,false);lL.objectIds=lH;lL.legendSelectionInfo={legendType:lC.get_legendTypeEnum(),legendColumns:lC.get_legendNames()};iV.$6(lK,lF.tupleSelection,lE);iV.$6(lK,lF.nodeSelection,lE);var lM=lF.get_allLegendSelections();for(var lN=0;lN<lM.length;lN++){var lO=lM[lN];if(!ss.referenceEquals(lO,lG)){iV.$6(lK,lO,lE)}}iV.$3(lK,lB,true);iV.$e(lH,lC,lE,lK)},lI);return lJ};iV.buildSelectNodeCommand=function(e,ex,lA,lB,lC,lD,lE){var lF=gY.getZoneIdForSheetName(lD.worksheet);var lG=gY.getVisualModelFromVisualId(lD);var lH=lG.get_selectionsModel();var lI=lH.nodeSelection;var lJ=(P.willActionCauseTabChange(lD.worksheet,'on-select')?'afterDelay':'none');var lK=2;var lL=null;if(ss.isValue(lC.extentsWidth)&&ss.isValue(lC.extentsHeight)){var lM=lC.extentsX||0;var lN=lC.extentsY||0;lL={x:lM,y:lN,w:lC.extentsWidth,h:lC.extentsHeight}}var lO=tab.RectXYUtil.shiftCoordsTowardsCenter(ex,lL,lK);var lP={x:lO.x,y:lO.y,w:0,h:0};var lQ=cl.newCommand({ns:'tabsrv',cmd:'select-region-no-return-server'},null);lQ.commandParams=iV.$9(lP,e,lA,lD,null,null);var lR=lF!==-1&&!gY.isActiveZone(lF);if(lR){iV.$0(lF,lQ.commandParams)}var lS=lR||!Y.get_instance().get_isTableCalcHighlightingMode();var lT=function(lV){if(lR){iV.setActiveZoneLocal(lF,lV)}if(Y.get_instance().get_isTableCalcHighlightingMode()){return}var lW=lV.makeMutablePresModel(lI,false);jb.resolveNodeSelection(lA,lB.get_groupItemNodes(),lC,lI,lW);var lX=lA!=='toggle'&&lA!=='range';var lY=lH.tupleSelection.get_ids();if(lX){iV.$6(lV,lH.tupleSelection,lG);lY=[]}var lZ=lH.get_allLegendSelections();for(var ma=0;ma<lZ.length;ma++){var mb=lZ[ma];iV.$6(lV,mb,lG)}iV.$3(lV,lD,true);lG.$5(lW.selectedNodes,lV.modelUpdateContext);P.executeActions(lD,'on-select',lG.getEffectiveSelectedTuples(lY),lV,true)};var lU=new bM(lJ,(lS?lT:null),lQ,function(){if(ss.isValue(lE)){lE()}},null);return lU};iV.selectNode=function(e,ex,lA,lB,lC,lD,lE){if(!tsConfig.allow_select){return}var lF=iV.buildSelectNodeCommand(e,ex,lA,lB,lC,lD,lE);bT.SendCommand(lF)};iV.selectMarksLocal=function(e,ex,lA,lB,lC){if(!tsConfig.allow_select){return}if(Y.get_instance().get_isOffline()){var lD=iV.buildSelectMarksLocalCommand(e,ex,lA,lB,null);bT.SendCommand(lD);lC()}else{var lE=iV.buildSelectMarksLocalCommand(e,ex,lA,lB,lC);bT.SendCommand(lE)}};iV.selectRefLinesLocal=function(e,ex,lA,lB){if(!tsConfig.allow_select){return}if(Y.get_instance().get_isOffline()){var lC=iV.buildSelectRefLinesLocalCommand(e,ex,lA,null);bT.SendCommand(lC);lB()}else{var lD=iV.buildSelectRefLinesLocalCommand(e,ex,lA,lB);bT.SendCommand(lD)}};iV.buildSelectMarksLocalCommand=function(e,ex,lA,lB,lC){var lD=gY.getZoneIdForSheetName(ex.worksheet);var lE=gY.getVisualModelFromVisualId(ex);var lF=lE.get_selectionsModel();var lG=lF.tupleSelection;var lH;if(P.shouldBlockVizInteractionWhenExecutingActionOnSelection(lE.get_visualId().worksheet)){lH='afterDelay'}else{lH=(P.willActionCauseTabChange(ex.worksheet,'on-select')?'afterDelay':'none')}var lI=cl.newCommand({ns:'tabdoc',cmd:'select'},iV.$a(e,'tuples',lA,ex));var lJ=lD!==-1&&!gY.isActiveZone(lD);var lK=lJ||!Y.get_instance().get_isTableCalcHighlightingMode();var lL=function(lN){if(lJ){iV.setActiveZoneLocal(lD,lN)}if(Y.get_instance().get_isTableCalcHighlightingMode()){return}var lO=jb.resolveMarkSelection(lA,e,lG,lB);var lP=lN.makeMutablePresModel(lG,false);lP.objectIds=lO;if(lA!=='toggle'&&lA!=='range'){iV.$6(lN,lF.nodeSelection,lE)}var lQ=lF.get_allLegendSelections();for(var lR=0;lR<lQ.length;lR++){var lS=lQ[lR];iV.$6(lN,lS,lE)}iV.$3(lN,ex,true);P.executeActions(ex,'on-select',lE.getEffectiveSelectedTuples(lO),lN,true)};var lM=new bM(lH,(lK?lL:null),lI,function(lN){if(ss.isValue(lC)){lC()}},null);return lM};iV.buildSelectRefLinesLocalCommand=function(e,ex,lA,lB){var lC=cl.newCommand({ns:'tabdoc',cmd:'select'},iV.$a(e,'ref-lines',lA,ex));var lD=gY.getZoneIdForSheetName(ex.worksheet);var lE=lD!==-1&&!gY.isActiveZone(lD);var lF=function(lH){if(lE){iV.setActiveZoneLocal(lD,lH)}var lI=gY.getVisualModelFromVisualId(ex);var lJ=lI.get_selectionsModel().refLineSelection;var lK=jb.resolveRefLineSelection(lA,e,lJ);iV.$4(lH);P.executeActions(ex,'on-select',[],lH,true);var lL=lH.makeMutablePresModel(lJ,false);lL.objectIds=lK};var lG=new bM('none',lF,lC,function(lH){if(ss.isValue(lB)){lB()}},null);return lG};iV.$f=function(e,ex){if(ss.isNullOrUndefined(e)||!e.get_isBrushingComputed()){return}var lA=gY.getVisualModels(Y.get_instance());var lB=_.keys(lA);for(var lC=0;lC<lB.length;lC++){var lD=lB[lC];if(!e.hasBrushingForSheet(lD)){continue}var lE=lA[lD];iV.$i(e,ex,lE,lD);iV.$h(e,ex,lE,lD);iV.$g(e,ex,lE,lD);var lF=e.getLegendBrushing(lD);var lG=lE.get_brushingsModel().get_allLegendSelections();for(var lH=0;lH<lG.length;lH++){var lI=lG[lH];iV.$d(ex,lI,lF)}}};iV.$d=function(e,ex,lA){var lB=ex.get_selectionPresModel().legendSelectionInfo;var lC=[];var lD=bh.$0(lB.legendType,lB.legendColumns);if(ss.isValue(lA[lD])){lC=lA[lD]}if(lC.length!==0||ex.get_selectionPresModel().objectIds.length!==0){var lE=e.makeMutablePresModel(ex,false);lE.objectIds=lC}};iV.$g=function(e,ex,lA,lB){var lC=e.getNodeBrushing(lB);if(lC.length!==0||!lA.get_brushingsModel().nodeSelection.isEmpty){var lD=ex.makeMutablePresModel(lA.get_brushingsModel().nodeSelection,false);lD.selectedNodes=lC}};iV.$h=function(e,ex,lA,lB){var lC=lA.get_brushingsModel().trendLineSelection;var lD=e.getTrendlineBrushing(lB);if(lD.length!==0||lC.get_selectionPresModel().objectIds.length!==0){var lE=ex.makeMutablePresModel(lC,false);lE.objectIds=lD}};iV.$i=function(e,ex,lA,lB){var lC=e.getTupleBrushing(lB);if(lC.length!==0||lA.get_brushingsModel().tupleSelection.get_selectionPresModel().objectIds.length!==0){var lD=ex.makeMutablePresModel(lA.get_brushingsModel().tupleSelection,false);lD.objectIds=lC}};iV.$2=function(e){var ex=gY.getVisualModels(Y.get_instance());var lA=ss.getEnumerator(Object.keys(ex));try{while(lA.moveNext()){var lB=lA.current();var lC=ex[lB];if(lC.get_brushingsModel().get_isEmpty()){continue}var lD=e.makeMutablePresModel(lC.get_brushingsModel().tupleSelection,false);lD.objectIds=[];var lE=e.makeMutablePresModel(lC.get_brushingsModel().nodeSelection,false);lE.selectedNodes=[];var lF=lC.get_brushingsModel().get_allLegendSelections();for(var lG=0;lG<lF.length;lG++){var lH=lF[lG];if(lH.isEmpty){continue}var lI=e.makeMutablePresModel(lH,false);var lJ=[];lI.objectIds=lJ}}}finally{lA.dispose()}};iV.$1=function(e,ex){var lA=cl.newCommand({ns:'tabdoc',cmd:'set-active-zone'},null);var lB={};lB['dashboardPm']=(ss.isNullOrUndefined(ex)?gY.findContentDashboard().pm.sheetPath:ex);lB['zoneId']=e;lA.commandParams=lB;return lA};iV.$c=function(e,ex,lA,lB){var lC=lA.get_vizDataModel();if(ss.isNullOrUndefined(lC)){return}var lD=lC.getVizDataField(ex.get_fieldName());var lE=[lD.get_fieldCaption()];var lF=bh.createBrushingComputer(ex,lA,e,lE,true);iV.$f(lF,lB)};iV.$e=function(e,ex,lA,lB){var lC=null;if(ex.get_isHighlightEnabled()){lC=bh.createBrushingComputer(ex,lA,e,ex.get_fieldCaptions(),ex.get_isOneWay())}iV.$f(lC,lB)};iV.$3=function(e,ex,lA){var lB=false;var lC=gY.getVisualModels(Y.get_instance());var lD=ss.getEnumerator(Object.keys(lC));try{while(lD.moveNext()){var lE=lD.current();var lF=!ss.isNullOrUndefined(ex)&&ss.referenceEquals(lE,ex.worksheet);if(!lA||!lF){var lG=gY.findContentDashboard();var lH=!lA&&lF||!P.isFilterSource(lG,lE);var lI=lC[lE];var lJ=lI.get_selectionsModel().selectionModels;for(var lK=0;lK<lJ.length;lK++){var lL=lJ[lK];if(lH||lL.get_selectionType()!=='tuples'&&lL.get_selectionType()!=='nodes'){lB=iV.$7(e,lL,true)||lB}}}}}finally{lD.dispose()}return lB};iV.$4=function(e){var ex=false;var lA=gY.getVisualModels(Y.get_instance());var lB=ss.getEnumerator(Object.keys(lA));try{while(lB.moveNext()){var lC=lB.current();var lD=lA[lC];var lE=lD.get_selectionsModel().selectionModels;for(var lF=0;lF<lE.length;lF++){var lG=lE[lF];ex=iV.$7(e,lG,true)||ex}}}finally{lB.dispose()}return ex};iV.$9=function(e,ex,lA,lB,lC,lD){var lE={};cl.addVisualIdToCommand(lE,lB);var lF=new Object;var lG=kQ.create(lF);lG.set_x(Math.round(e.x));lG.set_y(Math.round(e.y));lG.set_w(Math.round(e.w||0));lG.set_h(Math.round(e.h||0));lG.set_r(ex);if(ss.isValue(lC)){lG.set_fns(lC)}lE['vizRegionRect']=lF;lE['mouseAction']=lA;lE['whitespaceSelectionBehavior']=lD;return lE};iV.$8=function(e,ex,lA,lB,lC){var lD={};cl.addVisualIdToCommand(lD,ex);lD['legendNames']=lA.get_legendNames();lD['legendType']=lB;lD['objectIds']=e;lD['zoneId']=lC;return lD};iV.$6=function(e,ex,lA){if(ss.isValue(ex)){iV.$7(e,ex,false);if(ex.get_selectionType()==='nodes'){lA.$1(e.modelUpdateContext)}}};iV.$a=function(e,ex,lA,lB){var lC={};if(ss.isValue(lB)){cl.addVisualIdToCommand(lC,lB)}var lD={};lD.objectIds=e;lD.selectionType=ex;lC['selection']=lD;lC['selectOptions']=iV.$k[lA];return lC};iV.setActiveZoneLocal=function(e,ex){var lA=gY.findContentDashboard();if(ss.isNullOrUndefined(lA)||ss.isNullOrUndefined(lA.pm)){return}var lB=ex.makeMutablePresModel(lA,false);lB.activeZoneId=e};iV.$7=function(e,ex,lA){if(ex.isEmpty){return false}var lB=e.makeMutablePresModel(ex,false);lB.objectIds=[];lB.selectedNodes=[];if(lA){ex.setOverriddenTupleIds([],e.modelUpdateContext)}return true};global.tab.SelectionClientCommands=iV;var iW=function(e,ex){this.$5=null;this.$7=null;this.$6=null;this.$2$1=null;this.isEmpty=false;gV.call(this,e,new hF(ex.toString()));this.isEmpty=true};iW.__typeName='tab.SelectionModel';iW.$0=function(e,ex,lA,lB,lC,lD){var lE=new ss.StringBuilder;if(ss.isValue(e)){lE.append(e.join(';'))}lE.append('=');if(ss.isValue(ex)){lE.append(ex.join(';'))}lE.append('=');if(ss.isValue(lA)){lE.append(lA)}lE.append('=');if(ss.isValue(lB)){lE.append(lB);lE.append('+');if(ss.isValue(lC)){lE.append(lC)}}lE.append('=');if(ss.isValue(lD)){lE.append(lD)}return lE.toString()};global.tab.SelectionModel=iW;var iX=function(e,ex,lA){this.$1$1=false;this.$1$2=0;this.$1$3=null;this.set_invalidateViz(e);this.set_reason(ex);this.set_objectIds(lA||[])};iX.__typeName='tab.SelectionsDifference';iX.noDifference=function(){return new iX(false,0,null)};global.tab.SelectionsDifference=iX;var iY=function(){};iY.__typeName='tab.SelectionsDiffReason';global.tab.SelectionsDiffReason=iY;var iZ=function(e,ex){this.$2$1=null;this.selectionModels=null;this.tupleSelection=null;this.nodeSelection=null;this.refLineSelection=null;this.trendLineSelection=null;gV.call(this,e,new hF(ex,1));this.selectionModels=[];var lA=hc.get_noopContext();this.tupleSelection=this.$1('tuples',lA);this.nodeSelection=this.$1('nodes',lA);this.trendLineSelection=this.$1('trend-lines',lA);this.refLineSelection=this.$1('ref-lines',lA)};iZ.__typeName='tab.SelectionsModel';iZ.$1=function(e){var ex={};ex.selectionType=e;switch(e){case'ref-lines':case'trend-lines':case'annotations':case'tuples':{ex.objectIds=[];break}case'legend-items':{ex.legendSelectionInfo={};ex.objectIds=[];break}case'nodes':{ex.selectedNodes=[];break}default:{break}}return ex};iZ.$0=function(e,ex){var lA=[];var lB=new Set;for(var lC=0;lC<e.length;lC++){var lD=e[lC];lB.add(lD)}for(var lE=0;lE<ex.length;lE++){var lF=ex[lE];if(lB.has(lF)){lB.delete(lF)}else{lA.push(lF)}}lB.forEach(function(lG){lA.push(lG)});return lA};iZ.computeTupleDictionaryDifference=function(e,ex){var lA=tab.MapUtility.createCopy(String,ss.Int32).call(null,e);var lB=tab.MapUtility.createCopy(String,ss.Int32).call(null,ex);var lC=[];lA.forEach(function(lD,lE){if(!lB.has(lE)){lC.push(lA.get(lE))}else{lB.delete(lE)}});lB.forEach(function(lD,lE){lC.push(lB.get(lE))});return lC};global.tab.SelectionsModel=iZ;var ja=function(){this.selections=null};ja.__typeName='tab.SelectionsPresModel';global.tab.SelectionsPresModel=ja;var jb=function(){};jb.__typeName='tab.SelectionUtils';jb.isCategoricalAndTupleAssociatedHeader=function(e){if(tab.MiscUtil.isNullOrEmpty$2(e)){return false}return!jb.isHeaderFullyQuantitativeOrHaveNoAssociatedTuples(e)&&tab.MiscUtil.isNullOrEmpty$3(e.fn)&&!tab.MiscUtil.isNullOrEmpty$2(e.columnIndices)};jb.isHeaderFullyQuantitativeOrHaveNoAssociatedTuples=function(e){if(tab.MiscUtil.isNullOrEmpty$2(e)){return false}return tab.MiscUtil.isNullOrEmpty$2(e.columnIndices)&&!tab.MiscUtil.isNullOrEmpty$3(e.fn)};jb.isQuantitative=function(e){return ss.isValue(e)&&ss.isValue(e.node)&&ss.isValue(e.node.fn)};jb.resolveLegendSelection=function(e,ex,lA,lB){var lC=[];if(ss.isValue(ex)){var lD=lB.get_selectionPresModel()||{};switch(e){case'toggle':{if(ss.isValue(lD.objectIds)){ss.arrayAddRange(lC,lD.objectIds)}for(var lE=0;lE<ex.length;lE++){var lF=ex[lE];var lG=ss.indexOf(lC,lF.objectId);if(lG>=0){ss.removeAt(lC,lG)}else{lC.push(lF.objectId)}}break}case'range':{lC=jb.$2(ex,lA,lD);break}case'simple':{var lH=(ss.isValue(lD.objectIds)?lD.objectIds:[]);if(lH.length<=1){for(var lI=0;lI<ex.length;lI++){var lJ=ex[lI];var lK=ss.indexOf(lH,lJ.objectId);if(lK>=0){ss.removeAt(lC,lK)}else{lC.push(lJ.objectId)}}}else{ss.arrayAddRange(lC,_.pluck(ex,'objectId'.toString()))}break}}}return Array.prototype.slice.call(lC)};jb.resolveMarkSelection=function(e,ex,lA,lB){var lC=[];switch(e){case'simple':{if(!lB&&ex.length===1&&lA.get_ids().length===1&&ex[0]===lA.get_ids()[0]){ss.clear(lC)}else{ss.arrayAddRange(lC,ex)}break}case'range':case'toggle':{ss.arrayAddRange(lC,lA.get_ids());for(var lD=0;lD<ex.length;lD++){var lE=ex[lD];if(!lA.isObjectSelected(lE)){lC.push(lE)}else if(!lB){ss.remove(lC,lE)}}break}}return Array.prototype.slice.call(lC)};jb.resolveRefLineSelection=function(e,ex,lA){var lB=[];if(e==='simple'||e==='toggle'){if(ex.length===1&&lA.get_ids().length===1&&ex[0]===lA.get_ids()[0]){ss.clear(lB)}else{ss.arrayAddRange(lB,ex)}}return Array.prototype.slice.call(lB)};jb.resolveNodeSelection=function(e,ex,lA,lB,lC){var lD=null;if(ss.isValue(lA)){switch(e){case'simple':{lD=jb.$4(lA,lB);break}case'toggle':{lD=jb.$5(lA,lB);break}case'range':{lD=jb.$3(ex,lA,lB);break}}}lC.selectedNodes=lD||[]};jb.$2=function(e,ex,lA){var lB=[];if(!ss.isValue(lA.objectIds)){return lB}ss.arrayAddRange(lB,lA.objectIds);ss.arrayAddRange(lB,_.pluck(e,'objectId'.toString()));var lC=lA.objectIds[lA.objectIds.length-1];var lD=-1;for(var lE=0;lE<ex.get_items().length;lE++){if(ex.get_items()[lE].objectId===lC){lD=lE}}var lF=((e.length>0)?ss.indexOf(ex.get_items(),e[0]):-1);if(lD<0||lF<0){return _.uniq(lB)}var lG=Math.min(lD,lF);var lH=lG+Math.abs(lD-lF)+1;for(var lI=lG;lI<lH;lI++){lB.push(ex.get_items()[lI].objectId)}return _.uniq(lB)};jb.$0=function(e,ex,lA,lB){var lC=new Set;for(var lD=0;lD<e.length;lD++){var lE=e[lD];if(ss.isValue(lE.node.columnIndices)){tab.SetUtilities.addAll(ss.Int32).call(null,lC,lE.node.columnIndices)}}for(var lF=0;lF<ex.length;lF++){var lG=(lA?ex[ex.length-1-lF]:ex[lF]);if(ss.isValue(lG.columnIndices)&&tab.SetUtilities.interserctWith(ss.Int32).call(null,lC,lG.columnIndices).size===0){continue}var lH=jb.$1(e,lG,lB);if(lH!==-1){return lH}}return-1};jb.$1=function(e,ex,lA){if(ss.isValue(lA)&&!_.isEqual(lA,ex.columnIndices)){return-1}for(var lB=0;lB<e.length;lB++){var lC=e[lB];if(_.isEqual(lC.node,ex)){return lB}}return-1};jb.$3=function(e,ex,lA){var lB=jb.nodeSelectionFromDrawGroup(ex);var lC=lA.get_nodes().slice(0);if(tab.MiscUtil.isNullOrEmpty$2(lB.columnIndices)&&tab.MiscUtil.isNullOrEmpty$3(lB.fn)){return lC}if(lC.length===0){lC.push(lB);return lC}var lD=jb.isCategoricalAndTupleAssociatedHeader(lB);var lE=jb.isHeaderFullyQuantitativeOrHaveNoAssociatedTuples(lB);var lF=!lD&&!lE;var lG=jb.$0(e,lA.get_nodes(),true,(lD?lB.columnIndices:null));if(lG===-1){if(lD||lF&&!lA.isNodeAncestorSelected(ex)){lC.push(lB)}return lC}if(lA.isNodeSelected(ex)||lA.isNodeAncestorSelected(ex)){return lC}var lH=jb.$0(e,lA.get_nodes(),false,null);var lI=jb.nodeSelectionFromDrawGroup(e[lH]);if(lD){if(!_.isEqual(lI.columnIndices,lB.columnIndices)){lC.push(lB);return lC}}else{var lJ=jb.$1(e,lI,null)!==-1;if(lE&&!lJ){return lC}if(lF&&!lJ){lC.push(lB);return lC}}var lK=ss.indexOf(e,ex);var lL=Math.min(lG,lK);var lM=lL+Math.abs(lG-lK)+1;for(var lN=lL;lN<lM;lN++){var lO=e[lN];var lP=!lD||_.isEqual(lO.node.columnIndices,lB.columnIndices);if(lP&&!lA.isNodeAncestorSelected(lO)&&!lA.isNodeSelected(lO)){lC.push(jb.nodeSelectionFromDrawGroup(lO))}}return lC};jb.$4=function(e,ex){if(!ex.isNodeSelected(e)||ex.get_nodes().length>1){return[jb.nodeSelectionFromDrawGroup(e)]}return null};jb.$5=function(e,ex){var lA=[];ss.arrayAddRange(lA,ex.get_nodes());var lB=ex.findNodeSelection(e);if(ss.isValue(lB)){ss.remove(lA,lB)}else if(!ex.isNodeAncestorSelected(e)){lA.push(jb.nodeSelectionFromDrawGroup(e))}return Array.prototype.slice.call(lA)};jb.nodeSelectionFromDrawGroup=function(e){var ex={};if(!ss.isValue(e.node)){return ex}var lA=e.node;if(ss.isValue(lA.columnIndices)){ex.columnIndices=lA.columnIndices||[]}if(ss.isValue(lA.aliasIndices)){ex.aliasIndices=lA.aliasIndices||[]}if(ss.isValue(lA.fn)){ex.fn=lA.fn}if(ss.isValue(lA.axisOrientation)){ex.axisOrientation=lA.axisOrientation}if(ss.isValue(lA.duplicateIndex)){ex.duplicateIndex=lA.duplicateIndex}if(ss.isValue(lA.pageIndex)){ex.pageIndex=lA.pageIndex}return ex};global.tab.SelectionUtils=jb;var jc=function(e,ex,lA){this.scheduledAction=null;this.scheduleType=null;this.scheduleDetails=null;this.scheduledAction=e;this.scheduleType=ex;this.scheduleDetails=lA};jc.__typeName='tab.SelfServiceSchedule';global.tab.SelfServiceSchedule=jc;var jd=function(){};jd.__typeName='tab.ServerCommands';jd.get_interceptorCount=function(){var e=0;var ex=new ss.ObjectEnumerator(jd.$1);try{while(ex.moveNext()){var lA=ex.current();e+=lA.value.length}}finally{ex.dispose()}return e};jd.$0=function(e,ex){return e+':'+ex};jd.executeServerCommand=function(e,ex,lA,lB){var lC=jd.$1[jd.$0(e.commandNamespace,e.commandName)];if(ss.isValue(lC)){for(var lD=0;lD<lC.length;lD++){var lE=lC[lD];if(lE(e)===1){return}}}bT.SendCommand(ib.create(e,ex,lA,lB))};jd.intercept=function(e,ex){for(var lA=0;lA<e.length;lA++){var lB=e[lA];jd.addCommandInterceptor(ex,lB.ns,lB.cmd)}return ex};jd.addCommandInterceptor=function(e,ex,lA){var lB=jd.$0(ex,lA);var lC=jd.$1[lB];if(ss.isNullOrUndefined(lC)){lC=[];jd.$1[lB]=lC}lC.push(e);return e};jd.removeIntercept=function(e,ex){for(var lA=0;lA<e.length;lA++){var lB=e[lA];jd.removeCommandInterceptor(ex,lB.ns,lB.cmd)}};jd.removeCommandInterceptor=function(e,ex,lA){var lB=jd.$0(ex,lA);var lC=jd.$1[lB];if(!ss.isNullOrUndefined(lC)){for(var lD=0;lD<lC.length;lD++){if(ss.staticEquals(lC[lD],e)){ss.removeAt(lC,lD);if(lC.length===0){delete jd.$1[lB];return}}}}};jd.clearAllCommandInterceptors=function(){ss.clearKeys(jd.$1)};global.tab.ServerCommands=jd;var je=function(){};je.__typeName='tab.ServerFonts';je.get_effectiveDefaultFontFamily=function(){return[ss.formatString('"{0}"',(BrowserSupport.BrowserSupport.IsHighDpi()?'Benton Sans':'Benton Sans Low-DPI')),'Arial','Helvetica','sans-serif'].join(', ')};je.get_allCustomFonts=function(){return _.union(je.tableauFontNames,je.effectiveBentonSans)};global.tab.ServerFonts=je;var jf=function(e,ex,lA,lB,lC,lD){this.$5=null;this.$2=null;this.$4=null;this.$3=null;this.$1=false;this.$5=e;this.$2=ex;this.$4=lA;this.$3=lB;if(ss.isNullOrUndefined(lC)||lC){this.$1=this.$5.incrementWait(lD,true)}};jf.__typeName='tab.SessionAjaxCallManager';global.tab.SessionAjaxCallManager=jf;var jg=function(e,ex){this.$6=false;this.$5=null;this.$7=0;this.$4=1000;this.$9='';this.$8=null;this.$8=e;this.$5=ex;this.$9=e.$5('status')};jg.__typeName='tab.SessionAjaxHandler';var jh=function(){};jh.__typeName='tab.SessionCommands';jh.ping=function(){(new hw).invoke()};global.tab.SessionCommands=jh;var ji=function(){};ji.__typeName='tab.SessionHeartbeat';ji.onVizportalPinged=function(){var e=tab.DateUtil.get_nowAsTime();ji.$0=e;if(e-ji.$1>ji.$3){ji.$1=e;jh.ping()}};ji.onVizqlPinged=function(){var e=tab.DateUtil.get_nowAsTime();ji.$1=e;if(e-ji.$0>ji.$2){ji.$0=e;lm.extendWorkgroupSession()}};global.tab.SessionHeartbeat=ji;var jj=function(e){this.$5=null;this.$4=null;this.$3=false;this.$5=e};jj.__typeName='tab.SessionRecoveryErrorHandler';global.tab.SessionRecoveryErrorHandler=jj;var jk=function(){};jk.__typeName='tab.SessionServerCommands';jk.cancelLatestSetTimeout=function(){window.clearTimeout(jk.$2)};jk.destroySessionAndForward$1=function(e,ex){var lA=2000;var lB=function(){if(ss.referenceEquals(tab.WindowHelper.getLocation(e).href,ex)){tab.WindowHelper.reload(e,true)}else{tab.WindowHelper.setLocationHref(e,ex)}};var lC=null;lC=function(){lB();jk.cancelLatestSetTimeout();lA*=2;jk.$2=window.setTimeout(lC,lA)};var lD=function(){lB();if(BrowserSupport.BrowserSupport.IsMac()&&(BrowserSupport.BrowserSupport.IsChrome()||BrowserSupport.BrowserSupport.IsFF())){jk.$2=window.setTimeout(lC,lA)}};jk.destroySessionAndForward(lD)};jk.destroySessionAndForward=function(e){var ex=function(){e()};jk.$1(ex)};jk.$1=function(e){var ex=bT.get().legacySession;be.get_waitHandler().showAndLock();var lA=ex.$0(e,function(){},function(){},'immediately');var lB={};lB.type='DELETE';lB.url=ex.$5('destroy');lB.headers=ss.mkdict(['Accept','text/javascript']);lB.dataType='json';ex.$c(lB,lA)};jk.switchToViz=function(e){var ex=kR.createForCurrentWindowLocation();ex.updateForViewingSheet(e);jk.switchToViz$1(ex,function(lA,lB){},function(lA){tabBootstrap.ViewerBootstrap.get_instance().bootstrap()})};jk.switchToViz$1=function(e,ex,lA){var lB=jk.$0(e);var lC={type:'GET',url:e.get_path(),headers:ss.mkdict(['Accept','text/javascript']),dataType:'json',data:lB};var lD=bT.get().legacySession;var lE=lD.$0(ex,function(lF,lG,lH){bT.get().switchViz(lF,e,lA)},null,'immediately');jk.$1(function(){lD.$c(lC,lE)})};jk.$0=function(e){var ex={};var lA=new ss.ObjectEnumerator(e.get_queryParams());try{while(lA.moveNext()){var lB=lA.current();if(lB.value.length===1){ex[lB.key]=lB.value[0]}else{ex[lB.key]=lB.value}}}finally{lA.dispose()}ex[':jsonOnly']='true';return ex};global.tab.SessionServerCommands=jk;var jl=function(){ss.makeGenericType(bd,[Object,jm]).call(this)};jl.__typeName='tab.SetDashboardCurrentLayoutCmd';global.tab.SetDashboardCurrentLayoutCmd=jl;var jm=function(e){this.$$c=null;this.$$c=e};jm.__typeName='tab.SetDashboardCurrentLayoutCmd$Response';global.tab.SetDashboardCurrentLayoutCmd$Response=jm;var jn=function(){ss.makeGenericType(bd,[Object,jo]).call(this)};jn.__typeName='tab.SetDashboardSizingWithValidationCmd';global.tab.SetDashboardSizingWithValidationCmd=jn;var jo=function(e){this.$$c=null;this.$$c=e};jo.__typeName='tab.SetDashboardSizingWithValidationCmd$Response';global.tab.SetDashboardSizingWithValidationCmd$Response=jo;var jp=function(){ss.makeGenericType(bd,[Object,jq]).call(this)};jp.__typeName='tab.SetVariablesPromptRespondedCmd';global.tab.SetVariablesPromptRespondedCmd=jp;var jq=function(e){this.$$c=null;this.$$c=e};jq.__typeName='tab.SetVariablesPromptRespondedCmd$Response';global.tab.SetVariablesPromptRespondedCmd$Response=jq;var jr=function(){this.$3={};this.$2={};this.$4={};this.$1$1=null};jr.__typeName='tab.ShapeManager';jr.get_canvasCacheCapacity=function(){return(BrowserSupport.BrowserSupport.IsMobile()?50:200)};jr.getCacheKey$1=function(e,ex,lA,lB,lC,lD){return e+';'+ex+';'+lA+';'+lB+';'+lC+';'+lD};jr.getCacheKey=function(e,ex,lA,lB,lC){return e+';'+ex+';'+lA+';'+lB+';'+lC};global.tab.ShapeManager=jr;var js=function(e,ex){this.$0=null;this.$1=null;this.$0=e;this.$1=ex};js.__typeName='tab.ShapeModel';js.fromString=function(e){var ex=new RegExp('^(:([^\\/]+)\\/)?([^\\/]+)$');var lA=ex.exec(e);if(ss.isNullOrUndefined(lA)){return null}var lB=lA[2];var lC=lA[3];if(ss.isNullOrUndefined(lC)){return null}var lD=null;if(ss.isValue(lB)){if(ss.referenceEquals(lB,'filled'.toString())){lD='filled'}else{return null}}var lE=lC;return new js(lD,lE)};global.tab.ShapeModel=js;var jt=function(){};jt.__typeName='tab.SheetClientCommands';jt.switchSheets=function(e){if(ss.isNullOrUndefined(e.oldSheetName)){e.oldSheetName=tsConfig.current_sheet_name}if(ss.equals(e.sheetName,e.oldSheetName)&&tab.FeatureFlags.isEnabled('SkipConnectionsDuringLoad')){return}bT.get().prepareForSheetChange();var ex=jt.createSwitchSheetsCommand(e.sheetName);jd.executeServerCommand(ex,'immediately',e.successCallback,e.errorCallback)};jt.createSwitchSheetsCommand=function(e){var ex={};ex['targetSheet']=e;return cl.newCommand({ns:'tabsrv',cmd:'ensure-layout-for-sheet'},ex)};jt.goToSheet=function(e){bT.get().prepareForSheetChange();var ex={};ex['sheet']=e;var lA=cl.newCommand({ns:'tabdoc',cmd:'goto-sheet'},ex);jd.executeServerCommand(lA,'immediately')};jt.ensureLayoutForSheet=function(e){var ex=jt.createSwitchSheetsCommand(e);jd.executeServerCommand(ex,'immediately')};jt.createSheet=function(e,ex){var lA=cl.newCommand({ns:'tabdoc',cmd:'new-worksheet'},null);jt.$0(lA,e,ex);jd.executeServerCommand(lA,'immediately',null,null)};jt.deleteSheet=function(e){var ex={};ex['sheet']=e;ex['promptDeleteSheetsWithVizInTooltip']=false;var lA=cl.newCommand({ns:'tabdoc',cmd:'delete-sheet'},ex);jd.executeServerCommand(lA,'immediately',null,null)};jt.validateNewSheetName=function(e,ex,lA){if(!ss.referenceEquals(ex.trim(),ex)){return false}return!(ss.isNullOrEmptyString(ex)||ss.referenceEquals(ex,e)||ss.contains(lA,ex))};jt.tryRenameSheet=function(e,ex,lA){ex=ex.toString().trim();if(jt.validateNewSheetName(e,ex,lA)){jt.renameSheet(e,ex);return true}else{return false}};jt.renameSheet=function(e,ex){var lA={};lA['sheet']=e;lA['newSheet']=ex;var lB=cl.newCommand({ns:'tabdoc',cmd:'rename-sheet'},lA);jd.executeServerCommand(lB,'immediately',null,null)};jt.createDashboardOrStory=function(e,ex,lA){var lB=(lA?{ns:'tabdoc',cmd:'new-storyboard'}:{ns:'tabdoc',cmd:'new-dashboard'});var lC=cl.newCommand(lB,null);jt.$0(lC,e,ex);jd.executeServerCommand(lC,'immediately',null,null)};jt.$0=function(e,ex,lA){e.commandParams={};if(ss.isValue(ex)){e.commandParams['newSheet']=ex}if(lA){e.commandParams['insertAtEnd']=lA.toString()}e.commandParams['shouldChangeUiMode']=true};jt.getSheetTabContextMenu=function(e,ex){var lA=cl.newCommand({ns:'tabdoc',cmd:'build-sheet-tab-context-menu'},null);lA.commandParams={};if(ss.isValue(e)){lA.commandParams['sheetName']=e}jd.executeServerCommand(lA,'none',function(lB){ex(lB)},null)};jt.getSheetListContextMenu=function(e,ex,lA){var lB=new bs;lB.c['sheetName']=e;lB.c['addAsFloating']=ex;var lC=lB;lC.invoke().then(lA)};jt.getLayoutTreeContextMenu=function(e,ex,lA){var lB=new bm;lB.c['dashboard']=e;lB.c['zoneId']=ex|0;var lC=lB;lC.invoke().then(lA)};jt.getCaptionContextMenu=function(e,ex){var lA=new bi;lA.c['sheetName']=e;var lB=lA;lB.invoke().then(ex)};jt.getTitleContextMenu=function(e,ex,lA){var lB=new bu;lB.c['sheetName']=e;var lC=lB;if(ss.isValue(ex)){lC.c['dashboard']=ex}lC.invoke().then(lA)};jt.$1=function(e){return{h:Math.floor(e.h),w:Math.floor(e.w)}};jt.reorderSheets=function(e,ex){var lA={};lA['positionToInsertTabsAt']=e;lA['sheetTabPositions']=ex;var lB=cl.newCommand({ns:'tabdoc',cmd:'reorder-sheets'},lA);jd.executeServerCommand(lB,'immediately',null,null)};jt.setPortSize=function(e){var ex=cl.newCommand({ns:'tabsrv',cmd:'set-port-size'},null);ex.commandParams={};ex.commandParams['sheet']=tsConfig.current_sheet_name;var lA,lB;if(tsConfig.is_authoring){lA=tabBootstrap.ViewerBootstrap.get_instance().getWebClientPortSize('dashboard');lB=tabBootstrap.ViewerBootstrap.get_instance().getWebClientPortSize('worksheet')}else{lA=((tab.FeatureFlags.isEnabled('IframeSizedToWindow')&&!tsConfig.is_mobile)?db.calculateDashboardSize():tabBootstrap.ViewerBootstrap.get_instance().getWebClientPortSize('dashboard'));lB=lA}ex.commandParams['worksheetPort']=jt.$1({h:lB.h,w:lB.w});ex.commandParams['dashboardPort']=jt.$1({h:lA.h,w:lA.w});ex.commandParams['storyPort']=jt.$1({h:lA.h,w:lA.w});jd.executeServerCommand(ex,'immediately');Y.get_instance().get_workbook().withOuterDashboard(function(lC){lC.set_portSize(e)})};global.tab.SheetClientCommands=jt;var ju=function(e,ex){gV.call(this,e,new hF(ex.toString()))};ju.__typeName='tab.SheetListItemModel';global.tab.SheetListItemModel=ju;var jv=function(e){this.$2=null;this.$1=null;this.$2$1=null;gV.call(this,e,new hF('sheetList'.toString()));this.$1=new l(this)};jv.__typeName='tab.SheetListModel';global.tab.SheetListModel=jv;var jw=function(e,ex,lA){this.sheetId=null;be.call(this,e,lA);this.sheetId=ex};jw.__typeName='tab.SheetSession';jw.add_sheetDataChanged=function(e){jw.$2$1=ss.delegateCombine(jw.$2$1,e)};jw.remove_sheetDataChanged=function(e){jw.$2$1=ss.delegateRemove(jw.$2$1,e)};jw.fireSheetDataChanged=function(){if(ss.isValue(jw.$2$1)){jw.$2$1()}};global.tab.SheetSession=jw;var jx=function(e){gV.call(this,e,new hF('shelfItems'.toString(),1))};jx.__typeName='tab.ShelfItemsArrayModel';global.tab.ShelfItemsArrayModel=jx;var jy=function(e){gV.call(this,e,new hF('shelfList'.toString(),1))};jy.__typeName='tab.ShelfListArrayModel';global.tab.ShelfListArrayModel=jy;var jz=function(e,ex){this.$2=null;this.$2$1=null;gV.call(this,e,new hF(ex.toString()))};jz.__typeName='tab.ShelfModel';global.tab.ShelfModel=jz;var jA=function(e){this.$3=[];this.$2$1=null;gV.call(this,e,new hF('shelves'.toString()))};jA.__typeName='tab.ShelvesModel';jA.createShelfModel=function(e,ex,lA,lB,lC){var lD=new jz(new jy(e),lB);lD.update(ex,lA,lC);return lD};global.tab.ShelvesModel=jA;var jB=function(){ss.makeGenericType(bd,[Object,jC]).call(this)};jB.__typeName='tab.ShowDashboardTitleCmd';global.tab.ShowDashboardTitleCmd=jB;var jC=function(e){this.$$c=null;this.$$c=e};jC.__typeName='tab.ShowDashboardTitleCmd$Response';global.tab.ShowDashboardTitleCmd$Response=jC;var jD=function(){ss.makeGenericType(bd,[Object,jE]).call(this)};jD.__typeName='tab.ShowEditAxisDialogCmd';global.tab.ShowEditAxisDialogCmd=jD;var jE=function(e){this.$$c=null;this.$$c=e};jE.__typeName='tab.ShowEditAxisDialogCmd$Response';global.tab.ShowEditAxisDialogCmd$Response=jE;var jF=function(){ss.makeGenericType(bd,[Object,jG]).call(this)};jF.__typeName='tab.ShowImageObjectConfigDialogCmd';global.tab.ShowImageObjectConfigDialogCmd=jF;var jG=function(e){this.$$c=null;this.$$c=e};jG.__typeName='tab.ShowImageObjectConfigDialogCmd$Response';global.tab.ShowImageObjectConfigDialogCmd$Response=jG;var jH=function(e){this.$0=null;this.$0=e};jH.__typeName='tab.SimpleCommandsPresModelWrapper';jH.create=function(e){if(ss.isNullOrUndefined(e)){return null}return new jH(e)};global.tab.SimpleCommandsPresModelWrapper=jH;var jI=function(){this.$1=null;this.$0(jI.fontFaces)};jI.__typeName='tab.SimpleFontListProvider';jI.$ctor1=function(e){this.$1=null;this.$0(e)};jI.$ctor2=function(e){this.$1=null;this.$1=ss.arrayFromEnumerable(e)};jI.$0=function(e){var ex=[];var lA=ss.getEnumerator(e);try{while(lA.moveNext()){var lB=lA.current();var lC=lB.get_fonts();for(var lD=0;lD<lC.length;lD++){var lE=lC[lD];ex.push(lE)}}}finally{lA.dispose()}return Array.prototype.slice.call(ex)};global.tab.SimpleFontListProvider=jI;var jJ=function(e,ex){this.$2$1=null;gV.call(this,e,new hF(ex.toString()))};jJ.__typeName='tab.SizeItemModel';global.tab.SizeItemModel=jJ;var jK=function(){ss.makeGenericType(bd,[Object,jL]).call(this)};jK.__typeName='tab.SortFromIndicatorCmd';global.tab.SortFromIndicatorCmd=jK;var jL=function(e){this.$$c=null;this.$$c=e};jL.__typeName='tab.SortFromIndicatorCmd$Response';global.tab.SortFromIndicatorCmd$Response=jL;var jM=function(e){this.$2$1=null;gV.call(this,e,new hF('sortIndicators'.toString()))};jM.__typeName='tab.SortIndicatorsModel';global.tab.SortIndicatorsModel=jM;var jN=function(){};jN.__typeName='tab.SortServerCommands';jN.sortFromIndicator=function(e,ex,lA){var lB=tab.PointUtil.toPresModel({x:Math.floor(e.x),y:Math.floor(e.y)});var lC=tab.PointUtil.toPresModel({x:Math.floor(ex.x),y:Math.floor(ex.y)});var lD=new jK;lD.c['vizLocation']=lB;lD.c['scrollOffset']=lC;lD.c['visualIdPresModel']=lA;lD.invoke()};jN.sortFromCommandItem=function(e,ex){var lA=gY.getZoneIdForSheetName(ex.worksheet);var lB=bZ.create(e);var lC=ch.deserialize(lB.get_command());cl.addVisualIdToCommand(lC.commandParams,ex);var lD=new bM('afterDelay',function(lE){if(jN.$0(lA)){iV.setActiveZoneLocal(lA,lE)}},lC);bT.SendCommand(lD)};jN.quickSort=function(e,ex,lA){var lB=jN.$1(e,ex,lA);var lC=cl.newCommand({ns:'tabdoc',cmd:'quick-sort'},lB);var lD=new bM('afterDelay',null,lC);bT.SendCommand(lD)};jN.$0=function(e){return tsConfig.allow_select&&e!==-1&&!gY.isActiveZone(e)};jN.$1=function(e,ex,lA){var lB={};cl.addVisualIdToCommand(lB,e);lB['sortOrder']=ex;lB['useNestedSortForComparativeSort']=lA;return lB};global.tab.SortServerCommands=jN;var jO=function(e,ex,lA,lB,lC){this.defaultSpace=null;this.left=null;this.right=null;this.bottom=null;this.top=null;this.$0=null;this.defaultSpace=e;this.left=ex;this.right=lA;this.top=lB;this.bottom=lC};jO.__typeName='tab.SpacingDefinition';global.tab.SpacingDefinition=jO;var jP=function(){ss.makeGenericType(bd,[Object,jQ]).call(this);this.set_uiBlocking('immediately')};jP.__typeName='tab.StartNewDataAlertCmd';global.tab.StartNewDataAlertCmd=jP;var jQ=function(e){this.$$c=null;this.$$c=e};jQ.__typeName='tab.StartNewDataAlertCmd$Response';global.tab.StartNewDataAlertCmd$Response=jQ;var jR=function(){};jR.__typeName='tab.StartupUtils';jR.add_modelsInitialized=function(e){jR.$1$1=ss.delegateCombine(jR.$1$1,e)};jR.remove_modelsInitialized=function(e){jR.$1$1=ss.delegateRemove(jR.$1$1,e)};jR.add_clientFullyLoaded=function(e){jR.$1$2=ss.delegateCombine(jR.$1$2,e)};jR.remove_clientFullyLoaded=function(e){jR.$1$2=ss.delegateRemove(jR.$1$2,e)};jR.reset=function(){jR.$0=false;jR.$1=false;Y.resetInstance()};jR.callOnceAfterInitialBootstrap=function(e){if(jR.$0){e()}else{var ex=null;ex=function(){e();jR.remove_clientFullyLoaded(ex)};jR.add_clientFullyLoaded(ex)}};jR.resetTsConfig=function(e){window['tsConfig']=e};jR.callAfterModelsInitialized=function(e){if(jR.$1){e()}else{var ex=null;ex=function(){e();jR.remove_modelsInitialized(ex)};jR.add_modelsInitialized(ex)}};jR.callEachTimeModelsInitialized=function(e,ex){jR.add_modelsInitialized(e);ex.add$1(new tab.CallOnDispose(function(){jR.remove_modelsInitialized(e)}))};jR.notifyModelsInitialized=function(){if(jR.$1){return}jR.$1=true;if(!ss.staticEquals(jR.$1$1,null)){jR.$1$1()}};jR.notifyClientFullyLoaded=function(){if(jR.$0){return}jR.$0=true;if(!ss.staticEquals(jR.$1$2,null)){jR.$1$2()}};global.tab.StartupUtils=jR;var jS=function(e,ex){this.$4=null;this.$2$1=null;this.$2$2=null;gV.call(this,e,new hF(ex.toString(),0));this.$4=new cS(this)};jS.__typeName='tab.StoryPointModel';global.tab.StoryPointModel=jS;var jT=function(e){this.$1=null;gV.call(this,e,new hF('storyPoints'.toString()))};jT.__typeName='tab.StoryPointsModel';global.tab.StoryPointsModel=jT;var jU=function(){this.$3=null;this.$3=new(ss.makeGenericType(gM,[String,F]))(jU.$6);lt.get().add_onCommandResponse(ss.mkdel(this,this.$0));jU.$5=new ss.Lazy(function(){return[{ns:'tabdoc',cmd:'capture-story-point'}.cmd,{ns:'tabdoc',cmd:'delete-story-point'}.cmd,{ns:'tabdoc',cmd:'duplicate-active-story-point'}.cmd,{ns:'tabdoc',cmd:'edit-story-point-caption'}.cmd,{ns:'tabsrv',cmd:'ensure-layout-for-sheet'}.cmd,{ns:'tabdoc',cmd:'get-storyboard'}.cmd,{ns:'tabdoc',cmd:'insert-story-point'}.cmd,{ns:'tabdoc',cmd:'next-story-point'}.cmd,{ns:'tabdoc',cmd:'new-blank-story-point'}.cmd,{ns:'tabdoc',cmd:'previous-story-point'}.cmd,{ns:'tabdoc',cmd:'replace-story-point'}.cmd,{ns:'tabdoc',cmd:'revert'}.cmd,{ns:'tabdoc',cmd:'revert-story-point'}.cmd,{ns:'tabsrv',cmd:'revert-workbook'}.cmd,{ns:'tabdoc',cmd:'save-active-story-point-as-new'}.cmd,{ns:'tabdoc',cmd:'set-active-story-point'}.cmd,{ns:'tabdoc',cmd:'toggle-storypoints-nav-arrows'}.cmd]});if(ss.isValue(jU.$4)){this.$3.add(jU.$4.item1.toString(),jU.$4.item2);jU.$4=null}};jU.__typeName='tab.StoryPointsPresModelCache';jU.$0=function(e){if(!jU.$3(e)){return}var ex=jU.$1(e);if(ss.isValue(ex)){var lA=new F(ex);jU.$4={item1:ex.storyPointId,item2:lA}}lt.get().remove_onBootstrapResponse(jU.$0)};jU.$3=function(e){if(jU.$2(e)||!e.workbookPresModel.dashboardPresModel.isStory||e.renderMode!=='render-mode-client'){return false}return true};jU.$2=function(e){if(ss.isNullOrUndefined(e.workbookPresModel)||ss.isNullOrUndefined(e.workbookPresModel.dashboardPresModel)||ss.isNullOrUndefined(e.workbookPresModel.dashboardPresModel.zones)){return true}return false};jU.$1=function(e){if(e.renderMode!=='render-mode-client'){return null}if(jU.$2(e)){return null}var ex=null;var lA=e.workbookPresModel.dashboardPresModel.zones;var lB=_.keys(lA);for(var lC=0;lC<lB.length;lC++){var lD=lB[lC];var lE=lA[lD];if(ss.isNullOrUndefined(lE)){continue}ex=ly.getContent(lE,'flipboard');if(ss.isValue(ex)){break}}if(ss.isNullOrUndefined(ex)){return null}var lF=ex.activeStoryPointId.toString();var lG=ex.storyPoints[lF];return lG};global.tab.StoryPointsPresModelCache=jU;var jV=function(){this.$1$1=false;this.$1$2=0;this.$1$3=null;var e=Y.get_instance().get_workbook();this.set_isStory(e.get_isCurrentSheetStoryboard()&&ss.isValue(e.get_storyboard().get_flipboard()));if(this.get_isStory()){this.set_sheetName(e.get_storyboard().get_sheetName());this.set_storyPointId(e.get_storyboard().get_flipboard().get_currentStoryPointId())}};jV.__typeName='tab.StoryState';global.tab.StoryState=jV;var jW=function(e){this.$4$1=null;eq.call(this,e)};jW.__typeName='tab.StructuredMeasureModel';global.tab.StructuredMeasureModel=jW;var jX=function(e){this.$1=null;this.$2=null;this.$2$1=null;gV.call(this,e,new hF('styledBox'.toString(),0));this.$1=new gS;this.$2=new hi};jX.__typeName='tab.StyledBoxModel';global.tab.StyledBoxModel=jX;var jY=function(){};jY.__typeName='tab.TabbedAuthenticationDialogCommands';jY.showTabbedAuthenticationDialog=function(e,ex,lA){var lB=new fq;lB.c['connectionFullNames']=e;lB.c['editingConnection']=ex;lB.c['connectionAttemptInfo']=lA;var lC=lB;lC.invoke()};global.tab.TabbedAuthenticationDialogCommands=jY;var jZ=function(e){this.$1=null;this.$0=null;this.update(e)};jZ.__typeName='tab.TableCalcIdentifierModel';global.tab.TableCalcIdentifierModel=jZ;var ka=function(e){this.$4=null;this.$3=null;this.$2$1=null;this.$2$2=null;gV.call(this,e,new hF('tableCalculationPresModel'.toString()));this.set_tableCalcIdentifier(new jZ(null));this.$3=new kb(this)};ka.__typeName='tab.TableCalcModel';ka.$0=function(e,ex){if(!(ex in e.presModelHolder)){return null}return e.presModelHolder[ex]};global.tab.TableCalcModel=ka;var kb=function(e){this.$2$1=null;gV.call(this,e,new hF('tableCalcOrderingPresModel'.toString()))};kb.__typeName='tab.TableCalcOrderingModel';global.tab.TableCalcOrderingModel=kb;var kc=function(e){this.$2$1=null;gV.call(this,e,new hF('tableCalcReferenceOptionsPresModel'.toString()))};kc.__typeName='tab.TableCalcReferenceModel';global.tab.TableCalcReferenceModel=kc;var kd=function(){};kd.__typeName='tab.TabResources';kd.getResourceName=function(e){return e.substring(e.lastIndexOf('/')+1,e.lastIndexOf('.'))};kd.lookupResourceAlias=function(e){return(ss.keyExists(kd.$0,e)?kd.$0[e]:'')};kd.lookupFullResourceAlias=function(e){var ex=e.split('/');var lA=((ex.length>0)?ex[ex.length-1]:e);return kd.lookupResourceAlias(lA)};kd.lookupTabRes=function(e){return kd.lookupResourceAlias(e)};kd.lookupDefaultTabRes=function(e){return':/'+tsConfig.locale+'/'+kd.lookupResourceAlias(e)};global.tab.TabResources=kd;var ke=function(){};ke.__typeName='tab.TelemetryUtils';ke.generateUUID=function(){var e=function(){var lA='0123456789abcdefghijklmnopqrstuvwxyz';return String.fromCharCode(lA.charCodeAt(Math.floor(Math.random()*lA.length)))};var ex=function(lA){var lB='';for(var lC=0;lC<lA;++lC){lB+=e()}return lB};return(new Date).getTime().toString(32).toLowerCase()+'$'+ex(4)+'-'+ex(2)+'-'+ex(2)+'-'+ex(2)+'-'+ex(6)};global.tab.TelemetryUtils=ke;var kf=function(e,ex){this.$2$1=null;gV.call(this,e,new hF(ex))};kf.__typeName='tab.TextRegionModel';global.tab.TextRegionModel=kf;var kg=function(){ss.makeGenericType(bd,[Object,kh]).call(this)};kg.__typeName='tab.ToggleINDJoinSemanticsCmd';global.tab.ToggleINDJoinSemanticsCmd=kg;var kh=function(e){this.$$c=null;this.$$c=e};kh.__typeName='tab.ToggleINDJoinSemanticsCmd$Response';global.tab.ToggleINDJoinSemanticsCmd$Response=kh;var ki=function(){ss.makeGenericType(kV,[Object,kj]).call(this)};ki.__typeName='tab.ToggleINDJoinSemanticsWrapperCmd';ki.get_commandName=function(){return'toggle-indjoin-semantics-wrapper'};global.tab.ToggleINDJoinSemanticsWrapperCmd=ki;var kj=function(e){this.$$c=null;this.$$c=e};kj.__typeName='tab.ToggleINDJoinSemanticsWrapperCmd$Response';global.tab.ToggleINDJoinSemanticsWrapperCmd$Response=kj;var kk=function(e){this.$2$1=null;gV.call(this,e,new hF('toolbarPresModel'.toString()))};kk.__typeName='tab.ToolbarModel';global.tab.ToolbarModel=kk;var kl=function(){};kl.__typeName='tab.ToolbarServerCommands';kl.get_authoringVizUri=function(){var e;var ex=null;if(ss.isNullOrEmptyString(ex)){e=kR.createForAuthoringPublishedSheet(tsConfig.repositoryUrl)}else{e=kR.createForAuthoringUnpublishedSheet(tsConfig.repositoryUrl,ex)}e.trimQueryParamsForAuthoringModeWhenLaunchedFromToolbar();e.removeHash();return e};kl.setAutoUpdate=function(e){var ex={};ex['state']=e;var lA=cl.newCommand({ns:'tabsrv',cmd:'set-auto-update-server'},ex);jd.executeServerCommand(lA,'immediately')};kl.refreshData=function(){var e={};e['deltaTime']=0;e['shouldRefreshDs']=true;var ex=cl.newCommand({ns:'tabsrv',cmd:'refresh-data-server'},e);jd.executeServerCommand(ex,'immediately')};kl.launchEditing=function(){var e=kl.get_authoringVizUri();if(!tsConfig.openAuthoringInTopWindow&&(tabBootstrap.Utility.get_isEmbedded()||tsConfig.is_mobile_app)){tab.WindowHelper.open(e.get_uri(),'tableauAuthoring')}else{e.setTopWindowLocation()}};kl.downloadWorkbook=function(e,ex){var lA;if(ss.isValue(e)){lA=e}else{lA=tsConfig.downloadURI}var lB;if(tsConfig.is_metrics_view){lB=bT.get().legacySession.metricsViewDownloadUrl()}else{lB=kl.$0(lA)}if(ss.isValue(ex)){lB=lB+'?formatVersion='+ex}window.open(lB)};kl.exportData=function(e){if(ss.isNullOrUndefined(e)&&ss.isValue(gY.findActiveOrDefaultVisual())){e=gY.findActiveOrDefaultVisual().get_worksheetName()}var ex=gY.findContentDashboard().getViewSession(e);if(ss.isValue(ex)){var lA=gY.findActiveOrDefaultVisual().get_visualId();window.open(ex.formatUnderlyingDataURL(null,lA),ex.getWindow('vud'),'scrollbars,resizable')}};kl.exportImage=function(e){var ex=Y.get_instance().get_workbook().get_currentSheetStoryPointId();var lA=tableau.types.ExportDialogType['ExportImage'];var lB=[];var lC=[];if(gY.findContentDashboard().get_isDashboard()){var lD=e.get_sheetScrollPositions();if(ss.isValue(lD)){var lE=ss.getEnumerator(Object.keys(lD));try{while(lE.moveNext()){var lF=lE.current();var lG=lD[lF];var lH=lG.x;var lI=lG.y;if(lH!==0||lI!==0){lC.push({x:lH,y:lI});lB.push(lF)}}}finally{lE.dispose()}}}ej.exportImage(tsConfig.current_sheet_name,ex,lA,lB,lC)};kl.exportCrosstab=function(e){if(ss.isNullOrUndefined(e)&&ss.isValue(gY.findActiveOrDefaultVisual())){e=gY.findActiveOrDefaultVisual().get_worksheetName()}var ex=gY.findContentDashboard().getViewSession(e);if(ss.isValue(ex)){var lA=tableau.types.ExportDialogType['ExportCrosstab'];ex.fileDownloadHelper.openDownload(ex.formatExportCrossTabURL('utf16'),lA)}};kl.exportPdf=function(e){e.triggerExportPdfUI()};kl.$0=function(e){if(ss.isValue(e)){var ex=e.match(kl.$1);if(ss.isValue(ex)&&ex.length>=2){return tabBootstrap.ViewerBootstrap.get_instance().location.protocol+'//'+tabBootstrap.ViewerBootstrap.get_instance().location.host+ex[1]}}return e};global.tab.ToolbarServerCommands=kl;var km=function(){this.$2=[];this.$3=null};km.__typeName='tab.TrackingCommandDispatcher';global.tab.TrackingCommandDispatcher=km;var kn=function(e){this.$2=null;this.$1=null;this.modelUpdateContext=null;this.modelUpdateContext=e;this.$2=[];this.$1=[]};kn.__typeName='tab.Transaction';kn.$0=function(e){if(e.length===0){return null}e=_.sortBy(e,function(lE){return lE.$1().get_pathList().length});var ex=Y.get_instance().pm;var lA=hD.cloneObjWithScalarsOnly(ex);if(ss.isNullOrUndefined(lA)){lA=new Object}var lB=lA;for(var lC=0;lC<e.length;lC++){var lD=e[lC];hD.insertAtPath(ex,lB,lD.$1(),lD.$0())}return lB};kn.$1=function(e){var ex=kn.$0(e);if(ss.isValue(ex)&&ss.isValue(ex.presentationLayerNotifications)){ex.presentationLayerNotifications=null}return ex};global.tab.Transaction=kn;var ko=function(){this.$1=null;this.$0={}};ko.__typeName='tab.Transactor';global.tab.Transactor=ko;var kp=function(e){bB.call(this,e,new hF('typeInPill'.toString()))};kp.__typeName='tab.TypeInCalculationModel';global.tab.TypeInCalculationModel=kp;var kq=function(e,ex){gV.call(this,e,ex)};kq.__typeName='tab.TypeSpecificTableCalcModel';global.tab.TypeSpecificTableCalcModel=kq;var kr=function(){bY.call(this)};kr.__typeName='tab.UbertipButtonMenuModel';global.tab.UbertipButtonMenuModel=kr;var ks=function(){this.$2$1=null;this.$2$2=false;this.$2$3=null;gV.call(this,null,new hF('ubertipButton'))};ks.__typeName='tab.UbertipButtonModel';global.tab.UbertipButtonModel=ks;var kt=function(){};kt.__typeName='tab.UberTipClientCommands';kt.$6=function(){return tab.LazyUtil.lazyInitStaticField(kt,'commandPermissions',function(){return hu.buildCommandPermission()})};kt.executeUbertipAction=function(e,ex,lA){var lB=new H(function(lC){P.executeAction(e,ex,lA,lC)});bT.SendCommand(lB)};kt.executeUbertipCommand=function(e){switch(e.get_commandType()){case 1:{iV.clearAllSelections(gY.findActiveOrDefaultVisual().get_visualId());break}case 2:case 10:{var ex=kt.$5(e);jd.executeServerCommand(ex,'immediately');break}case 4:case 5:case 11:case 12:case 13:case 15:case 17:case 18:case 22:case 16:{jd.executeServerCommand(e.command,'immediately');break}case 21:{jd.executeServerCommand(e.command,'immediately',cl.createCommandRedirectSuccessHandler(null),null);break}case 23:{var lA=cl.newCommand({ns:'tabdoc',cmd:'select-by-tuple-value'},e.command.commandParams);jd.executeServerCommand(lA,'immediately');break}case 6:case 9:case 7:default:{return}}};kt.localAndRemoteUberTipCommand=function(e,ex,lA,lB,lC,lD,lE,lF,lG,lH){var lI=kt.$0(e,ex,lA,lB,lD,lE,lF,lG,lH,lC);bT.SendCommand(lI)};kt.filterUbertipButtonsByCommandPermissions=function(e,ex){return _.filter(e,function(lA){if(lA.get_isMenuButton()){return true}if(!ex.test(lA)){return false}return true})};kt.$0=function(e,ex,lA,lB,lC,lD,lE,lF,lG,lH){var lI=new c(kt.$1(e,lA,lC,lD),kt.$4(ex,lA,lB,lG,null,lH),kt.$2(true,lE,lA),lF);return lI};kt.localOnlyUbertipCommand=function(e,ex,lA,lB){var lC=kt.buildLocalOnlyUbertipCommand(e,ex,lA,lB);lC.set_commandName({ns:'tabsrv',cmd:'render-tooltip-server'}.cmd);bT.SendCommand(lC)};kt.buildLocalOnlyUbertipCommand=function(e,ex,lA,lB){var lC=new c(kt.$1(e,ex,lA,lB),null,null,null);return lC};kt.remoteOnlyUbertipCommand=function(e,ex,lA,lB,lC,lD,lE,lF,lG,lH){var lI=kt.$3(e,ex,lA,lB,lC,lD,lE,lF,lG,lH);bT.SendCommand(lI)};kt.$3=function(e,ex,lA,lB,lC,lD,lE,lF,lG,lH){var lI=null;if(ss.isNullOrUndefined(lF)){lF=[]}if(lG||P.doesWorksheetContainHoverActionsThatMustRunRemotely(ex.worksheet)){lI=function(lK){P.executeActions(ex,'on-hover',lF,lK,false)}}var lJ=new c(lI,kt.$4(e,ex,lA,lD,lE,lH),kt.$2(false,lB,ex),lC);return lJ};kt.$1=function(e,ex,lA,lB){return function(lC){var lD=ku.createLocalUberTipModel(e,gY.getVisualModelFromVisualId(ex),lA,tsConfig.is_authoring);if(ss.isValue(lD)){lD.isUpdate=false;lD.buttonModels=kt.filterUbertipButtonsByCommandPermissions(lD.buttonModels,kt.$6())}lB(lD);P.executeActions(ex,'on-hover',[lA.get_interactedTupleId()],lC,false)}};kt.$4=function(e,ex,lA,lB,lC,lD){var lE={};cl.addVisualIdToCommand(lE,ex);if(ss.isValue(lD)){lE['tupleIds']=[ss.unbox(lD)]}var lF=new Object;var lG=kQ.create(lF);lG.set_r(e);lG.set_x(Math.round(lA.x));lG.set_y(Math.round(lA.y));lG.set_w(Math.round(lA.w));lG.set_h(Math.round(lA.h));lG.set_fns(lC);lE['vizRegionRect']=lF;lE['allowHoverActions']=tsConfig.is_mobile||lB==='on-hover';lE['allowPromptText']=true;lE['allowWork']=tsConfig.is_mobile;lE['useInlineImages']=true;return cl.newCommand({ns:'tabsrv',cmd:'render-tooltip-server'},lE)};kt.$2=function(e,ex,lA){return function(lB){if(!ss.isValue(lB)){return}var lC=lB.toString();var lD=(ss.isNullOrEmptyString(lC)?null:JSON.parse(lC));eM.notifyFontsFromUberTipPresModel(lD);var lE=ku.deserializeUbertip(lD,lA);if(ss.isValue(lE)){lE.isUpdate=e;lE.buttonModels=kt.filterUbertipButtonsByCommandPermissions(lE.buttonModels,kt.$6())}if(ss.isValue(ex)){ex(lE)}eM.$7()}};kt.$5=function(e){var ex=cl.duplicateCommand(e.command);var lA=ex.commandParams;var lB=lA['tupleId'];delete lA['tupleId'];if(!ss.keyExists(lA,'selectAtPoint')&&ss.isValue(lB)){var lC=[parseInt(lB.toString())];var lD={};lD.objectIds=lC;lD.selectionType='tuples';lA['selection']=lD}return ex};global.tab.UberTipClientCommands=kt;var ku=function(){};ku.__typeName='tab.UbertipSerializer';ku.$f=function(){return tab.Logger.lazyGetLogger(ku)};ku.deserializeUbertip=function(e,ex){if(ss.isNullOrUndefined(e)){return null}var lA=[];if(ss.isValue(e.selectionRelaxationCommands)){ku.$1(e.selectionRelaxationCommands,lA,0)}var lB=[];if(ss.isValue(e.actions)){ku.$1(e.actions,lB,0)}var lC={};if(ss.isValue(e.commands)){lC.buttonModels=ku.$2(e,ex,null)}lC.tooltipHtml=ku.$c(e.htmlTooltip);lC.selectionHtml=ku.$c(e.htmlSelection);lC.overlayImage=ku.$c(e.overlayImage);lC.overlayImageKey=ku.$c(e.overlayImageKey);lC.tupleId=e.tupleId;lC.interactedTupleId=e.tupleId;lC.imageRegion=e.r;lC.tupleSelected=e.tupleSelected||false;lC.refLineSelected=e.refLineSelected||false;lC.trendLineSelected=e.trendLineSelected||false;lC.isExplicitlyEmpty=e.isEmpty||false;lC.tooltipOffset=tab.PointUtil.fromPresModel(e.tooltipOffset);lC.markBounds=tab.RecordCast.rectPresModelAsRectXY(e.markTooltipRect);lC.contentCommands=lA;lC.actions=lB;if(ss.isValue(lC.overlayImage)||ss.isValue(lC.overlayImageKey)){var lD=e.overlayAnchors.length;lC.overlayAnchors=new Array(lD);for(var lE=0;lE<lD;++lE){var lF=e.overlayAnchors[lE];var lG=tab.PointUtil.fromPresModel(lF);lC.overlayAnchors[lE]={x:lG.x,y:lG.y}}}if(ss.isValue(lC.tooltipHtml)||ss.isValue(lC.selectionHtml)||ss.isValue(lC.buttonModels)&&lC.buttonModels.length>0||lB.length>0){return lC}return null};ku.$a=function(e){if(ss.isNullOrUndefined(e)){return null}return e.get_vizDataModel()};ku.createLocalUberTipModel=function(e,ex,lA,lB){var lC=lA.get_interactedTupleId();var lD=lA.get_affectedTupleIds();var lE=lA.get_paneDescriptorKey();var lF=ku.$a(ex);if(ss.isNullOrUndefined(lF)){return null}var lG=lF.get_ubertipData();var lH=ku.$9(lG,lE);var lI=ku.$7(lH.htmlTooltip,ex.get_visualId(),lC);var lJ=Y.get_instance().get_dataDictionary();var lK=lH.htmlTooltip;var lL=lF.getVizDataField(lG.fn);if(ss.isValue(lL)){var lM=kL.lookupRawDataValue(lC,lL,lJ);if(ss.contains(lH.fieldVector,lM)){lK=lH.htmlTooltipModified}}var lN=kN.constructHtml(lJ,lK,lF,[lC]);var lO=null;var lP=false;if(lD.length>1&&lH.showButtons){lP=true;lO=ku.$8(lJ,lF,lD,lH.summaryField)}var lQ=[];var lR=lC;if(lR<0){lR=0}var lS=kN.hasTupleWithNonTotalValue(lF,lJ,lD);if(lH.showButtons&&lF.hasDimensionColumnNotMeasureNames()){if(lS){var lT=ku.$e(null,e);lQ=ku.$3(lG.standardCommands,ex.get_visualId(),e,lR,lT)}if(lP){var lU=ku.$e(null,e);lQ=ku.$3(lG.multiselectCommands,ex.get_visualId(),e,lR,lU)}lQ=_.filter(lQ,function(lZ){return lZ.get_commandType()!==10});if(lB){var lV=ku.$5();lQ.push(lV)}}var lW;if(lS){lW=P.getApplicableActions(ex.get_visualId().worksheet,'explicitly',null);lW=_.filter(lW,function(lZ){if(lZ.activation==='explicitly'&&P.getActionType(lZ)!=='url'&&lZ.targetWorksheets.length===0){return false}return true})}else{lW=[]}var lX=lH.htmlTooltip.toString().length===0;if(ss.isValue(lN)||ss.isValue(lO)||lQ.length>0||lW.length>0){var lY={tooltipHtml:lN,selectionHtml:lO,tupleId:lR,interactedTupleId:lC,isExplicitlyEmpty:lX,actionPMs:lW,buttonModels:lQ,contentCommands:lI,visualId:ex.get_visualId()};return lY}return null};ku.$5=function(){var e=new cc;e.set_commandType(10);e.imageRes=kd.lookupResourceAlias('TQRC_SPLIT');e.set_name('');var ex=e;if(tsConfig.is_mobile){var lA=tab.Strings.UbertipTooltip_GroupMobile;var lB=tab.Strings.UbertipTooltip_SplitMobile;ex.description=((lB.length>lA.length)?lB:lA)}var lC=new cd;lC.update(ex,true);return lC};ku.paneContainsViT=function(e,ex){if(ss.isNullOrUndefined(e)){return false}var lA=e.get_vizDataModel();if(ss.isNullOrUndefined(lA)){return false}var lB=lA.get_ubertipData();if(ss.isNullOrUndefined(lB)){return false}if(ss.isNullOrUndefined(ex)){for(var lC=0;lC<lB.ubertipPaneDatas.length;lC++){var lD=lB.ubertipPaneDatas[lC];if(kN.objectContainsVizInTooltip($(lD.htmlTooltip))){return true}}return false}else{return kN.objectContainsVizInTooltip($(ku.$9(lB,ex).htmlTooltip))}};ku.$9=function(e,ex){if(e.ubertipPaneDatas.length===1){return e.ubertipPaneDatas[0]}for(var lA=0;lA<e.ubertipPaneDatas.length;lA++){var lB=e.ubertipPaneDatas[lA];if(ss.isValue(lB.paneDescriptor)){if(ss.referenceEquals(lB.paneDescriptor.paneDescrKey,ex)){return lB}}}return null};ku.$7=function(e,ex,lA){if(lA===0){return[]}var lB=$(e);var lC=lB.find('a.relax-selection');var lD=lC.length;var lE=[];for(var lF=0;lF<lD;lF++){var lG=lC.eq(lF);var lH=lG.children().eq(0);var lI=ss.replaceAllString(ss.replaceAllString(ss.replaceAllString(ss.replaceAllString(lH.text(),'<[','['),']>',']'),'>>','>'),'<<','<');var lJ=lG.attr('href');var lK=ku.$0(ex,lI,lJ,lA);lE[lF]=lK}return lE};ku.$0=function(e,ex,lA,lB){var lC={};lC['visualIdPresModel']=e;lC['worksheet']=e.worksheet;lC['fn']=ex;lC['tupleId']=lB.toString();var lD=cl.newCommand({ns:'tabdoc',cmd:'select-by-tuple-value'},lC);var lE=new cc;lE.set_commandType(23);lE.set_name(lA);lE.command=lD;var lF=lE;return lF};ku.$8=function(e,ex,lA,lB){var lC=ex.getVizDataField(lB||'');if(ss.isValue(lC)){var lD=[];$.extend.apply(null,[true,lD].concat(ku.$g));lD[2]=lA.length.toString();lD[4]=tab.Strings.UbertipItemsSelected;if(lC.get_aggType()!=='sum'){lD[8]=tab.Strings.SumOf}lD[10]=lB;lD[14]='&lt;'+lB+'&gt;';var lE=lD.join('');return kN.constructHtml(e,lE,ex,lA)}else{ku.$h[2]=lA.length.toString();ku.$h[4]=tab.Strings.UbertipItemsSelected;return ku.$h.join('')}};ku.$e=function(e,ex){var lA=ss.isNullOrUndefined(ex);var lB=false;if(ss.isValue(e)&&ss.isValue(e.r)){switch(e.r){case'viz':case'xheader':case'yheader':case'bottomaxis':case'leftaxis':case'rightaxis':case'topaxis':{lB=true;break}}lB=lB&&!e.refLineSelected&&!e.trendLineSelected}return!tsConfig.previewMode&&(lB||!lA)};ku.$d=function(){return tsConfig.is_mobile};ku.$1=function(e,ex,lA){var lB=cj.create(e);if(ss.isNullOrUndefined(lB)||ss.isNullOrUndefined(lB.get_commandItems())){return}var lC=lB.get_commandItems();for(var lD=0;lD<lC.length;lD++){var lE=lC[lD];var lF=bZ.create(lE);var lG=new cc;lG.command=ch.deserialize(lF.get_command());var lH=lG;if(ss.isValue(lH.command)){ku.buildCommandModelFromWrapper(lH,lF,lA);ex.push(lH)}if(ss.isValue(lF.get_commands())){ku.$1(lF.get_commands(),ex,lA)}}};ku.$2=function(e,ex,lA){var lB=e.commands;var lC=ku.$e(e,lA);return ku.$3(lB,ex,lA,0,lC)};ku.$3=function(e,ex,lA,lB,lC){var lD=cj.create(e);if(ss.isNullOrUndefined(lD)||ss.isNullOrUndefined(lD.get_commandItems())){return[]}var lE=[];var lF=lD.get_commandItems();for(var lG=0;lG<lF.length;lG++){var lH=lF[lG];var lI=bZ.create(lH).get_command();var lJ=ss.isNullOrUndefined(lI);if(lJ){var lK=new kr;lK.update(lH,lB);lE.push(lK)}else{var lL=new bY;lL.update(lH,lB);lE.push(lL)}}if(lC&&lE.length>0){var lM=ss.isNullOrUndefined(lA);lE.push(ku.$6(lE,lM,lA,ex))}if(ku.$d()){lE.push(ku.$4())}return lE};ku.$6=function(e,ex,lA,lB){var lC=new cc;lC.set_commandType(7);lC.status='enabled';lC.description=tab.Strings.UbertipTooltip_ViewData;lC.command=cl.newCommand({ns:'tabdoc',cmd:'viewData'},{});var lD=lC;var lE=ku.$b(e,ex,lA);if(ss.isValue(lE)){lD.command.commandParams['selectAtPoint']=lE}if(ss.isValue(lB)){lD.command.commandParams['visualId']=lB}var lF=new cd;lF.update(lD,false);return lF};ku.$b=function(e,ex,lA){if(ex){for(var lB=0;lB<e.length;lB++){var lC=e[lB];if(ss.isValue(lC.get_serializedCommand())&&ss.isValue(lC.get_serializedCommand().commandParams)&&ss.keyExists(lC.get_serializedCommand().commandParams,'selectAtPoint')){return lC.get_serializedCommand().commandParams['selectAtPoint']}}return null}else{return JSON.stringify(tab.PointUtil.toPresModel(lA))}};ku.$4=function(){var e=new cc;e.set_commandType(1);e.set_name(tab.Strings.UbertipClearSelection);e.status='enabled';var ex=e;var lA=new cd;lA.update(ex,false);return lA};ku.buildCommandModelFromWrapper=function(e,ex,lA){ku.setCommandType(e);e.set_name(ex.get_name());e.description=ex.get_description();if(!tab.MiscUtil.isNullOrEmpty$3(ex.get_iconRes())){e.imageRes=kd.lookupFullResourceAlias(ex.get_iconRes())}var lB=ex.get_enabled();e.status=((ss.isNullOrUndefined(lB)||lB)?'enabled':'disabled');if(lA!==0&&!ss.isValue(e.command.commandParams['selectAtPoint'])){e.command.commandParams['tupleId']=lA.toString()}};ku.setCommandType=function(e){var ex=ch.getCommandType(e.command);if(ss.isValue(ex)){e.set_commandType(ss.unbox(ex))}};ku.$c=function(e){return(ss.isNullOrEmptyString(e)?null:e)};global.tab.UbertipSerializer=ku;var kv=function(){this.$0=null;this.$0={}};kv.__typeName='tab.UnionFontFamilyProviderBuilder';global.tab.UnionFontFamilyProviderBuilder=kv;var kw=function(){ss.makeGenericType(bd,[Object,kx]).call(this)};kw.__typeName='tab.UpdateDataAlertCmd';global.tab.UpdateDataAlertCmd=kw;var kx=function(e){this.$$c=null;this.$$c=e};kx.__typeName='tab.UpdateDataAlertCmd$Response';global.tab.UpdateDataAlertCmd$Response=kx;var ky=function(){};ky.__typeName='tab.UriPathStripper';ky.getModuleFromPath=function(e,ex){var lA=tsConfig.site_root||'';var lB=e.indexOf(lA,0);var lC;if(lB===-1){lC=e.substr(1)}else{var lD=lB+lA.length;lC=e.substr(lD+1)}for(var lE=0;lE<ex.length;lE++){var lF=ex[lE];if(ss.startsWithString(lC,lF+'/')||ss.referenceEquals(lC,lF)){return lF}}return''};ky.getMeatFromPath=function(e,ex){var lA=ky.getModuleFromPath(e,ex);var lB=e.indexOf(lA,0);return e.substr(lB+lA.length+1)};global.tab.UriPathStripper=ky;var kz=function(){};kz.__typeName='tab.UrlStringReplacementOutcome';global.tab.UrlStringReplacementOutcome=kz;var kA=function(){};kA.__typeName='tab.UserFactory';kA.currentUser=function(){return{id:tsConfig.current_user_id,friendlyName:tsConfig.current_user_friendly_name,username:tsConfig.current_user_name,hasEmail:!ss.isNullOrEmptyString(tsConfig.current_user_email)}};global.tab.UserFactory=kA;var kB=function(){ss.makeGenericType(bd,[Object,kC]).call(this)};kB.__typeName='tab.ValidateDataValueCmd';global.tab.ValidateDataValueCmd=kB;var kC=function(e){this.$$c=null;this.$$c=e};kC.__typeName='tab.ValidateDataValueCmd$Response';global.tab.ValidateDataValueCmd$Response=kC;var kD=function(e){gV.call(this,e,new hF('geometry'))};kD.__typeName='tab.ViewGeometryModel';global.tab.ViewGeometryModel=kD;var kE=function(e,ex,lA,lB){this.viewid=null;jw.call(this,e,ex,lB);this.viewid=lA};kE.__typeName='tab.ViewSession';kE.canUseTileCacheUrl=function(e){return ss.isValue(e)&&e.length>6};global.tab.ViewSession=kE;var kF=function(){};kF.__typeName='tab.VisualColumnHelpers';kF.copyArray=function(e,ex,lA){return Array.prototype.slice.call(e,ex,ex+lA)};kF.transformColumn=function(e,ex){if(ss.isNullOrUndefined(e)){return false}e.transform(ex);return true};kF.buildColorTable=function(e,ex,lA,lB){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(ex)||!ex.has('color_idx')){return null}var lC=1;if(ex.has('alpha')&&ex.get('alpha').c){var lD=ex.get('alpha');lC=lD.v[(lD.c?0:0)]}var lE=[];var lF={};var lG=ex.get('color_idx');var lH=lG.length;for(var lI=0;lI<lH;lI++){var lJ=lG.v[(lG.c?0:lI)];if(ss.keyExists(lF,lJ)){lG.v[(lG.c?0:lI)]=lF[lJ]}else{var lK=bQ.fromArgbInt(e.colorList[lJ]);lK=new bQ(lK.get_r(),lK.get_g(),lK.get_b(),lC*lK.get_a());lE.push(iH.createColorCollection(lK,lA,lB));lG.v[(lG.c?0:lI)]=lE.length-1;lF[lJ]=lG.v[(lG.c?0:lI)]}}return lE};kF.buildOpaqueColorTable=function(e){if(ss.isNullOrUndefined(e)){return null}var ex=[];for(var lA=0,lB=e.length;lA<lB;lA++){ex[lA]=iH.createOpaqueColorCollection(e[lA])}return ex};global.tab.VisualColumnHelpers=kF;var kG=function(e){this.v=null;this.length=0;this.isValid=false;this.c=false;this.v=e;this.isValid=ss.isValue(this.v)&&this.v.length>0;this.length=(this.isValid?this.v.length:0);this.c=false};kG.__typeName='tab.VisualColumnIterator';kG.create=function(e){if(ss.isNullOrUndefined(e)){return null}if(e.length===1){return new I(e)}return new kG(e)};global.tab.VisualColumnIterator=kG;var kH=function(e){this.$1=null;this.$2$1=null;gV.call(this,e,new hF('visuallist'))};kH.__typeName='tab.VisualListModel';global.tab.VisualListModel=kH;var kI=function(e){this.$z=null;this.$s=null;this.$j=null;this.$n={};this.$p=null;this.$g=null;this.$A=null;this.$y=null;this.$u=null;this.$t=null;this.$B=null;this.$F=null;this.$l=null;this.$D=null;this.$C=null;this.$h=null;this.$q=null;this.$r=null;this.$f=null;this.$o=null;this.$e=null;this.$k=null;this.$E=false;this.$i=false;this.$m=false;this.$v=null;this.$w=$.Deferred();this.$x=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;this.$2$9=null;this.$2$10=null;this.resizeInfoModel=null;gV.call(this,e,new hF('visual'.toString()));this.$r=new Map;this.$f=new Map;this.$o=new Map;this.$e=new Map;this.$z=new iZ(this,'selectionList'.toString());this.$s=new iW(null,-1);this.$j=new iZ(this,'brushingSelectionList'.toString());this.$E=true;this.$i=false;this.$m=false;this.$x=new iD;this.$s.update(iZ.$1('tuples'),hc.get_noopContext())};kI.__typeName='tab.VisualModel';kI.$0=function(){return tab.Logger.lazyGetLogger(kI)};global.tab.VisualModel=kI;var kJ=function(){};kJ.__typeName='tab.VizClientCommands';kJ.invalidateVisualModel=function(e){kJ.$0(e,false)};kJ.validateVisualModel=function(e){kJ.$0(e,true)};kJ.$0=function(e,ex){var lA=new H(function(lB){gY.setVisualValidAndUpToDateStateOnModel(lB,e,ex)});bT.SendCommand(lA)};kJ.setUIMode=function(e,ex,lA){var lB=Y.get_instance().get_workbook();if(lB.get_uiMode()===e){return}var lC=ss.referenceEquals(lA,tsConfig.current_sheet_name);var lD=e==='document'&&lC;var lE=new bI;lE.c['uiMode']=e;lE.set_uiBlocking((lD?'none':'immediately'));var lF=lE;if(!ss.isNullOrEmptyString(lA)){lF.c['sheetName']=lA}if(hf.get_telemetryEnabled()&&tab.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry')){if(e==='data-tab'){hf.logEvent('Authoring_DataTab_Open',['Source',ex])}else if(lB.get_uiMode()==='data-tab'){hf.logEvent('Authoring_DataTab_Close',['ReturnToSameSheet',lC])}}if(lD){lF.set_localWork(function(lG){var lH=lG.makeMutablePresModel(lB,false);lH.uiMode=e})}lF.invoke().done(function(){if(lC){var lG=dC.constructEnsureLayoutForSheetCommand();bT.SendCommand(lG)}})};global.tab.VizClientCommands=kJ;var kK=function(e,ex){this.$a=null;this.$d=null;this.$c=false;this.$b=false;this.$e=null;this.$a=e;this.$d=ex;this.$e={};this.$6();this.$c=this.$1();this.$b=this.$0()};kK.__typeName='tab.VizDataField';global.tab.VizDataField=kK;var kL=function(){};kL.__typeName='tab.VizDataLookup';kL.lookupDisplayValue=function(e,ex,lA){if(!ex.isTupleIdValid(e)){kL.$2(e,ex.get_fieldCaption());return null}if(ex.get_hasAliases()){var lB=kL.lookupAlias(e,ex,lA);if(ss.isValue(lB)){return lB}}if(ex.get_hasDataValues()){var lC=kL.$3(e,ex,lA);if(ss.isValue(lC)){return lC}}kL.$2(e,ex.get_fieldCaption());return null};kL.$2=function(e,ex){var lA=ss.formatString('Failed trying to look up the display value for tuple id "{0}" because it is invalid for field "{1}"',e,ex)};kL.$1=function(e){return ss.Nullable$1.lt(e,0)};kL.$0=function(e){return ss.Nullable$1.sub(ss.Nullable$1.neg(e),1)};kL.lookupAlias=function(e,ex,lA){if(!ex.isTupleIdValid(e)){kL.$2(e,ex.get_fieldCaption());return null}var lB=ex.getAliasIndex(e);return kL.lookupAliasFromIndex(lB,ex,lA)};kL.lookupAliasFromIndex=function(e,ex,lA){var lB=null;if(ss.isValue(e)){if(kL.$1(e)){e=kL.$0(e);lB=lA.getRawValue('cstring',ss.unbox(e));if(tableau.format.isSpecialValue(lB)){lB=tableau.format.formatSpecial(lB,ex.get_specialValuesOverride())}}else{var lC=e;lB=kL.$4(lC,ex,lA)}}return lB};kL.lookupRawDataValue=function(e,ex,lA){var lB=ex.getDataValueIndex(e);return kL.lookupRawDataValueFromIndex(lB,ex,lA)};kL.lookupRawDataValueFromIndex=function(e,ex,lA){var lB=null;if(ss.isValue(e)){var lC;var lD=ss.unbox(e);if(lD>=0){lC=ex.get_dataType()}else{lD=-lD-1;lC='cstring'}var lE=lA.getRawValue(lC,lD);if(ss.isValue(lE)){lB=lE.toString()}}return lB};kL.$3=function(e,ex,lA){var lB=ex.getDataValueIndex(e);return kL.$4(lB,ex,lA)};kL.$4=function(e,ex,lA){var lB=null;var lC=kL.lookupRawDataValueFromIndex(e,ex,lA);if(ss.isValue(lC)){if(tableau.format.isSpecialValue(lC)){lB=tableau.format.formatSpecial(lC,ex.get_specialValuesOverride())}else{lB=tableau.format.formatString(lC,ex.get_vizColumnDoNotUse())}}return lB};kL.reverseLookupAlias=function(e,ex,lA,lB){var lC=null;if(lA.get_hasAliases()){ex.forEachTupleId(function(lD){var lE=kL.lookupAlias(lD,lA,lB);if(ss.compareStrings(lE,e,false)===0){lC=lA.getAliasIndex(lD);return false}return true})}return lC};kL.buildAliasReverseLookup=function(e,ex,lA){var lB={};if(ex.get_hasAliases()){e.forEachTupleId(function(lC){var lD=kL.lookupAlias(lC,ex,lA);if(ss.isNullOrUndefined(lB[lD])){lB[lD]=ex.getAliasIndex(lC)}return true})}return lB};kL.isSpecial=function(e,ex,lA,lB){var lC=kL.lookupRawDataValue(e,ex,lA);if(ss.isNullOrUndefined(lC)){var lD=ex.getAliasIndex(e);if(ss.isValue(lD)){if(kL.$1(lD)){lD=kL.$0(lD)}var lE=lD;lC=kL.lookupRawDataValueFromIndex(lE,ex,lA)}if(ss.isNullOrUndefined(lC)){return false}}return(ss.isNullOrUndefined(lB)?tableau.format.isSpecialValue(lC):ss.referenceEquals(lC,lB))};global.tab.VizDataLookup=kL;var kM=function(e){this.$4=null;this.$6=null;this.$5=null;this.$2$1=null;gV.call(this,e,new hF('vizData'.toString()));this.$4=[];this.$5=[]};kM.__typeName='tab.VizDataModel';global.tab.VizDataModel=kM;var kN=function(){};kN.__typeName='tab.VizDataUtils';kN.constructUrl=function(e,ex,lA,lB,lC){var lD=function(lE,lF,lG){if(ss.isNullOrEmptyString(lF)){if(ss.isValue(lB)){return kN.$6(e,lE,lB,1,ex)}return null}var lH=kN.$1(e,lE,lF,ex.delimiter);if(ex.shouldUrlEscape){lH=encodeURIComponent(lH)}return lH};return kN.decodeAndReplaceData(ex.url,'<','>',lA,lD)};kN.constructUrlForFilterActionFromTargetURL=function(e,ex,lA,lB,lC){var lD=function(lL,lM,lN){return kN.$5(e,lL,lC,lN,lA)};var lE=ex.toString().split('?');if(lE.length===1){return ex}var lF=lE[0]+'?';var lG=lE[1].split('&');var lH=[];for(var lI=0;lI<lG.length;lI++){var lJ=lG[lI];var lK=kN.decodeAndReplaceData(lJ,'<','>',lB,lD);if(lK.item2==='success'){lH.push(lK.item1)}}lF+=lH.join('&');return lF};kN.constructUrlFromString=function(e,ex,lA,lB,lC,lD){var lE=function(lG,lH,lI){if(ss.isNullOrEmptyString(lH)){return kN.$2(e,lG,lB,1)}else{return kN.$1(e,lG,lH,lD)}};var lF=kN.decodeAndReplaceData(ex,'<','>',lA,lE);return lF.item1};kN.constructHtml=function(e,ex,lA,lB){var lC=function(lG,lH,lI){return kN.$2(e,lG,lB,0)};var lD=kN.decodeAndReplaceData(ex,'&lt;','&gt;',lA,lC);var lE=$(lD.item1);var lF=[];kN.getNodesOfInvalidFields(lE,lF);kN.$0(lE,lF);kN.updateVizInTooltipPlaceholderStyles(lE);return(kN.shouldShowUbertipHTML(lE)?lE.wrap('<div>').parent().html():'')};kN.updateVizInTooltipPlaceholderStyles=function(e){if(tab.FeatureFlags.isEnabled('VizInTooltip')){var ex=e.find('span[data-tableau="VizInTooltip"]');ex.addClass('tab-ubertipPlaceholder');var lA=Math.min(ex.length,kN.lastWidthAndHeightForVizInTooltips.length);for(var lB=0;lB<lA;lB++){ex[lB].style.width=kN.lastWidthAndHeightForVizInTooltips[lB].item1;ex[lB].style.height=kN.lastWidthAndHeightForVizInTooltips[lB].item2}}};kN.updateLastVizInTooltipSizes=function(e){var ex=$(e);var lA=ex.find('span[data-tableau="VizInTooltip"] img');var lB=lA.length;kN.widestVizInTooltip=0;for(var lC=0;lC<lB;lC++){var lD=parseInt(lA[lC].getAttribute('height'));var lE=parseInt(lA[lC].getAttribute('width'));kN.lastWidthAndHeightForVizInTooltips[lC]={item1:(lE+'px').toString(),item2:(lD+'px').toString()};if(lE>kN.widestVizInTooltip){kN.widestVizInTooltip=lE}}};kN.decodeAndReplaceData=function(e,ex,lA,lB,lC){var lD='success';var lE=kN.$4(e,'escaped_open_tag');var lF=kN.$4(e,'escaped_close_tag');var lG=ss.replaceAllString(ss.replaceAllString(e,ex+ex,lE),lA+lA,lF);var lH=lG.split(ex);var lI=new ss.StringBuilder(lH.shift());for(var lJ=0;lJ<lH.length;lJ++){var lK=lH[lJ];var lL=lK.split(lA);var lM=ss.htmlDecode(ss.replaceAllString(ss.replaceAllString(lL[0],lE,ex),lF,lA));var lN=lL[1];var lO=true;var lP=lM.lastIndexOf(String.fromCharCode(126));var lQ=lM.lastIndexOf(String.fromCharCode(93));if(lP>=0&&(lQ===-1||lQ<lP)){var lR=lM.substr(lP);lM=lM.substr(0,lP);if(lR==='~na'){lO=false}}var lS=null;if(kN.$7(lM)){var lT=lM.indexOf('(');lS=lM.substring(0,lT);lM=lM.substring(lT+1,lM.length-1)}var lU=lM.indexOf(String.fromCharCode(91));var lV=lM.lastIndexOf(String.fromCharCode(93));if(lU>=0&&lU<lV){lM=lM.substring(lU+1,lV)}if(ss.startsWithString(lM,'Parameters.')){return{item1:'',item2:'notEnoughInfoYet'}}var lW=lB.getVizDataField(lM);if(ss.isNullOrUndefined(lW)){return{item1:'',item2:'urlConstructionFail'}}var lX=lC(lW,lS,lO);if(ss.isNullOrUndefined(lX)){lD='urlConstructionFail'}else{lI.append(lX)}lI.append(lN)}var lY=ss.replaceAllString(ss.replaceAllString(lI.toString(),lE,ex),lF,lA);return{item1:lY,item2:lD}};kN.hasTupleWithNonTotalValue=function(e,ex,lA){for(var lB=0;lB<lA.length;lB++){var lC={$:lA[lB]};var lD={$:false};e.forEachVizDataField(ss.mkdel({tupleId:lC,tupleHasTotal:lD},function(lE,lF){if(lE.get_role()==='dimension'){if(kL.isSpecial(this.tupleId.$,lE,ex,'%all%')){this.tupleHasTotal.$=true;return false}}return true}));if(!lD.$){return true}}return false};kN.isFieldNameOfColumn=function(e,ex){var lA=kN.stripNewlines(e.fn);var lB=kN.stripNewlines(ex);var lC='['+lB+']';return ss.referenceEquals(lB,lA)||ss.referenceEquals(lB,kN.stripNewlines(e.fnDisagg))||ss.referenceEquals(lC,lA)||ss.referenceEquals(lC,kN.stripNewlines(e.localBaseColumnName))};kN.isFieldCaptionOfColumn=function(e,ex){return ss.referenceEquals(kN.stripNewlines(ex),kN.stripNewlines(e.fieldCaption))};kN.$4=function(e,ex){var lA=ex;while(e.indexOf(lA)>-1){lA+=Math.random()*10000|0}return lA};kN.stripNewlines=function(e){return(ss.isValue(e)?e.replace(kN.$8,''):null)};kN.objectContainsVizInTooltip=function(e){return tab.FeatureFlags.isEnabled('VizInTooltip')&&e.has('span[data-tableau="VizInTooltip"]').length!==0};kN.shouldShowUbertipHTML=function(e){return!tab.MiscUtil.isNullOrEmpty$3(e.text().trim())||kN.objectContainsVizInTooltip(e)};kN.getNodesOfInvalidFields=function(e,ex){var lA='';var lB=e.contents().get();for(var lC=0;lC<lB.length;lC++){var lD=lB[lC];if(lD.nodeType===3){lA+=lD.textContent||(lD.textContent||'')}else{kN.getNodesOfInvalidFields($(lD),ex)}}if(lA.indexOf('~~~???~~~')!==-1){ex.push(e)}};kN.addVizDataToZones=function(e,ex){var lA=_.keys(ex);var lB=_.keys(e);for(var lC=0;lC<lB.length;lC++){var lD=lB[lC];for(var lE=0;lE<lA.length;lE++){var lF=lA[lE];var lG=ex[lF];if(lG.zoneCommon.zoneType==='viz'&&ss.referenceEquals(lG.sheet,lD)){var lH=lG.presModelHolder['visual'.toString()];if(ss.isValue(lH)){var lI=e[lD].presModelHolder;lH.vizData=lI['genVizDataPresModel']}break}}}};kN.$0=function(e,ex){for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];var lC=kN.$3(e,lB,'tr');if(ss.isValue(lC)){lC.remove()}else{var lD=kN.$3(e,lB,'div');if(ss.isValue(lD)){lD.remove()}else{lB.remove()}}}};kN.$3=function(e,ex,lA){var lB=ex;if(ss.isValue(e)&&ss.isValue(ex)&&e.find(ex).length===1){while(!ss.referenceEquals(lB[0],e[0])){if(ss.referenceEquals(lB[0].tagName.toLowerCase(),lA)){return lB}lB=lB.parent()}}return null};kN.$6=function(e,ex,lA,lB,lC){var lD=[];for(var lE=0;lE<lA.length;lE++){var lF=lA[lE];var lG=kL.lookupAlias(lF,ex,e);if(ss.isNullOrUndefined(lG)){continue}if(kL.isSpecial(lF,ex,e,null)){continue}if(lG.indexOf(lC.delimiter)!==-1){lG=ss.replaceAllString(lG,lC.delimiter,lC.escapeString+lC.delimiter)}if(lC.shouldUrlEscape){lG=encodeURIComponent(lG)}lD.push(lG)}if(lD.length===0){return null}if(lD.length>1&&ss.isNullOrUndefined(lC.delimiter)){return null}var lH=lD.join(lC.delimiter);if(lB===0){lH=tableau.format.escapeHTML(lH)}return lH};kN.$5=function(e,ex,lA,lB,lC){var lD=[];for(var lE=0;lE<lA.length;lE++){var lF=lA[lE];var lG=(lB?kL.lookupAlias(lF,ex,e):kL.lookupRawDataValue(lF,ex,e));lG=kN.replaceUrlStringSpecialValues(lG);lG=ss.replaceAllString(lG,lC.delimiter,lC.escapeString+lC.delimiter);lD.push(lG)}return encodeURIComponent(lD.join(lC.delimiter))};kN.replaceUrlStringSpecialValues=function(e){switch(e){case'%null%':{return'~~null~'}case'%skipped%':{return'~~skipped~'}case'%ragged%':{return'~~ragged~'}default:{return e}}};kN.$2=function(e,ex,lA,lB){var lC;if(lA.length>1){if(!ex.get_hasDataValues()){return'...'}var lD=new Array(lA.length);for(var lE=0;lE<lA.length;++lE){var lF=kL.lookupRawDataValue(lA[lE],ex,e);if(lF===null||tableau.format.isSpecialValue(lF)){lF='0'}else if(typeof(lF)==='undefined'||lF.length===0){return'...'}lD[lE]=lF}var lG=0;for(var lH=0;lH<lD.length;++lH){lG+=parseFloat(lD[lH])}lC=tableau.format.formatString(lG.toString(),ex.get_vizColumnDoNotUse())}else if(lA.length===1){var lI=kL.lookupDisplayValue(lA[0],ex,e);if(ss.isNullOrUndefined(lI)){return'~~~???~~~'}lC=lI}else{return''}if(lB===0){return tableau.format.escapeHTML(lC)}else{return lC}};kN.$7=function(e){return ss.startsWithString(e,'FILTERMIN(')||ss.startsWithString(e,'FILTERMAX(')||ss.startsWithString(e,'FILTERVALUES(')};kN.$1=function(e,ex,lA,lB){if(ss.isNullOrUndefined(ex)||ss.isNullOrUndefined(ex.get_filterContext())){return''}var lC=ex.get_filterContext();var lD;switch(lA){case'FILTERMIN':{lD=lC.filterMinIndices;break}case'FILTERMAX':{lD=lC.filterMaxIndices;break}case'FILTERVALUES':{lD=lC.filterValueIndices;break}default:{return''}}if(tab.MiscUtil.isNullOrEmpty$2(lD)){return''}var lE=[];for(var lF=0;lF<lD.length;lF++){var lG=lD[lF];var lH=kL.lookupRawDataValueFromIndex(lG,ex,e);lE.push(lH)}return lE.join(lB||',')};global.tab.VizDataUtils=kN;var kO=function(){};kO.__typeName='tab.VizPortalServer';kO.createRequest=function(e,ex,lA,lB){var lC=function(lD){if(kO.$5(lD)){lB(kO.$2(lD))}else{lA(lD)}};return kO.$1(e,ex,lC,lB)};kO.createRequestWithPartialFailureHandling=function(e,ex,lA,lB,lC){var lD=function(lE){if(kO.$5(lE)){lB(lE)}else{lA(lE)}};return kO.$1(e,ex,lD,lC)};kO.$0=function(e){return kO.$1(e.methodName,e.methodParams,e.success,e.error)};kO.$1=function(e,ex,lA,lB){var lC=new Object;lC.type='POST';lC.contentType='application/json;charset=UTF-8';lC.dataType='json';lC.url='/vizportal/api/web/v1/'+e;var lD=kO.$4();if(ss.isValue(lD)){lC.headers=ss.mkdict(['X-XSRF-TOKEN',lD])}lC.data=JSON.stringify(ss.mkdict(['method',e,'params',ex]));lC.success=function(lE,lF,lG){lA(kO.$3(lE))};lC.error=function(){lB(0)};return lC};kO.$4=function(){var e=document.cookie.match(new RegExp('(^|;) ?XSRF-TOKEN=([^;]*)(;|$)'));return(ss.isValue(e)?e[2]:null)};kO.$5=function(e){if(ss.keyExists(e,'errors')){var ex=e['errors'];return ex.length>0}else{return false}};kO.$2=function(e){if(ss.keyExists(e,'errors')){var ex=e['errors'];if(ex.length>0&&ss.keyExists(ex[0],'code')){return ex[0]['code']}}return 0};kO.$3=function(e){var ex=e;return ex['result']};global.tab.VizPortalServer=kO;var kP=function(e,ex,lA,lB){this.methodName=null;this.methodParams=null;this.success=null;this.error=null;this.methodName=e;this.methodParams=ex;this.success=lA;this.error=lB};kP.__typeName='tab.VizqlSessionRequest';global.tab.VizqlSessionRequest=kP;var kQ=function(e){this.$0=null;this.$0=e};kQ.__typeName='tab.VizRegionRectWrapper';kQ.create=function(e){return new kQ(e)};global.tab.VizRegionRectWrapper=kQ;var kR=function(e){this.explicitNotGuest=false;this.$l=0;this.$m='';this.$k='';this.$e='';this.$i={};this.$f='';this.$g='';this.$h='';this.$j='';if(ss.getKeyCount(kR.$f)===0){kR.$4()}if(ss.isValue(e)){this.$5(e)}};kR.__typeName='tab.VizUriModel';kR.createForCurrentWindowLocation=function(e){return new kR(tab.WindowHelper.getLocation(e||tabBootstrap.Utility.get_locationWindow()))};kR.createForViewingSheet=function(e){var ex=kR.$0(null);ex.$l=(tsConfig.is_revision_history_preview?6:(ex.$l=1));var lA=new ie(e);ex.$m=lA.get_workbookId();ex.$k=lA.get_sheetId();ex.$f=lA.get_customizedView();ex.$e='';return ex};kR.createForViewingSheets=function(e,ex){if(ss.isNullOrUndefined(e)||e.length===0){return[]}var lA=e.length;var lB=new Array(lA);var lC=kR.$0(null);lC.$l=1;lC.$e='';if(!ex){lC.removeAllQueryParams();lC.removeHash()}for(var lD=0;lD<lA;lD++){var lE=lC.clone();var lF=e[lD];var lG=new ie(lF);lE.$m=lG.get_workbookId();lE.$k=lG.get_sheetId();lE.$f=lG.get_customizedView();lB[lD]=lE}return lB};kR.createForCurrentWindowLocationAndVizState=function(e,ex){var lA=kR.createForCurrentWindowLocation();var lB=new ie(e);lA.$m=lB.get_workbookId();lA.$k=lB.get_sheetId();lA.$f=lB.get_customizedView();lA.$e=ex;return lA};kR.createForAuthoringUnpublishedSheet=function(e,ex){var lA=kR.createForAuthoringPublishedSheet(e);lA.$e=ex;return lA};kR.createForAuthoringPublishedSheet=function(e){var ex=kR.$0(null);ex.$l=2;var lA=new ie(e);ex.$m=lA.get_workbookId();ex.$k=lA.get_sheetId();ex.$e='';return ex};kR.createInvalid=function(){var e=new kR;e.$l=0;return e};kR.$4=function(){var e=ss.getEnumerator(Object.keys(kR.$j));try{while(e.moveNext()){var ex=e.current();kR.$f[kR.$j[ex]]=ex}}finally{e.dispose()}};kR.$0=function(e){if(tab.MiscUtil.isNullOrEmpty$2(e)){e=tabBootstrap.Utility.get_locationWindow()}var ex=tab.WindowHelper.getLocation(e);var lA=new kR(ex);lA.$i=kR.$3(ex);lA.$g=ex.hash;lA.$h=BrowserSupport.BrowserSupport.GetOrigin(ex);return lA};kR.$3=function(e){var ex=tab.UriExtensions.getUriQueryParameters(e.href);for(var lA=0;lA<kR.$i.length;lA++){var lB=kR.$i[lA];if(ss.keyExists(ex,lB)){delete ex[lB]}}return ex};kR.encodeUserName=function(e){var ex=tab.MiscUtil.percentEncode(e,kR.$g);return ss.replaceAllString(ex,'%40','@')};kR.createVizUriModelForAuthoringSheetInWorkbook=function(e,ex){var lA;var lB=kR.$2(e,ex);if(lB.length>0){lA=kR.createForAuthoringPublishedSheet(ex.repositoryUrl+'/'+lB)}else{var lC=kR.$1(ex);lA=kR.createForAuthoringUnpublishedSheet(ex.repositoryUrl+'/'+lC,e)}if(tab.MiscUtil.isNullOrEmpty$2(lA)){lA=kR.createInvalid()}return lA};kR.createVizUriModelForViewingSheetInWorkbook=function(e,ex){var lA=kR.$2(e,ex);return((lA.length>0)?kR.createForViewingSheet(ex.repositoryUrl+'/'+lA):kR.createInvalid())};kR.$2=function(e,ex){var lA=_.find(ex.views,function(lB){return ss.referenceEquals(lB.name,e)});return(ss.isNullOrUndefined(lA)?'':lA.sheetId)};kR.$1=function(e){var ex=_.first(e.views);return(ss.isNullOrUndefined(ex)?'':ex.sheetId)};global.tab.VizUriModel=kR;var kS=function(){};kS.__typeName='tab.VizUriType';global.tab.VizUriType=kS;var kT=function(){};kT.__typeName='tab.WaitFeedbackType';global.tab.WaitFeedbackType=kT;var kU=function(){this.$c=null;this.$i=null;this.$g=0;this.$h=null;this.$f=false;this.$e=false;this.$b=null;this.$d=null;this.$j=null;this.glassOpacityChangeDelay=ss.coalesce(tab.FeatureParamsLookup.getInt(48),2000);this.spinnerShowDelay=ss.coalesce(tab.FeatureParamsLookup.getInt(49),2000);this.$c=$('#loadingGlassPane');this.$c.on('mousedown',function(ex){ex.stopImmediatePropagation()});this.$c.on(BrowserSupport.BrowserSupport.MouseWheelEvent(),function(ex){ex.preventDefault()});this.$i=$('#loadingSpinner');this.$g=0;this.$f=true;this.$e=false;var e=ss.mkdel(this,this.$6);document.body.addEventListener('keydown',e,true);document.body.addEventListener('keyup',e,true);document.body.addEventListener('keypress',e,true)};kU.__typeName='tab.WaitHandler';kU.$0=function(e,ex,lA){e.css('opacity','0');e.css('transition',ex+'ms opacity');e.show();e.css('display');e.css('opacity',lA.toString())};kU.loadingElementFadeOut=function(e,ex,lA){e.css('transition',ex+'ms opacity');window.setTimeout(function(){e.css('opacity','0')},0);window.setTimeout(function(){lA(e)},ex)};global.tab.WaitHandler=kU;var kV=function(e,ex){var lA=function(){this.$2$1=false;this.$2$2=false;this.$2$3=false;this.$2$4=false;this.$2$5=false;ss.makeGenericType(bd,[e,ex]).call(this)};ss.registerGenericClassInstance(lA,kV,[e,ex],{get_isChecked:function(){return this.$2$1},set_isChecked:function(lB){this.$2$1=lB},get_isDefault:function(){return this.$2$2},set_isDefault:function(lB){this.$2$2=lB},get_isEnabled:function(){return this.$2$3},set_isEnabled:function(lB){this.$2$3=lB},get_isRadioOn:function(){return this.$2$4},set_isRadioOn:function(lB){this.$2$4=lB},get_isVisible:function(){return this.$2$5},set_isVisible:function(lB){this.$2$5=lB},createCommand:function(){return new H(ss.mkdel(this,function(lB){this.do$1()}))},transfer:function(lB){if(ss.isValue(lB)){_.each(_.difference(Object.keys(lB),Object.keys(this.c)),ss.mkdel(this,function(lC){this.c[lC]=lB[lC]}))}},do$1:null,do$2:function(lB){return null},invoke:function(){var lB=$.Deferred();this.do$1();lB.resolve();return lB.promise()}},function(){return ss.makeGenericType(bd,[e,ex])},function(){return[]});return lA};kV.__typeName='tab.WebBaseCmd$2';ss.initGenericClass(kV,a,2);global.tab.WebBaseCmd$2=kV;var kW=function(){this.$1=null;bZ.call(this)};kW.__typeName='tab.WebCommandItemWrapper';kW.$ctor1=function(e){this.$1=null;bZ.call(this,e);var ex=ch.deserialize(this.get_command());var lA={ns:ex.commandNamespace,cmd:ex.commandName};this.$1=kY.get_instance().createCommand(lA);this.$1.set_isChecked(bZ.prototype.get_isChecked.call(this));this.$1.set_isDefault(bZ.prototype.get_isDefault.call(this));this.$1.set_isEnabled(bZ.prototype.get_enabled.call(this));this.$1.set_isRadioOn(bZ.prototype.get_isRadioOn.call(this));this.$1.set_isVisible(bZ.prototype.get_isVisible.call(this));this.$1.transfer(ex.commandParams);gm.tryUpdateKeyboardShortcut(lA.cmd,this,true)};global.tab.WebCommandItemWrapper=kW;var kX=function(e){var ex=function(lA,lB,lC,lD,lE,lF,lG,lH){this.$7=null;this.$0=null;this.$6=null;this.$3=null;this.$1=null;this.$2=null;this.$4=false;this.$5=false;fA.call(this);this.$6=kY.get_instance().createCommand(lA);this.$0=lB;this.$3=lG;this.$2=lE;this.$4=lC;this.$5=lD;this.$1=lF;gm.associateShortcutWithCommand(this,lA,lH)};ss.registerGenericClassInstance(ex,kX,[e],{get_keyCombos:function(){return this.$0},get_additionalOptions:function(){return this.$3||gl.prototype.get_additionalOptions.call(this)},updateCommandWrapper:function(lA){this.$7=lA},isAllowed:function(lA){var lB=ss.staticEquals(this.$2,null)||this.$2(lA);var lC=(ss.isNullOrUndefined(this.$7)?this.$6.get_isEnabled():this.$7.get_enabled());var lD=!this.$4||lC;var lE=(ss.isNullOrUndefined(this.$7)?this.$6.get_isVisible():this.$7.get_isVisible());var lF=!this.$5||lE;return lB&&lD&&lF&&fA.prototype.isAllowed.call(this,lA)},executeShortcut:function(lA){if(ss.isNullOrUndefined(this.$6)){return}if(!ss.staticEquals(this.$1,null)){this.$1(lA,this.$6)}else{this.$6.invoke()}}},function(){return fA},function(){return[fX]});return ex};kX.__typeName='tab.WebCommandKeyboardShortcut$1';ss.initGenericClass(kX,a,1);global.tab.WebCommandKeyboardShortcut$1=kX;var kY=function(){this.$1={};this.$0={}};kY.__typeName='tab.WebCommandRegistry';kY.get_instance=function(){return kY.$0};global.tab.WebCommandRegistry=kY;var kZ=function(){ss.makeGenericType(kV,[Object,la]).call(this)};kZ.__typeName='tab.WebEditConnectionCmd';kZ.get_commandName=function(){return'web-edit-connection'};global.tab.WebEditConnectionCmd=kZ;var la=function(e){this.$$c=null;this.$$c=e};la.__typeName='tab.WebEditConnectionCmd$Response';global.tab.WebEditConnectionCmd$Response=la;var lb=function(e){this.$1=null;$('.TestFontContainer').remove();this.$1=[];lb.$0(e.toSimpleFontList());this.$0(e)};lb.__typeName='tab.WebFilteredFontListProvider';lb.get_testDiv=function(){return lb.$4};lb.get_supportedFonts=function(){return lb.$3};lb.$0=function(e){var ex=tabBootstrap.MetricsController.createContext('ComputeFonts',32,null);var lA='12pt';var lB=$('<div/>').css('visibility','hidden');var lC=$('<span/>').css({display:'inline-block','font-size':lA,'font-family':'TableauTestFont'}).text('A');lB.append(lC);var lD={};var lE=ss.getEnumerator(e);try{while(lE.moveNext()){var lF=lE.current();if(ss.keyExists(lb.get_supportedFonts(),lF)){continue}var lG=ss.formatString('"{0}", "{1}"',lF,'TableauTestFont');var lH=$('<span/>').css({display:'inline-block','font-size':lA,'font-family':lG}).text('A');eS.cleanUpFontFamilyStyles(lH);lB.append(lH);lD[lF]=lH}}finally{lE.dispose()}if(ss.getKeyCount(lD)===0){return}lb.get_testDiv().append(lB);lb.$2=tab.DoubleUtil.roundToInt(lC.width());lb.$1=tab.DoubleUtil.roundToInt(lC.height());var lI=_.keys(lD);for(var lJ=0;lJ<lI.length;lJ++){var lK=lI[lJ];var lL=lD[lK];var lM=lb.$2!==tab.DoubleUtil.roundToInt(lL.width())||lb.$1!==tab.DoubleUtil.roundToInt(lL.height());lb.get_supportedFonts()[lK]=lM}lB.remove();ex.dispose()};global.tab.WebFilteredFontListProvider=lb;var lc=function(){ss.makeGenericType(kV,[Object,ld]).call(this)};lc.__typeName='tab.WebRenameConnectionCmd';lc.get_commandName=function(){return'web-rename-connection'};global.tab.WebRenameConnectionCmd=lc;var ld=function(e){this.$$c=null;this.$$c=e};ld.__typeName='tab.WebRenameConnectionCmd$Response';global.tab.WebRenameConnectionCmd$Response=ld;var le=function(e){this.$1=null;this.$2$1=null;gV.call(this,e,new hF('webZone'.toString()));this.$1=e.get_zone()};le.__typeName='tab.WebZoneModel';global.tab.WebZoneModel=le;var lf=function(){};lf.__typeName='tab.WidgetPlugins';lf.registerWidgetPluginModule=function(e,ex){var lA=gZ.registerRawJsModule(e,ex+'.min',ex).andLoadOnDemandIf(true).moduleBeingConfigured;lA.addDependency(hz.menuApiContract);lA.addDependency(hz.hybridWidgetsContract);return lA};global.tab.WidgetPlugins=lf;var lg=function(e){this.$3$1=null;kq.call(this,e,new hF('windowTableCalcPresModel'.toString()))};lg.__typeName='tab.WindowTableCalcModel';global.tab.WindowTableCalcModel=lg;var lh=function(e){this.$8=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;this.$2$9=null;this.$2$10=null;this.$2$11=null;this.$2$12=null;this.$2$13=null;this.$2$14=null;this.$2$15=null;gV.call(this,e,new hF('workbookPresModel'.toString()));this.$8=new ci(this);this.set_dataSchema(new dt(this));this.set_formatPaneModel(new eO(this));this.set_oAuthCredentialIds([])};lh.__typeName='tab.WorkbookModel';lh.add_workbookModifiedChanged=function(e){lh.$2$1=ss.delegateCombine(lh.$2$1,e)};lh.remove_workbookModifiedChanged=function(e){lh.$2$1=ss.delegateRemove(lh.$2$1,e)};lh.$1=function(e){if(lh.$0(e)){return e.dashboardPresModel.sheetLayoutInfo.sheetType}return null};lh.$0=function(e){return ss.isValue(e)&&ss.isValue(e.dashboardPresModel)&&ss.isValue(e.dashboardPresModel.sheetLayoutInfo)};lh.fireWorkbookModifiedChanged=function(e){if(!ss.staticEquals(lh.$2$1,null)){lh.$2$1(e)}N.get().onWorkbookModifiedChanged(e)};global.tab.WorkbookModel=lh;var li=function(e,ex){this.$1$1=false;this.$1$2=0;this.set_jobInProgress(e);this.set_jobId(ex)};li.__typeName='tab.WorkbookTemplateCreationRefreshExtractJob';global.tab.WorkbookTemplateCreationRefreshExtractJob=li;var lj=function(){};lj.__typeName='tab.WorkbookTemplatesEnabledState';global.tab.WorkbookTemplatesEnabledState=lj;var lk=function(e,ex){this.$1=null;this.$0=null;this.$1=e;this.$0=ex};lk.__typeName='tab.WorkgroupDataAlert';global.tab.WorkgroupDataAlert=lk;var ll=function(e,ex,lA){this.$1=null;this.$2=null;this.$0=null;this.$1=e;this.$2=ex;this.$0=lA};ll.__typeName='tab.WorkgroupDataSource';ll.$0=function(e){var ex=(ss.isValue(e)?e.match(ll.$1):null);return(ss.isValue(ex)?ex[1]:e)};global.tab.WorkgroupDataSource=ll;var lm=function(){};lm.__typeName='tab.WorkgroupServerCommands';lm.get_getSessionInfo=function(){var e=$.Deferred();if(!tsConfig.is_guest){lv.helper(kO.createRequest('getSessionInfo',null,function(ex){e.resolve(ex)},function(ex){e.reject(ex)}))}else{e.reject()}return e};lm.getExtensionLoadStatus=function(e,ex){var lA=$.Deferred();var lB={};lB['path']=tsConfig.site_url_name;lB['url']=e;lB['requireFullData']=ex;lv.helper(kO.createRequest('getExtensionLoadStatus',lB,function(lC){lA.resolve(lC)},function(lC){lA.reject(lC)}));return lA};lm.getWritableProjects=function(e){var ex=[];L.$0(Object).call(null,'getWritableProjects',new f,ss.mkdel(this,function(lA){var lB=L.$3(Object).call(null,lA,lm.$i);ss.arrayAddRange(ex,lB.items);return lB}),function(){e(ex)})};lm.getDestinationProjects=function(e,ex){var lA=$.Deferred();var lB=[];L.$1(Object).call(null,'getDestinationProjects',lm.$7(0,e,ex),ss.mkdel(this,function(lC){var lD=L.$3(Object).call(null,lC,lm.$g);lB=lB.concat.apply(lB,lD.items);return lD}),function(){lA.resolve(lB)},function(){lA.reject()});return lA.promise()};lm.extendWorkgroupSession=function(){if(!tsConfig.is_guest){lv.helper(kO.createRequest('getSessionInfo',null,function(){},function(){}))}};lm.getSchedules=function(e){var ex=[];L.$0(iL).call(null,'getSchedules',new f,ss.mkdel(this,function(lA){var lB=L.$3(iL).call(null,lA,lm.$j);ss.arrayAddRange(ex,lB.items);return lB}),function(){e(ex)})};lm.getSiteUsers=function(e,ex){var lA=[];L.$0(Object).call(null,'getUsers',lm.$9(e),ss.mkdel(this,function(lB){var lC=L.$3(Object).call(null,lB,lm.$k);_.each(lC.items,function(lD){lA.push(lD)});return lC}),function(){ex(lA)})};lm.isWorkbookTemplateEnabled=function(){var e=$.Deferred();var ex=function(lB){var lC=ss.Enum.parse(lj,lB['enabledState'].toString());e.resolve(lC)};var lA=function(lB){e.reject()};lv.helper(kO.createRequest('isWorkbookTemplatesEnabled',{},ex,lA));return e};lm.retrieveAllWorkbookTemplates=function(){var e=$.Deferred();var ex=function(lB){if(ss.isValue(lB['errors'])||ss.isNullOrUndefined(lB['workbookTemplates'])){e.reject()}else{var lC=lB['workbookTemplates'];e.resolve(new lq(lC))}};var lA=function(lB){e.reject()};lv.helper(kO.createRequest('getAllWorkbookTemplates',{},ex,lA));return e};lm.getWorkbookTemplateCreationRefreshExtractJob=function(e){var ex=$.Deferred();var lA=function(lD){var lE=/^\s*true\s*$/i.test(lD['jobInProgress'].toString());var lF=parseInt(lD['jobId'].toString());ex.resolve(new li(lE,lF))};var lB=function(lD){ex.reject()};var lC=ss.mkdict(['id',e]);lv.helper(kO.createRequest('getWorkbookTemplateCreationRefreshExtractJob',lC,lA,lB));return ex};lm.getBackgroundJobProgressState=function(e){var ex=$.Deferred();var lA=function(lD){var lE=lD['actions'];if(lE.length===0){ex.resolve('error')}else if(lE[0]['state'].toString()!=='completed'){ex.resolve('inProgress')}else if(/^\s*true\s*$/i.test(lE[0]['succeeded'].toString())){ex.resolve('success')}else{ex.resolve('error')}};var lB=function(lD){ex.reject()};var lC=ss.mkdict(['actionId',e]);lv.helper(kO.createRequest('getBackgroundActionInfo',lC,lA,lB));return ex};lm.getDataAlertForDataAlertId=function(e,ex){var lA=$.Deferred();var lB=[];L.$1(Object).call(null,'getDataAlerts',lm.$2(0,e,ex),ss.mkdel(this,function(lC){var lD=L.$3(Object).call(null,lC,lm.$e);var lE=_.indexBy(lm.$k(lC),'id');if(ss.isValue(lD)){lB=lB.concat(_.map(lD.items,function(lF){var lG=lE[lF.ownerId];return new lk(lF,lG)}))}return lD}),function(){lA.resolve(lB)},function(){lA.reject()});return lA};lm.getDataAlertsForView=function(e){var ex=$.Deferred();var lA=function(lC){var lD=_.indexBy(lm.$k(lC),'id');var lE=lm.$e(lC);var lF=lE.map(function(lG){var lH=lD[lG.ownerId];return new lk(lG,lH)});ex.resolve(lF)};var lB={};lB['viewId']=e;lv.helper(kO.createRequest('getDataAlertsForView',lB,lA,function(){ex.reject()}));return ex};lm.getUsersForDataAlertId=function(e){var ex=$.Deferred();var lA=[];L.$1(Object).call(null,'getUsersForDataAlert',lm.$a(0,e),ss.mkdel(this,function(lB){var lC=L.$3(Object).call(null,lB,lm.$k);if(ss.isValue(lC)){_.each(lC.items,function(lD){if(ss.isNullOrUndefined(lD.dataAlertRecipientErrorCode)){lD.dataAlertRecipientErrorCode=0}lA.push(lD)})}return lC}),function(){ex.resolve(lA)},function(){ex.reject()});return ex};lm.checkIfUserCanReceiveDataAlert=function(e){var ex=ss.mkdict(['context',lm.$1(null),'userId',e]);var lA=$.Deferred();var lB=function(lD){lA.resolve()};var lC=function(lD){lA.reject(lD)};lv.helper(kO.createRequest('checkIfUserCanReceiveDataAlert',ex,lB,lC));return lA};lm.fetchPageOfDataSources=function(e,ex,lA){var lB=$.Deferred();L.$2(Object).call(null,'getDatasources',lm.$6(e,ex,lA),ss.mkdel(this,function(lC){var lD=L.$3(Object).call(null,lC,lm.$f);var lE=_.indexBy(lm.$i(lC),'id');var lF=_.indexBy(lm.$k(lC),'id');var lG={items:_.map(lD.items,function(lH){var lI=lE[lH.projectId.toString()];var lJ=lF[lH.ownerId.toString()];return new ll(lH,lI,lJ)}),moreItems:lD.moreItems};lB.resolve(lG);return lD}));return lB.promise()};lm.$c=function(e){var ex=$.Deferred();var lA='id';L.$2(Object).call(null,'getDatasources',lm.$3(e),ss.mkdel(this,function(lB){var lC=L.$3(Object).call(null,lB,lm.$f);var lD=_.indexBy(lm.$i(lB),lA);var lE=_.indexBy(lm.$k(lB),lA);var lF={items:_.map(lC.items,function(lG){var lH=lD[lG.projectId.toString()];var lI=lE[lG.ownerId.toString()];return new ll(lG,lH,lI)}),moreItems:lC.moreItems};ex.resolve(lF);return lC}));return ex.promise()};lm.fetchDataSourcesByRepositoryUrl=function(e,ex){var lA=[];lm.$c(ex).done(function(lB){ss.arrayAddRange(lA,lB.items);e(lA)})};lm.fetchDataSourcesByWorkbookId=function(e,ex){var lA=[];lm.$b(e,lm.$5(ex),lA)};lm.getDatasources=function(e,ex,lA){var lB=[];lm.$b(e,lm.$6(0,ex,lA),lB)};lm.fetchPageOfSiteUsers=function(e,ex){var lA=$.Deferred();var lB=lm.$9(e);lB.$1(ex);lB.$2()['includeGuestIfEnabled']=false;L.$2(Object).call(null,'getUsers',lB,ss.mkdel(this,function(lC){var lD=L.$3(Object).call(null,lC,lm.$k);lA.resolve(lD);return lD}));return lA.promise()};lm.fetchPageOfGroups=function(e,ex){var lA=$.Deferred();var lB=lm.$8(e);lB.$1(ex);L.$2(Object).call(null,'getGroups',lB,ss.mkdel(this,function(lC){var lD=L.$3(Object).call(null,lC,lm.$h);lA.resolve(lD);return lD}));return lA.promise()};lm.$b=function(e,ex,lA){L.$0(Object).call(null,'getDatasources',ex,ss.mkdel(this,function(lB){var lC=L.$3(Object).call(null,lB,lm.$f);var lD=_.indexBy(lm.$i(lB),'id');var lE=_.indexBy(lm.$k(lB),'id');if(ss.isValue(lC)){lA=lA.concat(_.map(lC.items,function(lF){var lG=lD[lF.projectId.toString()];var lH=lE[lF.ownerId.toString()];return new ll(lF,lG,lH)}))}return lC}),function(){e(lA)})};lm.$7=function(e,ex,lA){var lB={field:'name',ascending:true};var lC=new f.$1(lB,{});lC.$1(e);lC.$2()['contentType']=ex;lC.$2()['sourceIds']=lA;return lC};lm.$8=function(e){var ex={field:'name',ascending:true};var lA={operator:'and',clauses:[{operator:'matches',value:e}]};return new f.$1(ex,lA)};lm.$9=function(e){var ex={field:'displayName',ascending:true};var lA={operator:'and',clauses:[{operator:'matches',value:e}]};return new f.$1(ex,lA)};lm.$2=function(e,ex,lA){var lB={operator:'and',clauses:[{field:'viewId',operator:'eq',value:ex},{field:'id',operator:'eq',value:lA}]};var lC={field:'title',ascending:true};var lD=new f.$1(lC,lB);lD.$1(e);return lD};lm.$a=function(e,ex){var lA={field:'displayName',ascending:true};var lB=new f.$1(lA,null);lB.$1(e);lB.$2()['dataAlertId']=ex;return lB};lm.$5=function(e){var ex={operator:'and',clauses:[{field:'workbookId',operator:'eq',value:e}]};return lm.$4(0,null,ex,null)};lm.$6=function(e,ex,lA){var lB={operator:'and',clauses:[{field:'isPublished',operator:'eq',value:true}]};return lm.$4(e,ex,lB,lA)};lm.$4=function(e,ex,lA,lB){if(ss.isValue(lB)){lA.clauses=lA.clauses.concat([{operator:'matches',value:lB}])}var lC=new f.$0(ex,lA);lC.$1(e);return lC};lm.$3=function(e){var ex={field:'name',ascending:true};var lA={operator:'and',clauses:[{field:'isPublished',operator:'eq',value:true},{field:'repositoryUrl',operator:'eq',value:e}]};var lB=new f.$1(ex,lA);lB.$1(0);return lB};lm.setUserEmail=function(e,ex,lA){lm.$d(function(lB){var lC=ss.mkdict(['userId',lB,'email',e]);lv.helper(kO.createRequest('updateUserEmail',lC,ex,lA))},lA)};lm.$d=function(e,ex){var lA=tsConfig.current_user_name;var lB=tsConfig.current_user_domain_name;var lC=[{field:'username',operator:'eq',value:lA},{field:'domainName',operator:'eq',value:lB}];var lD=ss.mkdict(['filter',{clauses:lC}]);lv.helper(kO.createRequest('getServerUsers',lD,function(lE){var lF=lE['users'];if(ss.isValue(lF)&&lF.length>0&&ss.keyExists(lF[0],'id')){var lG=lF[0]['id'];e(lG)}else{ex(kO.$2(lE))}},ex))};lm.createSubscription=function(e,ex,lA,lB,lC,lD){var lE=lm.$0(lA.get_schedulePresModel().id,e,ex,ss.coalesce(lB,'Always'),null);lv.helper(kO.createRequest('createSubscription',lE,lC,lD))};lm.createSubscriptions=function(e,ex,lA,lB,lC,lD,lE,lF,lG,lH){var lI=lm.$0(lB.get_schedulePresModel().id,e,ex,ss.coalesce(lC,'Always'),lG);lI['userIds']=lA;if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')){lI['groupIds']=lH}lv.helper(kO.createRequestWithPartialFailureHandling('createSubscriptions',lI,lD,lE,lF))};lm.createDataAlert=function(e,ex,lA){var lB=lm.buildCreateDataAlertRequestParams(e);lv.helper(kO.createRequest('createDataAlert',lB,ex,lA))};lm.updateDataAlert=function(e,ex,lA,lB,lC,lD){var lE=lm.buildUpdateDataAlertRequestParams(e,ex,lA.map(function(lF){return lF.id.toString()}),lB.map(function(lF){return lF.id.toString()}));lv.helper(kO.createRequest('updateDataAlert',lE,lC,lD))};lm.deleteDataAlerts=function(e,ex,lA){var lB=ss.mkdict(['ids',e]);lv.helper(kO.createRequest('deleteDataAlerts',lB,ex,lA))};lm.removeUsersFromDataAlerts=function(e,ex,lA,lB){var lC=ss.mkdict(['dataAlertIds',e,'userIds',ex]);lv.helper(kO.createRequest('removeUsersFromDataAlerts',lC,lA,lB))};lm.addUsersToDataAlerts=function(e,ex,lA,lB){var lC=ss.mkdict(['dataAlertIds',e,'userIds',ex]);lv.helper(kO.createRequest('addUsersToDataAlerts',lC,lA,lB))};lm.setDataAlertsOwner=function(e,ex,lA,lB){var lC=ss.mkdict(['ids',e,'ownerId',ex]);lv.helper(kO.createRequest('setDataAlertsOwner',lC,lA,lB))};lm.buildCreateDataAlertRequestParams=function(e){var ex=ss.mkdict(['title',e.get_title(),'device',e.get_deviceType(),'dataAlertSpecification',JSON.stringify(e.get_measurePresModel()),'dataAlertCondition',JSON.stringify(e.get_conditionPresModel()),'notificationIntervalInMinutes',e.get_notificationIntervalInMinutes(),'userIds',e.get_userIds(),'context',lm.$1(null)]);return ex};lm.$1=function(e){var ex;var lA;if(ss.isValue(e)&&ss.isValue(e.get_customizedViewId())){ex='customizedView';lA=e.get_customizedViewId()+''}else if(ss.isValue(tsConfig.current_custom_view_id)){ex='customizedView';lA=tsConfig.current_custom_view_id+''}else{ex='view';lA=tsConfig.current_view_id}return ss.mkdict(['contextType',ex,'id',lA])};lm.buildUpdateDataAlertRequestParams=function(e,ex,lA,lB){var lC=ss.mkdict(['dataAlertId',ex,'title',e.get_title(),'dataAlertSpecification',JSON.stringify(e.get_measurePresModel()),'dataAlertCondition',JSON.stringify(e.get_conditionPresModel()),'notificationIntervalInMinutes',e.get_notificationIntervalInMinutes(),'userIdsToAdd',lA,'userIdsToRemove',lB]);return lC};lm.logOff=function(e){var ex=function(lA){var lB=lA['redirectUrl'];tab.WindowHelper.setLocationHref(window.self,(ss.isValue(lB)?lB:'/'))};lv.helper(kO.createRequest('logout',{},ex,e))};lm.createCommentingServer=function(){return new cm(kO.$0,bT.get().legacySession)};lm.$0=function(e,ex,lA,lB,lC){return ss.mkdict(['scheduleId',e,'subject',ex.trim(),'targetType',(lA?'Workbook':'View'),'targetId',(lA?tsConfig.current_workbook_id:tsConfig.current_view_id),'customizedViewId',tsConfig.current_custom_view_id,'dataConditionType',lB,'subscriptionMessage',lC])};lm.$i=function(e){return _.map(e['projects'],function(ex){return ex})};lm.$g=function(e){return _.map(e['projects'],function(ex){return ex})};lm.$j=function(e){return _.map(e['schedules'],function(ex){return new iL(ex)})};lm.$k=function(e){return _.map(e['users'],function(ex){var lA='dataAlertRecipientErrorCode';var lB={username:ex['username'].toString(),friendlyName:ex['displayName'].toString(),id:parseInt(ex['id'].toString()),hasEmail:ex['hasEmail']};if(ss.isValue(ex[lA])){lB.dataAlertRecipientErrorCode=parseInt(ex[lA].toString())}return lB})};lm.$h=function(e){return _.map(e['groups'],function(ex){return{name:ex['name'].toString(),id:parseInt(ex['id'].toString()),userCount:parseInt(ex['userCount'].toString())}})};lm.$e=function(e){return e['dataAlerts']};lm.$f=function(e){return e['datasources']};global.tab.WorkgroupServerCommands=lm;var ln=function(){};ln.__typeName='tab.WorkgroupServerErrorCode';global.tab.WorkgroupServerErrorCode=ln;var lo=function(e){this.$0=null;this.$0=e};lo.__typeName='tab.WorkgroupServerOauthSettings';global.tab.WorkgroupServerOauthSettings=lo;var lp=function(e,ex,lA,lB){this.methodName=null;this.methodParams=null;this.success=null;this.error=null;this.methodName=e;this.methodParams=ex;this.success=lA;this.error=lB};lp.__typeName='tab.WorkgroupServerRequest';global.tab.WorkgroupServerRequest=lp;var lq=function(e){this.$0=null;this.$0=e};lq.__typeName='tab.WorkgroupWorkbookTemplates';global.tab.WorkgroupWorkbookTemplates=lq;var lr=function(){};lr.__typeName='tab.WorksheetServerCommands';lr.revert=function(){var e=cl.newCommand({ns:'tabsrv',cmd:'revert-workbook'},null);bT.SendCommand(ib.create(e,'immediately'))};lr.undo=function(){var e=cl.newCommand({ns:'tabdoc',cmd:'undo'},null);e.commandParams={};bT.SendCommand(ib.create(e,'immediately'))};lr.undo$1=function(e,ex){var lA=cl.newCommand({ns:'tabdoc',cmd:'undo'},null);lA.commandParams={};bT.SendCommand(ib.create(lA,'immediately',e,ex))};lr.undoToPosition=function(e){var ex=cl.newCommand({ns:'tabdoc',cmd:'undo'},null);ex.commandParams=lr.$0(e);bT.SendCommand(ib.create(ex,'immediately'))};lr.redo=function(){var e=cl.newCommand({ns:'tabdoc',cmd:'redo'},null);e.commandParams={};bT.SendCommand(ib.create(e,'immediately'))};lr.redo$1=function(e,ex){var lA=cl.newCommand({ns:'tabdoc',cmd:'redo'},null);lA.commandParams={};bT.SendCommand(ib.create(lA,'immediately',e,ex))};lr.redoToPosition=function(e){var ex=cl.newCommand({ns:'tabdoc',cmd:'redo'},null);ex.commandParams=lr.$0(e);bT.SendCommand(ib.create(ex,'immediately'))};lr.clearFuture=function(){var e=cl.newCommand({ns:'tabdoc',cmd:'clear-future'},null);e.commandParams={};bT.SendCommand(ib.create(e,'immediately'))};lr.$0=function(e){var ex={};ex['undoPosition']=e;return ex};global.tab.WorksheetServerCommands=lr;var ls=function(e){this.$0=null;this.$1=null;this.currentWorldDiffersFromCheckpoint=false;this.$0=e;this.currentWorldDiffersFromCheckpoint=false};ls.__typeName='tab.WorldCheckpointHolder';global.tab.WorldCheckpointHolder=ls;var lt=function(){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null};lt.__typeName='tab.WorldUpdateInterceptor';lt.get=function(){return lt.$0.value()};global.tab.WorldUpdateInterceptor=lt;var lu=function(){};lu.__typeName='tab.WorldUpdateServerCommands';lu.getWorldUpdate=function(e){var ex=cl.newCommand({ns:'tabdoc',cmd:'get-world-update'},lu.$0());jd.executeServerCommand(ex,'immediately',e,e)};lu.$0=function(){var e={};e['sheet']=tsConfig.current_sheet_name;return e};global.tab.WorldUpdateServerCommands=lu;var lv=function(){};lv.__typeName='tab.XhrUtil';lv.get_currentTabName=function(){return lv.$0};lv.set_currentTabName=function(e){lv.$0=e};lv.helper=function(e,ex){var lA=new lv;if(!ss.isValue(e.success)&&ss.isValue(ex)){e.success=ex.get_successDelegate()}if(!ss.isValue(e.complete)&&ss.isValue(ex)){e.complete=ex.get_completedDelegate()}if(!ss.isValue(e.error)&&ss.isValue(ex)){e.error=ex.get_errorDelegate()}return lA.request(e)};lv.getMultipartData=function(e,ex){var lA=lv.randomString();var lB='--'+lA;var lC='\r\n';var lD=new ss.StringBuilder;if(ss.isValue(e)){lD.append(lB);lD.append(lC);lD.append('Content-Disposition: form-data; name="');lD.append(e['name']);lD.append('"');if('filename'in e){lD.append('; filename="');lD.append(e['filename']);lD.append('"')}lD.append(lC);lD.append('Content-Type: ');lD.append(e['contentType']);lD.append(lC);lD.append(lC);lD.append(e['content']);lD.append(lC)}if(ss.isValue(ex)){var lE=new ss.ObjectEnumerator(ex);try{while(lE.moveNext()){var lF=lE.current();lD.append(lB);lD.append(lC);lD.append('Content-Disposition: form-data; name="');lD.append(lF.key);lD.append('"');lD.append(lC);lD.append(lC);if(ss.isInstanceOfType(lF.value,String)){lD.append(lF.value)}else{lD.append(JSON.stringify(lF.value))}lD.append(lC)}}finally{lE.dispose()}}lD.append(lB);lD.append('--');lD.append(lC);var lG={};lG.header=lA;lG.body=lD.toString();return lG};lv.randomString=function(){var e='0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';var ex=8;var lA='';for(var lB=0;lB<ex;lB++){var lC=Math.random()*e.length;var lD=lC|0;lA+=e.substring(lD,lD+1)}return lA};global.tab.XhrUtil=lv;var lw=function(e,ex){this.$4=null;this.$1=null;this.$2=null;this.$3=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;gV.call(this,e,new hF(ex.toString(),0));this.$4=new jX(this);this.$1=new jX(this)};lw.__typeName='tab.ZoneCommonModel';global.tab.ZoneCommonModel=lw;var lx=function(e){gV.call(this,e,new hF('presModelHolder'.toString()))};lx.__typeName='tab.ZoneContentWrapperModel';global.tab.ZoneContentWrapperModel=lx;var ly=function(e,ex,lA){this.$d=null;this.$g=null;this.$f=null;this.$b=null;this.$8=null;this.$c=null;this.$a=false;this.$9=false;this.$e=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;gV.call(this,e,new hF(lA.toString(),0));this.$d=ex;this.$f=new lw(this,lA);this.$8=new ci(this)};ly.__typeName='tab.ZoneModel';ly.$2=function(e){var ex=e.presModelHolder;if(ss.isNullOrUndefined(ex)){return null}if(ss.getKeyCount(ex)===1){var lA=ss.getEnumerator(Object.keys(ex));try{while(lA.moveNext()){var lB=lA.current();return lB}}finally{lA.dispose()}}return''};ly.getContent=function(e,ex){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.presModelHolder)){return null}if(!(ex in e.presModelHolder)){return null}return e.presModelHolder[ex]};ly.$1=function(e){return(ss.isNullOrEmptyString(e)?null:JSON.parse(e))};ly.$0=function(e){switch(e){case'color':{return'color'}case'shape':{return'shape'}case'size':{return'size'}case'map':{return'map'}}return'color'};global.tab.ZoneModel=ly;var lz=function(e){this.$a=null;this.$9=null;this.$8=null;this.$2$1=null;this.$2$2=null;gV.call(this,e,new hF('zones'.toString()));this.set_zonePresModels({});this.$a={};this.$9={}};lz.__typeName='tab.ZonesModel';lz.$0=function(e){return'z_'+e};global.tab.ZonesModel=lz;ss.initClass(b,a,{});ss.initClass(bM,a,{get_isBlocking:function(){return this.$7!=='none'||this.get_isCancelable()},get_blockType:function(){return this.$7},get_isOneAtATime:function(){return false},get_commandName:function(){return this.$2},set_commandName:function(e){this.$2=e},get_isCancelable:function(){return tab.FeatureFlags.isEnabled('CommandCancellation')&&bS.canCancel(this.get_commandName())&&this.get_hasRemoteComponent()},get_shouldShowCommandWaiter:function(){return this.get_isCancelable()||ss.isValue(this.$4)},get_commandWaiter:function(){if(!this.get_shouldShowCommandWaiter()){return null}return this.$4||(this.get_isCancelable()?bT.get().defaultCommandCanceler:null)},set_commandWaiter:function(e){this.$4=e},get_hasLocalComponent:function(){return this.hasLocalComponent},get_hasRemoteComponent:function(){return this.hasRemoteComponent},get_useGlobalConnectionErrorHandling:function(){return this.useGlobalConnectionErrorHandling},set_useGlobalConnectionErrorHandling:function(e){this.useGlobalConnectionErrorHandling=e},get_remoteCommands:function(){return ss.arrayClone(this.$6)},execute:function(e,ex,lA){var lB=lA;lA=function(lC){_.defer(function(){lB(lC)})};this.$0(ex,lA);this.executeLocal(e)},executeLocal:function(e){if(ss.isValue(this.doLocalWork)){{var ex=tabBootstrap.MetricsController.createContext('EXELOC'.toString(),8,this.buildCommandMetricsParameters());try{this.doLocalWork(e)}finally{if(ss.isValue(ex)){ex.dispose()}}}}},$0:function(e,ex){this.$5=new Array;this.executeNextRemoteCommand(e,function(lA){ji.onVizqlPinged();ex(lA)})},buildCommandMetricsParameters:function(){var e={};e['cn']=this.get_commandName();return e},triggerCallbacks:function(){if(this.$1.length>0){if(!ss.staticEquals(this.failureCallback,null)){this.failureCallback(this.$1[this.$1.length-1])}}else if(this.$3.length>0){if(!ss.staticEquals(this.successCallback,null)){this.successCallback(this.$3[this.$3.length-1])}}},isFinished:function(){return this.$8.length===0},clearCommandResults:function(){ss.clear(this.$3);ss.clear(this.$1)},reEnqueueCompletedCommandRecords:function(){if(ss.isNullOrUndefined(this.$5)){return}var e=this.$5;var ex=this.$8;while(ex.length>0){e.push(ex.shift())}this.$8=e;this.$5=ex},enqueueCommand:function(e){this.$6.push(e);this.$8.push(e)},handleRemoteCommandSuccess:function(e,ex){this.$3.push(ex)},handleRemoteCommandFailure:function(e,ex){this.$1.push(ex)},executeNextRemoteCommand:function(e,ex){if(this.$8.length===0){if(!ss.staticEquals(ex,null)){ex(bW.successResult)}return}var lA=this.$8.shift();this.$5.push(lA);e.executeSingleRemoteCommand(lA,ss.mkdel(this,function(lB){try{this.handleRemoteCommandSuccess(lA,lB)}finally{this.executeNextRemoteCommand(e,ex)}}),ss.mkdel(this,function(lB){try{this.handleRemoteCommandFailure(lA,lB)}finally{if(ss.isValue(ex)){ex(new bW(false,lB))}}}))}});ss.initClass(c,a,{get_isOneAtATime:function(){return true}},bM);ss.initClass(d,a,{});ss.initClass(f,a,{$0:function(){return this.$5.startIndex},$1:function(e){this.$5.startIndex=e},$2:function(){if(ss.isValue(this.$6)){return this.$6}var e=_.map(this.$4,function(ex){return ss.mkdict(['field',ex.field,'ascending',ex.ascending])});this.$6=ss.mkdict(['page',this.$5,'order',e]);if(ss.isValue(this.$3)){this.$6['filter']=this.$3}return this.$6}});f.$1.prototype=f.$0.prototype=f.prototype;ss.initClass(gV,a,{getMutableCopyOfPresModel:function(){return this.getMutableCopyOfPresModelInternal(false)},getPresModelPath:function(){return this.$0(new hE)},reparent:function(e){this.parent=e},getMutableCopyOfPresModelInternal:function(e){var ex=(e?tab.MiscUtil.cloneObject(this.pm):hD.cloneObjWithScalarsOnly(this.pm));return ex||new Object},swapAndCopyPresModel:function(e){var ex=this.pm;if(ss.isValue(ex)&&ss.isValue(e)){var lA=e;var lB=ex;var lC=Object.keys(lB);for(var lD=0;lD<lC.length;lD++){var lE=lC[lD];if((!ss.keyExists(lA,lE)||typeof(lA[lE])==='undefined')&&(!_.isBoolean(lB[lE])||!gV.removeUndefinedBoolsOnSwapCopy)&&!ss.referenceEquals(lE,'runtimeFinalDatastoreLocal'.toString())&&!ss.referenceEquals(lE,'runtimeData'.toString())){lA[lE]=lB[lE]}}}this.pm=e},swapPresModel:function(e){this.pm=e},simpleSwapToUpdate$1:function(e){return function(ex,lA,lB,lC){this.simpleSwapToUpdate(ex,function(){if(!ss.staticEquals(lA,null)){lA(lB)}},lC)}},simpleSwapToUpdate:function(e,ex,lA){if(this.isNewPresModelSameAsOld(e)){return false}this.swapAndCopyPresModel(e);this.raiseEvent(ex,lA);return true},isNewPresModelSameAsOld:function(e){return _.isEqual(this.pm,e)},raiseEvent$1:function(e){return function(ex,lA,lB){if(ss.staticEquals(ex,null)){return}this.raiseEvent(function(){ex(lA)},lB)}},raiseEvent$2:function(e,ex){return function(lA,lB,lC,lD){if(ss.staticEquals(lA,null)){return}this.raiseEvent(function(){lA(lB,lC)},lD)}},raiseEvent:function(e,ex){if(ss.staticEquals(e,null)){return}if(ss.isValue(this.pm)){}if(ss.isNullOrUndefined(ex)||ss.isNullOrUndefined(ex.eventHandler)){return}ex.eventHandler.processEvent(e)},$0:function(e){if(!ss.isValue(this.parent)){e.reverse();return e}if(ss.isValue(this.presModelKey)){e.add(this.presModelKey)}var ex=this.parent;return ex.$0(e)}});ss.initClass(j,a,{},gV);ss.initClass(k,a,{},gV);ss.initClass(l,a,{},gV);ss.initClass(m,a,{});ss.initClass(n,a,{$1:function(e,ex,lA){if(ss.isValue(this.$3)){this.$3.setPaneSection(e,ex,lA)}if(ss.isValue(this.$2)){this.$2.setPaneSection(e,ex,lA)}},$0:function(e,ex,lA){if(ss.isValue(this.$3)){ex.push({item1:e,item2:this.$3})}if(ss.isValue(this.$2)){lA.push({item1:e,item2:this.$2})}return}});ss.initInterface(ge,a,{add_onRemoteCommandResponse:null,remove_onRemoteCommandResponse:null,add_onRemoteCommandException:null,remove_onRemoteCommandException:null,executeSingleRemoteCommand:null,cancelRunningCommand:null});ss.initClass(o,a,{add_onRemoteCommandResponse:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_onRemoteCommandResponse:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},add_onRemoteCommandException:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_onRemoteCommandException:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},$0:function(e){if(ss.isNullOrUndefined(e)){return null}var ex=e['vqlCmdResponse'.toString()];if(ss.isValue(ex)&&ex.cmdResultList.length>0){var lA=ex.cmdResultList[0];var lB=lA.commandReturn;if(ss.isValue(lB)&&ss.keyExists(lB,'commandValidationPresModel')){var lC=lB['commandValidationPresModel'];if(!lC.valid){return new ss.Exception(ss.formatString('{0}: {1}',lA.commandName,lC.errorMessage))}}}return null},cancelRunningCommand:function(e,ex,lA){if(!tab.FeatureFlags.isEnabled('CommandCancellation')){return}this.$9.cancelRunningCommand(e,function(lB,lC){ex(lB,lC)},lA)},executeSingleRemoteCommand:function(e,ex,lA){for(var lB=0;lB<this.$8.length;lB++){var lC=this.$8[lB];if(lC.$2(e,ex,lA)===0){return}}var lD={};lD['cn']=e.commandName;var lE=tabBootstrap.MetricsController.createContext('EXEREM'.toString(),8,lD);var lF=this.$7;var lG=ss.mkdel(this,function(lI){lE.dispose();this.$2(lF,e,lI);lA(lI)});var lH=ss.mkdel(this,function(lI,lJ){lE.dispose();if(lJ){return}var lK=this.$0(lI);if(ss.isValue(lK)){lG(lK);return}this.$3(lF,e,lI);var lL=hD.fromCommand(lI,e);var lM=hD.getConnectionAttemptInfo(lI);if(ss.isValue(lM)&&lM.dataSourceConnectionAttemptInfos.length>0){if(lM.dataSourceConnectionAttemptInfos.length===1){var lN=new tab.DataSourceConnectionAttemptErrorResponse.$ctor1(lM.dataSourceConnectionAttemptInfos[0]);lA(new ss.Exception(JSON.stringify(lN)))}else{lA(new ss.Exception(tab.Strings.DataSourceGenericErrorMsg))}}else{ex(lL)}});this.$9.executeServerCommand(e,lH,lG);++this.$7},$5:function(e,ex,lA){var lB=new ck;lB.commandNamespace=e;lB.commandName=ex;this.$4([lB],lA)},$4:function(e,ex){this.$6(e,ex,null,null)},$6:function(e,ex,lA,lB){var lC=new G(this,e,ex,lA,lB);lC.$g(ss.mkdel(this,this.$1));this.$8.push(lC)},$1:function(e,ex,lA){var lB=new ss.Exception('Command '+e.commandName+' was dropped by the CommandThrottler');this.$2(0,e,lB);lA(lB)},$2:function(e,ex,lA){if(!ss.staticEquals(this.$1$2,null)){this.$1$2(e,ex,lA)}},$3:function(e,ex,lA){if(!ss.staticEquals(this.$1$1,null)){this.$1$1(e,ex,lA)}}},null,[ge]);ss.initClass(p,a,{$2:function(e,ex,lA){if(this.$3){return ss.Int32.trunc(e(this.$4[lA])+0.5)}else{return ss.Int32.trunc(ex(this.$4[lA])+0.5)}},$0:function(e,ex){if(this.$3){return[ex,e.y,ex,e.y+e.h]}else{return[e.x,ex,e.x+e.w,ex]}},$1:function(e,ex,lA,lB){var lC=ss.Int32.div(lA,2);if(this.$3){return{x:e-lC-lB,y:ex.y,w:lA+2*lB-1,h:ex.h}}else{return{x:ex.x,y:e-lC-lB,w:ex.w,h:lA+2*lB-1}}}});ss.initClass(q,a,{$6:function(e){return this.$c.TextRunOffset[e]},$5:function(e){return this.$c.TextRunCount[e]},$4:function(e){return this.$e.text_run[e]},$7:function(e){return{x:this.$e.text_run_x_remote[e],y:this.$e.text_run_y_remote[e]}},$9:function(e){return this.$c.Width[e]},$2:function(e){return this.$c.Height[e]},$a:function(e){var ex=this.$6(e);return!tab.DoubleUtil.isApproximatelyEqual(this.$e.text_run_x[ex],this.$e.text_run_x_remote[ex])||!tab.DoubleUtil.isApproximatelyEqual(this.$e.text_run_y[ex],this.$e.text_run_y_remote[ex])},$1:function(){return this.$b},$8:function(e){if(e>=0&&e<this.$c.TextRunOffset.length){var ex=this.$e.text_style_id[this.$c.TextRunOffset[e]];if(ex>=0&&ex<this.$d.font.length){return{item1:this.$d,item2:ex}}}return null},$0:function(e,ex,lA,lB,lC){var lD=Math.ceil(this.$c.Width[lA]);var lE=Math.ceil(this.$c.Height[lA]);var lF=this.$3(lA);var lG={x:0,y:0};var lH=ss.Int32.trunc(lB/2+0.5);if(lF!=='text-orient-horizontal'){var lI=lD;lD=lE;lE=lI}var lJ=ex-lH;var lK=ex+lH;var lL=0;switch(tab.EnumConversions.labelHAlignmentFromInt(this.$c.HAligns[lA])){case'h-align-left':{lL=(lC?(lJ-lD):e.x);break}case'h-align-right':{lL=(lC?lK:(e.x+e.w-lD));break}case'h-align-center':{lL=(lC?(ex-lD/2):(ss.Int32.div(e.x+e.x+e.w,2)-lD/2));break}}if(lF==='text-orient-vertical-down'){lG.x=Math.floor(lL+lD+0.5)}else{lG.x=Math.floor(lL+0.5)}var lM=0;switch(tab.EnumConversions.labelVAlignmentFromInt(this.$c.VAligns[lA])){case'v-align-top':{lM=(lC?e.y:(lJ-lE));break}case'v-align-bottom':{lM=(lC?(e.y+e.h-lE):lK);break}case'v-align-center':{lM=(lC?(ss.Int32.div(e.y+e.y+e.h,2)-lE/2):(ex-lE/2));break}}if(lF==='text-orient-vertical-up'){lG.y=Math.floor(lM+lE+0.5)}else{lG.y=Math.floor(lM+0.5)}return lG},$3:function(e){var ex=this.$8(e);if(ss.isValue(ex)){return tab.EnumConversions.textOrientFromInt(ex.item1.text_orientation[ex.item2])}return'text-orient-horizontal'}});ss.initClass(r,a,{$3:function(){return this.$1$1},$4:function(e){this.$1$1=e},$5:function(){return this.$1$2},$6:function(e){this.$1$2=e},$2:function(){return this.$7.length},$0:function(e){return this.$7[e]},$1:function(e,ex,lA,lB){if(e){var lC=[ex.x,lA,ex.x+ex.w];return{x:lC[lB],y:ex.y,w:lC[lB+1]-lC[lB],h:ex.h}}else{var lD=[ex.y+ex.h,lA,ex.y];return{x:ex.x,y:lD[lB+1],w:ex.w,h:lD[lB]-lD[lB+1]}}}});ss.initEnum(s,a,{$0:60011});ss.initClass(t,a,{$3:function(){return this.$4.length},$1:function(e){if(e.get_isOneAtATime()){this.$2(ss.getInstanceType(e))}this.$4.push(e)},$0:function(){if(this.$4.length<=0){return null}var e=this.$4[0];ss.removeAt(this.$4,0);return e},$2:function(e){var ex=0;for(var lA=this.$4.length-1;lA>=0;--lA){if(ss.referenceEquals(ss.getInstanceType(this.$4[lA]),e)){++ex;ss.removeAt(this.$4,lA)}}if(ex>0){}}});ss.initClass(u,a,{$0:function(){return this.$2},$1:function(){return this.$3}});ss.initClass(v,a,{});ss.initEnum(w,a,{$0:16,$1:20,$2:22});ss.initEnum(x,a,{$0:60011});ss.initClass(y,a,{$6:function(){return this.$1$1},$7:function(e){this.$1$1=e},$4:function(){return this.$1$2},$5:function(e){this.$1$2=e},$0:function(){return this.$1$3},$1:function(e){this.$1$3=e},$2:function(){return this.$1$4},$3:function(e){this.$1$4=e}});y.$0.prototype=y.prototype;ss.initEnum(z,a,{$0:0,$1:1});ss.initClass(A,a,{$0:function(){return this.$1$1},$1:function(e){this.$1$1=e},$2:function(){return this.$1$2},$3:function(e){this.$1$2=e}});ss.initClass(B,a,{$4:function(){return this.$9},$5:function(){return this.$a.size===0},$6:function(){var e=[];this.$a.forEach(function(ex){e.push(ex)});return e},$0:function(e,ex){if(ss.isNullOrUndefined(e)||e.length===0){return}this.$8.push(B.$0(ex,e));this.$7=this.$7||this.$2(e);e=B.$1(ex,e);this.$a.set(e.join(','),e)},$1:function(e,ex){if(ss.isNullOrUndefined(ex)||ex.length===0){return false}var lA;if(this.$7||this.$2(ex)){lA=this.$3(e,ex)}else{var lB=B.$1(e,ex);lA=this.$a.has(lB.join(','))}return lA},$2:function(e){for(var ex=0;ex<e.length;ex++){var lA=e[ex];if(!ss.isValue(lA)){return true}}return false},$3:function(e,ex){var lA=B.$0(e,ex);for(var lB=0;lB<this.$8.length;lB++){var lC=this.$8[lB];var lD=true;var lE=false;var lF=0;var lG=0;while(lD&&lG<lC.length&&lF<lA.length){var lH=lC[lG];var lI=lA[lF];if(lH.item1<lI.item1){++lG}else if(lH.item1>lI.item1){++lF}else{lD=!ss.isValue(lH.item2)||!ss.isValue(lI.item2)||ss.referenceEquals(lH.item2,lI.item2);lE=lE||ss.referenceEquals(lH.item2,lI.item2);++lG;++lF}}if(lD&&lE){return true}}return false}});ss.initClass(C,a,{});ss.initClass(D,a,{});ss.initEnum(E,a,{$0:1,$1:2,$2:3,$3:4,$4:5,$5:6});ss.initClass(F,a,{$0:function(){if(ss.isNullOrUndefined(this.$1)){return this.$2}var e=_.keys(this.$1);var ex=this.$2.dashboardPresModel.zones;var lA=this.$1;for(var lB=0,lC=e.length;lB<lC;lB++){var lD=e[lB];ex[lD].presModelHolder=lA[lD]}return this.$2}});ss.initClass(G,a,{$g:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},$h:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},$2:function(e,ex,lA){var lB=false;for(var lC=0;lC<this.$5.length;lC++){var lD=this.$5[lC];if(ss.referenceEquals(lD.commandName,e.commandName)&&ss.referenceEquals(lD.commandNamespace,e.commandNamespace)){lB=true;break}}if(!lB){return 1}if(this.$6){return 1}if(ss.isValue(this.$b)&&ss.isValue(this.$f)){this.$1(this.$b,this.$d,this.$c);this.$b=e;this.$d=ex;this.$c=lA;return 0}var lE=Math.floor(tabBootstrap.MetricsController.getTiming());var lF=lE-this.$7;if(this.$e!==-1&&lF<this.$e){this.$3(e,ex,lA,this.$e-lF)}else if(this.$a!==-1&&this.$8>=this.$a){this.$3(e,ex,lA,this.$9*this.$8)}else{this.$6=true;++this.$8;try{this.$4.executeSingleRemoteCommand(e,ss.mkdel(this,function(lG){if(this.$8>0){--this.$8}ex(lG)}),ss.mkdel(this,function(lG){if(this.$8>0){--this.$8}lA(lG)}))}finally{this.$6=false;this.$7=lE}}return 0},$0:function(){var e=this.$b;var ex=this.$d;var lA=this.$c;this.$b=null;this.$d=null;this.$c=null;if(!ss.isValue(e)){return}this.$4.executeSingleRemoteCommand(e,ex,lA)},$3:function(e,ex,lA,lB){this.$b=e;this.$d=ex;this.$c=lA;this.$f=window.setTimeout(ss.mkdel(this,function(){this.$f=null;this.$0()}),lB)},$1:function(e,ex,lA){if(ss.isValue(this.$1$1)){this.$1$1(e,ex,lA)}}});ss.initClass(H,a,{},bM);ss.initClass(kG,a,{gv:function(e){return this.v[e]},setValue:function(e,ex){this.v[e]=ex},transform:function(e){if(this.isValid&&!ss.staticEquals(e,null)){for(var ex=0;ex<this.length;ex++){this.v[ex]=e(this.v[ex])}}}});ss.initClass(I,a,{gv:function(e){return this.v[0]},setValue:function(e,ex){this.v[0]=ex}},kG);ss.initClass(J,a,{$3:function(){return this.$1$1},$4:function(e){this.$1$1=e},$2:function(){this.$4(this.$3()+1);be.get_waitHandler().addrefAndShowFullWaitHandlerNow()},$1:function(e,ex){this.$4(this.$3()+1);this.$5.incrementWait(e,ex)},$0:function(){while(this.$3()>0){this.$4(this.$3()-1);this.$5.decrementWait()}}});ss.initClass(K,a,{get_waitingOnCommands:function(){return this.$2()},get_deferredServerResponseQueueSize:function(){return this.$1()},get_currentWorldDiffersFromCheckpoint:function(){return this.$3.currentWorldDiffersFromCheckpoint},getWorldCheckpoint:function(){return this.$3.worldCheckpoint()},$0:function(e){var ex=e.presModelHolder['visual'.toString()];if(ss.isValue(ex)&&ss.isValue(ex.scene)&&ss.isValue(ex.scene.runtimeFinalDatastore)){return ex.scene.runtimeFinalDatastore}return null},getRuntimeFinalDataStoreRaw:function(e){var ex=this.getWorldCheckpoint();if(ss.isNullOrUndefined(ex.workbookPresModel.dashboardPresModel.zones)){return''}var lA=new ss.ObjectEnumerator(ex.workbookPresModel.dashboardPresModel.zones);try{while(lA.moveNext()){var lB=lA.current();if(ss.isNullOrEmptyString(e)||ss.equalsT(lB.key,e)){var lC=this.$0(lB.value);if(ss.isValue(lC)){return lC}}}}finally{lA.dispose()}var lD=Y.get_instance().get_workbook().get_storyboard().get_flipboard();var lE=lD.get_storyPointModel().get_dashboardModel().get_zoneModels();for(var lF=0;lF<lE.length;lF++){var lG=lE[lF];if(ss.isNullOrEmptyString(e)||ss.equalsT(lG.presModelKey.name,e)){var lH=this.$0(lG.pm);if(ss.isValue(lH)){return lH}}}return''}});ss.initClass(L,a,{});ss.initClass(hV,a,{fractionToValue:null,valueToFraction:null});ss.initClass(M,a,{fractionToValue:function(e){if(e<=this.$3){return this.$7+e*(this.$5-this.$7)/this.$3}if(e<=this.$4){var ex=(this.$6-this.$5)/(this.$4-this.$3);var lA=this.$5-ex*this.$3;return e*ex+lA}return this.$0*e*e+this.$1*e+this.$2},valueToFraction:function(e){if(e<=this.$5){return this.$3*(e-this.$7)/(this.$5-this.$7)}if(e<=this.$6){var ex=(this.$6-this.$5)/(this.$4-this.$3);var lA=this.$5-ex*this.$3;return(e-lA)/ex}var lB=Math.sqrt(this.$1*this.$1-4*this.$0*(this.$2-e));return(-this.$1+lB)/(2*this.$0)}},hV);ss.initClass(N,a,{add_doLaunchAuthoring:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_doLaunchAuthoring:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},add_newLayoutId:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_newLayoutId:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},add_workbookModifiedChanged:function(e){this.$1$3=ss.delegateCombine(this.$1$3,e)},remove_workbookModifiedChanged:function(e){this.$1$3=ss.delegateRemove(this.$1$3,e)},add_orientationChange:function(e){this.$1$4=ss.delegateCombine(this.$1$4,e)},remove_orientationChange:function(e){this.$1$4=ss.delegateRemove(this.$1$4,e)},onAuthoringLaunchRequested:function(){var e=this.$1$1;if(!ss.staticEquals(e,null)){e()}},onNewLayoutId:function(e){var ex=this.$1$2;if(!ss.staticEquals(ex,null)){ex(e)}},onWorkbookModifiedChanged:function(e){var ex=this.$1$3;if(!ss.staticEquals(ex,null)){ex(e)}},onOrientationChange:function(){var e=this.$1$4;if(!ss.staticEquals(e,null)){e()}}});ss.initEnum(O,a,{highlight:'highlight',filter:'filter',url:'url',group:'group',navigation:'navigation'},true);ss.initClass(P,a,{});ss.initClass(Q,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabsrv',cmd:'add-dataserver-data-source'},this.c))}},ss.makeGenericType(bd,[Object,R]));ss.initClass(R,a,{});ss.initClass(S,a,{toString:function(){return ss.coalesce(this.throttleTimeInMs,-1).toString()+this.shouldUseKeyUp+this.propagation+this.areAllLocalesSupported}});ss.initClass(T,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'add-object-to-dashboard'},this.c))}},ss.makeGenericType(bd,[Object,U]));ss.initClass(U,a,{hasZoneID:function(){return ss.keyExists(this.$$c,'zoneId')}});ss.initClass(V,a,{add_newAnalyticsPane:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newAnalyticsPane:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_analyticsPresModel:function(){return this.pm},update:function(e,ex){this.simpleSwapToUpdate(e,this.$2$1,ex)}},gV);ss.initClass(W,a,{});ss.initClass(X,a,{});ss.initClass(Y,a,{add_newWorkbook:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newWorkbook:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_applicationUpdate:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_applicationUpdate:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_toolbar:function(){return this.$2$3},set_toolbar:function(e){this.$2$3=e},get_workbook:function(){return this.$2$4},set_workbook:function(e){this.$2$4=e},get_colorPalettes:function(){return this.$2$5},set_colorPalettes:function(e){this.$2$5=e},get_dataDictionary:function(){return this.$2$6},set_dataDictionary:function(e){this.$2$6=e},get_serverFonts:function(){return this.$2$7},set_serverFonts:function(e){this.$2$7=e},get_isTableCalcHighlightingMode:function(){return this.modelInstance(cn).call(this).get_hasTableCalc()},get_shapeManager:function(){return this.$8},get_extensionPermissionsCache:function(){return this.$4},get_renderMode:function(){return(ss.isValue(this.get_appPresModel())?this.get_appPresModel().renderMode:'render-mode-server')},get_localeDateFormat:function(){return((ss.isValue(this.get_appPresModel())&&!tab.MiscUtil.isNullOrEmpty$3(this.get_appPresModel().dateFormat))?this.get_appPresModel().dateFormat:'M/d/yyyy')},get_localeTimeFormat:function(){return((ss.isValue(this.get_appPresModel())&&!tab.MiscUtil.isNullOrEmpty$3(this.get_appPresModel().timeFormat))?this.get_appPresModel().timeFormat:'h:mm tt')},get_isLocalRenderMode:function(){return this.get_renderMode()==='render-mode-client'},get_appPresModel:function(){return this.pm},get_autoUpdate:function(){var e=gY.findContentDashboard();return ss.isValue(e)&&e.autoUpdate},set_autoUpdate:function(e){var ex=gY.findContentDashboard();if(ss.isValue(ex)){ex.autoUpdate=e}},get_invalid:function(){return gY.findContentDashboard().invalid},set_invalid:function(e){var ex=gY.findContentDashboard();if(ss.isValue(ex)){ex.invalid=e}},get_showTabs:function(){return tsConfig.showTabs&&!this.get_isOffline()},get_showToolbar:function(){return!this.get_isOffline()},get_isOffline:function(){return ss.isValue(tsConfig.offlineBootstrapResponse)},get_runtimeInitialized:function(){return this.$7},registerNotificationHandler:function(e,ex){var lA=this.$6[e];if(ss.isNullOrUndefined(lA)){lA=[];this.$6[e]=lA}for(var lB=0;lB<lA.length;lB++){if(ss.staticEquals(lA[lB],ex)){throw new ss.Exception('This handler for '+e.toString()+' already registered')}}lA.push(ex);return ex},unRegisterNotificationHandler:function(e,ex){var lA=this.$6[e];if(ss.isValue(lA)){for(var lB=lA.length-1;lB>=0;lB--){if(ss.staticEquals(lA[lB],ex)){ss.removeAt(lA,lB);if(lA.length===0){delete this.$6[e];return}}}}},$1:function(e){var ex=this.$6[e];if(ss.isNullOrUndefined(ex)){ex=[]}return ex},raiseNotification:function(e,ex,lA){var lB=this.$1(e);for(var lC=0;lC<lB.length;lC++){var lD=lB[lC];lD(ex,lA)}},$2:function(e,ex){var lA=e.presModelMap;if(ss.isNullOrUndefined(lA)){return}var lB=new ss.ObjectEnumerator(lA);try{while(lB.moveNext()){var lC=lB.current();var lD=lC.key;var lE=lC.value.presModelHolder;var lF=new ss.ObjectEnumerator(lE);var lG=(lF.moveNext()?lF.current().value:null);this.raiseNotification(lD,lG,ex)}}finally{lB.dispose()}},addModel:function(e){return function(){var ex=ss.createInstance(e);var lA=ss.safeCast(ex,fV);if(ss.isValue(lA)){this.registerNotificationHandler(lA.get_notificationId(),ss.mkdel(lA,lA.onNotify))}this.$5[e]=ex;return ex}},removeModel:function(e){return function(){var ex=this.$5[e];if(ss.isNullOrUndefined(ex)){return}var lA=ss.safeCast(ex,fV);if(ss.isValue(lA)){this.unRegisterNotificationHandler(lA.get_notificationId(),ss.mkdel(lA,lA.onNotify))}delete this.$5[e]}},modelInstance:function(e){return function(){return this.$5[e]||this.addModel(e).call(this)}},update:function(e,ex){if(ss.isNullOrUndefined(this.pm)){this.pm={}}if(ss.isValue(e.renderMode)){this.get_appPresModel().renderMode=e.renderMode}if(ss.isValue(e.dataDictionary)){this.get_dataDictionary().update(e.dataDictionary)}if(ss.isValue(e.presentationLayerNotifications)){this.$2(e.presentationLayerNotifications,ex)}if(ss.isValue(e.workbookPresModel)){if(!ss.isValue(this.get_workbook())){this.set_workbook(new lh(this));this.raiseEvent$1(lh).call(this,this.$2$1,this.get_workbook(),ex)}this.get_workbook().update(e.workbookPresModel,ex)}if(ss.isValue(e.colorPaletteCollection)){this.get_colorPalettes().update(e.colorPaletteCollection,ex)}if(ss.isValue(e.toolbarPresModel)){this.get_toolbar().update(e.toolbarPresModel,ex)}if(ss.isValue(e.serverFonts)){this.set_serverFonts(ss.arrayClone(e.serverFonts.fontFamilies))}this.swapAndCopyPresModel(e);this.raiseEvent(this.$2$2,ex)},getMutableCopyOfPresModel:function(){if(ss.isNullOrUndefined(this.pm)){return null}var e={};e=$.extend(false,e,this.pm);return e},shouldDoLocalCommand:function(){return tab.FeatureFlags.isEnabled('RuntimeWebIncrementalUpdate')&&tab.RuntimeUtil.canUseRuntime()&&(!this.get_workbook().get_isCurrentSheetDashboard()||tab.FeatureFlags.isEnabled('RuntimeWebMultiVizIU'))},$3:function(){if(!this.shouldDoLocalCommand()){return}var e=gY.getVisualModels(this);if(!(ss.getKeyCount(e)===1||tab.FeatureFlags.isEnabled('RuntimeWebMultiVizIU')&&ss.getKeyCount(e)<=10)){return}var ex=new ss.ObjectEnumerator(e);try{while(ex.moveNext()){var lA=ex.current();lA.value.requestRuntimeDataAndUpdateVM()}}finally{ex.dispose()}},setupRuntime:function(){if(ss.isValue(this.$7)||!this.shouldDoLocalCommand()){return}var e=$.Deferred();this.$7=e;var ex=tabBootstrap.MetricsController.createContext('EMLOAD'.toString(),15,null);iC.requestRuntimeLoad().done([function(){ex.dispose();var lA=function(){e.resolve()};var lB=function(lC){e.reject();tab.ErrorTrace.report(lC)};tab.RuntimeWebModule.proxy.initializeRuntime().then(lA,lB)}])}},gV);ss.initClass(Z,a,{});ss.initClass(ba,a,{});ss.initClass(bb,a,{});ss.initEnum(bc,a,{inProgress:'inProgress',success:'success',error:'error'},true);ss.initClass(be,a,{get_urlRoot:function(){return this.$j},get_id:function(){return tsConfig.sessionid},get_historyPosition:function(){return this.$h.get_tailIndex()+1},get_sessionErrorHandler:function(){return this.defaultSessionErrorHandler},get_errorHandlers:function(){return this.$g},get_commonDialogProvider:function(){return this.$f},$e:function(){return this.$j+'/sessions/'+tsConfig.sessionid},formatThumbnailReference:function(e){return this.$i+'/thumb/views/'+e},formatSessionTempfileReference:function(e,ex,lA){return this.$j+'/tempfile/sessions/'+tsConfig.sessionid+'/?key='+e+(ex?'&keepfile=yes':'')+(lA?'&attachment=yes':'')},preEncodeSpecialUriComponentChars:function(e){var ex=new ss.ObjectEnumerator(be.$2);try{while(ex.moveNext()){var lA=ex.current();e=e.replace(lA.value,lA.key)}}finally{ex.dispose()}return e},nudgeWait:function(){if(ss.isNullOrUndefined(be.$4)){return false}be.$4.nudge();return true},incrementWait:function(e,ex){if(ss.isNullOrUndefined(be.$4)){return false}be.$4.addref(e,ex);return true},decrementWait:function(){if(ss.isNullOrUndefined(be.$4)){return false}be.$4.release();return true},trackRedo:function(){try{this.$h.trackRedo()}catch(e){e=ss.Exception.wrap(e);if(ss.isInstanceOfType(e,ss.ArgumentOutOfRangeException)){}else{throw e}}},trackUndo:function(){try{this.$h.trackUndo()}catch(e){e=ss.Exception.wrap(e);if(ss.isInstanceOfType(e,ss.ArgumentOutOfRangeException)){}else{throw e}}},revertHistory:function(e,ex){this.$h=new fH(ex);if(ss.isValue(e)){this.$h.adopt(e)}},getHistoryTail:function(e){var ex=((this.$h.get_recoveryStates().length>e)?e:this.$h.get_recoveryStates().length);var lA=this.$h.get_recoveryStates().length-ex;return this.$h.get_recoveryStates().slice(lA,this.$h.get_recoveryStates().length)},handleAuthenticationFailure:function(){this.defaultSessionErrorHandler.handleAuthenticationFailure()},getWindow:function(e){return e+tsConfig.sessionid.replace(new RegExp('[^A-Za-z0-9_]','g'),'_')},$8:function(e,ex,lA){var lB={};lB.type='POST';lB.url=this.$5('inform');lB.headers=ss.mkdict(['Accept','text/plain']);lB.contentType='text/plain';var lC=100;var lD=tsConfig.clientErrorReportingMaxRequestSizeBytes-lC-e.length-ex.length;var lE=5100;var lF=lA.length;if(lA.length*lE>lD){var lG=Math.max(ss.Int32.div(lD,lE),1);lA=lA.slice(0,lG)}var lH={};lH['url']=e;lH['userAgent']=ex;lH['errors']=lA;lH['sessionId']=tsConfig.sessionid;lH['timeStampUtc']=(new Date).toUTCString();var lI=lF-lA.length;if(lI>0){lH['omittedErrors']=lI}lB.data=JSON.stringify(lH);this.$c(lB)},$d:function(e,ex){if(ex){lr.redoToPosition(e)}else{lr.undoToPosition(e)}},executeServerCommand:function(e,ex,lA){var lB={};this.$9(lB,e);lB.headers=ss.mkdict(['Accept','text/javascript']);var lC=function(lF,lG,lH){if(ss.isValue(ex)){ex(lF,lH.status===be.$3)}};var lD=ss.mkdel(this,function(lF,lG,lH){this.$7(lH,lF,e.noExceptionDialog,e);if(ss.isValue(lA)){var lI=lF.responseText;if(ss.isNullOrUndefined(lI)){lI=ss.coalesce(be.getErrorMessageFromStringOrException(lH),'unknown error executing server command')}var lJ=lI;var lK=['status: '+lF.status,'textStatus: '+lG].join(', ');var lL=new ss.Exception(e.commandName+': '+lJ+', '+lK);lL['status']=lF.status;lA(lL)}});var lE=this.$1(null,lC,(ss.isValue(lA)?lD:null));this.$c(lB,lE)},basicPostOpts:function(e,ex){var lA={};lA.type='POST';lA.url=e;lA.headers=ss.mkdict(['Accept','text/javascript']);lA.dataType='json';lA.data=ex;return lA},basicGetOpts:function(e){var ex={};ex.type='GET';ex.url=e;ex.headers=ss.mkdict(['Accept','text/javascript']);ex.dataType='json';return ex},$9:function(e,ex){var lA=lv.getMultipartData(null,ex.commandParams);e.type='POST';e.dataType='json';e.contentType='multipart/form-data; boundary='+lA.header;e.data=lA.body;e.url=this.$4(ex.commandNamespace,ex.commandName)},$a:function(e,ex,lA){var lB=ss.mkdel(this,function(){this.$d(lA-1,false)});var lC=ss.mkdel(this,function(){this.$d(lA,true)});this.$h.add(ex,lA);this.$b(lB,lC,ex)},$3:function(e){return this.$j+'/'+e},$5:function(e){return tabBootstrap.BaseUrlFormatter.formatSessionMethod(e,tsConfig.sessionid,this.$j)},$4:function(e,ex){return this.$e()+'/commands/'+e+'/'+ex},$b:function(e,ex,lA){if(!tsConfig.embedded||tsConfig.browserBackButtonUndo){if(ss.isValue(be.$1)){be.$1.onBack=e}else{fI.setInitialState(e)}be.$1=fI.addToHistory(null,ex,lA)}},$7:function(e,ex,lA,lB){this.$g.handle(e,ex,lB,lA)},$c:function(e,ex){return lv.helper(e,ex)},$1:function(e,ex,lA){return new jf(this,e,ex,lA,false,false)},$0:function(e,ex,lA,lB){var lC=lB!=='none';var lD=lB==='immediately';return new jf(this,e,ex,lA,lC,lD)},formatLayoutMethod:function(e,ex){var lA=(ss.isValue(ex)?this.$5(ex):this.$e());lA+='/layouts/'+e;return lA},formatViewMethod:function(e,ex){var lA=(ss.isValue(ex)?this.$5(ex):this.$e());lA+='/views/'+e;return lA},formatFilterReference:function(e,ex,lA){return this.$6(e,ex,lA,'filters')},$6:function(e,ex,lA,lB){var lC;if(ss.isValue(lA)){lC=this.$5(lA)}else{lC=this.$e()}lC+='/sheets/'+encodeURIComponent(this.preEncodeSpecialUriComponentChars(e))+'/'+lB;if(ss.isValue(ex)){lC+='/'+encodeURIComponent(this.preEncodeSpecialUriComponentChars(ex))}return lC},$2:function(e){return this.$j+'/cancel/sessions/'+tsConfig.sessionid+'/commands/'+e.commandNamespace+'/'+e.commandName},cancelRunningCommand:function(e,ex,lA){if(!tab.FeatureFlags.isEnabled('CommandCancellation')){return}var lB=this.$2(e);var lC=this.basicGetOpts(lB);var lD=function(lG,lH,lI){if(ss.isValue(ex)){ex(lG,lI.status)}};var lE=function(lG,lH,lI){if(ss.isValue(lA)){lA(lI)}};var lF=this.$1(null,lD,lE);this.$c(lC,lF)}});ss.initClass(bf,a,{get_hasColor:function(){return this.color!=='rgba(0, 0, 0, 0)'},get_hasWidth:function(){return this.width>0},get_hasStyle:function(){return this.style!=='bs-none'},get_cssDictionary:function(){var e={};switch(this.side){case 0:{e['border-width']=this.width+'px';e['border-style']=bf.borderStyleToCss(this.style);e['border-color']=this.color;break}case 1:{e['border-top-width']=this.width+'px';e['border-top-style']=bf.borderStyleToCss(this.style);e['border-top-color']=this.color;break}case 2:{e['border-left-width']=this.width+'px';e['border-left-style']=bf.borderStyleToCss(this.style);e['border-left-color']=this.color;break}case 4:{e['border-bottom-width']=this.width+'px';e['border-bottom-style']=bf.borderStyleToCss(this.style);e['border-bottom-color']=this.color;break}case 3:{e['border-right-width']=this.width+'px';e['border-right-style']=bf.borderStyleToCss(this.style);e['border-right-color']=this.color;break}}return e},get_styledBoxPresModel:function(){var e={};switch(this.side){case 0:{e.uw=this.width;e.borderStyle=this.style;e.borderColor=this.color;break}case 1:{e.uwt=this.width;e.borderStyleTop=this.style;e.borderColorTop=this.color;break}case 2:{e.uwl=this.width;e.borderStyleLeft=this.style;e.borderColorLeft=this.color;break}case 4:{e.uwb=this.width;e.borderStyleBottom=this.style;e.borderColorBottom=this.color;break}case 3:{e.uwr=this.width;e.borderStyleRight=this.style;e.borderColorRight=this.color;break}}return e}});ss.initEnum(bg,a,{all:0,top:1,left:2,right:3,bottom:4});ss.initClass(bh,a,{get_isBrushingComputed:function(){return this.$1},hasBrushingForSheet:function(e){return ss.isValue(this.$5[e])||ss.isValue(this.$3[e])||ss.isValue(this.$2[e])},getTupleBrushing:function(e){return this.$5[e]||[]},getTrendlineBrushing:function(e){return this.$4[e]||[]},getNodeBrushing:function(e){return this.$3[e]||[]},getLegendBrushing:function(e){return this.$2[e]||{}},$0:function(e,ex,lA,lB,lC){var lD=e.get_vizDataModel();var lE=gY.getModelsForViz(bG).call(null,gY.findContentDashboard(),e);for(var lF=0;lF<lE.length;lF++){var lG=lE[lF];if(ss.isNullOrUndefined(lD)){continue}if(!lG.get_isHighlightEnabled()||lC.length===0&&lG.get_isOneWay()){continue}var lH=_.intersection(ex.get_vizDataModel().get_fieldCaptions(),lG.get_fieldCaptions());lH=bh.getHighlightFieldCaptions(lB,ex.get_vizDataModel().get_highlightCaptions(),lH);var lI=C.$3(ex.get_vizDataModel(),lA,lH);var lJ=C.$6(lI,lD,lG);if(!ss.keyExists(this.$2,e.get_worksheetName())){this.$2[e.get_worksheetName()]={}}this.$2[e.get_worksheetName()][bh.$0(lG.get_legendTypeEnum(),lG.get_legendNames())]=lJ}}});ss.initClass(bi,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'build-caption-context-menu'},this.c))}},ss.makeGenericType(bd,[Object,bj]));ss.initClass(bj,a,{});ss.initClass(bk,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'build-data-tab-field-context-menu'},this.c))}},ss.makeGenericType(bd,[Object,bl]));ss.initClass(bl,a,{});ss.initClass(bm,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'build-layout-tree-context-menu'},this.c))}},ss.makeGenericType(bd,[Object,bn]));ss.initClass(bn,a,{});ss.initClass(bo,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'build-schema-change-data-type-menu'},this.c))}},ss.makeGenericType(bd,[Object,bp]));ss.initClass(bp,a,{});ss.initClass(bq,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'build-server-axis-context-menu'},this.c))}},ss.makeGenericType(bd,[Object,br]));ss.initClass(br,a,{});ss.initClass(bs,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'build-sheet-list-context-menu'},this.c))}},ss.makeGenericType(bd,[Object,bt]));ss.initClass(bt,a,{});ss.initClass(bu,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'build-title-context-menu'},this.c))}},ss.makeGenericType(bd,[Object,bv]));ss.initClass(bv,a,{});ss.initClass(bw,a,{add_contentUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_contentUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},$1:function(){return this.get_buttonZone().buttonVisualStates[this.get_buttonZone().activeVisualStateIndex]},get_internalModel:function(){return this.pm},get_buttonZone:function(){return this.get_internalModel().dashboardButtonSharedInfo},get_borderStyle:function(){return this.$1().buttonObjectBorderStyle},get_borderWidth:function(){return this.$1().buttonObjectBorderWidth},get_borderColor:function(){return bQ.convertColorForCanvas(this.$1().buttonObjectBorderColor)},get_backgroundColor:function(){return bQ.convertColorForCanvas(this.$1().buttonObjectBackgroundColor)},get_caption:function(){return this.$1().buttonCaption},get_clickActionString:function(){return this.get_buttonZone().buttonClickAction},get_buttonType:function(){return this.get_buttonZone().dashboardButtonType},get_tooltipText:function(){if(!ss.isNullOrEmptyString(this.get_internalModel().buttonTooltipText)){return this.get_internalModel().buttonTooltipText}else{return this.$1().buttonTooltipText}},get_imagePathKey:function(){return this.get_internalModel().buttonImagePathKey},get_imageWidth:function(){return this.get_internalModel().imageWidth},get_imageHeight:function(){return this.get_internalModel().imageHeight},get_enabledState:function(){return this.get_internalModel().dashboardButtonEnabledState},update:function(e,ex){this.simpleSwapToUpdate(e,this.$2$1,ex)}},gV);ss.initClass(bx,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'calculation-auto-complete'},this.c))}},ss.makeGenericType(bd,[Object,by]));ss.initClass(by,a,{});ss.initClass(bB,a,{add_calculationUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_calculationUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_isAdhoc:null,get_calculationFunctionListModel:function(){return this.$2$2},set_calculationFunctionListModel:function(e){this.$2$2=e},get_hasCalculation:function(){return ss.isValue(this.pm)&&(!tab.MiscUtil.isNullOrEmpty$3(this.$1().calculationCaption)||!tab.MiscUtil.isNullOrEmpty$3(this.$1().pendingCalcName)||!tab.MiscUtil.isNullOrEmpty$3(this.$1().datasource))},get_isNewCalculation:function(){return tab.MiscUtil.isNullOrEmpty$3(this.$1().fn)},get_adHocShelf:function(){return this.$1().shelfType||'none-shelf'},get_adHocShelfPosition:function(){return this.$1().shelfPosIndex},get_adHocPaneSpecId:function(){return this.$1().paneSpec},$1:function(){return this.pm},get_tokens:function(){return this.$1().styleTokenList||[]},get_name:function(){return this.$1().pendingCalcName||''},get_fieldName:function(){return this.$1().fn||''},get_errors:function(){return this.$1().errorInfoList||[]},get_errorSummary:function(){return this.$1().errorString||''},get_caption:function(){return this.$1().calculationCaption||''},get_formula:function(){return this.$1().calculationFormula||''},get_dependencies:function(){return this.$1().calculationDependencies||''},get_dependenciesBtnLabel:function(){return this.$1().label||''},get_dataSourceName:function(){return this.$1().datasource||''},get_dataSourceCaption:function(){var e=Y.get_instance().get_workbook().get_dataSchema();if(ss.isNullOrUndefined(e)){return null}var ex=e.findDataSourceByName(this.get_dataSourceName());if(ss.isNullOrUndefined(ex)){return null}return ex.get_caption()},get_useParameters:function(){return ss.coalesce(this.$1().useParameters,false)},get_calculationContext:function(){return ss.coalesce(this.$1().calculationContext,'calculation-dialog')},update:function(e,ex){this.simpleSwapToUpdate(e,this.$2$1,ex);if(ss.isValue(this.$1())&&ss.isValue(this.$1().expressionFuncPm)){this.get_calculationFunctionListModel().update(this.$1().expressionFuncPm,ex)}}},gV);ss.initInterface(fV,a,{get_notificationId:null,onNotify:null});ss.initClass(bz,a,{get_notificationId:function(){return'doc:calculation-dialog-event'},get_isAdhoc:function(){return false},onNotify:function(e,ex){this.update(e,ex)}},bB,[fV]);ss.initClass(bA,a,{add_functionListUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_functionListUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},$1:function(){return this.pm},get_functions:function(){return this.$1().expressionFuncList||[]},update:function(e,ex){this.simpleSwapToUpdate(e,this.$2$1,ex)}},gV);ss.initClass(bC,a,{});ss.initEnum(bD,a,{success:200,nothingToCancel:204});ss.initClass(bE,a,{});ss.initClass(bF,a,{get_items:function(){return this.$1().domainTables},$1:function(){return this.pm},update:function(e){if(!this.isNewPresModelSameAsOld(e)){this.swapAndCopyPresModel(e)}}},gV);ss.initInterface(fM,a,{getItemNamesFromObjectId:null});ss.initClass(bG,a,{add_legendChanged:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_legendChanged:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_legendNameChanged:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_legendNameChanged:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_worksheetName:function(){return this.$1().get_worksheetName()},get_id:function(){return this.get_legendNames().join(';')+this.$2},get_catLegendPresModel:function(){return this.pm},get_isContextMenuAllowed:function(){return this.get_catLegendPresModel().isContextMenuAllowed||false},get_isHighlightEnabled:function(){return this.get_catLegendPresModel().isHighlightEnabled||false},get_isHighlightAllowed:function(){return this.get_catLegendPresModel().isHighlightAllowed||false},get_isOneWay:function(){return this.get_catLegendPresModel().oneWayBrushing||false},get_fieldCaptions:function(){return this.get_catLegendPresModel().fieldCaptions},get_legendNames:function(){return this.get_catLegendPresModel().legendNames},get_legendTypeEnum:function(){return this.$2},get_items:function(){return bG.$0(this.get_legendTypeEnum(),this.get_catLegendPresModel())},$1:function(){var e=ss.safeCast(this.parent,lx);return e.get_zone()},getItemNamesFromObjectId:function(e){var ex=_.find(this.get_items(),function(lA){return lA.objectId===e});return ex.itemValues},update:function(e,ex){if(this.$2==='shape'&&ss.isValue(e.markShapeList)&&tab.FeatureFlags.isEnabled('WebDropServerRenderedLegends')&&!Y.get_instance().get_isLocalRenderMode()){Y.get_instance().get_shapeManager().updateCustomImageMap(e.markShapeList)}if(this.isNewPresModelSameAsOld(e)){return}eM.notifyFontsFromCategoricalLegendPresModel(e);var lA=this.get_catLegendPresModel();this.swapAndCopyPresModel(e);if(ss.isValue(lA)&&!_.isEqual(lA.legendNames,e.legendNames)){this.raiseEvent(this.$2$2,ex)}this.raiseEvent(this.$2$1,ex)}},gV,[fM]);ss.initClass(hN,a,{update:function(e,ex){if(!this.isNewPresModelSameAsOld(e)){this.swapAndCopyPresModel(e)}}},gV);ss.initClass(bH,a,{get_categoricalFilter:function(){return this.$3$1},set_categoricalFilter:function(e){this.$3$1=e},get_mode:function(){return this.$1.categoricalMode},get_isAllButtonVisible:function(){return this.$1.isAllButtonVisible},get_isAllButtonSelected:function(){return this.$1.categoricalFilter.allSelected},get_isSelectionExclusive:function(){return this.$1.categoricalFilter.isSelectionExclusive},get_showApplyAndCancelButtons:function(){return this.$1.showApplyAndCancelButtons},get_showSearchButton:function(){return this.$1.isSearchable},get_showMoreLessButton:function(){return this.$1.canShowMoreFewerButton},get_showClearButton:function(){return this.$1.canShowFilterStateButton},get_getDomainValue:function(){return this.$1.filterDomainType},getDomains:function(){return this.$1.filterDomains},update:function(e,ex){hN.prototype.update.call(this,e,ex);this.$1=e;this.get_categoricalFilter().update(this.$1.categoricalFilter)}},hN);ss.initClass(bI,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'change-workbook-ui-mode'},this.c))}},ss.makeGenericType(bd,[Object,bJ]));ss.initClass(bJ,a,{});ss.initClass(bK,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'check-connection'},this.c))}},ss.makeGenericType(bd,[Object,bL]));ss.initClass(bL,a,{});ss.initEnum(bN,a,{clipNone:0,clipX:1,clipY:2,clipXY:3});ss.initClass(bO,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'close-data-alert-dialog'},this.c))}},ss.makeGenericType(bd,[Object,bP]));ss.initClass(bP,a,{});ss.initClass(bQ,a,{get_r:function(){return this.$7},get_g:function(){return this.$6},get_b:function(){return this.$4},get_a:function(){return this.$3},get_isOpaque:function(){return this.get_a()>=0.999989986419678},isLuminanceAboveThreshold:function(e){return this.$1()>e},isLStarAboveThreshold:function(e){return this.$0()>e},isLuminanceAgainstBackgroundAboveThreshold:function(e,ex){return this.$2(e)>ex},setRGBStr:function(e){this.$8=e},isValueAboveThreshold:function(e){var ex=bQ.alphaBlend(this,bQ.white);return Math.max(Math.max(ex.get_r(),ex.get_g()),ex.get_b())>e},toString:function(){if(this.$5===''){this.$5=((this.$3>=0.999989986419678)?this.toRgb():this.toRgba())}return this.$5},$0:function(){var e=this.$1();var ex=116*bQ.$4(e)-16;return ex},$1:function(){return bQ.$5(this.get_r(),this.get_g(),this.get_b())},$2:function(e){var ex=ss.Int32.trunc(this.$3*this.$7+(1-this.$3)*e.get_r());var lA=ss.Int32.trunc(this.$3*this.$6+(1-this.$3)*e.get_g());var lB=ss.Int32.trunc(this.$3*this.$4+(1-this.$3)*e.get_b());return bQ.$5(ex,lA,lB)},getApparentColor:function(e){var ex=ss.Int32.trunc((1-bQ.$2(this.$7))*e.get_r());var lA=ss.Int32.trunc((1-bQ.$2(this.$6))*e.get_g());var lB=ss.Int32.trunc((1-bQ.$2(this.$4))*e.get_b());return new bQ(ex,lA,lB,this.$3)},toRgba:function(){return'rgba('+this.$7+','+this.$6+','+this.$4+','+this.$3+')'},toRgba255:function(){return'rgba('+this.$7+','+this.$6+','+this.$4+','+bQ.alphaFractionTo255(this.$3)+')'},toRgb:function(){if(this.$8===''){return'rgb('+this.$7+','+this.$6+','+this.$4+')'}return this.$8},toRgbHex:function(){return'#'+bQ.$6(this.$7,2)+bQ.$6(this.$6,2)+bQ.$6(this.$4,2)},toHoverColor:function(){var e=(this.isValueAboveThreshold(77)?bQ.blackHoverColor:bQ.whiteHoverColor);return((this.get_a()<1)?e:bQ.alphaBlend(e,this))},toArgbInt:function(){var e=ss.Int32.trunc(bQ.alphaFractionTo255(this.$3));return(e<<24)+(this.$7<<16)+(this.$6<<8)+this.$4}});ss.initClass(bR,a,{get_paletteCollectionPresModel:function(){return this.pm},get_qColorPaletteGroups:function(){return this.get_paletteCollectionPresModel().qColorPaletteGroups},get_catColorPaletteGroups:function(){return this.get_paletteCollectionPresModel().catColorPaletteGroups},get_colorPalettes:function(){var e=this.pm;if(ss.isNullOrUndefined(e)){return[]}return e.colorPalettes},colorPaletteGroup:function(e){var ex=e.palettesIndices;return _.map(ex,ss.mkdel(this,function(lA){return this.get_colorPalettes()[lA]}))},update:function(e,ex){this.simpleSwapToUpdate(e,null,ex)}},gV);ss.initClass(bS,a,{});ss.initClass(bT,a,{add_onUrlActionsResponse:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_onUrlActionsResponse:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},add_onInvalidation:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_onInvalidation:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},add_tabChangeCompleted:function(e){this.$1$3=ss.delegateCombine(this.$1$3,e)},remove_tabChangeCompleted:function(e){this.$1$3=ss.delegateRemove(this.$1$3,e)},add_newLayoutId:function(e){this.$1$4=ss.delegateCombine(this.$1$4,e)},remove_newLayoutId:function(e){this.$1$4=ss.delegateRemove(this.$1$4,e)},add_onSessionRecoveryAttempt:function(e){this.$1$5=ss.delegateCombine(this.$1$5,e)},remove_onSessionRecoveryAttempt:function(e){this.$1$5=ss.delegateRemove(this.$1$5,e)},add_onInitialBootstrap:function(e){this.$1$6=ss.delegateCombine(this.$1$6,e)},remove_onInitialBootstrap:function(e){this.$1$6=ss.delegateRemove(this.$1$6,e)},add_onPrimaryBootstrapSuccess:function(e){this.$1$7=ss.delegateCombine(this.$1$7,e)},remove_onPrimaryBootstrapSuccess:function(e){this.$1$7=ss.delegateRemove(this.$1$7,e)},add_switchingViz:function(e){this.$1$8=ss.delegateCombine(this.$1$8,e)},remove_switchingViz:function(e){this.$1$8=ss.delegateRemove(this.$1$8,e)},add_destroyView:function(e){this.$1$10=ss.delegateCombine(this.$1$10,e)},remove_destroyView:function(e){this.$1$10=ss.delegateRemove(this.$1$10,e)},add_commandQueueComplete:function(e){this.$1$11=ss.delegateCombine(this.$1$11,e)},remove_commandQueueComplete:function(e){this.$1$11=ss.delegateRemove(this.$1$11,e)},add_undoCommand:function(e){this.$1$12=ss.delegateCombine(this.$1$12,e)},remove_undoCommand:function(e){this.$1$12=ss.delegateRemove(this.$1$12,e)},add_modelsUpdated:function(e){this.$1$13=ss.delegateCombine(this.$1$13,e)},remove_modelsUpdated:function(e){this.$1$13=ss.delegateRemove(this.$1$13,e)},add_intermediateUpdate:function(e){this.$1$14=ss.delegateCombine(this.$1$14,e)},remove_intermediateUpdate:function(e){this.$1$14=ss.delegateRemove(this.$1$14,e)},add_remoteCommandFailure:function(e){this.$1$15=ss.delegateCombine(this.$1$15,e)},remove_remoteCommandFailure:function(e){this.$1$15=ss.delegateRemove(this.$1$15,e)},get_loader:function(){return this.$13},$N:function(){return this.$X.length===0&&this.$17.$3()===0},$M:function(){return _.any(this.$X,bT.$4)},cancelRunningCommand:function(e,ex,lA){if(!tab.FeatureFlags.isEnabled('CommandCancellation')){return}this.$1();this.$16.$1(true,false);this.$10=true;var lB=new Date;while(ss.isValue(this.$17.$0())){}ss.clear(this.$X);ss.clearKeys(this.$V);ss.clear(this.$Z);this.$U=null;this.$R.cancelRunningCommand(e,ss.mkdel(this,function(lC,lD){var lE=new Date;if(ss.isValue(lC)){this.$14=!!(this.$14|lC.isWorldNew);this.$H(lC);var lF=new gc;lF.primarySheet=null;lF.layoutStatus=lC;lF.cmdResult=null;var lG={item1:lC.applicationPresModel,item2:lF};this.$7(0,lG);this.$u(null)}if(!ss.staticEquals(ex,null)){ex(lD)}this.$10=false;this.$16.$0();var lH=new Date;bE.$1(e.commandName,lD,lB,lE,lH)}),ss.mkdel(this,function(lC){if(!ss.staticEquals(lA,null)){lA()}this.$10=false;this.$16.$0();var lD=new Date;bE.$0(e.commandName,lB,lD)}))},resetInvalidationHandlers:function(){this.$1$1=null;this.$1$2=null;this.$1$7=null},setBrowserViewportFunc:function(e){this.$Y=e;if(hH.get_progressiveLoadEnabled()){this.$Y(ss.mkdel(this,function(ex){this.$13.setViewport(ex)}))}},prepareForSheetChange:function(){be.get_waitHandler().showAndLock()},switchViz:function(e,ex,lA){if(!ss.staticEquals(this.$1$8,null)){this.$1$8()}this.$P=false;jR.reset();tabBootstrap.ViewerBootstrap.resetInstance();var lB=tsConfig.staticAssetVersion;jR.resetTsConfig(e);var lC=this.$l(tsConfig.cssStaticAssetFiles,tsConfig.jsStaticAssetFiles);var lD=!ss.referenceEquals(lB,tsConfig.staticAssetVersion);if(lD||lC){ex.setWindowLocation(null);return}bT.$a=false;var lE=ex.get_ignoreStickySession();if(!lE){ex.updateForViewingSheet(tsConfig.repositoryUrl).replaceState(null)}lA(this.legacySession);if(!ss.staticEquals(bT.$1$9,null)){bT.$1$9()}},$l:function(e,ex){for(var lA=0;lA<e.length;lA++){var lB=e[lA];if(!gZ.isCssLoaded(lB)){return true}}for(var lC=0;lC<ex.length;lC++){var lD=ex[lC];if(!gZ.isScriptLoaded(lD)){return true}}return false},$e:function(e){this.$K(e);if(!ss.staticEquals(this.$1$7,null)){this.$1$7()}var ex=kR.createForCurrentWindowLocation();if(ex.get_retry()){ex.set_retry(false);ex.replaceState(null)}if(ss.isValue(e.sessionState)){this.adoptServerSessionState(e.sessionState)}this.$h(e.worldUpdate.applicationPresModel);this.$T.handlePotentialBootstrapDataSourceException(e);if(ss.isNullOrUndefined(e.sessionState)){if(!ss.staticEquals(this.$1$6,null)){this.$1$6()}}},$d:function(e){ji.onVizqlPinged();var ex=e['status'];if(ex===200){var lA=e['message'];if(ss.isNullOrUndefined(lA)){lA=e['_message']}var lB=lA;if(ss.isValue(lB)&&lB.substr(0,12)==='Invalid JSON'){bT.sendParentCompletedMessage();var lC=tab.Strings.ServerErrorInvalidJSON+'<br>';this.$S.ShowErrorDialog(lC,tab.Strings.SessionUnknownErrorTitle,null);throw new ss.Exception('Invalid JSON')}}else if(ex===403){var lD=0;var lE='';try{var lF=JSON.parse(e['responseText']);if(ss.isValue(lF)){lD=lF.code;lE=lF.message}}catch(lM){}bT.sendParentCompletedMessage();this.legacySession.get_sessionErrorHandler().handleSessionForbiddenAction(lD,lE)}else if(ex===401){if(tab.FeatureFlags.isEnabled('SkipConnectionsDuringLoad')){var lG=e['responseText'];var lH=tab.DataSourceConnectionAttemptErrorResponse.tryDeserialize(lG);var lI=(ss.isNullOrUndefined(lH)?lG:lH.RedirectUrl);tab.WindowHelper.locationReplace(window.self,lI)}else{var lJ=e['responseText'];tab.WindowHelper.locationReplace(window.self,lJ)}}else if(ex===410){this.legacySession.get_sessionErrorHandler().handleSessionExpiration(true)}else if(ex===413){bT.sendParentCompletedMessage();this.legacySession.get_sessionErrorHandler().handleSessionLimitExceeded()}else if(ex!==0){bT.sendParentCompletedMessage();var lK=e['responseText'];if(tab.FeatureFlags.isEnabled('SkipConnectionsDuringLoad')){var lL=tab.DataSourceConnectionAttemptErrorResponse.tryDeserialize(lK);if(ss.isValue(lL)){lK=lL.ErrorMessage}}if(ex===502||ex===503){this.legacySession.get_sessionErrorHandler().handleSessionKilled(lK)}else{this.legacySession.get_sessionErrorHandler().handleUnknownErrorStatus(lK)}this.legacySession.nudgeWait()}},refreshLayout:function(){if(tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapCompleted()){return}var ex=ss.mkdel(this,function(lC){if(tab.ObjectCoverage.shouldTrack('bootstrap-initial')){lC=(new tab.ObjectCoverage('bootstrap-initial')).instrument(lC,'')}var lD=lC;try{this.$e(lD)}catch(lE){var e=ss.Exception.wrap(lE);bT.handleBootstrapException(e,this.$S)}});var lA=ss.mkdel(this,function(e){var lC=e;if(ss.isValue(lC)){_.defer(ss.mkdel(this,function(){{var lD=tabBootstrap.MetricsController.createContext('PROSEC'.toString(),2,null);try{try{this.$k(lC)}catch(lE){var e1=ss.Exception.wrap(lE);bT.handleBootstrapException(e1,this.$S)}}finally{if(ss.isValue(lD)){lD.dispose()}}}if(hH.get_progressiveLoadEnabled()){this.$F()}else{this.$q()}}))}});var lB=ss.mkdel(this,function(e){this.$d(e)});tabBootstrap.ViewerBootstrap.get_instance().waitOnInitialLayoutModel(ex,lB,lA)},delayLocalUrlActions:function(e){this.$W=this.$W.concat.apply(this.$W,e)},worldCheckpoint:function(){return this.$18.worldCheckpoint()},$G:function(e){var ex=function(){e()};var lA={};lA.type='POST';lA.url=bT.$1('transitionGuest',this.legacySession);var lB=tab.MiscUtil.get_urlPathnameParts();var lC=(ss.keyExists(lB,3)?lB[3]:'');var lD=tsConfig.current_sheet_name;var lE=ss.mkdict([':authSheet',lD,'sheet_id',lC]);lA.data=lE;var lF=new jf(this.legacySession,null,ex,null,true,true);lv.helper(lA,lF)},$r:function(e,ex,lA,lB,lC){var lD=tab.Strings.UnhandledExceptionMessage(this.legacySession.get_id(),e);var lE=bT.$0(this.legacySession.get_id(),e,lC);this.$S.ShowErrorDialog(lD,tab.Strings.UnhandledExceptionTitle,lE);bT.$6(JSON.stringify(e));tab.ErrorTrace.windowOnError(e,ex,lA,lB,lC);return false},adoptServerSessionState:function(e){var ex=e.outcome;if(!ss.staticEquals(this.$1$5,null)){this.$1$5(ex)}var lA=e.stateGuids;if((ex==='FULL'||ex==='PARTIAL')&&lA.length>0){var lB=lA[lA.length-1];this.legacySession.revertHistory([],lB)}else{this.legacySession.revertHistory(lA,null)}},$t:function(e,ex){if(ss.isValue(e)){gV.nonWorldUpdate(ss.mkdel(this,function(lA){lA.dialogProvider=this.$S;Y.get_instance().update(e,lA);this.$18.checkpointAppPresModel()}));this.$z();if(!ex){this.$p()}}},$p:function(){if(!ss.staticEquals(this.$1$14,null)){this.$1$14()}},$m:function(){if(hH.get_progressiveLoadEnabled()){this.$13=new hH;this.$13.add_progressiveLoad(ss.mkdel(this,this.$t));this.$13.add_progressiveLoadComplete(ss.mkdel(this,this.$s));this.$Q=[]}},$F:function(){this.$13.start()},$1:function(){if(hH.get_progressiveLoadEnabled()&&this.$13.get_hasZonesToLoad()){this.$13.abort();this.$Q=[];this.$s()}},$s:function(){this.$D();this.$q();lt.get().raiseOnProgressiveLoadComplete();lt.get().raiseOnDashboardLoadComplete();for(var e=0;e<this.$Q.length;e++){var ex=this.$Q[e];ex()}this.$Q=[]},$h:function(e){{var ex=tabBootstrap.MetricsController.createContext('PROPRI',2,null);try{var lA=new dE;lA.exceptionHandler=ss.mkdel(this,function(lG){bT.handleBootstrapException(lG,this.$S)});var lB=lA;var lC={dialogProvider:this.$S,eventHandler:lB};lt.get().raiseOnBootstrapResponse(e);if(hH.get_progressiveLoadEnabled()){e=this.$13.extractZoneContent(e)}{var lD=tabBootstrap.MetricsController.createContext('MDLINI'.toString(),2,null);try{var lE=Y.get_instance();lE.update(e,lC)}finally{if(ss.isValue(lD)){lD.dispose()}}}this.$18.checkpointAppPresModel();jR.notifyModelsInitialized();{var lF=tabBootstrap.MetricsController.createContext('MDLEVT'.toString(),2,null);try{lB.fireDeferredEvents()}finally{if(ss.isValue(lF)){lF.dispose()}}}}finally{if(ss.isValue(ex)){ex.dispose()}}}this.$z();if(!hH.get_progressiveLoadEnabled()){this.$D();lt.get().raiseOnDashboardLoadComplete()}this.legacySession.nudgeWait()},$k:function(e){var ex=e['secondaryInfo'.toString()];if(!ss.isValue(ex)||!ss.isValue(ex.presModelMap)||ss.getKeyCount(ex.presModelMap)===0){return}var lA=Y.get_instance().get_appPresModel();if(ss.keyExists(ex.presModelMap,'dataDictionary')){var lB=ex.presModelMap['dataDictionary'].presModelHolder;var lC=lB['genDataDictionaryPresModel'];if(ss.isValue(lC)){lA.dataDictionary=lC}}var lD=new dE;lD.exceptionHandler=ss.mkdel(this,function(lJ){bT.handleBootstrapException(lJ,this.$S)});var lE=lD;var lF={dialogProvider:this.$S,eventHandler:lE};if(ss.keyExists(ex.presModelMap,'vizData')){var lG=lA.workbookPresModel.dashboardPresModel;var lH=ex.presModelMap['vizData'].presModelHolder;var lI=lH['genPresModelMapPresModel'];if(hH.get_progressiveLoadEnabled()&&this.$13.get_hasZonesToLoad()){this.$13.updateZonesWithVizData(lI,lF)}else{kN.addVizDataToZones(lI.presModelMap,lG.zones)}}Y.get_instance().update(lA,lF);this.$18.checkpointAppPresModel();if(gY.hasAnyImpliedSelection()){lE.fireDeferredEvents()}this.$z()},$K:function(e){this.$J(e.layoutId);var ex=e.newSessionId;if(!tab.MiscUtil.isNullOrEmpty$3(ex)){tsConfig.sessionid=ex}var lA=e.workbookLocale;if(!ss.isNullOrEmptyString(lA)){tsConfig.workbookLocale=lA}var lB=e.newClientNum;if(!ss.isNullOrEmptyString(lB)){tsConfig.clientNumber=lB;tabBootstrap.Utility.addToUrlHash('cn',lB)}tsConfig.current_sheet_name=e.sheetName;lv.set_currentTabName(tsConfig.current_sheet_name);tsConfig.workbook_allow_subscriptions=e.allowSubscriptions;tsConfig.allow_subscribe_on_data_present=e.allowSubscribeOnDataPresent;if(ss.isValue(e.worldUpdate)&&ss.isValue(e.worldUpdate.applicationPresModel.workbookPresModel.dashboardPresModel)){tsConfig.current_sheet_type=e.worldUpdate.applicationPresModel.workbookPresModel.dashboardPresModel.sheetLayoutInfo.sheetType}},$J:function(e){tsConfig.layoutid=e},$o:function(){while(this.$17.$3()>0&&!this.$M()){this.$8(this.$17.$0())}},$8:function(ex){this.$X.push(ex);if(ex.get_isBlocking()){this.$16.$1(ex.get_blockType()==='immediately',!ex.get_shouldShowCommandWaiter())}var lA=new dE;var lB={dialogProvider:this.$S,eventHandler:lA};var lC=this.$15.beginTransaction(lB);var lD;try{ex.execute(lC,this.$R,ss.mkdel(this,function(e){this.$4(ex,e)}));lD=this.$15.endTransaction();if(Y.get_instance().get_isLocalRenderMode()&&!bT.fireDeferredUrlActions){this.$9(this.$W)}if(ex.get_shouldShowCommandWaiter()){ex.get_commandWaiter().handleCommandStarted(ex)}}catch(lG){var e=ss.Exception.wrap(lG);tab.ErrorTrace.report(e);this.$15.rollbackTransaction();this.$4(ex,new bW(false,e));return}finally{this.$C()}var lE=null;if(ex.get_hasLocalComponent()){lE=tabBootstrap.MetricsController.createContext('PROLOC'.toString(),8,ex.buildCommandMetricsParameters())}{var lF=lE;try{if(ss.isValue(lD)){if(hH.get_progressiveLoadEnabled()){lD=this.$x(lD,lB,true)}Y.get_instance().update(lD,lB);this.$18.markCurrentWorldAsDirty();lA.fireDeferredEvents();this.$z()}}finally{if(ss.isValue(lF)){lF.dispose()}}}if(this.$X.length>0){this.$O=false}},$4:function(e,ex){try{var lA=null;if(e.get_hasRemoteComponent()){lA=tabBootstrap.MetricsController.createContext('PROREM'.toString(),8,e.buildCommandMetricsParameters())}{var lB=lA;try{try{ss.remove(this.$X,e);if(this.$N()){this.$u(e)}}finally{this.processingRenderModeChange=false;this.processingStoryPointChange=false}}finally{if(ss.isValue(lB)){lB.dispose()}}}this.$f(e,ex);if(e.isFinished()){e.triggerCallbacks();if(e.get_shouldShowCommandWaiter()){e.get_commandWaiter().handleCommandCompleted()}}if(this.$N()){this.$16.$0()}this.$o()}catch(lC){var failedErrorDialogCommands=tab.ListExtensions.where(Object).call(null,e.get_remoteCommands(),ss.mkdel(this,function(lD){return this.legacySession.get_sessionErrorHandler().checkForErrorDialogFailure(lD)}));if(failedErrorDialogCommands.length>0){this.legacySession.get_sessionErrorHandler().handleErrorDialogFailure(failedErrorDialogCommands[0])}else{throw lC}}},$f:function(e,ex){if(!ex.succeeded&&tab.FeatureFlags.isEnabled('SkipConnectionsDuringLoad')){var lA=this.$T.handle(ex.error,e);if(lA){this.$18.revertLocalChanges();this.$16.$0()}}},$9:function(e){var ex=(ss.isValue(e)?ss.arrayClone(e):[]);this.$C();if(!ss.staticEquals(this.$1$1,null)&&ex.length>0){this.$1$1(ex,this.$S)}},$C:function(){this.$W.length=0},$j:function(e,ex,lA){if(ss.isNullOrUndefined(ex)||ss.isNullOrUndefined(lA)){return}var lB=lA['vqlCmdResponse'.toString()];if(ss.isNullOrUndefined(lB)||ss.isNullOrUndefined(lB.layoutStatus)){return}var lC=lB.layoutStatus;if(ss.isValue(lC.isWorldNew)){this.$14=!!(this.$14|lC.isWorldNew)}if(ss.isValue(lC.urlActionList)&&!Y.get_instance().get_isLocalRenderMode()||bT.fireDeferredUrlActions){if(lC.urlActionList.length>0){bT.fireDeferredUrlActions=false;this.$9(lC.urlActionList)}}this.$H(lC);var lD=new gc;lD.primarySheet=this.$b(ex);lD.layoutStatus=lB.layoutStatus;lD.cmdResult=lB.cmdResultList[0];lD.commandName=ex.commandName;var lE=lB.layoutStatus.applicationPresModel;var lF={item1:lE,item2:lD};this.$7(e,lF);var lG=ss.isValue(this.$U)&&!ss.referenceEquals(tsConfig.current_sheet_name,this.$U.sheetName);var lH=new cg;lH.set_applicationPresModel(lE);lH.set_worldUpdateCommand(ex);lH.set_sheetChanged(lG);lH.set_rebuildTheWorld(this.$14);var lI=lH;lt.get().raiseOnCommandResponse(lI)},$b:function(e){var ex=null;if(ss.isValue(e.commandParams)&&!ss.referenceEquals(e.commandName,{ns:'tabsrv',cmd:'render-tooltip-server'}.cmd)){if(ss.keyExists(e.commandParams,'worksheet')){ex=e.commandParams['worksheet']}else if(ss.keyExists(e.commandParams,'visualIdPresModel')){var lA;if(typeof(e.commandParams['visualIdPresModel'])==='string'){var lB=e.commandParams['visualIdPresModel'];lA=JSON.parse(lB)}else{lA=e.commandParams['visualIdPresModel']}ex=lA.worksheet}}return ex},$H:function(e){if(ss.isValue(e.applicationPresModel)&&ss.isValue(e.applicationPresModel.workbookPresModel)&&ss.isValue(e.applicationPresModel.workbookPresModel.dashboardPresModel)&&ss.isValue(e.applicationPresModel.workbookPresModel.dashboardPresModel.sheetLayoutInfo)){this.$U=e.applicationPresModel.workbookPresModel.dashboardPresModel.sheetLayoutInfo}},$i:function(e,ex,lA){var lB=new gc;lB.cmdResult={commandName:ex.commandName,commandReturn:lA};var lC=lB;var lD={item1:null,item2:lC};this.$7(e,lD);this.$A(lA)},$u:function(e){if(Y.get_instance().get_isOffline()){return}var ex=new dE;var lA={dialogProvider:this.$S,eventHandler:ex};var lB=ss.getKeyCount(this.$V)>0;var lC=false;if(ss.isValue(this.$U)){lC=!ss.referenceEquals(tsConfig.current_sheet_name,this.$U.sheetName);this.$J(this.$U.layoutId.toString());if(lC){if(!ss.staticEquals(bT.$1$16,null)){bT.$1$16()}}if(lC||this.$14){this.$1$10()}}var lD=this._getRenderMode();var lE=this.$c();this.$3();this.$15.rollbackTransactions(lA);if(this.$14){Y.get_instance().get_workbook().handleWorldReset()}if(this.$14||lC){this.$1()}this.$2(lD,lA);this.$5();ss.clearKeys(this.$V);this.$18.checkpointAppPresModel();this.$15.resetTransactedState();this.$w(lE);this.$v(lC);if(lB){gY.reValidateVisualModels(lA)}ex.fireDeferredEvents();this.$g(e);this.$z();this.$L();if(!hH.get_progressiveLoadEnabled()&&lC){lt.get().raiseOnDashboardLoadComplete()}},$L:function(){this.$12.push(ss.mkdel(this,this.$y));this.$12.push(ss.mkdel(this,function(){fY.callWhenImagesLoaded(ss.mkdel(this,function(){this.$O=true}))}));if(hH.get_progressiveLoadEnabled()&&this.$13.get_hasZonesToLoad()){this.$Q.push(ss.mkdel(this,function(){this.$6()}))}else{this.$6()}this.$14=false},$6:function(){for(var e=0;e<this.$12.length;e++){var ex=this.$12[e];ex()}ss.clear(this.$12)},$w:function(e){if(e.get_isStory()){var ex=this.$c();if(ex.get_isStory()&&e.get_storyPointId()!==ex.get_storyPointId()&&ss.isValue(e.get_sheetName())&&ss.referenceEquals(e.get_sheetName(),ex.get_sheetName())){this.processingStoryPointChange=true;Y.get_instance().$3()}}},$v:function(e){if(ss.isNullOrUndefined(this.$U)){return}if(!e&&!this.$14){return}if(e){try{if(ss.isValue(window.parent)&&typeof(window.parent['handleSheetChanged'])==='function'){window.parent['handleSheetChanged'](this.$U.sheetName,this.$U.repositoryUrl)}}catch(lA){}}if(tsConfig.is_mobile_app&&!('sheetname'in this.$U)){this.$U['sheetName']=this.$U.sheetName}var ex={item1:tsConfig.current_sheet_name,item2:this.$U.sheetName};if(!ss.staticEquals(this.$1$4,null)){this.$1$4(this.$U)}N.get().onNewLayoutId([this.$U]);this.$12.push(ss.mkdel(this,function(){if(!ss.staticEquals(this.$1$3,null)){this.$1$3(ex)}}));this.$U=null},$3:function(){if(!tab.FeatureParamsLookup.getBool(46)){return}ss.clearKeys(this.$11);var e=Y.get_instance().pm;if(e===Object(e)&&e.workbookPresModel===Object(e.workbookPresModel)&&e.workbookPresModel.dashboardPresModel===Object(e.workbookPresModel.dashboardPresModel)){var ex=new ss.ObjectEnumerator(e.workbookPresModel.dashboardPresModel.zones);try{while(ex.moveNext()){var lA=ex.current();if(lA.value.presModelHolder===Object(lA.value.presModelHolder)&&ss.keyExists(lA.value.presModelHolder,'visual')){var lB=lA.value.presModelHolder['visual'];if(lB.scene===Object(lB.scene)&&ss.isValue(lB.scene.runtimeFinalDatastoreLocal)){this.$11[lA.key]=lB.scene.runtimeFinalDatastoreLocal}}}}finally{ex.dispose()}}},$5:function(){if(!tab.FeatureParamsLookup.getBool(46)||ss.getKeyCount(this.$11)===0){return}var e=Y.get_instance().pm;if(e.workbookPresModel===Object(e.workbookPresModel)&&e.workbookPresModel.workbookModified){var ex=new ss.ObjectEnumerator(e.workbookPresModel.dashboardPresModel.zones);try{while(ex.moveNext()){var lA={$:ex.current()};if(ss.keyExists(this.$11,lA.$.key)){var lB=new tab.DatastoreHandle(this.$11[lA.$.key],null);tab.RuntimeWebModule.proxy.marshallDatastore(lB).done(ss.mkdel({newZone:lA},function(lC){var lD=this.newZone.$.value.presModelHolder['visual'].scene.runtimeFinalDatastore;var lE=tab.JsHeapMarshaller.unmarshallHex(lD);if(!dy.deepCompare(lC,lE,0.001,'')){}}))}}}finally{ex.dispose()}}},$2:function(e,ex){var lA=_.keys(this.$V);lA=lA.sort(function(lK,lL){var lM=parseInt(lK);var lN=parseInt(lL);return((lM>lN)?1:-1)});var lB=Y.get_instance();var lC=false;var lD={$:null};for(var lE=this.$a(lA);lE<lA.length;lE++){var lF=lA[lE];var lG=this.$V[lF];var lH=lG.item1;var lI=lG.item2;if(ss.isNullOrUndefined(lH)||ss.isNullOrUndefined(lI)||ss.isNullOrUndefined(lI.layoutStatus)){continue}lC=!!(lC|iA.shouldRequestNewRuntimeData(lI.commandName,lH));if(hH.get_progressiveLoadEnabled()){lH=this.$x(lH,ex,false)}var lJ=lI.layoutStatus.active_tab||'';this.$E(lH,lB,lJ,lD);lB.update(lH,ex);this.$Z.push(lI);this.$I(lI);if(!this.processingRenderModeChange&&lH.renderMode!==e){this.processingRenderModeChange=true;this.$16.$2()}}if(lC||this.$14){Y.get_instance().$3()}if(!ss.staticEquals(lD.$,null)){this.remove_undoCommand(lD.$)}},$a:function(e){var ex=0;if(this.$14){for(var lA=e.length-1;lA>=0;lA--){var lB=e[lA];var lC=this.$V[lB];var lD=lC.item1;var lE=lC.item2;var lF=!(ss.isNullOrUndefined(lD)||ss.isNullOrUndefined(lE)||ss.isNullOrUndefined(lE.layoutStatus));if(lF&&lE.layoutStatus.isWorldNew){ex=lA;break}}}return ex},$I:function(e){if(!ss.isValue(e.layoutStatus.undoPosition)){return}if(ss.isNullOrUndefined(e.cmdResult)){return}var ex=e.cmdResult.commandName;var lA=this.legacySession.get_historyPosition();var lB=e.layoutStatus.undoPosition;if(ss.referenceEquals(ex,cl.serialize({ns:'tabsrv',cmd:'revert-workbook'}))){this.legacySession.revertHistory([],null)}else if(lB===lA-1){this.$B();this.legacySession.trackUndo()}else if(lB>lA){if(ss.referenceEquals(ex,cl.serialize({ns:'tabdoc',cmd:'redo'}))){this.legacySession.trackRedo()}else{this.legacySession.$a('',e.layoutStatus.guid,e.layoutStatus.undoPosition)}}},$E:function(e,ex,lA,lB){if(ss.staticEquals(lB.$,null)&&ss.isValue(e.workbookPresModel)&&(!ss.isValue(e.workbookPresModel.uiMode)||e.workbookPresModel.uiMode==='document')&&ss.isValue(ex.get_workbook())&&ex.get_workbook().get_uiMode()==='data-tab'&&ss.referenceEquals(lA,tsConfig.current_sheet_name)){lB.$=function(){var lC=dC.constructEnsureLayoutForSheetCommand();bT.SendCommand(lC)};this.add_undoCommand(lB.$)}},$x:function(e,ex,lA){if(hH.get_progressiveLoadEnabled()){var lB=Y.get_instance().get_appPresModel();var lC=false;if(Y.get_instance().get_workbook().get_isCurrentSheetStoryboard()&&ss.isValue(Y.get_instance().get_workbook().get_storyboard().get_flipboard())){var lD=Y.get_instance().get_workbook().get_storyboard().get_flipboard().get_currentStoryPointId();var lE=bT.$3(e);lC=ss.isValue(lE)&&lE!==lD}var lF=bT.$2(e);var lG=!ss.isNullOrEmptyString(lF)&&!ss.referenceEquals(lF,bT.$2(lB));if(lC||lG){this.$1();e=this.$13.extractZoneContent(e);this.$F()}else{e=this.$13.processModelUpdate(e,ex,lA)}}return e},$g:function(e){for(var ex=0;ex<this.$Z.length;ex++){var lA=this.$Z[ex];if(!ss.staticEquals(this.$1$2,null)){this.$1$2(lA)}var lB=ss.isValue(lA)&&ss.isValue(lA.cmdResult)&&ss.referenceEquals(lA.cmdResult.commandName,ch.buildQualifiedCommandName({ns:'tabsrv',cmd:'ensure-layout-for-sheet'}.ns,{ns:'tabsrv',cmd:'ensure-layout-for-sheet'}.cmd));this.$T.handlePotentialDataSourceException(e,lA.layoutStatus,lB)}ss.clear(this.$Z)},$q:function(){if(this.$P){return}this.$P=true;bT.$5();jR.notifyClientFullyLoaded();fY.callWhenImagesLoaded(ss.mkdel(this,function(){this.$O=true}));bT.sendParentCompletedMessage();ji.onVizqlPinged();bV.$0();bU.bootstrapCompleteStoryTelemetry()},$7:function(e,ex){if(ss.isValue(ex)){this.$V[e.toString()]=ex}},_getRenderMode:function(){return Y.get_instance().get_renderMode()},$c:function(){return new jV},$y:function(){if(!ss.staticEquals(this.$1$11,null)){this.$1$11()}},$B:function(){if(!ss.staticEquals(this.$1$12,null)){this.$1$12()}},$z:function(){if(!ss.staticEquals(this.$1$13,null)){this.$1$13()}},$A:function(e){if(!ss.staticEquals(this.$1$15,null)){this.$1$15(e)}},$D:function(){if(this.$P){return}var e=function(){var ex={};ex['t']=tabBootstrap.MetricsController.getTiming();ex['d']='ALLZNS';var lA=new tabBootstrap.MetricsEvent('gen',2,ex);tabBootstrap.MetricsController.logEvent(lA);Y.get_instance().$3()};fY.callWhenImagesLoaded(function(){gZ.registerModulesLoadedCallback(e)})},$0:function(e){var ex=e.get_commandName();if(ss.referenceEquals(ex,{ns:'tabdoc',cmd:'next-story-point'}.cmd)||ss.referenceEquals(ex,{ns:'tabdoc',cmd:'previous-story-point'}.cmd)||ss.referenceEquals(ex,{ns:'tabdoc',cmd:'set-active-story-point'}.cmd)||ss.referenceEquals(ex,{ns:'tabsrv',cmd:'ensure-layout-for-sheet'}.cmd)||ss.referenceEquals(ex,{ns:'tabsrv',cmd:'revert-workbook'}.cmd)){this.$1()}},$n:function(){return ss.getKeyCount(this.$V)>0||this.$X.length>0||this.$17.$3()>0}});ss.initClass(bU,a,{});ss.initClass(bV,a,{});ss.initClass(bW,a,{});ss.initEnum(bX,a,{proceed:0,stop:1});ss.initInterface(fO,a,{get_commandType:null,get_name:null});ss.initClass(ks,a,{get_serializedCommand:function(){return this.$2$1},set_serializedCommand:function(e){this.$2$1=e},get_isMenuButton:function(){return ss.isValue(this.get_wrappedCommandItemPresModel())&&ss.isValue(this.get_wrappedCommandItemPresModel().get_commands())},get_asMenuButton:function(){return this},get_isPlaceholder:function(){return this.$2$2},set_isPlaceholder:function(e){this.$2$2=e},get_legacyCommandModel:function(){return this.$2$3},set_legacyCommandModel:function(e){this.$2$3=e},get_status:null,get_commandType:null,get_name:null,get_description:null,get_imageRes:null,get_wrappedCommandItemPresModel:null},gV,[fO]);ss.initClass(bY,a,{get_legacyCommandModel:function(){var e=new cc;e.set_commandType(this.get_commandType());e.command=this.get_serializedCommand();e.set_name(this.get_name());e.description=this.get_description();e.imageRes=this.get_imageRes();e.status=this.get_status();return e},set_legacyCommandModel:function(e){},get_status:function(){var e=this.get_wrappedCommandItemPresModel().get_enabled();return((ss.isNullOrUndefined(e)||e)?'enabled':'disabled')},get_commandType:function(){if(ss.isNullOrUndefined(this.get_serializedCommand())){return 99}var e=ch.getCommandType(this.get_serializedCommand());return(ss.isValue(e)?ss.unbox(e):99)},get_name:function(){return this.get_wrappedCommandItemPresModel().get_name()},get_description:function(){return this.get_wrappedCommandItemPresModel().get_description()},get_imageRes:function(){if(ss.isNullOrUndefined(this.get_wrappedCommandItemPresModel().get_iconRes())){return null}return ss.coalesce(kd.lookupFullResourceAlias(this.get_wrappedCommandItemPresModel().get_iconRes()),null)},get_wrappedCommandItemPresModel:function(){if(ss.isNullOrUndefined(this.pm)){return null}return bZ.create(this.pm)},update:function(e,ex){this.pm=e;this.set_serializedCommand(ch.deserialize(this.get_wrappedCommandItemPresModel().get_command()));if(ss.isValue(this.get_serializedCommand())&&ex!==0&&!ss.isValue(this.get_serializedCommand().commandParams['selectAtPoint'])){this.get_serializedCommand().commandParams['tupleId']=ex.toString()}}},ks,[fO]);ss.initClass(bZ,a,{get_item:function(){return this.$0},get_name:function(){return this.$0['name'.toString()]},set_name:function(e){this.$0['name'.toString()]=e},get_description:function(){return this.$0['description'.toString()]},set_description:function(e){this.$0['description'.toString()]=e},get_readId:function(){return this.$0['readId'.toString()]},set_readId:function(e){this.$0['readId'.toString()]=e},get_commandsType:function(){return this.$0['commandsType'.toString()]},set_commandsType:function(e){this.$0['commandsType'.toString()]=e},get_enabled:function(){var e=this.$0['state'.toString()];if(ss.isNullOrUndefined(e)){return true}return e},set_enabled:function(e){this.$0['state'.toString()]=e},get_isChecked:function(){return this.$0['isChecked'.toString()]},set_isChecked:function(e){this.$0['isChecked'.toString()]=e},get_isDefault:function(){return this.$0['isDefault'.toString()]},set_isDefault:function(e){this.$0['isDefault'.toString()]=e},get_isRadioOn:function(){return this.$0['isRadioOn'.toString()]},set_isRadioOn:function(e){this.$0['isRadioOn'.toString()]=e},get_isVisible:function(){return ss.coalesce(this.$0['isVisible'.toString()],true)},set_isVisible:function(e){this.$0['isVisible'.toString()]=e},get_commands:function(){return this.$0['commands'.toString()]},set_commands:function(e){this.$0['commands'.toString()]=e},get_command:function(){return this.$0['command'.toString()]},set_command:function(e){this.$0['command'.toString()]=e},get_argumentParams:function(){return this.$0['argumentParams'.toString()]},set_argumentParams:function(e){this.$0['argumentParams'.toString()]=e},get_commandName:function(){return(ss.isNullOrUndefined(this.get_command())?null:this.get_command().split(' ')[0])},get_commandNameWithoutNamespace:function(){return((this.get_commandName().indexOf(':')!==-1)?this.get_commandName().split(':')[1]:this.get_commandName())},get_hasIcon:function(){return!ss.isNullOrEmptyString(this.get_iconRes())},get_iconRes:function(){return this.$0['iconRes'.toString()]},set_iconRes:function(e){this.$0['iconRes'.toString()]=e},dispose:function(){gm.unregisterShortcutCommand(this.get_commandName())}},null,[ss.IDisposable]);ss.initInterface(fX,a,{get_keyCombos:null,get_element:null,get_hintText:null,get_additionalOptions:null,onValidKeyCombo:null,isAllowed:null,executeShortcut:null});ss.initClass(gl,a,{get_keyCombos:null,get_element:null,get_hintText:function(){if(!tab.FeatureFlags.isEnabled('WebKeyboardShortcutHintText')){return null}var e=this.get_additionalOptions().customHintText;if(ss.isNullOrUndefined(e)){e=this.get_keyCombos().removeUnsupportedCombos(this.get_additionalOptions().areAllLocalesSupported).get_hintText()}return e},get_additionalOptions:function(){return new S},onValidKeyCombo:function(e){},isAllowed:null,executeShortcut:null,toString:function(){return ss.getTypeName(ss.getInstanceType(this))+this.get_element().attr('class')+'+'+this.get_element().attr('id')+this.get_keyCombos()+'+'+this.get_additionalOptions()}},null,[fX]);ss.initClass(fA,a,{get_element:function(){return $(document.body)},isAllowed:function(e){return gm.isGloballyAllowed(e,this)}},gl,[fX]);ss.initClass(ca,a,{get_commandId:null,get_additionalOptions:function(){var e=new S;e.commandId=this.get_commandId();return e},$0:function(){return gm.findCommandWrapper(this.get_commandId())},isAllowed:function(e){return ss.isValue(this.$0())&&fA.prototype.isAllowed.call(this,e)&&this.$0().get_enabled()&&this.$0().get_isVisible()},executeShortcut:function(e){var ex=ch.deserialize(this.$0().get_command());bT.SendCommand(new bM('immediately',null,ex))}},fA,[fX]);ss.initClass(cb,a,{});ss.initClass(cc,a,{get_commandType:function(){return this.$1$1},set_commandType:function(e){this.$1$1=e},get_name:function(){return this.$1$2},set_name:function(e){this.$1$2=e}},null,[fO]);ss.initClass(cd,a,{get_status:function(){return this.get_legacyCommandModel().status},get_commandType:function(){return this.get_legacyCommandModel().get_commandType()},get_name:function(){return this.get_legacyCommandModel().get_name()},get_description:function(){return this.get_legacyCommandModel().description},get_imageRes:function(){return this.get_legacyCommandModel().imageRes},get_wrappedCommandItemPresModel:function(){return null},update:function(e,ex){this.pm=null;this.set_legacyCommandModel(e);this.set_serializedCommand(this.get_legacyCommandModel().command);this.set_isPlaceholder(ex)}},ks,[fO]);ss.initClass(ce,a,{test:function(e){tab.Param.verifyValue(e,'command');if(ss.isNullOrUndefined(e.get_commandType())){}return ss.isValue(e.get_commandType())&&e.get_commandType()!==99&&ss.keyExists(this.$0,e.get_commandType())&&this.$0[e.get_commandType()]==='granted'}});ss.initClass(cf,a,{});ss.initClass(cg,a,{get_applicationPresModel:function(){return this.$2$1},set_applicationPresModel:function(e){this.$2$1=e},get_worldUpdateCommand:function(){return this.$2$2},set_worldUpdateCommand:function(e){this.$2$2=e},get_sheetChanged:function(){return this.$2$3},set_sheetChanged:function(e){this.$2$3=e},get_rebuildTheWorld:function(){return this.$2$4},set_rebuildTheWorld:function(e){this.$2$4=e}},ss.EventArgs);ss.initClass(ch,a,{});ss.initClass(ci,a,{add_commandsChanged:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_commandsChanged:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_shouldUpdate:function(){return this.$1},set_shouldUpdate:function(e){this.$1=e},get_commands:function(){return this.pm},update:function(e,ex){if(this.get_shouldUpdate()){this.forceUpdate(e,ex)}},forceUpdate:function(e,ex){this.simpleSwapToUpdate$1(ci).call(this,e,this.$2$1,this,ex)}},gV);ss.initClass(cj,a,{get_presModel:function(){return this.$0},get_commandItems:function(){return this.$0['commandItems'.toString()]},set_commandItems:function(e){this.$0['commandItems'.toString()]=e},get_defaultItem:function(){return this.$0['defaultItem'.toString()]},set_defaultItem:function(e){this.$0['defaultItem'.toString()]=e}});cj.$ctor1.prototype=cj.prototype;ss.initClass(ck,a,{});ss.initClass(cl,a,{});ss.initClass(cm,a,{sendRequest:function(e){var ex={$:$.Deferred()};var lA=new lp(e.method,e.params,ss.mkdel({deferred:ex,$this:this},function(lC){this.$this.$0(this.deferred,lC)}),ss.mkdel({deferred:ex},function(lC){var lD={};lD['errors']=[ss.mkdict(['code',lC])];this.deferred.$.reject(lD)}));var lB=this.$3(lA);lv.helper(lB);return ex.$},$0:function(e,ex){if(ss.keyExists(ex,'errors')){e.$.reject(ex)}else{e.$.resolve(ex)}},sendVizqlRequest:function(e){var ex={$:$.Deferred()};var lA=ss.mkdel({deferred:ex,$this:this},function(lD,lE,lF){var lG=lD;delete lG['msg'];delete lG['status'];this.$this.$0(this.deferred,lG)});var lB=ss.mkdel({deferred:ex,$this:this},function(lD,lE,lF){this.deferred.$.reject()});var lC=new kP(e.method,e.params,lA,lB);this.$1(lC);return ex.$},$1:function(e){var ex={};ex.type='POST';ex.url=this.$2.$5(e.methodName);ex.headers=ss.mkdict(['Accept','text/javascript']);ex.dataType='json';if(ss.isValue(e.methodParams)){ex.data=e.methodParams}var lA=this.$2.$0(null,e.success,e.error,'immediately');this.$2.$c(ex,lA)}},null,[Object]);ss.initClass(cn,a,{add_compoundTableCalcUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_compoundTableCalcUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_notificationId:function(){return'doc:table-calc-dialog-event'},get_tableCalcsPresModel:function(){return this.pm},get_hasTableCalc:function(){return this.get_primaryTableCalc().get_hasTableCalc()},get_fieldCaption:function(){return this.get_tableCalcsPresModel().fieldCaption},get_primaryTableCalc:function(){return this.$1},get_allowSecondaryTableCalc:function(){return ss.isValue(this.get_tableCalcsPresModel())&&this.get_tableCalcsPresModel().isSecondaryAllowed},get_hasSecondaryTableCalc:function(){return this.get_allowSecondaryTableCalc()&&this.get_secondaryTableCalc().get_hasTableCalc()},get_secondaryTableCalc:function(){return this.$2},get_isCalcAssistanceEnabled:function(){return(ss.isNullOrUndefined(this.get_tableCalcsPresModel())?true:this.get_tableCalcsPresModel().isCalcAssistanceEnabled)},get_calcAssistanceWidgetState:function(){return(ss.isNullOrUndefined(this.get_tableCalcsPresModel())?'widget-state-enabled':this.get_tableCalcsPresModel().tableCalcAssistanceWidgetState)},onNotify:function(e,ex){if(this.isNewPresModelSameAsOld(e)){return}var lA=e;this.$1.update(cn.$0(lA,0),ex);this.$2.update(cn.$0(lA,1),ex);this.swapAndCopyPresModel(lA);this.raiseEvent(this.$2$1,ex)}},gV,[fV]);ss.initClass(co,a,{});ss.initClass(eK,a,{get_fontGroup:function(){return this.$1$1},set_fontGroup:function(e){this.$1$1=e},get_fonts:function(){return this.$1$2},set_fonts:function(e){this.$1$2=e}});eK.$ctor1.prototype=eK.prototype;ss.initClass(cp,a,{addFont:function(e){if(!_.any(this.get_fonts(),function(ex){return ss.compareStrings(ex,e,true)===0})){this.get_fonts().push(e);this.set_fonts(_.sortBy(this.get_fonts(),function(ex){return ex.toLowerCase()}))}}},eK);ss.initClass(cq,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'copy-temp-file-to-session-specific-storage'},this.c))}},ss.makeGenericType(bd,[Object,cr]));ss.initClass(cr,a,{});ss.initClass(cs,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'create-and-establish-cloud-connection'},this.c))}},ss.makeGenericType(bd,[Object,ct]));ss.initClass(ct,a,{});ss.initClass(cu,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'create-and-establish-connection'},this.c))}},ss.makeGenericType(bd,[Object,cv]));ss.initClass(cv,a,{});ss.initClass(cw,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'create-annotation'},this.c))}},ss.makeGenericType(bd,[Object,cx]));ss.initClass(cx,a,{});ss.initClass(cy,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'create-annotation-rich-text-editor'},this.c))}},ss.makeGenericType(bd,[Object,cz]));ss.initClass(cz,a,{});ss.initClass(cA,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'create-data-source-from-file-upload'},this.c))}},ss.makeGenericType(bd,[Object,cB]));ss.initClass(cB,a,{});ss.initClass(cC,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'create-worksheet-title-rich-text-editor'},this.c))}},ss.makeGenericType(bd,[Object,cD]));ss.initClass(cD,a,{});ss.initClass(cE,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'create-zone-rich-text-editor'},this.c))}},ss.makeGenericType(bd,[Object,cF]));ss.initClass(cF,a,{});ss.initClass(es,a,{get_instanceType:null,get_fieldsModel:function(){return this.parent},get_dataSourceName:function(){if(ss.isNullOrUndefined(this.get_dataSource())){return''}return this.get_dataSource().get_name()},get_canHaveChildren:function(){return false},get_isParameter:function(){return ss.isValue(this.get_dataSource())&&this.get_dataSource().get_isParametersDataSource()},get_isUnsortedContainer:function(){return false},get_isSelectable:function(){return!this.get_isUnsortedContainer()},get_isDraggable:function(){return this.get_isSelectable()&&!this.get_isHidden()&&!this.get_isInvalid()},get_childToSelect:function(){return(this.get_isUnsortedContainer()?null:this)},get_isDerived:function(){if(this.get_canHaveChildren()){return false}return this.get_isGenerated()||this.get_isAutoColumn()||this.get_isColumn()&&this.asColumn().get_isInstance()},get_isMeasureNamesOrValues:function(){return ss.referenceEquals(this.get_localName(),es.nameOfMeasuresColumn)||ss.referenceEquals(this.get_localName(),es.nameOfMeasureValuesColumn)},get_fieldCaptionForReset:function(){return this.pm.fieldCaptionForReset},get_fieldIconResource:function(){var e=this.pm.fieldIconRes||'';if(e.length===0){return e}if(this.pm.isInvalid){e+='-invalid'}return e},get_isInstance:function(){return!this.get_isGenerated()&&this.get_isDerived()},get_isHidden:function(){return this.pm.isHidden||this.get_isInstance()},get_isAutoHidden:function(){return this.pm.isAutoHidden},get_isInvalid:function(){return this.pm.isInvalid},get_isOrphaned:function(){return this.pm.isOrphaned},get_isGenerated:function(){return this.pm.isGenerated},get_isAutoColumn:function(){return this.pm.isAutoColumn},get_isAllowedInCalcs:function(){return this.pm.isAllowedInCalcs},get_isUnnamedCalc:function(){return this.pm.isUnnamed},get_isQuickTableCalc:function(){return this.pm.isQuickTableCalc},get_globalName:function(){return this.pm.fn},get_localName:function(){return this.pm.name},get_qualifiedLocalName:function(){return'['+this.get_localName()+']'},get_description:function(){return this.pm.description},get_userCaption:function(){return this.pm.userCaption},get_ordinal:function(){return this.pm.datasourceOrdinal},get_isColumn:function(){return this.get_instanceType()==='column'||this.get_instanceType()==='group'||this.get_instanceType()==='structuredMeasure'||this.get_instanceType()==='level'},get_isGroup:function(){return this.get_instanceType()==='group'},get_isCubeDimension:function(){return this.get_instanceType()==='cubeDimension'},get_isDrillPath:function(){return this.get_instanceType()==='drillPath'},get_isCubeHierarchy:function(){return this.get_instanceType()==='cubeHierarchy'},get_isCubeFolder:function(){return this.get_instanceType()==='cubeFolder'},get_isFolder:function(){return this.get_instanceType()==='folder'},get_isFolderNew:function(){return this.get_instanceType()==='folderNew'},get_isRelationalTable:function(){return this.get_instanceType()==='relationalTable'},get_isStructuredMeasure:function(){return this.get_instanceType()==='structuredMeasure'},get_isCubeBaseDimension:function(){return this.get_instanceType()==='cubeStandardDimension'||this.get_instanceType()==='cubeAttributeDimension'},get_isCubeStandardDimension:function(){return this.get_instanceType()==='cubeStandardDimension'},get_isCubeAttributeDimension:function(){return this.get_instanceType()==='cubeAttributeDimension'},get_isLevel:function(){return this.get_instanceType()==='level'},get_defaultRole:function(){return this.pm.defaultFieldRole},get_role:function(){return this.pm.fieldRole},get_defaultFieldType:function(){return(this.get_isColumn()?this.pm.defaultFieldType:'unknown')},get_fieldType:function(){return(this.get_isColumn()?this.pm.fieldType:'unknown')},get_displayName:function(){return this.pm.fieldCaption},get_tooltip:function(){if(this.get_isInvalid()){return this.pm.tooltipText}else{return this.get_userCaption()||(this.get_description()||this.get_displayName())}},get_canBeUsedInCalculation:function(){return this.get_isAllowedInCalcs()||this.get_isUnnamedCalc()||this.get_isQuickTableCalc()},get_canBeAddedToDataSchema:function(){return this.get_isUnnamedCalc()||this.get_isQuickTableCalc()},get_dataSource:function(){return(ss.isNullOrUndefined(this.get_fieldsModel())?null:this.get_fieldsModel().get_dataSource())},matchesFolderRole:function(e){if(this.get_isFolder()){return this.asFolder().get_folderRole()===e}else if(this.get_isFolderNew()){return this.asFolderNew().get_folderRole()===e}else{switch(e){case'dimensions':{return this.get_defaultRole()==='dimension'}case'measure':{return this.get_defaultRole()==='measure'}case'groups':{return this.get_isGroup()}case'parameters':{return true}default:{return false}}}},asColumn:function(){return ss.safeCast(this,eq)},asGroup:function(){return ss.safeCast(this,fC)},asDimension:function(){return ss.safeCast(this,cI)},asHierarchy:function(){return ss.safeCast(this,cK)},asCubeFolder:function(){return ss.safeCast(this,cJ)},asFolder:function(){return ss.safeCast(this,eI)},asFolderNew:function(){return ss.safeCast(this,eJ)},asDrillPath:function(){return ss.safeCast(this,dP)},asRelationalTable:function(){return ss.safeCast(this,ia)},asStructuredMeasure:function(){return ss.safeCast(this,jW)},asCubeStandardDimension:function(){return ss.safeCast(this,cL)},asCubeAttributeDimension:function(){return ss.safeCast(this,cG)},asCubeBaseDimension:function(){return ss.safeCast(this,cH)},asLevel:function(){return ss.safeCast(this,gJ)}},gV);ss.initClass(cH,a,{get_instanceType:null,get_cubeHierarchies:function(){return this.$3$1},set_cubeHierarchies:function(e){this.$3$1=e},get_cubeFolders:function(){return this.$3$2},set_cubeFolders:function(e){this.$3$2=e},get_defaultCubeHierarchy:function(){return this.$3$3},set_defaultCubeHierarchy:function(e){this.$3$3=e},get_dimensionType:function(){return this.pm.dimensionType},get_defaultHierarchyName:function(){return this.pm.defaultHierarchyName},get_hasOnlyOneHierarchy:function(){return this.pm.hasOnlyOneHierarchy},get_dimensionIsEffectivelyEmpty:function(){return this.pm.dimensionIsEffectivelyEmpty},get_timeIntelligenceColumn:function(){return this.$3$4},set_timeIntelligenceColumn:function(e){this.$3$4=e},get_timeIntelligenceCaption:function(){return this.pm.timeIntelligenceCaption},get_isTimeIntelligence:function(){return this.pm.isTimeIntelligence},get_canHaveChildren:function(){return true},get_childToSelect:function(){var e=this.pm.defaultHierarchyName;if(!ss.isNullOrEmptyString(e)&&ss.isValue(this.get_defaultCubeHierarchy())){return this.get_defaultCubeHierarchy().get_levels()[0]}var ex=[];var lA=this.get_cubeHierarchies();for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];ex.push(lC)}var lD=this.get_cubeFolders();for(var lE=0;lE<lD.length;lE++){var lF=lD[lE];var lG=lF.get_hierarchies();for(var lH=0;lH<lG.length;lH++){var lI=lG[lH];ex.push(lI)}}ex.sort(function(lJ,lK){if(lJ.get_levels().length>1&&lK.get_levels().length<=1){return-1}else if(lJ.get_levels().length<=1&&lK.get_levels().length>1){return 1}else{return 0}});return((ex.length>0)?ex[0].get_levels()[0]:null)},update:function(e,ex,lA,lB,lC){this.swapAndCopyPresModel(e);this.set_cubeHierarchies(ex);this.set_cubeFolders(lA);this.set_defaultCubeHierarchy(lB);this.set_timeIntelligenceColumn(lC)}},es);ss.initClass(cG,a,{get_instanceType:function(){return'cubeAttributeDimension'},get_isLinked:function(){return this.pm.isLinked},update$1:function(e,ex,lA,lB,lC){this.swapAndCopyPresModel(e);this.update(e,ex,lA,lB,lC)}},cH);ss.initClass(cI,a,{get_hierarchies:function(){return this.$1},get_childToSelect:function(){var e=this.pm.defaultHierarchyName;if(!ss.isNullOrEmptyString(e)){for(var ex=0;ex<this.$1.length;ex++){var lA=this.$1[ex];if(ss.referenceEquals(lA.get_localName(),e)){return lA.get_levels()[0]}}}var lB=[];for(var lC=0;lC<this.$1.length;lC++){var lD=this.$1[lC];lB.push(lD)}var lE=this.get_folders();for(var lF=0;lF<lE.length;lF++){var lG=lE[lF];var lH=lG.get_hierarchies();for(var lI=0;lI<lH.length;lI++){var lJ=lH[lI];lB.push(lJ)}}lB.sort(function(lK,lL){if(lK.get_levels().length>1&&lL.get_levels().length<=1){return-1}else if(lK.get_levels().length<=1&&lL.get_levels().length>1){return 1}else{return 0}});return((lB.length>0)?lB[0].get_levels()[0]:null)},get_folders:function(){return this.$3$1},set_folders:function(e){this.$3$1=e},get_attributes:function(){return this.$3$2},set_attributes:function(e){this.$3$2=e},get_instanceType:function(){return'cubeDimension'},get_canHaveChildren:function(){return true},update:function(e,ex,lA,lB){this.swapAndCopyPresModel(e);this.$1=ex;this.set_folders(lA);this.set_attributes(lB)}},es);ss.initClass(cJ,a,{get_hierarchies:function(){return this.$2},get_childToSelect:function(){return this.$2[0]},get_columns:function(){return this.$1},get_instanceType:function(){return'cubeFolder'},get_canHaveChildren:function(){return true},get_isUnsortedContainer:function(){return true},update:function(e,ex,lA){this.swapAndCopyPresModel(e);this.$2=ex;this.$1=lA}},es);ss.initClass(cK,a,{get_levels:function(){return this.$1},get_userDefinedAttributes:function(){return this.$2},get_childToSelect:function(){return this.$1[0]},get_instanceType:function(){return'cubeHierarchy'},get_canHaveChildren:function(){return true},get_isAttributeHierarchy:function(){return this.pm.isAttributeHierarchy},update:function(e,ex,lA){this.swapAndCopyPresModel(e);this.$1=ex;this.$2=lA}},es);ss.initClass(cL,a,{get_instanceType:function(){return'cubeStandardDimension'},get_cubeAttributeDimensions:function(){return this.$4$1},set_cubeAttributeDimensions:function(e){this.$4$1=e},update$1:function(e,ex,lA,lB,lC,lD){this.swapAndCopyPresModel(e);this.set_cubeAttributeDimensions(lB);this.update(e,ex,lA,lC,lD)}},cH);ss.initClass(kq,a,{get_tableCalcIdentifier:function(){var e=this.parent;return(ss.isNullOrUndefined(e)?new jZ(null):e.get_tableCalcIdentifier())},update:null},gV);ss.initClass(cM,a,{add_modelUpdated:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_modelUpdated:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},$1:function(){return this.pm},get_aggregationIndex:function(){return this.$1().aggregationIndex},get_aggregationValues:function(){return this.$1().aggregationValues},get_aggregationCaptions:function(){return this.$1().aggregationCaptions},get_hasAggregation:function(){return ss.isValue(this.get_aggregationValues())&&this.get_aggregationValues().length>0},update:function(e,ex){this.simpleSwapToUpdate(e,this.$3$1,ex)}},kq);ss.initClass(cN,a,{getCustomizedViews:function(e,ex){var lA=ss.mkdel(this,function(lB,lC,lD){if(ss.staticEquals(e,null)){return}var lE;var lF=null;if('customizedViews'in lB){lE=lB['customizedViews']}else{lE=[]}if('defaultCustomizedViewId'in lB){lF=lB['defaultCustomizedViewId']}e(lE,lF)});cN.$7(lA,cN.$4(ex),'get_customized_views',ss.mkdict(['sheet_id',tsConfig.current_sheet_name]),this.$0,'GET','none')},getCustomizedView:function(e,ex,lA){var lB=ss.mkdel(this,function(lC,lD,lE){if(ss.staticEquals(ex,null)){return}var lF=lC;ex(lF.cv)});cN.$7(lB,cN.$4(lA),'get_customized_view',ss.mkdict(['cvId',e]),this.$0,'GET','none')},setDefaultCustomizedView:function(e,ex,lA){var lB=ss.mkdel(this,function(lD,lE,lF){if(ss.staticEquals(ex,null)){return}var lG=null;if('defaultCv'in lD){lG=lD['defaultCv']}ex(lG)});var lC=ss.mkdict(['sheet_id',tsConfig.current_sheet_name]);if(ss.isValue(e)){lC['cvId']=e.id}cN.$7(lB,cN.$4(lA),'set_default_customized_view',lC,this.$0,null,null)},destroyCustomizedView:function(e,ex,lA){tab.Param.verifyValue(e,'cv');var lB=ss.mkdel(this,function(lC,lD,lE){if(ss.staticEquals(ex,null)){return}ex()});cN.$6(lB,cN.$4(lA),'destroy_customized_view',ss.mkdict(['cvId',e.id]),this.$0)},saveCustomizedView:function(e,ex,lA){tab.Param.verifyValue(e,'cv');var lB=ss.mkdel(this,function(lD,lE,lF){if(ss.staticEquals(ex,null)){return}var lG=null;if('cv'in lD){lG=lD['cv'];cN.updateTsConfig(lG,true)}ex(lG)});var lC=ss.mkdict(['sheet_id',tsConfig.current_sheet_name,'name',e.name,'shared',e.isPublic,'hidden',e.isHidden]);if(ss.isValue(e.id)){lC['cvId']=e.id}cN.$7(lB,cN.$4(lA),'save_customized_view',lC,this.$0,null,null)},updateCustomizedView:function(e,ex,lA){tab.Param.verifyValue(e,'cv');var lB=ss.mkdel(this,function(lD,lE,lF){if(ss.staticEquals(ex,null)){return}var lG=lD;var lH=null;if(ss.isValue(lG.cv)){lH=lG.cv;cN.updateTsConfig(lH,false)}ex(lH)});var lC=ss.mkdict(['sheet_id',tsConfig.current_sheet_name,'name',e.name,'shared',e.isPublic,'cvId',e.id]);cN.$7(lB,cN.$4(lA),'update_customized_view',lC,this.$0,null,null)}});ss.initClass(cO,a,{add_modelUpdated:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_modelUpdated:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},$1:function(){return this.pm},get_referenceModel:function(){return this.$3$2},set_referenceModel:function(e){this.$3$2=e},get_nullIfIncomplete:function(){return this.$1().nullIfIncomplete},get_nullIfIncompleteState:function(){return this.$1().customNullIfIncompleteState},get_allPages:function(){return this.$1().includeAllPages},get_allPagesState:function(){return this.$1().allPagesState},get_nestedCalcsWidgetState:function(){return this.$1().nestedCalcsState},get_nestedCalcsIndex:function(){return this.$1().nestedCalcsIndex},get_nestedTableCalcInfoArray:function(){return this.$1().nestedTableCalcInfos},update:function(e,ex){var lA=e;if(this.isNewPresModelSameAsOld(lA)){return}this.swapAndCopyPresModel(lA);this.get_referenceModel().update(lA.tableCalcReferenceOptionsPresModel,ex);this.raiseEvent(this.$3$1,ex)}},kq);ss.initClass(hB,a,{invokeCommand:function(e,ex,lA){var lB={ns:e,cmd:ex};if(kY.get_instance().hasCommand(lB)){var lC=kY.get_instance().createCommandWithParams(lB,lA);return lC.invoke()}else{var lD=$.Deferred();var lE=function(lK){lD.resolve(lK)};var lF=function(lK){lD.reject()};var lG={commandName:ex,commandNamespace:e,commandParams:lA,preserveRootResult:true};var lH=null;var lI=this.getUIBlockingType(e,ex);if(kY.get_instance().hasCommandLocalOptions(lB)){var lJ=kY.get_instance().getCommandLocalOptions(lB);if(!ss.staticEquals(lJ.localWorkFactory,null)){lH=lJ.localWorkFactory(lA)}if(ss.isValue(lJ.blocking)){lI=ss.unbox(lJ.blocking)}}bT.SendCommand(new bM(lI,lH,lG,lE,lF));return lD.promise()}},dispose:function(){this.$0.dispose()},registerNotificationHandler:function(e,ex){var lA=Y.get_instance();var lB=lA.registerNotificationHandler(e,function(lD,lE){ex(lD)});var lC=function(){lA.unRegisterNotificationHandler(e,lB)};this.$0.add(lC);return lC},getUIBlockingType:function(e,ex){return'immediately'}},null,[ss.IDisposable]);ss.initClass(cP,a,{getUIBlockingType:function(e,ex){var lA=e+':'+ex;return(ss.contains(this.$1,lA)?'none':'immediately')}},hB,[ss.IDisposable]);ss.initClass(cQ,a,{});ss.initInterface(fR,a,{add_stopNotifying:null,remove_stopNotifying:null},[fV]);ss.initClass(cR,a,{add_stopNotifying:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_stopNotifying:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_updateGridDialogInfo:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_updateGridDialogInfo:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_notificationId:function(){return'doc:dashboard-grid-dialog-event'},get_dashboardGridDialogPresModel:function(){return this.pm},get_gridSize:function(){return this.get_dashboardGridDialogPresModel().dashboardGridSize},onNotify:function(e,ex){this.simpleSwapToUpdate(e,this.$2$2,ex)},detachNotifications:function(){this.pm=null;if(!ss.staticEquals(this.$2$1,null)){this.$2$1()}},update:function(e,ex){this.swapAndCopyPresModel(e);this.raiseEvent(this.$2$2,ex)}},gV,[fV,fR]);ss.initClass(cS,a,{add_newDashboard:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_newDashboard:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_activeZoneChanged:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_activeZoneChanged:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_gridOverlayModeChanged:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_gridOverlayModeChanged:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},add_gridSizeChanged:function(e){this.$2$5=ss.delegateCombine(this.$2$5,e)},remove_gridSizeChanged:function(e){this.$2$5=ss.delegateRemove(this.$2$5,e)},add_readyZoneChanged:function(e){this.$2$6=ss.delegateCombine(this.$2$6,e)},remove_readyZoneChanged:function(e){this.$2$6=ss.delegateRemove(this.$2$6,e)},add_renderModeChanged:function(e){this.$2$7=ss.delegateCombine(this.$2$7,e)},remove_renderModeChanged:function(e){this.$2$7=ss.delegateRemove(this.$2$7,e)},add_portSizeChanged:function(e){this.$2$8=ss.delegateCombine(this.$2$8,e)},remove_portSizeChanged:function(e){this.$2$8=ss.delegateRemove(this.$2$8,e)},add_sizeChanged:function(e){this.$2$9=ss.delegateCombine(this.$2$9,e)},remove_sizeChanged:function(e){this.$2$9=ss.delegateRemove(this.$2$9,e)},add_formatsChanged:function(e){this.$2$10=ss.delegateCombine(this.$2$10,e)},remove_formatsChanged:function(e){this.$2$10=ss.delegateRemove(this.$2$10,e)},add_titleVisibilityChanged:function(e){this.$2$11=ss.delegateCombine(this.$2$11,e)},remove_titleVisibilityChanged:function(e){this.$2$11=ss.delegateRemove(this.$2$11,e)},add_currentDeviceLayoutChanged:function(e){this.$2$12=ss.delegateCombine(this.$2$12,e)},remove_currentDeviceLayoutChanged:function(e){this.$2$12=ss.delegateRemove(this.$2$12,e)},add_currentDeviceLayoutListChanged:function(e){this.$2$13=ss.delegateCombine(this.$2$13,e)},remove_currentDeviceLayoutListChanged:function(e){this.$2$13=ss.delegateRemove(this.$2$13,e)},add_dashboardNameChanged:function(e){this.$2$14=ss.delegateCombine(this.$2$14,e)},remove_dashboardNameChanged:function(e){this.$2$14=ss.delegateRemove(this.$2$14,e)},get_zoneModels:function(){return this.zonesModel.get_zoneModels()},get_contentDashboard:function(){if(ss.isValue(this.pm)&&this.pm.isStory){this.$e=this.$e||this.$2();return this.$e}return this},get_actionPresModels:function(){if(ss.isValue(this.pm)){return this.pm.userActions}return null},get_storyboardName:function(){if(ss.isNullOrUndefined(this.pm)){return new Object}return this.pm.sheetPath.storyboard},get_backgroundColor:function(){if(ss.isValue(this.pm)&&ss.isValue(this.pm.cssAttrs)){return this.pm.cssAttrs['backgroundColor']}return null},get_zonePlaceholderColor:function(){var e=this.$g;if(ss.isNullOrUndefined(e)){e=this.$1()}this.$g=e;return this.$g},get_gridMode:function(){if(ss.isValue(this.pm)){return this.pm.gridOverlayMode}return'gom-off'},get_gridSize:function(){if(ss.isValue(this.pm)){return this.pm.size}return 20},get_sheetName:function(){if(ss.isValue(this.pm)&&ss.isValue(this.pm.sheetLayoutInfo)){return this.pm.sheetLayoutInfo.sheetName}return null},get_sheetPath:function(){if(ss.isValue(this.pm)){return this.pm.sheetPath}return null},get_worksheetsOnDashboard:function(){var e={};var ex=this.get_zoneModels();for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];if(lB.get_zoneType()==='viz'){e[lB.get_worksheetName()]=true}}return ss.arrayFromEnumerable(Object.keys(e))},get_invalidSheets:function(){if(ss.isValue(this.pm)){return this.pm.invalidSheets}return[]},get_activeZoneID:function(){var e=tsConfig.is_authoring&&this.get_currentDeviceLayout()!=='default';if(ss.isValue(this.pm)&&!e){return this.pm.activeZoneId}return 0},get_readyZoneID:function(){return this.$d},set_readyZoneID:function(e){if(e===this.$d){return}this.$d=e;if(!ss.staticEquals(this.$2$6,null)){this.$2$6()}},get_hasActiveZone:function(){if(this.get_activeZoneID()!==0){return true}return false},get_activeVisual:function(){if(ss.isNullOrUndefined(this.pm)){return null}if(this.get_activeZoneID()>0){var e=this.get_zoneModels();for(var ex=0;ex<e.length;ex++){var lA=e[ex];if(lA.get_zoneId()===this.get_activeZoneID()){return lA.get_visualModel()}}}return null},get_renderMode:function(){return Y.get_instance().get_renderMode()},get_formats:function(){if(ss.isValue(this.pm)){return this.pm.cssAttrs}return null},get_portSize:function(){return this.$c},set_portSize:function(e){if(_.isEqual(this.$c,e)){return}this.$c=e;if(!ss.staticEquals(this.$2$8,null)){this.$2$8()}},get_dashboardSize:function(){return(ss.isValue(this.pm)?this.pm.viewportSize:null)},get_dashboardSizeControlModel:function(){return this.$a},get_isDashboard:function(){if(ss.isValue(this.pm)&&ss.isValue(this.pm.sheetPath)){return this.pm.sheetPath.isDashboard}return false},get_flipboard:function(){var e=_.find(this.get_zoneModels(),function(ex){return ex.get_zoneType()==='flipboard'});return(ss.isNullOrUndefined(e)?null:e.get_model())},get_deviceLayouts:function(){return this.pm.dashboardDeviceLayouts},get_currentDeviceLayout:function(){if(ss.isNullOrUndefined(this.pm)||typeof(this.pm.dashboardDeviceLayout)==='undefined'){return'default'}return this.pm.dashboardDeviceLayout},get_isTitleVisible:function(){if(ss.isNullOrUndefined(this.pm)){return false}return this.pm.hasTitle},get_flipboardNavModel:function(){var e=this.get_zoneModels();for(var ex=0;ex<e.length;ex++){var lA=e[ex];if(lA.get_zoneType()==='flipboard-nav'){return lA.get_model()}}return null},get_hasDescription:function(){if(ss.isNullOrUndefined(this.get_flipboard())){return false}var e=_.filter(this.get_zoneModels(),function(ex){return ss.equalsT(ex.get_contentType(),'dashboardText'.toString())});return ss.isValue(e)&&e.length>0},getViewId:function(e){if(!ss.keyExists(this.pm.viewIds,e)){return null}return this.pm.viewIds[e]},getViewSession:function(e){return this.$f[e]},getZone:function(e){return this.zonesModel.getZone(e)},hasZone:function(e){return this.zonesModel.hasZone(e)},isValidSheet:function(e){return ss.isValue(this.pm.invalidSheets)&&(e.get_zoneCommonModel().get_zoneType()!=='viz'||!_.any(this.pm.invalidSheets,function(ex){return ss.referenceEquals(ex.worksheet,e.get_worksheetName())}))},isStory:function(){return this.pm.isStory},getMutableCopyOfPresModel:function(){var e=this.pm.zones;delete this.pm['zones'.toString()];var ex=gV.prototype.getMutableCopyOfPresModel.call(this);ex.dashboardDeviceLayouts=this.pm.dashboardDeviceLayouts;this.pm.zones=e;return ex},update:function(e,ex){if(ss.isValue(this.$b)&&this.$b!==this.get_renderMode()){this.raiseEvent(this.$2$7,ex)}this.$b=this.get_renderMode();this.$7(e);this.$e=null;if(ss.isValue(e.zones)){this.zonesModel.update(e.zones,ex);if(!this.zonesModel.hasZone(this.get_readyZoneID())){this.set_readyZoneID(0)}}if(ss.isValue(e.hasSelection)){}if(ss.isValue(e.autoUpdate)){this.autoUpdate=e.autoUpdate}this.$9(e,ex.dialogProvider);if(ss.isValue(e.activeZoneId)){if(ss.isNullOrUndefined(this.pm)||this.pm.activeZoneId!==e.activeZoneId){this.raiseEvent(this.$2$3,ex)}}if(!(typeof(e.modifiedSheets)==='undefined')&&(ss.isNullOrUndefined(this.pm)||!_.isEqual(e.modifiedSheets,this.pm.modifiedSheets))){this.raiseEvent(cS.$0,ex)}if(ss.isValue(e.sheetList)){if(ss.isNullOrUndefined(this.sheetListModel)){this.sheetListModel=new jv(this)}this.sheetListModel.update(e.sheetList,ex)}if(ss.isValue(e.dashboardZoneHierarchy)){if(ss.isNullOrUndefined(this.layoutTreeModel)){this.layoutTreeModel=new gA(this)}this.layoutTreeModel.update(e.dashboardZoneHierarchy,ex)}if(ss.isValue(this.pm)){if(ss.isValue(e.cssAttrs)&&!_.isEqual(e.cssAttrs,this.pm.cssAttrs)){this.raiseEvent(this.$2$10,ex)}}if(ss.isNullOrUndefined(this.get_sheetName())||ss.isValue(e.sheetLayoutInfo)&&!ss.referenceEquals(e.sheetLayoutInfo.sheetName,this.get_sheetName())){this.raiseEvent(this.$2$14,ex)}if(ss.isNullOrUndefined(this.pm)||this.pm.hasTitle!==e.hasTitle){this.raiseEvent(this.$2$11,ex)}if(ss.isNullOrUndefined(this.pm)||this.pm.gridOverlayMode!==e.gridOverlayMode){this.raiseEvent(this.$2$4,ex)}if(ss.isNullOrUndefined(this.pm)||this.pm.size!==e.size){this.raiseEvent(this.$2$5,ex)}if(!ss.isValue(this.emptyShowMeModel)){this.emptyShowMeModel=new ci(this)}if(ss.isValue(e.showMeCommands)){this.emptyShowMeModel.update(e.showMeCommands,ex)}this.$5(e,ex);this.$6(e,ex);this.swapAndCopyPresModel(e);this.raiseEvent(this.$2$2,ex);this.$8(ex)},$7:function(e){e.isStory=e.isStory||false;e.hasTitle=e.hasTitle||false;e.gridOverlayMode=e.gridOverlayMode||'gom-off';e.size=e.size||20},$9:function(e,ex){if(ss.isValue(e.viewIds)){var lA=_.keys(e.viewIds);for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];var lD=e.viewIds[lC];var lE=this.$f[lC];if(ss.isNullOrUndefined(lE)){lE=new kE(bT.get().legacySession.get_urlRoot(),lC,lD,ex);this.$f[lC]=lE}lE.set_viewId(lD)}var lF=_.keys(this.$f);var lG=_.difference(lF,_.keys(e.viewIds));for(var lH=0;lH<lG.length;lH++){var lI=lG[lH];delete this.$f[lI]}}},$5:function(e,ex){if(ss.isValue(e.dashboardSizeControl)){if(ss.isNullOrUndefined(this.$a)){this.$a=new dc(this)}this.$a.update(e.dashboardSizeControl,ex)}if(ss.isNullOrUndefined(this.$c)){this.set_portSize(e.viewportSize)}if(ss.isValue(this.pm)){if(ss.isValue(e.viewportSize)&&!_.isEqual(e.viewportSize,this.pm.viewportSize)){this.raiseEvent(this.$2$9,ex)}}},$6:function(e,ex){e.dashboardDeviceLayout=ss.coalesce(e.dashboardDeviceLayout,'default');if(ss.isNullOrUndefined(this.pm)||this.pm.dashboardDeviceLayout!==e.dashboardDeviceLayout){this.raiseEvent(this.$2$12,ex);this.raiseEvent(this.$2$3,ex)}if(ss.isNullOrUndefined(e.dashboardDeviceLayouts)||ss.isNullOrUndefined(this.pm)||!_.isEqual(this.pm.dashboardDeviceLayouts,e.dashboardDeviceLayouts)){this.raiseEvent(this.$2$13,ex)}},$8:function(e){if(!Y.get_instance().get_isLocalRenderMode()){return}var ex=gY.getVisualModelsFromDashboard(this);var lA=_.keys(ex);var lB=_.any(lA,ss.mkdel(this,function(lI){var lJ=ex[lI];return this.$4(lJ)||this.$3(lJ)}));if(lB){for(var lC=0;lC<lA.length;lC++){var lD=lA[lC];ex[lD].setIsBrushedFromAction(true,e)}}else{var lE=cS.$1(lA,ex);for(var lF=0;lF<lA.length;lF++){var lG=lA[lF];var lH=lE.has(lG);ex[lG].setIsBrushedFromAction(lH,e)}}},$4:function(e){var ex=gY.getModelsForViz(bG).call(null,this.get_contentDashboard(),e);return _.any(ex,function(lA){if(!lA.get_isHighlightEnabled()){return false}var lB=e.get_selectionsModel().getLegendSelection(lA.get_legendTypeEnum(),lA.get_legendNames());return!lB.isEmpty})},$3:function(e){var ex=gY.getModelsForViz(ds).call(null,this.get_contentDashboard(),e);return _.any(ex,function(lA){var lB=e.get_selectionsModel().getLegendSelection('highlight',[lA.get_fieldName()]);return!lB.isEmpty})},$2:function(){if(!this.pm.isStory){return null}var e=null;var ex=this.zonesModel.get_zoneModels();for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];if(ss.isInstanceOfType(lB.get_model(),eF)){e=lB.get_model().get_dashboardModel();break}}return e},$1:function(){var e=bQ.fromColorCode(this.get_backgroundColor());e=e||bQ.white;var ex=e.isLuminanceAboveThreshold(0.314999997615814);var lA=(ex?0.0199999995529652:0.0299999993294477);var lB=(ex?new bQ(0,0,0,lA):new bQ(255,255,255,lA));var lC=lB.toRgba();return lC}},gV);ss.initClass(cT,a,{get_addNewZoneAsFloating:function(){return this.$1},set_addNewZoneAsFloating:function(e){if(this.$1===e){return}this.$1=e}},gV);ss.initClass(cU,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'dashboard-set-grid-size'},this.c))}},ss.makeGenericType(bd,[Object,cV]));ss.initClass(cV,a,{});ss.initClass(cW,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'dashboard-show-grid'},this.c))}},ss.makeGenericType(bd,[Object,cX]));ss.initClass(cX,a,{});ss.initClass(cY,a,{},ss.makeGenericType(kV,[Object,cZ]));ss.initClass(cZ,a,{});ss.initClass(da,a,{do$1:function(){if(ss.keyExists(this.c,'dashboardShowGrid')){var e=/^\s*true\s*$/i.test(this.c['dashboardShowGrid'].toString());cQ.showGridOnDashboard(e)}}},cY);ss.initClass(db,a,{});ss.initClass(dc,a,{add_sizeInfoUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_sizeInfoUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_minDimension:function(){return this.pm.minSize},get_maxDimension:function(){return this.pm.maxSize},get_stepSize:function(){return this.pm.stepSize},get_sizeModeOptions:function(){return this.pm.sizeModeOptions||[]},update:function(e,ex){if(ss.isValue(e.dashboardSizePresModel)){if(ss.isNullOrUndefined(this.dashboardSizeModel)){this.dashboardSizeModel=new dd(this)}this.dashboardSizeModel.update(e.dashboardSizePresModel,ex)}if(ss.isValue(e.deviceLayoutInfoItem)){if(ss.isNullOrUndefined(this.layoutInfoModel)){this.layoutInfoModel=new dF(this)}this.layoutInfoModel.update(e.deviceLayoutInfoItem,ex)}this.simpleSwapToUpdate(e,this.$2$1,ex)}},gV);ss.initClass(dd,a,{add_sizeUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_sizeUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_currentSizeText:function(){return this.pm.summaryText},get_sizeMode:function(){if(this.pm.dashboardSizingMode!=='unspecified'){return this.pm.dashboardSizingMode}switch(this.pm.sizeMode){case'size-mode-auto':{return'automatic'}case'size-mode-fixed':{return'fixed'}default:{return'range'}}},get_currentWidth:function(){return this.pm.w},get_currentMinWidth:function(){return this.pm.minWidth},get_currentMaxWidth:function(){return this.pm.maxWidth},get_currentHeight:function(){return this.pm.h},get_currentMinHeight:function(){return this.pm.minHeight},get_currentMaxHeight:function(){return this.pm.maxHeight},update:function(e,ex){this.simpleSwapToUpdate(e,this.$2$1,ex)}},gV);ss.initClass(de,a,{add_notificationIntervalChanged:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_notificationIntervalChanged:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},add_titleChanged:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_titleChanged:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},add_measureChanged:function(e){this.$1$3=ss.delegateCombine(this.$1$3,e)},remove_measureChanged:function(e){this.$1$3=ss.delegateRemove(this.$1$3,e)},add_conditionChanged:function(e){this.$1$4=ss.delegateCombine(this.$1$4,e)},remove_conditionChanged:function(e){this.$1$4=ss.delegateRemove(this.$1$4,e)},add_recipientsChanged:function(e){this.$1$5=ss.delegateCombine(this.$1$5,e)},remove_recipientsChanged:function(e){this.$1$5=ss.delegateRemove(this.$1$5,e)},get_recipients:function(){return this.$1$6},set_recipients:function(e){this.$1$6=e},get_userIds:function(){return _.map(this.get_recipients(),function(e){return e.id.toString()})},get_notificationIntervalInMinutes:function(){return this.$3},set_notificationIntervalInMinutes:function(e){if(this.$3!==e){this.$3=e;if(!ss.staticEquals(this.$1$1,null)){this.$1$1()}}},get_title:function(){return this.$5},set_title:function(e){if(!ss.referenceEquals(this.$5,e)){this.$5=e;if(!ss.staticEquals(this.$1$2,null)){this.$1$2()}}},get_deviceType:function(){return this.$1$7},set_deviceType:function(e){this.$1$7=e},get_isViewSaveNeeded:function(){return this.$1$8},set_isViewSaveNeeded:function(e){this.$1$8=e},get_customizedViewId:function(){return this.$1$9},set_customizedViewId:function(e){this.$1$9=e},get_selectionCaption:function(){return this.$1$10},set_selectionCaption:function(e){this.$1$10=e},get_measurePresModel:function(){return this.$2},set_measurePresModel:function(e){if(!ss.referenceEquals(this.$2,e)){this.$2=e;if(!ss.staticEquals(this.$1$3,null)){this.$1$3()}}},get_conditionPresModel:function(){return this.$1},set_conditionPresModel:function(e){if(!ss.referenceEquals(this.$1,e)){this.$1=e;if(!ss.staticEquals(this.$1$4,null)){this.$1$4()}}},get_operator:function(){return this.$1.dataAlertConditionOp},get_threshold:function(){return this.$4},set_threshold:function(e){if(ss.referenceEquals(this.$4,e)){return}this.$4=e;if(ss.isNullOrUndefined(this.get_conditionPresModel().dataType)){return}this.set_thresholdIsValid(this.isValidThresholdText(e))},get_thresholdIsValid:function(){return this.$1$11},set_thresholdIsValid:function(e){this.$1$11=e},get_alertConditionMet:function(){return this.$1$12},set_alertConditionMet:function(e){this.$1$12=e},get_viewType:function(){return this.$1$13},set_viewType:function(e){this.$1$13=e},$0:function(e){return this.get_conditionPresModel().dataType==='real'&&tab.DoubleUtil.isValidDouble(e)||this.get_conditionPresModel().dataType==='integer'&&tab.DoubleUtil.isValid64BitInteger(e)},isValidThresholdText:function(e){if(ss.isNullOrEmptyString(e)){return false}else if(ss.isNullOrUndefined(Y.get_instance().get_appPresModel())||ss.isNullOrUndefined(Y.get_instance().get_appPresModel().numberFormats)){return this.$0(e)}else{var ex=Y.get_instance().get_appPresModel().numberFormats;return this.$0(tableau.format.reformatNumberToJsFormat(e,ex))}},updateRecipients:function(e){this.set_recipients(e);if(!ss.staticEquals(this.$1$5,null)){this.$1$5()}}});de.$ctor2.prototype=de.$ctor1.prototype=de.prototype;ss.initClass(df,a,{});ss.initClass(dg,a,{});ss.initClass(dh,a,{add_stopNotifying:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_stopNotifying:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_showOrUpdateDialog:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_showOrUpdateDialog:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_notificationId:function(){return'doc:data-alert-dialog-event'},get_operation:function(){return this.pm.dataAlertConditionOp},get_thresholdText:function(){return this.pm.dataAlertThresholdText},onNotify:function(e,ex){if(ss.isValue(e)){this.swapAndCopyPresModel(e);this.raiseEvent(this.$2$2,ex)}},detachNotifications:function(){this.pm=null;if(!ss.staticEquals(this.$2$1,null)){this.$2$1()}}},gV,[fV,fR]);ss.initClass(di,a,{});ss.initClass(dj,a,{});ss.initClass(dk,a,{$1:function(){return this.pm},get_connectionName:function(){return this.$1().connectionName||''},get_promptTitle:function(){return this.$1().dialogTitle||''},get_variableListInstruction:function(){return this.$1().valuesTableHeader||''},get_variableListNameLabel:function(){return this.$1().listViewNameLabel||''},get_variableListValueLabel:function(){return this.$1().listViewValueLabel||''},get_addVariableLabel:function(){return this.$1().addVariableLabel||''},get_addVariableTooltip:function(){return this.$1().addVariableTooltip||''},get_deleteVariableTooltip:function(){return this.$1().deleteVariableTooltip||''},get_requiredVariableMessage:function(){return this.$1().requiredVariableMessage||''},get_editSectionTitle:function(){return this.$1().editWidgetHeader||''},get_editSectionInstruction:function(){return this.$1().editWidgetInstruction||''},get_editSectionFromLabel:function(){return this.$1().fromLabel||''},get_editSectionToLabel:function(){return this.$1().toLabel||''},get_connectionVariables:function(){return this.$2},update:function(e){this.swapAndCopyPresModel(e);if(ss.isValue(this.$1().promptVariables)){this.$2=[];for(var ex=0;ex<this.$1().promptVariables.length;ex++){var lA=new dn(new dm(this),ex);lA.update(this.$1().promptVariables[ex]);this.$2.push(lA)}}}},gV);ss.initClass(dl,a,{});ss.initClass(dm,a,{},gV);ss.initClass(dn,a,{$1:function(){return this.pm},get_displayName:function(){return this.$1().variableDisplayName},get_description:function(){return this.$1().variableDescription},get_guid:function(){return this.$1().variableGuid},get_isRequired:function(){return this.$1().isRequired},get_defaultValue:function(){return this.$2},get_supportMultiValue:function(){return this.$1().supportsMultipleValues},get_values:function(){return this.$3},get_selectableOperations:function(){return this.$1().serverVariableMetadata.variableValueOperations},get_selectableValues:function(){return this.$1().serverVariableMetadata.selectionValueList},update:function(e){this.swapAndCopyPresModel(e);this.$2=new dq(null,-1);this.$2.update(this.$1().serverVariableMetadata.variableValue);if(ss.isValue(this.$1().variableValues)){this.$3=[];for(var ex=0;ex<this.$1().variableValues.length;ex++){var lA=new dq(new dp(this),ex);lA.update(this.$1().variableValues[ex]);this.$3.push(lA)}}}},gV);ss.initClass(dp,a,{},gV);ss.initClass(dq,a,{$1:function(){return this.pm},get_displayValue:function(){return this.$1().displayValue},get_valueIndex:function(){return this.$1().valueIndex},get_operation:function(){return this.$1().serverVariableValue.variableValueOperation},set_operation:function(e){this.$1().serverVariableValue.variableValueOperation=e},get_firstValue:function(){return this.$1().serverVariableValue.firstValue},get_firstValueIndex:function(){return this.$1().serverVariableValue.firstValueIndex},get_secondValue:function(){return(this.$1().serverVariableValue.isTwoValued?this.$1().serverVariableValue.secondValue:null)},get_secondValueIndex:function(){return(this.$1().serverVariableValue.isTwoValued?this.$1().serverVariableValue.secondValueIndex:-1)},update:function(e){this.swapAndCopyPresModel(e)}},gV);ss.initClass(dr,a,{get_isEmpty:function(){return tab.MiscUtil.isNullOrEmpty$2(this.$1())||tab.MiscUtil.isNullOrEmpty$2(this.$1().dataSegments)},$1:function(){return this.pm},update:function(e){if(ss.isValue(this.$1())&&ss.isValue(e)){var ex=e.dataSegments;if(ss.isValue(ex)){var lA=this.$1().dataSegments;if(ss.isValue(lA)){var lB=new ss.ObjectEnumerator(lA);try{while(lB.moveNext()){var lC=lB.current();if(!ss.keyExists(ex,lC.key)){ex[lC.key]=lC.value}}}finally{lB.dispose()}}var lD=new ss.ObjectEnumerator(ex);try{while(lD.moveNext()){var lE=lD.current();if(lE.value===null){delete ex[lE.key]}}}finally{lD.dispose()}this.$2=null}}this.pm=e},getRawValue:function(e,ex){if(ss.isNullOrUndefined(this.$1())||ss.isNullOrUndefined(this.$1().dataSegments)){return null}if(ss.isNullOrUndefined(this.$2)){var lA=0;var lB=ss.getEnumerator(Object.keys(this.$1().dataSegments));try{while(lB.moveNext()){var lC=lB.current();var lD=parseInt(lC);lA=Math.max(lD,lA)}}finally{lB.dispose()}this.$2=lA+1}for(var lE=0;ss.Nullable$1.lt(lE,this.$2);lE++){var lF=this.$1().dataSegments[lE.toString()];if(ss.isNullOrUndefined(lF)||ss.isNullOrUndefined(lF.dataColumns)){continue}for(var lG=0;lG<lF.dataColumns.length;lG++){var lH=lF.dataColumns[lG];if(ss.isNullOrUndefined(lH)||lH.dataType!==e){continue}if(ex<lH.dataValues.length){return lH.dataValues[ex]}ex-=lH.dataValues.length;break}}return null}},gV);ss.initClass(ds,a,{add_newDataHighlighterPresModel:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newDataHighlighterPresModel:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_fieldName:function(){return this.$2().fn},get_searchPlaceholderString:function(){return this.$2().searchPlaceholder},$2:function(){return this.pm},get_fullDomainItemSet:function(){return this.$2().dataHighlighterItemSet},get_searchText:function(){return this.$2().queryText},get_maxNumberListItems:function(){return this.$2().maxNumberWebListItems},get_isActive:function(){return this.$2().isActive},get_bodyTextStyle:function(){return this.$2().textStyle},get_numHighlighted:function(){return this.$2().numHighlighted},get_zoneHasBorder:function(){if(ss.isNullOrUndefined(this.parent)){return false}return this.parent.get_zone().get_zoneCommonModel().get_hasBorder()},get_zoneWidth:function(){if(ss.isNullOrUndefined(this.parent)){return 0}return this.parent.get_zone().get_zoneCommonModel().get_width()},update:function(e,ex){if(ss.isValue(e)){eM.notifyFontsFromTextStylePresModel(e.textStyle)}this.$3=null;this.simpleSwapToUpdate(e,this.$2$1,ex)},getItemNamesFromObjectId:function(e){if(ss.isNullOrUndefined(this.$3)){this.$1()}return[this.$3[e]]},$1:function(){this.$3={};var e=this.get_fullDomainItemSet().dataHighlighterItems;for(var ex=0;ex<e.length;ex++){var lA=e[ex];this.$3[lA.objectId]=lA.text}}},gV,[fM]);ss.initClass(dt,a,{add_newActiveDataSource:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newActiveDataSource:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_newDataSchema:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_newDataSchema:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_newDataSourceAdded:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_newDataSourceAdded:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},get_parametersDataSource:function(){return(ss.isNullOrUndefined(this.get_dataSources())?null:this.get_dataSources().getDataSource(this.$4))},get_activeDataSource:function(){return(ss.isNullOrUndefined(this.get_dataSources())?null:this.get_dataSources().getDataSource(this.get_activeDataSourceName()))},get_dataSchemaPresModel:function(){return this.pm},get_activeDataSourceName:function(){if(ss.isValue(this.get_dataSchemaPresModel())&&ss.isValue(this.get_dataSchemaPresModel().datasource)){return this.get_dataSchemaPresModel().datasource}return''},get_dataSources:function(){return this.$1},get_currentBlendingFields:function(){return this.$3},get_blendingFieldCandidates:function(){return this.$2},notifyNewDataSourceAdded:function(e,ex){this.raiseEvent$1(String).call(this,this.$2$3,ex,e)},getDefaultDataSourceForSheet:function(e){if(ss.isNullOrUndefined(this.get_dataSchemaPresModel())){return null}var ex=null;if(ss.isValue(this.get_dataSchemaPresModel().worksheetDataSchemaMap)&&ss.keyExists(this.get_dataSchemaPresModel().worksheetDataSchemaMap,e)){ex=this.get_dataSchemaPresModel().worksheetDataSchemaMap[e].primaryDatasource}if(ss.isNullOrEmptyString(ex)){return _.chain(this.$1.get_dataSources()).filter(ss.mkdel(this,function(lA){return!ss.referenceEquals(lA.get_name(),this.get_dataSchemaPresModel().parametersDatasource)})).first().value()}return this.$1.getDataSource(ex)},getDefaultDatasourceNamesForSheets:function(e){var ex={};for(var lA=0;lA<e.length;lA++){var lB=e[lA];var lC=this.getDefaultDataSourceForSheet(lB);if(ss.isValue(lC)){ex[lC.get_name()]=true}}return ss.arrayFromEnumerable(Object.keys(ex))},getDataSourceCount:function(e){var ex=0;if(ss.isValue(this.get_dataSources())&&ss.isValue(this.get_dataSources().get_dataSources())){ex=this.get_dataSources().get_dataSources().length;if(!e&&ss.isValue(this.get_parametersDataSource())){ex--}}return ex},findField:function(e){var ex=this.findDataSourceFromGlobalFieldName(e);return(ss.isNullOrUndefined(ex)?null:ex.findField(e))},findDataSourceByName:function(e){return(ss.isNullOrUndefined(this.get_dataSources())?null:this.get_dataSources().getDataSource(e))},findDataSourceFromGlobalFieldName:function(e){var ex=dw.splitGlobalFieldName(e);if(ex.length<=1){return null}var lA=ex[0].replace(new RegExp('\\]\\]'),']');return this.findDataSourceByName(lA)},raiseNewActiveDataSourceEvent:function(e){this.raiseEvent(this.$2$1,e)},raiseNewDataSchemaEvent:function(e){this.raiseEvent(this.$2$2,e)},update:function(e,ex){if(ss.isNullOrUndefined(e)){return}if(_.isEqual(e,this.pm)){return}var lA=(ss.isValue(e.currentBlendingFields)?e.currentBlendingFields:[]);var lB=(ss.isValue(e.blendingFieldCandidates)?e.blendingFieldCandidates:[]);this.$3=ss.arrayClone(lA);this.$2=ss.arrayClone(lB);if(ss.isValue(e.parametersDatasource)){this.$4=e.parametersDatasource}var lC=this.getDataSourceCount(true);if(ss.isValue(e.schemaViewerDataSources)){this.$1=this.$1||new dx(this);this.$1.update(e.schemaViewerDataSources,ex)}if(this.getDataSourceCount(true)>lC){this.notifyNewDataSourceAdded(ex,'')}if(ss.isValue(this.pm)){var lD=this.pm.worksheetDataSchemaMap;var lE=e.worksheetDataSchemaMap;gY.mergeMapPresModelDelta(lD,lE)}if(!ss.referenceEquals(e.datasource,this.get_activeDataSourceName())){this.raiseNewActiveDataSourceEvent(ex)}this.swapAndCopyPresModel(e);this.raiseNewDataSchemaEvent(ex)}},gV);ss.initClass(du,a,{add_selectionChanged:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_selectionChanged:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_notificationId:function(){return'doc:data-schema-selection-event'},$2:function(){var e=this.pm;if(ss.isNullOrUndefined(e)){return null}var ex=[];for(var lA=0;lA<e.fieldVector.length;lA++){var lB=e.fieldVector[lA];ex.push(lB)}return ex},onNotify:function(e,ex){this.swapPresModel(e);this.$1()},$1:function(){if(!tab.FeatureFlags.isEnabled('NewFieldHighlightWeb')){return}if(!ss.isValue(this.$2$1)){return}var e=null;e=ss.mkdel(this,function(){this.$2$1(this.$2());bT.get().remove_commandQueueComplete(e)});bT.get().add_commandQueueComplete(e)}},gV,[fV]);ss.initClass(dv,a,{add_modelUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_modelUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_stopNotifying:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_stopNotifying:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_notificationId:function(){return'doc:update-data-source-data-event'},onNotify:function(e,ex){this.onNotify$1(e,ex)},onNotify$1:function(e,ex){if(ss.isValue(e)){this.update(e,ex)}},detachNotifications:function(){if(!ss.staticEquals(this.$2$2,null)){this.$2$2()}},getColumnByName:function(e){if(ss.isValue(this.columnInfoLookup)){return this.columnInfoLookup[e]}return null},clearModel:function(){this.numRows=0;this.isEmpty=true;this.isExtract=false;this.columnInfoLookup=null;this.dataDictionaryModel=new dr(this)},update:function(e,ex){if(ss.isNullOrUndefined(e)){return}this.pm=e;this.numRows=e.numRows;this.isEmpty=e.isEmpty;this.isExtract=e.isExtract;this.dataDictionaryModel.update(e.dataDictionary);this.columnInfoLookup={};for(var lA=0;lA<e.columnInfos.length;lA++){var lB=e.columnInfos[lA];var lC=new dY(null);lC.update(lB);var lD=lC.get_fieldName();this.columnInfoLookup[lD]=lC}this.raiseEvent(this.$2$1,ex)}},gV,[fV,fR]);ss.initClass(dw,a,{add_captionChanged:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_captionChanged:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_canAnalyzeDataChanged:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_canAnalyzeDataChanged:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_name:function(){if(ss.isNullOrUndefined(this.pm)||ss.isNullOrUndefined(this.pm.datasource)){return''}return this.pm.datasource},get_caption:function(){return this.pm.datasourceCaption},get_connectionsTypeSummary:function(){var e='';if(ss.isValue(this.pm)&&ss.isValue(this.pm.connectionSummaries)){var ex=true;for(var lA=0;lA<this.pm.connectionSummaries.length;lA++){var lB=this.pm.connectionSummaries[lA];var lC=(ex?'':', ');var lD=lB.connectionName.toString().split(String.fromCharCode(46))[0];e=e+lC+lD;ex=false}}return e},get_fields:function(){return this.baseColumnsModel.rootFields},get_rootFieldsNew:function(){return this.baseColumnsModel.rootFieldsNew},get_dataSourceLayoutPresModel:function(){return this.pm.dataSourceLayout},get_isParametersDataSource:function(){return ss.equals(this,Y.get_instance().get_workbook().get_dataSchema().get_parametersDataSource())},get_fieldOrderType:function(){return this.pm.fieldOrderType},get_fieldSortOrder:function(){return this.pm.fieldSortOrder},get_isDataTabViewSupported:function(){return this.pm.isWebDataTabViewSupported},get_shouldShowDataSourceConnectionError:function(){return this.pm.shouldShowDataSourceConnectionError},get_shouldShowInSchemaViewer:function(){return this.pm.canBeAddedToSchemaViewer},get_canAnalyzeData:function(){return ss.isValue(this.pm)&&this.pm.canAnalyzeData},get_canUseMultipleHierarchies:function(){return ss.isValue(this.pm)&&this.pm.canUseMultipleHierarchies},get_specifiedWidth:function(){return this.$2$3},set_specifiedWidth:function(e){this.$2$3=e},getFilteredFields:function(e){var ex=[];var lA=this.baseColumnsModel.get_allFields();for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];if(e(lC)){ex.push(lC)}}return ex},findField:function(e){var ex=this.baseColumnsModel.findField(e);if(ss.isValue(ex)){return ex}if(ss.isValue(this.columnInstancesModel)){return this.columnInstancesModel.findField(e)}return null},findDrillPath:function(e){return this.baseColumnsModel.findDrillPath(e)},findFolder:function(e,ex){return this.baseColumnsModel.findFolder(e,ex)},findFolderNew:function(e){return this.baseColumnsModel.findFolderNew(e)},findRelationalTable:function(e){return this.baseColumnsModel.findRelationalTable(e)},findCubeFolder:function(e){return this.baseColumnsModel.findCubeFolder(e)},raiseCaptionChangedEvent:function(e){this.raiseEvent(this.$2$1,e)},raiseCanAnalyzeDataChangedEvent:function(e){this.raiseEvent(this.$2$2,e)},update:function(e,ex){if(ss.isNullOrUndefined(e)){return}if(ss.isNullOrUndefined(this.pm)||!ss.referenceEquals(this.pm.datasourceCaption,e.datasourceCaption)){this.raiseCaptionChangedEvent(ex)}if(ss.isNullOrUndefined(this.pm)||this.pm.canAnalyzeData!==e.canAnalyzeData){this.raiseCanAnalyzeDataChangedEvent(ex)}var lA={};lA['dimensions']=[];lA['measure']=[];lA['groups']=[];lA['parameters']=[];var lB=false;if(ss.isValue(e.dimensionsFieldList)){lA['dimensions']=e.dimensionsFieldList;lB=true}if(ss.isValue(e.measuresFieldList)){lA['measure']=e.measuresFieldList;lB=true}if(ss.isValue(e.setsFieldList)){lA['groups']=e.setsFieldList;lB=true}if(ss.isValue(e.parametersFieldList)){lA['parameters']=e.parametersFieldList;lB=true}if(lB){this.baseColumnsModel.update$1(lA,ex)}if(ss.isValue(e.columnList)){this.columnInstancesModel=this.columnInstancesModel||new et('columnList',this);this.columnInstancesModel.update(e.columnList,ex)}this.swapAndCopyPresModel(e)}},gV);ss.initClass(dx,a,{get_dataSources:function(){return _.values(this.dataSourceModels)},get_dataSourceCount:function(){return ss.getKeyCount(this.dataSourceModels)},getDataSource:function(e){return this.dataSourceModels[e]},update:function(e,ex){var lA=_.keys(e);for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];var lD=e[lC];if(lD===null){delete this.dataSourceModels[lC]}else{var lE=this.dataSourceModels[lC];if(ss.isNullOrUndefined(lE)){lE=new dw(this,lC);this.dataSourceModels[lC]=lE}lE.update(lD,ex)}}if(ss.isValue(this.pm)){gY.mergeMapPresModelDelta(this.pm,e)}this.swapPresModel(e)}},gV);ss.initClass(dy,a,{});ss.initInterface(fN,a,{dispatch:null});ss.initClass(dz,a,{dispatch:function(e,ex){return function(lA){var lB=$.Deferred();var lC=function(lF){lB.resolve(new ex(lF))};var lD=function(lF){lB.reject(lF)};var lE=new bM(lA.get_uiBlocking(),lA.get_localWork(),lA.get_remoteCommand(),lC,lD);lE.set_useGlobalConnectionErrorHandling(!lA.get_suppressConnectionDialog());lE.set_commandWaiter(lA.get_commandWaiter());bT.SendCommand(lE);return lB.promise()}}},null,[fN]);ss.initInterface(gf,a,{handleCommandFailure:null});ss.initClass(dA,a,{checkForErrorDialogFailure:function(e){var ex=false;if(ss.isNullOrUndefined(e)){return false}if(ss.referenceEquals(e.commandName,{ns:'tabdoc',cmd:'show-detailed-error-dialog'}.cmd)){ex=true}return ex},handleCommandFailure:function(e,ex,lA,lB){if(tabBootstrap.ViewerBootstrap.get_instance().get_sessionBeingCleared()){return false}var lC=this.checkForErrorDialogFailure(lA);if(lC){this.handleErrorDialogFailure(lA);return true}if(ex.status===410||ex.status===404){this.handleSessionExpiration(false)}else if(ex.status===403){}else if(ex.status===401){this.handleAuthenticationFailure()}else if(ex.status===502||ex.status===503){this.handleSessionKilled(null)}else if(ex.status===413){this.handleSessionLimitExceeded()}else if(ex.status===0){this.$4(e,ex)}else if(ss.isNullOrUndefined(lB)||!lB){this.$1(ex,e)}return true},$4:function(e,ex){var lA;if(!tab.MiscUtil.isNullOrEmpty$3(ex.responseText)){var lB=new ss.StringBuilder;lB.append('XHR Response Status: 0\nReadyState:');lB.append(ex.readyState);lB.append('\nHeaders:\n');lB.append(ex.getAllResponseHeaders());lB.append('\nResponse:\n');lB.append(ex.responseText);lA=ss.mkdel(this,function(){this.$5.ShowErrorDialog(lB.toString(),tab.Strings.RequestAbortedByBrowser,null)})}else{lA=ss.mkdel(this,function(){this.$1(ex,e)})}window.setTimeout(lA,5000)},handleSessionExpiration:function(e){var ex=kR.createForCurrentWindowLocation();if(e&&ex.get_retry()){throw new ss.Exception('Failed to re-initialize session')}this.reloadPage(e)},handleAuthenticationFailure:function(){this.reloadPage(false)},$2:function(e,ex){var lA=ss.replaceAllString(be.getErrorMessageFromStringOrException(ex),'XMLHttpTransport.watchInFlight Error: ','');lA=ss.replaceAllString(lA,'XMLHttpTransport Error: ','');if(e.status<400){lA=tab.Strings.BrowserErrorProcessingMessage+'<br>'+lA}else if(e.status===400){lA=tab.Strings.ServerErrorRejectedMessage+'<br>'}else{var lB=e.responseText;try{lB=lB.replace(new RegExp('\n(?=s*[A-Z])','g'),'<li>').replace(new RegExp('\n','g'),'<br>');lB='<ul><li>'+lB+'</ul>'}catch(lC){lB=eo.stripOutMarkup(lB)}if(ss.isNullOrEmptyString(lB)){lA=tab.Strings.ServerErrorGeneral(e.status)+'<br>'}else{lA=lB}}return lA},$3:function(e){var ex=tab.Strings.ServerErrorUnexpected;if(e.status<400){ex=tab.Strings.BrowserErrorProcessing}else if(e.status===400){ex=tab.Strings.ServerErrorRejected}return ex},handleErrorDialogFailure:function(e){var ex=e.commandParams['errorDialogTitle'];var lA=e.commandParams['errorShortMessage'];var lB=e.commandParams['errorDetails'];if(ss.isValue(lB)){lA=((lB.length>0)?(lA+'<br/>'+lB.join('<br/>')):lA)}this.$5.ShowLocalErrorDialog(lA,ex,null)},$1:function(e,ex){var lA=this.$3(e);var lB=this.$2(e,ex);this.$5.ShowErrorDialog(lB,lA,null)},$0:function(e,ex,lA){e=ss.coalesce(e,'').trim();e=eo.stripOutMarkup(e);var lB=new tab.NonApiCommand('tableau.completed',[]);tabBootstrap.Utility.doPostMessage(lB.serialize());var lC=tab.Strings.UnhandledExceptionMessage(tsConfig.sessionid,e);if(!ss.isNullOrEmptyString(e)){lC+='<br/><br/>'}lC+=lA;var lD=ss.mkdel(this,function(){this.requestSetIgnore();document.body.style.cursor='wait';this.reloadPage(false)});this.$5.showConfirmationDialog(lC,ex,true,lD,null)},reloadPage:function(e){document.body.style.cursor='wait';var ex=tsConfig.repositoryUrl||tsConfig.origin_repository_url;var lA=kR.createForCurrentWindowLocationAndVizState(ex,tsConfig.current_sheet_name);lA.set_retry(e);lA.explicitNotGuest=tsConfig.is_authoring&&!tsConfig.is_guest;lA.fullPageLoad(null)},handleSessionForbiddenAction:function(e,ex){var lA=tab.Strings.SessionForbiddenActionTitle;var lB=tab.Strings.SessionForbiddenActionMsg;switch(e){case 16:case 20:case 22:case 60011:{lB=ex;break}}this.$5.ShowErrorDialog(lB,lA,null)},handleSessionLimitExceeded:function(){if(dA.$2){return}var e=tab.Strings.TimeLimitExceededWarning;e+='\n';e+=tab.Strings.PressBackButtonMessage;var ex=tab.Strings.TimeLimitExceededTitle;dA.$2=true;this.$5.ShowErrorDialog(e,ex,null)},handleSessionKilled:function(e){this.$0(e,tab.Strings.SessionEndedAlertTitle,tab.Strings.SessionEndedAlertMessage)},handleUnknownErrorStatus:function(e){this.$0(e,tab.Strings.SessionUnknownErrorTitle,tab.Strings.SessionEndedAlertMessage)},requestSetIgnore:function(){dA.$1(this.$6)}},null,[gf]);ss.initClass(dB,a,{get_isZoomin:function(){return this.$0},set_isZoomin:function(e){this.$0=e},shouldDeferLayoutUpdates:function(){return this.$1},setDeferLayoutUpdates:function(e){this.$1=e}});ss.initClass(dC,a,{handle:function(e,ex){if(!this.$7||ss.isValue(ex)&&!ex.get_useGlobalConnectionErrorHandling()){return false}if(ss.isNullOrUndefined(e)){return false}var lA=tab.DataSourceConnectionAttemptErrorResponse.tryDeserialize(e.get_message());if(ss.isNullOrUndefined(lA)){return false}var lB=e['status'];if(ss.isNullOrUndefined(lB)){return false}if(!dC.shouldHandleWithGivenStatus(lB)){return false}this.$0(ex,lA,null,false);return true},$1:function(e,ex,lA){if(!this.$7){return}if(lA){e=dC.constructEnsureLayoutForSheetCommand()}if(ss.isNullOrUndefined(e)){return}if(ss.isNullOrUndefined(ex)||ss.isNullOrUndefined(ex.dataSourceConnectionAttemptInfos)||ex.dataSourceConnectionAttemptInfos.length===0){return}var lB=this.getFirstDataSource(ex);var lC=new tab.DataSourceConnectionAttemptErrorResponse;lC.ErrorType=lB.exceptionType;lC.ErrorMessage=lB.exceptionMessage;lC.DataSourceCaption=lB.datasourceCaption;lC.ConnectionName=dl.connectionNameFromFullConnectionName(lB.connectionFullName);lC.ConnectionClass=((ss.isValue(lB.exceptionAttrs)&&ss.keyExists(lB.exceptionAttrs,'class'))?lB.exceptionAttrs['class']:null);var lD=lC;if(dC.isBadPasswordError(lB.exceptionType)){var lE=dC.$0(lB);lD.RedirectUrl=lE}else{lD.ErrorMessage=lB.exceptionMessage}if(this.$4(e,lD,ex)){return}var lF=!lB.triedToConnect;this.$0(e,lD,ex,lF)},handlePotentialDataSourceException:function(e,ex,lA){if(!this.$7||ss.isValue(e)&&!e.get_useGlobalConnectionErrorHandling()){return}if(!ss.isNullOrUndefined(ex)){this.$1(e,ex.connectionAttemptInfo,lA)}},handlePotentialBootstrapDataSourceException:function(e){if(!this.$7){return}if(!ss.isNullOrUndefined(e)){this.$1(null,e.connectionAttemptInfo,true)}},getFirstDataSource:function(e){return(ss.isValue(e)?e.dataSourceConnectionAttemptInfos[0]:null)},$0:function(e,ex,lA,lB){if(!ss.isNullOrEmptyString(ex.RedirectUrl)){var lC=(lB?'&skippopup=1':'');ex.RedirectUrl=ss.formatString('{0}{1}&vizqlSessionId={2}',ex.RedirectUrl,lC,tsConfig.sessionid)}e.reEnqueueCompletedCommandRecords();var lD=function(){e.clearCommandResults();bT.SendCommand(e)};var lE=ss.mkdel(e,e.triggerCallbacks);var lF=ss.isValue(e.get_commandName())&&ss.equalsT(e.get_commandName(),{ns:'tabsrv',cmd:'ensure-layout-for-sheet'}.cmd);var lG=ss.isValue(e.get_commandName())&&ss.equalsT(e.get_commandName(),{ns:'tabdoc',cmd:'change-workbook-ui-mode'}.cmd);var lH=dC.isBadPasswordError(ex.ErrorType);if(lF){this.$2(ex,lA,lH,lD)}else{this.$3(ex,lA,lH,lG,lD,lE)}},$2:function(e,ex,lA,lB){var lC=this.getFirstDataSource(ex);var lD=ss.mkdel(this,function(){this.$6.showSheetAuthenticationOverlay(e,ex,lB)});if(lA){if(lC.triedToConnect){if(!tab.FeatureFlags.isEnabled('DataToTheWebTabbedAuthReconnect')){this.$6.showConnectionSignInDialog(ex,false).done([lB]).fail([lD])}else{var lE=this.$6.showConnectionSignInDialog(ex,false);var lF=function(lH,lI){lE.resolve()};var lG=function(lH,lI){lE.reject()};Y.get_instance().registerNotificationHandler('doc:tabbed-auth-dialog-closed-event',lG);Y.get_instance().registerNotificationHandler('doc:tabbed-auth-dialog-connected-event',lF);lE.done([lB]).fail([lD])}}else{lD()}}else{dC.$2(lC).done(ss.mkdel(this,function(lH){if(lH){this.$6.showEditConnectionInformationDialog(lC,false).done(ss.mkdel(this,function(lI){if(!lI){this.$6.showGenericDataSourceErrorOverlay(e,lC,lB)}}))}else{this.$6.showGenericDataSourceErrorOverlay(e,lC,lB)}}))}},$3:function(e,ex,lA,lB,lC,lD){var lE=this.getFirstDataSource(ex);if(lA&&!lB){if(!tab.FeatureFlags.isEnabled('DataToTheWebTabbedAuthReconnect')){this.$6.showConnectionSignInDialog(ex,lB).done([lC]).fail([lD])}else{var lF=this.$6.showConnectionSignInDialog(ex,false);var lG=function(lI,lJ){lF.resolve()};var lH=function(lI,lJ){lF.reject()};Y.get_instance().registerNotificationHandler('doc:tabbed-auth-dialog-closed-event',lH);Y.get_instance().registerNotificationHandler('doc:tabbed-auth-dialog-connected-event',lG);lF.done([lC])}}else{dC.$2(lE).done(ss.mkdel(this,function(lI){if(lI){this.$6.showEditConnectionInformationDialog(lE,lB).done(function(lM){lD()})}else if(lA){if(!tab.FeatureFlags.isEnabled('DataToTheWebTabbedAuthReconnect')){this.$6.showConnectionSignInDialog(ex,lB).done([lC]).fail([lD])}else{var lJ=this.$6.showConnectionSignInDialog(ex,false);var lK=function(lM,lN){lJ.resolve()};var lL=function(lM,lN){lJ.reject()};Y.get_instance().registerNotificationHandler('doc:tabbed-auth-dialog-closed-event',lL);Y.get_instance().registerNotificationHandler('doc:tabbed-auth-dialog-connected-event',lK);lJ.done([lC]).fail([lD])}}else{this.$6.showGenericDataSourceErrorDialog(e,lC,lD)}}))}},$4:function(e,ex,lA){var lB=this.getFirstDataSource(lA);if(dC.$1()&&lB.connectionErrorType==='exception-while-connecting'&&ss.isValue(ex.ConnectionClass)){var lC=ex.ConnectionClass;if(!ss.contains(co.get_getSupportedFileClasses(),lC)){return false}e.reEnqueueCompletedCommandRecords();var lD=function(){e.clearCommandResults();bT.SendCommand(e)};if(lB.connectionErrorStage==='create-protocol-failed'){if(this.$5(e,ex,lA,lC,lD)){return true}}if(lB.connectionErrorStage==='load-metadata-failed'&&Y.get_instance().get_workbook().get_uiMode()!=='data-tab'&&dl.isEditConnectionForFilesSupported(lC)){var lE=this.$6.showEditConnectionInformationDialog(lB,false);lE.done(ss.mkdel(this,function(lF){if(!lF){this.$0(e,ex,lA,!lB.triedToConnect)}}));return true}}return false},$5:function(e,ex,lA,lB,lC){var lD=this.getFirstDataSource(lA);var lE=dl.connectionNameFromFullConnectionName(lD.connectionFullName);if(lB==='excel'||lB==='excel-direct'){var lF='';if(ss.keyExists(lD.exceptionAttrs,'filename')){var lG=lD.exceptionAttrs['filename'];lF=dl.stripDirectoryFromPath(lG)}var lH=this.$6.showConnectionMissingFileDialog(lF,lE,'excel-direct');lH.done(ss.mkdel(this,function(lK){if(!lK){this.$0(e,ex,lA,!lD.triedToConnect)}else{lC()}}));return true}else if(lB==='textscan'){var lI='';if(ss.keyExists(lD.exceptionAttrs,'directory')){lI=lD.exceptionAttrs['directory']}var lJ=this.$6.showConnectionMissingFileDialog(lI,lE,'textscan');lJ.done(ss.mkdel(this,function(lK){if(!lK){this.$0(e,ex,lA,!lD.triedToConnect)}else{lC()}}));return true}return false}});ss.initClass(dD,a,{handleCommandFailure:function(e,ex,lA,lB){if(!this.$0){return false}if(!dC.shouldHandleWithGivenStatus(ex.status)){return false}var lC=tab.DataSourceConnectionAttemptErrorResponse.tryDeserialize(ex.responseText);if(ss.isNullOrUndefined(lC)){return false}return true}},null,[gf]);ss.initInterface(ga,a,{processEvent:null});ss.initClass(dE,a,{dispose:function(){this.fireDeferredEvents()},fireDeferredEvents:function(){var ex=this.$0;this.$0=null;if(ss.isNullOrUndefined(ex)){return}for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];try{lB()}catch(lC){var e=ss.Exception.wrap(lC);if(!ss.staticEquals(this.exceptionHandler,null)){this.exceptionHandler(e)}}}},processEvent:function(e){if(ss.isNullOrUndefined(this.$0)){this.$0=[]}this.$0.push(e)}},null,[ga,ss.IDisposable]);ss.initClass(dF,a,{add_layoutInfoUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_layoutInfoUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_presetSizes:function(){return this.$1},get_defaultWidth:function(){return this.pm.defaultWidth},get_defaultHeight:function(){return this.pm.defaultHeight},get_defaultMaxWidth:function(){return this.pm.maxWidth},get_defaultMaxHeight:function(){return this.pm.maxHeight},get_defaultMinWidth:function(){return this.pm.minWidth},get_defaultMinHeight:function(){return this.pm.minHeight},update:function(e,ex){if(ss.isValue(e.presetSizesList)){this.$1.length=0;for(var lA=0;lA<e.presetSizesList.sizeItems.length;lA++){var lB=new jJ(this.$2,lA);lB.update(e.presetSizesList.sizeItems[lA],ex);this.$1.push(lB)}}this.simpleSwapToUpdate(e,this.$2$1,ex)}},gV);ss.initClass(dG,a,{});ss.initClass(dH,a,{add_modelUpdated:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_modelUpdated:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},$1:function(){return this.pm},get_referenceModel:function(){return this.$3$2},set_referenceModel:function(e){this.$3$2=e},get_computeCompoundedRate:function(){return this.$1().computeCompoundedRate},get_computeCompoundedRateState:function(){return this.$1().computeCompoundedRateState},update:function(e,ex){var lA=e;if(this.isNewPresModelSameAsOld(lA)){return}this.swapAndCopyPresModel(lA);this.get_referenceModel().update(lA.tableCalcReferenceOptionsPresModel,ex);this.raiseEvent(this.$3$1,ex)}},kq);ss.initClass(dI,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabsrv',cmd:'double-click-region-no-return-server'},this.c))}},ss.makeGenericType(bd,[Object,dJ]));ss.initClass(dJ,a,{});ss.initClass(eN,a,{get_fontFamily:function(){return this.$1},set_fontFamily:function(e){this.$1=e;this.$0=''},get_weight:function(){return this.$3},set_weight:function(e){if(ss.isNullOrEmptyString(e)){this.$3='normal'}else{this.$3=e}this.$0=''},get_style:function(){return this.$2},set_style:function(e){if(ss.isNullOrEmptyString(e)){this.$2='normal'}else{this.$2=e}this.$0=''},get_hash:function(){if(this.$0===''){this.$0=this.get_fontFamily().replace(eN.matchQuotes,'').toLowerCase()+'-<%>-'+this.$3.toLowerCase()+'-<%>-'+this.$2.toLowerCase()}return this.$0},equals$1:function(e){var ex=ss.replaceAllString(ss.replaceAllString(this.get_fontFamily(),"'",''),'"','');var lA=ss.replaceAllString(ss.replaceAllString(e.get_fontFamily(),"'",''),'"','');return ss.compareStrings(ex,lA,true)===0&&ss.compareStrings(this.get_weight(),e.get_weight(),true)===0&&ss.compareStrings(this.get_style(),e.get_style(),true)===0}});ss.initClass(dK,a,{get_source:function(){return ss.formatString("url('{0}2') format('woff2'), url('{0}') format('woff')",ss.coalesce(this.woffLocation,''))},clone:function(){var e=new dK;e.set_fontFamily(this.get_fontFamily());e.set_style(this.get_style());e.set_weight(this.get_weight());e.woffLocation=this.woffLocation;return e},equals$2:function(e){return this.equalsIgnoreWoff(e)&&ss.compareStrings(this.woffLocation,e.woffLocation,true)===0},equalsIgnoreWoff:function(e){return this.equals$1(e)},toCSSRules:function(){var e={};e['font-family']=eS.addQuotationMarks(this.get_fontFamily(),true);e['font-weight']=this.get_weight();e['font-style']=this.get_style();e['src']=this.get_source();return e}},eN);ss.initClass(dL,a,{});ss.initClass(dM,a,{},ss.makeGenericType(kV,[Object,dN]));ss.initClass(dN,a,{});ss.initInterface(fS,a,{canExtractFont:null,extractFontFromPresModel:null});ss.initClass(dO,a,{canExtractFont:function(e){return e.type==='draw-text-props'},extractFontFromPresModel:function(e){if(!this.canExtractFont(e)){return null}var ex=e;var lA=ex.fontName;if(ss.isNullOrEmptyString(lA)){return null}var lB=[];var lC=new eN;lC.set_fontFamily(lA);lC.set_weight((ex.isBold?'bold':'normal'));lB.push(lC);return lB}},null,[fS]);ss.initClass(dP,a,{get_levels:function(){return this.$1},get_childToSelect:function(){return this.$1[0]},get_instanceType:function(){return'drillPath'},get_canHaveChildren:function(){return true},update:function(e,ex){this.swapAndCopyPresModel(e);this.$1=ex}},es);ss.initClass(dQ,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'drop-on-dashboard'},this.c))}},ss.makeGenericType(bd,[Object,dR]));ss.initClass(dR,a,{hasZoneID:function(){return ss.keyExists(this.$$c,'zoneId')}});ss.initClass(dS,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'drop-on-schema-drill-path'},this.c))}},ss.makeGenericType(bd,[Object,dT]));ss.initClass(dT,a,{hasDropCommand:function(){return ss.keyExists(this.$$c,'dropCommandModel')}});ss.initClass(dU,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'drop-on-schema-field'},this.c))}},ss.makeGenericType(bd,[Object,dV]));ss.initClass(dV,a,{hasDropCommand:function(){return ss.keyExists(this.$$c,'dropCommandModel')}});ss.initClass(dW,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'drop-on-schema-section'},this.c))}},ss.makeGenericType(bd,[Object,dX]));ss.initClass(dX,a,{hasDropCommand:function(){return ss.keyExists(this.$$c,'dropCommandModel')}});ss.initClass(dY,a,{get_dataType:function(){if(ss.isNullOrUndefined(this.pm)){return'unknown'}return this.pm.dataType},get_fieldName:function(){if(ss.isNullOrUndefined(this.pm)){return null}return this.pm.fn},get_valueIndexs:function(){if(ss.isNullOrUndefined(this.pm)){return null}return this.pm.valueIndices},get_aliasIndexs:function(){if(ss.isNullOrUndefined(this.pm)){return null}return this.pm.aliasIndices},get_formattedValueIndexs:function(){if(ss.isNullOrUndefined(this.pm)){return null}return this.pm.formatValIdxs},get_stringCollation:function(){if(ss.isNullOrUndefined(this.pm)){return null}return this.pm.stringCollation},update:function(e){if(ss.isValue(e)){this.pm=e}}},gV);ss.initClass(dZ,a,{add_modelUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_modelUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},$1:function(){return this.pm},get_selectedParameter:function(){var e=this.$1().fieldCaptionPair;if(ss.isNullOrUndefined(e)){return null}return{key:e.fieldCaption,value:e.fn}},get_parameters:function(){return _.map(this.$1().fieldCaptionPairs,function(e){return{key:e.fieldCaption,value:e.fn}})},get_selectedValue:function(){return this.$1().selectedValue},set_selectedValue:function(e){this.$1().selectedValue=e},get_enterValueText:function(){return this.$1().enterValueText},get_isCustomValueEnabled:function(){return this.$1().isCustomValueEnabled},get_precannedValues:function(){var e=[];var ex=this.$1().precannedDataValues;for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];e.push(lB)}return e},update:function(e,ex){this.swapPresModel(e);this.raiseEvent(this.$2$1,ex)}},gV);ss.initClass(ea,a,{get_length:function(){return this.$0.length},handle:function(e,ex,lA,lB){var lC=this.$0;for(var lD=0;lD<lC.length;lD++){var lE=lC[lD];if(lE.handleCommandFailure(e,ex,lA,lB)){return}}},indexOf:function(e){var ex=0;for(var lA=0;lA<this.$0.length;lA++){var lB=this.$0[lA];if(ss.referenceEquals(ss.getInstanceType(lB),e)){return ex}ex+=1}return-1}});ss.initClass(eb,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'establish-cloud-connection'},this.c))}},ss.makeGenericType(bd,[Object,ec]));ss.initClass(ec,a,{});ss.initClass(ed,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'establish-cloud-connection-no-undo'},this.c))}},ss.makeGenericType(bd,[Object,ee]));ss.initClass(ee,a,{});ss.initClass(ef,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'establish-connection'},this.c))}},ss.makeGenericType(bd,[Object,eg]));ss.initClass(eg,a,{});ss.initClass(eh,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'establish-connection-no-undo'},this.c))}},ss.makeGenericType(bd,[Object,ei]));ss.initClass(ei,a,{});ss.initClass(ej,a,{});ss.initClass(ek,a,{});ss.initClass(el,a,{add_updated:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_updated:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},add_stopNotifying:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_stopNotifying:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},get_notificationId:function(){return'doc:permissions-update-event'},onNotify:function(e,ex){var lA=e;for(var lB=0;lB<lA.permissionsApprovalPresModelList.length;lB++){var lC=lA.permissionsApprovalPresModelList[lB];var lD=JSON.stringify(lC.extensionRegistrationKeyPresModel);if(ss.keyExists(this.$0,lD)&&this.$0[lD]===lC.extensionPermissionsGranted){return}this.$0[lD]=lC.extensionPermissionsGranted}this.$1$1()},detachNotifications:function(){if(!ss.staticEquals(this.$1$2,null)){this.$1$2()}},hasUserResponse:function(e){return ss.keyExists(this.$0,JSON.stringify(e))},getPermissionsApproval:function(e){return this.$0[JSON.stringify(e)]}},null,[fV,fR]);ss.initClass(em,a,{});ss.initClass(en,a,{add_extensionZoneUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_extensionZoneUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_zoneModel:function(){return this.$1},update:function(e,ex){this.simpleSwapToUpdate(e,this.$2$1,ex)}},gV);ss.initClass(eo,a,{});ss.initClass(ep,a,{});ss.initClass(eq,a,{get_instanceType:function(){return'column'},get_defaultRole:function(){return this.pm.defaultFieldRole},get_role:function(){return this.pm.fieldRole},get_baseColumnName:function(){return(this.get_isInstance()?this.pm.baseColumnName:this.get_globalName())},get_baseColumn:function(){return(this.get_isInstance()?this.get_dataSource().findField(this.get_baseColumnName()):this)},get_isInstance:function(){return!ss.isNullOrUndefined(this.pm.isInstance)&&this.pm.isInstance},get_hasWarning:function(){return this.pm.hasWarning},get_isAllowedInCalcs:function(){var e=this.get_baseColumn();return(ss.referenceEquals(e,this)?es.prototype.get_isAllowedInCalcs.call(this):e.get_isAllowedInCalcs())},get_isCalculated:function(){return this.pm.isCalculated},get_formattedFamilyName:function(){return this.pm.formattedFamilyName},get_canAddToDrillPath:function(){return this.pm.canAddToDrillPath},get_isInDrillPath:function(){return this.pm.isInDrillPath},get_columnClass:function(){return this.pm.columnClass},get_isTimeIntelligenceColumn:function(){return this.$3$1},set_isTimeIntelligenceColumn:function(e){this.$3$1=e},get_isHidden:function(){return this.pm.isHidden||this.get_isInstance()&&!this.get_isTimeIntelligenceColumn()},update:function(e){this.swapAndCopyPresModel(e)},get_connectionName:function(){return this.pm.connectionName}},es);ss.initEnum(er,a,{column:'column',drillPath:'drillPath',cubeDimension:'cubeDimension',group:'group',cubeHierarchy:'cubeHierarchy',relationalTable:'relationalTable',cubeFolder:'cubeFolder',folder:'folder',multiple:'multiple',folderNew:'folderNew',structuredMeasure:'structuredMeasure',cubeStandardDimension:'cubeStandardDimension',cubeAttributeDimension:'cubeAttributeDimension',level:'level'},true);ss.initClass(et,a,{get_allFields:function(){if(ss.isValue(this.$k)){return this.$k}this.$k=[];var e=_.keys(this.$j);for(var ex=0;ex<e.length;ex++){var lA=e[ex];var lB=this.$j[lA];if(ss.referenceEquals(lA,lB.get_localName())){this.$k.push(lB)}}return this.$k},get_dataSource:function(){return this.$m},findField:function(e){return this.$j[e]},findDrillPath:function(e){return this.$n[e]},findFolder:function(e,ex){var lA=e+ex;return this.$o[lA]},findFolderNew:function(e){return this.$p[e]},findRelationalTable:function(e){return this.$q[e]},findCubeFolder:function(e){return this.$l[e]},getMutableCopyOfPresModel:function(){return this.getMutableCopyOfPresModelInternal(true)},update:function(e,ex){if(ss.isNullOrUndefined(e)){return}if(_.isEqual(this.pm,e)){return}this.$k=null;var lA=this.$j;var lB=this.$q;var lC=this.$o;var lD=this.$n;this.$j={};this.$q={};this.$o={};this.$n={};this.rootFields=[];var lE=[];var lF={};var lG={};for(var lH=0;lH<e.length;lH++){var lI=e[lH];lI.fieldIconRes=lI.fieldIconRes||'';switch(lI.type){case'field-folder':{lE.push(lI);break}case'drill-path':{lG[lI.name]=this.$b(lI,lD,lA);break}case'relational-table':{var lJ=this.$h(lI,lB,lA);this.rootFields.push(lJ);break}case'group':{lF[lI.fn]=this.$f(lI,lA);break}case'column':{lF[lI.fn]=this.$5(lI,lA);break}case'dimension':{var lK=this.$7(lI,lA);this.rootFields.push(lK);break}case'display-folder':{var lL=this.$8(lI,lA);this.rootFields.push(lL);break}}}for(var lM=0;lM<lE.length;lM++){var lN=lE[lM];var lO=this.$d(lN,lC,lF,lG);this.rootFields.push(lO)}var lP=this.rootFields.concat.apply(this.rootFields,_.values(lG));this.rootFields=lP.concat.apply(lP,_.values(lF));var lQ=_.keys(this.$j);for(var lR=0;lR<lQ.length;lR++){var lS=lQ[lR];var lT=this.$j[lS];this.$j[lT.get_localName()]=lT}this.swapPresModel(e);this.raiseEvent(this.fieldsChanged,ex)},$c:function(e,ex,lA,lB,lC,lD){e.fieldIconRes=e.fieldIconRes||'';switch(e.type){case'field-folder-new':{var lE=this.$e(e,ex,lA,lB);lD.push(lE);return}case'drill-path':{var lF=this.$b(e,lA,lB);lD.push(lF);return}case'relational-table':{var lG=this.$h(e,lC,lB);lD.push(lG);return}case'group':{var lH=this.$f(e,lB);lD.push(lH);return}case'column':{var lI=this.$5(e,lB);lD.push(lI);return}case'display-folder':{var lJ=this.$8(e,lB);lD.push(lJ);return}case'structured-measure':{var lK=this.$i(e,lB);lD.push(lK);break}case'standard-dimension':{var lL=this.$a(e,lB);lD.push(lL);return}case'attribute-dimension':{var lM=this.$6(e,lB);lD.push(lM);return}default:{return}}},update$1:function(e,ex){if(ss.isNullOrUndefined(e)){return}if(_.isEqual(this.pm,e)){return}this.$k=null;var lA=this.$j;var lB=this.$q;var lC=this.$n;var lD=this.$p;this.$j={};this.$q={};this.$o={};this.$n={};this.rootFieldsNew={};this.rootFieldsNew['dimensions']=[];this.rootFieldsNew['measure']=[];this.rootFieldsNew['groups']=[];this.rootFieldsNew['parameters']=[];this.rootFields=[];var lE=e['dimensions'];for(var lF=0;lF<lE.length;lF++){var lG=lE[lF];this.$c(lG,lD,lC,lA,lB,this.rootFieldsNew['dimensions'])}var lH=e['measure'];for(var lI=0;lI<lH.length;lI++){var lJ=lH[lI];this.$c(lJ,lD,lC,lA,lB,this.rootFieldsNew['measure'])}var lK=e['groups'];for(var lL=0;lL<lK.length;lL++){var lM=lK[lL];this.$c(lM,lD,lC,lA,lB,this.rootFieldsNew['groups'])}var lN=e['parameters'];for(var lO=0;lO<lN.length;lO++){var lP=lN[lO];this.$c(lP,lD,lC,lA,lB,this.rootFieldsNew['parameters'])}var lQ=_.keys(this.$j);for(var lR=0;lR<lQ.length;lR++){var lS=lQ[lR];var lT=this.$j[lS];this.$j[lT.get_localName()]=lT}this.swapPresModel(e);this.raiseEvent(this.fieldsChanged,ex)},$5:function(e,ex){var lA=(ss.keyExists(ex,e.fn)?ex[e.fn].asColumn():new eq(this));lA.update(e);this.$j[e.fn]=lA;return lA},$h:function(e,ex,lA){var lB=[];for(var lC=0;lC<e.columnList.length;lC++){var lD=e.columnList[lC];lB.push(this.$5(lD,lA))}var lE=(ss.keyExists(ex,e.fn)?ex[e.fn].asRelationalTable():new ia(this));lE.update(e,lB);this.$q[e.fn]=lE;return lE},$d:function(e,ex,lA,lB){var lC=[];for(var lD=0;lD<e.namesOfFields.length;lD++){var lE=e.namesOfFields[lD];var lF=this.$j[lE];if(ss.isValue(lF)){lC.push(lF);delete lA[lE]}}for(var lG=0;lG<e.drillpathVector.length;lG++){var lH=e.drillpathVector[lG];var lI=this.$n[lH];if(ss.isValue(lI)){lC.push(lI);delete lB[lH]}}var lJ=e.name+e.folderRole;var lK=(ss.keyExists(ex,lJ)?ex[lJ].asFolder():new eI(this));lK.update(e,lC);this.$o[lJ]=lK;return lK},$e:function(e,ex,lA,lB){var lC=[];for(var lD=0;lD<e.fieldList.length;lD++){var lE=e.fieldList[lD];if(lE.type==='drill-path'){lC.push(this.$b(lE,lA,lB))}if(lE.type==='column'){lC.push(this.$5(lE,lB))}if(lE.type==='group'){lC.push(this.$f(lE,lB))}}var lF=(ss.keyExists(ex,e.fn)?ex[e.fn].asFolderNew():new eJ(this));lF.update(e,lC);this.$p[e.fn]=lF;return lF},$f:function(e,ex){var lA=(ss.keyExists(ex,e.fn)?ex[e.fn].asGroup():new fC(this));lA.update(e);this.$j[e.fn]=lA;return lA},$b:function(e,ex,lA){var lB=[];for(var lC=0;lC<e.columnList.length;lC++){var lD=e.columnList[lC];lB.push(this.$5(lD,lA))}var lE=(ss.keyExists(ex,e.fn)?ex[e.fn].asDrillPath():new dP(this));lE.update(e,lB);this.$n[e.fn]=lE;return lE},$9:function(e,ex){var lA=[];for(var lB=0;lB<e.columnList.length;lB++){var lC=e.columnList[lB];if(lC.type==='level'){lA.push(this.$g(lC,ex))}else{lA.push(this.$5(lC,ex))}}var lD=[];for(var lE=0;lE<e.userDefinedAttributeList.length;lE++){var lF=e.userDefinedAttributeList[lE];lD.push(this.$f(lF,ex))}var lG=(ss.keyExists(ex,e.fn)?ex[e.fn].asHierarchy():new cK(this));lG.update(e,lA,lD);this.$j[e.fn]=lG;return lG},$8:function(e,ex){var lA=[];for(var lB=0;lB<e.hierarchyList.length;lB++){var lC=e.hierarchyList[lB];lA.push(this.$9(lC,ex))}var lD=[];for(var lE=0;lE<e.columnList.length;lE++){var lF=e.columnList[lE];lD.push(this.$5(lF,ex))}var lG=((ss.keyExists(ex,e.fn)&&ex[e.fn].get_isCubeFolder())?ex[e.fn].asCubeFolder():new cJ(this));this.$l[e.fn]=lG;lG.update(e,lA,lD);return lG},$7:function(e,ex){var lA=[];for(var lB=0;lB<e.hierarchyList.length;lB++){var lC=e.hierarchyList[lB];lA.push(this.$9(lC,ex))}var lD=[];for(var lE=0;lE<e.displayFolderList.length;lE++){var lF=e.displayFolderList[lE];lD.push(this.$8(lF,ex))}var lG=[];for(var lH=0;lH<e.attributeDimensionList.length;lH++){var lI=e.attributeDimensionList[lH];lG.push(this.$7(lI,ex))}var lJ=(ss.keyExists(ex,e.fn)?ex[e.fn].asDimension():new cI(this));lJ.update(e,lA,lD,lG);this.$j[e.fn]=lJ;return lJ},$i:function(e,ex){var lA=[];for(var lB=0;lB<e.structuredMeasureList.length;lB++){var lC=e.structuredMeasureList[lB];lA.push(this.$i(lC,ex))}var lD=(ss.keyExists(ex,e.fn)?ex[e.fn].asStructuredMeasure():new jW(this));lD.update$1(e,lA);this.$j[e.fn]=lD;return lD},$2:function(e,ex){var lA=[];for(var lB=0;lB<e.hierarchyList.length;lB++){var lC=e.hierarchyList[lB];lA.push(this.$9(lC,ex))}return lA},$1:function(e,ex){var lA=[];for(var lB=0;lB<e.displayFolderList.length;lB++){var lC=e.displayFolderList[lB];lA.push(this.$8(lC,ex))}return lA},$3:function(e,ex){if(ss.isValue(e.hierarchy)){return(ss.keyExists(ex,e.hierarchy.fn)?ex[e.hierarchy.fn].asHierarchy():this.$9(e.hierarchy,ex))}return null},$4:function(e,ex){if(e.isTimeIntelligence){var lA=(ss.keyExists(ex,e.column.fn)?ex[e.column.fn].asColumn():this.$5(e.column,ex));lA.set_isTimeIntelligenceColumn(true);return lA}return null},$a:function(e,ex){var lA=this.$2(e,ex);var lB=this.$1(e,ex);var lC=this.$3(e,ex);var lD=this.$4(e,ex);var lE=[];for(var lF=0;lF<e.attributeAttributeDimensionList.length;lF++){var lG=e.attributeAttributeDimensionList[lF];lE.push(this.$6(lG,ex))}var lH=(ss.keyExists(ex,e.fn)?ex[e.fn].asCubeStandardDimension():new cL(this));lH.update$1(e,lA,lB,lE,lC,lD);this.$j[e.fn]=lH;return lH},$6:function(e,ex){var lA=this.$2(e,ex);var lB=this.$1(e,ex);var lC=this.$3(e,ex);var lD=this.$4(e,ex);var lE=(ss.keyExists(ex,e.fn)?ex[e.fn].asCubeAttributeDimension():new cG(this));lE.update$1(e,lA,lB,lC,lD);this.$j[e.fn]=lE;return lE},$g:function(e,ex){var lA=[];for(var lB=0;lB<e.attributeAttributeDimensionList.length;lB++){var lC=e.attributeAttributeDimensionList[lB];lA.push(this.$6(lC,ex))}var lD=(ss.keyExists(ex,e.fn)?ex[e.fn].asLevel():new gJ(this));lD.update$1(e,lA);this.$j[e.fn]=lD;return lD}},gV);ss.initEnum(eu,a,{localName:'localName',globalName:'globalName',qualifiedLocalName:'qualifiedLocalName',description:'description',userCaption:'userCaption',displayName:'displayName'},true);ss.initClass(ev,a,{clear:function(){ss.clearKeys(this.cl);this.$1=0},add:function(e,ex){var lA=this.$0[this.$1];delete this.cl[lA];this.$0[this.$1]=e;this.cl[e]=ex;this.$1=(this.$1+1)%this.$2}});ss.initClass(ew,a,{openDownload:function(e,ex){if(ss.isValue(ex.popup)){this.$1(e,ex)}else{this.$0(e,ex)}},$0:function(e,ex){var lA=((e.indexOf(String.fromCharCode(63))===-1)?'?':'&');e+=lA+'download=true';var lB='_blank';var lC=e;if(ss.isNullOrUndefined(ex.noping)){var lD=ss.mkdel(this,function(){this.$2.showFileDownloadDialog(ex.title,ex.message,lC,lB)});var lE=((e.indexOf(String.fromCharCode(63))===-1)?'?':'&');e+=lE+'nodata=true';var lF=this.$3.$0(null,lD,null,'immediately');var lG={};lG.headers=ss.mkdict(['Accept','text/plain']);lG.dataType='text';lG.type='GET';lG.url=e;this.$3.$c(lG,lF)}else{this.$2.showFileDownloadDialog(ex.title,ex.message,lC,lB)}},$1:function(e,ex){var lA=ex.popup;var lB=window.open('about:blank',lA);window.setTimeout(ss.mkdel(this,function(){var lC=new tab.WindowHelper(lB);if(ss.isValue(lB)&&!lB.closed&&lC.get_innerWidth()!==0&&lC.get_innerHeight()!==0){lB.location.href=e}else{if(ss.isValue(lB)){lB.close()}ex.popup=null;this.openDownload(e,ex)}}),500)}});ss.initClass(ey,a,{$1:function(){return this.$1$1},$2:function(e){this.$1$1=e},$0:function(){return tab.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry')},logFileUploadRequestEvent:function(e,ex,lA){if(this.$0()){this.$2(ke.generateUUID());hf.logEvent('Authoring_DataTab_FileUpload_RequestEvent',['FileUploadRequestID',this.$1(),'NumFiles',e,'Origin',ex.toString(),'Reason',lA.toString()])}},logFileUploadStartEvent:function(e,ex,lA){if(this.$0()&&!ss.isNullOrEmptyString(this.$1())){hf.logEvent('Authoring_DataTab_FileUpload_StartEvent',['FileUploadRequestID',this.$1(),'UploadID',e,'FileType',ex,'Size',lA])}},logFileUploadSuccessEvent:function(e,ex){if(this.$0()&&!ss.isNullOrEmptyString(this.$1())){hf.logEvent('Authoring_DataTab_FileUpload_SuccessEvent',['FileUploadRequestID',this.$1(),'UploadID',e,'UploadTime',ex])}},logFileUploadFailureEvent:function(e,ex){if(this.$0()&&!ss.isNullOrEmptyString(this.$1())){hf.logEvent('Authoring_DataTab_FileUpload_FailureEvent',['FileUploadRequestID',this.$1(),'UploadID',e,'ErrorType',ex.toString()])}},logFileUploadRetryEvent:function(e){if(this.$0()&&!ss.isNullOrEmptyString(this.$1())){hf.logEvent('Authoring_DataTab_FileUpload_RetryEvent',['FileUploadRequestID',this.$1(),'Retry',e.toString()])}},logFileUploadReplaceEvent:function(e){if(this.$0()&&!ss.isNullOrEmptyString(this.$1())){hf.logEvent('Authoring_DataTab_FileUpload_ReplaceEvent',['FileUploadRequestID',this.$1(),'AddReplace',e.toString()])}},logFileUploadDSCreationEvent:function(e,ex,lA){if(this.$0()&&!ss.isNullOrEmptyString(this.$1())){hf.logEvent('Authoring_DataTab_FileUpload_DSCreationEvent',['FileUploadRequestID',this.$1(),'Success',e,'Fail',ex,'DSCreationTime',lA])}}});ss.initEnum(ez,a,{cancel:'cancel',replace:'replace',add:'add'},true);ss.initEnum(eA,a,{unsupported:'unsupported',type_mismatch:'type_mismatch',too_big:'too_big',empty:'empty',exists:'exists',multi_file_rejected:'multi_file_rejected',locked:'locked',upload_error:'upload_error',ds_error:'ds_error',upload_canceled:'upload_canceled'},true);ss.initEnum(eB,a,{file_drop_joinarea:'file_drop_joinarea',file_drop_tablearea:'file_drop_tablearea',file_drop_connectionpill:'file_drop_connectionpill',file_drop_dialog:'file_drop_dialog',file_browse_dialog:'file_browse_dialog'},true);ss.initEnum(eC,a,{create_ds:'create_ds',edit_connection:'edit_connection',create_connection:'create_connection'},true);ss.initEnum(eD,a,{cancel:'cancel',skip:'skip',retry:'retry'},true);ss.initClass(eE,a,{});ss.initClass(eF,a,{add_invalidateZone:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_invalidateZone:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_flipboardPresModel:function(){return this.pm},get_storyPointModel:function(){return this.$1.get_currentStoryPoint()},get_dashboardModel:function(){return this.get_storyPointModel().get_dashboardModel()},get_zoneId:function(){return this.parent.get_zone().get_zoneId()},get_currentStoryPointId:function(){return this.get_flipboardPresModel().activeStoryPointId},get_isEmpty:function(){return ss.isNullOrEmptyString(this.get_storyPointModel().get_currentSheet())},invalidated:function(e){this.raiseEvent(this.$2$1,e)},update:function(e,ex){if(ss.isValue(e.activeStoryPointId)){var lA=e.storyPoints[e.activeStoryPointId.toString()];this.$1.update(lA,ex)}this.swapPresModel(e)},getMutableCopyOfPresModel:function(){return this.getMutableCopyOfPresModelInternal(true)}},gV);ss.initClass(eG,a,{add_newFlipboardNav:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newFlipboardNav:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_pointWasCaptured:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_pointWasCaptured:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_navArrowVisibilityChanged:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_navArrowVisibilityChanged:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},get_flipboardNavPresModel:function(){return this.pm},get_currentPointIndex:function(){return this.get_flipboardNavPresModel().currentStorypointIndex},get_storyPoints:function(){return this.get_flipboardNavPresModel().storypointNavItems},get_zone:function(){return this.parent.get_zone()},get_navType:function(){return this.get_flipboardNavPresModel().flipboardNavStyle.flipboardNavType},get_arrowVisibility:function(){return this.get_flipboardNavPresModel().navArrowsVisible},get_width:function(){return this.get_flipboardNavPresModel().selectedStoryPointStyle.w},get_height:function(){return this.get_flipboardNavPresModel().selectedStoryPointStyle.h},get_isStoryEmpty:function(){return this.get_flipboardNavPresModel().isStoryEmpty},getMutableCopyOfPresModel:function(){return this.getMutableCopyOfPresModelInternal(true)},update:function(e,ex){if(ss.isValue(e)){if(ss.isValue(e.selectedStoryPointStyle)){eM.notifyFontsFromTextStylePresModel(e.selectedStoryPointStyle.textStyle)}if(ss.isValue(e.unselectedStoryPointStyle)){eM.notifyFontsFromTextStylePresModel(e.unselectedStoryPointStyle.textStyle)}}var lA=ss.isValue(this.get_flipboardNavPresModel())&&e.navArrowsVisible!==this.get_flipboardNavPresModel().navArrowsVisible;this.$1(e);this.simpleSwapToUpdate(e,this.$2$1,ex);this.$2(ex);if(lA){this.raiseEvent(this.$2$3,ex)}},$1:function(e){if(ss.isNullOrUndefined(this.get_flipboardNavPresModel())){return}ss.clear(this.$3);if(e.storypointNavItems.length!==this.get_flipboardNavPresModel().storypointNavItems.length){return}var ex=this.get_flipboardNavPresModel().currentStorypointIndex;var lA=e.currentStorypointIndex;var lB=this.get_flipboardNavPresModel().storypointNavItems[ex];var lC=e.storypointNavItems[lA];if(ex!==lA&&lB.storyPointId===lC.storyPointId&&!lB.isCaptured&&lC.isCaptured){this.$3.push(lC.storyPointId)}var lD=_.filter(e.storypointNavItems,function(lI,lJ){return lI.isCaptured===true&&lJ!==e.currentStorypointIndex});for(var lE=0;lE<lD.length;lE++){var lF=lD[lE];var lG={$:lF.storyPointId};var lH=_.find(this.get_flipboardNavPresModel().storypointNavItems,ss.mkdel({currentId:lG},function(lI){return lI.storyPointId===this.currentId.$}));if(ss.isNullOrUndefined(lH)){continue}if(!lH.isCaptured){this.$3.push(lG.$)}}},$2:function(e){for(var ex=0;ex<this.$3.length;ex++){var lA=this.$3[ex];this.raiseEvent$1(ss.Int32).call(this,this.$2$2,lA,e)}}},gV);ss.initClass(eH,a,{});ss.initClass(eI,a,{get_fields:function(){return this.$1},get_folderRole:function(){return this.pm.folderRole},get_instanceType:function(){return'folder'},get_canHaveChildren:function(){return true},get_isUnsortedContainer:function(){return true},update:function(e,ex){this.swapAndCopyPresModel(e);this.$1=ex}},es);ss.initClass(eJ,a,{get_fields:function(){return this.$1},get_folderRole:function(){return this.pm.folderRole},get_instanceType:function(){return'folderNew'},get_canHaveChildren:function(){return true},get_isUnsortedContainer:function(){return true},update:function(e,ex){this.swapAndCopyPresModel(e);this.$1=ex}},es);ss.initClass(eL,a,{});ss.initClass(eM,a,{});ss.initClass(eR,a,{add_updated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_updated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},$1:function(){return this.pm},get_typeOfFormatItem:function(){return this.$1().typeOfFormatItem},get_widgetIdentifier:function(){return this.$1().widgetUniqueId},get_isFormatContainer:function(){return this.get_typeOfFormatItem()==='formatContainer'},get_isFormatPane:function(){return this.get_isFormatContainer()&&this.asFormatContainer().get_typeOfFormatContainer()==='formatPane'},get_isFormatSection:function(){return this.get_isFormatContainer()&&this.asFormatContainer().get_typeOfFormatContainer()==='formatSection'},get_isCollapsibleSection:function(){return this.get_isFormatContainer()&&this.asFormatContainer().get_typeOfFormatContainer()==='collapsibleSection'},get_isCompositeContainer:function(){return this.get_isFormatContainer()&&this.asFormatContainer().get_typeOfFormatContainer()==='compositeContainer'},get_isUnitContainer:function(){return this.get_isFormatContainer()&&this.asFormatContainer().get_typeOfFormatContainer()==='unitContainer'},get_isTabGroup:function(){return this.get_isFormatContainer()&&this.asFormatContainer().get_typeOfFormatContainer()==='tabGroup'},get_isTab:function(){return this.get_isFormatContainer()&&this.asFormatContainer().get_typeOfFormatContainer()==='tab'},get_isFormatControl:function(){return this.get_typeOfFormatItem()==='formatControl'},get_isTextControl:function(){return this.get_isFormatControl()&&this.asFormatControl().get_typeOfFormatControl()==='text-control'},raiseUpdated:function(){if(!ss.staticEquals(this.$2$1,null)&&ss.isValue(this.$1())){this.$2$1()}},asFormatContainer:function(){return ss.safeCast(this,eO)},asFormatControl:function(){return ss.safeCast(this,eP)},update:function(e,ex){this.simpleSwapToUpdate(e,this.$2$1,ex)}},gV);ss.initClass(eO,a,{get_typeOfFormatContainer:function(){return this.pm.typeOfFormatContainer},get_items:function(){return this.$5},get_name:function(){if(this.get_isFormatSection()){return this.pm.name}else if(this.get_isFormatPane()){return this.pm.name}else{return null}},get_pickerType:function(){if(this.get_isCompositeContainer()){return this.pm.pickerType}else if(this.get_isTabGroup()){return this.pm.pickerType}else{return'none'}},get_previewProperties:function(){return this.$3$1},set_previewProperties:function(e){this.$3$1=e},get_isCollapsedByDefault:function(){if(this.get_isCollapsibleSection()){return this.pm.collapsed}else{return false}},get_label:function(){if(this.get_isUnitContainer()){return this.pm.label}else if(this.get_isTab()){return this.pm.label}else{return null}},get_isChanged:function(){if(this.get_isUnitContainer()){return this.pm.isChanged}else{return false}},get_clearCommand:function(){if(this.get_isUnitContainer()){return this.pm.clearFormatCommandModel}else{return null}},get_isVisible:function(){return this.$6},set_isVisible:function(e){if(this.$6!==e){this.$6=e;this.raiseUpdated()}},get_subsections:function(){var e=[];var ex=this.asFormatContainer().get_items();for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];e.push(lB)}return e},$2:function(e){this.set_previewProperties({});for(var ex=0;ex<e.length;ex++){var lA=e[ex];if(!lA.get_isFormatControl()){continue}var lB=lA.asFormatControl();var lC=lB.get_widgetKey();switch(lC){case'fontSize':case'lineSize':{this.get_previewProperties()[lC]=lB.get_numericValue();break}case'fontFamily':case'lineVisibility':case'linePattern':{this.get_previewProperties()[lC]=lB.get_textValue();break}case'colorSwatch':{this.get_previewProperties()[lC]=lB.get_colorValue();break}case'bold':case'italics':case'underline':{this.get_previewProperties()[lC]=lB.get_toggleValue();break}default:{break}}}},updatePreviewForTab:function(e){if(e>=0&&this.get_items().length>=e+1&&this.get_items()[e].get_isTab()){this.$2(this.get_items()[e].asFormatContainer().get_items())}},$3:function(){return this.pm.formatItemList.filter(ss.mkdel(this,function(e){return!ss.keyExists(this.$4,e.widgetUniqueId)}))},update:function(e,ex){this.simpleSwapToUpdate(e,ss.mkdel(this,function(){this.raiseUpdated()}),ex);var lA=this.$3();if(ss.isNullOrUndefined(this.$5)){this.$5=[];for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];this.$5.push(eR.createModel(this,lC,ex))}}else if(ss.isValue(lA)){for(var lD=0;lD<lA.length;lD++){var lE=lA[lD];this.$5[lD].update(lE,ex)}}if(this.get_isTabGroup()){this.updatePreviewForTab(0)}else{this.$2(this.get_items())}}},eR);ss.initClass(eP,a,{get_typeOfFormatControl:function(){return this.pm.typeOfFormatControl},get_commandRedirectType:function(){return this.pm.commandRedirectType},get_formatCommand:function(){return this.pm.formatCommandModel},get_simpleCommand:function(){return ch.deserialize(jH.create(this.get_formatCommand()).get_simpleCommand())},get_widgetKey:function(){return this.pm.formatWidgetKey},get_isEnabled:function(){return this.pm.isEnabled},get_textValue:function(){return this.pm.valueString},get_numericValue:function(){return this.pm.valueInt},get_colorValue:function(){return this.pm.color},get_canBeAuto:function(){return this.pm.canBeAuto},get_canBeNone:function(){return this.pm.canBeNone},get_canMatchMarkColor:function(){return this.pm.canMatchMarkColor},get_hasOpacity:function(){return this.pm.hasOpacity},get_colorSwatchType:function(){return this.pm.formatColorSwatchType},get_selectorValue:function(){return this.pm.valueString},get_toggleValue:function(){return this.pm.bool}},eR);ss.initClass(eQ,a,{});ss.initClass(eS,a,{});ss.initClass(eT,a,{});ss.initClass(eU,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'get-alert-measures-from-selection'},this.c))}},ss.makeGenericType(bd,[Object,eV]));ss.initClass(eV,a,{});ss.initClass(eW,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'get-button-config-dialog'},this.c))}},ss.makeGenericType(bd,[Object,eX]));ss.initClass(eX,a,{});ss.initClass(eY,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'get-dashboard-drag-drop'},this.c))}},ss.makeGenericType(bd,[Object,eZ]));ss.initClass(eZ,a,{});ss.initClass(fa,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'get-dashboard-sizing'},this.c))}},ss.makeGenericType(bd,[Object,fb]));ss.initClass(fb,a,{});ss.initClass(fc,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'get-data-alert-info-map'},this.c))}},ss.makeGenericType(bd,[Object,fd]));ss.initClass(fd,a,{});ss.initClass(fe,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'get-datasource-data-pres-model'},this.c))}},ss.makeGenericType(bd,[Object,ff]));ss.initClass(ff,a,{});ss.initClass(fg,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'get-drop-field-aggregation-options'},this.c))}},ss.makeGenericType(bd,[Object,fh]));ss.initClass(fh,a,{});ss.initClass(fi,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'get-dsparams-from-pres-model'},this.c))}},ss.makeGenericType(bd,[Object,fj]));ss.initClass(fj,a,{});ss.initClass(fk,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'get-file-connection-file-list'},this.c))}},ss.makeGenericType(bd,[Object,fl]));ss.initClass(fl,a,{});ss.initClass(fm,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'get-has-unused-files'},this.c))}},ss.makeGenericType(bd,[Object,fn]));ss.initClass(fn,a,{});ss.initClass(fo,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'get-runtime-data-model'},this.c))}},ss.makeGenericType(bd,[Object,fp]));ss.initClass(fp,a,{});ss.initClass(fq,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'get-tabbed-authentication-pres-model'},this.c))}},ss.makeGenericType(bd,[Object,fr]));ss.initClass(fr,a,{});ss.initClass(fs,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'get-thumbnail'},this.c))}},ss.makeGenericType(bd,[Object,ft]));ss.initClass(ft,a,{hasThumbnailImage:function(){return ss.keyExists(this.$$c,'image')}});ss.initClass(fu,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'get-url-substitution-keywords'},this.c))}},ss.makeGenericType(bd,[Object,fv]));ss.initClass(fv,a,{});ss.initClass(fw,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'get-web-categorical-color-dialog'},this.c))}},ss.makeGenericType(bd,[Object,fx]));ss.initClass(fx,a,{});ss.initClass(fy,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'get-web-quantitative-color-dialog'},this.c))}},ss.makeGenericType(bd,[Object,fz]));ss.initClass(fz,a,{});ss.initClass(fB,a,{canExtractFont:function(e){return e.type==='draw-group'&&!ss.isNullOrUndefined(e.drawItems)},extractFontFromPresModel:function(e){if(!this.canExtractFont(e)){return null}var ex=e.drawItems;return this.$0(ex)},$0:function(e){var ex={};for(var lA=0;lA<e.length;lA++){var lB=e[lA];for(var lC=0;lC<fB.$0.length;lC++){var lD=fB.$0[lC];if(lD.canExtractFont(lB)){var lE=lD.extractFontFromPresModel(lB);if(ss.isValue(lE)){for(var lF=0;lF<lE.length;lF++){var lG=lE[lF];ex[lG.get_hash()]=lG}}break}}}return _.values(ex)}},null,[fS]);ss.initClass(fC,a,{get_instanceType:function(){return'group'},get_isCombinedField:function(){return this.pm.isCombinedField||false}},eq);ss.initClass(fD,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'has-user-specific-active-sheet'},this.c))}},ss.makeGenericType(bd,[Object,fE]));ss.initClass(fE,a,{});ss.initClass(fF,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'highlight-items-by-pattern-match'},this.c))}},ss.makeGenericType(bd,[Object,fG]));ss.initClass(fG,a,{hasMatchedItemSet:function(){return ss.keyExists(this.$$c,'dataHighlighterItemSet')}});ss.initInterface(fW,a,{get_tailIndex:null,get_recoveryStates:null,add:null,trackUndo:null,trackRedo:null,adopt:null});ss.initClass(fH,a,{get_recoveryStates:function(){if(ss.isValue(this.$1)){var e=[this.$1];for(var ex=0;ex<this.$3.length;ex++){var lA=this.$3[ex];e.push(lA)}return e}else{return this.$3}},get_tailIndex:function(){return this.$3.length-1},$0:function(){this.$3=[];this.$2=[]},add:function(e,ex){var lA=this.$3.length;if(ex!==lA+1){if(lA===0&&ex>0){this.$3=new Array(ex-1)}else{var lB=ss.formatString('Server has many more history items ({0}) than it should. Client history has {1} items.',ex,lA);var lC=new ss.Exception(lB);tab.ErrorTrace.report(lC)}}this.$3.push(e);this.$2=[];return lA},trackUndo:function(){if(this.$3.length===0){throw new ss.ArgumentOutOfRangeException}this.$2.push(this.$3.pop());return this.get_tailIndex()},trackRedo:function(){if(this.$2.length===0){throw new ss.ArgumentOutOfRangeException}this.$3.push(this.$2.pop());return this.get_tailIndex()},adopt:function(e){if(ss.isNullOrUndefined(e)){return}this.$0();for(var ex=0;ex<e.length;ex++){var lA=e[ex];this.$3.push(lA)}}},null,[fW]);ss.initClass(fI,a,{});ss.initClass(fJ,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'hit-test-scene'},this.c))}},ss.makeGenericType(bd,[Object,fK]));ss.initClass(fK,a,{});ss.initEnum(fL,a,{escape:0,noEscape:1});ss.initInterface(fP,a,{add_sliderFractionUpdated:null,remove_sliderFractionUpdated:null,get_currentFraction:null,setCurrentFraction:null});ss.initInterface(fQ,a,{returnDataSourceDataModel:null});ss.initInterface(fT,a,{get_sheetScrollPositions:null});ss.initInterface(fU,a,{triggerExportPdfUI:null});ss.initClass(fY,a,{});ss.initClass(fZ,a,{add_newImageZone:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newImageZone:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_zoneModel:function(){return this.$1},update:function(e,ex){this.simpleSwapToUpdate(e,this.$2$1,ex)}},gV);ss.initClass(gb,a,{addFontList:function(e){if(ss.isNullOrUndefined(this.$0)){this.$0=ss.arrayClone(e);return}var ex=_.intersection(this.$0,e);this.$0=ex},toFontFamilyProvider:function(){if(ss.isNullOrUndefined(this.$0)){return new jI.$ctor2([])}return new jI.$ctor2(Array.prototype.slice.call(this.$0))}});ss.initClass(gc,a,{});ss.initClass(gg,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'is-web-zone-url-valid'},this.c))}},ss.makeGenericType(bd,[Object,gh]));ss.initClass(gh,a,{hasValidationMessage:function(){return ss.keyExists(this.$$c,'validationMessage')}});ss.initInterface(gi,a,{handleCommandStarted:null,handleCommandCompleted:null});ss.initClass(gj,a,{andMarkAsRawJavaScriptModule:function(){this.moduleBeingConfigured.isRawJavaScriptModule=true;return this},andMarkAsAlreadyLoadedInGlobalNamespace:function(){this.moduleBeingConfigured.loadingMethod='alreadyLoaded';return this},andShowLoadingIndicator:function(){this.moduleBeingConfigured.loadingMethod='synchronous';return this},andLoadOnDemandIf:function(e){this.moduleBeingConfigured.loadingMethod=(e?'asynchronous':'alreadyLoaded');return this},andExportResultAs:function(e){if(ss.isNullOrEmptyString(e)){throw new ss.ArgumentNullException('globalName')}this.moduleBeingConfigured.shouldExportResult=true;this.moduleBeingConfigured.exportResultName=e;return this},andWaitUntilModuleReady:function(e){if(ss.staticEquals(e,null)){throw new ss.ArgumentNullException('waitUntilModuleReadyFunc')}this.moduleBeingConfigured.waitUntilModuleReadyFunc=e;return this}});ss.initClass(gk,a,{get_dependencies:function(){return this.$0},get_stylesheetDependencies:function(){return this.$1},get_hasDependencies:function(){return this.$0.length>0},get_hasDependenciesOnStylesheets:function(){return this.$1.length>0},addDependency:function(e){tab.Param.verifyValue(e,'dependency');this.$0.push(e)},addDependencyOnCssFile:function(e){tab.Param.verifyString(e,'cssFile');this.$1.push(e)}});ss.initClass(gm,a,{});ss.initClass(gn,a,{});ss.initClass(go,a,{generateTelemetryPairs:function(){return['ShortcutName',this.shortcutName,'Combo',this.comboName,'IsKnownShortcut',this.isKnownShortcut,'WasBlockedByDialog',this.wasBlockedByDialog,'WasBlockedByGlass',this.wasBlockedByGlass,'WasBlockedByLoading',this.wasBlockedByLoading,'WasBlockedByTextInput',this.wasBlockedByTextInput,'CurrentTargetId',this.event.currentTarget.id,'CurrentTargetClasses',this.event.currentTarget.className,'CurrentTargetName',this.event.currentTarget.nodeName,'NumTimesExecuted',this.numExecutions,'IsGlobalShortcut',this.isGlobalShortcut,'ElapsedTimeInMs',((ss.isNullOrUndefined(this.$1)||ss.isNullOrUndefined(this.$3))?0:ss.Nullable$1.sub(this.$1,this.$3))]},shouldAllowLogging:function(){var e=(this.event.ctrlKey||this.event.metaKey)&&this.event.which>=32&&this.event.which<=126;return!tab.jQueryEventExtensions.isOnlyMetaKeyPressed(this.event)&&(this.numExecutions>0||e)},createTriggerKeyName:function(){if(tab.jQueryEventExtensions.isOnlyMetaKeyPressed(this.event)){return''}if(gp.hasKeyCode$1(this.event.which)){return gp.findName(this.event.which)}return String.fromCharCode(this.event.which)},$0:function(){if(ss.isNullOrUndefined(this.$2)||this.isKnownShortcut!==true){this.shortcutName='UnregisteredShortcut'}else{this.shortcutName=(ss.isNullOrUndefined(this.$2)?'':ss.getTypeName(ss.getInstanceType(this.$2)))}var e='ctrl+';var ex='command+';var lA='alt+';var lB='win+';var lC='shift+';this.comboName=(this.event.ctrlKey?e:'')+(gs.isCommandPressed(this.event)?ex:'')+(this.event.altKey?lA:'')+(gs.isWindowsPressed(this.event)?lB:'')+(this.event.shiftKey?lC:'')+this.createTriggerKeyName()}});go.$d.prototype=go.prototype;ss.initClass(gp,a,{});ss.initClass(gq,a,{get_modifiers:function(){return this.$1$1},set_modifiers:function(e){this.$1$1=e},get_triggerKey:function(){return this.$1$2},set_triggerKey:function(e){this.$1$2=e},get_hintText:function(){return(tsConfig.is_mobile?null:(this.get_modifiers().get_hintText()+this.$0()))},isCurrentLocaleAllowed:function(){return!this.isLocaleSpecified()||ss.isValue(tsConfig.locale)&&_.any(this.supportedLocales,function(e){return ss.referenceEquals(tsConfig.locale.toString(),e)})},isLocaleSpecified:function(){return!_.isEmpty(this.supportedLocales)},hasValidCombo:function(e){var ex=e.which;return ex===this.get_triggerKey()&&this.get_modifiers().hasValidModifiers(e)&&this.isCurrentLocaleAllowed()},isComboSupported:function(e){return(e||this.isCurrentLocaleAllowed())&&this.$1()},$0:function(){return(gp.hasName$1(this.get_triggerKey())?gp.findName(this.get_triggerKey()):String.fromCharCode(this.get_triggerKey()))},$1:function(){var e=this.get_modifiers().macControl||this.get_modifiers().command;var ex=this.get_modifiers().winControl||this.get_modifiers().windows||this.get_modifiers().nonMacControl;return!e&&!ex||e&&BrowserSupport.BrowserSupport.IsMac()||ex&&!BrowserSupport.BrowserSupport.IsMac()},toString:function(){return this.get_modifiers()+this.$0()+this.supportedLocales}});gq.$ctor3.prototype=gq.$ctor4.prototype=gq.$ctor2.prototype=gq.$ctor1.prototype=gq.prototype;ss.initClass(gr,a,{get_hasCombos:function(){return this.$2().length>0},get_hintText:function(){return((this.$2().length===0)?'':this.$2()[0].get_hintText())},$2:function(){return this.$1$1},$3:function(e){this.$1$1=e},removeUnsupportedCombos:function(e){this.$3(_.filter(this.$2(),function(ex){return ex.isComboSupported(e)}));return this},$0:function(){var e=_.any(this.$2(),function(ex){return ex.isLocaleSpecified()});if(!e){return ss.isValue(tsConfig.locale)&&tsConfig.locale.toString()==='en_US'}return _.any(this.$2(),function(ex){return ex.isCurrentLocaleAllowed()})},$1:function(){var e=[];for(var ex=0;ex<this.length;ex++){var lA=this[ex];for(var lB=0;lB<lA.supportedLocales.length;lB++){var lC=lA.supportedLocales[lB];e.push(lC)}}return e},hasValidCombo:function(e){return _.any(this.$2(),function(ex){return ex.hasValidCombo(e)})},getEnumerator:function(){return this.$2().getEnumerator()},toString:function(){return this.$2().toString()}},null,[ss.IEnumerable,ss.IEnumerable]);ss.initClass(gs,a,{get_hintText:function(){var e=(BrowserSupport.BrowserSupport.IsMac()?tab.Strings.ModifierKeyWithDelimiterHintTextMacControl:tab.Strings.ModifierKeyWithDelimiterHintTextControl);var ex=(BrowserSupport.BrowserSupport.IsMac()?tab.Strings.ModifierKeyWithDelimiterHintTextMacOption:tab.Strings.ModifierKeyWithDelimiterHintTextAlt);var lA=(BrowserSupport.BrowserSupport.IsMac()?tab.Strings.ModifierKeyWithDelimiterHintTextMacShift:tab.Strings.ModifierKeyWithDelimiterHintTextShift);var lB=tab.Strings.ModifierKeyWithDelimiterHintTextWindows;var lC=tab.Strings.ModifierKeyWithDelimiterHintTextCommand;return(this.control?e:'')+(this.alt?ex:'')+(this.shift?lA:'')+(this.windows?lB:'')+(this.command?lC:'')},hasValidModifiers:function(e){var ex=true;if(this.macControl){ex=!!(ex&gs.isMacControlPressed(e))}if(this.nonMacControl){ex=!!(ex&gs.isNonMacControlPressed(e))}if(this.winControl){ex=!!(ex&gs.isWinControlPressed(e))}return this.alt===e.altKey&&this.command===gs.isCommandPressed(e)&&this.control===e.ctrlKey&&this.shift===e.shiftKey&&this.windows===gs.isWindowsPressed(e)&&ex&&this.$0(e)},$1:function(){if(BrowserSupport.BrowserSupport.IsMac()){this.command=true}else{this.control=true}if(BrowserSupport.BrowserSupport.IsWindows()){this.winControl=true}},$0:function(e){return!this.controlOrCommand||gs.isControlOrCommandPressed(e)},toString:function(){return this.alt.toString()+this.command+this.control+this.controlOrCommand+this.macControl+this.shift+this.winControl+this.windows+this.nonMacControl}});ss.initClass(gt,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'launch-custom-sql-dialog'},this.c))}},ss.makeGenericType(bd,[Object,gu]));ss.initClass(gu,a,{});ss.initClass(gv,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'launch-permissions-prompt'},this.c))}},ss.makeGenericType(bd,[Object,gw]));ss.initClass(gw,a,{});ss.initClass(gx,a,{add_newLayerEncoding:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newLayerEncoding:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_id:function(){return this.pm.paneSpec},get_name:function(){return this.pm.name},get_isTableCalc:function(){return this.pm.isTableCalc},get_paneDescriptorKeys:function(){return this.pm.paneDescriptorKeys},get_encodings:function(){return _.filter(this.pm.encodingUiItems,function(e){return e.isVisible&&e.isEnabled})},get_textEncodingDropdown:function(){return this.getDropdownPresModel('text-encoding')},get_colorEncodingDropdown:function(){return this.getDropdownPresModel('color-encoding')},get_sortEncodingOptions:function(){return this.getDropdownPresModel('sort-encoding')},get_currentPrimitiveType:function(){var e=_.find(this.get_primitiveTypes(),function(ex){return ex.isSelected});return e},get_primitiveTypes:function(){return _.filter(this.pm.primitiveTypeUiItems,function(e){return e.isVisible&&e.isEnabled})},get_heatmapSettingsPresModel:function(){return this.pm.heatmapSettings},get_markSizeModel:function(){return this.$1},update:function(e,ex){this.simpleSwapToUpdate(e,this.$2$1,ex);if(ss.isNullOrUndefined(this.$1)){this.$1=new gU(this)}this.$1.update(this.getDropdownPresModel('size-encoding'),ex)},equals$1:function(e){return this.get_id()===e.paneSpec},getDropdownPresModel:function(e){var ex=_.filter(this.pm.encodingUiItems,function(lA){return lA.isVisible&&lA.isEnabled&&lA.encodingType===e});if(ss.isNullOrUndefined(ex)||ex.length!==1){return null}return ex[0].marksCardDropdownItem}},gV);ss.initClass(gy,a,{formatDashboardTempfileReference:function(e,ex,lA){return this.formatLayoutMethod(tsConfig.layoutid,'tempfile')+'/?key='+e+(ex?'&keepfile=yes':'')+(lA?'&attachment=yes':'')},saveSharedView:function(e,ex,lA){var lB=function(lG,lH,lI){lG['button']=e;if(ss.isValue(lG['guid'])){lv.guid=lG['guid']}};var lC=ss.mkdel(this,function(lG,lH,lI){lv.guid=null;if(lG.status===410||lG.status===403){this.defaultSessionErrorHandler.handleSessionExpiration(false)}else if(lG.status===401){this.handleAuthenticationFailure()}else{var lJ=new Object;lJ['button']=e;lA(lJ)}});var lD=this.$0(null,lB,lC,'none');var lE={};lE['sheet_id']=lv.get_currentTabName();lE['parent_id']=lv.parentID;lE['primary_content_url']=ex;lE['share_button']=e;var lF=this.basicPostOpts(this.$5('save_shared_view'),lE);lF.async=false;lF.timeout=2000;this.$c(lF,lD)},saveAndOpenMetricsView:function(){window.open(this.$5('save_metrics_view'),'metrics','scrollbars,resizable')},metricsViewDownloadUrl:function(){return this.$5('download_metrics_view')},getAutocompleteInfo:function(e,ex,lA){var lB=function(lE,lF,lG){ex(lE['new_value'])};var lC=this.basicGetOpts(this.formatLayoutMethod(tsConfig.layoutid,'getautocomplete'));var lD=ss.mkdict(['fieldname',lA,'input_string',e]);lC.data=lD;lC.success=lB;this.$c(lC)},performPostLoadOperations:function(e,ex){var lA=function(lF,lG,lH){if(ss.isValue(ex)){ex(lF)}};var lB=ss.mkdel(this,function(lF,lG,lH){this.$7(lH,lF,true,null)});var lC=this.$0(null,lA,lB,'none');var lD=ss.mkdict(['sheet_id',e]);var lE={};lE.data=lD;lE.async=true;lE.type='GET';lE.headers=ss.mkdict(['Accept','text/javascript']);lE.dataType='json';lE.url=this.formatLayoutMethod(tsConfig.layoutid,'performPostLoadOperations');this.$c(lE,lC)}},be);ss.initClass(gz,a,{get_children:function(){return this.$1},get_itemKey:function(){return this.$0.name+this.$0.zoneId},get_isFloating:function(){return this.$0.isFloating},get_zoneType:function(){return this.$0.zoneType},get_isHorizontal:function(){return this.$0.isHorizontal},get_name:function(){return this.$0.name},get_zoneID:function(){return this.$0.zoneId},appendChildren:function(e){this.$1.push(e)}});ss.initClass(gA,a,{add_layoutTreeUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_layoutTreeUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},update:function(e,ex){if(!_.isEqual(this.pm,e)){this.$3();this.$1(e);this.$2();this.simpleSwapToUpdate(e,this.$2$1,ex)}},saveExpandedState:function(e,ex){this.$4[e]=ex},expandTreeToCurrent:function(e){if(ss.isNullOrUndefined(this.$5[e])){return}var ex=this.$5[e].parent;while(ss.isValue(ex)){var lA=ex.get_zoneID();this.$4[lA]=true;ex=this.$5[lA].parent}},isItemExpanded:function(e){return ss.keyExists(this.$4,e)&&this.$4[e]},getItemFromIndex:function(e){return this.$5[e]},$1:function(e){var ex=e.zoneCommonListItems;this.$5=gA.$0(ex);if(ss.isValue(ex)){for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];var lC=lB.parentZoneId;var lD=this.$5[lB.zoneId];var lE=lC===0;if(lE){this.rootNodes.push(lD)}else{var lF=this.$5[lC];if(!ss.isNullOrUndefined(lF)){lF.appendChildren(lD);lD.parent=lF}}}}},$2:function(){if(ss.getKeyCount(this.$5)===0){this.$4={}}else{var e=new ss.ObjectEnumerator(this.$4);try{while(e.moveNext()){var ex=e.current();if(!ss.keyExists(this.$5,ex.key)){delete this.$4[ex.key]}}}finally{e.dispose()}}},$3:function(){this.rootNodes=[]}},gV);ss.initClass(gB,a,{get_filterField:function(){return this.$0},get_targetSheets:function(){return this.$3},set_targetSheets:function(e){this.$3=e},get_includeAll:function(){return this.$1},set_includeAll:function(e){this.$1=e;this.clearValues()},get_isExclude:function(){return this.$2},addValue:function(e){if(ss.contains(this.$4,e)){return false}this.$4.push(e);return true},clearValues:function(){ss.clear(this.$4)},getFilterValues:function(){return Array.prototype.slice.call(this.$4)},includesValue:function(e){if(this.get_includeAll()){return true}return this.$2!==ss.contains(this.$4,e)},removeValue:function(e){if(ss.contains(this.$4,e)){return false}ss.remove(this.$4,e);return true}});ss.initClass(gD,a,{add_filterUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_filterUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_filterPresModel:function(){return this.pm},get_filterType:function(){switch(this.get_filterPresModel().type){case'Q':{return'Quantitative'}case'H':{return'Hierarchical'}case'C':{return'Categorical'}case'RD':{if(this.get_filterPresModel().showRelDatePick){return'RelativeDatePick'}else{return'RelativeDate'}}default:{return'FilterDefault'}}},get_globalFieldName:function(){var e=this.pm;var ex=new String;ex='[';for(var lA=0;lA<e.name.length;++lA){if(ss.endsWithString(ex,']')){ex+='.';ex+='['}ex+=e.name[lA];ex+=']'}return ex},update:function(e,ex){if(!this.isNewPresModelSameAsOld(e)){this.pm=e;this.raiseEvent(this.$2$1,ex)}else if(ss.isValue(e)&&e.isTiled){this.raiseEvent(this.$2$1,ex)}}},gV);ss.initClass(gC,a,{get_filterType:function(){return'Categorical'},get_mode:function(){switch(this.get_filterPresModel().mode){case'checklist':{return'check-list'}case'radiolist':{return'radio-list'}case'dropdown':{return'dropdown'}case'checkdropdown':{return'check-dropdown'}case'slider':{return'slider'}case'pattern':{return'pattern'}case'typeinlist':{return'type-in-list'}default:{return'check-list'}}},get_pattern:function(){return this.get_filterPresModel().pattern},get_isAllMode:function(){return this.get_filterPresModel().all},get_allItemsAreChecked:function(){return this.get_filterPresModel().allChecked},get_noItemsAreChecked:function(){return this.get_filterPresModel().allNotChecked},get_exclude:function(){return this.get_filterPresModel().exclude},get_isTiled:function(){return this.get_filterPresModel().isTiled},get_isSearchable:function(){return this.get_filterPresModel().is_searchable},get_summary:function(){return this.get_filterPresModel().summary},get_underlyingDataSourceIsCube:function(){return this.get_filterPresModel().catIsHier},get_condition:function(){return this.get_filterPresModel().condition},get_limit:function(){return this.get_filterPresModel().limit},get_rangeType:function(){return this.get_filterPresModel().rangeType},get_catFilterTable:function(){return this.get_filterPresModel().table},get_domainActualSize:function(){return this.get_catFilterTable().actual_size},get_tuples:function(){return this.get_catFilterTable().tuples},get_domainType:function(){return this.get_filterPresModel().domainType}},gD);ss.initClass(gE,a,{get_filterType:function(){return'Hierarchical'},get_hierarchyTables:function(){return this.get_filterPresModel().table},get_levels:function(){return this.get_filterPresModel().levels},get_isSearchable:function(){return this.get_filterPresModel().is_searchable}},gD);ss.initClass(gF,a,{add_newLegacyLegend:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newLegacyLegend:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},update:function(e,ex){eM.notifyFontsFromServerRenderedLegendPresModel(e);this.simpleSwapToUpdate(e,this.$2$1,ex)}},gV);ss.initClass(gG,a,{get_filterType:function(){return'Quantitative'},get_range:function(){return this.get_filterPresModel().range},get_data:function(){return this.get_filterPresModel().data},get_dateFormat:function(){return this.get_filterPresModel().date_format},get_editingFormat:function(){return this.get_filterPresModel().editing_format},get_format:function(){return this.get_filterPresModel().format},get_calendarControlStartOfWeek:function(){return this.get_filterPresModel().first_day_of_week},get_dataSourceStartOfWeek:function(){return this.get_filterPresModel().start_of_week},get_quantitativeFilterTable:function(){return this.get_filterPresModel().table},get_domainType:function(){return this.get_filterPresModel().domainType}},gD);ss.initClass(gH,a,{add_quickFilterDisplayUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_quickFilterDisplayUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_quickFilterTitle:function(){return this.get_quickFilterDisplayPresModel().quickFilterTitle},get_quickFilterCommands:function(){return this.get_quickFilterDisplayPresModel().quickFilterCommands},get_quickFilterDomainCommands:function(){return this.get_quickFilterDisplayPresModel().quickFilterDomainCommands},get_quickFilterModeMatrix:function(){var e=tab.FeatureParamsLookup.getBool(4);if(e){return this.$1()}else{return null}},get_quickFilterDisplayPresModel:function(){return this.pm},get_fieldName:function(){return this.get_quickFilterDisplayPresModel().quickFilter.fn},get_zoneModel:function(){return this.parent.get_zone()},get_contentStyle:function(){return this.get_zoneModel().get_zoneCommonModel().get_contentStyle()},get_blendedZoneContentColor:function(){return this.get_zoneModel().get_blendedZoneContentColor()},get_attributes:function(){return this.$2.attributes},get_width:function(){return this.get_zoneModel().get_width()},update:function(e,ex,lA){var lB=!_.isEqual(this.$2,ex);this.$2=ex;if(this.isNewPresModelSameAsOld(e)){if(lB){this.raiseEvent$1(Object).call(this,this.$2$1,e,lA)}return}if(ss.isValue(e)){eM.notifyFontsFromTextStylePresModel(e.textStyle)}if(ss.isValue(e)&&ss.isValue(e.quickFilterCommands)){this.$3=new ci(this)}this.$3.update(e.quickFilterCommands,lA);this.simpleSwapToUpdate$1(Object).call(this,e,this.$2$1,e,lA)},$1:function(){var e=[];var ex=['year','qtr','month','day','hour','minute','second','week','weekday','month-year','mdy','none','trunc-year','trunc-qtr','trunc-month','trunc-week','trunc-day','trunc-hour','trunc-minute','trunc-second'];var lA=['check-list','radio-list','dropdown','slider','pattern','type-in-list','check-dropdown'];var lB=['min-max','min-only','max-only','rel-date','rel-pick'];for(var lC=0;lC<ex.length;lC++){var lD=ex[lC];for(var lE=0;lE<lA.length;lE++){var lF=lA[lE];var lG={};lG.aggregation=lD;lG.categoricalMode=lF;e.push(lG)}for(var lH=0;lH<lB.length;lH++){var lI=lB[lH];var lJ={};lJ.aggregation=lD;lJ.quantitativeMode=lI;e.push(lJ)}}return e}},gV);ss.initClass(gI,a,{get_filterType:function(){return(this.get_isRelativeDatePick()?'RelativeDatePick':'RelativeDate')},get_defaultFormat:function(){return this.get_filterPresModel().default_format},get_fiscalYearStart:function(){return this.get_filterPresModel().fy},get_noTime:function(){return this.get_filterPresModel().noTime},get_isRelativeDatePick:function(){return this.get_filterPresModel().showRelDatePick},get_text:function(){return this.get_filterPresModel().text},get_relativeDateTable:function(){return this.get_filterPresModel().table},get_periodType:function(){return this.get_relativeDateTable().periodType},get_rangeType:function(){return this.get_relativeDateTable().rangeType},get_rangeN:function(){return this.get_relativeDateTable().rangeN},get_anchor:function(){return this.get_relativeDateTable().anchor}},gD);ss.initClass(gJ,a,{get_levelNumber:function(){return this.pm.levelNumber},get_canHaveChildren:function(){return true},get_instanceType:function(){return'level'},get_linkedAttributes:function(){return this.$4$1},set_linkedAttributes:function(e){this.$4$1=e},update$1:function(e,ex){this.swapAndCopyPresModel(e);this.set_linkedAttributes(ex)}},eq);ss.initClass(gK,a,{fractionToValue:function(e){return this.$1+e*(this.$0-this.$1)},valueToFraction:function(e){return((this.$1===this.$0)?0:((e-this.$1)/(this.$0-this.$1)))}},hV);ss.initClass(gL,a,{get_interactedTupleId:function(){return this.$1},get_affectedTupleIds:function(){return this.$0},get_paneDescriptorKey:function(){return this.$3},get_needRemoteUbertip:function(){return this.$2}});ss.initClass(gN,a,{add_styleRefreshRequired:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_styleRefreshRequired:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_hasPresModel:function(){return ss.isValue(this.pm)},get_mapboxMapSourcePresModel:function(){return this.pm},get_accessToken:function(){return this.get_mapboxMapSourcePresModel().mapboxAccessToken},get_styleUrl:function(){return this.get_mapboxMapSourcePresModel().mapboxStyleUrl},get_mapCodeFilterKeyword:function(){return this.get_mapboxMapSourcePresModel().mapCodeFilterKeyword},get_mapCode:function(){return this.get_mapboxMapSourcePresModel().mapCode},get_languageCodePropertyKeyword:function(){return this.get_mapboxMapSourcePresModel().mapLanguageCodePropertyKeyword},get_languageCode:function(){return this.get_mapboxMapSourcePresModel().mapLanguageCode},update:function(e,ex){if(this.isNewPresModelSameAsOld(e)){return}var lA=this.$1(e);this.swapAndCopyPresModel(e);if(lA){this.raiseEvent(this.$2$1,ex)}},$1:function(e){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(this.get_mapboxMapSourcePresModel())){return false}return!ss.referenceEquals(this.get_styleUrl(),e.mapboxStyleUrl)||!ss.referenceEquals(this.get_languageCode(),e.mapLanguageCode)||!ss.referenceEquals(this.get_mapCode(),e.mapCode)}},gV);ss.initClass(gO,a,{});ss.initClass(gP,a,{add_updatedMapOptionsInfo:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_updatedMapOptionsInfo:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_stopNotifying:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_stopNotifying:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_lightweightMapOptionsPresModel:function(){return this.pm},get_shouldShowGeographicSearch:function(){return this.get_lightweightMapOptionsPresModel().showGeographicSearch},get_shouldShowFloatingZoomToolbar:function(){return this.get_lightweightMapOptionsPresModel().showFloatingZoomToolbar},get_shouldAllowPanZoom:function(){return this.get_lightweightMapOptionsPresModel().allowPanZoom},get_canToggleGeographicSearch:function(){return this.get_lightweightMapOptionsPresModel().canToggleGeographicSearch},get_shouldShowMapScale:function(){return this.get_lightweightMapOptionsPresModel().showMapScale},get_canToggleMapScale:function(){return this.get_lightweightMapOptionsPresModel().canToggleMapScale},get_canSetMapUnit:function(){return this.get_lightweightMapOptionsPresModel().canSetMapUnit},get_hasPresModel:function(){return ss.isValue(this.get_lightweightMapOptionsPresModel())},get_dialogTitle:function(){return tab.Strings.MapOptionsDialogTitle},get_notificationId:function(){return'doc:map-options-dialog-event'},get_vizID:function(){return this.get_lightweightMapOptionsPresModel().visualIdPresModel},get_mapUnitSelection:function(){return this.get_lightweightMapOptionsPresModel().defaultMapUnitEnum},get_canToggleAutomaticDrill:function(){return this.get_lightweightMapOptionsPresModel().canToggleAutomaticDrill},get_shouldShowAutomaticDrill:function(){return this.get_lightweightMapOptionsPresModel().enableAutomaticDrill},onNotify:function(e,ex){this.simpleSwapToUpdate(e,this.$2$1,ex)},detachNotifications:function(){this.pm=null;if(!ss.staticEquals(this.$2$2,null)){this.$2$2()}},update:function(e,ex){this.swapAndCopyPresModel(e);this.raiseEvent(this.$2$1,ex)}},gV,[fV,fR]);ss.initClass(gQ,a,{add_updatedMapScaleInfo:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_updatedMapScaleInfo:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_mapScaleInfoPresModel:function(){return this.pm},get_shouldShowMapScale:function(){return this.get_mapScaleInfoPresModel().shouldShowMapScale},get_mapScaleMarginOfError:function(){return this.get_mapScaleInfoPresModel().mapScaleMarginOfError},get_mapScaleWidth:function(){return this.get_mapScaleInfoPresModel().mapScaleWidth},get_mapScaleReadoutString:function(){return this.get_mapScaleInfoPresModel().mapScaleReadoutString},get_mapScaleReadoutNumber:function(){return this.get_mapScaleInfoPresModel().mapScaleReadoutNumber},get_mapScaleReadoutUnit:function(){return this.get_mapScaleInfoPresModel().mapScaleReadoutUnit},get_mapScaleFontSizePixels:function(){return this.get_mapScaleInfoPresModel().mapScaleFontSizePixels},get_mapScaleColor:function(){return this.get_mapScaleInfoPresModel().mapScaleColor},get_mapScaleTooltipString:function(){return this.get_mapScaleInfoPresModel().mapScaleTooltipString},get_mapScaleBorderColor:function(){return this.get_mapScaleInfoPresModel().mapScaleBorderColor},get_hasPresModel:function(){return ss.isValue(this.get_mapScaleInfoPresModel())},update:function(e,ex){if(!this.isNewPresModelSameAsOld(e)){this.swapAndCopyPresModel(e);this.raiseEvent(this.$2$1,ex)}}},gV);ss.initClass(gR,a,{add_newMapServerInfo:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newMapServerInfo:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_tileSourceChanged:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_tileSourceChanged:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_useFastMapsChanged:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_useFastMapsChanged:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},get_useFastMaps:function(){return this.get_hasPresModel()&&this.$2().clientRequestsMapTiles},get_hasPresModel:function(){return ss.isValue(this.pm)},get_isAttributionVisible:function(){return this.$2().showAttribution},get_minZoom:function(){return this.$2().mapMinZoom},get_maxZoom:function(){return this.$2().mapMaxZoom},get_requestZoom:function(){if(tab.FeatureFlags.isEnabled('RuntimeComputeMapCenterInVTL')&&this.get_allowLocalPanAndZoom()){return this.$a}return this.$2().mapRequestZoom},set_requestZoom:function(e){this.$a=e},get_displayScale:function(){if(tab.FeatureFlags.isEnabled('RuntimeComputeMapCenterInVTL')&&this.get_allowLocalPanAndZoom()){return this.$5}return this.$2().mapDisplayScale},set_displayScale:function(e){this.$5=e},get_zoom:function(){var e=Math.log(this.get_displayScale())/Math.LN2;var ex=this.get_requestZoom()+e;if(this.get_useFastMaps()&&this.get_rasterMapSourceModel().get_hasPresModel()){ex-=tab.MapUtil.getLeafletZoomOffsetForTileSize(this.get_rasterMapSourceModel().get_mapTileSize())}return ex},get_centerLatitude:function(){if(tab.FeatureFlags.isEnabled('RuntimeComputeMapCenterInVTL')&&this.get_allowLocalPanAndZoom()){return this.$3}return this.$2().mapCenterLatitude},set_centerLatitude:function(e){this.$3=e},get_centerLongitude:function(){if(tab.FeatureFlags.isEnabled('RuntimeComputeMapCenterInVTL')&&this.get_allowLocalPanAndZoom()){return this.$4}return this.$2().mapCenterLongitude},set_centerLongitude:function(e){this.$4=e},get_numWorldRepeats:function(){return this.$2().mapWorldRepeats},get_tileUrl:function(){var e=this.$2();var ex;if(ss.startsWithString(e.mapTileServer.toString(),'http://')||ss.startsWithString(e.mapTileServer.toString(),'https://')){ex=''}else{var lA=tab.WindowHelper.getLocation(window.self).protocol;ex=lA+'//'}ex+=e.mapTileServer;if(!ss.endsWithString(ex,String.fromCharCode(47))&&!ss.startsWithString(e.mapTileUrl.toString(),String.fromCharCode(47))){ex+='/'}ex+=e.mapTileUrl;ex=ss.replaceAllString(ex,'{K}',e.mapServerKey);ex=ss.replaceAllString(ex,'{L}',e.mapLayerRequest);var lB=tab.DoubleUtil.isGreaterThanOrApproximatelyEqual(BrowserSupport.BrowserSupport.DevicePixelRatio(),2);ex=ss.replaceAllString(ex,'{D}',(lB?'@2x':''));ex=ss.replaceAllString(ex,'{X}','{x}');ex=ss.replaceAllString(ex,'{Y}','{y}');ex=ss.replaceAllString(ex,'{Z}','{z}');ex=ss.replaceAllString(ex,'{P}','{p}');return ex},get_hasValidTileLayer:function(){return this.$2().mapHasValidLayer},get_attributionUrl:function(){return this.$2().mapAttributionUrl},get_attributionText:function(){return this.$2().mapAttributionText},get_attributionTextColor:function(){return this.$2().mapAttributionTextColor},get_attributionTextSize:function(){return this.$2().mapAttributionTextSize},get_attributionBGColor:function(){return this.$1(this.$2().mapAttributionFill)},get_mapBGFillColor:function(){return this.$1(this.$2().mapPaneBackgroundFill)},get_mapHolderBackgroundColor:function(){return this.$1(this.$2().mapHolderBackgroundColor)},get_hasWashout:function(){return this.$2().mapWashout>0},get_washoutColor:function(){var e=Math.max(0,Math.min(1,this.$2().mapWashout));return new bQ(255,255,255,e)},get_mapScaleInfoModel:function(){return this.$6},get_radialSelectionDistanceInfoModel:function(){return this.$8},get_mapboxMapSourceModel:function(){return this.$7},get_rasterMapSourceModel:function(){return this.$9},get_allowLocalPanAndZoom:function(){return this.$2$4},set_allowLocalPanAndZoom:function(e){this.$2$4=e},$2:function(){return this.pm},update:function(e,ex){var lA=ss.isValue(this.$2())&&ss.isValue(e);if(lA){var lB=!ss.referenceEquals(this.$2().mapTileServer,e.mapTileServer);var lC=!ss.referenceEquals(this.$2().mapLayerRequest,e.mapLayerRequest);if(lB||lC){this.raiseEvent(this.$2$2,ex)}var lD=this.$2().clientRequestsMapTiles!==e.clientRequestsMapTiles;if(lD){this.raiseEvent$2(Boolean,Boolean).call(this,this.$2$3,this.$2().clientRequestsMapTiles,e.clientRequestsMapTiles,ex)}}if(ss.isValue(e)){this.$8.update(e.radialSelectionDistanceInfo);this.$6.update(e.mapScaleInfo,ex);this.$7.update(e.mapboxMapSource,ex);this.$9.update(e.rasterMapSource)}this.simpleSwapToUpdate(e,this.$2$1,ex)},$1:function(e){return bQ.fromColorCode(e||'rgb(255,255,255)').toString()}},gV);ss.initClass(jO,a,{get_defaultValue:function(){return ss.coalesce(this.defaultSpace,0)},set_defaultValue:function(e){this.defaultSpace=e},get_leftValue:function(){var e=this.left;if(ss.isNullOrUndefined(e)){e=this.get_defaultValue()}return e},set_leftValue:function(e){this.left=e},get_topValue:function(){var e=this.top;if(ss.isNullOrUndefined(e)){e=this.get_defaultValue()}return e},set_topValue:function(e){this.top=e},get_rightValue:function(){var e=this.right;if(ss.isNullOrUndefined(e)){e=this.get_defaultValue()}return e},set_rightValue:function(e){this.right=e},get_bottomValue:function(){var e=this.bottom;if(ss.isNullOrUndefined(e)){e=this.get_defaultValue()}return e},set_bottomValue:function(e){this.bottom=e},get_allSidesTheSame:function(){var e=this.$0;if(ss.isNullOrUndefined(e)){e=ss.isNullOrUndefined(this.bottom)&&ss.isNullOrUndefined(this.top)&&ss.isNullOrUndefined(this.left)&&ss.isNullOrUndefined(this.right)}return e},set_allSidesTheSame:function(e){this.$0=e;if(e){this.top=null;this.bottom=null;this.left=null;this.right=null}},mergeWithExisitingStyle:null});ss.initClass(gS,a,{mergeWithExisitingStyle:function(e){var ex=$.extend({},e);if(ss.isValue(this.defaultSpace)){ex.margin=ss.unbox(this.defaultSpace)}else{delete ex.margin}if(ss.isValue(this.top)){ex.marginTop=ss.unbox(this.top)}else{delete ex.marginTop}if(ss.isValue(this.bottom)){ex.marginBottom=ss.unbox(this.bottom)}else{delete ex.marginBottom}if(ss.isValue(this.left)){ex.marginLeft=ss.unbox(this.left)}else{delete ex.marginLeft}if(ss.isValue(this.right)){ex.marginRight=ss.unbox(this.right)}else{delete ex.marginRight}return ex}},jO);gS.$ctor1.prototype=gS.prototype;ss.initClass(gT,a,{add_newMarksCard:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newMarksCard:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_layers:function(){return this.$3},get_activePaneSpecId:function(){return this.$2},set_activePaneSpecId:function(e){this.$2=e},update:function(e,ex){if(this.isNewPresModelSameAsOld(e)){return}var lA=[];if(ss.isValue(e)&&ss.isValue(e.layer)){this.$1(e.layer,lA,ex)}if(ss.isValue(e)&&ss.isValue(e.layers)){for(var lB=0;lB<e.layers.length;lB++){var lC=e.layers[lB];this.$1(lC,lA,ex)}}this.$3=lA;this.swapAndCopyPresModel(e);this.raiseEvent(this.$2$1,ex)},$1:function(e,ex,lA){var lB=_.find(this.$3,function(lC){return lC.equals$1(e)});if(ss.isNullOrUndefined(lB)){lB=new gx(this,e.paneSpec)}lB.update(e,lA);ex.push(lB)}},gV);ss.initClass(gU,a,{add_newMarkSize:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newMarkSize:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_minMarkSize:function(){return this.pm.minMarkSize},get_maxMarkSize:function(){return this.pm.maxMarkSize},get_currentMarkSize:function(){return this.pm.markSize},get_currentSliderFraction:function(){return tab.DoubleUtil.roundTwoDecimalPlaces(this.$3.valueToFraction(this.get_currentMarkSize()))},get_transform:function(){return this.$3},get_parentModel:function(){return this.$2},update:function(e,ex){if(ss.isValue(e)){this.$1(e)}this.simpleSwapToUpdate(e,this.$2$1,ex)},$1:function(e){switch(e.inflectionPoints.length){case 0:{this.$3=new gK(e.minMarkSize,e.maxMarkSize);break}case 1:{var ex=e.inflectionPoints[0];this.$3=new M(e.minMarkSize,e.maxMarkSize,ex.inflectionFraction,ex.inflectionValue,ex.inflectionFraction,ex.inflectionValue);break}case 2:default:{var lA=e.inflectionPoints[0];var lB=e.inflectionPoints[1];this.$3=new M(e.minMarkSize,e.maxMarkSize,lA.inflectionFraction,lA.inflectionValue,lB.inflectionFraction,lB.inflectionValue);break}}}},gV);ss.initClass(gY,a,{});ss.initClass(gZ,a,{});ss.initClass(ha,a,{loadRequested:function(){this.$3++},moduleLoaded:function(){this.$3=Math.max(this.$3-1,0);if(this.$0()){this.$1()}},registerModulesLoadedCallback:function(e){if(this.$0()){e();return}this.$2.push(e)},$0:function(){return this.$3===0},$1:function(){for(var e=0;e<this.$2.length;e++){var ex=this.$2[e];_.defer(ex)}this.$2.length=0}});ss.initClass(hb,a,{get_instanceType:function(){return'multiple'}},es);ss.initClass(hc,a,{processEvent:function(e){}},null,[ga]);ss.initClass(hd,a,{get_notificationId:function(){return this.$1$1},set_notificationId:function(e){this.$1$1=e},onNotify:function(e,ex){var lA=$.Deferred();var lB=lA.promise();lB.done(ss.mkdel(this,function(){if(ss.isValue(this.$2)){gV.nonWorldUpdate(ss.mkdel(this,function(lC){this.$2.onNotify(e,lC)}))}}));if(ss.isValue(this.$2)){lA.resolve()}else{this.$1().done(ss.mkdel(this,function(lC){if(ss.isValue(lC)){this.$2=lC;this.$2.add_stopNotifying(ss.mkdel(this,this.$0))}lA.resolve()}))}},$0:function(){this.$2=null}},null,[fV]);ss.initClass(he,a,{get_recoveryStates:function(){return he.$0},get_tailIndex:function(){return 0},add:function(e,ex){return this.get_tailIndex()},adopt:function(e){},trackRedo:function(){return 0},trackUndo:function(){return 0}},null,[fW]);ss.initClass(hf,a,{$3:function(e,ex){this.$1().done([ss.mkdel(this,function(){var lB=this.$6.createEvent();lB.ofType(e);var lC=new ss.ObjectEnumerator(ex);try{while(lC.moveNext()){var lD=lC.current();lB.withProperty(lD.key,lD.value)}}finally{lC.dispose()}lB.withProperty('SiteId',this.$d);lB.withProperty('SiteLuid',this.$e);lB.withProperty('SiteUrlName',this.$f);lB.withProperty('UserId',this.$g);lB.withProperty('Language',tsConfig.language);lB.withProperty('Locale',tsConfig.locale);lB.withProperty('SessionId',tsConfig.sessionIdHash);lB.withProperty('ProjectId',tsConfig.current_project_id);lB.withProperty('WorkbookId',tsConfig.current_workbook_id);lB.withProperty('Public',tsConfig.isPublic);lB.withProperty('SaaS',tsConfig.is_saas);this.$a.reportEvent(lB.build())})]);var lA=hf.$1$1;if(!ss.staticEquals(lA,null)){lA(e,ex)}},$2:function(){return this.$4||(this.$4=gZ.load$1('analytics-client',[]))},$0:function(){return this.$c||(this.$c=lm.get_getSessionInfo().done(ss.mkdel(this,function(e){this.$b=e})).fail(ss.mkdel(this,function(e){})))},$1:function(){return this.$7||(this.$7=$.when(this.$0(),this.$2()).done([ss.mkdel(this,function(){var e=ss.isValue(this.$b);if(e){var ex=this.$b.server;var lA=this.$b.site;var lB=this.$b.user;e=ss.isValue(ex)&&ss.isValue(lA)&&ss.isValue(lB);if(e){this.$5=ex.analyticsEndpoint;this.$9=ex.logicalServerInstanceId;this.$d=lA.id;this.$e=lA.luid;this.$f=lA.urlName;this.$g=lB.id}}if(!e){}this.$a=new AnalyticsClient.Reporter(this.$5);this.$6=new AnalyticsClient.AnalyticsEventFactory('VizClient',this.$9,window.location.hostname)})]))}});ss.initClass(hg,a,{});ss.initClass(hh,a,{get_description:function(){return this.$1$1},set_description:function(e){this.$1$1=e},get_architecture:function(){return this.$1$2},set_architecture:function(e){this.$1$2=e},get_family:function(){return this.$1$3},set_family:function(e){this.$1$3=e},get_version:function(){return this.$1$4},set_version:function(e){this.$1$4=e}});ss.initClass(hi,a,{mergeWithExisitingStyle:function(e){var ex=$.extend({},e);if(ss.isValue(this.defaultSpace)){ex.padding=ss.unbox(this.defaultSpace)}else{delete ex.padding}if(ss.isValue(this.top)){ex.paddingTop=ss.unbox(this.top)}else{delete ex.paddingTop}if(ss.isValue(this.bottom)){ex.paddingBottom=ss.unbox(this.bottom)}else{delete ex.paddingBottom}if(ss.isValue(this.left)){ex.paddingLeft=ss.unbox(this.left)}else{delete ex.paddingLeft}if(ss.isValue(this.right)){ex.paddingRight=ss.unbox(this.right)}else{delete ex.paddingRight}return ex}},jO);hi.$ctor1.prototype=hi.prototype;ss.initClass(hj,a,{add_newPage:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newPage:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_title:function(){return tableau.format.stripFormattedText(this.pm.title)},get_zoneModel:function(){return this.$1},update:function(e,ex,lA){if(this.isNewPresModelSameAsOld(e)){return}eM.notifyFontsFromPagePresModel(e);if(ex){this.simpleSwapToUpdate$1(Object).call(this,e,this.$2$1,e,lA)}else{this.swapAndCopyPresModel(e)}}},gV);ss.initClass(hl,a,{});ss.initClass(hm,a,{get_rowIndex:function(){return this.$0['rowIndex']},get_columnIndex:function(){return this.$0['columnIndex']},get_pageIndex:function(){return(ss.keyExists(this.$0,'pageIndex')?this.$0['pageIndex']:0)},get_presModel:function(){return this.$0},update:function(e){if(ss.isValue(e)){this.$0=e}else{this.$0={};this.$0['columnIndex']=0;this.$0['rowIndex']=0}}});hm.$ctor1.prototype=hm.prototype;ss.initClass(hn,a,{});ss.initClass(ho,a,{add_newParameterCtrl:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newParameterCtrl:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_parameterCtrlPresModel:function(){return this.pm},get_parameterCtrlJsonPresModel:function(){return this.get_parameterCtrlPresModel().legacyPresModel},get_zone:function(){return this.get_zoneModel().pm},get_zoneModel:function(){return this.parent.get_zone()},get_parameterName:function(){return this.get_parameterCtrlPresModel().parameterName},get_attributes:function(){return this.$1.attributes},update:function(e,ex,lA){if(ss.isValue(e)){eM.notifyFontsFromTextStylePresModel(e.textStyle)}this.$1=ex;this.simpleSwapToUpdate$1(Object).call(this,e,this.$2$1,e,lA)},updateFrame:function(e,ex){if(!ss.referenceEquals(this.$1,e)){this.$1=e;this.raiseEvent$1(Object).call(this,this.$2$1,this.get_parameterCtrlPresModel(),ex)}}},gV);ss.initClass(hp,a,{});ss.initClass(hq,a,{add_modelUpdated:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_modelUpdated:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},$1:function(){return this.pm},get_allPages:function(){return this.$1().includeAllPages},get_allPagesState:function(){return this.$1().allPagesState},update:function(e,ex){this.simpleSwapToUpdate(e,this.$3$1,ex)}},kq);ss.initClass(hr,a,{},ss.makeGenericType(kV,[Object,hs]));ss.initClass(hs,a,{});ss.initClass(ht,a,{do$1:function(){throw new ss.NotImplementedException},do$2:function(e){var ex=$.Deferred();var lA=this.c['exceptionAttrs'];var lB=this.c['dbPassword'].toString();var lC=this.c['savePasswordAllowed'];Z.performAuthentication(lA,lB,lC).done([function(){ex.resolve()}]).fail([function(){ex.reject()}]);return ex.promise()},invoke:function(){var e=$.Deferred();this.do$2(true).done([function(){e.resolve()}]).fail([function(){e.reject()}]);return e.promise()}},hr);ss.initClass(hu,a,{});ss.initClass(hv,a,{get_encodingType:function(){if(ss.isNullOrUndefined(this.pm)||ss.isNullOrUndefined(this.pm.encodingType)){return'invalid-encoding'}return this.pm.encodingType},get_alternateEncodings:function(){if(ss.isNullOrUndefined(this.pm)||ss.isNullOrUndefined(this.pm.encodingUiItems)){return[]}return _.filter(this.pm.encodingUiItems,function(e){return e.isVisible&&e.isEnabled})},get_filterType:function(){if(ss.isNullOrUndefined(this.pm)||ss.isNullOrUndefined(this.pm.filterIconType)){return'no-filter'}return this.pm.filterIconType},get_hasDrill:function(){return this.pm.hasDrill||false},get_shouldDrill:function(){return this.get_hasDrill()&&(this.pm.shouldDrill||false)},get_column:function(){return this.$1},get_tooltip:function(){return tableau.format.stripFormattedText(this.pm.tooltip)},get_sideIconToolip:function(){return tableau.format.stripFormattedText(this.pm.iconTooltip)},get_displayName:function(){return this.pm.displayText},get_isContextFilter:function(){return this.pm.isContextFilter},get_contextMenuCommands:function(){return this.pm.commands},get_isMultipleFields:function(){return this.pm.encodingType!=='invalid-encoding'&&ss.isInstanceOfType(this.$1,hb)},update:function(e,ex){if(this.isNewPresModelSameAsOld(e)){return}this.$1=ex;this.swapAndCopyPresModel(e)}},gV);ss.initClass(hw,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabsrv',cmd:'ping-session'},this.c))}},ss.makeGenericType(bd,[Object,hx]));ss.initClass(hx,a,{});ss.initClass(hy,a,{get_description:function(){return this.$1$1},set_description:function(e){this.$1$1=e},get_layout:function(){return this.$1$2},set_layout:function(e){this.$1$2=e},get_manufacturer:function(){return this.$1$3},set_manufacturer:function(e){this.$1$3=e},get_name:function(){return this.$1$4},set_name:function(e){this.$1$4=e},get_prerelease:function(){return this.$1$5},set_prerelease:function(e){this.$1$5=e},get_product:function(){return this.$1$6},set_product:function(e){this.$1$6=e},get_userAgent:function(){return this.$1$7},set_userAgent:function(e){this.$1$7=e},get_version:function(){return this.$1$8},set_version:function(e){this.$1$8=e},get_OS:function(){return this.$1$9},set_OS:function(e){this.$1$9=e}});ss.initClass(hz,a,{});ss.initClass(hA,a,{add_stopNotifying:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_stopNotifying:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},get_notificationId:function(){return this.$1$2},set_notificationId:function(e){this.$1$2=e},onNotify:function(e,ex){if(ss.isValue(this.$3)){return}this.$3=ss.createInstance(this.$4);this.$5=document.createElement('div');this.$2.appendChild(this.$5);this.$3.showDialog(e,this.$5,ss.mkdel(this,this.$0));this.$1()},$0:function(){this.$3=null;if(ss.isValue(this.$5)){this.$2.removeChild(this.$5);this.$5=null}},$1:function(){if(ss.isNullOrUndefined(this.$6)||ss.isNullOrUndefined(this.$6.contentClassName)||!ss.referenceEquals(this.$2,document.body)){return}var e=$(this.$2).find('.'+this.$6.contentClassName);if(e.length===0){return}var ex=e.parentsUntil('body').last();var lA=ex.prev();ex.css('z-index',this.$6.customZIndex);lA.css('z-index',this.$6.customZIndex)},dispose:function(){if(!ss.staticEquals(this.$1$1,null)){this.$1$1()}this.$0()}},null,[fV,fR,ss.IDisposable]);ss.initClass(hC,a,{reportEvent:function(e,ex){hf.logEvent(e,ex)}});ss.initClass(hD,a,{});ss.initClass(hE,a,{get_pathList:function(){return this.$0},get_pathAsString:function(){if(ss.isNullOrUndefined(this.$1)){this.$1=_.map(this.$0,function(e){return e.name}).join(':')}return this.$1},add:function(e){this.$0.push(e);this.$1=null},reverse:function(){this.$0.reverse();this.$1=null}});ss.initClass(hF,a,{});ss.initEnum(hG,a,{simple:0,array:1});ss.initClass(hH,a,{add_progressiveLoad:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_progressiveLoad:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},add_progressiveLoadComplete:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_progressiveLoadComplete:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},get_hasZonesToLoad:function(){if(ss.isValue(this.$k)&&ss.getKeyCount(this.$k)>0){return true}if(ss.isNullOrUndefined(this.$j)){return false}for(var e=0;e<hH.$7.length;e++){var ex=hH.$7[e];if(ss.isNullOrUndefined(this.$j[ex])){continue}return true}return false},extractZoneContent:function(e){if(!hH.$4(e)){return e}var ex=this.$4(e);if(ss.isNullOrUndefined(ex)){return e}this.$h(ex);ex.zones=this.$5(ex.zones);return e},updateZonesWithVizData:function(e,ex){if(ss.isNullOrUndefined(this.$p)||ss.getKeyCount(this.$p)===0){return}kN.addVizDataToZones(e.presModelMap,this.$p);var lA=_.keys(this.$p);for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];var lD=this.$q[lC]||this.$3(this.$p[lC]);if(ss.isValue(lD)&&ss.isValue(lD.get_visualModel())){var lE=lD.get_visualModel();lE.update(lE.pm,ex)}}},processModelUpdate:function(e,ex,lA){if(!hH.$4(e)||!this.get_hasZonesToLoad()){return e}var lB=this.$4(e);if(ss.isNullOrUndefined(lB)){return e}this.$h(lB);var lC=gV.removeUndefinedBoolsOnSwapCopy;if(lA){gV.removeUndefinedBoolsOnSwapCopy=false}try{var lD=lB.zones;var lE=_.keys(lD);for(var lF=0;lF<lE.length;lF++){var lG=lE[lF];var lH=lD[lG];if(ss.isNullOrUndefined(lH)){continue}var lI=this.$9(lH);if(!ss.contains(hH.zonesThatDeferContentCreation,lI)){continue}var lJ=false;var lK=lH.zoneId;var lL=[hH.$8[lI],6];for(var lM=0;lM<lL.length;lM++){var lN=lL[lM];var lO=this.$j[lN];if(ss.isValue(lO)){var lP=lO.length;for(var lQ=0;lQ<lP;lQ++){var lR=lO[lQ];if(ss.isValue(lR)&&lR.zoneId===lK){lJ=true;lO[lQ]=this.$1(lR,lH,ex);break}}}if(lJ){break}}if(!lJ&&lI==='viz'){var lS=_.keys(this.$k);for(var lT=0;lT<lS.length;lT++){var lU=lS[lT];var lV=this.$k[lU];if(lK===lV.zoneId){lJ=true;this.$k[lU]=this.$1(lV,lH,ex);break}}}if(lJ){lH=hH.removeZoneContent(lH)}}}finally{gV.removeUndefinedBoolsOnSwapCopy=lC}return e},start:function(){if(!this.get_hasZonesToLoad()){this.$6();this.$d();return}this.$e();this.$c();this.$f()},abort:function(){this.stopTimers();this.$d()},setViewport:function(e){var ex=e.get_dimensions();if(ex.w===1&&ex.h===1){return}this.$o={x:ex.l,y:ex.t,w:ex.w,h:ex.h};this.$c()},getPendingVisuals:function(){var e={};var ex=_.keys(this.$p);for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];var lC=this.$p[lB].worksheet;var lD=this.getPendingVisual(lC);if(ss.isValue(lD)){e[lC]=lD}}return e},getPendingVisual:function(e){var ex=null;var lA=_.keys(this.$p);for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];if(ss.referenceEquals(this.$p[lC].worksheet,e)){ex=this.$p[lC];break}}if(ss.isNullOrUndefined(ex)){return null}var lD=this.$q[ex.zoneId]||this.$3(ex);return lD.get_visualModel()},getPendingZoneContentModel:function(e){if(ss.isNullOrUndefined(this.$l)){return null}return this.$l[e]},stopTimers:function(){if(ss.isValue(this.$m)){if(ss.isValue(tab.FeatureParamsLookup.getInt(39))){window.clearTimeout(ss.unbox(this.$m))}else{tab.WindowHelper.cancelAnimationFrame(ss.unbox(this.$m))}this.$m=null}},$d:function(){this.$j=null;this.$k=null;this.$p=null;this.$q=null;this.$l=null;this.$n=null;this.$m=null;this.$o=null;ss.clearKeys(this.$r)},$8:function(){var e={};for(var ex=0;ex<hH.$7.length;ex++){var lA=hH.$7[ex];if(lA===6&&ss.isValue(this.$k)&&ss.getKeyCount(this.$k)>0){this.$j[6]=this.$j[6]||[];var lB=_.keys(this.$k);for(var lC=0;lC<lB.length;lC++){var lD=lB[lC];this.$j[6].push(this.$k[lD])}this.$k=null}var lE=this.$j[lA];if(ss.isNullOrUndefined(lE)){continue}var lF=lE.length;var lG=hH.$6[lA];var lH=0;if(lG.item1===-1){lH=lF}else{var lI=lG.item2*lF;if(lG.item1<lI){var lJ=0;for(var lK=0;lK<lE.length;lK++){var lL=lE[lK];if(ss.isValue(lL)){++lJ}}lH=Math.floor(lI);if(lJ%lH>0){lH=lH+1}}else{lH=lG.item1}}var lM=0;var lN=0;while(lM<lH&&lN<lF){var lO=lE[lN];lE[lN]=null;lN++;if(ss.isNullOrUndefined(lO)){continue}if(hH.$3(this.$9(lO))){var lP=lO.worksheet;if(ss.isValue(this.$k)&&ss.keyExists(this.$k,lP)){var lQ=this.$k[lP];delete this.$k[lP];delete this.$p[lQ.zoneId];e[lQ.zoneId.toString()]=lQ}}delete this.$p[lO.zoneId];var lR=this.$q[lO.zoneId];if(ss.isValue(lR)){delete this.$q[lO.zoneId];this.$l=this.$l||{};this.$l[lO.zoneId]=lR.get_model()}e[lO.zoneId.toString()]=lO;++lM}if(lN===lF){this.$j[lA]=null}break}return e},$a:function(e){if(ss.isNullOrUndefined(this.$o)){var ex=new tab.WindowHelper(window.self);var lA=ex.get_innerWidth();var lB=ex.get_innerHeight();var lC=ex.get_pageXOffset();var lD=ex.get_pageYOffset();this.$o={x:lC,y:lD,w:lA,h:lB}}var lE={x:e.zoneCommon.x,y:e.zoneCommon.y,w:e.zoneCommon.w,h:e.zoneCommon.h};return tab.RectXYUtil.intersectsWith(lE,this.$o)},$0:function(){var e=this.$8();if(ss.isNullOrUndefined(e)||ss.getKeyCount(e)===0){return null}var ex=tab.MiscUtil.cloneObject(this.$n);hH.getZoneRoot(ex).zones=e;return ex},$e:function(){var e=tab.FeatureParamsLookup.getInt(39);if(ss.isValue(e)){this.$m=window.setTimeout(ss.mkdel(this,this.$b),ss.unbox(e))}else{this.$m=tab.WindowHelper.requestAnimationFrame(ss.mkdel(this,function(){this.$b()}))}},$b:function(){var e=this.$0();var ex=this.get_hasZonesToLoad();if(ex){this.$e()}this.$7(e,!ex);if(!ex){this.$6();this.$d()}},$7:function(e,ex){if(!ss.staticEquals(this.$1$1,null)){this.$1$1(e,ex)}},$6:function(){if(!ss.staticEquals(this.$1$2,null)){this.$1$2()}},$4:function(e){if(ss.isNullOrUndefined(e)){return null}var ex=hH.getZoneRoot(e);if(ss.isNullOrUndefined(ex)&&ss.isNullOrUndefined(this.$n)){return null}this.$2(e);return ex},$5:function(e){if(ss.isNullOrUndefined(e)){return null}hH.$2();this.$p={};this.$j={};this.$q={};var ex=_.keys(e);for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];var lC=e[lB];if(!ss.contains(hH.zonesThatDeferContentCreation,this.$9(lC))){continue}var lD=hH.cloneZone(lC);lC=hH.removeZoneContent(lC);var lE=this.$9(lD);if(lE==='viz'){this.$p[lB]=lD}var lF=5;if(ss.keyExists(hH.$8,lE)){lF=hH.$8[lE]}this.$j[lF]=this.$j[lF]||[];this.$j[lF].push(lD)}return e},$c:function(){if(ss.isNullOrUndefined(this.$j)||this.$i){return}this.$k=this.$k||{};for(var e=0;e<hH.$7.length;e++){var ex=hH.$7[e];if(ex===6){continue}var lA=this.$j[ex];if(ss.isNullOrUndefined(lA)||lA.length===0){continue}var lB=0;var lC=new Array(lA.length);for(var lD=0;lD<lA.length;lD++){var lE=lA[lD];if(this.$a(lE)){lC[lB]=lE;lB++}else if(this.$9(lE)==='viz'){this.$k[lE.worksheet]=lE}else{this.$j[6]=this.$j[6]||[];this.$j[6].push(lE)}}if(lB>0){lC.length=lB;this.$j[ex]=lC}else{this.$j[ex]=null}}this.$i=true},$g:function(e){if(ss.isNullOrUndefined(e)||e.length===0){return null}var ex=e.length;var lA={};var lB=new Array(ex);for(var lC=0;lC<ex;lC++){var lD=e[lC];var lE=lD.zoneCommon.y*5000+lD.zoneCommon.x;while(ss.isValue(lA[lE])){lE+=1}lA[lE]=lD;lB[lC]=lE}lB=lB.sort(function(lI,lJ){return((lI>lJ)?1:-1)});for(var lF=0;lF<ex;lF++){var lG=lB[lF];var lH=lA[lG];e[lF]=lH}return e},$f:function(){if(ss.isNullOrUndefined(this.$j)){return}for(var e=0;e<hH.$7.length;e++){var ex=hH.$7[e];if(ex===6){continue}var lA=this.$j[ex];this.$j[ex]=this.$g(lA)}},$3:function(e){var ex=gY.findContentDashboard();var lA=new ly(ex.zonesModel,ex,e.zoneId);lA.update(e,hc.get_noopContext());this.$q[e.zoneId]=lA;return lA},$1:function(e,ex,lA){var lB=this.$q[e.zoneId]||this.$3(e);var lC=hH.cloneZone(ex);lB.update(lC,lA);return lC},$h:function(e){$.extend(this.$r,hH.$0(e))},$9:function(e){if(ss.isNullOrUndefined(e)){return'invalid'}if(ss.isValue(e.zoneCommon)){return e.zoneCommon.zoneType}return ss.coalesce(this.$r[e.zoneId],'invalid')},$2:function(e){if(ss.isNullOrUndefined(e)){return}var ex=this.$n;var lA=e;var lB=null;this.$n=hH.$1(lA,ex);lB=this.$n;lA=lA.workbookPresModel;ex=(ss.isNullOrUndefined(ex)?null:ex.workbookPresModel);lB.workbookPresModel=hH.$1(lA,ex);if(ss.isNullOrUndefined(lA)){return}lB=lB.workbookPresModel;lA=lA.dashboardPresModel;ex=(ss.isNullOrUndefined(ex)?null:ex.dashboardPresModel);lB.dashboardPresModel=hH.$1(lA,ex);if(ss.isNullOrUndefined(lA)){return}if(e.workbookPresModel.dashboardPresModel.isStory){lB=lB.dashboardPresModel;lA=lA.zones;ex=(ss.isNullOrUndefined(ex)?null:ex.zones);var lC=null;var lD='';if(ss.isValue(lA)){var lE=lA;var lF=_.keys(lE);for(var lG=0;lG<lF.length;lG++){var lH=lF[lG];if(this.$9(lE[lH])!=='flipboard'){continue}lC=lE[lH];lD=lH;break}}if(ss.isNullOrUndefined(lC)){lB.zones=ex;return}lB.zones={};lB.zones[lD]=hD.cloneObjWithScalarsOnly(lC);lB=lB.zones[lD];lA=lA[lD].presModelHolder;ex=(ss.isNullOrUndefined(ex)?null:ex[lD].presModelHolder);lB.presModelHolder=hH.$1(lA,ex);if(ss.isNullOrUndefined(lA)){return}lB=lB.presModelHolder;lA=lA['flipboard'];ex=(ss.isNullOrUndefined(ex)?null:ex['flipboard']);lB['flipboard']=hH.$1(lA,ex);if(ss.isNullOrUndefined(lA)){return}var lI=lA.activeStoryPointId;lB=lB['flipboard'];lA=lA.storyPoints;ex=(ss.isNullOrUndefined(ex)?null:ex.storyPoints);lB.storyPoints=hH.$1(lA,ex);if(ss.isNullOrUndefined(lA)){return}lB=lB.storyPoints;lA=lA[lI.toString()];ex=(ss.isNullOrUndefined(ex)?null:ex[lI.toString()]);lB[lI.toString()]=hH.$1(lA,ex);if(ss.isNullOrUndefined(lA)){return}lB=lB[lI.toString()];lA=lA.dashboardPresModel;ex=(ss.isNullOrUndefined(ex)?null:ex.dashboardPresModel);lB.dashboardPresModel=hH.$1(lA,ex)}}});ss.initEnum(hI,a,{neverStopPropagation:0,onValidKeyComboStopPropagation:1,onValidAndAllowedKeyComboStopPropagation:2});ss.initClass(hJ,a,{add_legendChanged:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_legendChanged:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_quantColorLegendPresModel:function(){return this.pm},update:function(e,ex){if(this.isNewPresModelSameAsOld(e)){return}eM.notifyFontsFromQuantitativeColorLegendPresModel(e);this.swapAndCopyPresModel(e);this.raiseEvent(this.$2$1,ex)}},gV);ss.initClass(hK,a,{get_filterField:function(){return this.$2},get_currentMaxVal:function(){return this.$0},get_currentMinVal:function(){return this.$1},get_targetSheets:function(){return this.$5},get_previousMaxVal:function(){return this.$3},get_previousMinVal:function(){return this.$4},valueInRange:function(e){var ex=true;if(ss.isValue(this.$1)){ex=ex&&tab.DoubleUtil.isGreaterThanOrApproximatelyEqual(e,ss.unbox(this.$1))}if(ss.isValue(this.$0)){ex=ex&&tab.DoubleUtil.isLessThanOrApproximatelyEqual(e,ss.unbox(this.$0))}return ex}});ss.initClass(hL,a,{});ss.initClass(hM,a,{add_filterUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_filterUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_quickFilterModel:function(){return this.$2$2},set_quickFilterModel:function(e){this.$2$2=e},get_quickFilterType:function(){return this.$2$3},set_quickFilterType:function(e){this.$2$3=e},get_quickFilterCommands:function(){return this.$2().quickFilterCommands},get_zoneHasTitle:function(){return this.parent.get_zone().get_hasTitle()},get_titleCaption:function(){return this.$2().quickFilterTitle.caption},get_titleHtml:function(){return this.$2().quickFilterTitle.html},get_titleHeight:function(){return this.$2().quickFilterTitle.h},get_itemsHeight:function(){return this.$2().lineHeight},get_itemsFontName:function(){return this.$2().textStyle.fontName.toString()},get_itemsFontSize:function(){return this.$2().textStyle.fontSize+'pt'},get_itemsTextColor:function(){return this.$2().textStyle.color},get_itemsFontWeight:function(){return this.$2().textStyle.fontWeight},get_itemsFontStyle:function(){return this.$2().textStyle.fontStyle},get_itemsTextDecoration:function(){return this.$2().textStyle.textDecoration},get_zoneBackgroundColor:function(){var e=this.parent;return e.get_zone().pm.zoneCommon.styledBox.fillColor},get_visualId:function(){var e=this.parent;return gY.getVisualId(e.get_zone().pm.sheet)},get_fieldName:function(){return this.$2().quickFilter.fn},$2:function(){return this.pm},update:function(e,ex){if(!this.isNewPresModelSameAsOld(e)){if(ss.isValue(e)){eM.notifyFontsFromTextStylePresModel(e.textStyle)}this.swapAndCopyPresModel(e);if(e.quickFilter.quickFilterType!==this.get_quickFilterType()){this.set_quickFilterModel(this.$1(e.quickFilter));this.set_quickFilterType(e.quickFilter.quickFilterType)}if(ss.isValue(this.get_quickFilterModel())){this.get_quickFilterModel().update(e.quickFilter,ex)}this.raiseEvent(this.$2$1,ex)}},$1:function(e){switch(e.quickFilterType){case'categorical':{return new bH(this)}default:{return null}}}},gV);ss.initClass(hO,a,{get_radialSelectionDistanceInfoPresModel:function(){return this.pm},get_earthRadius:function(){return this.get_radialSelectionDistanceInfoPresModel().earthRadius},get_fontSizePixels:function(){return this.get_radialSelectionDistanceInfoPresModel().fontSize},get_largeUnitDisplay:function(){return this.get_radialSelectionDistanceInfoPresModel().largeUnitDisplay},get_latLongRect:function(){return this.get_radialSelectionDistanceInfoPresModel().mapLatLongRect},get_mapHeight:function(){return this.get_radialSelectionDistanceInfoPresModel().h},get_mapWidth:function(){return this.get_radialSelectionDistanceInfoPresModel().w},get_readoutOffsetPixels:function(){return this.get_radialSelectionDistanceInfoPresModel().readoutOffset},get_shouldShowDistance:function(){return this.get_radialSelectionDistanceInfoPresModel().shouldShowDistance},get_sigFigs:function(){return this.get_radialSelectionDistanceInfoPresModel().sigFigs},get_smallToLargeUnitDivisor:function(){return this.get_radialSelectionDistanceInfoPresModel().unitDivisor},get_smallUnitDisplay:function(){return this.get_radialSelectionDistanceInfoPresModel().smallUnitDisplay},get_unitTransition:function(){return this.get_radialSelectionDistanceInfoPresModel().unitTransition},get_decimalMark:function(){return this.get_radialSelectionDistanceInfoPresModel().decimalMark},get_fontColor:function(){return this.get_radialSelectionDistanceInfoPresModel().distanceFontColor},update:function(e){if(!this.isNewPresModelSameAsOld(e)){this.swapAndCopyPresModel(e)}}},gV);ss.initClass(hP,a,{},ss.makeGenericType(kV,[Object,hQ]));ss.initClass(hQ,a,{});ss.initClass(hR,a,{do$1:function(){Y.get_instance().raiseNotification('doc:tabbed-auth-dialog-connected-event',null,null)}},hP);ss.initClass(hS,a,{},ss.makeGenericType(kV,[Object,hT]));ss.initClass(hT,a,{});ss.initClass(hU,a,{do$1:function(){Y.get_instance().raiseNotification('doc:tabbed-auth-dialog-closed-event',null,null)}},hS);ss.initClass(hW,a,{add_modelUpdated:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_modelUpdated:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},$1:function(){return this.pm},get_rankTypeValues:function(){return this.$1().rankTypeValues},get_rankTypeCaptions:function(){return this.$1().rankTypeCaptions},get_rankTypeIndex:function(){return this.$1().rankTypeIndex},get_rankType:function(){return this.get_rankTypeValues()[this.get_rankTypeIndex()]},get_rankTypeState:function(){return this.$1().rankTypeState},get_sortDirectionValues:function(){return this.$1().sortDirectionValues},get_sortDirectionCaptions:function(){return this.$1().sortDirectionCaptions},get_sortDirectionIndex:function(){return this.$1().sortDirectionIndex},get_sortDirection:function(){return this.get_sortDirectionValues()[this.get_sortDirectionIndex()]},update:function(e,ex){this.simpleSwapToUpdate(e,this.$3$1,ex)}},kq);ss.initClass(hX,a,{get_hasPresModel:function(){return ss.isValue(this.pm)},get_rasterMapSourcePresModel:function(){return this.pm},get_minShrink:function(){return this.get_rasterMapSourcePresModel().mapMinShrink},get_maxStretch:function(){return this.get_rasterMapSourcePresModel().mapMaxStretch},get_intermediateTileLevels:function(){return this.get_rasterMapSourcePresModel().mapIntermediateLevels},get_mapTileSize:function(){return this.get_rasterMapSourcePresModel().mapTileSize},update:function(e){if(!this.isNewPresModelSameAsOld(e)){this.swapAndCopyPresModel(e)}}},gV);ss.initClass(hY,a,{get_lineWidth:function(){return this.$1$1},set_lineWidth:function(e){this.$1$1=e},get_lineColor:function(){return this.$1$2},set_lineColor:function(e){this.$1$2=e},get_linePattern:function(){return this.$1$3},set_linePattern:function(e){this.$1$3=e},get_lineJoin:function(){return this.$1$4},set_lineJoin:function(e){this.$1$4=e},get_lineCap:function(){return this.$1$5},set_lineCap:function(e){this.$1$5=e},get_id:function(){return this.$1$6},set_id:function(e){this.$1$6=e},get_hasFillAbove:function(){return this.$1.$3()},get_hasFillBelow:function(){return this.$1.$5()},get_fillColorCount:function(){return this.$1.$2()},get_hasLine:function(){return ss.isValue(this.$4)},get_hasLabel:function(){return ss.isValue(this.$3)},get_hasFill:function(){return ss.isValue(this.$1)},get_scope:function(){return this.$1$7},set_scope:function(e){this.$1$7=e},get_labelBackgroundColor:function(){return this.$3.$1()},setPaneSection:function(e,ex,lA){this.$5[e]={item1:ex,item2:lA}},getRange:function(e){if(!ss.keyExists(this.$5,e)){return{item1:0,item2:0}}return this.$5[e]},getLinePixelPosition:function(e,ex,lA){return this.$4.$2(e,ex,lA)},getEndPoints:function(e,ex){return this.$4.$0(e,ex)},getHitTestBound:function(e,ex,lA){return this.$4.$1(e,ex,this.get_lineWidth(),lA)},getCellClipInfo:function(e){var ex=0;var lA=0;var lB=0;if(this.get_scope()===0){if(this.$2){ex=2;lB=this.$0[e]}else{ex=1;lA=this.$0[e]}}return{item1:ex,item2:lA,item3:lB}},getTextRunOffset:function(e){return this.$3.$6(e)},getTextRunCount:function(e){return this.$3.$5(e)},getLabelWidth:function(e){return this.$3.$9(e)},getLabelHeight:function(e){return this.$3.$2(e)},isTextAlignEnd:function(e){return this.$3.$a(e)},getTextStyle:function(e){return this.$3.$8(e)},computeLabelBoxPosition:function(e,ex,lA){return this.$3.$0(e,ex,lA,this.get_lineWidth(),this.$2)},getTextRun:function(e){return this.$3.$4(e)},getTextRunPosition:function(e){return this.$3.$7(e)},getFillColor:function(e){return this.$1.$0(e)},getFillRect:function(e,ex,lA){return this.$1.$1(this.$2,e,ex,lA)}});hY.$ctor2.prototype=hY.$ctor1.prototype=hY.prototype;ss.initClass(hZ,a,{getRefLines:function(e){if(!ss.keyExists(this.$4,e)){return[]}return this.$4[e]},getRefLineById:function(e){if(!ss.keyExists(this.$5,e)){return[]}return this.$5[e]},getRefBands:function(e){if(!ss.keyExists(this.$3,e)){return[]}return this.$3[e]},$1:function(e,ex,lA){if(!ss.isValue(e.ReferenceLineDetails)||!ss.isValue(e.LayoutElements)){return}var lB=e.LayoutElements;if(lB.ReferenceLineSpecId.length===0){return}var lC=new m(e);var lD=null;var lE=lC.$7[0];var lF=lC.$6[0];var lG=lC.$j[0];var lH=0;var lI=0;for(var lJ=0;lJ<lC.$7.length;++lJ){var lK=lC.$7[lJ];lI=lC.$8.indexOf(lK);if(lI===-1){break}var lL=lC.$0[lJ];if(lL!==1&&lL!==2){continue}var lM=lL===1;if(lJ===0||lK!==lE){if(ss.isValue(lD)){lD.$1(lF,lH,lJ);lD.$0(lG,ex,lA)}lD=new n(lC,lI,lJ,lM,lK);lE=lK;lG=lC.$j[lI];lF=lC.$6[lJ];lH=lJ}else if(lF!==lC.$6[lJ]){lD.$1(lF,lH,lJ);lF=lC.$6[lJ];lH=lJ}}lD.$1(lF,lH,lC.$7.length);lD.$0(lG,ex,lA);eM.notifyFontsFromTextStyleTable(lC.$d);eM.notifyFontsFromTextStyleTable(lC.$h)},$2:function(e){var ex=function(lD,lE){return lD.item1-lE.item1};var lA={};var lB=new ss.ObjectEnumerator(e);try{while(lB.moveNext()){var lC=lB.current();lC.value.sort(ex);lA[lC.key]=lC.value.map(function(lD){return lD.item2})}}finally{lB.dispose()}return lA}},gV);ss.initClass(ia,a,{get_columns:function(){return this.$3$1},set_columns:function(e){this.$3$1=e},get_instanceType:function(){return'relationalTable'},get_canHaveChildren:function(){return true},get_isUnsortedContainer:function(){return true},update:function(e,ex){this.swapAndCopyPresModel(e);this.set_columns(ex)}},es);ss.initClass(ib,a,{},bM);ss.initClass(ic,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'replace-file-connection-from-file-upload'},this.c))}},ss.makeGenericType(bd,[Object,id]));ss.initClass(id,a,{hasDataSourceError:function(){return ss.keyExists(this.$$c,'dataSourceCreationError')}});ss.initClass(ie,a,{get_workbookId:function(){return this.$2},get_sheetId:function(){return this.$1},get_customizedView:function(){return this.$0},get_originalViewURL:function(){return ss.formatString('{0}/{1}',this.get_workbookId(),this.get_sheetId())}});ss.initClass(ig,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'reset-field-caption'},this.c))}},ss.makeGenericType(bd,[Object,ih]));ss.initClass(ih,a,{});ss.initClass(ii,a,{},ss.makeGenericType(kV,[Object,ij]));ss.initClass(ij,a,{});ss.initClass(ik,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'resize-axis-region'},this.c))}},ss.makeGenericType(bd,[Object,il]));ss.initClass(il,a,{});ss.initClass(im,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'resize-cell-web'},this.c))}},ss.makeGenericType(bd,[Object,io]));ss.initClass(io,a,{});ss.initClass(ip,a,{get_count:function(){return this.pm.count},get_fieldName:function(){return this.pm.fn},get_height:function(){return this.pm.h},get_width:function(){return this.pm.w},update:function(e){this.swapAndCopyPresModel(e)}},gV);ss.initClass(iq,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'resize-header-region'},this.c))}},ss.makeGenericType(bd,[Object,ir]));ss.initClass(ir,a,{});ss.initClass(it,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'resize-header-web'},this.c))}},ss.makeGenericType(bd,[Object,iu]));ss.initClass(iu,a,{});ss.initClass(iv,a,{add_resizeInfoUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_resizeInfoUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_totalCols:function(){return(ss.isValue(this.pm)?this.pm.colCount:0)},get_totalRows:function(){return(ss.isValue(this.pm)?this.pm.rowCount:0)},get_sheetHeight:function(){return this.pm.h},get_sheetWidth:function(){return this.pm.w},get_columnHeaders:function(){return this.$2$2},set_columnHeaders:function(e){this.$2$2=e},get_rowHeaders:function(){return this.$2$3},set_rowHeaders:function(e){this.$2$3=e},get_areRowHeadersWidthAdjustable:function(){return ss.isValue(this.get_rowHeaders())&&this.get_rowHeaders().length!==0&&this.get_rowHeaders()[this.get_rowHeaders().length-1].get_width()!==0},get_areColHeadersHeightAdjustable:function(){return ss.isValue(this.get_columnHeaders())&&this.get_columnHeaders().length!==0&&this.get_columnHeaders()[this.get_columnHeaders().length-1].get_height()!==0},get_areCellHeightsAdjustable:function(){return this.get_areRowHeadersWidthAdjustable()&&this.pm.cellHeightResizerEnabled},get_areCellWidthsAdjustable:function(){return this.get_areColHeadersHeightAdjustable()&&this.pm.cellWidthResizerEnabled},get_totalColumnHeadersHeight:function(){var e=0;var ex=this.get_columnHeaders();for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];e+=lB.get_height()}return e},update:function(e,ex){if(ss.isNullOrUndefined(this.cellSize)){this.cellSize=new ip(this)}if(ss.isValue(e.resizeEntity)){this.cellSize.update(e.resizeEntity)}if(ss.isValue(e.rowResizers)){this.set_rowHeaders([]);for(var lA=0;lA<e.rowResizers.length;lA++){var lB=e.rowResizers[lA];var lC=new ip(this);lC.update(lB);this.get_rowHeaders().push(lC)}}if(ss.isValue(e.colResizers)){this.set_columnHeaders([]);for(var lD=0;lD<e.colResizers.length;lD++){var lE=e.colResizers[lD];var lF=new ip(this);lF.update(lE);this.get_columnHeaders().push(lF)}}this.simpleSwapToUpdate(e,this.$2$1,ex)}},gV);ss.initClass(iw,a,{});ss.initEnum(ix,a,{noResponse:0,unauthorized:401,badRequest:400,forbidden:403,notFound:404,gone:410,payloadTooLarge:413,internalServerError:500,badGateway:502,serviceUnavailable:503});ss.initClass(iy,a,{});ss.initClass(iz,a,{});ss.initClass(iA,a,{});ss.initClass(iB,a,{get_dataStore:function(){return this.$1$1},set_dataStore:function(e){this.$1$1=e},get_vtl:function(){return this.$1$2},set_vtl:function(e){this.$1$2=e},get_dataStoreUpdater:function(){return this.$1$3},set_dataStoreUpdater:function(e){this.$1$3=e}});iB.$ctor1.prototype=iB.prototype;ss.initClass(iC,a,{});ss.initClass(iD,a,{get_isRuntimeSupported:function(){return this.$3},set_isRuntimeSupported:function(e){this.$3=e;this.$1()},get_isRuntimeReady:function(){return this.$2},set_isRuntimeReady:function(e){this.$2=e;this.$1()},addDebugViewToElement:function(e){if(ss.isNullOrUndefined(this.$4)){this.$4=$('<div></div>');this.$4.appendTo(e)}this.$0()},$0:function(){if(this.get_isRuntimeSupported()){var e='';if(!this.$2){e=' pending-runtime'}this.$4.html("<div class='tab-RuntimeDebugStatus"+e+"'>RE</div>")}else{this.$4.html("<div class='tab-RuntimeDebugStatus no-runtime'>NR</div>")}},$1:function(){if(!ss.isNullOrUndefined(this.$4)){this.$0()}}});ss.initClass(iE,a,{});ss.initEnum(iF,a,{runtimeLoaded:0});ss.initClass(iG,a,{});ss.initClass(iH,a,{});ss.initClass(iI,a,{get_sceneElementPM:function(){return this.$2$1},set_sceneElementPM:function(e){this.$2$1=e},get_paneId:function(){return this.$2$2},set_paneId:function(e){this.$2$2=e},get_index:function(){return this.get_sceneElementPM().uindex},get_paneIndex:function(){return this.get_sceneElementPM().paneIndex},get_tupleId:function(){return this.get_sceneElementPM().tupleId},get_bounds:function(){return this.$2$3},set_bounds:function(e){this.$2$3=e},get_visualPart:function(){return this.get_sceneElementPM().visualPart},get_detail:function(){return this.get_sceneElementPM().sceneModelDetailEnum},get_hitType:function(){return this.get_sceneElementPM().sceneModelHitType},get_detailId:function(){return this.get_sceneElementPM().detailId},get_cellId:function(){return this.get_sceneElementPM().cellId},get_worldOffset:function(){return this.get_sceneElementPM().worldOffset},get_markState:function(){return this.get_sceneElementPM().markState},get_hitDistance:function(){return this.get_sceneElementPM().distance},get_overlayHit:function(){return this.get_sceneElementPM().useForOverlayHitTest}},gV);ss.initClass(iJ,a,{add_newSceneModel:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newSceneModel:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_visualListModels:function(){return this.$d},get_refLineVisualLists:function(){return this.$9},get_trendLineVisualLists:function(){return this.$c},get_referenceLines:function(){return this.$a},get_drawFirstParts:function(){return this.$7},get_drawLastParts:function(){return this.$8},get_paneDescriptorCount:function(){return ss.getKeyCount(this.get_sceneRuntimeData().get_finalDataStore().PDMarks)},get_sceneRuntimeData:function(){if(ss.isNullOrUndefined(this.$b)){if(_.isNull(this.pm)||_.isNull(this.pm.runtimeFinalDatastore)){this.$b=new tab.RuntimeData('')}else{this.$b=new tab.RuntimeData(this.pm.runtimeFinalDatastore)}}return this.$b},set_sceneRuntimeData:function(e){this.$b=e},update:function(e,ex){if(ss.isValue(e.markShapeList)){Y.get_instance().get_shapeManager().updateCustomImageMap(e.markShapeList)}this.$5(e);this.$3();this.$6(this.$7,this.get_sceneRuntimeData().get_drawFirsts(),true,ex);this.$6(this.$8,this.get_sceneRuntimeData().get_drawLasts(),false,ex);this.$2();var lA=ss.isNullOrUndefined(e.userPaneInfo);e.currentPage=e.currentPage||0;this.swapAndCopyPresModel(e);if(lA){this.pm.userPaneInfo=null}this.$1();this.$4();this.raiseEvent(this.$2$1,ex)},getMutableCopyOfPresModel:function(){return this.getMutableCopyOfPresModelInternal(true)},$1:function(){var e=this.get_sceneRuntimeData().get_panes();ss.clear(this.$9);ss.clear(this.$c);if(ss.isValue(e)){for(var ex=0;ex<e.length;ex++){var lA=e[ex];if(ss.isValue(lA.drawPane)){for(var lB=0;lB<lA.drawPane.length;lB++){var lC=lA.drawPane[lB];if(ss.isValue(lC)){if(lC.visualPart==='ref-lines'){this.$9.push(lC)}else if(lC.visualPart==='trend-lines'){this.$c.push(lC)}}}}}}},$3:function(){if(tab.MiscUtil.isNullOrEmpty$2(this.get_sceneRuntimeData())){ss.clearKeys(this.get_visualListModels());return}var e=new ss.ObjectEnumerator(this.get_visualListModels());try{while(e.moveNext()){var ex=e.current();var lA={$:ex.key};var lB=_.find(this.get_sceneRuntimeData().get_drawFirsts(),ss.mkdel({currentPart:lA},function(lC){return this.currentPart.$===lC.visualPart}));if(ss.isNullOrUndefined(lB)){lB=_.find(this.get_sceneRuntimeData().get_drawLasts(),ss.mkdel({currentPart:lA},function(lC){return this.currentPart.$===lC.visualPart}))}if(ss.isNullOrUndefined(lB)){delete this.get_visualListModels()[lA.$]}}}finally{e.dispose()}},$5:function(e){if(ss.isValue(e.runtimeFinalDatastoreLocal)&&ss.isValue(this.$b)){var ex=new tab.DatastoreHandle(e.runtimeFinalDatastoreLocal,null);tab.RuntimeWebModule.proxy.marshallDatastore(ex).done(ss.mkdel(this,function(lA){this.$b.update(lA)}))}else if(ss.isValue(e.runtimeFinalDatastore)){this.$b=new tab.RuntimeData(e.runtimeFinalDatastore)}else{this.$b=null}},$6:function(e,ex,lA,lB){ss.clear(e);for(var lC=0;lC<ex.length;lC++){var lD=ex[lC];eM.notifyFontsFromVisualListPresModel(lD);var lE=lD.visualPart;if(!ss.keyExists(this.$d,lE)){this.$d[lE]=new kH(this)}if(lA&&ss.contains(e,lE)){continue}e.push(lE);this.$d[lE].update(lD,lB)}},$2:function(){var e=this.get_sceneRuntimeData().get_panes();if(ss.isValue(e)){for(var ex=0;ex<e.length;ex++){var lA=e[ex];for(var lB=0;lB<lA.drawPane.length;lB++){var lC=lA.drawPane[lB];eM.notifyFontsFromVisualListPresModel(lC)}}}if(ss.isValue(this.get_sceneRuntimeData())&&ss.isValue(this.get_sceneRuntimeData().get_finalDataStore().PDMarks)){var lD=new ss.ObjectEnumerator(this.get_sceneRuntimeData().get_finalDataStore().PDMarks);try{while(lD.moveNext()){var lE=lD.current();eM.notifyFontsFromMarkLayoutOutput(lE.value)}}finally{lD.dispose()}}},$4:function(){this.$a=null;if(ss.isValue(this.get_sceneRuntimeData().get_finalDataStore().RefLines)){this.$a=new hZ(this,this.get_sceneRuntimeData().get_finalDataStore().RefLines)}}},gV);ss.initClass(iK,a,{});ss.initClass(iL,a,{get_schedulePresModel:function(){return this.$9},set_schedulePresModel:function(e){this.$9=e},get_scheduleFrequencyDescription:function(){return this.$8},set_scheduleFrequencyDescription:function(e){this.$8=e},generateFrequencyDescription:function(){var e=new Date;var ex=0-e.getTimezoneOffset();var lA=0;var lB=this.$9.scheduleDetails.startTime;var lC=0;var lD='';if(tsConfig.display_schedules_in_client_timezone){lA=ex-this.$9.serverTimezoneOffset;lB=iL.$2(this.$9.scheduleDetails.startTime,lA);lC=iL.$0(this.$9.scheduleDetails.startTime,lA)}switch(this.$9.scheduleType){case'Hourly':{lD=this.$2(lB,lA);break}case'Daily':{lD=this.$0(lB);break}case'Weekly':{lD=this.$4(lB,lC);break}case'Monthly':{lD=this.$3(lB,lC);break}default:{throw new ss.Exception('Unknown schedule type: '+this.$9.scheduleType)}}if(!this.$9.parallel){lD=tab.Strings.SerialScheduleDescription(lD,tab.Strings.SerialScheduleDescriptionSuffix)}return lD},$7:function(e,ex,lA){var lB=ss.Int32.div(e,60);if(ex===0){if(e<60){return tab.Strings.ScheduleEveryXMinutesDescription(e)}else if(lB===1){return tab.Strings.ScheduleEveryOneHourDescription}else{return tab.Strings.ScheduleEveryXHoursStartingAtYDescription(ss.Int32.div(e,60),iL.$1(lA))}}else if(ex===15){if(e<60){if(e===30){return tab.Strings.ScheduleEvery30MinutesDescription}else{return tab.Strings.ScheduleEveryXMinutesDescription(e)}}else{if(lB===1){return tab.Strings.ScheduleEveryOneHourAtXMinutesPastDescription(ex)}return tab.Strings.ScheduleEveryXHoursStartingAtYDescription(lB,iL.$1(lA))}}else if(ex===30){if(e<60){return tab.Strings.ScheduleEveryXMinutesDescription(e)}else{if(lB===1){return tab.Strings.ScheduleEveryOneHourAtXMinutesPastDescription(ex)}return tab.Strings.ScheduleEveryXHoursStartingAtYDescription(lB,iL.$1(lA))}}else if(ex===45){if(e<60){if(e===30){return tab.Strings.ScheduleEvery30MinutesDescription}else{return tab.Strings.ScheduleEveryXMinutesDescription(e)}}else{if(lB===1){return tab.Strings.ScheduleEveryOneHourAtXMinutesPastDescription(ex)}return tab.Strings.ScheduleEveryXHoursStartingAtYDescription(lB,iL.$1(lA))}}else{throw new ss.Exception('Unsupported schedule minutes after the hour: '+ex)}},$2:function(e,ex){var lA=(this.$9.scheduleDetails.endTime+ex)%1440;if(e===lA){return this.$7(this.$9.scheduleDetails.recurrenceMinutes,e%60,e)}var lB;if(this.$9.scheduleDetails.recurrenceMinutes<60){lB=tab.Strings.Minutes(this.$9.scheduleDetails.recurrenceMinutes)}else if(this.$9.scheduleDetails.recurrenceMinutes>60){lB=tab.Strings.Hours(ss.Int32.div(this.$9.scheduleDetails.recurrenceMinutes,60))}else{lB=tab.Strings.Hour}return tab.Strings.ScheduleHourlyDescription(lB,iL.$1(e),iL.$1(lA))},$0:function(e){return tab.Strings.ScheduleDailyDescription(iL.$1(e))},$4:function(e,ex){var lA=this.$9.scheduleDetails.recurrenceDaysOfWeek;if(ex!==0){lA=this.$6(this.$9.scheduleDetails.recurrenceDaysOfWeek,ex)}var lB=this.$1(lA);return tab.Strings.ScheduleWeeklyDescription(iL.$1(e),lB)},$6:function(e,ex){var lA=[];for(var lB=0;lB<e.length;lB++){var lC=ss.indexOf(iL.$7,e[lB]);var lD=(lC+ex+iL.$7.length)%iL.$7.length;lA.push(iL.$7[lD])}return lA},$1:function(e){switch(e.length){case 1:{return iL.$6[e[0]]}case 2:{return tab.Strings.ListLengthTwo(iL.$6[e[0]],iL.$6[e[1]])}case 3:{return tab.Strings.ListLengthThree(iL.$6[e[0]],iL.$6[e[1]],iL.$6[e[2]])}case 4:{return tab.Strings.ListLengthFour(iL.$6[e[0]],iL.$6[e[1]],iL.$6[e[2]],iL.$6[e[3]])}case 5:{return tab.Strings.ListLengthFive(iL.$6[e[0]],iL.$6[e[1]],iL.$6[e[2]],iL.$6[e[3]],iL.$6[e[4]])}case 6:{return tab.Strings.ListLengthSix(iL.$6[e[0]],iL.$6[e[1]],iL.$6[e[2]],iL.$6[e[3]],iL.$6[e[4]],iL.$6[e[5]])}case 7:{return tab.Strings.ListLengthSeven(iL.$6[e[0]],iL.$6[e[1]],iL.$6[e[2]],iL.$6[e[3]],iL.$6[e[4]],iL.$6[e[5]],iL.$6[e[6]])}default:{throw new ss.Exception('Unknown list length: '+e.length)}}},$3:function(e,ex){var lA=this.$9.scheduleDetails.recurrenceDayOfMonth;if(ex!==0){lA=this.$5(this.$9.scheduleDetails.recurrenceDayOfMonth,ex)}if(lA==='Last'){return tab.Strings.ScheduleMonthlyDescriptionLast(iL.$1(e))}else if(lA==='SecondToLast'){return tab.Strings.ScheduleMonthlyDescriptionSecondToLast(iL.$1(e))}var lB=lA.charCodeAt(lA.length-1);var lC='';if(lB===49){lC=tab.Strings.FirstEnding(lA)}else if(lB===50&&lA!=='12'){lC=tab.Strings.SecondEnding(lA)}else if(lB===51&&lA!=='13'){lC=tab.Strings.ThirdEnding(lA)}else{lC=tab.Strings.NumberEnding(lA)}return tab.Strings.ScheduleMonthlyDescription(lC,iL.$1(e))},$5:function(e,ex){var lA=new Date;var lB=(new Date(lA.getFullYear(),lA.getMonth()+1,0)).getDate();if(e==='Last'){if(ex>0){return'1'}else if(ex<0){return'SecondToLast'}else{return'Last'}}if(e==='1'&&ex<0){return'Last'}var lC=parseInt(e);var lD=(lC+ex+lB)%lB;return lD.toString()}});ss.initClass(iM,a,{});ss.initClass(iN,a,{});ss.initClass(iO,a,{});ss.initClass(iP,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'select-by-tuple-value'},this.c))}},ss.makeGenericType(bd,[Object,iQ]));ss.initClass(iQ,a,{});ss.initClass(iR,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabsrv',cmd:'select-dataserver-data-source-for-proxy'},this.c))}},ss.makeGenericType(bd,[Object,iS]));ss.initClass(iS,a,{});ss.initClass(iT,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'select-extension-and-add-to-dashboard'},this.c))}},ss.makeGenericType(bd,[Object,iU]));ss.initClass(iU,a,{});ss.initClass(iV,a,{});ss.initClass(iW,a,{add_newSelection:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newSelection:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_selectionPresModel:function(){if(ss.isValue(this.$5)){var e={};e.selectionType='tuples';e.objectIds=this.$5;return e}return this.$4()},get_selectionType:function(){return this.$4().selectionType},get_nodes:function(){return this.$4().selectedNodes},get_ids:function(){if(ss.isValue(this.$5)){return this.$5}return this.$4().objectIds},get_hashKey:function(){var e=this.get_selectionType().toString();if(this.get_selectionType()==='legend-items'){e+='-'+this.get_selectionPresModel().legendSelectionInfo.legendType+':'+this.get_selectionPresModel().legendSelectionInfo.legendColumns.join(';')}return e},$4:function(){return this.pm},getMutableCopyOfPresModel:function(){return this.getMutableCopyOfPresModelInternal(true)},isObjectSelected:function(e){if(ss.isNullOrUndefined(this.$4())){return false}if(ss.isNullOrUndefined(this.get_ids())){return false}return ss.contains(this.get_ids(),e)},isLegendItemSelected:function(e){if(this.get_selectionType()!=='legend-items'){return false}if(ss.isNullOrUndefined(this.$6)){this.$6={};if(ss.isValue(this.get_ids())){var ex=this.get_ids();for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];this.$6[lB]=true}}}return ss.keyExists(this.$6,e.objectId)},isAnyLegendItemSelected:function(){if(this.get_selectionType()!=='legend-items'){return false}if(ss.isValue(this.get_ids())){return this.get_ids().length>0}return false},isNodeSelected:function(e){if(this.isEmpty||ss.isNullOrUndefined(e.node)){return false}return ss.isValue(this.$1(e.node))},findNodeSelection:function(e){return this.$1(e.node)},isNodeAncestorSelected:function(e){if(ss.isNullOrUndefined(e.node)||ss.isNullOrUndefined(e.node.columnIndices)){return false}var ex=e.node;var lA=ex.columnIndices;var lB=ex.aliasIndices;for(var lC=0;lC<ex.columnIndices.length;lC++){var lD=ss.arrayExtract(lA,lC);var lE=ss.arrayExtract(lB,lC);if(ss.isValue(this.$2(lD,lE,ex.axisOrientation,null,ex.duplicateIndex,ex.pageIndex))){return true}}return false},setOverriddenTupleIds:function(e,ex){if(this.$4().selectionType!=='tuples'){return}if(_.isEqual(this.$5,e)||tab.MiscUtil.isNullOrEmpty$2(this.$5)&&tab.MiscUtil.isNullOrEmpty$2(e)){return}this.$5=e;this.$3();this.raiseEvent(this.$2$1,ex)},update:function(e,ex){if(this.isNewPresModelSameAsOld(e)&&ss.isNullOrUndefined(this.$5)){return}this.$7=null;this.$6=null;this.$5=null;this.swapAndCopyPresModel(e);this.$3();this.raiseEvent(this.$2$1,ex)},isNewPresModelSameAsOld:function(e){if(ss.isNullOrUndefined(this.pm)!==ss.isNullOrUndefined(e)){return false}var ex=e;if(ex.selectionType!==this.get_selectionPresModel().selectionType){return false}if(ss.isValue(ex.objectIds)&&!_.isEqual(ex.objectIds,this.get_selectionPresModel().objectIds)){return false}if(ss.isValue(ex.selectedNodes)&&!_.isEqual(ex.selectedNodes,this.get_selectionPresModel().selectedNodes)){return false}if(ss.isValue(ex.legendSelectionInfo)&&!_.isEqual(ex.legendSelectionInfo,this.get_selectionPresModel().legendSelectionInfo)){return false}return true},$1:function(e){return this.$2(e.columnIndices,e.aliasIndices,e.axisOrientation,e.fn,e.duplicateIndex,e.pageIndex)},$2:function(e,ex,lA,lB,lC,lD){if(ss.isNullOrUndefined(e)&&ss.isNullOrUndefined(ex)&&ss.isNullOrUndefined(lB)&&ss.isNullOrUndefined(lA)){return null}if(ss.isNullOrUndefined(this.$7)){this.$7={};var lE=this.$4();if(ss.isValue(lE.selectedNodes)){for(var lF=0;lF<lE.selectedNodes.length;lF++){var lG=lE.selectedNodes[lF];this.$7[iW.$0(lG.columnIndices,lG.aliasIndices,lG.axisOrientation,lG.fn,lG.duplicateIndex,lG.pageIndex)]=lG}}}if(ss.getKeyCount(this.$7)===0){return null}return this.$7[iW.$0(e,ex,lA,lB,lC,lD)]},createSelectionToken:function(){return this.get_selectionPresModel()},$3:function(){this.isEmpty=tab.MiscUtil.isNullOrEmpty$2(this.get_ids())&&tab.MiscUtil.isNullOrEmpty$2(this.$4().selectedNodes)}},gV);ss.initClass(iX,a,{get_invalidateViz:function(){return this.$1$1},set_invalidateViz:function(e){this.$1$1=e},get_reason:function(){return this.$1$2},set_reason:function(e){this.$1$2=e},get_objectIds:function(){return this.$1$3},set_objectIds:function(e){this.$1$3=e}});ss.initEnum(iY,a,{none:0,noPreviousToCompare:1,differentTuples:2,differentTrendOrRefLines:3});ss.initClass(iZ,a,{add_newSelections:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newSelections:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_isEmpty:function(){for(var e=0;e<this.selectionModels.length;e++){var ex=this.selectionModels[e];if(!ex.isEmpty){return false}}return true},get_hasPaneTableObjectSelection:function(){for(var e=0;e<this.selectionModels.length;e++){var ex=this.selectionModels[e];if(!ex.isEmpty&&ex.get_selectionType()!=='legend-items'&&ex.get_selectionType()!=='nodes'){return true}}return false},get_allLegendSelections:function(){return _.filter(this.selectionModels,function(e){return e.get_selectionType()==='legend-items'})},get_brushVizForNodeSelection:function(){if(this.nodeSelection.isEmpty){return false}var e=this.nodeSelection.get_nodes();for(var ex=0;ex<e.length;ex++){var lA=e[ex];if(jb.isCategoricalAndTupleAssociatedHeader(lA)){return true}}return false},getLegendSelection:function(e,ex){var lA=_.find(this.selectionModels,function(lB){return lB.get_selectionType()==='legend-items'&&ss.isValue(lB.get_selectionPresModel())&&lB.get_selectionPresModel().legendSelectionInfo.legendType===e&&_.isEqual(lB.get_selectionPresModel().legendSelectionInfo.legendColumns,ex)});if(ss.isNullOrUndefined(lA)){lA=this.$1('legend-items',hc.get_noopContext());lA.get_selectionPresModel().legendSelectionInfo.legendType=e;lA.get_selectionPresModel().legendSelectionInfo.legendColumns=ex}return lA},update:function(e,ex){var lA=_.compact(e);var lB=[];var lC=[];for(var lD=0;lD<lA.length;lD++){var lE=lA[lD];var lF;if(lE.selectionType==='legend-items'){lF=this.getLegendSelection(lE.legendSelectionInfo.legendType,lE.legendSelectionInfo.legendColumns)}else{lF=this.$2(lE.selectionType)}if(ss.isNullOrUndefined(lF)){lF=new iW(this,this.selectionModels.length);this.selectionModels.push(lF)}var lG=parseInt(lF.presModelKey.name);lB[lG]=lE;lF.update(lE,ex);lC.push(lF.get_hashKey())}for(var lH=0;lH<this.selectionModels.length;lH++){var lI=this.selectionModels[lH];if(ss.contains(lC,lI.get_hashKey())){continue}var lJ=iZ.$1(lI.get_selectionType());if(lJ.selectionType==='legend-items'){lJ.legendSelectionInfo=lI.get_selectionPresModel().legendSelectionInfo}lI.update(lJ,ex);var lK=parseInt(lI.presModelKey.name);lB[lK]=lI.get_selectionPresModel()}for(var lL=0;lL<lB.length;++lL){e[lL]=lB[lL]}var lM=new ja;lM.selections=e;if(this.isNewPresModelSameAsOld(lM)){return}this.swapAndCopyPresModel(lM);this.raiseEvent(this.$2$1,ex)},$2:function(e){return _.find(this.selectionModels,function(ex){return ex.get_selectionType()===e})},$1:function(e,ex){var lA=new iW(this,this.selectionModels.length);this.selectionModels.push(lA);var lB=iZ.$1(e);lA.update(lB,ex);return lA},createSelectionsToken:function(){return this.pm},computeSelectionsDiff:function(e,ex,lA){if(ss.isNullOrUndefined(e)){return new iX(true,1,null)}var lB=iX.noDifference();for(var lC=0;lC<e.selections.length;lC++){var lD=e.selections[lC];switch(lD.selectionType){case'ref-lines':case'trend-lines':{var lE=lD.objectIds||[];var lF=iZ.$0(lE,this.$2(lD.selectionType).get_ids());if(lF.length>0){return new iX(true,3,null)}break}case'tuples':{var lG=lD.objectIds;var lH=this.tupleSelection.get_ids();var lI=(ss.isValue(ex)?ex.objectIds:[]);var lJ=(ss.isValue(lA)?lA.get_ids():[]);var lK=lG.length+lI.length!==0!==(lH.length+lJ.length!==0);if(lK){return new iX(true,2,null)}var lL=iZ.$0(lG,lH);var lM=iZ.$0(lI,lJ);var lN=[];ss.arrayAddRange(lN,lL);ss.arrayAddRange(lN,lM);lB=new iX(false,2,Array.prototype.slice.call(lN));break}default:{break}}}return lB},hasTupleSelection:function(){if(ss.isNullOrUndefined(this.pm)){return false}var e=this.pm.selections;return _.any(e,function(ex){return ex.selectionType==='tuples'&&ex.objectIds.length>0})}},gV);ss.initClass(ja,a,{});ss.initClass(jb,a,{});ss.initClass(jc,a,{});ss.initClass(jd,a,{});ss.initClass(je,a,{});ss.initClass(jf,a,{get_completedDelegate:function(){return ss.mkdel(this,this.onComplete)},get_successDelegate:function(){return ss.mkdel(this,this.onSuccess)},get_errorDelegate:function(){return ss.mkdel(this,this.onError)},onComplete:function(e,ex){try{if(ss.isValue(this.$2)){this.$2(e,ex)}}finally{this.$0()}},onSuccess:function(e,ex,lA){try{var lB=ss.isInstanceOfType(e,Error);if(lB){this.$5.$7(e,lA,false,null)}else if(lA.status===202){var lC=lA['args'];var lD=new jg(this.$5,lC);lD.requestStatus();lB=true}if(!lB){if(ss.isValue(this.$4)){this.$4(e,ex,lA)}}}finally{this.$0()}},onError:function(e,ex,lA){try{if(ss.isValue(this.$3)){this.$3(e,ex,lA)}else{this.$5.$7(lA,e,false,null)}}finally{this.$0()}},$0:function(){if(this.$1){this.$1=false;this.$5.decrementWait()}}});ss.initClass(jg,a,{requestStatus:function(){var e=ss.mkdel(this,function(lC,lD,lE){this.$1(lD,lE)});var ex=ss.mkdel(this,function(lC,lD,lE){this.$0(lC,lD)});var lA=new jf(this.$8,null,e,ex,false,false);var lB={};lB.type='GET';lB.url=this.$9;lB.cache=false;lv.helper(lB,lA)},$1:function(e,ex){if(ex.status===204){this.$6=true}this.$2(e,ex)},$0:function(e,ex){if(ss.isNullOrUndefined(this.$5.complete)){this.$5.complete(e,ex)}},$2:function(e,ex){++this.$7;if(this.$7%10===0&&this.$4<4000){this.$4*=2}if(!this.$6){window.setTimeout(ss.mkdel(this,function(){this.requestStatus()}),this.$4)}else{var lA=this.$5['skipResendOriginal'];if(ss.isValue(lA)&&lA){if(ss.isValue(this.$5.complete)){this.$5.complete(ex,e)}}else{window.setTimeout(ss.mkdel(this,function(){this.$3()}),0)}}},$3:function(){if(!this.$5.async){delete this.$5['async']}lv.helper(this.$5)}});ss.initClass(jh,a,{});ss.initClass(ji,a,{});ss.initClass(jj,a,{handleCommandFailure:function(e,ex,lA,lB){if(tabBootstrap.ViewerBootstrap.get_instance().get_sessionBeingCleared()){return false}var lC=kR.createForCurrentWindowLocation();if(!this.$2(lC)){return false}if(!this.$0(ex.status)){return false}if(this.$3){return false}if(this.$1(tsConfig.sessionid)){return true}this.bootstrapRecoveredSession(lC);return true},$2:function(e){if(e.get_isCustomizedView()){return false}return e.get_isAuthoringUri()||e.get_isViewingUri()},$1:function(e){return ss.isValue(this.$4)&&ss.equalsT(this.$4,e)},$0:function(e){return e===410||e===404||e===502||e===503},bootstrapRecoveredSession:function(e){e.set_ignoreStickySession(true);dA.$1(this.$5);this.$4=tsConfig.sessionid;jk.switchToViz$1(e,ss.mkdel(this,function(ex,lA){this.$3=this.$1(tsConfig.sessionid);this.$4=null;e.set_ignoreStickySession(false)}),ss.mkdel(this,function(ex){var lA=20;var lB=ex.getHistoryTail(lA);tabBootstrap.ViewerBootstrap.get_instance().bootstrapRecoverSession(this.$4,lB)}))}},null,[gf]);ss.initClass(jk,a,{});ss.initClass(jl,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'set-dashboard-current-layout'},this.c))}},ss.makeGenericType(bd,[Object,jm]));ss.initClass(jm,a,{});ss.initClass(jn,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'set-dashboard-sizing-with-validation'},this.c))}},ss.makeGenericType(bd,[Object,jo]));ss.initClass(jo,a,{});ss.initClass(jp,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'set-variables-prompt-responded'},this.c))}},ss.makeGenericType(bd,[Object,jq]));ss.initClass(jq,a,{});ss.initClass(jr,a,{add_shapeLoaded:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_shapeLoaded:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},get_imageKeys:function(){return _.keys(this.$3)},getImageElement:function(e){if(ss.keyExists(this.$3,e)){return this.$3[e].imageElement}return null},getCachedCanvas:function(e){return this.$2[e]},generateCachedCanvas:function(e,ex){var lA=null;if(ss.isValue(ex)){lA=ex();if(ss.isValue(lA)){this.$2[e]=lA}}return lA},getCachedStampCanvas:function(e){return this.$4[e]},generateCachedStampCanvas:function(e,ex){if(ss.getKeyCount(this.$4)>=jr.get_canvasCacheCapacity()){return null}if(!ss.isValue(ex)){return null}var lA=ex();if(!ss.isValue(lA)){return null}this.$4[e]=lA;return lA},updateCustomImageMap:function(e){for(var ex=0;ex<e.length;ex++){var lA=e[ex];if(ss.isValue(lA)){this.$1(lA)}}},$1:function(e){var ex=e.shapeId;var lA=ex.toString();var lB=null;var lC=0;var lD=false;if(ss.keyExists(this.$3,lA)){lD=true;lB=this.$3[lA].imageElement;lC=this.$3[lA].imageSize}var lE=e.image;var lF=lE.length;if(lD&&(!ss.isValue(lB)||lF<=lC)){return}var lG=document.createElement('img');lG.src='data:image/png;base64,'+lE;this.$3[lA]={imageElement:lG,imageSize:lF};var lH=null;lH=ss.thisFix(ss.mkdel(this,function(){if(lD){ss.clearKeys(this.$2)}this.$0(ex);lG.removeEventListener('load',lH,false)}));lG.addEventListener('load',lH,false)},hasShape:function(e){return ss.keyExists(this.$3,e.toString())&&this.$3[e.toString()].imageElement.complete},$0:function(e){if(!ss.staticEquals(this.$1$1,null)){this.$1$1(e)}},clearShapeStampCache:function(){ss.clearKeys(this.$4)}});ss.initClass(js,a,{get_palette:function(){return this.$0},get_shapeType:function(){return this.$1},equals$1:function(e){return ss.isValue(e)&&ss.referenceEquals(this.$0,e.$0)&&this.$1===e.$1},toString:function(){if(ss.isNullOrUndefined(this.$0)){return this.get_shapeType().toString()}return':'+this.get_palette()+'/'+this.get_shapeType()}});ss.initClass(jt,a,{});ss.initClass(ju,a,{get_isDashboard:function(){return this.pm.isDashboard},get_isIncluded:function(){return this.pm.isIncluded},get_name:function(){return this.pm.name},update:function(e){this.swapAndCopyPresModel(e)}},gV);ss.initClass(jv,a,{add_sheetListUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_sheetListUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_sheets:function(){return this.$2},update:function(e,ex){if(ss.isValue(e.sheetListItems)){this.$2=[];for(var lA=0;lA<e.sheetListItems.length;lA++){var lB=new ju(this.$1,lA);lB.update(e.sheetListItems[lA]);this.$2.push(lB)}}this.simpleSwapToUpdate(e,this.$2$1,ex)}},gV);ss.initClass(jw,a,{get_visualId:function(){return gY.getVisualId(this.sheetId)},requestHSMChildren:function(e,ex,lA,lB){if(!tsConfig.allow_filter){return}var lC=function(lI,lJ,lK){lA(lI)};var lD=this.$0(null,lC,null,'none');var lE=new Object;lE['name']='file';lE['filename']='file';lE['contentType']='text/javascript';lE['content']=JSON.stringify(ex);var lF=ss.mkdict(['_method','PUT']);var lG=lv.getMultipartData(lE,lF);var lH={};lH.type='POST';lH.url=this.formatFilterReference(this.sheetId,e,'show_children');lH.dataType='json';lH.contentType='multipart/form-data; boundary='+lG.header;lH.data=lG.body;this.$c(lH,lD)},getFilterItems:function(e,ex,lA,lB,lC){if(!tsConfig.allow_filter){return}var lD=function(lH,lI,lJ){lB(lH)};var lE=this.$0(null,lD,null,'none');var lF={};lF['fromIndex']=lA.get_from();lF['toIndex']=lA.get_to();lF['domain']=ex;var lG=this.basicGetOpts(this.formatFilterReference(this.sheetId,e,'getfilteritems'));lG.data=lF;this.$c(lG,lE)},searchFilter:function(e,ex,lA,lB,lC,lD,lE){if(!tsConfig.allow_filter){return null}var lF=function(lL,lM,lN){var lO=lL;lD(lO)};var lG=function(lL,lM,lN){lE(lN)};var lH=this.$0(null,lF,lG,'none');var lI=(lB?'searchwithindex':'search');var lJ=this.basicGetOpts(this.formatFilterReference(this.sheetId,e,lI));var lK=ss.mkdict(['query',ex,'maxRows',lA,'domain',lC]);lJ.data=lK;return this.$c(lJ,lH)}},be);ss.initClass(jx,a,{},gV);ss.initClass(jy,a,{},gV);ss.initClass(jz,a,{add_shelfChanged:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_shelfChanged:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_paneId:function(){return(ss.isValue(this.$1().paneSpec)?this.$1().paneSpec:0)},get_shelfType:function(){return this.$1().shelfType},get_pills:function(){return this.$2},get_tooltip:function(){return tableau.format.stripFormattedText(this.$1().tooltip)},get_isVisible:function(){return this.$1().showShelf},$1:function(){return this.pm},findPill:function(e){return _.find(this.get_pills(),function(ex){return ex.pm.shelfItemId===e})},getMutableCopyOfPresModel:function(){return this.getMutableCopyOfPresModelInternal(true)},update:function(e,ex,lA){if(this.isNewPresModelSameAsOld(e)){return}if(e.shelfItems===null){this.$2=[]}else if(ss.isValue(e.shelfItems)){var lB=[];var lC=new jx(this);for(var lD=0;lD<e.shelfItems.length;lD++){var lE=e.shelfItems[lD];var lF=lE.fn;var lG;if(ss.isNullOrEmptyString(lF)&&e.shelfType==='encoding-shelf'){lG=new hb}else{lG=ex.findField(lF)}if(ss.isNullOrUndefined(lG)){lE.isInvalid=true}if(lE.isInvalid){var lH=new eq(new et('',ex.findDataSourceFromGlobalFieldName(lF)));var lI={type:'column',fn:lF,description:lF,fieldIconIdx:0};lH.update(lI);lG=lH}var lJ=new hv(lC,lD);lJ.update(lE,lG);lB.push(lJ)}this.$2=lB}this.swapAndCopyPresModel(e);this.raiseEvent$1(jz).call(this,this.$2$1,this,lA)}},gV);ss.initClass(jA,a,{add_newShelves:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newShelves:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_shelves:function(){return this.$3},findShelf:function(e){return this.$2(this.$3,e)},update:function(e,ex,lA,lB){if(this.isNewPresModelSameAsOld(e)){return}this.swapAndCopyPresModel(e);this.$1(e,ex,lA,lB);this.raiseEvent(this.$2$1,lB)},$1:function(e,ex,lA,lB){if(ss.isValue(e)){var lC=ss.arrayClone(this.$3);for(var lD=0;lD<e.shelfList.length;lD++){var lE={$:e.shelfList[lD]};if(ss.isNullOrUndefined(lE.$.paneSpec)&&ss.isValue(lA)){lE.$.paneSpec=ss.unbox(lA)}var lF=_.find(this.$3,ss.mkdel({shelf:lE},function(lI){return lI.get_shelfType()===this.shelf.$.shelfType&&lI.get_paneId()===(this.shelf.$.paneSpec||0)}));if(ss.isValue(lF)){ss.remove(lC,lF);lF.update(lE.$,ex,lB)}else{this.$3.push(jA.createShelfModel(this,lE.$,ex,lD,lB))}}for(var lG=0;lG<lC.length;lG++){var lH=lC[lG];ss.remove(this.$3,lH)}}},$2:function(e,ex){return _.find(e,function(lA){return lA.get_shelfType()===ex})}},gV);ss.initClass(jB,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'show-dashboard-title'},this.c))}},ss.makeGenericType(bd,[Object,jC]));ss.initClass(jC,a,{});ss.initClass(jD,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'show-edit-axis-dialog'},this.c))}},ss.makeGenericType(bd,[Object,jE]));ss.initClass(jE,a,{});ss.initClass(jF,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'show-image-object-config-dialog'},this.c))}},ss.makeGenericType(bd,[Object,jG]));ss.initClass(jG,a,{});ss.initClass(jH,a,{get_simpleCommand:function(){return this.$0['simpleCommand'.toString()]},set_simpleCommand:function(e){this.$0['simpleCommand'.toString()]=e}});ss.initClass(jI,a,{get_fontFamilies:function(){return Array.prototype.slice.call(this.$1)},toSimpleFontList:function(){return jI.$0(this.$1)},$0:function(e){this.$1=[];var ex=ss.getEnumerator(e);try{while(ex.moveNext()){var lA=ex.current();this.$1.push(new eK.$ctor1(lA,[lA]))}}finally{ex.dispose()}}});jI.$ctor1.prototype=jI.$ctor2.prototype=jI.prototype;ss.initClass(jJ,a,{add_sizeInfoUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_sizeInfoUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_name:function(){return this.pm.name},get_width:function(){return this.pm.w},get_height:function(){return this.pm.h},update:function(e,ex){this.simpleSwapToUpdate(e,this.$2$1,ex)}},gV);ss.initClass(jK,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'sort-from-indicator'},this.c))}},ss.makeGenericType(bd,[Object,jL]));ss.initClass(jL,a,{});ss.initClass(jM,a,{add_newSortIndicators:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newSortIndicators:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_sortIndicatorsPresModel:function(){return this.pm},update:function(e,ex){this.simpleSwapToUpdate$1(Object).call(this,e,this.$2$1,e,ex)}},gV);ss.initClass(jN,a,{});ss.initClass(jP,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'start-new-data-alert'},this.c))}},ss.makeGenericType(bd,[Object,jQ]));ss.initClass(jQ,a,{});ss.initClass(jR,a,{});ss.initClass(jS,a,{add_dashboardDisposal:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_dashboardDisposal:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_newStoryPoint:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_newStoryPoint:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_dashboardModel:function(){return this.$4},get_isBackingSheetDashboard:function(){return this.$3().isBackingSheetDashboard},$3:function(){return this.pm},get_storyPointId:function(){return this.$3().storyPointId},get_currentSheet:function(){return this.$3().currentSheet},update:function(e,ex){if(!ss.isValue(e)){return}if(ss.isValue(this.$3())&&(ss.isNullOrEmptyString(this.get_currentSheet())||this.get_storyPointId()!==e.storyPointId||this.$1(e))){Y.get_instance().get_shapeManager().clearShapeStampCache();this.presModelKey=new hF(e.storyPointId.toString(),0);if(ss.isValue(this.$4)){this.raiseEvent(this.$2$1,ex);this.$4=null}this.$4=new cS(this);this.$2(e.dashboardPresModel,ex);this.raiseEvent(this.$2$2,ex)}else{this.$2(e.dashboardPresModel,ex)}this.swapPresModel(e)},$2:function(e,ex){if(ss.isValue(e)){this.get_dashboardModel().update(e,ex)}},$1:function(e){return ss.isNullOrEmptyString(e.currentSheet.toString())&&!ss.isNullOrEmptyString(this.get_currentSheet())}},gV);ss.initClass(jT,a,{get_currentStoryPoint:function(){return this.$1},update:function(e,ex){if(!ss.isValue(this.$1)){this.$1=new jS(this,e.storyPointId)}this.$1.update(e,ex)}},gV);ss.initClass(jU,a,{hasStoryPoint:function(e){return this.$3.has(e.toString())},getStoryPoint:function(e){var ex=this.$3.get(e.toString());return ex.$0()},addStoryPoint:function(e,ex){this.$3.add(e.toString(),new F(ex))},$0:function(e){var ex=e.get_worldUpdateCommand();var lA=e.get_applicationPresModel();var lB=e.get_sheetChanged();if(this.$2(lA,lB)){this.$1()}if(!jU.$3(lA)){return}if(!_.contains(jU.$5.value(),ex.commandName)){return}var lC=jU.$1(lA);if(ss.isNullOrUndefined(lC)){return}var lD=lC.storyPointId.toString();this.$3.add(lD,new F(lC))},$2:function(e,ex){if(jU.$2(e)){return false}if(!e.workbookPresModel.dashboardPresModel.isStory||ex){return true}return false},$1:function(){this.$3.clear();jU.$4=null},dispose:function(){this.$1();lt.get().remove_onCommandResponse(ss.mkdel(this,this.$0))}},null,[ss.IDisposable]);ss.initClass(jV,a,{get_isStory:function(){return this.$1$1},set_isStory:function(e){this.$1$1=e},get_storyPointId:function(){return this.$1$2},set_storyPointId:function(e){this.$1$2=e},get_sheetName:function(){return this.$1$3},set_sheetName:function(e){this.$1$3=e}});ss.initClass(jW,a,{get_instanceType:function(){return'structuredMeasure'},get_canHaveChildren:function(){return true},get_measures:function(){return this.$4$1},set_measures:function(e){this.$4$1=e},update$1:function(e,ex){this.swapAndCopyPresModel(e);this.set_measures(ex)}},eq);ss.initClass(jX,a,{add_styleUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_styleUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_styledBoxPresModel:function(){return ss.coalesce(this.pm,new Object)},get_hasFill:function(){return ss.coalesce(this.get_styledBoxPresModel().hasFill,false)},get_fillColor:function(){return ss.coalesce(this.get_styledBoxPresModel().fillColor,'rgba(0, 0, 0, 0)')},get_margin:function(){return this.$1.get_defaultValue()},get_marginTop:function(){return this.$1.get_topValue()},get_marginLeft:function(){return this.$1.get_leftValue()},get_marginBottom:function(){return this.$1.get_bottomValue()},get_marginRight:function(){return this.$1.get_rightValue()},get_marginDefinition:function(){return new gS.$ctor1(this.get_styledBoxPresModel())},get_padding:function(){return this.$2.get_defaultValue()},get_paddingTop:function(){return this.$2.get_topValue()},get_paddingLeft:function(){return this.$2.get_leftValue()},get_paddingBottom:function(){return this.$2.get_bottomValue()},get_paddingRight:function(){return this.$2.get_rightValue()},get_paddingDefinition:function(){return new hi.$ctor1(this.get_styledBoxPresModel())},get_borderStyle:function(){return ss.coalesce(this.get_styledBoxPresModel().borderStyle,'bs-none')},get_borderStyleTop:function(){return ss.coalesce(this.get_styledBoxPresModel().borderStyleTop,this.get_borderStyle())},get_borderStyleLeft:function(){return ss.coalesce(this.get_styledBoxPresModel().borderStyleLeft,this.get_borderStyle())},get_borderStyleBottom:function(){return ss.coalesce(this.get_styledBoxPresModel().borderStyleBottom,this.get_borderStyle())},get_borderStyleRight:function(){return ss.coalesce(this.get_styledBoxPresModel().borderStyleRight,this.get_borderStyle())},get_borderColor:function(){return ss.coalesce(this.get_styledBoxPresModel().borderColor,'rgba(0, 0, 0, 0)')},get_borderColorTop:function(){return ss.coalesce(this.get_styledBoxPresModel().borderColorTop,this.get_borderColor())},get_borderColorLeft:function(){return ss.coalesce(this.get_styledBoxPresModel().borderColorLeft,this.get_borderColor())},get_borderColorBottom:function(){return ss.coalesce(this.get_styledBoxPresModel().borderColorBottom,this.get_borderColor())},get_borderColorRight:function(){return ss.coalesce(this.get_styledBoxPresModel().borderColorRight,this.get_borderColor())},get_borderWidth:function(){return ss.coalesce(this.get_styledBoxPresModel().uw,0)},get_borderWidthTop:function(){return ss.coalesce(this.get_styledBoxPresModel().uwt,this.get_borderWidth())},get_borderWidthLeft:function(){return ss.coalesce(this.get_styledBoxPresModel().uwl,this.get_borderWidth())},get_borderWidthBottom:function(){return ss.coalesce(this.get_styledBoxPresModel().uwb,this.get_borderWidth())},get_borderWidthRight:function(){return ss.coalesce(this.get_styledBoxPresModel().uwr,this.get_borderWidth())},get_border:function(){return new bf(this.get_borderWidth(),this.get_borderStyle(),this.get_borderColor(),0)},get_borderTop:function(){return new bf(this.get_borderWidthTop(),this.get_borderStyleTop(),this.get_borderColorTop(),1)},get_borderLeft:function(){return new bf(this.get_borderWidthLeft(),this.get_borderStyleLeft(),this.get_borderColorLeft(),2)},get_borderBottom:function(){return new bf(this.get_borderWidthBottom(),this.get_borderStyleBottom(),this.get_borderColorBottom(),4)},get_borderRight:function(){return new bf(this.get_borderWidthRight(),this.get_borderStyleRight(),this.get_borderColorRight(),3)},update:function(e,ex){if(this.isNewPresModelSameAsOld(e)){return}this.pm=e;this.$2=new hi.$ctor1(this.get_styledBoxPresModel());this.$1=new gS.$ctor1(this.get_styledBoxPresModel());this.raiseEvent(this.$2$1,ex)}},gV);ss.initClass(jY,a,{});ss.initClass(jZ,a,{get_nestingLevel:function(){return this.$1},get_fieldName:function(){return this.$0},update:function(e){if(ss.isNullOrUndefined(e)){this.$1='primary';this.$0='';return}this.$1=e.calcNestingLevel;this.$0=e.fn}});ss.initClass(ka,a,{add_modelUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_modelUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},$2:function(){return this.pm},get_hasTableCalc:function(){return ss.isValue(this.pm)},get_tableCalcTypeWidgetState:function(){return this.$2().tableCalcTypeState},get_tableCalcType:function(){return(this.get_hasTableCalc()?this.get_tableCalcTypeValues()[this.get_tableCalcTypeIndex()]:'none')},get_tableCalcTypeIndex:function(){return this.$2().tableCalcTypeIndex},get_tableCalcTypeCaptions:function(){return this.$2().tableCalcTypeCaptions},get_tableCalcTypeValues:function(){return this.$2().tableCalcTypeValues},get_typeSpecificTableCalcModel:function(){return this.$4},get_tableCalcOrderingModel:function(){return this.$3},get_tableCalcIdentifier:function(){return this.$2$2},set_tableCalcIdentifier:function(e){this.$2$2=e},update:function(e,ex){var lA=e;if(this.isNewPresModelSameAsOld(lA)){return}this.swapAndCopyPresModel(lA);if(this.get_hasTableCalc()){this.get_tableCalcIdentifier().update(lA.tableCalcIdentifier);this.$3.update(lA.tableCalcOrderingPresModel,ex);this.$1(ex)}else{this.get_tableCalcIdentifier().update(null);this.$3.update(null,ex)}this.raiseEvent(this.$2$1,ex)},$1:function(e){var ex=null;var lA=null;switch(this.get_tableCalcType()){case'diff':case'pct-diff':case'pct-value':{ex=dH;lA='differenceTableCalcPresModel'.toString();break}case'pct-total':{ex=hq;lA='percentTotalTableCalcPresModel'.toString();break}case'rank':case'pct-rank':{ex=hW;lA='rankTableCalcPresModel'.toString();break}case'cumulative':{ex=cM;lA='cumulativeTableCalcPresModel'.toString();break}case'window':{ex=lg;lA='windowTableCalcPresModel'.toString();break}case'custom':{ex=cO;lA='customTableCalcPresModel'.toString();break}default:{break}}if(ss.isNullOrUndefined(ex)){this.$4=null;return}if(ss.isNullOrUndefined(this.$4)||!ss.referenceEquals(ss.getInstanceType(this.$4),ex)){this.$4=new ex(this)}this.$4.update(ka.$0(this.$2(),lA),e)}},gV);ss.initClass(kb,a,{add_modelUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_modelUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_orderingTypeValues:function(){return this.get_ordering().orderingTypeValues},get_orderingTypeIndex:function(){return this.get_ordering().orderingTypeIndex},get_orderingTypeCaptions:function(){return this.get_ordering().orderingTypeCaptions},get_addressingIndexes:function(){return this.get_ordering().addressingIndices},get_addressingInvalidIndexes:function(){return this.get_ordering().addressingInvalidIndices},get_addressingCaptions:function(){return this.get_ordering().addressingCaptions},get_addressingValues:function(){return this.get_ordering().addressingValues},get_addressingState:function(){return this.get_ordering().addressingState},get_atTheLevelState:function(){return this.get_ordering().atTheLevelState},get_atTheLevelCaptions:function(){return this.get_ordering().atTheLevelCaptions},get_atTheLevelValues:function(){return this.get_ordering().atTheLevelValues},get_atTheLevelIndex:function(){return this.get_ordering().atTheLevelIndex},get_isAtTheLevelFieldInvalid:function(){return this.get_ordering().atTheLevelFieldIsInvalid},get_atTheLevelInvalidFieldCaption:function(){return this.get_ordering().atTheLevelInvalidFieldCaption},get_atTheLevelSpecialCaption:function(){return this.get_ordering().atTheLevelSpecialCaption},get_atTheLevelSpecialValue:function(){return''},get_atTheLevelValue:function(){return((this.get_atTheLevelIndex()===-1)?this.get_atTheLevelSpecialValue():this.get_atTheLevelValues()[this.get_atTheLevelIndex()])},get_restartEveryState:function(){return this.get_ordering().restartEveryState},get_restartEveryCaptions:function(){return this.get_ordering().restartEveryCaptions},get_restartEveryIndex:function(){return this.get_ordering().restartEveryIndex},get_isRestartEveryFieldInvalid:function(){return this.get_ordering().restartEveryFieldIsInvalid},get_restartEveryValues:function(){return this.get_ordering().restartEveryValues},get_restartEverySpecialCaption:function(){return this.get_ordering().restartEverySpecialCaption},get_restartEverySpecialValue:function(){return''},get_restartEveryValue:function(){return((this.get_restartEveryIndex()===-1)?this.get_restartEverySpecialValue():this.get_restartEveryValues()[this.get_restartEveryIndex()])},get_sortState:function(){return this.get_ordering().sortState},get_sortAggState:function(){return this.get_ordering().sortAggState},get_sortModeIsAuto:function(){return this.get_ordering().sortModeIsAuto},get_sortModeCaption:function(){return this.get_ordering().sortModeCaption},get_sortField:function(){if(this.get_ordering().sortModeIsAuto){return null}return this.get_ordering().sortFieldValues[this.get_ordering().sortFieldIndex]},get_isSortFieldInvalid:function(){return this.get_ordering().sortFieldIsInvalid},get_sortFieldCaptions:function(){return this.get_ordering().sortFieldCaptions},get_sortFieldIndex:function(){return this.get_ordering().sortFieldIndex},get_sortFieldValues:function(){return this.get_ordering().sortFieldValues},get_sortAgg:function(){if(this.get_ordering().sortModeIsAuto){return null}return this.get_ordering().sortAggValues[this.get_ordering().sortAggIndvValues]},get_sortAggCaptions:function(){return this.get_ordering().sortAggCaptions},get_sortAggIndex:function(){return this.get_ordering().sortAggIndvValues},get_sortAggValues:function(){return this.get_ordering().sortAggValues},get_sortDirectionValues:function(){return this.get_ordering().sortDirectionValues},get_sortDirectionIndex:function(){return this.get_ordering().sortDirectionIndex},get_sortDirectionCaptions:function(){return this.get_ordering().sortDirectionCaptions},get_ordering:function(){return(ss.isValue(this.pm)?this.pm:null)},get_hasOrdering:function(){return ss.isValue(this.get_ordering())},get_tableCalcIdentifier:function(){return(ss.isNullOrUndefined(this.parent)?new jZ(null):this.parent.get_tableCalcIdentifier())},update:function(e,ex){this.simpleSwapToUpdate(e,this.$2$1,ex)}},gV);ss.initClass(kc,a,{add_modelUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_modelUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_relativeValues:function(){return this.pm.relativeValues},get_relativeCaptions:function(){return this.pm.relativeCaptions},get_fixedValues:function(){return this.pm.fixedValues},get_fixedCaptions:function(){return this.pm.fixedCaptions},get_paramValues:function(){return this.pm.paramValues},get_paramCaptions:function(){return this.pm.paramCaptions},get_referenceOptionsSets:function(){return this.pm.referenceOptionsSets},get_selectionIndex:function(){return this.pm.referenceIndex},get_referenceWidgetState:function(){return this.pm.referenceOptionsState},get_tableCalcIdentifier:function(){var e=this.parent;return(ss.isNullOrUndefined(e)?new jZ(null):e.get_tableCalcIdentifier())},update:function(e,ex){this.simpleSwapToUpdate(e,this.$2$1,ex)}},gV);ss.initClass(kd,a,{});ss.initClass(ke,a,{});ss.initClass(kf,a,{add_newText:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newText:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_hAlign:function(){return this.pm.halign},get_html:function(){return this.pm.html},get_orientation:function(){return this.pm.orientation},get_styledBox:function(){return this.pm.styledBox},get_vAlign:function(){return this.pm.valign},get_sheetName:function(){return this.pm.worksheet},update:function(e,ex){eM.notifyFontsFromTextRegionPresModel(e);this.simpleSwapToUpdate(e,this.$2$1,ex)}},gV);ss.initClass(kg,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'toggle-ind-join-semantics'},this.c))}},ss.makeGenericType(bd,[Object,kh]));ss.initClass(kh,a,{});ss.initClass(ki,a,{},ss.makeGenericType(kV,[Object,kj]));ss.initClass(kj,a,{});ss.initClass(kk,a,{add_newToolbar:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newToolbar:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_vizCommandItems:function(){var e=null;if(ss.isValue(this.pm)){var ex=cj.create(this.pm.vizCommands);e=ex.get_commandItems()}return e},get_nonVizCommandItems:function(){if(ss.isNullOrUndefined(this.pm)){return null}var e=cj.create(this.pm.nonVizCommands);return e.get_commandItems()},get_legacyMenuItems:function(){return this.pm.legacyMenus},update:function(e,ex){if(ss.isValue(e)){this.simpleSwapToUpdate(e,this.$2$1,ex)}},isLegacyMenuItemEnabled:function(e){if(ss.isNullOrUndefined(this.get_legacyMenuItems())){return false}var ex=_.find(this.get_legacyMenuItems(),function(lA){return lA.legacyMenuName===e});return ss.isValue(ex)&&_.every(ex.legacyMenuStates,function(lA){return lA!=='grayed'})}},gV);ss.initClass(kl,a,{});ss.initClass(km,a,{dispatch:function(e,ex){return function(lA){if(!ss.staticEquals(this.$3,null)){return $.Deferred().reject()}this.$0(e,ex).call(this,lA);var lB=$.Deferred();var lC=dz.get_instance();lC.dispatch(e,ex).call(lC,lA).done(function(lD){lB.resolve(lD)}).fail(function(){lB.reject()}).always(ss.mkdel(this,function(){this.$1(e,ex).call(this,lA)}));return lB}},deferUntilCommandsComplete:function(e){this.$3=e;if(this.$2.length===0){this.$3()}},$0:function(e,ex){return function(lA){this.$2.push(lA)}},$1:function(e,ex){return function(lA){ss.remove(this.$2,lA);if(this.$2.length===0&&!ss.staticEquals(this.$3,null)){this.$3()}}}},null,[fN]);ss.initClass(kn,a,{$0:function(){return this.$1},get_transactedChange:function(){return kn.$0(this.$2)},makeMutablePresModel:function(e,ex){var lA=e.getPresModelPath();for(var lB=0;lB<this.$2.length;lB++){var lC=this.$2[lB];if(_.isEqual(lC.$1(),lA)){return lC.$0()}}var lD=e.getMutableCopyOfPresModel();this.$2.push(new u(lA,lD));if(!ex){this.$1.push(new u(lA,e.pm))}return lD}});ss.initClass(ko,a,{beginTransaction:function(e){if(ss.isValue(this.$1)){throw new ss.Exception('Internal error: nested transaction')}this.$1=new kn(e);return this.$1},rollbackTransaction:function(){this.$1=null},endTransaction:function(){var e=ss.getEnumerator(this.$1.$0());try{while(e.moveNext()){var ex=e.current();if(!ss.keyExists(this.$0,ex.$1().get_pathAsString())){this.$0[ex.$1().get_pathAsString()]=ex}}}finally{e.dispose()}var lA=this.$1.get_transactedChange();this.$1=null;return lA},resetTransactedState:function(){ss.clearKeys(this.$0)},rollbackTransactions:function(e){if(ss.getKeyCount(this.$0)>0){Y.get_instance().update(kn.$1(_.values(this.$0)),e)}},containsTransaction:function(e){return ss.keyExists(this.$0,e)}});ss.initClass(kp,a,{get_notificationId:function(){return'doc:type-in-pill-event'},get_isAdhoc:function(){return true},onNotify:function(e,ex){this.update(e,ex)}},bB,[fV]);ss.initClass(kr,a,{get_itemCount:function(){return this.$1().get_commandItems().length},get_hasItems:function(){return this.get_itemCount()>0},get_defaultItem:function(){return this.$1().get_defaultItem()},$1:function(){return cj.create(this.get_wrappedCommandItemPresModel().get_commands())}},bY,[fO]);ss.initClass(kt,a,{});ss.initClass(ku,a,{});ss.initClass(kv,a,{addFontList:function(e){for(var ex=0;ex<e.length;ex++){var lA=e[ex];var lB=lA.get_fonts();for(var lC=0;lC<lB.length;lC++){var lD=lB[lC];this.$0[lD]=lA.get_fontGroup()}}},toFontFamilyProvider:function(){if(ss.isNullOrUndefined(this.$0)){return new jI.$ctor2([])}var e=[];var ex={};var lA=ss.getEnumerator(Object.keys(this.$0));try{while(lA.moveNext()){var lB=lA.current();var lC=this.$0[lB];var lD=ex[lC.toLowerCase()];if(ss.isNullOrUndefined(lD)){lD=new cp(lC);e.push(lD);ex[lC.toLowerCase()]=lD}lD.addFont(lB)}}finally{lA.dispose()}e=_.sortBy(e,function(lE){return lE.get_fontGroup().toLowerCase()});return new jI.$ctor2(e)}});ss.initClass(kw,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'update-data-alert'},this.c))}},ss.makeGenericType(bd,[Object,kx]));ss.initClass(kx,a,{});ss.initClass(ky,a,{});ss.initEnum(kz,a,{success:'success',urlConstructionFail:'urlConstructionFail',notEnoughInfoYet:'notEnoughInfoYet'},true);ss.initClass(kA,a,{});ss.initClass(kB,a,{invoke:function(){return this.invoke$1(cl.newCommand({ns:'tabdoc',cmd:'validate-data-value'},this.c))}},ss.makeGenericType(bd,[Object,kC]));ss.initClass(kC,a,{hasCaptionedValue:function(){return ss.keyExists(this.$$c,'captionedDataValue')}});ss.initClass(kD,a,{update:function(e){this.pm=e}},gV);ss.initClass(kE,a,{get_viewId:function(){return this.viewid},set_viewId:function(e){if(ss.referenceEquals(this.viewid,e)){return}this.viewid=e},$l:function(e){return this.formatViewMethod(this.viewid,'region')+'?r='+e},formatRegionTileURL:function(e,ex,lA){if(kE.canUseTileCacheUrl(e)){return this.formatTileURL(e,ex,0,0,'',lA)}return this.$l(ex)+'&'+lA},$k:function(e,ex){var lA='';if(!tab.MiscUtil.isNullOrEmpty$3(ex)){lA='&fn='+encodeURIComponent(ex)}return this.formatViewMethod(this.viewid,'region')+'?r='+e+lA},formatLegendRegionTileURL:function(e,ex,lA,lB,lC){lB=(ss.isNullOrUndefined(lB)?'':lB);if(kE.canUseTileCacheUrl(e)){return this.formatTileURL(e,ex+lB,0,0,lA,lC)}return this.$k(ex,lA)+'&'+lC},formatTileURL:function(e,ex,lA,lB,lC,lD){if(kE.canUseTileCacheUrl(e)){var lE=e;var lF;if(!tab.MiscUtil.isNullOrEmpty$3(lC)){lF='?fn='+encodeURIComponent(lC)+'&'+lD}else{lF='?='+lD}return ss.replaceAllString(ss.replaceAllString(ss.replaceAllString(ss.replaceAllString(lE,'%SESSIONID%',tsConfig.sessionid),'[r]',ex),'[x]',lA.toString()),'[y]',lB.toString())+lF}var lG=this.formatViewMethod(this.viewid,'tile');return lG+'?r='+ex+'&x='+lA+'&y='+lB+'&'+lD},formatUnderlyingDataURL:function(e,ex){var lA=new ss.StringBuilder(this.formatViewMethod(this.viewid,'viewData'));lA.append('?maxrows=200');if(ss.isValue(e)){lA.append('&select_x=').append(e.x);lA.append('&select_y=').append(e.y)}if(ss.isValue(ex)){lA.append('&viz=').append(encodeURIComponent(JSON.stringify(ex)))}return lA.toString()},formatExportCrossTabURL:function(e){if(ss.isNullOrUndefined(e)){e='utf8'}return this.formatViewMethod(this.viewid,'exportcrosstab')+'?charset='+e},executeAction:function(e,ex,lA){if(e.get_commandType()===9){this.executeCommand(e)}else{var lB=cl.newCommand({ns:'tabdoc',cmd:'run-action'},e.command.commandParams);jd.executeServerCommand(lB,'immediately',ex,lA)}},executeCommand:function(e){if(ss.isNullOrUndefined(e)){return}switch(e.get_commandType()){case 9:{var ex={};ex.url=e.command.commandParams.url;ex.target=e.command.commandParams.target;P.launchActionUrls([ex],this.get_commonDialogProvider());break}case 7:{var lA=null;var lB=null;if(ss.isValue(e.command)&&ss.isValue(e.command.commandParams)){if(ss.keyExists(e.command.commandParams,'selectAtPoint')){var lC=JSON.parse(e.command.commandParams['selectAtPoint']);lA=tab.PointUtil.fromPresModel(lC)}if(ss.keyExists(e.command.commandParams,'visualId')){lB=e.command.commandParams['visualId']}}window.open(this.formatUnderlyingDataURL(lA,lB),this.getWindow('vud'),'scrollbars,resizable');break}case 1:case 2:case 4:case 5:case 6:case 11:case 12:case 10:case 13:{break}default:{break}}}},jw);ss.initClass(kF,a,{});ss.initClass(kH,a,{add_newVisualList:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newVisualList:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_visualListPresModel:function(){return this.pm},get_groupItemNodes:function(){if(ss.isNullOrUndefined(this.$1)){this.$1=[];var e=this.get_visualListPresModel().drawItems;for(var ex=0;ex<e.length;ex++){var lA=e[ex];if(lA.type==='draw-group'){this.$1.push(lA)}}}return this.$1},update:function(e,ex){eM.notifyFontsFromVisualListPresModel(e);if(this.isNewPresModelSameAsOld(e)){return}this.$1=null;this.swapAndCopyPresModel(e);this.raiseEvent(this.$2$1,ex)}},gV);ss.initClass(kI,a,{add_newVisual:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newVisual:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_newHiddenTuples:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_newHiddenTuples:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_newFilteredTuples:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_newFilteredTuples:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_urlInfoCacheChange:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_urlInfoCacheChange:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},add_visualValidStateChanged:function(e){this.$2$5=ss.delegateCombine(this.$2$5,e)},remove_visualValidStateChanged:function(e){this.$2$5=ss.delegateRemove(this.$2$5,e)},add_brushingFromActionChanged:function(e){this.$2$6=ss.delegateCombine(this.$2$6,e)},remove_brushingFromActionChanged:function(e){this.$2$6=ss.delegateRemove(this.$2$6,e)},add_colorDictionaryChanged:function(e){this.$2$7=ss.delegateCombine(this.$2$7,e)},remove_colorDictionaryChanged:function(e){this.$2$7=ss.delegateRemove(this.$2$7,e)},add_vizNavigationSettingChanged:function(e){this.$2$8=ss.delegateCombine(this.$2$8,e)},remove_vizNavigationSettingChanged:function(e){this.$2$8=ss.delegateRemove(this.$2$8,e)},add_emptyHighlightFogAllChanged:function(e){this.$2$9=ss.delegateCombine(this.$2$9,e)},remove_emptyHighlightFogAllChanged:function(e){this.$2$9=ss.delegateRemove(this.$2$9,e)},add_annotationHitBoxesChanged:function(e){this.$2$10=ss.delegateCombine(this.$2$10,e)},remove_annotationHitBoxesChanged:function(e){this.$2$10=ss.delegateRemove(this.$2$10,e)},get_totalMarks:function(){return(tab.FeatureFlags.isEnabled('WebAddTotalMarks')?this.pm.totalMarks:0)},get_shouldShowTotalMarks:function(){return(tab.FeatureFlags.isEnabled('WebAddTotalMarks')?this.pm.shouldShowTotalMarks:false)},get_worksheetName:function(){return this.get_visualId().worksheet},get_visualId:function(){return this.pm.visualIdPresModel},get_containerGeometry:function(){return this.get_zone().get_zoneCommonModel().get_zoneContentRectXY()},get_tooltipMode:function(){return this.pm.tooltipMode},get_scenePresModel:function(){return this.pm.scene},get_shelves:function(){return this.$A},get_analyticsModel:function(){return this.$g},get_marksCardModel:function(){return this.$u},get_selectionsModel:function(){return this.$z},get_impliedSelectionModel:function(){return this.$s},get_brushingsModel:function(){return this.$j},get_showMeModel:function(){return this.$B},get_sceneModel:function(){return this.$y},get_mapServerModel:function(){return this.$t},get_tileCacheUrl:function(){return this.$k},get_filters:function(){return _.values(this.$n)},get_filterModels:function(){return this.$n},get_geometryModel:function(){return this.$q},get_sortIndicatorsModel:function(){return this.$C},get_axisRegionModel:function(){return this.$h},get_vizDataModel:function(){return this.$F},get_titleModel:function(){return this.$D},get_captionModel:function(){return this.$l},get_hiddenTuples:function(){return this.$f},get_filteredTuples:function(){return this.$e},get_isMap:function(){return this.pm.isMap},get_hasBackgroundImage:function(){return this.pm.hasBackgroundImage},get_floatingToolbarVisibility:function(){return this.pm.floatingToolbarVisibility},get_geoSearchVisibility:function(){return this.pm.geographicSearchVisibility},get_vizNavigationSetting:function(){return this.pm.vizNavigationSetting},get_defaultMapTool:function(){return this.pm.defaultMapToolEnum},get_hasModifiedAxes:function(){return this.pm.hasModifiedAxes},get_backgroundColor:function(){return bQ.fromColorCode(this.pm.bgColor)},get_paneBGColor:function(){return this.pm.paneColor},get_headerBGColor:function(){return this.pm.headerColor},get_shouldUpdate:function(){return Y.get_instance().get_autoUpdate()},get_invalidSheets:function(){var e=gY.findContentDashboard();return e.get_invalidSheets()},get_isVisualValidAndUpToDate:function(){return this.$E},get_isVisualValid:function(){return this.pm.valid},get_isBrushedFromAction:function(){return this.$i},get_emptyHighlightFogAll:function(){return this.$m},get_zone:function(){var e=ss.safeCast(this.parent,lx);return e.get_zone()},get_runtimeData:function(){return this.$v},get_runtimeReady:function(){return this.$w.state()==='resolved'},get_runtimeHandles:function(){return this.$w},get_runtimeStatusView:function(){return this.$x},setIsVisualValidAndUpToDate:function(e,ex){if(this.pm.valid&&e!==this.$E){this.$E=e;this.raiseEvent(this.$2$5,ex)}},setIsBrushedFromAction:function(e,ex){if(this.$i!==e){this.$i=e;this.raiseEvent(this.$2$6,ex)}},setEmptyHighlightFogAll:function(e,ex){if(this.$m!==e){this.$m=e;this.raiseEvent(this.$2$9,ex)}},getAnnotationList:function(){if(ss.isValue(this.pm.annotationList)){return this.pm.annotationList}return[]},vizDataContainsDuplicateCaption:function(e){if(ss.isNullOrUndefined(this.get_vizDataModel())){return false}return _.filter(this.get_vizDataModel().get_fieldCaptions(),function(ex){return ss.referenceEquals(ex,e)}).length>1},setFilteredTuples:function(e,ex){this.$o.set(e,ex);var lA=new Map;this.$o.forEach(function(lC){for(var lD=0;lD<lC.length;lD++){var lE=lC[lD];lA.set(lE.toString(),lE)}});var lB=this.$e.size!==lA.size;if(!lB){tab.MapUtility.forEachWithInterrupt$1(String,ss.Int32).call(null,this.$e,function(lC,lD){if(!lA.has(lD)){lB=true;throw new tab.LoopBreakException}})}if(lB){this.$e=lA;if(ss.isValue(this.$2$3)){this.$2$3()}}},setHiddenTuples:function(e,ex){this.$r.set(e,ex);var lA=new Map;this.$r.forEach(function(lC){for(var lD=0;lD<lC.length;lD++){var lE=lC[lD];lA.set(lE.toString(),lE)}});var lB=this.$f.size!==lA.size;if(!lB){tab.MapUtility.forEachWithInterrupt$1(String,ss.Int32).call(null,this.$f,function(lC,lD){if(!lA.has(lD)){lB=true;throw new tab.LoopBreakException}})}if(lB){this.$f=lA;if(ss.isValue(this.$2$2)){this.$2$2()}}},getMutableCopyOfPresModel:function(){var e=this.pm.scene;var ex=this.pm.markLabels;var lA=this.pm.vizData;delete this.pm['scene'.toString()];delete this.pm['vizData'.toString()];delete this.pm['markLabels'.toString()];var lB=gV.prototype.getMutableCopyOfPresModel.call(this);this.pm.scene=e;this.pm.vizData=lA;this.pm.markLabels=ex;return lB},reValidate:function(e){if(this.get_isVisualValidAndUpToDate()!==this.pm.valid){this.$E=this.pm.valid;this.raiseEvent(this.$2$5,e)}},$a:function(e){if(ss.isNullOrUndefined(this.$h)){this.$h=[]}if(ss.isValue(e.$.axisRegions)){this.$h=e.$.axisRegions}},update:function(e,ex){e={$:e};if(ss.isNullOrUndefined(this.$A)){this.$A=new jA(this)}if(ss.isValue(e.$.shelves)){var lA=this.$2(e.$);this.$A.update(e.$.shelves,Y.get_instance().get_workbook().get_dataSchema(),lA,ex)}if(ss.isValue(e.$.analyticsPane)){if(ss.isNullOrUndefined(this.$g)){this.$g=new V(this)}this.$g.update(e.$.analyticsPane,ex)}if(ss.isValue(e.$.vizData)){if(ss.isNullOrUndefined(this.$F)){this.$F=new kM(this)}this.$F.update(e.$.vizData,ex)}this.$d(e.$,ex);if(ss.isValue(e.$.colorDictionary)&&ss.isValue(this.pm)){if(!_.isEqual(this.pm.colorDictionary,e.$.colorDictionary)){this.raiseEvent(this.$2$7,ex)}}if(ss.isValue(e.$.vizNavigationSetting)&&ss.isValue(this.pm)){if(!_.isEqual(this.pm.vizNavigationSetting,e.$.vizNavigationSetting)){this.raiseEvent(this.$2$8,ex)}}if(ss.isValue(e.$.annotationList)&&tab.FeatureFlags.isEnabled('RichTextEditingAnnotation')){this.raiseEvent(this.$2$10,ex)}if(ss.isNullOrUndefined(this.$u)){this.$u=new gT(this)}if(ss.isValue(e.$.marksCardPresModel)){this.$u.update(e.$.marksCardPresModel,ex)}if(ss.isValue(e.$.selectionList)&&e.$.selectionList.length>0){this.$z.update(e.$.selectionList,ex)}if(ss.isValue(e.$.brushingSelectionList)){this.$j.update(e.$.brushingSelectionList,ex)}this.$5(this.$z.nodeSelection.get_nodes(),ex);if(!ss.isValue(this.$B)){this.$B=new ci(this)}if(ss.isValue(e.$.showMeCommands)){this.$B.update(e.$.showMeCommands,ex)}this.$b(e.$,ex);var lB=e.$.filtersJson||'';var lC=(ss.isNullOrEmptyString(lB)?null:JSON.parse(lB));if(this.$8(lC,lB)){this.$p=lB;if(ss.isValue(lC)){var lD={};for(var lE=0;lE<lC.length;lE++){var lF=lC[lE];var lG=tableau.format.formatQualifiedName(lF.name);var lH=this.$n[lG];if(ss.isNullOrUndefined(lH)){lH=gY.createFilterModel(this,lF)}lH.update(lF,ex);lD[lG]=lH}this.$n=lD}}var lI=null;if(!ss.isNullOrEmptyString(e.$.cacheUrlInfoJson)){var lJ=JSON.parse(e.$.cacheUrlInfoJson);lI=lJ['url'].toString()}if(!ss.referenceEquals(this.get_tileCacheUrl(),lI)){this.$k=lI;this.$3(ex)}var lK=e.$.geometryJson||'';if(!ss.isValue(this.$q)){this.$q=new kD(this)}var lL=(ss.isNullOrEmptyString(lK)?null:JSON.parse(lK));this.$q.update(lL);if(ss.isNullOrUndefined(this.$D)){this.$D=new kf(this,'visualTitle'.toString())}if(ss.isValue(e.$.visualTitle)){this.$D.update(e.$.visualTitle,ex)}if(!ss.isValue(this.$l)){this.$l=new kf(this,'visualCaption'.toString())}if(ss.isValue(e.$.visualCaption)){this.$l.update(e.$.visualCaption,ex)}if(!ss.isValue(this.$C)){this.$C=new jM(this)}if(ss.isValue(e.$.sortIndicators)){this.$C.update(e.$.sortIndicators,ex)}this.$a(e);this.setEmptyHighlightFogAll(e.$.emptyHighlightFogAll,ex);if(tab.FeatureFlags.isEnabled('WebAuthoringResizeHeaders')){if(ss.isNullOrUndefined(this.resizeInfoModel)){this.resizeInfoModel=new iv(this)}if(ss.isValue(e.$.resizeInfo)){this.resizeInfoModel.update(e.$.resizeInfo,ex)}}if(!ss.referenceEquals(e.$,this.pm)){this.swapAndCopyPresModel(e.$);this.reValidate(ex);this.$9(ex)}},$9:function(e){this.raiseEvent(this.$2$1,e)},$3:function(e){if(ss.isValue(this.get_tileCacheUrl())){this.raiseEvent(this.$2$4,e)}},$8:function(e,ex){if(ss.isNullOrUndefined(this.$p)){return true}if(ss.isValue(e)){var lA=_.find(e,function(lB){return lB.isTiled});if(ss.isValue(lA)){return true}}return!ss.referenceEquals(this.$p,ex)},hasFilterFieldData:function(e){return ss.isValue(this.get_vizDataModel())&&ss.indexOf(this.get_vizDataModel().get_filterFields(),e)!==-1},getEffectiveSelectedTuples:function(e){var ex;var lA=this.$s.get_ids();if(tab.MiscUtil.isNullOrEmpty$2(lA)){ex=e}else if(tab.MiscUtil.isNullOrEmpty$2(e)){ex=lA}else{var lB=[];ss.arrayAddRange(lB,e);ss.arrayAddRange(lB,lA);ex=Array.prototype.slice.call(lB)}return ex},$5:function(e,ex){var lA=bh.getTuplesAssociatedWithSelectedNodes(this,e);this.$s.setOverriddenTupleIds(lA,ex)},$1:function(e){this.$s.setOverriddenTupleIds([],e)},$2:function(e){if(ss.isValue(e)&&ss.isValue(e.marksCardPresModel)&&ss.isValue(e.marksCardPresModel.paneSpec)){return e.marksCardPresModel.paneSpec}return gY.findActivePaneSpecId()},shouldDoLocalCommand:function(){return Y.get_instance().shouldDoLocalCommand()&&Y.get_instance().get_isLocalRenderMode()&&this.get_mapServerModel().get_useFastMaps()&&ss.isValue(this.get_runtimeData())&&ss.isValue(this.get_runtimeData().get_finalDataStore().SupportedIncrementalUpdates)&&ss.isValue(this.get_runtimeData().get_finalDataStore().SupportedIncrementalUpdates.SupportedClientUpdates)},requestRuntimeDataAndUpdateVM:function(){if(!this.shouldDoLocalCommand()){return}this.$x.set_isRuntimeSupported(true);Y.get_instance().setupRuntime();if(ss.isNullOrUndefined(Y.get_instance().get_runtimeInitialized())){return}var e=this.$4();var ex=$.Deferred();this.$w=ex.promise();var lA=tabBootstrap.MetricsController.createContext('RTLOAD'.toString(),15,null);var lB=ss.mkdel(this,function(lD){Y.get_instance().get_runtimeInitialized().done([ss.mkdel(this,function(){this.$7(new iB(lD),e).done(ss.mkdel(this,function(lE){this.$x.set_isRuntimeReady(true);ex.resolve(lE);lA.dispose();iE.logVizUsage(0,lA.elapsedMS())}))})])});var lC=new fo;lC.c['visualIdPresModel']=this.get_visualId();lC.c['isRuntimeInitialDatastoreRequired']=ss.isNullOrUndefined(e);lC.invoke().then(lB,null)},updateRuntimeHandles:function(e){var ex=$.Deferred();ex.resolve(e);this.$w=ex.promise()},$6:function(){this.$w=$.Deferred().promise()},$4:function(){var e=null;if(this.get_runtimeReady()){this.get_runtimeHandles().done(function(ex){e=ex})}return e},$7:function(ex,lA){var lB=$.Deferred();if(ss.isValue(ex.get_dataStore())){try{tab.RuntimeWebModule.proxy.loadBinaryDatastoreHex(ex.get_dataStore()).done(function(e){tab.RuntimeWebModule.proxy.buildVMHex(ex.get_vtl(),e).done(function(lC){tab.RuntimeWebModule.proxy.executeVM(lC).done(function(lD){if(ss.isValue(ex.get_dataStoreUpdater())){tab.RuntimeWebModule.proxy.loadAndApplyDataStoreUpdaterHex(ex.get_dataStoreUpdater(),lC).done(function(lE){lB.resolve(new tab.RuntimeHandles(lC,e,lE))})}else{lB.resolve(new tab.RuntimeHandles(lC,e,lD))}})})})}catch(lC){var e=ss.Exception.wrap(lC);tab.RuntimeUtil.emscriptenAborted();tab.ErrorTrace.report(e)}}else if(ss.isValue(lA)){tab.RuntimeWebModule.proxy.loadAndApplyDataStoreUpdaterHex(ex.get_dataStoreUpdater(),lA.get_VM()).done(function(e){lB.resolve(new tab.RuntimeHandles(lA.get_VM(),lA.get_initialStore(),e))})}return lB.promise()},$d:function(e,ex){if(ss.isNullOrUndefined(this.$y)){this.$y=new iJ(this)}if(ss.isValue(e.scene)){if(ss.isValue(this.$r)){var lA=this.$f.size>0;this.$r=new Map;this.$f=new Map;if(lA){this.raiseEvent(this.$2$2,ex)}}if(ss.isValue(this.$o)){var lB=this.$e.size>0;this.$o=new Map;this.$e=new Map;if(lB){this.raiseEvent(this.$2$3,ex)}}this.$y.update(e.scene,ex);var lC=this.$y.pm;if(ss.isValue(lC.runtimeFinalDatastore)||ss.isValue(lC.runtimeFinalDatastoreLocal)){this.$v=this.$y.get_sceneRuntimeData()}if(!ss.isValue(lC.runtimeFinalDatastoreLocal)){this.$c(e)}}},$b:function(e,ex){if(ss.isNullOrUndefined(this.$t)){this.$t=new gR(this);this.$t.set_allowLocalPanAndZoom(this.shouldDoLocalCommand());this.$t.add_useFastMapsChanged(ss.mkdel(this,function(lB,lC){if(lB===false&&lC===true){this.$6();this.requestRuntimeDataAndUpdateVM()}}))}if(!e.isMap){this.$t.update(null,ex);return}if(tab.FeatureFlags.isEnabled('RuntimeComputeMapCenterInVTL')&&ss.isValue(this.$v)&&this.shouldDoLocalCommand()){var lA=this.get_runtimeData().get_finalDataStore().Viewpoint;this.$t.set_centerLatitude(lA.PerPaneExtents.MapCenterLatitude[0]);this.$t.set_centerLongitude(lA.PerPaneExtents.MapCenterLongitude[0]);this.$t.set_requestZoom(lA.MapLayersModelUpdate.ActualZoomLevel);this.get_mapServerModel().set_displayScale(lA.MapLayersModelUpdate.DisplayScale);return}if(ss.isValue(e.mapServer)){this.$t.update(e.mapServer,ex);this.get_mapServerModel().set_allowLocalPanAndZoom(this.shouldDoLocalCommand());return}},$c:function(e){if(!tab.FeatureFlags.isEnabled('RuntimeServerPushRuntimeData')||!ss.isValue(e.runtimeData)){return}if(ss.isNullOrUndefined(Y.get_instance().get_runtimeInitialized())){return}var ex=this.$4();var lA=$.Deferred();this.$w=lA.promise();var lB=tabBootstrap.MetricsController.createContext('RTLOAD'.toString(),15,null);var lC=new iB.$ctor1(e.runtimeData);Y.get_instance().get_runtimeInitialized().done([ss.mkdel(this,function(){this.$7(lC,ex).done(ss.mkdel(this,function(lD){this.$x.set_isRuntimeReady(true);lA.resolve(lD);lB.dispose();iE.logVizUsage(0,lB.elapsedMS())}))})])}},gV);ss.initClass(kJ,a,{});ss.initClass(kK,a,{get_hasDataValues:function(){return this.$c},get_hasAliases:function(){return this.$b},get_dataType:function(){return this.$a.dataType},get_fieldName:function(){return this.$a.fn},get_fieldCaption:function(){return this.$a.fieldCaption},get_baseColumnName:function(){return this.$a.baseColumnName},get_role:function(){return this.$a.fieldRole},get_aggType:function(){return this.$a.aggregation},get_specialValuesOverride:function(){return this.$a.specialValueText},get_filterContext:function(){return this.$a.filterContext},get_vizColumnDoNotUse:function(){return this.$a},$8:function(){return this.$a.paneIndices},$9:function(){return this.$a.columnIndices},$7:function(){return tab.Logger.lazyGetLogger(kK)},isTupleIdValid:function(e){for(var ex=0;ex<this.$a.paneIndices.length;++ex){var lA=this.$a.paneIndices[ex];var lB=this.$5(e,lA);if(ss.isValue(lB)){return true}}return false},tupleIdsThatPass:function(e){var ex=[];for(var lA=0;lA<this.$a.paneIndices.length;lA++){var lB=this.$a.paneIndices[lA];var lC=this.$d[lB].vizPaneColumns[0];for(var lD=0;lD<lC.tupleIds.length;lD++){var lE=lC.tupleIds[lD];if(e(lE)){ex.push(lE)}}}return ex},$2:function(e){var ex=this.$3(e,0);var lA={};var lB=0;for(var lC=0;lC<ex.tupleIds.length;lC++){var lD=ex.tupleIds[lC];lA[lD]=lB++}this.$e[e]=lA},$5:function(e,ex){if(!ss.keyExists(this.$e,ex)){this.$2(ex)}return this.$e[ex][e]},getAliasIndex:function(e){var ex=null;if(!this.get_hasAliases()){return ex}for(var lA=0;lA<this.$a.paneIndices.length;++lA){var lB=this.$a.paneIndices[lA];var lC=this.$5(e,lB);if(ss.isValue(lC)){var lD=this.$a.columnIndices[lA];var lE=this.$3(lB,lD);ex=lE.aliasIndices[lC];break}}return ex},getDataValueIndex:function(e){var ex=null;if(this.get_hasDataValues()){for(var lA=0;lA<this.$a.paneIndices.length;++lA){var lB=this.$a.paneIndices[lA];var lC=this.$5(e,lB);if(ss.isValue(lC)){var lD=this.$a.columnIndices[lA];var lE=this.$3(lB,lD);ex=lE.valueIndices[lC];break}}}return ex},getPaneDescriptorKey:function(e){var ex=null;for(var lA=0;lA<this.$a.paneIndices.length;++lA){var lB=this.$8()[lA];var lC=this.$5(e,lB);if(ss.isValue(lC)){var lD=this.$4(lB);ex=lD.paneDescriptor.paneDescrKey;break}}return ex},$4:function(e){var ex=null;if(this.$d.length>e){ex=this.$d[e]}else{}return ex},$3:function(e,ex){var lA=null;var lB=this.$4(e);if(ss.isValue(lB)){if(lB.vizPaneColumns.length>ex){lA=lB.vizPaneColumns[ex]}else{}}return lA},$1:function(){var e=false;for(var ex=0;ex<this.$8().length;ex++){var lA=this.$8()[ex];var lB=this.$9()[ex];var lC=this.$3(lA,lB);if(ss.isValue(lC)){e=e||ss.isValue(lC.valueIndices)&&lC.valueIndices.length>0}}return e},$0:function(){var e=false;for(var ex=0;ex<this.$8().length;ex++){var lA=this.$8()[ex];var lB=this.$9()[ex];var lC=this.$3(lA,lB);if(ss.isValue(lC)){e=e||ss.isValue(lC.aliasIndices)&&lC.aliasIndices.length>0}}return e},$6:function(){}});ss.initClass(kL,a,{});ss.initClass(kM,a,{add_newVizData:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newVizData:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_hasTupleIdColumn:function(){return ss.isValue(this.$6)},get_highlightCaptions:function(){return this.$3().highlightCaptions},get_filterFields:function(){return this.$3().filterFields},get_fieldCaptions:function(){return this.$5},get_ubertipData:function(){return this.$3().ubertipData},$3:function(){return this.pm},$1:function(){return this.$3().paneColumnsData},$2:function(){return this.$1().paneColumnsList},getVizDataFieldByIndex:function(e){if(e>=0&&e<this.$4.length){return this.$4[e]}return null},getColumnIndex:function(e){if(ss.isNullOrUndefined(this.$1())){return-1}var ex=this.$1().vizDataColumns;for(var lA=0;lA<ex.length;++lA){if(kN.isFieldCaptionOfColumn(ex[lA],e)){return lA}}for(var lB=0;lB<ex.length;++lB){if(kN.isFieldNameOfColumn(ex[lB],e)){return lB}}return-1},getVizDataField:function(e){return this.getVizDataFieldByIndex(this.getColumnIndex(e))},hasDimensionColumnNotMeasureNames:function(){if(ss.isValue(this.$1())){var e=this.$1().vizDataColumns;for(var ex=0;ex<e.length;ex++){var lA=e[ex];if(lA.fieldRole==='dimension'&&lA.localBaseColumnName!=='[:Measure Names]'){return true}}}return false},hasTupleId:function(e){var ex=false;if(this.get_hasTupleIdColumn()){this.forEachVizDataField(function(lA,lB){if(lA.isTupleIdValid(e)){ex=true;return false}return true})}return ex},forEachTupleId:function(e){for(var ex=0;ex<this.$2().length;++ex){var lA=this.$2()[ex].vizPaneColumns[0];for(var lB=0;lB<lA.tupleIds.length;lB++){var lC=lA.tupleIds[lB];var lD=!e(lC);if(lD){break}}}},forEachVizDataField:function(e){var ex=this.$4.length;for(var lA=0;lA<ex;++lA){var lB=this.$4[lA];if(ss.isNullOrUndefined(lB)){continue}var lC=!e(lB,lA);if(lC){break}}},update:function(e,ex){var lA=this.simpleSwapToUpdate(e,this.$2$1,ex);if(!lA){return}if(ss.isValue(e.ubertipData)){eM.notifyFontsFromUberTipDataPresModel(e.ubertipData)}if(ss.isValue(this.$1())){this.$6=null;ss.clear(this.$4);this.$5=[];var lB=this.$1().vizDataColumns;for(var lC=0;lC<lB.length;lC++){var lD=lB[lC];if(lD.fn==='[system:visual].[tuple_id]'){this.$6=lD;this.$4.push(null);continue}this.$5.push(lD.fieldCaption);var lE=new kK(lD,this.$1().paneColumnsList);this.$4.push(lE)}}}},gV);ss.initClass(kN,a,{});ss.initClass(kO,a,{});ss.initClass(kP,a,{});ss.initClass(kQ,a,{get_r:function(){return this.$0['r'.toString()]},set_r:function(e){this.$0['r'.toString()]=e},get_fns:function(){return this.$0['fieldVector'.toString()]},set_fns:function(e){this.$0['fieldVector'.toString()]=e},get_x:function(){return this.$0['x'.toString()]},set_x:function(e){this.$0['x'.toString()]=e},get_y:function(){return this.$0['y'.toString()]},set_y:function(e){this.$0['y'.toString()]=e},get_w:function(){return this.$0['w'.toString()]},set_w:function(e){this.$0['w'.toString()]=e},get_h:function(){return this.$0['h'.toString()]},set_h:function(e){this.$0['h'.toString()]=e}});ss.initClass(kR,a,{get_isViewingUri:function(){return this.$l===1},get_isAuthoringUri:function(){return this.$l===2},get_isAuthorNewWorkbookUri:function(){return this.$l===3||this.$l===7},get_isInvalid:function(){return this.$l===0},get_isAdminUri:function(){return this.$l===4},get_isSharedViewUri:function(){return this.$l===5},get_isRevisionHistoryUri:function(){return this.$l===6},get_isCustomizedView:function(){return!tab.MiscUtil.isNullOrEmpty$3(this.$f)},get_absoluteUri:function(){return this.$6()},get_uri:function(){return this.$a()},get_path:function(){return this.$9()},get_queryParams:function(){return this.$i},get_retry:function(){return this.$7(':retry')},set_retry:function(e){this.$d(':retry',e)},get_originalView:function(){return this.$7(':original_view')},set_originalView:function(e){this.$d(':original_view',e);if(e){this.$f=''}},get_ignoreStickySession:function(){return this.$7(':ignore_sticky_session')},set_ignoreStickySession:function(e){this.$d(':ignore_sticky_session',e)},get_showSaveAs:function(){return this.$7(':showSaveAs')},set_showSaveAs:function(e){this.$d(':showSaveAs',e)},get_showComments:function(){return this.$7(':showComments')},set_showComments:function(e){this.$d(':showComments',e);if(e){this.set_showDataAlertId(null);this.set_showDataAlerts(false)}},get_showDataAlertId:function(){return(ss.keyExists(this.$i,':showDataAlertId')?this.$i[':showDataAlertId'][0]:null)},set_showDataAlertId:function(e){if(ss.isNullOrEmptyString(e)){delete this.$i[':showDataAlertId']}else{this.$i[':showDataAlertId']=[];this.$i[':showDataAlertId'].push(e);this.set_showDataAlerts(false);this.set_showComments(false)}},get_showDataAlerts:function(){return this.$7(':showDataAlerts')},set_showDataAlerts:function(e){this.$d(':showDataAlerts',e);if(e){this.set_showDataAlertId(null);this.set_showComments(false)}},$7:function(e){return ss.keyExists(this.$i,e)&&tab.MiscUtil.toBoolean(this.$i[e][0],false)},$d:function(e,ex){if(ex){this.$i[e]=[];this.$i[e].push('yes')}else{delete this.$i[e]}},removeQueryParam:function(e){delete this.$i[e];return this},removeAllQueryParams:function(){ss.clearKeys(this.$i);return this},clone:function(){var e=new kR;e.$l=this.$l;e.$m=this.$m;e.$k=this.$k;e.$e=this.$e;e.$i=this.$i;e.$f=this.$f;e.$g=this.$g;e.$h=this.$h;e.explicitNotGuest=this.explicitNotGuest;return e},trimQueryParamsForAuthoringModeWhenLaunchedFromToolbar:function(){var e={};var ex=ss.getEnumerator(Object.keys(this.$i));try{while(ex.moveNext()){var lA=ex.current();var lB=decodeURIComponent(lA);if(ss.startsWithString(lB,':ff_')||ss.contains(kR.$h,lB)){e[lA]=this.$i[lA]}}}finally{ex.dispose()}this.$i=e;return this},fullPageLoad:function(e){e=e||tabBootstrap.Utility.get_locationWindow();this.setWindowLocation(null);window.setTimeout(function(){tab.WindowHelper.reload(e,false)},300)},replaceState:function(e){if(tab.MiscUtil.isNullOrEmpty$2(e)){e=tabBootstrap.Utility.get_locationWindow()}tab.HistoryUtil.replaceState(e,new Object,'',this.get_uri())},setWindowLocation:function(e){if(tab.MiscUtil.isNullOrEmpty$2(e)){e=tabBootstrap.Utility.get_locationWindow()}tab.WindowHelper.setLocationHref(e,this.get_uri())},setTopWindowLocation:function(){this.setWindowLocation(window.top)},matchesCurrentWindowLocationUri:function(e){return ss.referenceEquals(this.get_uri(),kR.createForCurrentWindowLocation(e).get_uri())},matchesCurrentWindowLocationAbsoluteUri:function(){return ss.referenceEquals(this.get_absoluteUri(),kR.createForCurrentWindowLocation().get_absoluteUri())},matchesCurrentWindowLocationPath:function(e){return ss.referenceEquals(this.get_path(),kR.createForCurrentWindowLocation(e).get_path())},removeHash:function(){this.$g=''},$6:function(){var e=this.$a();var ex=this.$h;if(!ss.startsWithString(e,'/')){ex+='/'}ex+=e;return ex},$a:function(){var e=new ss.StringBuilder;e.append(this.$9());var ex=tab.MiscUtil.replaceUriQueryParameters('',this.$i);if(!tab.MiscUtil.isNullOrEmpty$3(ex)){e.append(ex)}e.append(this.$8());return e.toString()},$9:function(){var e=[];if(!tab.MiscUtil.isNullOrEmpty$3(tsConfig.site_root)&&!this.get_isAdminUri()){e.push(tsConfig.site_root)}else{e.push('')}e.push(this.$c(this.$l));if(this.$l===2){e.push(this.$m);e.push(this.$k);if(!tab.MiscUtil.isNullOrEmpty$3(this.$e)){e.push(encodeURIComponent(this.$e))}}else if(this.$l===1){e.push(this.$m);e.push(this.$k);if(!tab.MiscUtil.isNullOrEmpty$3(this.$f)){e.push(this.$f)}}else if(this.$l===4){e.push(this.$m);e.push(this.$k)}else if(this.$l===3||this.$l===7){e.push(this.$m)}else if(this.$l===5){e.push(tsConfig.guid)}else if(this.$l===6){e.push(this.$m);if(!tab.MiscUtil.isNullOrEmpty$3(this.$k)){e.push(this.$k)}e.push('history');e.push(this.$j)}return e.join('/')},$8:function(){if(this.explicitNotGuest){return'#guest=n'}return this.$g},$5:function(e){var ex=_.keys(kR.$j);var lA=ky.getModuleFromPath(e.pathname,ex);this.$l=this.$b(lA);var lB=ky.getMeatFromPath(e.pathname,ex);if(this.$l===1){this.$4(lB)}else if(this.$l===2){this.$2(lB)}else if(this.$l===3||this.$l===7){this.$1(lB)}else if(this.$l===4){this.$0(lB)}else if(this.$l===6){this.$3(lB)}this.$i=kR.$3(e);this.$g=e.hash;this.$h=BrowserSupport.BrowserSupport.GetOrigin(e)},$4:function(e){var ex=e.split('/');this.$m=ex[0];this.$k=ex[1];if(ex.length>2){if(ex.length===3){this.$f=ex[2]}this.$f=ex[2]+'/'+ex[3]}},$2:function(e){var ex=e.split('/');this.$m=ex[0];this.$k=ex[1];if(ex.length>2){this.$e=decodeURIComponent(ex[2])}},$0:function(e){var ex=e.split('/');this.$m=ex[0];this.$k=ex[1]},$1:function(e){this.$m=e},$3:function(e){var ex=e.split('/');this.$m=ex[0];if(ex.length>3){this.$k=decodeURIComponent(ex[1]);this.$j=decodeURIComponent(ex[3])}else{this.$j=decodeURIComponent(ex[2])}},$c:function(e){return kR.$f[e]},$b:function(e){return kR.$j[e]},updateForViewingSheet:function(e){if(!this.get_isViewingUri()&&!this.get_isAuthoringUri()&&!this.get_isAdminUri()&&!this.get_isSharedViewUri()&&!this.get_isRevisionHistoryUri()){throw new ss.Exception('Cannot call UpdateForViewingNewTab() from a VizUriModel that does not have VizUriType Viewing')}var ex=new ie(e);this.$m=ex.get_workbookId();this.$k=ex.get_sheetId();this.$e='';return this},updateForCustomizedView:function(e){if(!this.get_isViewingUri()){throw new ss.Exception('Cannot call UpdateForCustomizedView() from a VizUriModel that does not have VizUriType Viewing')}var ex=e.startViewId;if(ss.isNullOrUndefined(ex)){ex=this.$k}this.$k=ex;this.$f=ss.formatString('{0}/{1}',kR.encodeUserName(e.owner.username),e.urlId);this.$e='';this.set_originalView(false);return this}});ss.initEnum(kS,a,{invalid:0,viewing:1,authoring:2,authorNewWorkbookFromDataSource:3,admin:4,sharedView:5,revisionHistory:6,authorNewWorkbook:7});ss.initEnum(kT,a,{immediateGlassAndSpinner:0,immediateGlassDelayedSpinner:1,delayedGlassAndSpinner:2});ss.initClass(kU,a,{$6:function(e){if(this.$f&&this.$g>0){e.preventDefault();e.stopImmediatePropagation()}},isBusy:function(){return this.$g>0},addref:function(e,ex){this.$g+=1;if(this.$g===1&&!this.$f&&!this.$e){var lA=(e?1:2);this.$a(lA,ex)}},addrefAndShowFullWaitHandlerNow:function(){this.$g+=1;this.$a(0,true)},showAndLock:function(){if(!this.$f){this.$a(0,true)}this.$5()},$5:function(){this.$e=true},unlock:function(){this.$e=false},release:function(){this.$g-=1;if(this.$g<0){this.$g=0}this.nudge()},nudge:function(){if(this.$g>0||this.$e){return}this.$4()},reset:function(){this.$0();this.$i.hide().css('opacity','0');if(this.$c.length===0){return}var e=ss.mkdel(this,function(ex){ex.css('cursor','default').hide();var lA=$('.facadedom');if(lA.length>0){lA.remove()}});kU.loadingElementFadeOut(this.$c,300,e)},onNextHide:function(e){this.$h=e},$0:function(){this.$b=tab.MiscUtil.clearTimeout(this.$b);this.$d=tab.MiscUtil.clearTimeout(this.$d);this.$j=tab.MiscUtil.clearTimeout(this.$j)},$4:function(){if(ss.isValue(this.$h)){this.$h();this.$h=null;this.$0()}else{this.reset()}this.$f=false},$a:function(e,ex){this.$0();this.$8(e,ex);this.$f=true},$8:function(e,ex){switch(e){case 0:{this.$7(0);if(ex){this.$2();this.$9()}break}case 1:{this.$7(0);if(ex){this.$2();this.$3()}break}case 2:{this.$1();if(ex){this.$2();this.$3()}break}}},$1:function(){this.$b=window.setTimeout(ss.mkdel(this,function(){this.$7(0)}),400)},$2:function(){this.$d=window.setTimeout(ss.mkdel(this,function(){this.$7(0.419999986886978)}),this.glassOpacityChangeDelay)},$7:function(e){if(this.$c.css('display')!=='none'&&ss.referenceEquals(this.$c.css('opacity'),e.toString())){return}this.$c.css('cursor','wait');kU.$0(this.$c,500,e)},$3:function(){this.$j=window.setTimeout(ss.mkdel(this,this.$9),this.spinnerShowDelay)},$9:function(){kU.$0(this.$i,250,1)}});ss.initClass(kW,a,{get_isChecked:function(){return(ss.isValue(this.$1)?this.$1.get_isChecked():bZ.prototype.get_isChecked.call(this))},get_isDefault:function(){return(ss.isValue(this.$1)?this.$1.get_isDefault():bZ.prototype.get_isDefault.call(this))},get_enabled:function(){return(ss.isValue(this.$1)?this.$1.get_isEnabled():bZ.prototype.get_enabled.call(this))},get_isRadioOn:function(){return(ss.isValue(this.$1)?this.$1.get_isRadioOn():bZ.prototype.get_isRadioOn.call(this))},get_isVisible:function(){return(ss.isValue(this.$1)?this.$1.get_isVisible():bZ.prototype.get_isVisible.call(this))}},bZ,[ss.IDisposable]);kW.$ctor1.prototype=kW.prototype;ss.initClass(kY,a,{registerCommandLocalOptions:function(e,ex){var lA=cl.serialize(e);if(!this.hasCommandLocalOptions(e)){this.$0[lA]=ex}else{}},hasCommandLocalOptions:function(e){return ss.keyExists(this.$0,cl.serialize(e))},getCommandLocalOptions:function(e){var ex=cl.serialize(e);if(!this.hasCommandLocalOptions(e)){}return this.$0[ex]},registerCommand:function(e,ex){this.$1[cl.serialize(e)]=ex},hasCommand:function(e){return ss.keyExists(this.$1,cl.serialize(e))},createCommand:function(e){if(this.hasCommand(e)){var ex=this.$1[cl.serialize(e)];return ss.createInstance(ex)}throw new ss.Exception('creating unregistered web command')},createCommandWithParams:function(e,ex){if(this.hasCommand(e)){var lA=this.$1[cl.serialize(e)];var lB=ss.createInstance(lA);lB.transfer(ex);return lB}throw new ss.Exception('creating unregistered web command')}});ss.initClass(kZ,a,{},ss.makeGenericType(kV,[Object,la]));ss.initClass(la,a,{});ss.initClass(lb,a,{get_fontFamilies:function(){return Array.prototype.slice.call(this.$1)},$0:function(e){var ex=e.get_fontFamilies();for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];var lC=[];var lD=lB.get_fonts();for(var lE=0;lE<lD.length;lE++){var lF=lD[lE];if(lb.get_supportedFonts()[lF]){lC.push(lF)}}if(lC.length>0){this.$1.push(new eK.$ctor1(lB.get_fontGroup(),Array.prototype.slice.call(lC)))}}},toSimpleFontList:function(){return jI.$0(this.$1)}});ss.initClass(lc,a,{},ss.makeGenericType(kV,[Object,ld]));ss.initClass(ld,a,{});ss.initClass(le,a,{add_newWebZone:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newWebZone:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_zoneModel:function(){return this.$1},get_url:function(){return this.$1.pm.url},update:function(e,ex){this.simpleSwapToUpdate(e,this.$2$1,ex)}},gV);ss.initClass(lf,a,{});ss.initClass(lg,a,{add_modelUpdated:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_modelUpdated:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},$2:function(){return this.pm},$1:function(){return this.$2().aggregationIndex},get_aggregationValues:function(){return this.$2().aggregationValues},get_aggregationCaptions:function(){return this.$2().aggregationCaptions},get_aggregation:function(){return this.get_aggregationValues()[this.$1()]},get_hasAggregation:function(){return ss.isValue(this.get_aggregationValues())&&this.get_aggregationValues().length>0},get_numberOfPrevValues:function(){return this.$2().numberOfPrevValues},get_numberOfNextValues:function(){return this.$2().numberOfNextValues},get_minPrevOrNextValues:function(){return this.$2().minPrevOrNextValues},get_maxPrevOrNextValues:function(){return this.$2().maxPrevOrNextValues},get_summaryCaption:function(){return this.$2().summaryCaption},get_includeCurrentValue:function(){return this.$2().includeCurrent},get_nullIfIncomplete:function(){return this.$2().nullIfIncomplete},update:function(e,ex){this.simpleSwapToUpdate(e,this.$3$1,ex)}},kq);ss.initClass(lh,a,{add_newDashboard:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_newDashboard:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_dashboardDeleted:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_dashboardDeleted:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_sheetsChanged:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_sheetsChanged:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},add_uiModeChanged:function(e){this.$2$5=ss.delegateCombine(this.$2$5,e)},remove_uiModeChanged:function(e){this.$2$5=ss.delegateRemove(this.$2$5,e)},add_newDataConnectionPrompt:function(e){this.$2$6=ss.delegateCombine(this.$2$6,e)},remove_newDataConnectionPrompt:function(e){this.$2$6=ss.delegateRemove(this.$2$6,e)},add_dataConnectionPromptDismissed:function(e){this.$2$7=ss.delegateCombine(this.$2$7,e)},remove_dataConnectionPromptDismissed:function(e){this.$2$7=ss.delegateRemove(this.$2$7,e)},add_newDataSchemaModel:function(e){this.$2$8=ss.delegateCombine(this.$2$8,e)},remove_newDataSchemaModel:function(e){this.$2$8=ss.delegateRemove(this.$2$8,e)},add_sheetTypeChanged:function(e){this.$2$9=ss.delegateCombine(this.$2$9,e)},remove_sheetTypeChanged:function(e){this.$2$9=ss.delegateRemove(this.$2$9,e)},get_sheetType:function(){return ss.coalesce(lh.$1(this.pm),'worksheet')},get_dataSchema:function(){return this.$2$10},set_dataSchema:function(e){this.$2$10=e},get_commands:function(){return this.$8},get_uiMode:function(){return(ss.isNullOrUndefined(this.pm)?'document':this.pm.uiMode)},$6:function(){return this.$2$11},$7:function(e){this.$2$11=e},get_isCurrentSheetStoryboard:function(){return ss.isValue(this.$6())&&ss.isValue(this.$6().pm)&&this.$6().pm.isStory},get_isCurrentSheetDashboard:function(){return ss.isValue(this.$6())&&this.$6().get_isDashboard()},get_currentSheetStoryPointId:function(){if(this.get_isCurrentSheetStoryboard()){var e=this.get_storyboard().get_flipboard();if(ss.isValue(e)){return e.get_currentStoryPointId()}}return 0},get_storyboard:function(){var e=this.findContentDashboard();if(ss.isValue(e)&&ss.referenceEquals(e.get_sheetName(),this.$6().get_sheetName())){return null}return this.$6()},get_hasPublishedSheets:function(){return this.get_sheetsInfo().some(function(e){return e.isPublished})},get_sheetsInfo:function(){return this.$2$12},set_sheetsInfo:function(e){this.$2$12=e},get_isWorkbookIncomplete:function(){return this.get_removedDataSourceCount()>0||this.get_removedSheetCount()>0},get_isWorkbookModifiedAuthoring:function(){return ss.isValue(this.pm)&&this.pm.workbookModified},get_isCurrentDashboardModified:function(){return ss.isValue(this.$6())&&ss.isValue(this.$6().pm)&&ss.isValue(this.$6().pm.modifiedSheets)&&this.$6().pm.modifiedSheets.length>0},get_removedDataSourceCount:function(){return this.pm.removedDatasourceCount||0},get_removedSheetCount:function(){return this.pm.removedSheetCount||0},get_outerDashboardRepositoryUrl:function(){return((ss.isValue(this.$6())&&ss.isValue(this.$6().pm)&&ss.isValue(this.$6().pm.sheetLayoutInfo))?this.$6().pm.sheetLayoutInfo.repositoryUrl:null)},get_outerDashboardSize:function(){if(ss.isNullOrUndefined(this.$6())){return null}var e=this.$6().get_dashboardSize();return{w:e.w,h:e.h}},get_connectionPromptModel:function(){return this.$2$13},set_connectionPromptModel:function(e){this.$2$13=e},get_oAuthCredentialIds:function(){return this.$2$14},set_oAuthCredentialIds:function(e){this.$2$14=e},get_formatPaneModel:function(){return this.$2$15},set_formatPaneModel:function(e){this.$2$15=e},handleWorldReset:function(){this.$7(null);this.set_dataSchema(null)},withOuterDashboard:function(e){if(ss.isValue(this.$6())){e(this.$6());return}var ex=null;ex=ss.mkdel(this,function(lA){e(lA);this.remove_newDashboard(ex)});this.add_newDashboard(ex)},withDashboard:function(e){var ex=this.findContentDashboard();if(ss.isValue(ex)){e(ex);return}var lA=null;lA=ss.mkdel(this,function(lB){e(lB);this.remove_newDashboard(lA)});this.add_newDashboard(lA)},$2:function(e){return lh.$0(e)&&ss.isValue(lh.$1(this.pm))&&this.get_sheetType()!==e.dashboardPresModel.sheetLayoutInfo.sheetType},addNewDashboardHandler:function(e){this.add_newDashboard(e);if(ss.isValue(this.$6())){e(this.$6())}},removeDashboardHandler:function(e){this.remove_newDashboard(e)},findContentDashboard:function(){return(ss.isNullOrUndefined(this.$6())?null:this.$6().get_contentDashboard())},$1:function(e){return ss.isValue(e.dashboardPresModel)&&ss.isValue(e.dashboardPresModel.sheetLayoutInfo)&&!ss.referenceEquals(e.dashboardPresModel.sheetLayoutInfo.sheetName,tsConfig.current_sheet_name)},get_hasPrompt:function(){return ss.isValue(this.get_connectionPromptModel())&&!ss.isNullOrEmptyString(this.get_connectionPromptModel().get_connectionName())},$5:function(e,ex){if(!ss.isValue(this.get_dataSchema())){this.set_dataSchema(new dt(this));this.raiseEvent$1(dt).call(this,this.$2$8,this.get_dataSchema(),e)}if(ss.isValue(ex.schemaViewer)){this.get_dataSchema().update(ex.schemaViewer,e)}},$4:function(e,ex){this.set_connectionPromptModel(new dk(this));this.get_connectionPromptModel().update(e.variablePromptDialog);if(!ss.isNullOrEmptyString(this.get_connectionPromptModel().get_connectionName())){this.raiseEvent$1(dk).call(this,this.$2$6,this.get_connectionPromptModel(),ex)}else{this.raiseEvent(this.$2$7,ex)}},$3:function(e,ex){if(typeof(e.dashboardPresModel)==='undefined'){}else if(e.dashboardPresModel===null){var lA=this.$6();this.$7(null);this.raiseEvent$1(cS).call(this,this.$2$3,lA,ex)}else{if(!ss.isValue(this.$6())){this.$7(new cS(this));this.raiseEvent$1(cS).call(this,this.$2$2,this.$6(),ex)}this.$6().update(e.dashboardPresModel,ex)}},update:function(e,ex){if(ss.isValue(e.variablePromptDialog)){this.$4(e,ex)}if(ss.isValue(e.workbookModified)&&(ss.isNullOrUndefined(this.pm)||this.get_isWorkbookModifiedAuthoring()!==e.workbookModified)){this.raiseEvent(function(){lh.fireWorkbookModifiedChanged(e.workbookModified)},ex)}if(this.$2(e)){this.raiseEvent$1(Object).call(this,this.$2$9,e.dashboardPresModel.sheetLayoutInfo.sheetType,ex)}var lA=false;if(this.$1(e)){this.handleWorldReset();lA=true}this.$5(ex,e);this.$3(e,ex);if(ss.isValue(e.commands)){this.$8.update(e.commands,ex)}if(ss.isValue(e.sheetsInfo)&&!_.isEqual(e.sheetsInfo,this.get_sheetsInfo())){this.set_sheetsInfo(e.sheetsInfo);lA=true}if(lA){this.raiseEvent$1(lh).call(this,this.$2$4,this,ex)}e.uiMode=e.uiMode||'document';if(ss.isNullOrUndefined(this.pm)||this.pm.uiMode!==e.uiMode){this.raiseEvent(this.$2$5,ex)}if(ss.isValue(e.formatPane)){this.get_formatPaneModel().update(e.formatPane,ex)}this.swapAndCopyPresModel(e)}},gV);ss.initClass(li,a,{get_jobInProgress:function(){return this.$1$1},set_jobInProgress:function(e){this.$1$1=e},get_jobId:function(){return this.$1$2},set_jobId:function(e){this.$1$2=e}});ss.initEnum(lj,a,{enabled:'enabled',invalidpermissions:'invalidpermissions',servicedown:'servicedown',featureflagoff:'featureflagoff'},true);ss.initClass(lk,a,{get_id:function(){return this.$1.id},get_title:function(){return this.$1.title},get_deviceType:function(){return this.$1.deviceType},get_owner:function(){return this.$0},get_recipientsCount:function(){return this.$1.recipientsCount},get_notificationIntervalInMinutes:function(){return this.$1.notificationIntervalInMinutes},get_lastChecked:function(){return this.$1.lastChecked},get_lastSentForCurrentUser:function(){return this.$1.lastSentForCurrentUser},get_isCurrentUserSubscribed:function(){return this.$1.isCurrentUserSubscribed},get_viewType:function(){return this.$1.context.type},get_customizedViewId:function(){return((this.get_viewType()==='view')?null:this.$1.context.id)},get_targetUrlId:function(){return this.$1.context.targetUrlId},get_dataSpecification:function(){return this.$1.dataSpecification}});ss.initClass(ll,a,{get_certificationDetails:function(){return this.$1.certificationDetails},get_name:function(){return this.$1.name},get_description:function(){return this.$1.description},get_id:function(){return this.$1.id},get_datasourceId:function(){return this.$1.datasourceId},get_connectionTypeDisplayName:function(){return this.$1.connectionTypeDisplayName},get_repositoryUrl:function(){return this.$1.repositoryUrl},get_connectedWorkbooksCount:function(){return this.$1.connectedWorkbooksCount},get_dataConnectionsCount:function(){return this.$1.dataConnectionsCount},get_ownerId:function(){return this.$1.ownerId},get_owner:function(){return this.$0},get_projectId:function(){return this.$1.projectId},get_project:function(){return this.$2},get_usageInfo:function(){return this.$1.usageInfo},get_connectionDetails:function(){return this.$1.connectionDetails},get_lastRefreshedAt:function(){return this.$1.lastRefreshedAt},get_lastRefreshedDescription:function(){if(tab.MiscUtil.isNullOrEmpty$3(this.$1.lastRefreshedAt)){return tab.Strings.ServerDataSourceLive}var e=tableau.format.formatToJSCompliantFormat(this.$1.lastRefreshedAt,tableau.format.get_isO8601DateTimeFormat(),2,tableau.format.get_baseTimestamp());var ex={};ex.format=Y.get_instance().get_localeDateFormat();ex.locale=tsConfig.locale;ex.timeFormat=Y.get_instance().get_localeTimeFormat();ex.locale_formatting_strings=tableau.format.get_defaultLocaleStrings();return tableau.format.formatJsDateTime(new Date(e),ex,2,'t')},get_connectsToDescription:function(){if(ss.isNullOrUndefined(this.get_connectionDetails())){return''}var e;if(this.get_connectionDetails().type==='database'||this.get_connectionDetails().type==='webdata-direct'){e=this.get_connectionDetails().serverName}else if(this.get_connectionDetails().type==='file'){e=ll.$0(this.get_connectionDetails().fileName)}else{e=this.get_connectionDetails().name}if(this.get_dataConnectionsCount()>1){return tab.Strings.ServerDataSourceConnectsToSeveral(e,this.get_dataConnectionsCount()-1)}else{return e}}});ss.initClass(lm,a,{});ss.initEnum(ln,a,{pending:-1,none:0,unlicensedUserError:90,userInvalidEmailAddress:10011,ddaDatasourceError:210006,ddaNoViewPermissionsError:210007,ddaNoDownloadPermissionsError:210008});ss.initClass(lo,a,{isGenericAuthSupported:function(e){var ex=_.find(this.$0,function(lA){return ss.referenceEquals(lA.type,e)});return ss.isValue(ex)&&ex.supportsGenericAuth},getDisplayName:function(e,ex){var lA=_.find(this.$0,function(lC){return ss.referenceEquals(lC.type,e)});if(ss.isValue(lA)){var lB=(ss.keyExists(lA.displayNames,ex)?ex:'en_US');return lA.displayNames[lB]}else{return e}}});ss.initClass(lp,a,{});ss.initClass(lq,a,{get_templates:function(){return this.$0}});ss.initClass(lr,a,{});ss.initClass(ls,a,{checkpointAppPresModel:function(){this.$1=Y.get_instance().pm;this.currentWorldDiffersFromCheckpoint=false},revertLocalChanges:function(){if(this.currentWorldDiffersFromCheckpoint){gV.nonWorldUpdate(ss.mkdel(this,function(e){e.dialogProvider=this.$0;Y.get_instance().update(this.$1,e)}));this.currentWorldDiffersFromCheckpoint=false}},markCurrentWorldAsDirty:function(){this.currentWorldDiffersFromCheckpoint=true},worldCheckpoint:function(){var e=tab.MiscUtil.cloneObject(this.$1);return e}});ss.initClass(lt,a,{add_onBootstrapResponse:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_onBootstrapResponse:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},add_onCommandResponse:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_onCommandResponse:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},add_onProgressiveLoadComplete:function(e){this.$1$3=ss.delegateCombine(this.$1$3,e)},remove_onProgressiveLoadComplete:function(e){this.$1$3=ss.delegateRemove(this.$1$3,e)},add_onDashboardLoadComplete:function(e){this.$1$4=ss.delegateCombine(this.$1$4,e)},remove_onDashboardLoadComplete:function(e){this.$1$4=ss.delegateRemove(this.$1$4,e)},raiseOnProgressiveLoadComplete:function(){if(!ss.staticEquals(this.$1$3,null)){this.$1$3()}},raiseOnBootstrapResponse:function(e){var ex=this.$1$1;if(!ss.staticEquals(ex,null)){ex(e)}},raiseOnCommandResponse:function(e){var ex=this.$1$2;if(!ss.staticEquals(ex,null)){ex(e)}},raiseOnDashboardLoadComplete:function(){if(!ss.staticEquals(this.$1$4,null)){this.$1$4()}}});ss.initClass(lu,a,{});ss.initClass(lv,a,{request:function(e){var ex='X-Tsi-Supports-Accepted';e.headers=e.headers||{};if(ss.keyExists(e.headers,ex)&&e.headers[ex]===false){delete e.headers[ex]}else{e.headers[ex]=true}if(ss.isValue(lv.$0)&&lv.$0.length>0){e.headers['X-Tsi-Active-Tab']=encodeURIComponent(lv.$0)}if(ss.isValue(e.complete)){var lA=e.complete;e.complete=function(lF,lG){lF['args']=e;lA(lF,lG)}}if(ss.isValue(e.success)){var lB=e.success;e.success=function(lF,lG,lH){lH['args']=e;lB(lF,lG,lH)}}if(ss.isValue(e.error)){var lC=e.error;e.error=function(lF,lG,lH){lF['args']=e;lC(lF,lG,lH)}}if(ss.isValue(e.beforeSend)){var lD=e.beforeSend;e.beforeSend=function(lF){lF['args']=e;lD(lF)}}var lE=e;return $.ajax(lE)}});ss.initClass(lw,a,{add_resizeZone:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_resizeZone:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_changeZoneTitleVisibility:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_changeZoneTitleVisibility:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_changeZoneFloatingState:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_changeZoneFloatingState:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},get_zoneDescription:function(){return this.get_zoneCommonPresModel().name},get_zoneCommonPresModel:function(){return ss.coalesce(this.pm,new Object)},get_zoneId:function(){return this.get_zoneCommonPresModel().zoneId},get_parentZoneId:function(){return this.get_zoneCommonPresModel().parentZoneId},get_zoneType:function(){return ss.coalesce(this.get_zoneCommonPresModel().zoneType,'invalid')},get_objectType:function(){return ss.coalesce(this.get_zoneCommonPresModel().dashboardObjectType,'invalid')},get_zoneLayoutType:function(){return ss.coalesce(this.get_zoneCommonPresModel().zoneLayoutType,'trivial')},get_contentX:function(){return this.get_zoneCommonPresModel().contentX},get_contentY:function(){return this.get_zoneCommonPresModel().contentY},get_contentHeight:function(){return this.get_zoneCommonPresModel().contentH-2*this.get_contentBorderWidth()},get_contentWidth:function(){return this.get_zoneCommonPresModel().contentW-2*this.get_contentBorderWidth()},get_height:function(){return this.get_zoneCommonPresModel().h},get_width:function(){return this.get_zoneCommonPresModel().w},get_x:function(){var e=this.$2;if(ss.isNullOrUndefined(e)){e=this.get_zoneCommonPresModel().x}return e},get_y:function(){var e=this.$3;if(ss.isNullOrUndefined(e)){e=this.get_zoneCommonPresModel().y}return e},get_zoneContentRectXY:function(){return{x:this.get_contentX(),y:this.get_contentY(),w:this.get_contentWidth(),h:this.get_contentHeight()}},get_isFloating:function(){return this.get_zoneCommonPresModel().isFloating},get_hasTitle:function(){return this.get_zoneCommonPresModel().hasTitle},get_canHaveTitle:function(){return this.get_zoneCommonPresModel().canHaveTitle},get_canFloat:function(){return this.get_zoneCommonPresModel().canFloat},get_isHorizontal:function(){return this.get_zoneCommonPresModel().isHorizontal},get_hasBorder:function(){return gY.hasBorder(this.get_zoneStyle())},get_contentBorderWidth:function(){if(gY.hasBorder(this.get_contentStyle())){return this.get_contentStyle().get_borderWidth()}return 0},get_zoneStyle:function(){return this.$4},get_contentStyle:function(){return this.$1},update:function(e,ex){this.resetLocalPosition(ex);if(ss.isValue(e)){e.parentZoneId=e.parentZoneId||0;e.isFloating=e.isFloating||false;e.isHorizontal=e.isHorizontal||false;e.canHaveTitle=ss.coalesce(e.canHaveTitle,true);e.canFloat=ss.coalesce(e.canFloat,true);e.contentW=e.contentW||e.w;e.contentH=e.contentH||e.h;e.contentX=e.contentX||e.x;e.contentY=e.contentY||e.y;if(!this.isNewZoneSizeSameAsOld(e)){this.raiseEvent(this.$2$1,ex)}if(ss.isValue(e.styledBox)){this.$4.update(e.styledBox,ex)}if(ss.isValue(e.globalStyledBox)){this.$1.update(e.globalStyledBox,ex)}}if(ss.isValue(this.get_zoneCommonPresModel())&&this.get_zoneCommonPresModel().hasTitle!==e.hasTitle){this.raiseEvent(this.$2$2,ex)}if(ss.isValue(this.get_zoneCommonPresModel())&&(this.get_zoneCommonPresModel().isFloating!==e.isFloating||this.get_zoneCommonPresModel().canFloat!==e.canFloat)){this.raiseEvent(this.$2$3,ex)}this.swapAndCopyPresModel(e)},updateSingleZoneLocalPosition:function(e,ex){if(ss.referenceEquals(this.$2,e)&&ss.referenceEquals(this.$3,ex)){return}this.$2=e;this.$3=ex;gV.nonWorldUpdate(ss.mkdel(this,function(lA){this.raiseEvent(this.$2$1,lA)}))},resetLocalPosition:function(e){if(ss.isValue(this.$3)||ss.isValue(this.$2)){this.$3=null;this.$2=null;this.raiseEvent(this.$2$1,e)}},isNewZoneSizeSameAsOld:function(e){if(!ss.isValue(e)){return true}if(ss.isValue(this.pm)){return ss.coalesce(e.contentH,e.h)===this.get_contentHeight()&&ss.coalesce(e.contentW,e.w)===this.get_contentWidth()&&ss.coalesce(e.contentX,e.x)===this.get_contentX()&&ss.coalesce(e.contentY,e.y)===this.get_contentY()&&e.h===this.get_height()&&e.w===this.get_width()&&e.x===this.get_x()&&e.y===this.get_y()}return false}},gV);ss.initClass(lx,a,{get_zone:function(){return ss.safeCast(this.parent,ly)}},gV);ss.initClass(ly,a,{add_newZoneContent:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newZoneContent:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_updateZIndex:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_updateZIndex:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_removeZoneContent:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_removeZoneContent:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_updateZone:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_updateZone:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},add_childrenAdded:function(e){this.$2$5=ss.delegateCombine(this.$2$5,e)},remove_childrenAdded:function(e){this.$2$5=ss.delegateRemove(this.$2$5,e)},get_model:function(){return this.$g},get_dashboardModel:function(){return this.$d},get_zoneCommonModel:function(){return this.$f},get_visualModel:function(){if(this.$f.get_zoneType()==='viz'){return this.$g}return null},get_worksheetName:function(){if(ss.isNullOrUndefined(this.pm)){return null}else{return this.pm.worksheet}},get_zoneDescription:function(){return this.get_zoneCommonModel().get_zoneDescription()},get_zoneId:function(){return this.pm.zoneId},get_parentZoneId:function(){return this.get_zoneCommonModel().get_parentZoneId()},get_zoneType:function(){return this.get_zoneCommonModel().get_zoneType()},get_objectType:function(){return this.get_zoneCommonModel().get_objectType()},get_isStorySpecific:function(){return!ss.isNullOrUndefined(this.pm.storyPointId)&&!ss.isNullOrUndefined(this.pm.flipboardZoneId)&&this.pm.storyPointId!==0&&this.pm.flipboardZoneId!==0},get_contentHeight:function(){return this.get_zoneCommonModel().get_contentHeight()},get_contentWidth:function(){return this.get_zoneCommonModel().get_contentWidth()},get_contentX:function(){return this.get_zoneCommonModel().get_contentX()},get_contentY:function(){return this.get_zoneCommonModel().get_contentY()},get_zoneContentBounds:function(){return{l:0,t:0,w:this.get_contentWidth(),h:this.get_contentHeight()}},get_height:function(){return this.get_zoneCommonModel().get_height()},get_width:function(){return this.get_zoneCommonModel().get_width()},get_x:function(){return this.get_zoneCommonModel().get_x()},get_y:function(){return this.get_zoneCommonModel().get_y()},get_isFloating:function(){return this.get_zoneCommonModel().get_isFloating()},get_hasTitle:function(){return this.get_zoneCommonModel().get_hasTitle()},get_canHaveTitle:function(){return this.get_zoneCommonModel().get_canHaveTitle()},get_canFloat:function(){return this.get_zoneCommonModel().get_canFloat()},get_isHorizontal:function(){return this.get_zoneCommonModel().get_isHorizontal()},get_hasBorder:function(){return this.get_zoneCommonModel().get_hasBorder()},get_styledBoxModel:function(){return this.get_zoneCommonModel().get_zoneStyle()},get_contentType:function(){return ly.$2(this.pm)},get_titleHeight:function(){return this.pm.titleHeight},get_titleWidth:function(){return this.pm.titleWidth},get_hasSpace:function(){return this.pm.hasSpace},get_isSelectionDisabled:function(){return this.pm.isSelectionDisabled},get_isVisible:function(){return this.pm.isVisible},get_contextMenuCommands:function(){if(this.$f.get_zoneType()==='filter'){var e=this.get_model();return e.get_quickFilterCommands()}return{}},get_chromeCommands:function(){return this.$8},get_drawnZoneColor:function(){if(ss.isValue(this.pm.bgColor)){this.$c=this.$c||bQ.convertColorForCanvas(this.pm.bgColor);return this.$c}return null},get_blendedZoneContentColor:function(){return this.pm.blendedZoneContentColor},get_relativeZoneZIndex:function(){var e=this.$e;if(ss.isNullOrUndefined(e)){e=this.pm.zoneZOrder+1}return e},get_associatedSheet:function(){return this.pm.sheet},get_isDependentOnViz:function(){switch(this.$f.get_zoneType()){case'viz':case'color':case'shape':case'size':case'map':{return true}}return false},get_hasContent:function(){if(ss.isNullOrUndefined(this.pm)){return false}return ss.isNullOrUndefined(this.pm.presModelHolder)||Object.keys(this.pm.presModelHolder).length>0},raiseRemoveZoneContent:function(e){this.raiseEvent(this.$2$3,e)},raiseChildrenAdded:function(e){this.raiseEvent(this.$2$5,e)},update:function(e,ex){this.$6(ex);if(ss.isValue(e)){{e.sheet=e.sheet||'';e.titleWidth=e.titleWidth||0;e.titleHeight=e.titleHeight||0;e.isSelectionDisabled=e.isSelectionDisabled||false;e.hasSpace=e.hasSpace||false}var lA=!this.get_zoneCommonModel().isNewZoneSizeSameAsOld(e.zoneCommon);if(ss.isValue(e.zoneCommon)){this.$f.update(e.zoneCommon,ex);this.$2(e)}if(ss.isNullOrUndefined(this.pm)||!ss.referenceEquals(this.pm.bgColor,e.bgColor)){this.$c=null}if(ss.isValue(e.zoneChromeCommands)){this.$8.update(e.zoneChromeCommands,ex)}if(ss.isValue(e.presModelHolder)){this.$3(e,ex,lA)}else{this.$1(e,ex)}if(ss.isValue(e.zoneTitle)){eM.notifyFontsFromTextRegionPresModel(e.zoneTitle)}}this.swapAndCopyPresModel(e);this.raiseEvent(this.$2$4,ex)},$1:function(e,ex){if(ss.isValue(this.pm)&&ss.isValue(this.$g)&&!ss.referenceEquals(e.frameJson,this.pm.frameJson)){var lA=ly.$1(e.frameJson);var lB=e.zoneCommon;var lC=ss.isValue(lB)&&lB.zoneType==='filter'||ss.isValue(lA.attributes)&&ss.keyExists(lA.attributes,'type')&&ss.referenceEquals(lA.attributes['type'].toString(),'filter'.toString());if(this.$a&&lC){var lD=this.$g;lD.update(lD.get_quickFilterDisplayPresModel(),lA,ex)}if(ss.referenceEquals(ly.$2(this.pm),ly.$b)){var lE=this.$g;lE.updateFrame(lA,ex)}}},$3:function(e,ex,lA){if(!ss.isValue(this.$b)){this.$b=new lx(this)}var lB=ly.$2(e);if(ss.isValue(this.pm)&&!ss.referenceEquals(this.get_contentType(),lB)){this.$g=null}var lC=false;if(ss.isNullOrUndefined(this.$g)&&this.get_zoneCommonModel().get_zoneType()!=='filter'){var lD=gY.getPendingZoneContentModel(this.$f.get_zoneId());if(ss.isValue(lD)){lC=true;this.$g=lD;this.$g.reparent(this.$b);this.raiseNewZoneContent(this.$g,ex)}}if(!lC){this.$4(lB,e,lA,ex)}},updateLocalPropertiesForZonePreview:function(e,ex){this.$f.updateSingleZoneLocalPosition(this.get_x()+e,this.get_y()+ex);this.$7();var lA=this.$d.zonesModel.getChildren(this.get_zoneId());if(lA.length>0){for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];lC.updateLocalPropertiesForZonePreview(e,ex)}}},$7:function(){if(ss.isNullOrUndefined(this.$e)){this.$e=this.pm.zoneZOrder+988;gV.nonWorldUpdate(ss.mkdel(this,function(e){this.raiseEvent(this.$2$2,e)}))}},$6:function(e){this.$f.resetLocalPosition(e);this.$5(e)},resetZoneAndChildrenLocalChanges:function(e){this.$6(e);var ex=this.$d.zonesModel.getChildren(this.get_zoneId());if(ex.length>0){for(var lA=0;lA<ex.length;lA++){var lB=ex[lA];lB.resetZoneAndChildrenLocalChanges(e)}}},$5:function(e){if(ss.isValue(this.$e)){this.$e=null;this.raiseEvent(this.$2$2,e)}},$4:function(e,ex,lA,lB){if(ss.referenceEquals(e,ly.$m)){var lC=ly.getContent(ex,ly.$m);if(ss.isNullOrUndefined(this.$g)){this.$g=new kI(this.$b);this.raiseNewZoneContent(this.$g,lB)}var lD=this.$g;lD.update(lC,lB)}else if(ss.referenceEquals(e,ly.$j)){var lE=ly.getContent(ex,ly.$j);if(ss.isNullOrUndefined(this.$g)){this.$g=new kf(this.$b,ly.$j);this.raiseNewZoneContent(this.$g,lB)}var lF=this.$g;lF.update(lE,lB)}else if(ss.referenceEquals(e,ly.$i)){var lG=ly.getContent(ex,ly.$i);if(ss.isNullOrUndefined(this.$g)){this.$g=new kf(this.$b,ly.$i);this.raiseNewZoneContent(this.$g,lB)}var lH=this.$g;lH.update(lG,lB)}else if(ss.referenceEquals(e,ly.$d)){var lI=ly.getContent(ex,ly.$d);var lJ=this.$a;this.$a=true;if(ss.isNullOrUndefined(this.$g)||!lJ){this.$g=new gH(this.$b);this.raiseNewZoneContent(this.$g,lB)}var lK=ly.$1(ex.frameJson);var lL=this.$g;lL.update(lI,lK,lB)}else if(ss.referenceEquals(e,ly.$c)){if(tab.FeatureFlags.isEnabled('WebDropServerRenderedLegends')||Y.get_instance().get_isLocalRenderMode()){var lM=ly.getContent(ex,e);if(ss.isNullOrUndefined(this.$g)){this.$g=new hJ(this.$b,e);this.raiseNewZoneContent(this.$g,lB)}var lN=this.$g;lN.update(lM,lB)}}else if(ss.referenceEquals(e,ly.$3)||ss.referenceEquals(e,ly.$h)||ss.referenceEquals(e,ly.$g)||ss.referenceEquals(e,ly.$9)){if(tab.FeatureFlags.isEnabled('WebDropServerRenderedLegends')||Y.get_instance().get_isLocalRenderMode()){var lO=ly.getContent(ex,e);if(ss.isNullOrUndefined(this.$g)){var lP=this.$f.get_zoneType();this.$g=new bG(this.$b,e,ly.$0(lP));this.raiseNewZoneContent(this.$g,lB)}var lQ=this.$g;lQ.update(lO,lB)}}else if(ss.referenceEquals(e,ly.$b)){var lR=ly.getContent(ex,ly.$b);var lS=ly.$1(lR.parameterCtrlJson);lR.legacyPresModel=lS;var lT=this.$9;this.$9=true;if(ss.isNullOrUndefined(this.$g)||!lT){this.$g=new ho(this.$b);this.raiseNewZoneContent(this.$g,lB)}var lU=ly.$1(ex.frameJson);var lV=this.$g;lV.update(lR,lU,lB)}else if(ss.referenceEquals(e,ly.$a)){var lW=ly.getContent(ex,ly.$a);if(ss.isNullOrUndefined(this.$g)){this.$g=new hj(this.$b);this.raiseNewZoneContent(this.$g,lB)}var lX=!lA||ss.isNullOrUndefined(this.pm);var lY=this.$g;lY.update(lW,lX,lB)}else if(ss.referenceEquals(e,ly.$7)){var lZ=ly.getContent(ex,ly.$7);if(ss.isNullOrUndefined(this.$g)){this.$g=new eG(this.$b);this.raiseNewZoneContent(this.$g,lB)}var ma=this.$g;ma.update(lZ,lB)}else if(ss.referenceEquals(e,ly.$6)){var mb=ly.getContent(ex,ly.$6);if(ss.isNullOrUndefined(this.$g)){this.$g=new eF(this.$b);this.raiseNewZoneContent(this.$g,lB)}var mc=this.$g;mc.update(mb,lB)}else if(!tab.FeatureFlags.isEnabled('WebDropServerRenderedLegends')&&ss.referenceEquals(e,ly.$f)){var md=ly.getContent(ex,ly.$f);if(ss.isNullOrUndefined(this.$g)){this.$g=new gF(this.$b);this.raiseNewZoneContent(this.$g,lB)}var me=this.$g;me.update(md,lB)}else if(ss.referenceEquals(e,ly.$n)){var mf=ly.getContent(ex,ly.$n);if(ss.isNullOrUndefined(this.$g)){this.$g=new le(this.$b);this.raiseNewZoneContent(this.$g,lB)}var mg=this.$g;mg.update(mf,lB)}else if(ss.referenceEquals(e,ly.$e)){var mh=ly.getContent(ex,ly.$e);if(ss.isNullOrUndefined(this.$g)){this.$g=new bw(this.$b,ly.$e);this.raiseNewZoneContent(this.$g,lB)}var mi=this.$g;mi.update(mh,lB)}else if(ss.referenceEquals(e,ly.$5)){var mj=ly.getContent(ex,ly.$5);if(ss.isNullOrUndefined(this.$g)){this.$g=new en(this.$b);this.raiseNewZoneContent(this.$g,lB)}var mk=this.$g;mk.update(mj,lB)}else if(ss.referenceEquals(e,ly.$8)){var ml=ly.getContent(ex,ly.$8);if(ss.isNullOrUndefined(this.$g)){this.$g=new fZ(this.$b);this.raiseNewZoneContent(this.$g,lB)}var mm=this.$g;mm.update(ml,lB)}else if(ss.referenceEquals(e,ly.$4)){var mn=ly.getContent(ex,ly.$4);if(ss.isNullOrUndefined(this.$g)){this.$g=new ds(this.$b);this.raiseNewZoneContent(this.$g,lB)}var mo=this.$g;mo.update(mn,lB)}},contentBorderWidth:function(){return this.$f.get_contentBorderWidth()},raiseNewZoneContent:function(e,ex){this.raiseEvent$1(gV).call(this,this.$2$1,e,ex)},$2:function(e){if(ss.isValue(e)&&ss.isValue(e.zoneCommon)){var ex=e.zoneCommon;if(ex.w===0&&ex.h===0){var lA='DashboardAuthoring_UnusableSizeZone';var lB='ZoneType';var lC='Width';var lD='Height';var lE='IsFoating';var lF='IsVisible';hf.logEvent(lA,[lB,ex.zoneType.toString(),lC,ex.w,lD,ex.h,lE,ex.isFloating,lF,e.isVisible])}}}},gV);ss.initClass(lz,a,{add_newZone:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newZone:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_removedZone:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_removedZone:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_zoneModels:function(){if(ss.isNullOrUndefined(this.$8)){this.$8=_.values(this.$a)}return this.$8},get_zonePresModels:function(){return this.pm},set_zonePresModels:function(e){this.pm=e},getZone:function(e){return this.$a[lz.$0(e)]},hasZone:function(e){return ss.keyExists(this.$a,lz.$0(e))},getChildren:function(e){var ex=lz.$0(e);if(!ss.keyExists(this.$9,ex)){this.$9[ex]=_.filter(this.get_zoneModels(),function(lA){return lA.get_parentZoneId()===e})}return this.$9[lz.$0(e)].slice(0)},update:function(ex,lA){this.$4('Zones before update: ');this.$5(ex,lA);this.$9={};var lB={};var lC=_.keys(ex);for(var lD=0;lD<lC.length;lD++){var lE=lC[lD];var lF=ex[lE];if(ss.isNullOrUndefined(lF)){continue}var lG=lF.zoneId;try{var lH=lz.$0(lG);if(!ss.isValue(this.$a[lH])){this.$2(lF,lH,lB,lA)}else{this.$6(lF,lH,lB,lA)}this.$a[lH].update(lF,lA)}catch(lM){var e=ss.Exception.wrap(lM);tab.ErrorTrace.report(e)}}this.swapAndCopyPresModel(ex);if(tsConfig.is_authoring){var lI=_.keys(lB);for(var lJ=0;lJ<lI.length;lJ++){var lK=lI[lJ];var lL=this.getZone(lK);if(ss.isValue(lL)){lL.raiseChildrenAdded(lA)}}}this.$4('Zones after update: ')},$2:function(e,ex,lA,lB){var lC=new ly(this,this.parent,e.zoneId);this.$a[ex]=lC;this.raiseEvent$1(ly).call(this,this.$2$1,this.$a[ex],lB);this.$8=null;if(ss.isValue(e.zoneCommon)){lA[e.zoneCommon.parentZoneId]=true}},$6:function(e,ex,lA,lB){if(ss.isValue(e.zoneCommon)&&this.$a[ex].get_parentZoneId()!==e.zoneCommon.parentZoneId){lA[e.zoneCommon.parentZoneId]=true}if(ss.isValue(e.presModelHolder)&&(this.$1(ex,e)||this.$7(ex,e))){this.$a[ex].raiseRemoveZoneContent(lB);this.raiseEvent$1(ly).call(this,this.$2$1,this.$a[ex],lB)}},$1:function(e,ex){return ss.isValue(this.$a[e].get_contentType())&&!ss.referenceEquals(this.$a[e].get_contentType(),ly.$2(ex))},$7:function(e,ex){return ss.isValue(this.$a[e].get_worksheetName())&&!ss.referenceEquals(this.$a[e].get_worksheetName(),ex.sheet)},$3:function(e){return ss.replaceAllString(e,'z_','')},$5:function(e,ex){var lA=_.keys(this.$a);for(var lB=0;lB<lA.length;lB++){var lC=lA[lB];var lD=this.$a[lC];var lE=e[this.$3(lC)];if(lE===null){delete e[lC];delete this.get_zonePresModels()[lC];this.removeZone(lD,ex);continue}if(ss.isValue(lE)&&ss.isValue(lE.zoneCommon)&&lD.get_zoneCommonModel().get_zoneType()!==lE.zoneCommon.zoneType){this.removeZone(lD,ex)}}},removeZone:function(e,ex){e.raiseRemoveZoneContent(ex);this.raiseEvent$1(ly).call(this,this.$2$2,e,ex);delete this.$a[lz.$0(e.get_zoneId())];this.$8=null},$4:function(e){var ex=new ss.StringBuilder;ex.appendLine(e);var lA=new ss.ObjectEnumerator(this.get_zonePresModels());try{while(lA.moveNext()){var lB=lA.current();if(ss.isValue(lB.value)&&ss.isValue(lB.value.zoneCommon)){ex.append('[ ');ex.append(lB.value.zoneId);ex.append(' ');ex.append(lB.value.zoneCommon.zoneType);ex.append(' ] ');ex.appendLine()}}}finally{lA.dispose()}}},gV);(function(){var e={};e[{ns:'tabsrv',cmd:'refresh-data-server'}.cmd]=false;e[{ns:'tabdoc',cmd:'get-datasource-data-pres-model'}.cmd]=false;e[{ns:'tabdoc',cmd:'get-show-data-pres-model'}.cmd]=false;e[{ns:'tabdoc',cmd:'categorical-filter'}.cmd]=false;e[{ns:'tabdoc',cmd:'categorical-filter-by-index'}.cmd]=false;e[{ns:'tabdoc',cmd:'connection-count-entity'}.cmd]=false;e[{ns:'tabdoc',cmd:'connection-fetch-entity'}.cmd]=false;e[{ns:'tabdoc',cmd:'export-power-point'}.cmd]=false;bS.$1=e})();(function(){he.$0=[]})();(function(){cf.$0=null})();(function(){ch.$5=15;ch.$8={};ch.$6={};ch.$7=[];ch.$8[{ns:'tabdoc',cmd:'keep-only-or-exclude'}.cmd]=2;ch.$8[{ns:'tabdoc',cmd:'quick-sort'}.cmd]=4;ch.$8[{ns:'tabdoc',cmd:'sort-nested'}.cmd]=5;ch.$8[{ns:'tabdoc',cmd:'clear-sorts'}.cmd]=6;ch.$8[{ns:'tabdoc',cmd:'run-action'}.cmd]=8;ch.$8[{ns:'tabdoc',cmd:'load-url'}.cmd]=9;ch.$8[{ns:'tabdoc',cmd:'merge-or-split'}.cmd]=10;ch.$8[{ns:'tabdoc',cmd:'ranged-by-value-merge'}.cmd]=10;ch.$8[{ns:'tabdoc',cmd:'ranged-by-index-merge'}.cmd]=10;ch.$8[{ns:'tabdoc',cmd:'legend-group-or-ungroup'}.cmd]=13;ch.$8[{ns:'tabdoc',cmd:'label-drill'}.cmd]=12;ch.$8[{ns:'tabdoc',cmd:'level-drill'}.cmd]=12;ch.$8[{ns:'tabdoc',cmd:'level-drill-up-down'}.cmd]=12;ch.$8[{ns:'tabdoc',cmd:'remove-reference-line'}.cmd]=15;ch.$8[{ns:'tabdoc',cmd:'show-reference-line-constant-value-editor'}.cmd]=21;ch.$8[{ns:'tabdoc',cmd:'trend-lines'}.cmd]=17;ch.$8[{ns:'tabdoc',cmd:'show-trend-line-editor'}.cmd]=16;ch.$8[{ns:'tabdoc',cmd:'show-col-totals'}.cmd]=18;ch.$8[{ns:'tabdoc',cmd:'show-row-totals'}.cmd]=18;ch.$8[{ns:'tabdoc',cmd:'remove-subtotals'}.cmd]=18;ch.$8[{ns:'tabdoc',cmd:'set-totals-type'}.cmd]=19;ch.$8[{ns:'tabdoc',cmd:'set-reference-line-formula'}.cmd]=20;ch.$8[{ns:'tabdoc',cmd:'show-reference-line-editor'}.cmd]=22;ch.$8[{ns:'tabdoc',cmd:'select-by-tuple-value'}.cmd]=23})();(function(){lv.guid='';lv.parentID='';lv.$0=''})();(function(){fI.$6='_vql_state_';fI.$5=new Map;fI.$8=0;fI.$7=0;tab.WindowHelper.addListener(window.self,'popstate',fI.$3)})();(function(){kR.$a=':retry';kR.$8=':original_view';kR.$e=':showSaveAs';kR.$7=':jsdebug';kR.$9=':render';kR.$5=':app';kR.$6=':ignore_sticky_session';kR.$b=':showComments';kR.$c=':showDataAlertId';kR.$d=':showDataAlerts';kR.$h=[':app',':jsdebug',':render'];kR.$j=ss.mkdict(['authoring',2,'authoringNewWorkbook',3,'newWorkbook',7,'views',1,'vizql/showadminview',4,'shared',5,'workbooks',6]);kR.$i=[':bootstrapWhenNotified'];kR.$f={};kR.$g={};var e=function(ex,lA){for(var lB=ex;lB<=lA;lB++){var lC=String.fromCharCode(lB);kR.$g[lC]=lC}};e(97,122);e(65,90);e(48,57);e(95,95);e(45,46)})();(function(){gV.removeUndefinedBoolsOnSwapCopy=true})();(function(){kN.vizInTooltipSpanTag='span[data-tableau="VizInTooltip"]';kN.unknownFieldMarker='~~~???~~~';kN.noLocalSummary='...';kN.invalidTupleId=0;kN.urlStringNull='~~null~';kN.urlStringSkipped='~~skipped~';kN.urlStringRagged='~~ragged~';kN.lastWidthAndHeightForVizInTooltips=[];kN.widestVizInTooltip=0;kN.$8=new RegExp('(\\r|\\n)','g')})();(function(){bQ.defaultAlpha=1;bQ.white=new bQ(255,255,255,1);bQ.black=new bQ(0,0,0,1);bQ.alphaMultiplier=1.5;bQ.luminanceThresholdForFakingLineColor=0.800000011920929;bQ.luminanceThresholdForLightColor=0.314999997615814;bQ.$8=0.999989986419678;bQ.$f=[0,5.07705190066E-06,2.33280046661E-05,5.69217657122E-05,0.000107187362341,0.000175123977503,0.000261543754548,0.000367136269816,0.000492503787191,0.000638182842167,0.000804658499513,0.000992374304074,0.00120173952244,0.00143313458967,0.00168691531679,0.0019634162134,0.00226295316071,0.00258582559623,0.00293231832394,0.003302703032,0.0036972395789,0.00411617709328,0.00455975492253,0.00502820345686,0.00552174485024,0.00604059365485,0.00658495738258,0.00715503700457,0.00775102739766,0.00837311774515,0.00902149189801,0.00969632870166,0.0103978022926,0.0111260823684,0.0118813344348,0.0126637200316,0.0134733969401,0.0143105193749,0.0151752381596,0.0160677008909,0.0169880520893,0.01793643334,0.0189129834237,0.0199178384388,0.0209511319148,0.0220129949193,0.0231035561579,0.0242229420675,0.0253712769047,0.0265486828285,0.0277552799781,0.0289911865471,0.0302565188524,0.0315513914002,0.0328759169484,0.0342302065651,0.0356143696849,0.037028514162,0.0384727463202,0.0399471710015,0.0414518916115,0.0429870101627,0.0445526273164,0.0461488424224,0.0477757535562,0.0494334575559,0.0511220500565,0.0528416255229,0.0545922772818,0.056374097552,0.0581871774737,0.0600316071363,0.0619074756055,0.0638148709487,0.0657538802603,0.0677245896854,0.0697270844426,0.0717614488462,0.0738277663278,0.0759261194563,0.0780565899581,0.0802192587362,0.0824142058885,0.0846415107254,0.0869012517877,0.0891935068622,0.0915183529989,0.0938758665256,0.0962661230633,0.0986891975411,0.10114516421,0.103634096655,0.106156067813,0.108711149979,0.111299414825,0.113920933406,0.116575776179,0.119264013005,0.12198571317,0.124740945387,0.127529777813,0.130352278056,0.133208513184,0.136098549737,0.139022453735,0.141980290686,0.144972125597,0.147998022983,0.151058046871,0.154152260812,0.15728072789,0.160443510725,0.163640671485,0.166872271891,0.170138373223,0.173439036332,0.176774321641,0.180144289154,0.183548998465,0.186988508759,0.190462878822,0.193972167048,0.19751643144,0.201095729621,0.204710118837,0.208359655961,0.212044397502,0.215764399609,0.219519718075,0.223310408341,0.227136525505,0.230998124323,0.234895259216,0.238827984272,0.242796353254,0.246800419602,0.250840236436,0.254915856566,0.25902733249,0.263174716398,0.267358060184,0.271577415438,0.275832833461,0.280124365261,0.28445206156,0.288815972797,0.293216149132,0.297652640449,0.302125496359,0.306634766203,0.311180499058,0.315762743736,0.320381548792,0.325036962521,0.329729032968,0.334457807924,0.339223334935,0.344025661302,0.348864834083,0.353740900097,0.358653905926,0.363603897921,0.368590922197,0.373615024646,0.37867625093,0.383774646488,0.388910256539,0.394083126083,0.399293299903,0.404540822568,0.409825738436,0.415148091656,0.420507926168,0.425905285707,0.431340213807,0.4368127538,0.442322948819,0.4478708418,0.453456475486,0.459079892424,0.464741134974,0.470440245304,0.476177265397,0.481952237051,0.487765201878,0.493616201311,0.499505276603,0.505432468828,0.511397818885,0.517401367497,0.523443155214,0.529523222417,0.535641609315,0.54179835595,0.547993502197,0.554227087766,0.560499152204,0.566809734897,0.573158875068,0.579546611783,0.58597298395,0.592438030321,0.598941789493,0.605484299911,0.612065599866,0.618685727499,0.625344720802,0.632042617621,0.638779455651,0.645555272445,0.652370105411,0.659223991813,0.666116968776,0.673049073281,0.680020342172,0.687030812155,0.694080519797,0.701169501531,0.708297793656,0.715465432335,0.7226724536,0.729918893352,0.737204787361,0.744530171267,0.751895080583,0.759299550695,0.766743616862,0.774227314218,0.781750677774,0.789313742416,0.796916542908,0.804559113895,0.812241489898,0.819963705324,0.827725794455,0.835527791461,0.843369730392,0.851251645185,0.859173569659,0.867135537521,0.875137582365,0.883179737673,0.891262036813,0.899384513047,0.907547199522,0.915750129279,0.923993335252,0.932276850265,0.940600707036,0.948964938178,0.9573695762,0.965814653503,0.974300202389,0.982826255054,0.991392843593,1];bQ.$9=new RegExp('#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})','i');bQ.$b=new RegExp('rgb\\((\\d+), ?(\\d+), ?(\\d+)\\)','i');bQ.$c=new RegExp('rgba\\((\\d+), ?(\\d+), ?(\\d+), ?(\\d+|0\\.\\d+|1\\.0)\\)','i');bQ.whiteHoverColor=new bQ(255,255,255,0.449999988079071);bQ.blackHoverColor=new bQ(0,0,0,0.449999988079071);bQ.$a=77;bQ.$d=null;bQ.$e=new ev(100)})();(function(){eN.defaultWeight='normal';eN.defaultStyle='normal';eN.hashSeparator='-<%>-';eN.matchQuotes=new RegExp('[\'"]','g')})();(function(){dO.boldWeight='bold';dO.normalWeight='normal'})();(function(){fB.$0=[new fB,new dO]})();(function(){eM.fontPropertyName='font';eM.$1$1=null;eM.$1$2=null})();(function(){es.nameOfMeasuresColumn=':Measure Names';es.nameOfMeasureValuesColumn='Multiple Values'})();(function(){kM.tupleIdColumnName='[system:visual].[tuple_id]';kM.measureNamesColumnName='[:Measure Names]'})();(function(){gR.$1='@2x';gR.$0='rgb(255,255,255)'})();(function(){hc.$0=new ss.Lazy(function(){return{eventHandler:new hc}})})();(function(){lt.$0=new ss.Lazy(function(){return new lt})})();(function(){bf.$1=bf.$0()})();(function(){N.instance=null})();(function(){jr.$0='data:image/png;base64,';jr.selectionBorderSize=1})();(function(){kU.waitGlassId='loadingGlassPane';kU.waitSpinnerId='loadingSpinner';kU.$1=300;kU.$2=500;kU.$3=250;kU.glassShowDelay=400;kU.glassDefaultOpacity=0;kU.glassDelayedOpacity=0.419999986886978})();(function(){iL.$4='Last';iL.$5='SecondToLast';iL.$3=1440;iL.$7=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];iL.$6=ss.mkdict(['Sun',tab.Strings.Sunday,'Mon',tab.Strings.Monday,'Tue',tab.Strings.Tuesday,'Wed',tab.Strings.Wednesday,'Thu',tab.Strings.Thursday,'Fri',tab.Strings.Friday,'Sat',tab.Strings.Saturday])})();(function(){bW.successResult=new bW(true,null)})();(function(){fY.$2=null})();(function(){G.$0=35;G.$1=1})();(function(){ly.zoneMargin=4;ly.rootZoneID=0;ly.$l=0;ly.$k=0;ly.$m='visual'.toString();ly.$j='dashboardTitle'.toString();ly.$i='dashboardText'.toString();ly.$c='quantitativeColorLegend'.toString();ly.$3='colorLegend'.toString();ly.$h='categoricalSizeLegend'.toString();ly.$g='categoricalShapeLegend'.toString();ly.$9='categoricalMapLegend'.toString();ly.$b='parameterControl'.toString();ly.$a='pageModel'.toString();ly.$f='serverRenderedLegend'.toString();ly.$8='imageZone'.toString();ly.$n='webZone'.toString();ly.$e='serverButtonZone'.toString();ly.$5='addInZone'.toString();ly.$d='quickFilterDisplay'.toString();ly.$4='dataHighlighter'.toString();ly.$7='flipboardNav'.toString();ly.$6='flipboard'.toString()})();(function(){hH.$5=6;hH.zonesThatDeferContentCreation=['viz','size','shape','color','map','filter','paramctrl','current-page','bitmap','web','dashboard-object','highlighter'];hH.$7=[1,2,3,4,5,6];hH.$8=null;hH.$6=null})();(function(){bT.$8=135;bT.$9=false;bT.$a=false;bT._instance=null;bT.$1$9=null;bT.$1$16=null;bT.fireDeferredUrlActions=false})();(function(){ep.maxCharsPerErrorReport=5000;ep.$0=5000;ep.$1=120;ep.$2=0;if(typeof(tsConfig)==='undefined'){return}var e=tsConfig.clientErrorReportingLevel;if(!ss.isNullOrEmptyString(e)){tab.ErrorTrace.install();ep.$2=window.setInterval(ep.reportFailures,5000)}})();(function(){Y.$0=new(ss.makeGenericType(gW,[Y]))})();(function(){be.linkTarget=null;be.autoUpdate=true;be.$1=null;be.$2=null;be.$4=null;be.$3=204;be.$1$1=null;be.$2=ss.mkdict(['%2F',new RegExp('\\/','g'),'%3F',new RegExp('\\?','g')])})();(function(){gZ.$e='vql';gZ.$d=0;gZ.$j={};gZ.$g={};gZ.$h={};gZ.$f=new Set;gZ.$k=false;gZ.$i=new ha})();(function(){hf.analyticsClientLibrary='analytics-client';hf.analyticsClientMinifiedLibrary='analytics-client.min';hf.serviceName='VizClient';hf.$1=null;hf.$1$1=null})();(function(){jd.$1={}})();(function(){dj.$1=null})();(function(){co.excel='excel';co.excelDirect='excel-direct';co.text='csv';co.textScan='textscan';co.server='sqlproxy';co.fileConnectionClasses=[];co.$2=null;co.$1={};co.$3=null;co.fileConnectionClasses.push('excel');co.fileConnectionClasses.push('excel-direct');co.fileConnectionClasses.push('csv');co.fileConnectionClasses.push('textscan')})();(function(){dl.exceptionAttributesClass='class';dl.exceptionAttributesFilename='filename';dl.exceptionAttributesDirectory='directory'})();(function(){dC.$5='badpassword';dC.$4='badoauthcredentials';dC.$6='NoAssociatedCustomOAuthKey'})();(function(){gY.visualPartToRegionMap=null;gY.regionToVisualPartMap=null;gY.visualPartToRegionMap={};gY.visualPartToRegionMap['left-axis']='leftaxis';gY.visualPartToRegionMap['right-axis']='rightaxis';gY.visualPartToRegionMap['top-axis']='topaxis';gY.visualPartToRegionMap['bottom-axis']='bottomaxis';gY.visualPartToRegionMap['y-labels']='yheader';gY.visualPartToRegionMap['x-labels']='xheader';gY.regionToVisualPartMap={};gY.regionToVisualPartMap['leftaxis']='left-axis';gY.regionToVisualPartMap['rightaxis']='right-axis';gY.regionToVisualPartMap['topaxis']='top-axis';gY.regionToVisualPartMap['bottomaxis']='bottom-axis';gY.regionToVisualPartMap['yheader']='y-labels';gY.regionToVisualPartMap['xheader']='x-labels'})();(function(){bU.$b=new RegExp('\\S+','g')})();(function(){hy.platformLibrary='platform';hy.platformMinifiedLibrary='platform.min';hy.$4=null;hy.$3=null;hy.$2=tab.Logger.getLogger(hy,4)})();(function(){iA.$1=null;iA.$1=new Set;tab.SetUtilities.addAll(Object).call(null,iA.$1,[{ns:'tabdoc',cmd:'pane-zoom'}.cmd,{ns:'tabdoc',cmd:'set-active-zone'}.cmd,{ns:'tabdoc',cmd:'default-map-tool-selection'}.cmd,{ns:'tabdoc',cmd:'get-runtime-data-model'}.cmd,{ns:'tabsrv',cmd:'render-tooltip-server'}.cmd,{ns:'tabsrv',cmd:'pane-pan-server'}.cmd,{ns:'tabsrv',cmd:'pane-anchor-zoom-server'}.cmd])})();(function(){jR.$0=false;jR.$1=false;jR.$1$1=null;jR.$1$2=null})();(function(){ll.$1=new RegExp('[/\\\\]([^/\\\\]*)$')})();(function(){ji.$2=300000;ji.$0=tab.DateUtil.get_nowAsTime();ji.$3=300000;ji.$1=tab.DateUtil.get_nowAsTime()})();(function(){jk.$2=0})();(function(){eO.$0='font'})();(function(){lh.$2$1=null})();(function(){lw.rootZoneID=0})();(function(){jU.$6=(tsConfig.is_mobile?4:8);jU.$5=null;jU.$4=null;if(!tsConfig.is_authoring||tab.FeatureFlags.isEnabled('StoryPointCache')){lt.get().add_onBootstrapResponse(jU.$0)}})();(function(){P.$r=['http:','https:','mailto:','news:','gopher:','tsc:','tsl:','sms:','tel:'];P.$p=false;P.$o=false;P.$q=null})();(function(){iV.$k=null;iV.$k={};iV.$k['simple']='select-options-simple';iV.$k['toggle']='select-options-toggle';iV.$k['range']='select-options-range';iV.$k['menu']='select-options-menu'})();(function(){bh.$5='date-time';bh.$4='all'})();(function(){jw.$2$1=null})();(function(){cS.facadeDomId='facadedom';cS.defaultGridSize=20;cS.$2$1=null})();(function(){eF.presModelCache=null})();(function(){iE.usageTable='RuntimeClientEvents';iE.usageColumnName='EventName';iE.metricsTimeColumnName='ElapsedTime';var e={};e[0]='LOADED';iE.$1=e})();(function(){cn.primaryTableCalcIndex=0;cn.secondaryTableCalcIndex=1;var e=Y.get_instance();e.addModel(cn).call(e)})();(function(){dz.$0=null})();(function(){dA.$2=false})();(function(){bE.$a='Cancel_Command';bE.$2='CommandName';bE.$3='UNKNOWN';bE.$4='ElapsedTimeToCancelMS';bE.$5='ElapsedTimeToProcessCancelResponseMS';bE.$6='CancelStatus';bE.$9='Success';bE.$8='NothingToCancel';bE.$7='Failure'})();(function(){jI.fontFaces=['Arial','Courier New','Tableau Bold','Tableau Book','Tableau Light','Tableau Medium','Tableau Regular','Tableau Semibold','Times New Roman']})();(function(){eS.tableauFallback='Arial';eS.sansSerifFallback='sans-serif';eS.$5=[{item1:'thin',item2:'100'},{item1:'extra-light',item2:'200'},{item1:'extra light',item2:'200'},{item1:'light',item2:'300'},{item1:'normal',item2:'400'},{item1:'regular',item2:'400'},{item1:'book',item2:'400'},{item1:'medium',item2:'500'},{item1:'demi-bold',item2:'600'},{item1:'demibold',item2:'600'},{item1:'semi-bold',item2:'600'},{item1:'semibold',item2:'600'},{item1:'demi',item2:'600'},{item1:'bold',item2:'700'},{item1:'heavy',item2:'800'},{item1:'black',item2:'900'}];eS.$3=[{item1:'compressed',item2:'extra-condensed'},{item1:'narrow',item2:'condensed'},{item1:'condensed',item2:'condensed'}];eS.$4=[{item1:'italic',item2:'italic'}];eS.$2={}})();(function(){lb.fakeFontName='TableauTestFont';lb.fakeFontTestText='A';lb.fakeFontDivClass='TestFontContainer';lb.$3={};lb.$4=$(document.body);lb.$2=0;lb.$1=0;jR.callAfterModelsInitialized(function(){$('<div />').addClass('TestFontContainer').css({'font-family':'TableauTestFont',visibility:'hidden','z-index':'-1',position:'absolute',top:'0',right:'0'}).text('A').appendTo(lb.$4)})})();(function(){eT.fontListStorageKey='auth-font-list';eT.fontSizes=[8,9,10,11,12,14,15,16,18,20,22,24,26,28,36,48,72]})();(function(){je.tableauLight='Tableau Light';je.tableauBook='Tableau Book';je.tableauRegular='Tableau Regular';je.tableauMedium='Tableau Medium';je.tableauSemibold='Tableau Semibold';je.tableauBold='Tableau Bold';je.bentonSansLight='Benton Sans Light';je.bentonSansBook='Benton Sans Book';je.bentonSansBookItalic='Benton Sans Book Italic';je.bentonSansMedium='Benton Sans Medium';je.bentonSansSemiDemi='Benton Sans SemiDemi';je.bentonSansSemiDemiItalic='Benton Sans SemiDemi Italic';je.bentonSans='Benton Sans';je.bentonSansLowDpi='Benton Sans Low-DPI';je.tableauFontWoffPaths=ss.mkdict(['Tableau Light',tableau.util.assetUrl('/fonts/Tableau-Light.woff'),'Tableau Book',tableau.util.assetUrl('/fonts/Tableau-Book.woff'),'Tableau Regular',tableau.util.assetUrl('/fonts/Tableau-Regular.woff'),'Tableau Medium',tableau.util.assetUrl('/fonts/Tableau-Medium.woff'),'Tableau Semibold',tableau.util.assetUrl('/fonts/Tableau-Semibold.woff'),'Tableau Bold',tableau.util.assetUrl('/fonts/Tableau-Bold.woff')]);je.bentonSansWoffPaths=ss.mkdict(['Benton Sans Light',tableau.util.assetUrl('/fonts/BentonSans-Light.woff'),'Benton Sans Book',tableau.util.assetUrl('/fonts/BentonSans-Book.woff'),'Benton Sans Book Italic',tableau.util.assetUrl('/fonts/BentonSans-Book_Italic.woff'),'Benton Sans Medium',tableau.util.assetUrl('/fonts/BentonSans-Medium.woff'),'Benton Sans SemiDemi',tableau.util.assetUrl('/fonts/BentonSans-SemiDemi.woff'),'Benton Sans SemiDemi Italic',tableau.util.assetUrl('/fonts/BentonSans-SemiDemi_Italic.woff')]);var e=new dK;e.set_fontFamily('Tableau Light');e.woffLocation=je.tableauFontWoffPaths['Tableau Light'];var ex=new dK;ex.set_fontFamily('Tableau Light');ex.set_weight('bold');ex.woffLocation=je.tableauFontWoffPaths['Tableau Medium'];var lA=new dK;lA.set_fontFamily('Tableau Book');lA.woffLocation=je.tableauFontWoffPaths['Tableau Book'];var lB=new dK;lB.set_fontFamily('Tableau Book');lB.set_weight('bold');lB.woffLocation=je.tableauFontWoffPaths['Tableau Medium'];var lC=new dK;lC.set_fontFamily('Tableau Regular');lC.woffLocation=je.tableauFontWoffPaths['Tableau Regular'];var lD=new dK;lD.set_fontFamily('Tableau Regular');lD.set_weight('bold');lD.woffLocation=je.tableauFontWoffPaths['Tableau Semibold'];var lE=new dK;lE.set_fontFamily('Tableau Medium');lE.woffLocation=je.tableauFontWoffPaths['Tableau Medium'];var lF=new dK;lF.set_fontFamily('Tableau Medium');lF.set_weight('bold');lF.woffLocation=je.tableauFontWoffPaths['Tableau Bold'];var lG=new dK;lG.set_fontFamily('Tableau Semibold');lG.woffLocation=je.tableauFontWoffPaths['Tableau Semibold'];var lH=new dK;lH.set_fontFamily('Tableau Semibold');lH.set_weight('bold');lH.woffLocation=je.tableauFontWoffPaths['Tableau Bold'];var lI=new dK;lI.set_fontFamily('Tableau Bold');lI.woffLocation=je.tableauFontWoffPaths['Tableau Bold'];var lJ=new dK;lJ.set_fontFamily('Tableau Bold');lJ.set_weight('bold');lJ.woffLocation=je.tableauFontWoffPaths['Tableau Bold'];je.tableauFontNames=[e,ex,lA,lB,lC,lD,lE,lF,lG,lH,lI,lJ];var e=new dK;e.set_fontFamily('Benton Sans');e.woffLocation=je.bentonSansWoffPaths['Benton Sans Book'];je.bentonSansFontNames=[e];var e=new dK;e.set_fontFamily('Benton Sans Low-DPI');e.woffLocation=je.bentonSansWoffPaths['Benton Sans SemiDemi'];je.bentonSansLowDpiFontNames=[e];je.effectiveBentonSans=(BrowserSupport.BrowserSupport.IsHighDpi()?je.bentonSansFontNames:je.bentonSansLowDpiFontNames)})();(function(){iz.$2=null;iz.defaultContentSecurityPolicy="default-src 'none'; script-src 'self'; connect-src 'self'; img-src * data:; style-src 'self' 'unsafe-inline'; font-src 'self' {0};"})();(function(){jR.callOnceAfterInitialBootstrap(ba.generateAutomatedInsightsVizIfNeeded)})();(function(){var e=Y.get_instance();e.addModel(bz).call(e)})();(function(){kd.$0={};kd.$0['TQRC_DRILL_DOWN']='tableau-1.3/res/vizTooltips/Tooltip_Action_Down.png';kd.$0['TQRC_DRILL_DOWN_2X']='tableau-1.3/res/vizTooltips/Tooltip_Action_Down@2x.png';kd.$0['TQRC_DRILL_DOWN_ACTIVE']='tableau-1.3/res/vizTooltips/Tooltip_Action_Down_Active.png';kd.$0['TQRC_DRILL_DOWN_ACTIVE_2X']='tableau-1.3/res/vizTooltips/Tooltip_Action_Down_Active@2x.png';kd.$0['TQRC_DRILL_UP']='tableau-1.3/res/vizTooltips/Tooltip_Action_Up.png';kd.$0['TQRC_DRILL_UP_2x']='tableau-1.3/res/vizTooltips/Tooltip_Action_Up@2x.png';kd.$0['TQRC_DRILL_UP_ACTIVE']='tableau-1.3/res/vizTooltips/Tooltip_Action_Up_Active.png';kd.$0['TQRC_DRILL_UP_ACTIVE_2x']='tableau-1.3/res/vizTooltips/Tooltip_Action_Up_Action@2x.png';kd.$0['TQRC_EXCLUDE']='tableau-1.3/res/vizTooltips/Tooltip_Exclude.png';kd.$0['TQRC_EXCLUDE_2X']='tableau-1.3/res/vizTooltips/Tooltip_Exclude@2x.png';kd.$0['TQRC_EXCLUDE_ACTIVE']='tableau-1.3/res/vizTooltips/Tooltip_Exclude_Active.png';kd.$0['TQRC_EXCLUDE_ACTIVE_2X']='tableau-1.3/res/vizTooltips/Tooltip_Exclude_Active@2x.png';kd.$0['TQRC_KEEP_ONLY']='tableau-1.3/res/vizTooltips/Tooltip_KeepOnly.png';kd.$0['TQRC_KEEP_ONLY_2X']='tableau-1.3/res/vizTooltips/Tooltip_KeepOnly@2x.png';kd.$0['TQRC_KEEP_ONLY_ACTIVE']='tableau-1.3/res/vizTooltips/Tooltip_KeepOnly_Active.png';kd.$0['TQRC_KEEP_ONLY_ACTIVE_2X']='tableau-1.3/res/vizTooltips/Tooltip_KeepOnly_Active@2x.png';kd.$0['TQRC_MERGE']='tableau-1.3/res/vizTooltips/Tooltip_Group.png';kd.$0['TQRC_MERGE_2X']='tableau-1.3/res/vizTooltips/Tooltip_Group@2x.png';kd.$0['TQRC_MERGE_ACTIVE']='tableau-1.3/res/vizTooltips/Tooltip_Group_Active.png';kd.$0['TQRC_MERGE_ACTIVE_2X']='tableau-1.3/res/vizTooltips/Tooltip_Group_Active@2x.png';kd.$0['TQRC_VIEWDATA']='tableau-1.3/res/vizTooltips/Tooltip_ViewData.png';kd.$0['TQRC_VIEWDATA_ACTIVE']='tableau-1.3/res/vizTooltips/Tooltip_ViewData_Active.png';kd.$0['TQRC_SORT_ASCENDING']='tableau-1.3/res/vizTooltips/Tooltip_SortAscending.png';kd.$0['TQRC_SORT_ASCENDING_2X']='tableau-1.3/res/vizTooltips/Tooltip_Sort_Ascending@2x.png';kd.$0['TQRC_SORT_ASCENDING_ACTIVE']='tableau-1.3/res/vizTooltips/Tooltip_SortAscending_Active.png';kd.$0['TQRC_SORT_ASCENDING_ACTIVE_2X']='tableau-1.3/res/vizTooltips/Tooltip_Sort_Ascending_Active@2x.png';kd.$0['TQRC_SORT_DESCENDING']='tableau-1.3/res/vizTooltips/Tooltip_SortDescending.png';kd.$0['TQRC_SORT_DESCENDING_2X']='tableau-1.3/res/vizTooltips/Tooltip_Sort_Descending@2x.png';kd.$0['TQRC_SORT_DESCENDING_ACTIVE']='tableau-1.3/res/vizTooltips/Tooltip_SortDescending_Active.png';kd.$0['TQRC_SORT_DESCENDING_ACTIVE_2X']='tableau-1.3/res/vizTooltips/Tooltip_Sort_Descending_Active@2x.png';kd.$0['TQRC_SPLIT']='tableau-1.3/res/vizTooltips/Tooltip_Split.png';kd.$0['TQRC_SPLIT_2X']='tableau-1.3/res/vizTooltips/Tooltip_Split@2x.png';kd.$0['TQRC_SPLIT_ACTIVE']='tableau-1.3/res/vizTooltips/Tooltip_Split_Active.png';kd.$0['TQRC_SPLIT_ACTIVE_2X']='tableau-1.3/res/vizTooltips/Tooltip_Split_Active@2x.png';kd.$0['TQRC_SHOWME_BIN']='tableau-1.3/res/showme/ShowMe_NumericBin.png';kd.$0['TQRC_SHOWME_BIN_2X']='tableau-1.3/res/showme/ShowMe_NumericBin@2x.png';kd.$0['TQRC_SHOWME_SUGGESTED']='tableau-1.3/res/showme/ShowMe_Check.png';kd.$0['TQRC_SHOWME_SUGGESTED_2X']='tableau-1.3/res/showme/ShowMe_Check@2x.png';kd.$0['TQRC_SHOWME_CLOSE']='tableau-1.3/res/showme/ShowMe_Close.png';kd.$0['TQRC_SHOWME_CLOSE_2X']='tableau-1.3/res/showme/ShowMe_Close@2x.png';kd.$0['TQRC_SHOWME_CLOSE_PRESS']='tableau-1.3/res/showme/ShowMe_Close_Active.png';kd.$0['TQRC_SHOWME_CLOSE_PRESS_2X']='tableau-1.3/res/showme/ShowMe_Close_Active@2x.png';kd.$0['TQRC_SHOWME_DATE']='tableau-1.3/res/showme/ShowMe_Date.png';kd.$0['TQRC_SHOWME_DATE_2X']='tableau-1.3/res/showme/ShowMe_Date@2x.png';kd.$0['TQRC_SHOWME_GEO']='tableau-1.3/res/showme/ShowMe_Geo.png';kd.$0['TQRC_SHOWME_GEO_2X']='tableau-1.3/res/showme/ShowMe_Geo@2x.png';kd.$0['TQRC_SHOWME_GLOW']='tableau-1.3/res/showme/glow.png';kd.$0['TQRC_SHOWME_GLOW_2X']='tableau-1.3/res/showme/glow@2x.png';kd.$0['TQRC_SHOWME_GRIPPER']='tableau-1.3/res/showme/gripper.png';kd.$0['TQRC_SHOWME_GRIPPER_2X']='tableau-1.3/res/showme/gripper@2x.png';kd.$0['TQRC_SHOWME_SHOWME']='tableau-1.3/res/showme/showme.png';kd.$0['TQRC_SHOWME_SHOWME_2X']='tableau-1.3/res/showme/showme@2x.png';kd.$0['TQRC_SHOWME_TITLE_BACKGROUND_HOVER']='tableau-1.3/res/showme/Title-background-hover.png';kd.$0['TQRC_SHOWME_TITLE_BACKGROUND_HOVER_2X']='tableau-1.3/res/showme/Title-background-hover@2x.png';kd.$0['TQRC_SHOWME_TITLE_BACKGROUND_REST']='tableau-1.3/res/showme/Title-background-rest.png';kd.$0['TQRC_SHOWME_TITLE_BACKGROUND_REST_2X']='tableau-1.3/res/showme/Title-background-rest@2x.png';kd.$0['TQRC_SHOWME_AREAMEAS']='tableau-1.3/res/showme/ShowMe_AreaContinuous.png';kd.$0['TQRC_SHOWME_AREADIM']='tableau-1.3/res/showme/ShowMe_AreaDiscrete.png';kd.$0['TQRC_SHOWME_FILLEDMAPS']='tableau-1.3/res/showme/ShowMe_AreaMap.png';kd.$0['TQRC_SHOWME_BOXPLOT']='tableau-1.3/res/showme/ShowMe_BoxAndWhisker.png';kd.$0['TQRC_SHOWME_BUBBLE']='tableau-1.3/res/showme/ShowMe_Bubble.png';kd.$0['TQRC_SHOWME_BULLET']='tableau-1.3/res/showme/ShowMe_Bullet.png';kd.$0['TQRC_SHOWME_CIRCLE']='tableau-1.3/res/showme/ShowMe_Circles.png';kd.$0['TQRC_SHOWME_BARLINE']='tableau-1.3/res/showme/ShowMe_DualCombination.png';kd.$0['TQRC_SHOWME_DUALLINE']='tableau-1.3/res/showme/ShowMe_DualLine.png';kd.$0['TQRC_SHOWME_GANTT']='tableau-1.3/res/showme/ShowMe_Gantt.png';kd.$0['TQRC_SHOWME_HEATMAP']='tableau-1.3/res/showme/ShowMe_HeatMap.png';kd.$0['TQRC_SHOWME_SPOTTABLE']='tableau-1.3/res/showme/ShowMe_HighlightTable.png';kd.$0['TQRC_SHOWME_HISTOGRAM']='tableau-1.3/res/showme/ShowMe_Histogram.png';kd.$0['TQRC_SHOWME_BARHORIZONTAL']='tableau-1.3/res/showme/ShowMe_HorizontalBars.png';kd.$0['TQRC_SHOWME_LINEMEAS']='tableau-1.3/res/showme/ShowMe_LinesContinuous.png';kd.$0['TQRC_SHOWME_LINEDIM']='tableau-1.3/res/showme/ShowMe_LinesDiscrete.png';kd.$0['TQRC_SHOWME_PIES']='tableau-1.3/res/showme/ShowMe_Pie.png';kd.$0['TQRC_SHOWME_SCATSING']='tableau-1.3/res/showme/ShowMe_Scatter.png';kd.$0['TQRC_SHOWME_BARSIDEBY']='tableau-1.3/res/showme/ShowMe_SideBySideBars.png';kd.$0['TQRC_SHOWME_CIRCLESIDEBYSIDE']='tableau-1.3/res/showme/ShowMe_SideBySideCircles.png';kd.$0['TQRC_SHOWME_BARSTACKED']='tableau-1.3/res/showme/ShowMe_StackedBars.png';kd.$0['TQRC_SHOWME_MAPS']='tableau-1.3/res/showme/ShowMe_SymbolMap.png';kd.$0['TQRC_SHOWME_TEXTTABLE']='tableau-1.3/res/showme/ShowMe_TextTable.png';kd.$0['TQRC_SHOWME_TREEMAP']='tableau-1.3/res/showme/ShowMe_TreeMap.png';kd.$0['TQRC_SHOWME_AREAMEAS_2X']='tableau-1.3/res/showme/ShowMe_AreaContinuous@2x.png';kd.$0['TQRC_SHOWME_AREADIM_2X']='tableau-1.3/res/showme/ShowMe_AreaDiscrete@2x.png';kd.$0['TQRC_SHOWME_FILLEDMAPS_2X']='tableau-1.3/res/showme/ShowMe_AreaMap@2x.png';kd.$0['TQRC_SHOWME_BOXPLOT_2X']='tableau-1.3/res/showme/ShowMe_BoxAndWhisker@2x.png';kd.$0['TQRC_SHOWME_BUBBLE_2X']='tableau-1.3/res/showme/ShowMe_Bubble@2x.png';kd.$0['TQRC_SHOWME_BULLET_2X']='tableau-1.3/res/showme/ShowMe_Bullet@2x.png';kd.$0['TQRC_SHOWME_CIRCLE_2X']='tableau-1.3/res/showme/ShowMe_Circles@2x.png';kd.$0['TQRC_SHOWME_BARLINE_2X']='tableau-1.3/res/showme/ShowMe_DualCombination@2x.png';kd.$0['TQRC_SHOWME_DUALLINE_2X']='tableau-1.3/res/showme/ShowMe_DualLine@2x.png';kd.$0['TQRC_SHOWME_GANTT_2X']='tableau-1.3/res/showme/ShowMe_Gantt@2x.png';kd.$0['TQRC_SHOWME_HEATMAP_2X']='tableau-1.3/res/showme/ShowMe_HeatMap@2x.png';kd.$0['TQRC_SHOWME_SPOTTABLE_2X']='tableau-1.3/res/showme/ShowMe_HighlightTable@2x.png';kd.$0['TQRC_SHOWME_HISTOGRAM_2X']='tableau-1.3/res/showme/ShowMe_Histogram@2x.png';kd.$0['TQRC_SHOWME_BARHORIZONTAL_2X']='tableau-1.3/res/showme/ShowMe_HorizontalBars@2x.png';kd.$0['TQRC_SHOWME_LINEDIM_2X']='tableau-1.3/res/showme/ShowMe_LinesDiscrete@2x.png';kd.$0['TQRC_SHOWME_LINEMEAS_2X']='tableau-1.3/res/showme/ShowMe_LinesContinuous@2x.png';kd.$0['TQRC_SHOWME_PIES_2X']='tableau-1.3/res/showme/ShowMe_Pie@2x.png';kd.$0['TQRC_SHOWME_SCATSING_2X']='tableau-1.3/res/showme/ShowMe_Scatter@2x.png';kd.$0['TQRC_SHOWME_BARSIDEBY_2X']='tableau-1.3/res/showme/ShowMe_SideBySideBars@2x.png';kd.$0['TQRC_SHOWME_CIRCLESIDEBYSIDE_2X']='tableau-1.3/res/showme/ShowMe_SideBySideCircles@2x.png';kd.$0['TQRC_SHOWME_BARSTACKED_2X']='tableau-1.3/res/showme/ShowMe_StackedBars@2x.png';kd.$0['TQRC_SHOWME_MAPS_2X']='tableau-1.3/res/showme/ShowMe_SymbolMap@2x.png';kd.$0['TQRC_SHOWME_TEXTTABLE_2X']='tableau-1.3/res/showme/ShowMe_TextTable@2x.png';kd.$0['TQRC_SHOWME_TREEMAP_2X']='tableau-1.3/res/showme/ShowMe_TreeMap@2x.png';kd.$0['TQRC_SHOWME_1_BARSTACKED']='tableau-1.3/res/showme/enabled/BarStacked.png';kd.$0['TQRC_SHOWME_1_BARSIDEBY']='tableau-1.3/res/showme/enabled/BarSideBySide.png';kd.$0['TQRC_SHOWME_1_BARHORIZONTAL']='tableau-1.3/res/showme/enabled/BarHorizontal.png';kd.$0['TQRC_SHOWME_1_BARLINE']='tableau-1.3/res/showme/enabled/BarLine.png';kd.$0['TQRC_SHOWME_1_CIRCLE']='tableau-1.3/res/showme/enabled/Circle.png';kd.$0['TQRC_SHOWME_1_CIRCLESIDEBYSIDE']='tableau-1.3/res/showme/enabled/CircleSideBySide.png';kd.$0['TQRC_SHOWME_1_GANTT']='tableau-1.3/res/showme/enabled/Gantt.png';kd.$0['TQRC_SHOWME_1_HEATMAP']='tableau-1.3/res/showme/enabled/HeatMap.png';kd.$0['TQRC_SHOWME_1_HISTOGRAM']='tableau-1.3/res/showme/enabled/Histogram.png';kd.$0['TQRC_SHOWME_1_LINEDIM']='tableau-1.3/res/showme/enabled/LineDimension.png';kd.$0['TQRC_SHOWME_1_LINEMEAS']='tableau-1.3/res/showme/enabled/LineMeasure.png';kd.$0['TQRC_SHOWME_1_AREAMEAS']='tableau-1.3/res/showme/enabled/FilledLineContinuous.png';kd.$0['TQRC_SHOWME_1_AREADIM']='tableau-1.3/res/showme/enabled/FilledLineDiscrete.png';kd.$0['TQRC_SHOWME_1_SCATSING']='tableau-1.3/res/showme/enabled/ScatterSingle.png';kd.$0['TQRC_SHOWME_1_TEXTTABLE']='tableau-1.3/res/showme/enabled/TextTable.png';kd.$0['TQRC_SHOWME_1_SPOTTABLE']='tableau-1.3/res/showme/enabled/SpotTable.png';kd.$0['TQRC_SHOWME_1_MAPS']='tableau-1.3/res/showme/enabled/Maps.png';kd.$0['TQRC_SHOWME_1_FILLEDMAPS']='tableau-1.3/res/showme/enabled/FilledMaps.png';kd.$0['TQRC_SHOWME_1_PIES']='tableau-1.3/res/showme/enabled/Pies.png';kd.$0['TQRC_SHOWME_1_DUALLINE']='tableau-1.3/res/showme/enabled/DualAxis.png';kd.$0['TQRC_SHOWME_1_BULLET']='tableau-1.3/res/showme/enabled/Bullet.png';kd.$0['TQRC_SHOWME_1_TREEMAP']='tableau-1.3/res/showme/enabled/Treemap.png';kd.$0['TQRC_SHOWME_1_BUBBLE']='tableau-1.3/res/showme/enabled/Bubble.png';kd.$0['TQRC_SHOWME_1_BOXPLOT']='tableau-1.3/res/showme/enabled/Boxplot.png';kd.$0['TQRC_SHOWME_1_BARSTACKED_2X']='tableau-1.3/res/showme/enabled/BarStacked@2x.png';kd.$0['TQRC_SHOWME_1_BARSIDEBY_2X']='tableau-1.3/res/showme/enabled/BarSideBySide@2x.png';kd.$0['TQRC_SHOWME_1_BARHORIZONTAL_2X']='tableau-1.3/res/showme/enabled/BarHorizontal@2x.png';kd.$0['TQRC_SHOWME_1_BARLINE_2X']='tableau-1.3/res/showme/enabled/BarLine@2x.png';kd.$0['TQRC_SHOWME_1_CIRCLE_2X']='tableau-1.3/res/showme/enabled/Circle@2x.png';kd.$0['TQRC_SHOWME_1_CIRCLESIDEBYSIDE_2X']='tableau-1.3/res/showme/enabled/CircleSideBySide@2x.png';kd.$0['TQRC_SHOWME_1_GANTT_2X']='tableau-1.3/res/showme/enabled/Gantt@2x.png';kd.$0['TQRC_SHOWME_1_HEATMAP_2X']='tableau-1.3/res/showme/enabled/HeatMap@2x.png';kd.$0['TQRC_SHOWME_1_HISTOGRAM_2X']='tableau-1.3/res/showme/enabled/Histogram@2x.png';kd.$0['TQRC_SHOWME_1_LINEDIM_2X']='tableau-1.3/res/showme/enabled/LineDimension@2x.png';kd.$0['TQRC_SHOWME_1_LINEMEAS_2X']='tableau-1.3/res/showme/enabled/LineMeasure@2x.png';kd.$0['TQRC_SHOWME_1_AREAMEAS_2X']='tableau-1.3/res/showme/enabled/FilledLineContinuous@2x.png';kd.$0['TQRC_SHOWME_1_AREADIM_2X']='tableau-1.3/res/showme/enabled/FilledLineDiscrete@2x.png';kd.$0['TQRC_SHOWME_1_SCATSING_2X']='tableau-1.3/res/showme/enabled/ScatterSingle@2x.png';kd.$0['TQRC_SHOWME_1_TEXTTABLE_2X']='tableau-1.3/res/showme/enabled/TextTable@2x.png';kd.$0['TQRC_SHOWME_1_SPOTTABLE_2X']='tableau-1.3/res/showme/enabled/SpotTable@2x.png';kd.$0['TQRC_SHOWME_1_MAPS_2X']='tableau-1.3/res/showme/enabled/Maps@2x.png';kd.$0['TQRC_SHOWME_1_FILLEDMAPS_2X']='tableau-1.3/res/showme/enabled/FilledMaps@2x.png';kd.$0['TQRC_SHOWME_1_PIES_2X']='tableau-1.3/res/showme/enabled/Pies@2x.png';kd.$0['TQRC_SHOWME_1_DUALLINE_2X']='tableau-1.3/res/showme/enabled/DualAxis@2x.png';kd.$0['TQRC_SHOWME_1_BULLET_2X']='tableau-1.3/res/showme/enabled/Bullet@2x.png';kd.$0['TQRC_SHOWME_1_TREEMAP_2X']='tableau-1.3/res/showme/enabled/Treemap@2x.png';kd.$0['TQRC_SHOWME_1_BUBBLE_2X']='tableau-1.3/res/showme/enabled/Bubble@2x.png';kd.$0['TQRC_SHOWME_1_BOXPLOT_2X']='tableau-1.3/res/showme/enabled/Boxplot@2x.png';kd.$0['TQRC_SHOWME_0_BARSTACKED']='tableau-1.3/res/showme/disabled/BarStacked.png';kd.$0['TQRC_SHOWME_0_BARSIDEBY']='tableau-1.3/res/showme/disabled/BarSideBySide.png';kd.$0['TQRC_SHOWME_0_BARHORIZONTAL']='tableau-1.3/res/showme/disabled/BarHorizontal.png';kd.$0['TQRC_SHOWME_0_BARLINE']='tableau-1.3/res/showme/disabled/BarLine.png';kd.$0['TQRC_SHOWME_0_CIRCLE']='tableau-1.3/res/showme/disabled/Circle.png';kd.$0['TQRC_SHOWME_0_CIRCLESIDEBYSIDE']='tableau-1.3/res/showme/disabled/CircleSideBySide.png';kd.$0['TQRC_SHOWME_0_GANTT']='tableau-1.3/res/showme/disabled/Gantt.png';kd.$0['TQRC_SHOWME_0_HEATMAP']='tableau-1.3/res/showme/disabled/HeatMap.png';kd.$0['TQRC_SHOWME_0_HISTOGRAM']='tableau-1.3/res/showme/disabled/Histogram.png';kd.$0['TQRC_SHOWME_0_LINEDIM']='tableau-1.3/res/showme/disabled/LineDimension.png';kd.$0['TQRC_SHOWME_0_LINEMEAS']='tableau-1.3/res/showme/disabled/LineMeasure.png';kd.$0['TQRC_SHOWME_0_AREAMEAS']='tableau-1.3/res/showme/disabled/FilledLineContinuous.png';kd.$0['TQRC_SHOWME_0_AREADIM']='tableau-1.3/res/showme/disabled/FilledLineDiscrete.png';kd.$0['TQRC_SHOWME_0_SCATSING']='tableau-1.3/res/showme/disabled/ScatterSingle.png';kd.$0['TQRC_SHOWME_0_TEXTTABLE']='tableau-1.3/res/showme/disabled/TextTable.png';kd.$0['TQRC_SHOWME_0_SPOTTABLE']='tableau-1.3/res/showme/disabled/SpotTable.png';kd.$0['TQRC_SHOWME_0_MAPS']='tableau-1.3/res/showme/disabled/Maps.png';kd.$0['TQRC_SHOWME_0_FILLEDMAPS']='tableau-1.3/res/showme/disabled/FilledMaps.png';kd.$0['TQRC_SHOWME_0_PIES']='tableau-1.3/res/showme/disabled/Pies.png';kd.$0['TQRC_SHOWME_0_DUALLINE']='tableau-1.3/res/showme/disabled/DualAxis.png';kd.$0['TQRC_SHOWME_0_BULLET']='tableau-1.3/res/showme/disabled/Bullet.png';kd.$0['TQRC_SHOWME_0_TREEMAP']='tableau-1.3/res/showme/disabled/Treemap.png';kd.$0['TQRC_SHOWME_0_BUBBLE']='tableau-1.3/res/showme/disabled/Bubble.png';kd.$0['TQRC_SHOWME_0_BOXPLOT']='tableau-1.3/res/showme/disabled/Boxplot.png';kd.$0['TQRC_SHOWME_0_BARSTACKED_2X']='tableau-1.3/res/showme/disabled/BarStacked@2x.png';kd.$0['TQRC_SHOWME_0_BARSIDEBY_2X']='tableau-1.3/res/showme/disabled/BarSideBySide@2x.png';kd.$0['TQRC_SHOWME_0_BARHORIZONTAL_2X']='tableau-1.3/res/showme/disabled/BarHorizontal@2x.png';kd.$0['TQRC_SHOWME_0_BARLINE_2X']='tableau-1.3/res/showme/disabled/BarLine@2x.png';kd.$0['TQRC_SHOWME_0_CIRCLE_2X']='tableau-1.3/res/showme/disabled/Circle@2x.png';kd.$0['TQRC_SHOWME_0_CIRCLESIDEBYSIDE_2X']='tableau-1.3/res/showme/disabled/CircleSideBySide@2x.png';kd.$0['TQRC_SHOWME_0_GANTT_2X']='tableau-1.3/res/showme/disabled/Gantt@2x.png';kd.$0['TQRC_SHOWME_0_HEATMAP_2X']='tableau-1.3/res/showme/disabled/HeatMap@2x.png';kd.$0['TQRC_SHOWME_0_HISTOGRAM_2X']='tableau-1.3/res/showme/disabled/Histogram@2x.png';kd.$0['TQRC_SHOWME_0_LINEDIM_2X']='tableau-1.3/res/showme/disabled/LineDimension@2x.png';kd.$0['TQRC_SHOWME_0_LINEMEAS_2X']='tableau-1.3/res/showme/disabled/LineMeasure@2x.png';kd.$0['TQRC_SHOWME_0_AREAMEAS_2X']='tableau-1.3/res/showme/disabled/FilledLineContinuous@2x.png';kd.$0['TQRC_SHOWME_0_AREADIM_2X']='tableau-1.3/res/showme/disabled/FilledLineDiscrete@2x.png';kd.$0['TQRC_SHOWME_0_SCATSING_2X']='tableau-1.3/res/showme/disabled/ScatterSingle@2x.png';kd.$0['TQRC_SHOWME_0_TEXTTABLE_2X']='tableau-1.3/res/showme/disabled/TextTable@2x.png';kd.$0['TQRC_SHOWME_0_SPOTTABLE_2X']='tableau-1.3/res/showme/disabled/SpotTable@2x.png';kd.$0['TQRC_SHOWME_0_MAPS_2X']='tableau-1.3/res/showme/disabled/Maps@2x.png';kd.$0['TQRC_SHOWME_0_FILLEDMAPS_2X']='tableau-1.3/res/showme/disabled/FilledMaps@2x.png';kd.$0['TQRC_SHOWME_0_PIES_2X']='tableau-1.3/res/showme/disabled/Pies@2x.png';kd.$0['TQRC_SHOWME_0_DUALLINE_2X']='tableau-1.3/res/showme/disabled/DualAxis@2x.png';kd.$0['TQRC_SHOWME_0_BULLET_2X']='tableau-1.3/res/showme/disabled/Bullet@2x.png';kd.$0['TQRC_SHOWME_0_TREEMAP_2X']='tableau-1.3/res/showme/disabled/Treemap@2x.png';kd.$0['TQRC_SHOWME_0_BUBBLE_2X']='tableau-1.3/res/showme/disabled/Bubble@2x.png';kd.$0['TQRC_SHOWME_0_BOXPLOT_2X']='tableau-1.3/res/showme/disabled/Boxplot@2x.png';kd.$0['TQRC_TREE_MINUS']='tableau-1.3/res/others/TreeMinus.png';kd.$0['TQRC_TREE_MINUS_2X']='tableau-1.3/res/others/TreeMinus@2x.png';kd.$0['TQRC_TREE_PLUS']='tableau-1.3/res/others/TreePlus.png';kd.$0['TQRC_TREE_PLUS_2X']='tableau-1.3/res/others/TreePlus@2x.png';kd.$0['TQRC_ANALYTICSPANE_DROP_TABLE']='tableau-1.3/res/analyticspane/drop/table.png';kd.$0['TQRC_ANALYTICSPANE_DROP_PANE']='tableau-1.3/res/analyticspane/drop/pane.png';kd.$0['TQRC_ANALYTICSPANE_DROP_CELL']='tableau-1.3/res/analyticspane/drop/cell.png';kd.$0['TQRC_ANALYTICSPANE_DROP_LINEAR']='tableau-1.3/res/analyticspane/drop/trend-linear.png';kd.$0['TQRC_ANALYTICSPANE_DROP_POLY']='tableau-1.3/res/analyticspane/drop/trend-polynomial.png';kd.$0['TQRC_ANALYTICSPANE_DROP_POWER']='tableau-1.3/res/analyticspane/drop/trend-power.png';kd.$0['TQRC_ANALYTICSPANE_DROP_LOG']='tableau-1.3/res/analyticspane/drop/trend-logarithmic.png';kd.$0['TQRC_ANALYTICSPANE_DROP_EXP']='tableau-1.3/res/analyticspane/drop/trend-exponential.png';kd.$0['TQRC_ANALYTICSPANE_DROP_SUBTOTAL']='tableau-1.3/res/analyticspane/drop/sub-total.png';kd.$0['TQRC_ANALYTICSPANE_DROP_COLUMN']='tableau-1.3/res/analyticspane/drop/column-total.png';kd.$0['TQRC_ANALYTICSPANE_DROP_ROW']='tableau-1.3/res/analyticspane/drop/row-total.png';kd.$0['TQRC_ANALYTICSPANE_DROP_FORECAST']='tableau-1.3/res/analyticspane/drop/forecast.png';kd.$0['TQRC_ANALYTICSPANE_DROP_CLUSTER']='tableau-1.3/res/analyticspane/drop/cluster.png';kd.$0['TQRC_ANALYTICSPANE_DROP_OUTLIER']='tableau-1.3/res/analyticspane/drop/outliers.png';kd.$0['TQRC_ANALYTICSPANE_REFLINE']='tableau-1.3/res/analyticspane/refline.png';kd.$0['TQRC_ANALYTICSPANE_REFBAND']='tableau-1.3/res/analyticspane/refband.png';kd.$0['TQRC_ANALYTICSPANE_DISTBAND']='tableau-1.3/res/analyticspane/distband.png';kd.$0['TQRC_ANALYTICSPANE_BOXPLOT']='tableau-1.3/res/analyticspane/boxplot.png';kd.$0['TQRC_ANALYTICSPANE_TOTAL']='tableau-1.3/res/analyticspane/total.png';kd.$0['TQRC_ANALYTICSPANE_TRENDLINE']='tableau-1.3/res/analyticspane/trendline.png';kd.$0['TQRC_ANALYTICSPANE_95ANDMEDIAN']='tableau-1.3/res/analyticspane/95andmedian.png';kd.$0['TQRC_ANALYTICSPANE_FORECAST']='tableau-1.3/res/analyticspane/forecast.png';kd.$0['TQRC_ANALYTICSPANE_CLUSTER']='tableau-1.3/res/analyticspane/cluster.png';kd.$0['TQRC_ANALYTICSPANE_OUTLIER']='tableau-1.3/res/analyticspane/outliers.png'})();(function(){gp.$1=null;gp.$2=null;gp.$1={};gp.$2={};gp.$0(18,'Alt');gp.$0(8,'Backspace');gp.$0(20,'CapsLock');gp.$0(188,'Comma');gp.$0(91,'Command');gp.$0(91,'CommandLeft');gp.$0(91,'Windows');gp.$0(93,'CommandRight');gp.$0(93,'Menu');gp.$0(17,'Control');gp.$0(46,'DeleteKey');gp.$0(40,(BrowserSupport.BrowserSupport.IsMac()?tab.Strings.KeyboardShortcutTriggerKeyMacArrowDown:tab.Strings.KeyboardShortcutTriggerKeyArrowDown));gp.$0(35,'End');gp.$0(13,(BrowserSupport.BrowserSupport.IsMac()?tab.Strings.KeyboardShortcutTriggerKeyMacEnter:tab.Strings.KeyboardShortcutTriggerKeyEnter));gp.$0(187,'=');gp.$0(187,'+');gp.$0(27,'Escape');gp.$0(112,tab.Strings.KeyboardShortcutTriggerKeyF1);gp.$0(113,tab.Strings.KeyboardShortcutTriggerKeyF2);gp.$0(114,'F3');gp.$0(115,'F4');gp.$0(116,'F5');gp.$0(117,'F6');gp.$0(118,'F7');gp.$0(119,'F8');gp.$0(120,'F9');gp.$0(121,'F10');gp.$0(122,tab.Strings.KeyboardShortcutTriggerKeyF11);gp.$0(123,tab.Strings.KeyboardShortcutTriggerKeyF12);gp.$0(191,tab.Strings.KeyboardShortcutTriggerKeyForwardSlash);gp.$0(36,'Home');gp.$0(45,'Insert');gp.$0(37,(BrowserSupport.BrowserSupport.IsMac()?tab.Strings.KeyboardShortcutTriggerKeyMacArrowLeft:tab.Strings.KeyboardShortcutTriggerKeyArrowLeft));gp.$0(96,'NumpadZero');gp.$0(97,'NumpadOne');gp.$0(98,'NumpadTwo');gp.$0(99,'NumpadThree');gp.$0(100,'NumpadFour');gp.$0(101,'NumpadFive');gp.$0(102,'NumpadSix');gp.$0(103,'NumpadSeven');gp.$0(104,'NumpadEight');gp.$0(105,'NumpadNine');gp.$0(107,'NumpadAdd');gp.$0(110,'NumpadDecimal');gp.$0(111,'NumpadDivide');gp.$0(108,'NumpadEnter');gp.$0(106,'NumpadMultiply');gp.$0(109,'NumpadSubtract');gp.$0(34,'PageDown');gp.$0(33,'PageUp');gp.$0(190,'Period');gp.$0(39,(BrowserSupport.BrowserSupport.IsMac()?tab.Strings.KeyboardShortcutTriggerKeyMacArrowRight:tab.Strings.KeyboardShortcutTriggerKeyArrowRight));gp.$0(16,'Shift');gp.$0(32,'Space');gp.$0(9,'Tab');gp.$0(126,'Tilde');gp.$0(38,(BrowserSupport.BrowserSupport.IsMac()?tab.Strings.KeyboardShortcutTriggerKeyMacArrowUp:tab.Strings.KeyboardShortcutTriggerKeyArrowUp))})();(function(){go.unregisterdShortcutText='UnregisteredShortcut';go.$8='ShortcutName';go.$0='Combo';go.$2='CurrentTargetId';go.$1='CurrentTargetClasses';go.$3='CurrentTargetName';go.$6='IsKnownShortcut';go.$7='NumTimesExecuted';go.$9='WasBlockedByDialog';go.$a='WasBlockedByGlass';go.$b='WasBlockedByLoading';go.$c='WasBlockedByTextInput';go.$5='IsGlobalShortcut';go.$4='ElapsedTimeInMs'})();(function(){gn.$2='KeyboardShortcut';gn.$0=500;gn.$1={}})();(function(){gm.$f={};gm.$c={};gm.$d={};gm.$e={}})();(function(){kY.$0=new kY})();(function(){ce.$0='granted'})();(function(){cN.$9='get_customized_view';cN.$a='get_customized_views';cN.$c='set_default_customized_view';cN.$8='destroy_customized_view';cN.$b='save_customized_view';cN.$d='update_customized_view'})();(function(){hB.$0=null})();(function(){kY.get_instance().registerCommand({ns:'tabdoc',cmd:'dashboard-show-grid-web-wrapper'},da)})();(function(){var e=Y.get_instance();e.addModel(dh).call(e)})();(function(){di.everyTime=0;di.hourly=60;di.daily=1440;di.weekly=10080;di.onlyOnce=2147483647})();(function(){dB.$0=null})();(function(){hz.dialogApiContract=null;hz.hybridWidgetsContract=null;hz.menuApiContract=null;hz.dialogApiContract=gZ.registerRawJsModule('@tableau/dialog-api-contract','dialog-api-contract-web.min','dialog-api-contract-web').andLoadOnDemandIf(true).moduleBeingConfigured;hz.menuApiContract=gZ.registerRawJsModule('@tableau/menu-api-contract','menu-api-contract-web.min','menu-api-contract-web').andLoadOnDemandIf(true).moduleBeingConfigured;hz.hybridWidgetsContract=gZ.registerRawJsModule('@tableau/hybrid-widgets-contract','hybrid-widgets-web.min','hybrid-widgets-web').andLoadOnDemandIf(true).moduleBeingConfigured})();(function(){dG.buttonConfigDialogModuleName='@tableau/button-config-dialog';dG.buttonConfigDialogFileBaseName='button-config-dialog';dG.chooseExtensionDialogModuleName='@tableau/choose-extension-dialog';dG.extensionInfoDialogModuleName='@tableau/extension-info-dialog';dG.chooseExtensionFileBaseName='choose-extension-dialog';dG.extensionInfoFileBaseName='extension-info-dialog';dG.$2=null;dG.$3={};dG.$2=dG.$1();if(tab.FeatureFlags.isEnabled('BinHybridDialog')){dG.addHybridDialog('@tableau/numeric-bin-dialog','numeric-bin-dialog','doc:update-numeric-bin-edit-dialog-event',null)}if(tab.FeatureFlags.isEnabled('DataToTheWebTabbedAuthReconnect')){dG.addHybridDialog('@tableau/tabbed-auth-dialog','tabbed-auth-dialog','doc:tabbed-auth-dialog-event',null)}if(tab.FeatureFlags.isEnabled('EditAxisDialog')){dG.addHybridDialog('@tableau/edit-axis-dialog','edit-axis-dialog','doc:update-edit-axis-dialog-event',null)}if(tab.FeatureFlags.isEnabled('SortHybridDialogWeb')){dG.addHybridDialog('@tableau/sort-dialog','sort-dialog','doc:show-sort-dialog-event',null).addDependency(dG.$0('@tableau/widgets-datagrid','widgets-datagrid'))}if(tab.FeatureFlags.isEnabled('BasicButtonObject')){dG.addHybridDialog(dG.buttonConfigDialogModuleName,dG.buttonConfigDialogFileBaseName,'doc:update-button-config-dialog-event',null)}if(tab.FeatureFlags.isEnabled('DashboardMttwImageObject')){dG.addHybridDialog('@tableau/image-object-config-dialog','image-object-config-dialog','doc:update-image-object-config-dialog-event',null)}if(tab.FeatureFlags.isEnabled('Extensions')){dG.addHybridDialog(dG.chooseExtensionDialogModuleName,dG.chooseExtensionFileBaseName,'doc:choose-extension-dialog-event',null);dG.addHybridDialog(dG.extensionInfoDialogModuleName,dG.extensionInfoFileBaseName,'doc:extension-info-dialog-event',null)}if(tab.FeatureFlags.isEnabled('ExtensionPermissionsPrompt')){dG.addHybridDialog('@tableau/extensions-permissions-dialog','extensions-permissions-dialog','doc:permissions-dialog-event',null)}dG.addHybridDialog('@tableau/custom-sql-dialog','custom-sql-dialog','doc:launch-custom-sql-dialog-event',null);if(tsConfig.is_authoring){if(tab.FeatureFlags.isEnabled('RichTextEditingHybridDialogWeb')){dG.addHybridDialog('@tableau/rich-text-editor-hybrid-dialog','rich-text-editor-hybrid-dialog','doc:rich-text-editor-dialog-event',null)}}if(tab.FeatureFlags.isEnabled('ZoneFriendlyName')){dG.addHybridDialog('@tableau/zone-friendly-name-config-dialog','zone-friendly-name-config-dialog','doc:launch-zone-friendly-name-config-dialog-event',null)}var e={customZIndex:1000,contentClassName:'detailedErrorDialog'};dG.addHybridDialog('@tableau/detailed-error-dialog','detailed-error-dialog','doc:update-detailed-error-dialog-event',e);if(tab.FeatureFlags.isEnabled('DownloadAsVersionHiFi')){dG.addHybridDialog('@tableau/export-as-version-dialog','export-as-version-dialog','doc:launch-export-as-version-dialog-event',e)}})();(function(){hd.registerHandler('doc:permissions-update-event',em.$0)})();(function(){ey.$1=null;ey.$0='Authoring_DataTab_FileUpload_'})();(function(){gq.delimiter='+';gq.controlOrCommand='Ctrl_Command';gq.macControl='Mac_Ctrl';gq.winControl='Win_Ctrl'})();(function(){hm.currentPage=4294967295})();(function(){kY.get_instance().registerCommand({ns:'tabdoc',cmd:'perform-tabbed-authentication'},ht)})();(function(){hC.$0=null})();(function(){kY.get_instance().registerCommand({ns:'tabdoc',cmd:'raise-connections-succeeded-notification'},hR)})();(function(){kY.get_instance().registerCommand({ns:'tabdoc',cmd:'raise-dialog-closed-notification'},hU)})();(function(){iy.$0='rich-text-editor'})();(function(){iH.shapeMapping=null;iH.reverseShapeMapping=null;iH.$1=null;iH.$0=null;iH.lineInterpolationMapping=null;iH.$1={};iH.$1['enable-pan-x']=1;iH.$1['enable-pan-y']=2;iH.$1['enable-zoom-x']=4;iH.$1['enable-zoom-y']=8;iH.$1['enable-scale-x']=16;iH.$1['enable-scale-y']=32;iH.$1['clip-to-cell-x']=64;iH.$1['clip-to-cell-y']=128;iH.$1['clip-to-cell-for-selection']=256;iH.$1['x-axis-on-top']=512;iH.$1['y-axis-on-right']=1024;iH.$1['has-cells-x']=2048;iH.$1['has-cells-y']=4096;iH.$0={};iH.$0['end']=1;iH.$0['endprimitive']=2;iH.$0['closedprimitive']=4;iH.$0['marked']=8;iH.$0['markediflabel']=16;iH.$0['debug']=128;iH.$0['user']=65536;iH.shapeMapping=ss.mkdict(['0','shapeIDCircle','1','shapeIDSquare','2','shapeIDPlus','3','shapeIDTimes','4','shapeIDAsterisk','5','shapeIDDiamond','6','shapeIDTriangle','7','shapeIDDownTriangle','8','shapeIDLeftTriangle','9','shapeIDRightTriangle','4194304','shapeIDFilledCircle','4194305','shapeIDFilledSquare','4194306','shapeIDFilledPlus','4194307','shapeIDFilledTimes','4194308','shapeIDFilledStar','4194309','shapeIDFilledDiamond','4194310','shapeIDFilledTriangle','4194311','shapeIDFilledDownTriangle','4194312','shapeIDFilledLeftTriangle','4194313','shapeIDFilledRightTriangle','-4194304','shapeIDUnscaledFilledCircle']);iH.reverseShapeMapping={};var e=_.keys(iH.shapeMapping);for(var ex=0;ex<e.length;ex++){var lA=e[ex];iH.reverseShapeMapping[iH.shapeMapping[lA]]=lA}iH.lineInterpolationMapping=ss.mkdict(['0','lim-linear','1','lim-step','2','lim-jump'])})();(function(){iK.blackColor=null;var e=(new bQ(0,0,0,1)).toRgba();iK.blackColor={};iK.blackColor['colorOverrideNone']=e;iK.blackColor['colorOverrideFog']=e;iK.blackColor['colorOverrideOpaque']=e})();(function(){iN.$0();iN.$1()})();(function(){iO.maxDatasourceCaptionLength=254})();(function(){kl.$1=new RegExp('^https?://[^/]+(.*)$')})();(function(){var e=Y.get_instance();e.addModel(kp).call(e)})();(function(){ku.$g=['<span style="white-space:pre"><div class="uberSelection"style="text-align:center;"><span>&nbsp;&nbsp;</span>','<span style="font-weight:bold;">','','</span><span> ','','  </span><span>','·','  </span><span>','',' </span><span>','','</span><span>',': ','</span><span style="font-weight:bold;">','','</span><span>&nbsp;&nbsp;','</span></div></span>'];ku.$h=['<div class="uberSelection"style="text-align:center;"><span></span>','<span style="font-weight:bold;"> ','',' </span><span>','','</span><div> ']})()})();;
/*! BEGIN TableauRuntime */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'tabruntime');var b=function(){};b.__typeName='tab.$0';b.$0=function(e,N){var O=new Object;O.type=null;O.value=null;O.type=e;O.value=N;return O};b.isInstanceOfType=function(){return true};var c=function(e){this.$b=0;this.$9=0;this.$e=0;this.$a=new Array;this.$d=new Array;this.$7=new Array;this.$c=null;this.$8=null;this.$c=e;this.$a.push(true);this.$8={};this.$d.push(this.$8);this.$7.push([])};c.__typeName='tab.$1';var d=function(){};d.__typeName='tab.Base64HeapDecoder';d.$0=function(e){if(ss.isNullOrUndefined(d.$1)){d.$1=new Array(4);for(var N=0;N<d.$2.length;++N){d.$1[d.$2.charCodeAt(N)]=N}}if(e===61){return 0}else{return d.$1[e]}};d.decodedLength=function(e){var N=0;var O=e.length;var P=O;if(e.charCodeAt(O-2)===61){N=4;P-=2;if(e.charCodeAt(O-1)!==61){throw new ss.Exception('Received incorrectly formatted base64 string!')}}else if(e.charCodeAt(O-1)===61){P-=1;N=2}return ss.Int32.div(P*6-N,8)};d.run=function(e,N,O){var P=O.length;var Q=0,R=0,S=0,T=0;var U=0;var V=d.decodedLength(O);for(var W=0;W<P;W+=4){Q=d.$0(O.charCodeAt(W));R=d.$0(O.charCodeAt(W+1));S=d.$0(O.charCodeAt(W+2));T=d.$0(O.charCodeAt(W+3));N[e++]=Q<<2|R>>>4;U++;if(U<V){N[e++]=(R&15)<<4|S>>>2;U++}if(U<V){N[e++]=(S&3)<<6|T&63;U++}}};global.tab.Base64HeapDecoder=d;var f=function(e,N){y.call(this,e,N)};f.__typeName='tab.DatastoreHandle';global.tab.DatastoreHandle=f;var g=function(){};g.__typeName='tab.DataStoreKey';global.tab.DataStoreKey=g;var h=function(){};h.__typeName='tab.EmscriptenSupport';h.getExceptionInformation=function(e){var N=e.get_message().split(' ',1);if(N.length===1){var O=parseInt(N[0]);var P=RuntimeWebModule.HEAPU32[RuntimeWebModule.HEAPU32[O>>2]+8>>>2];if(P===0){return e}var Q=RuntimeWebModule.dynCall_ii(P,O);if(Q===0){return e}var R=Q;for(;R<RuntimeWebModule.HEAPU8.length;R++){if(RuntimeWebModule.HEAPU8[R]===0){break}}try{var S=J.decode(RuntimeWebModule.HEAPU8.subarray(Q,R));return new ss.Exception("Emscripten thrown exception: '"+S+"'",e)}catch(T){return e}}return e};global.tab.EmscriptenSupport=h;var i=function(){};i.__typeName='tab.EnumConversions';i.tableauFontStyleFromInt=function(e){if(ss.isNullOrUndefined(i.$8)){i.$8=['font-style-normal','font-style-italic']}return i.$8[e]};i.fontWeightFromInt=function(e){if(ss.isNullOrUndefined(i.$1)){i.$1=['font-weight-normal','font-weight-bold']}return i.$1[e]};i.textOrientFromInt=function(e){if(ss.isNullOrUndefined(i.$9)){i.$9=['text-orient-auto','text-orient-horizontal','text-orient-vertical-up','text-orient-vertical-down']}return i.$9[e]};i.datePeriodTypeFromInt=function(e){if(ss.isNullOrUndefined(i.$0)){i.$0=['year','quarter','month','week','day','hour','minute','second']}return i.$0[e]};i.labelHAlignmentFromInt=function(e){if(ss.isNullOrUndefined(i.$2)){i.$2=['h-align-left','h-align-center','h-align-right','h-align-auto']}return i.$2[e]};i.labelVAlignmentFromInt=function(e){if(ss.isNullOrUndefined(i.$3)){i.$3=['v-align-bottom','v-align-center','v-align-top','v-align-auto']}return i.$3[e]};i.linePatternFromInt=function(e){if(ss.isNullOrUndefined(i.$6)){i.$6=['none','solid','dashed','dotted']}return i.$6[e]};i.lineCapFromInt=function(e){if(ss.isNullOrUndefined(i.$4)){i.$4=['flat','square','round','triangle']}return i.$4[e]};i.lineJoinFromInt=function(e){if(ss.isNullOrUndefined(i.$5)){i.$5=['bevel','miter','round']}return i.$5[e]};i.visualPartFromInt=function(e){if(ss.isNullOrUndefined(i.$a)){i.$a=['misc','annotations','axis-rules','top-axis','bottom-axis','left-axis','right-axis','background','borders','caption','cell-borders','decoration','drop-lines','x-labels','y-labels','legends','marks','mark-labels','mark-trails','ref-bands','ref-lines','pane-borders','scroll-bars','title','trend-lines','upper-map-layers']}return i.$a[e]};i.primitiveFromInt=function(e){if(ss.isNullOrUndefined(i.$7)){i.$7=['shape','line','bar','polar-bar','text','label','pie','area','polygon','multipolygon','square','heatmap','count']}return i.$7[e]};i.vizTypeFromInt=function(e){if(ss.isNullOrUndefined(i.$b)){i.$b=['standard','oo-stacked','gantt-stacked','treemap','bubble','wordle','highlight','count']}return i.$b[e]};global.tab.EnumConversions=i;var j=function(){};j.__typeName='tab.FallbackTextDecoder';j.decode=function(e){var N,O,P,Q,R,S;var T=0;var U='';var V=e.length;while(T<V){N=e[T++];if(N===0){return U}if((N&128)===0){U+=String.fromCharCode(N);continue}O=e[T++]&63;if((N&224)===192){U+=String.fromCharCode((N&31)<<6|O);continue}P=e[T++]&63;if((N&240)===224){N=(N&15)<<12|O<<6|P}else{Q=e[T++]&63;if((N&248)===240){N=(N&7)<<18|O<<12|P<<6|Q}else{R=e[T++]&63;if((N&252)===248){N=(N&3)<<24|O<<18|P<<12|Q<<6|R}else{S=e[T++]&63;N=(N&1)<<30|O<<24|P<<18|Q<<12|R<<6|S}}}if(N<65536){U+=String.fromCharCode(N)}else{var W=N-65536;U+=String.fromCharCode(55296|W>>10,56320|W&1023)}}return U};global.tab.FallbackTextDecoder=j;var k=function(){};k.__typeName='tab.FallbackTextEncoder';k.$0=function(e){var N=0;for(var O=0;O<e.length;O++){var P=e.charCodeAt(O);if(P>=55296&&P<=57343){P=65536+((P&1023)<<10)|e.charCodeAt(++O)&1023}if(P<=127){++N}else if(P<=2047){N+=2}else if(P<=65535){N+=3}else if(P<=2097151){N+=4}else if(P<=67108863){N+=5}else{N+=6}}return N};k.encode=function(e){var N=k.$0(e);var O=new Uint8Array(N);var P=0;for(var Q=0;Q<e.length;Q++){var R=e.charCodeAt(Q);if(R>=55296&&R<=57343){R=65536+((R&1023)<<10)|e.charCodeAt(++Q)&1023}if(R<=127){O[P++]=R}else if(R<=2047){O[P++]=192|R>>6;O[P++]=128|R&63}else if(R<=65535){O[P++]=224|R>>12;O[P++]=128|R>>6&63;O[P++]=128|R&63}else if(R<=2097151){O[P++]=240|R>>18;O[P++]=128|R>>12&63;O[P++]=128|R>>6&63;O[P++]=128|R&63}else if(R<=67108863){O[P++]=248|R>>24;O[P++]=128|R>>18&63;O[P++]=128|R>>12&63;O[P++]=128|R>>6&63;O[P++]=128|R&63}else{O[P++]=252|R>>30;O[P++]=128|R>>24&63;O[P++]=128|R>>18&63;O[P++]=128|R>>12&63;O[P++]=128|R>>6&63;O[P++]=128|R&63}}return O};global.tab.FallbackTextEncoder=k;var l=function(){};l.__typeName='tab.HexEncoder';l.$0=function(){if(!l.$2){l.$2=true;l.$1=new Array(256);for(var e=0;e<16;e++){l.$1[e]='0'+e.toString(16)}for(var N=16;N<256;N++){l.$1[N]=N.toString(16)}}};l.encodeBufferToHex=function(e){l.$0();var N=new Array(e.byteLength*2);for(var O=0;O<e.byteLength;O++){N[O]=l.$1[e[O]]}return N.join('')};global.tab.HexEncoder=l;var m=function(){};m.__typeName='tab.HexHeapDecoder';m.decodedLength=function(e){return ss.Int32.div(e.length,2)};m.run=function(e,N,O){var P=0;while(P<O.length){N[e++]=m.$0[O.charCodeAt(P++)]*16|m.$0[O.charCodeAt(P++)]}};global.tab.HexHeapDecoder=m;var n=function(){};n.__typeName='tab.HuttUtils';n.getMappedArray=function(e,N,O,P){switch(e){case 32:{return new Uint8Array(N,O,P)}case 33:{return new Uint16Array(N,O,P)}case 34:{return new Uint32Array(N,O,P)}case 40:{return new Int8Array(N,O,P)}case 41:{return new Int16Array(N,O,P)}case 42:{return new Int32Array(N,O,P)}case 50:{return new Float32Array(N,O,P)}case 51:{return new Float64Array(N,O,P)}}throw new ss.Exception('Unsupported array type: '+e)};n.getMappedArrayJabba=function(e,N,O,P){var Q=n.$0(e);var R=ss.Int32.div(P,n.$0(e));switch(e){case 32:{return new Uint8Array(N,O,R)}case 33:{return new Uint16Array(N,O,R)}case 34:{return new Uint32Array(N,O,R)}case 40:{return new Int8Array(N,O,R)}case 41:{return new Int16Array(N,O,R)}case 42:{return new Int32Array(N,O,R)}case 50:{return new Float32Array(N,O,R)}case 51:{return new Float64Array(N,O,R)}}throw new ss.Exception('Unsupported array type: '+e)};n.$0=function(e){var N=e;return 1<<(N&7)};global.tab.HuttUtils=n;var o=function(){};o.__typeName='tab.IRuntimeWebModule';global.tab.IRuntimeWebModule=o;var p=function(){};p.__typeName='tab.IRWALSupport';global.tab.IRWALSupport=p;var q=function(e,N){this.typeId=0;this.encoding=0;this.dataOffset=0;this.dataSize=0;this.typeId=e[N+0];this.encoding=e[N+1];this.dataOffset=e[N+2];this.dataSize=e[N+3]};q.__typeName='tab.JabbaManifest';global.tab.JabbaManifest=q;var r=function(e){this.$8=null;this.$b=null;this.$c=0;this.$9=0;this.$a=0;this.$d=[];this.unpacked=[];this.$b=e;this.$7()};r.__typeName='tab.JabbaUnpacker';global.tab.JabbaUnpacker=r;var s=function(e){this.data=null;this.stringTable={};this.marshalled={};this.heap=null;this.jabba=null;this.heap=e;this.jabba=new r(e);this.data=new w(this.jabba);this.$0()};s.__typeName='tab.JsHeapMarshaller';s.$2=function(e,N){this.data=null;this.stringTable={};this.marshalled={};this.heap=null;this.jabba=null;this.heap=e;this.jabba=null;var O=new Int32Array(this.heap,N,10);this.data=new w.$ctor1(O,this.heap);this.$0()};s.unmarshall$1=function(e,N){var O=new s.$2(e,N);var P=new c(O);return P.$0()};s.unmarshall=function(e){var N=new s(e);var O=new c(N);return O.$0()};s.unmarshallHex=function(e){if(!ss.keyExists(s.$1,e)){s.$1[e]=s.unmarshall(s.$0(e))}if(c.$0){return s.$1[e]}else{var N={};_.extend(N,s.$1[e]);return N}};s.unmarshallBase64=function(e){var N=d.decodedLength(e);var O=new Uint8Array(N);d.run(0,O,e);return s.unmarshall(O.buffer)};s.$0=function(e){var N=new Uint8Array(m.decodedLength(e));m.run(0,N,e);return N.buffer};global.tab.JsHeapMarshaller=s;var t=function(e){this.$6=0;this.$5=null;this.$6=0;this.$5=e};t.__typeName='tab.LinearFloatGeometryDecoder';global.tab.LinearFloatGeometryDecoder=t;var u=function(){};u.__typeName='tab.LocalEmscripten';global.tab.LocalEmscripten=u;var v=function(){};v.__typeName='tab.LocalEmscriptenSupport';global.tab.LocalEmscriptenSupport=v;var w=function(e){this.stringBuffer=null;this.stringLengths=null;this.opCodes=null;this.intBuffer=null;this.doubleBuffer=null;var N=e.unpacked.length-5;this.stringBuffer=e.unpacked[N];this.stringLengths=e.unpacked[N+1];this.opCodes=e.unpacked[N+2];this.intBuffer=e.unpacked[N+3];this.doubleBuffer=e.unpacked[N+4]};w.__typeName='tab.MarshalledVectors';w.$ctor1=function(e,N){this.stringBuffer=null;this.stringLengths=null;this.opCodes=null;this.intBuffer=null;this.doubleBuffer=null;this.stringBuffer=new Uint8Array(N,e[0],e[1]);this.stringLengths=new Uint32Array(N,e[2],e[3]);this.opCodes=new Uint8Array(N,e[4],e[5]);this.intBuffer=new Int32Array(N,e[6],e[7]);this.doubleBuffer=new Float64Array(N,e[8],e[9])};global.tab.MarshalledVectors=w;var x=function(e,N){y.call(this,e,N)};x.__typeName='tab.MarshallerHandle';global.tab.MarshallerHandle=x;var y=function(e,N){this.handleValue=0;this.$0=null;this.$1=false;this.handleValue=e;this.$0=N};y.__typeName='tab.OpaqueHandle';global.tab.OpaqueHandle=y;var z=function(e,N){this.$0=null;if(!ss.isNullOrUndefined(e.StartIndex)){var O=e.StartIndex.length;var P=e.PaneCol;var Q=e.PanePage;var R=e.PaneRow;var S=N.ColumnCount;var T=N.RowCount;var U=e.StartIndex;var V=e.EndIndex;this.$0=new Array(S*T);for(var W=0;W<this.$0.length;++W){this.$0[W]=new Array(2*N.PageCount);for(var X=0;X<this.$0[W].length;++X){this.$0[W][X]=0}}for(var Y=0;Y<O;++Y){var Z=P[Y]+R[Y]*S;var ba=Q[Y];this.$0[Z][ba*2]=U[Y];this.$0[Z][ba*2+1]=V[Y]}}};z.__typeName='tab.PaneDataStoreTable';global.tab.PaneDataStoreTable=z;var A=function(e,N){this.$5=0;this.$0=0;this.$3=0;this.$1=null;this.$4=null;this.$2=null;this.$5=e;this.$0=N};A.__typeName='tab.PaneMarksInfo';A.$ctor1=function(e,N,O,P,Q,R){this.$5=0;this.$0=0;this.$3=0;this.$1=null;this.$4=null;this.$2=null;this.$5=N.getStartIndex(O,P);this.$0=N.getEndIndex(O,P);this.$1=N.getPageIndices(O);this.$4=e.PaneKey[O];this.$2={};this.$2['columnIndex'.toString()]=R;this.$2['rowIndex'.toString()]=Q;this.$3=O};global.tab.PaneMarksInfo=A;var B=function(){};B.__typeName='tab.PaneStylesTableUtils';B.toRuePacker=function(e,N){var O=0;if(ss.isValue(N.DefaultMarkColor)){O++}if(ss.isValue(N.DefaultShape)){O++}if(ss.isValue(N.DefaultSize)){O++}if(ss.isValue(N.Key)){O++}var P=new C;P.startTable(e,O);if(ss.isValue(N.DefaultMarkColor)){P.addColorArray('DefaultMarkColor',N.DefaultMarkColor)}if(ss.isValue(N.DefaultShape)){P.addInt32Array('DefaultShape',N.DefaultShape)}if(ss.isValue(N.DefaultSize)){P.addReal64Array('DefaultSize',N.DefaultSize)}if(ss.isValue(N.Key)){P.addInt64Array('Key',N.Key[0])}return P};global.tab.PaneStylesTableUtils=B;var C=function(){this.$8=null;this.$a=null;this.$7=4;this.$9=0;this.$8=new Uint8Array(1024);this.$a=new DataView(this.$8.buffer)};C.__typeName='tab.RuePacker';global.tab.RuePacker=C;var D=function(e){this.$7='';this.$6=null;this.$a=null;this.$9=null;this.$3=null;this.$4=[];this.$5=[];this.$b=[];this.$8={};this.$7=e;this.$2();this.$0();this.$1()};D.__typeName='tab.RuntimeData';D.$0=function(e){if(tab.MiscUtil.isNullOrEmpty$2(e)){return[]}var N=[];for(var O=0;O<e.length;O++){var P=e[O];N.push(F.visualListFromDrawPane(P))}return Array.prototype.slice.call(N)};global.tab.RuntimeData=D;var E=function(e,N,O){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.set_VM(e);this.set_initialStore(N);this.set_finalStore(O)};E.__typeName='tab.RuntimeHandles';global.tab.RuntimeHandles=E;var F=function(){};F.__typeName='tab.RuntimeUtil';F.canUseRuntime=function(){return F.isRuntimeSupported()&&!F.$1};F.isRuntimeSupported=function(){if((window.navigator.userAgent.indexOf('Safari')!==-1||window.navigator.userAgent.indexOf('TableauMobile')!==-1)&&window.navigator.userAgent.indexOf('OS 11_2_')!==-1){return false}return!ss.isNullOrUndefined(window.self['WebAssembly'])};F.emscriptenAborted=function(){F.$1=true};F.createRuntimeData=function(e){var N=new D(e);return N};F.visualListFromDrawPane=function(e){var N=e;return JSON.parse(J.decode(N[1]))};F.renderNodeFromPredictionMark=function(e){var N={};var O=-695169174;var P=-696033834;switch(e.Type){case-695169174:{{var Q={};Q.qrgbColor=e.color;Q.lineTupleIds=e.LineTupleIds;F.$0(e,Q);N=Q;N.type='prediction-band'}break}case-696033834:{{var R={};R.qrgbColors=e.Colors;R.qrgbColor=e.halo_color;R.renderOnTop=e.RenderOnTop;R.maxAlpha=e.MaxAlpha;F.$0(e,R);N=R;N.type='prediction-whisker'}break}default:{{}break}}return N};F.$0=function(e,N){N.useYAxis=e.UseYAxis;N.upperEnd=e.UpperEnds;N.lowerEnd=e.LowerEnds;N.oppositeAxis=e.OppositeAxes;N.widths=e.Widths;N.tupleIds=e.TupleIds};global.tab.RuntimeUtil=F;var G=function(e){this.$2=null;this.$2='http://'+e;this.$1()};G.__typeName='tab.RuntimeWebHost';global.tab.RuntimeWebHost=G;var H=function(){};H.__typeName='tab.RuntimeWebHostSupport';global.tab.RuntimeWebHostSupport=H;var I=function(){};I.__typeName='tab.RuntimeWebModule';global.tab.RuntimeWebModule=I;var J=function(){};J.__typeName='tab.Utf8TextDecoder';J.decode=function(e){if(J.$1||!ss.isInstanceOfType(e,Uint8Array)){return j.decode(e)}else{return J.$0.decode(e)}};J.decodeNullTerminated=function(e){var N;for(N=0;N<e.byteLength;N++){if(e[N]===0){break}}return J.decode(e.subarray(0,N))};global.tab.Utf8TextDecoder=J;var K=function(){};K.__typeName='tab.Utf8TextEncoder';K.encode=function(e){if(K.$1){return k.encode(e)}else{return K.$0.encode(e)}};global.tab.Utf8TextEncoder=K;var L=function(){};L.__typeName='tab.VisualKeys';global.tab.VisualKeys=L;var M=function(e,N){y.call(this,e,N)};M.__typeName='tab.VMHandle';global.tab.VMHandle=M;ss.initClass(b,a,{},Object);ss.initClass(c,a,{$0:function(){var e=this.$c.data.opCodes.length;this.$e=0;while(this.$e<e){var N=this.$c.data.opCodes[this.$e];if(3===N){this.$3()}else{this.$1(N)}++this.$e}if(c.$0){var O=new tab.ReadOnlyProxy;this.$8=O.instrument(this.$8)}return this.$8},$2:function(e){var N=null;if(e===5){N=this.$c.data.intBuffer[this.$b++]}else if(e===4){N=this.$c.data.doubleBuffer[this.$9++]}else if(e===6){N=true}else if(e===7){N=false}var O=[];var P=this.$c.data.intBuffer[this.$b++];for(var Q=0;Q<P;++Q){O[Q]=N}return O},$3:function(){if(ss.arrayPeekBack(this.$a)){this.$d.pop()}else{this.$7.pop()}this.$a.pop()},$1:function(e){var N=null;var O='';var P=ss.arrayPeekBack(this.$a);var Q=ss.arrayPeekBack(this.$d);var R=ss.arrayPeekBack(this.$7);if(P){var S=this.$c.data.intBuffer[this.$b++];if(S<0){O=-S}else{O=this.$c.stringTable[S]}}if(65===e){++this.$e;var T=this.$c.data.opCodes[this.$e];N=this.$2(T)}else if(64===e){N=this.$5()}else if(e>=32&&e<64){N=this.$6(e)}else{N=this.$4(e)}if(P){Q[O]=N}else{R.push(N)}},$5:function(){var e=this.$c.data.intBuffer[this.$b++];var N=this.$c.data.intBuffer[this.$b++];var O=[];var P;if(ss.isValue(this.$c.jabba)){P=this.$c.jabba.unpacked[e]}else{P=new Uint32Array(this.$c.heap,e,N)}var Q=this.$c.stringTable;for(var R=0;R<P.length;R++){var S=P[R];O.push(Q[S])}return O},$6:function(e){var N=this.$c.data.intBuffer[this.$b++];var O=this.$c.data.intBuffer[this.$b++];if(ss.isValue(this.$c.jabba)){return this.$c.jabba.unpacked[N]}else{return n.getMappedArray(e,this.$c.heap,N,O)}},$4:function(e){switch(e){case 1:{this.$a.push(true);this.$d.push({});return ss.arrayPeekBack(this.$d)}case 2:{this.$a.push(false);this.$7.push([]);return ss.arrayPeekBack(this.$7)}case 4:{return this.$c.data.doubleBuffer[this.$9++]}case 5:{return this.$c.data.intBuffer[this.$b++]}case 6:{return true}case 7:{return false}case 8:{return this.$c.stringTable[this.$c.data.intBuffer[this.$b++]]}case 9:{return null}}throw new ss.Exception('Invalid OpCode: '+e.toString())}});ss.initClass(d,a,{});ss.initClass(y,a,{get_typeCode:null,dispose:function(){if(!this.$1){this.$0(this.handleValue);this.$1=true}}},null,[ss.IDisposable]);ss.initClass(f,a,{get_typeCode:function(){return 16}},y,[ss.IDisposable]);ss.initEnum(g,a,{x:1,x1:2,y:3,y1:4,tupleId:5,markId:6,min:7,max:8,paneId:9,uniqueID:10,fieldName:11,isXAxis:12,bandColor:13,bandLevel:14,bandSize:15,fillColor:16,hoverColor:17,brushedColor:18,selectedFillColor:19,selectedTextColor:20,selectedTickColor:21,subtotalFillColor:22,totalFillColor:23,textColor:24,tickColor:25,dataType:26,rangeType:27,scaleType:28,foldState:29,isReversed:30,includeZero:31,axisTitle:32,axisSubtitle:33,titlePadding:34,titleStyleIndex:35,omitSpecials:36,fieldId:37,xAxisModelData:38,yAxisModelData:39,xAxisRangeData:40,yAxisRangeData:41,style:42,titleStyle:43,xAxisTable:44,yAxisTable:45,isValid:46,displayScale:47,actualZoomLevel:48,coverage:49,minResult:50,maxResult:51,zeroResult:52,minRangeResult:53,maxRangeResult:54,pixelSize:55,barLabelsOverflow:56,cellCount:57,axisSizes:58,ranges:59,uniqueRanges:60,rangeMap:61,pointExtendedRanges:62,beforeMarkExtendRanges:63,afterMarkExtendRanges:64,relevantRanges:65,refLineExtents:66,showEntireImagePaneIndex:67,showEntireImageMax:68,showEntireImageMin:69,paneCol:70,key:71,paneRow:72,pxLeft:73,pxTop:74,pxRight:75,pxBottom:76,domainLeft:77,domainTop:78,domainRight:79,domainBottom:80,mapDomainLeft:81,mapDomainTop:82,mapDomainRight:83,mapDomainBottom:84,mapCenterLongitude:85,mapCenterLatitude:86,originX:87,originY:88,xRangeMin:89,xRangeMax:90,yRangeMin:91,yRangeMax:92,panePage:93,startIndex:94,endIndex:95,paneKey:96,isMap:97,hasPosition:98,lockedRatioOfScales:99,defaultMinX:100,defaultMaxX:101,defaultMinY:102,defaultMaxY:103,defaultXSize:104,defaultYSize:105,singleItemMapDelta:106,pixelsPerCRSUnitAtZoomLevel1:107,maxScaleLevel:108,tileSize:109,intermediateLevels:110,isTileSizeAdjustable:111,minShrink:112,maxStretch:113,boundingBoxTops:114,boundingBoxBottoms:115,boundingBoxLefts:116,boundingBoxRights:117,latitudesForNullGeometries:118,longitudesForNullGeometries:119,latitudes:120,longitudes:121,haveAnyMarks:122,paneExtentsStaticInput:123,paneExtentsPixelPositions:124,paneExtents:125,paneCount:126,pageIntervalTable:127,noMarksColumnTemplate:128,noPanesColumnTemplate:129,paneRowCol:130,mappedRows:131,mappedCols:132,rangePaddingMin:133,mapBoundaries:134,showEntireImageHasImages:135,lockedRatio:136,vectorMapProvider:137,rasterMapProvider:138,mapLayersModelUpdate:139,expressionID:140,coefficient:141,variableID:142,constant:143,expression1:144,expression2:145,comparisonKind:146,priority:147,name$1:148,expressions:149,constants:150,constraints:151,variableNames:152,value:153,headerCount:154,lineColor:155,lineStyle:156,lineWidth:157,zeroLineColor:158,zeroLineStyle:159,zeroLineWidth:160,isQuantitativeTickType:161,zeroPoint:162,encoding:163,kernelRadius:164,palette:165,steps:166,minValue:167,maxValue:168,underlyingMarkSize:169,underlyingMarkColor:170,intensity:171,markWeights:172,size:173,minRequiredDensity:174,dataTable:175,flattenedColorEncodings:176,flattenedShapeEncodings:177,flattenedSizeEncodings:178,cellXProvided:179,cellYProvided:180,cellX:181,cellY:182,xProj:183,yProj:184,currentStackValue:185,previousStackValue:186,primitiveId:187,scaledStartPoint:188,scaledEndPoint:189,prevLowerValue:190,nextLowerValue:191,domainMax:192,domainMin:193,lookup:194,paneIndex:195,cellIndex:196,supportedClientUpdates:197,supportedDesktopUpdates:198,height:199,markFlags:200,textRunCount:201,textRunOffset:202,userPaneCol:203,userPaneRow:204,width:205,textEncodingTable:206,textRunTable:207,textStyleTable:208,xCellOffsets:209,xPixelOffsets:210,yCellOffsets:211,yPixelOffsets:212,axisProducerData:213,encodingData:214,extendedDomain:215,gridLineProducerData:216,markLayoutTempKeys:217,tickProducerData:218,pdMarksData:219,partitionModel:220,importData:221,refLinesData:222,refLinesTotalTableMapData:223,selectionData:224,incrementalUpdateData:225,viewParametersData:226,paneStylesData:227,heatmapData:228,colorEncodingKeys:229,shapeEncodingKeys:230,sizeEncodingKeys:231,measureNamesKeys:232,isDiverging:233,fixedMin:234,fixedMax:235,fixedCenter:236,divergingPalette:237,reversedPalette:238,defaultPalette:239,unscaledSize:240,hasPerMarkEncoding:241,defaultMarkColor:242,defaultShape:243,defaultSize:244,xFloat:245,yFloat:246,clipHeight:247,clipWidth:248,color:249,geometry:250,isMarkStacked:251,rho:252,rho1:253,shapeId:254,theta:255,theta1:256,trailId:257,weight:258,xNext:259,xPrev:260,yNext:261,yPrev:262,alpha:263,backgroundColor:264,borderColor:265,cellHeight:266,cellWidth:267,drawBorder:268,dropLineFlags:269,haloColor:270,hasFoldedAxis:271,hasHalos:272,handleSpecialsX:273,handleSpecialsY:274,hasEmptyOrEqualAxis:275,highlightedHaloColor:276,scaleTypeX:277,scaleTypeY:278,labelOnePerGroup:279,labelTargetPrimitiveId:280,lineInterpolation:281,markLabelPadding:282,markTrailAutoColor:283,markTrailColor:284,markTrailCount:285,markTrailEndEffect:286,markTrailStartEffect:287,markTrailTransparency:288,minBarHeight:289,minBarWidth:290,pageTrailMarksToTrail:291,paneFlags:292,paneHasBackground:293,primitiveType:294,selectedHaloColor:295,selectedMultiPrimHaloColor:296,showRunningOrderLabels:297,trailOverrides:298,vizType:299,wrapDomain:300,parameters:301,geometryTable:302,textCompositionInputKeys:303,textTableHelper:304,wordleRandomKeys:305,xDomains:306,xHiddenMarks:307,yDomains:308,yHiddenMarks:309,domain:310,ellipses:311,encodings:312,hasPerMarkColorEncoding:313,hasPerMarkSizeEncoding:314,markLayoutData:315,textTable:316,treemapKeys:317,showLabels:318,labelMode:319,cellSizeDefault:320,cellSizeDefaultConst:321,colorBeforeAlpha:322,markStackIndex:323,markFlagsX:324,markFlagsY:325,predictionIntervalLowerEnd:326,predictionIntervalUpperEnd:327,predictionWhiskerWidth:328,sizeGantt:329,sizeLabel:330,sizeOutputs:331,xRawInput:332,yRawInput:333,lookupColor:334,xPriorToWrap:335,packedLayout:336,hierarchyDepth:337,hierarchyTables:338,orderedPaneKeys:339,paneDescriptorsData:340,panes:341,xAxis:342,yAxis:343,spatialProjector:344,rowCount:345,columnCount:346,pageCount:347,xIndexedAxis:348,yIndexedAxis:349,sourceData:350,paneIterators:351,stackedMarkAttributes:352,trailDescriptor:353,schema:354,data:355,partitionerOutputData:356,hasCurrStackValue:357,hasPrevStackValue:358,hasPrevLowerValue:359,hasNextLowerValue:360,id:361,parentId:362,headerId:363,isLeaf:364,nodeId:365,duplicateFieldIndex:366,nodes:367,headers:368,perHeaderFields:369,uName:370,vName:371,index:372,referenceLineSpecId:373,linePattern:374,lineCap:375,lineJoin:376,labelBackgroundColor:377,axisKeyPath:378,referenceLineType:379,formulaType:380,labelType:381,enableInstantRefline:382,calculationScope:383,confidencePercentage:384,constantValue:385,formattedConstantValue:386,tileCount:387,standardDevType:388,fillBelow:389,fillAbove:390,defaultLabelX:391,defaultLabelY:392,zOrder:393,referenceLineStyleId:394,xDomainLookup:395,yDomainLookup:396,pageNumber:397,axisOrientation:398,labelText:399,referenceLineDetails:400,referenceLineTotalTableMap:401,xValueFormat:402,yValueFormat:403,xHeaderFolded:404,yHeaderFolded:405,xStyles:406,yStyles:407,hAligns:408,vAligns:409,pxAbove:410,pxBelow:411,axisStyles:412,textStyles:413,fillColors:414,layoutElements:415,xValues:416,yValues:417,labels:418,textRun:419,textStyle:420,labelIndex:421,perTable:422,perPane:423,perCell:424,colors:425,defaultParamID:426,lineTupleIds:427,lowerEnds:428,maxAlpha:429,oppositeAxes:430,renderOnTop:431,tupleIds:432,type:433,upperEnds:434,useYAxis:435,widths:436,fieldType:437,rangeMin:438,rangeMax:439,column:440,drawPanes:441,rect:442,predictionMarks:443,row:444,xNumberMap:445,yNumberMap:446,pdMarks:447,userPaneInfo:448,mapCode:449,mapLayersModel:450,mapProvider:451,mappedImageModel:452,mapSceneModel:453,modelNumber:454,sourceName:455,styleName:456,waitForImages:457,waitTileFill:458,wrapCount:459,drawFirsts:460,drawLasts:461,inheritedSceneBackgroundColor:462,isSceneBackgroundOpaque:463,labelStore:464,mapPackage:465,perPaneExtents:466,activePages:467,axisOutput:468,gridLines:469,heatmap:470,paneStyles:471,firstPassRefLines:472,refLines:473,instantRefLines:474,supportedIncrementalUpdates:475,tickPlacement:476,viewpoint:477,annexedData:478,minPageNumber:479,maxPageNumber:480,currentPage:481,layoutSize:482,tupleSelection:483,tupleBrushedSelection:484,hasFontSizeOverride:485,textRunString:486,textRunX:487,textRunXRemote:488,textRunY:489,textRunYRemote:490,textStyleId:491,font:492,fontSize:493,fontStyle:494,fontWeight:495,hAlign:496,strikethrough:497,textAlignment:498,textDecoration:499,textOrientation:500,textStyleColor:501,textWrapMode:502,underline:503,vAlign:504,leftMargin:505,rightMargin:506,styleTable:507,runOffset:508,runCount:509,runTable:510,isTextTable:511,hPad:512,vPad:513,textScaleFactor:514,textRangeFactor:515,textFontMin:516,textFitStyle:517,textRunPosition:518,formattedText:519,headerIndex:520,vtlBlockIndex:521,columnFormatIndex:522,minSpacing:523,originReference:524,perpendicularLabels:525,spacingReference:526,targetTickSpacing:527,labelFontIndex:528,labelHeight:529,showMinorTicks:530,minorOriginReference:531,minorSpacingReference:532,dateTimeOriginReference:533,dateTimeSpacingReference:534,dateTimeSpacingUnitsReference:535,daysLabelWidth:536,hoursLabelWidth:537,hoursTrunctaedLabelWidth:538,fiscalYearStart:539,monthsLabelWidth:540,minutesLabelWidth:541,minutesTruncatedLabelWidth:542,quartersLabelWidth:543,secondsLabelWidth:544,weeksLabelWidth:545,yearsLabelWidth:546,logBaseReference:547,formatters:548,formatterIndex:549,daysPossibleFreqs:550,hoursPossibleFreqs:551,monthsPossibleFreqs:552,minutesPossibleFreqs:553,quartersPossibleFreqs:554,secondsPossibleFreqs:555,weeksPossibleFreqs:556,yearsPossibleFreqs:557,qPerHeaderData:558,dateTimePerHeaderData:559,logPerHeaderData:560,noneTickPerHeaderData:561,arrayConstants:562,columnFormat:563,labelFont:564,numericFormatDivisor:565,numericFormatSuffix:566,encodedTickPositionsIndex:567,spacing:568,origin:569,includeViewEdges:570,dateTimeSpacing:571,dateTimeSpacingUnit:572,dateTimeOrigin:573,encodingMin:574,encodingMax:575,perHeaderMajorTickPlacement:576,perHeaderMinorTickPlacement:577,encodedTickPositions:578,count:579});ss.initClass(h,a,{});ss.initClass(i,a,{});ss.initClass(j,a,{});ss.initClass(k,a,{});ss.initClass(l,a,{});ss.initClass(m,a,{});ss.initClass(n,a,{});ss.initInterface(o,a,{executeVM:null,buildVMHex:null,loadBinaryDatastoreHex:null,initializeRuntime:null,marshallDatastore:null,marshallDatastoreSubKeyHex:null,loadAndApplyDataStoreUpdaterHex:null,localPanCommand:null,localZoomCommand:null,localZoomFactorCommand:null,rueUpdateCommandHex:null});ss.initInterface(p,a,{paramToString:null,stringToHeap:null,paramToByteBuffer:null,byteBufferToHeap:null});ss.initClass(q,a,{});ss.initClass(r,a,{$5:function(e){var N=0;for(var O=0;O<e.length;O+=2){N+=ss.Int32.trunc(e[O])}var P=new Float32Array(N);var Q=0;for(var R=0;R<e.length;R+=2){var S=ss.Int32.trunc(e[R]);var T=e[R+1];for(var U=0;U<S;U++){P[Q++]=T}}return P},$6:function(e){var N=0;for(var O=0;O<e.length;O+=2){N+=ss.Int32.trunc(e[O])}var P=new Float64Array(N);var Q=0;for(var R=0;R<e.length;R+=2){var S=ss.Int32.trunc(e[R]);var T=e[R+1];for(var U=0;U<S;U++){P[Q++]=T}}return P},$7:function(){this.$3();this.$4();this.$8=new Uint8Array(this.$a);var e=0;var N=0;for(var O=0;O<this.$d.length;O++){var P=this.$d[O];N=e;var Q=this.$2(P,e);e+=Q;e+=this.$0(e,8);if(P.encoding===3){if(P.typeId===51){var R=n.getMappedArrayJabba(51,this.$8.buffer,N,Q);var S=this.$6(R);this.unpacked.push(S)}else if(P.typeId===50){var T=n.getMappedArrayJabba(50,this.$8.buffer,N,Q);var U=this.$5(T);this.unpacked.push(U)}}else{this.unpacked.push(n.getMappedArrayJabba(P.typeId,this.$8.buffer,N,Q))}}},$0:function(e,N){return(N-e%N)%N},$2:function(e,N){var O=new Uint8Array(this.$b,this.$9+e.dataOffset,e.dataSize);if(e.encoding===0||e.encoding===3){this.$8.set(O,N)}else if(e.encoding===2){return this.$1(O,N)}else{throw new ss.Exception('Unsupported encoding: '+e.encoding)}return e.dataSize},$1:function(e,N){var O=0;var P=0;var Q=0;var R=new Int32Array(this.$8.buffer,N);while(P<e.length){if(e[P]<=240){var S=e[P];O=(S>>>1^-(S&1))+O;P+=1}else if(e[P]<=248){var T=240+256*(e[P]-241)+e[P+1];O=(T>>>1^-(T&1))+O;P+=2}else if(e[P]===249){var U=2288+256*e[P+1]+e[P+2];O=(U>>>1^-(U&1))+O;P+=3}else if(e[P]===250){var V=e[P+1]*65536+e[P+2]*256+e[P+3];O=(V>>>1^-(V&1))+O;P+=4}else if(e[P]===251){var W=e[P+1]*16777216+e[P+2]*65536+e[P+3]*256+e[P+4];O=(W>>>1^-(W&1))+O;P+=5}else if(e[P]===252){var X=e[P+1]*1+e[P+2]*16777216+e[P+3]*65536+e[P+4]*256+e[P+5];O=(X>>>1^-(X&1))+O;P+=6}R[Q++]=ss.Int32.trunc(O)}return Q*4},$3:function(){var e=new DataView(this.$b);var N=e.getUint16(0,true);var O=e.getUint16(2,true);this.$a=e.getInt32(4,true);this.$c=e.getInt32(8,true);this.$9=e.getInt32(12,true);if(N!==43962){throw new ss.Exception('Magic number mismatch: '+N)}if(O!==1){throw new ss.Exception('Unsupported JABBA version '+O)}},$4:function(){var e=new Uint32Array(this.$b,16,this.$c*Uint32Array.BYTES_PER_ELEMENT);for(var N=0;N<this.$c;N++){this.$d.push(new q(e,N*Uint32Array.BYTES_PER_ELEMENT))}}});ss.initClass(s,a,{$0:function(){var e=this.data.stringBuffer.byteOffset;var N=this.data.stringLengths.length;for(var O=0;O<N;O++){var P=this.data.stringLengths[O];this.stringTable[O]=J.decode(new Uint8Array(this.data.stringBuffer.buffer,e,P));e+=P}}});s.$2.prototype=s.prototype;ss.initClass(t,a,{processEncodedGeometry:function(){var e;switch(ss.Int32.trunc(this.$5[this.$6++])){case 1:{e=this.$4();break}case 2:{e=this.$2();break}case 3:{e=this.$3();break}default:{this.$1();return null}}if(this.$5[this.$6++]!==7){this.$1()}if(this.$6!==this.$5.length){this.$1()}return e},$3:function(){var e={};var N=0;var O=0;e.geometryType='multiPoint';var P={};e.multiPoint=P;if(this.$6+2>this.$5.length){this.$1()}N=this.$5[this.$6++];O=this.$5[this.$6++];P.pointsF=this.$0(N,O);return e},$2:function(){var e={};e.geometryType='multiLineString';var N={};var O=null;if(this.$6+2>this.$5.length){this.$1()}var P=this.$5[this.$6++];var Q=this.$5[this.$6++];while(this.$6<this.$5.length&&this.$5[this.$6]!==7){switch(ss.Int32.trunc(this.$5[this.$6++])){case 4:{N={};N.lineList=[];e.multiLine=N;break}case 6:{O={};N.lineList.push(O);O.pointsF=this.$0(P,Q);break}default:{this.$1();break}}}return e},$4:function(){var e={};e.geometryType='multiPolygon';var N=null;var O=null;var P=null;if(this.$6+2>this.$5.length){this.$1()}var Q=this.$5[this.$6++];var R=this.$5[this.$6++];while(this.$6<this.$5.length&&this.$5[this.$6]!==7){switch(ss.Int32.trunc(this.$5[this.$6++])){case 4:{N={};e.multiPolygon=N;N.polygonList=[];break}case 5:{O={};O.lineList=[];N.polygonList.push(O);break}case 6:{P={};O.lineList.push(P);P.pointsF=this.$0(Q,R);break}default:{this.$1();break}}}return e},$0:function(e,N){if(this.$6>=this.$5.length){this.$1()}var O=ss.Int32.trunc(this.$5[this.$6++]);if(this.$6+O>this.$5.length){this.$1()}var P=new Array(O);for(var Q=0;Q<O;Q+=2){P[Q]=this.$5[this.$6++]+e;P[Q+1]=this.$5[this.$6++]+N}return P},$1:function(){throw new ss.Exception('Invalid geometry data around position '+this.$6)}});ss.initClass(u,a,{executeVM:function(N){var O=$.Deferred();var P=tabBootstrap.MetricsController.createContext('RW_ExecuteVM',8,null);try{var Q=new f(Module._ExecuteVM(N.handleValue),function(e){RuntimeHandleManager._HandleManagerReleaseDatastoreHandle(e)});O.resolve(Q)}catch(R){var e=ss.Exception.wrap(R);O.reject();e=h.getExceptionInformation(e);e.name='RuntimeWebModule Error in ExecuteVM';tab.ErrorTrace.report(e)}P.dispose();return O.promise()},$0:function(N,O,P){var Q=$.Deferred();var R=tabBootstrap.MetricsController.createContext('RW_BuildVM',8,null);try{var S=new M(Module._BuildVM(N,O,P.handleValue),function(e){RuntimeHandleManager._HandleManagerReleaseVMHandle(e)});Q.resolve(S)}catch(T){var e=ss.Exception.wrap(T);Q.reject();e=h.getExceptionInformation(e);e.name='RuntimeWebModule Error in BuildVM';tab.ErrorTrace.report(e)}R.dispose();return Q.promise()},buildVMHex:function(e,N){var O=m.decodedLength(e);var P=RuntimeWebModule._malloc(O);m.run(P,RuntimeWebModule.HEAPU8,e);var Q=this.$0(P,O,N);RuntimeWebModule._free(P);return Q},$2:function(N,O){var P=$.Deferred();var Q=tabBootstrap.MetricsController.createContext('RW_LoadBinaryDatastore',8,null);try{var R=new f(Module._LoadBinaryDatastore(N,O),function(e){RuntimeHandleManager._HandleManagerReleaseDatastoreHandle(e)});P.resolve(R)}catch(S){var e=ss.Exception.wrap(S);P.reject();e=h.getExceptionInformation(e);e.name='RuntimeWebModule Error in LoadBinaryDatastore';tab.ErrorTrace.report(e)}Q.dispose();return P.promise()},loadBinaryDatastoreHex:function(e){var N=m.decodedLength(e);var O=RuntimeWebModule._malloc(N);m.run(O,RuntimeWebModule.HEAPU8,e);var P=this.$2(O,N);RuntimeWebModule._free(O);return P},initializeRuntime:function(){var N=$.Deferred();var O=tabBootstrap.MetricsController.createContext('RW_InitializeRuntime',8,null);try{Module._InitializeRuntime();N.resolve()}catch(P){var e=ss.Exception.wrap(P);N.reject();e=h.getExceptionInformation(e);e.name='RuntimeWebModule Error in InitializeRuntime';tab.ErrorTrace.report(e)}O.dispose();return N.promise()},marshallDatastore:function(N){var O=$.Deferred();var P=tabBootstrap.MetricsController.createContext('RW_MarshallDatastore',8,null);try{var Q=Module._MarshallDatastore(N.handleValue);var R=s.unmarshall$1(RuntimeWebModule.HEAPU8.buffer,Q);O.resolve(R)}catch(S){var e=ss.Exception.wrap(S);O.reject();e=h.getExceptionInformation(e);e.name='RuntimeWebModule Error in MarshallDatastore';tab.ErrorTrace.report(e)}P.dispose();return O.promise()},$3:function(N,O,P){var Q=$.Deferred();var R=tabBootstrap.MetricsController.createContext('RW_MarshallDatastoreSubKey',8,null);try{var S=Module._MarshallDatastoreSubKey(N.handleValue,O,P);var T=s.unmarshall$1(RuntimeWebModule.HEAPU8.buffer,S);Q.resolve(T)}catch(U){var e=ss.Exception.wrap(U);Q.reject();e=h.getExceptionInformation(e);e.name='RuntimeWebModule Error in MarshallDatastoreSubKey';tab.ErrorTrace.report(e)}R.dispose();return Q.promise()},marshallDatastoreSubKeyHex:function(e,N){var O=m.decodedLength(N);var P=RuntimeWebModule._malloc(O);m.run(P,RuntimeWebModule.HEAPU8,N);var Q=this.$3(e,P,O);RuntimeWebModule._free(P);return Q},$1:function(N,O,P){var Q=$.Deferred();var R=tabBootstrap.MetricsController.createContext('RW_LoadAndApplyDataStoreUpdater',8,null);try{var S=new f(Module._LoadAndApplyDataStoreUpdater(N,O,P.handleValue),function(e){RuntimeHandleManager._HandleManagerReleaseDatastoreHandle(e)});Q.resolve(S)}catch(T){var e=ss.Exception.wrap(T);Q.reject();e=h.getExceptionInformation(e);e.name='RuntimeWebModule Error in LoadAndApplyDataStoreUpdater';tab.ErrorTrace.report(e)}R.dispose();return Q.promise()},loadAndApplyDataStoreUpdaterHex:function(e,N){var O=m.decodedLength(e);var P=RuntimeWebModule._malloc(O);m.run(P,RuntimeWebModule.HEAPU8,e);var Q=this.$1(P,O,N);RuntimeWebModule._free(P);return Q},localPanCommand:function(N,O,P,Q,R){var S=$.Deferred();var T=tabBootstrap.MetricsController.createContext('RW_LocalPanCommand',8,null);try{var U=new f(Module._LocalPanCommand(N.handleValue,O.handleValue,P.handleValue,Q,R),function(e){RuntimeHandleManager._HandleManagerReleaseDatastoreHandle(e)});S.resolve(U)}catch(V){var e=ss.Exception.wrap(V);S.reject();e=h.getExceptionInformation(e);e.name='RuntimeWebModule Error in LocalPanCommand';tab.ErrorTrace.report(e)}T.dispose();return S.promise()},localZoomCommand:function(N,O,P,Q,R,S,T,U){var V=$.Deferred();var W=tabBootstrap.MetricsController.createContext('RW_LocalZoomCommand',8,null);try{var X=new f(Module._LocalZoomCommand(N.handleValue,O.handleValue,P.handleValue,Q,R,S,T,U),function(e){RuntimeHandleManager._HandleManagerReleaseDatastoreHandle(e)});V.resolve(X)}catch(Y){var e=ss.Exception.wrap(Y);V.reject();e=h.getExceptionInformation(e);e.name='RuntimeWebModule Error in LocalZoomCommand';tab.ErrorTrace.report(e)}W.dispose();return V.promise()},localZoomFactorCommand:function(N,O,P,Q,R,S){var T=$.Deferred();var U=tabBootstrap.MetricsController.createContext('RW_LocalZoomFactorCommand',8,null);try{var V=new f(Module._LocalZoomFactorCommand(N.handleValue,O.handleValue,P.handleValue,Q,R,S),function(e){RuntimeHandleManager._HandleManagerReleaseDatastoreHandle(e)});T.resolve(V)}catch(W){var e=ss.Exception.wrap(W);T.reject();e=h.getExceptionInformation(e);e.name='RuntimeWebModule Error in LocalZoomFactorCommand';tab.ErrorTrace.report(e)}U.dispose();return T.promise()},$4:function(N,O,P){var Q=$.Deferred();var R=tabBootstrap.MetricsController.createContext('RW_RueUpdateCommand',8,null);try{var S=new f(Module._RueUpdateCommand(N.handleValue,O,P),function(e){RuntimeHandleManager._HandleManagerReleaseDatastoreHandle(e)});Q.resolve(S)}catch(T){var e=ss.Exception.wrap(T);Q.reject();e=h.getExceptionInformation(e);e.name='RuntimeWebModule Error in RueUpdateCommand';tab.ErrorTrace.report(e)}R.dispose();return Q.promise()},rueUpdateCommandHex:function(e,N){var O=m.decodedLength(N);var P=RuntimeWebModule._malloc(O);m.run(P,RuntimeWebModule.HEAPU8,N);var Q=this.$4(e,P,O);RuntimeWebModule._free(P);return Q}},null,[o]);ss.initClass(v,a,{paramToByteBuffer:function(e){var N=e;var O=RuntimeWebModule.HEAPU32[N>>2];var P=RuntimeWebModule.HEAPU32[(N>>2)+1];return RuntimeWebModule.HEAPU8.buffer.slice(O,O+P)},byteBufferToHeap:function(e){var N=RuntimeWebModule.stackAlloc(e.byteLength+2);var O=N+8;RuntimeWebModule.HEAPU32[N>>2]=O;RuntimeWebModule.HEAPU32[(N>>2)+1]=e.byteLength;RuntimeWebModule.HEAPU8.set(new Uint8Array(e),O);return N},paramToString:function(e){var N=e;return J.decodeNullTerminated(RuntimeWebModule.HEAPU8.subarray(N))},stringToHeap:function(e){var N=K.encode(e);var O=RuntimeWebModule.stackAlloc(N.length+1);RuntimeWebModule.HEAPU8[O+N.length]=0;RuntimeWebModule.HEAPU8.set(N,O);return O}},null,[p]);ss.initClass(w,a,{});w.$ctor1.prototype=w.prototype;ss.initClass(x,a,{get_typeCode:function(){return 18}},y,[ss.IDisposable]);ss.initClass(z,a,{getStartIndex:function(e,N){return this.$0[e][N*2]},getEndIndex:function(e,N){return this.$0[e][N*2+1]},getPageIndices:function(e){return this.$0[e]}});ss.initClass(A,a,{get_startIndex:function(){return this.$5},get_endIndex:function(){return this.$0},get_pageIndices:function(){return this.$1},get_paneKey:function(){return this.$4},get_paneId:function(){return this.$2},get_paneIndex:function(){return this.$3}});A.$ctor1.prototype=A.prototype;ss.initClass(B,a,{});ss.initClass(C,a,{pack:function(){this.$a.setInt32(0,this.$9,true);return this.$8.subarray(0,this.$7)},addColorArray:function(e,N){this.$6(e,37,N.length);for(var O=0;O<N.length;O++){var P=N[O];this.$3(P)}},addReal64Array:function(e,N){this.$6(e,36,N.length);for(var O=0;O<N.length;O++){var P=N[O];this.$2(P)}},addInt32Array:function(e,N){this.$6(e,33,N.length);for(var O=0;O<N.length;O++){var P=N[O];this.$3(P)}},addInt64Array:function(e,N){this.$6(e,34,ss.Int32.div(N.length,2));for(var O=0;O<N.length;O++){var P=N[O];this.$3(P)}},startTable:function(e,N){this.$9++;this.$9-=N;this.$4(e);this.$5(20);this.$3(N)},$6:function(e,N,O){this.$9++;this.$4(e);this.$5(16);this.$5(N);this.$3(O)},$4:function(e){var N=K.encode(e);var O=N.byteLength+1;this.$3(O);this.$1(O);this.$8.set(N,this.$7);this.$7+=O},$3:function(e){this.$0(4);this.$1(4);this.$a.setInt32(this.$7,e,true);this.$7+=4},$5:function(e){this.$3(e)},$2:function(e){this.$0(8);this.$1(8);this.$a.setFloat64(this.$7,e,true);this.$7+=8},$0:function(e){var N=(e-this.$7%e)%e;this.$1(N);this.$7+=N},$1:function(e){var N=this.$7+e;if(N>=this.$8.byteLength){var O=Math.max(this.$8.byteLength*2,N+1);var P=new Uint8Array(O);P.set(this.$8);this.$8=P;this.$a=new DataView(this.$8.buffer)}}});ss.initClass(D,a,{get_finalDataStore:function(){return this.$6},get_annexedData:function(){return this.$3},get_geometries:function(){return this.$8},get_paneStoreTable:function(){if(tab.MiscUtil.isNullOrEmpty$2(this.$a)){this.$a=new z(this.get_finalDataStore().PageIntervalTable,this.get_finalDataStore().PaneCount)}return this.$a},get_labelsPaneStoreTable:function(){if(tab.MiscUtil.isNullOrEmpty$2(this.$9)){this.$9=new z(this.get_annexedData().LabelStore.PageIntervalTable,this.get_finalDataStore().PaneCount)}return this.$9},get_drawFirsts:function(){if(tab.MiscUtil.isNullOrEmpty$2(this.$4)&&!tab.MiscUtil.isNullOrEmpty$2(this.get_annexedData())){this.$4=D.$0(this.get_annexedData().DrawFirsts)}return this.$4},get_drawLasts:function(){if(tab.MiscUtil.isNullOrEmpty$2(this.$5)&&!tab.MiscUtil.isNullOrEmpty$2(this.get_annexedData())){this.$5=D.$0(this.get_annexedData().DrawLasts)}return this.$5},get_panes:function(){if(tab.MiscUtil.isNullOrEmpty(this.$b)){if(tab.MiscUtil.isNullOrEmpty$2(this.get_annexedData())||tab.MiscUtil.isNullOrEmpty(this.get_annexedData().Panes)){return[]}var e=this.get_annexedData().Panes;var N=[];for(var O=0;O<e.length;O++){var P=e[O];var Q={};var R=[];for(var S=0;S<P.DrawPanes.length;S++){var T=P.DrawPanes[S];if(T[1].length>0){R.push(JSON.parse(J.decode(T[1])))}}Q.drawPane=Array.prototype.slice.call(R);Q.columnIndex=P.Column;Q.rowIndex=P.Row;Q.paneRect={h:P.Rect[3],w:P.Rect[2],x:P.Rect[0],y:P.Rect[1]};N.push(Q)}this.$b=N}return this.$b},safeFetchMarkPanes:function(){var e=[];if(!ss.isNullOrUndefined(this.get_annexedData().Panes)){e=this.get_annexedData().Panes}return e},update:function(e){this.$6=e;this.$a=null;this.$9=null},$2:function(){if(ss.isNullOrUndefined(this.$7)||this.$7.length===0){this.$6={};return}if(this.$7.charCodeAt(0)===123){{var e=tabBootstrap.MetricsController.createContext('RTCONV'.toString(),4,null);try{this.$6=JSON.parse(this.$7)}finally{if(ss.isValue(e)){e.dispose()}}}}else{this.$6=s.unmarshallHex(this.$7)}if(tab.ObjectCoverage.shouldTrack('runtime-datastore')){this.$6=(new tab.ObjectCoverage('runtime-datastore')).instrument(this.get_finalDataStore(),'')}},$0:function(){if(!tab.MiscUtil.isNullOrEmpty$2(this.$6.AnnexedData)){this.$3=this.$6.AnnexedData}},$1:function(){var e=this.$6.PDMarks;var N=_.keys(e);for(var O=0;O<N.length;O++){var P=N[O];var Q=e[P];var R=Q.MarkLayoutData.geoTable;if(!ss.isValue(R)){continue}this.$8[P]=R}}});ss.initClass(E,a,{get_VM:function(){return this.$1$1},set_VM:function(e){this.$1$1=e},get_initialStore:function(){return this.$1$2},set_initialStore:function(e){this.$1$2=e},get_finalStore:function(){return this.$1$3},set_finalStore:function(e){this.$1$3=e}});ss.initClass(F,a,{});ss.initClass(G,a,{executeVM:function(e){var N=$.Deferred();var O=this.$0('ExecuteVM',[b.$0('int',''),b.$0('int',e.handleValue)]);O.done(ss.mkdel(this,function(P){var Q=new f(P.value,ss.mkdel(this,function(R){this.$0('HandleManagerReleaseDatastoreHandle',[b.$0('void',''),b.$0('int',R)])}));N.resolve(Q)}));return N.promise()},buildVMHex:function(e,N){var O=$.Deferred();var P=this.$0('BuildVM',[b.$0('int',''),b.$0('hex',e),b.$0('int',N.handleValue)]);P.done(ss.mkdel(this,function(Q){var R=new M(Q.value,ss.mkdel(this,function(S){this.$0('HandleManagerReleaseVMHandle',[b.$0('void',''),b.$0('int',S)])}));O.resolve(R)}));return O.promise()},loadBinaryDatastoreHex:function(e){var N=$.Deferred();var O=this.$0('LoadBinaryDatastore',[b.$0('int',''),b.$0('hex',e)]);O.done(ss.mkdel(this,function(P){var Q=new f(P.value,ss.mkdel(this,function(R){this.$0('HandleManagerReleaseDatastoreHandle',[b.$0('void',''),b.$0('int',R)])}));N.resolve(Q)}));return N.promise()},initializeRuntime:function(){var e=$.Deferred();var N=this.$0('InitializeRuntime',[b.$0('void','')]);N.done(function(O){e.resolve()});return e.promise()},marshallDatastore:function(e){var N=$.Deferred();var O=this.$0('MarshallDatastore',[b.$0('hex',''),b.$0('int',e.handleValue)]);O.done(function(P){var Q=s.unmarshallHex(P.value);N.resolve(Q)});return N.promise()},marshallDatastoreSubKeyHex:function(e,N){var O=$.Deferred();var P=this.$0('MarshallDatastoreSubKey',[b.$0('hex',''),b.$0('int',e.handleValue),b.$0('hex',N)]);P.done(function(Q){var R=s.unmarshallHex(Q.value);O.resolve(R)});return O.promise()},loadAndApplyDataStoreUpdaterHex:function(e,N){var O=$.Deferred();var P=this.$0('LoadAndApplyDataStoreUpdater',[b.$0('int',''),b.$0('hex',e),b.$0('int',N.handleValue)]);P.done(ss.mkdel(this,function(Q){var R=new f(Q.value,ss.mkdel(this,function(S){this.$0('HandleManagerReleaseDatastoreHandle',[b.$0('void',''),b.$0('int',S)])}));O.resolve(R)}));return O.promise()},localPanCommand:function(e,N,O,P,Q){var R=$.Deferred();var S=this.$0('LocalPanCommand',[b.$0('int',''),b.$0('int',e.handleValue),b.$0('int',N.handleValue),b.$0('int',O.handleValue),b.$0('double',P),b.$0('double',Q)]);S.done(ss.mkdel(this,function(T){var U=new f(T.value,ss.mkdel(this,function(V){this.$0('HandleManagerReleaseDatastoreHandle',[b.$0('void',''),b.$0('int',V)])}));R.resolve(U)}));return R.promise()},localZoomCommand:function(e,N,O,P,Q,R,S,T){var U=$.Deferred();var V=this.$0('LocalZoomCommand',[b.$0('int',''),b.$0('int',e.handleValue),b.$0('int',N.handleValue),b.$0('int',O.handleValue),b.$0('int',P),b.$0('int',Q),b.$0('int',R),b.$0('int',S),b.$0('bool',T)]);V.done(ss.mkdel(this,function(W){var X=new f(W.value,ss.mkdel(this,function(Y){this.$0('HandleManagerReleaseDatastoreHandle',[b.$0('void',''),b.$0('int',Y)])}));U.resolve(X)}));return U.promise()},localZoomFactorCommand:function(e,N,O,P,Q,R){var S=$.Deferred();var T=this.$0('LocalZoomFactorCommand',[b.$0('int',''),b.$0('int',e.handleValue),b.$0('int',N.handleValue),b.$0('int',O.handleValue),b.$0('int',P),b.$0('int',Q),b.$0('double',R)]);T.done(ss.mkdel(this,function(U){var V=new f(U.value,ss.mkdel(this,function(W){this.$0('HandleManagerReleaseDatastoreHandle',[b.$0('void',''),b.$0('int',W)])}));S.resolve(V)}));return S.promise()},rueUpdateCommandHex:function(e,N){var O=$.Deferred();var P=this.$0('RueUpdateCommand',[b.$0('int',''),b.$0('int',e.handleValue),b.$0('hex',N)]);P.done(ss.mkdel(this,function(Q){var R=new f(Q.value,ss.mkdel(this,function(S){this.$0('HandleManagerReleaseDatastoreHandle',[b.$0('void',''),b.$0('int',S)])}));O.resolve(R)}));return O.promise()},$0:function(e,N){var O=$.Deferred();var P=[];for(var Q=0;Q<N.length;Q++){var R=N[Q];P.push(R)}var S=new XMLHttpRequest;S.open('POST',this.$2+'/callMethod/'+e);S.setRequestHeader('Accept','text/javascript');S.setRequestHeader('Content-Type','application/x-www-form-urlencoded');S.onloadend=function(T){O.resolve(JSON.parse(T.target.responseText))};S.onerror=function(T){O.reject(T)};S.send(JSON.stringify(P));return O},$1:function(){var e=new XMLHttpRequest;e.open('POST',this.$2+'/restart',false);e.setRequestHeader('Accept','text/javascript');e.setRequestHeader('Content-Type','application/x-www-form-urlencoded');e.send(JSON.stringify('restart'))}},null,[o]);ss.initClass(H,a,{byteBufferToHeap:function(e){var N={};N.type='bytebuffer';N.value=l.encodeBufferToHex(new Uint8Array(e));return N},paramToByteBuffer:function(e){var N=e['value'];var O=new Uint8Array(m.decodedLength(N));m.run(0,O,N);return O.buffer},paramToString:function(e){return e['value']},stringToHeap:function(e){var N={};N.type='string';N.value=e;return N}},null,[p]);ss.initClass(I,a,{});ss.initClass(J,a,{});ss.initClass(K,a,{});ss.initClass(L,a,{});ss.initClass(M,a,{get_typeCode:function(){return 17}},y,[ss.IDisposable]);(function(){c.$0=ss.isValue(tab.FeatureParamsLookup.getInt(54))})();(function(){d.$2='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';d.$1=null})();(function(){J.$0=null;J.$1=!(typeof(TextDecoder)!=='undefined');if(!J.$1){J.$0=new TextDecoder}})();(function(){i.$8=null;i.$1=null;i.$9=null;i.$0=null;i.$2=null;i.$3=null;i.$6=null;i.$4=null;i.$5=null;i.$a=null;i.$7=null;i.$b=null})();(function(){l.$1=null;l.$2=false})();(function(){m.$0=new Uint8Array(256);for(var e=0;e<10;e++){m.$0[48+e]=e}for(var N=10;N<16;N++){m.$0[97+(N-10)]=N}for(var O=10;O<16;O++){m.$0[65+(O-10)]=O}})();(function(){s.$1={}})();(function(){K.$0=null;K.$1=!(typeof(TextEncoder)!=='undefined');if(!K.$1){K.$0=new TextEncoder}})();(function(){F.$1=false})();(function(){I.proxy=null;I.support=null;var e=tab.FeatureParamsLookup.getString(51);if(!ss.isNullOrUndefined(e)){I.proxy=new G(e);I.support=new H}else{I.proxy=new u;I.support=new v}})();(function(){L.tupleId='tuple_id';L.groupId='group_id';L.trailId='trail_id';L.primitiveId='primitive_id';L.paneIndex='pane_index';L.paneCol='pane_col';L.paneRow='pane_row';L.panePage='pane_page';L.rangeMin='range_min';L.rangeMax='range_max';L.domainMin='domain_min';L.domainMax='domain_max';L.xDomains='x_domains_lookup';L.yDomains='y_domains_lookup';L.lookup='lookup';L.xNumberMap='x_numbermap';L.yNumberMap='y_numbermap';L.dataType='dataType';L.fieldType='fieldType';L.cellX='cell_x';L.cellY='cell_y';L.markFirst='mark_first';L.markLast='mark_last';L.x='x';L.y='y';L.x1='x1';L.y1='y1';L.width='width';L.height='height';L.size='size';L.sizeLabel='size_label';L.hasPerMarkSizeEncoding='has_per_mark_size_encoding';L.rho='rho';L.rho1='rho1';L.theta='theta';L.theta1='theta1';L.xPrev='x_prev';L.yPrev='y_prev';L.xNext='x_next';L.yNext='y_next';L.color='color';L.hasPerMarkColorEncoding='has_per_mark_color_encoding';L.alpha='alpha';L.haloColor='halo_color';L.haloAlpha='halo_alpha';L.hasHalos='has_halos';L.shapeId='shape_id';L.clipWidth='clip_width';L.clipHeight='clip_height';L.userPaneCol='user_pane_col';L.userPaneRow='user_pane_row';L.userPaneIndex='user_pane_index';L.xCellOffsets='x_cell_offsets';L.yCellOffsets='y_cell_offsets';L.xPixelOffsets='x_pixel_offsets';L.yPixelOffsets='y_pixel_offsets';L.userPaneInfo='user_pane_info';L.minBarHeight='min_bar_height';L.minBarWidth='min_bar_width';L.drawBorder='draw_border';L.borderColor='border_color';L.selectedHaloColor='selected_halo_color';L.selectedMultiPrimHaloColor='selected_multi_prim_halo_color';L.highlightedHaloColor='highlighted_halo_color';L.backgroundColor='background_color';L.wrapDomain='wrap_domain';L.hasFoldedAxis='has_folded_axis';L.markFlags='mark_flags';L.paneFlags='pane_flags';L.handleSpecialsX='handle_specials_x';L.handleSpecialsY='handle_specials_y';L.scaleTypeX='scale_type_x';L.scaleTypeY='scale_type_y';L.hasEmptyOrEqualAxis='has_empty_or_equal_axis';L.dropLineFlags='drop_line_flags';L.lineInterpolation='line_interp';L.markStackIndex='tc_stack_index';L.isMarkStacked='is_mark_stacked';L.currStackedVal='tc_curr_stack_value';L.prevStackedVal='tc_prev_stack_value';L.scaledStartPoint='scaled_start_point';L.scaledEndPoint='scaled_end_point';L.exclPrevLowerStackedVal='tc_prev_excl_stack_value';L.exclNextLowerStackedVal='tc_next_excl_stack_value';L.isMarkTotal='is_mark_total';L.xProj='x_proj';L.yProj='y_proj';L.paneHasBackground='pane_has_background';L.panePxLeft='pane_px_left';L.panePxRight='pane_px_right';L.panePxTop='pane_px_top';L.panePxBottom='pane_px_bottom';L.textRunOffset='text_run_offset';L.textRunCount='text_run_count';L.formattedTextRunOffset='formatted_text_run_offset';L.formattedTextRunCount='formatted_text_run_count';L.geometry='geometry';L.geometryTable='geoTable';L.pageTrailMarksToTrail='page_trail_marks_to_trail';L.markTrailCount='mark_trail_count';L.markTrailAutoColor='mark_trail_auto_color';L.markTrailColor='mark_trail_color';L.markTrailTransparency='mark_trail_transparency';L.markTrailStartEffect='mark_trail_start_effect';L.markTrailEndEffect='mark_trail_end_effect';L.isTextTable='is_text_table';L.textMaxWidth='text_max_width';L.textMaxHeight='text_max_height';L.textScaleFactor='text_scale_factor';L.textRangeFactor='text_range_factor';L.textFontMin='text_font_min';L.textFitStyle='text_fit_style';L.textRunPosition='text_run_position';L.textCompositionOutput='text_composition_output';L.textRunTable='TextRunTable';L.formattedTextRunTable='FormattedTextRunTable';L.textRun='text_run';L.textRunX='text_run_x';L.textRunY='text_run_y';L.textRunXRemote='text_run_x_remote';L.textRunYRemote='text_run_y_remote';L.textStyleID='text_style_id';L.hasFontSizeOverride='has_font_size_override';L.textStyleTable='TextStyleTable';L.formattedTextStyleTable='FormattedTextStyleTable';L.font='font';L.fontSize='font_size';L.textStyleColor='text_style_color';L.fontStyle='font_style';L.fontWeight='font_weight';L.textDecoration='text_decoration';L.textOrientation='text_orientation';L.textAlignment='text_alignment';L.underline='underline';L.strikethrough='strikethrough';L.ascent='ascent';L.leading='leading';L.fontHeight='font_height';L.hAlign='hAlign';L.vAlign='vAlign';L.textWrapMode='text_wrap_mode';L.labelTargetPrimitiveId='label_target_primitive_id';L.labelOnePerGroup='label_one_per_group';L.showLabels='ShowLabels';L.showRunningOrderLabels='ShowRunningOrderLabels';L.labelMode='LabelMode';L.predictionIntervalUpperEnd='prediction_interval_upper_end';L.predictionIntervalLowerEnd='prediction_interval_lower_end';L.predictionIntervalUpperEndMeasure='prediction_interval_upper_end_measure';L.predictionIntervalLowerEndMeasure='prediction_interval_lower_end_measure';L.predictionWhiskerWidth='prediction_whisker_width';L.colors='Colors';L.column='Column';L.encodingDomains='EncodingDomains';L.defaultParamID='DefaultParamID';L.domain='Domain';L.domainExtents='DomainExtents';L.domainOrigin='DomainOrigin';L.drawFirsts='DrawFirsts';L.drawLasts='DrawLasts';L.drawPanes='DrawPanes';L.encodings='Encodings';L.endIndex='EndIndex';L.geometries='Geometries';L.left='Left';L.lineTupleIds='LineTupleIds';L.lowerEnds='LowerEnds';L.mapDomainExtents='MapDomainExtents';L.markType='MarkType';L.maxAlpha='MaxAlpha';L.oppositeAxes='OppositeAxes';L.pageIndexes='PageIndexes';L.paneId='PaneId';L.paneKey='PaneKey';L.panes='Panes';L.part='Part';L.pixelExtents='PixelExtents';L.presModel='PresModel';L.rect='Rect';L.renderNodes='RenderNodes';L.renderOnTop='RenderOnTop';L.row='Row';L.startIndex='StartIndex';L.textAttributes='TextAttributes';L.textTable='TextTable';L.textTableHelper='TextTableHelper';L.textEncodingTable='TextEncodingTable';L.top='Top';L.trailOverrides='TrailOverrides';L.tupleIds='TupleIds';L.type='Type';L.upperEnds='UpperEnds';L.useYAxis='UseYAxis';L.vizType='VizType';L.widths='Widths';L.extendedDomain='ExtendedDomain';L.markLayoutTempKeys='MarkLayoutTempKeys';L.partition='Partition';L.pdMarks='PDMarks';L.axisEncodings='AxisEncodings';L.inheritedSceneBackgroundColor='SceneBGColor';L.isSceneBackgroundOpaque='IsSceneBGOpaque';L.labelStore='LabelStore';L.primitiveType='PrimitiveType';L.mapPackage='MapPackage';L.mappedImageModel='MappedImageModel';L.modelNumber='ModelNumber';L.waitForImages='WaitForImages';L.waitTileFill='WaitTileFill';L.wrapCount='WrapCount';L.mapCode='MapCode';L.sourceName='SourceName';L.mapProvider='MapProvider';L.mapLayersModel='MapLayersModel';L.markLabelPadding='mark_label_padding'})()})();;
/*! BEGIN SpiffUI */
var IScroll=function(n,t,i){function u(n,i){this.wrapper=typeof n=="string"?t.querySelector(n):n;this.scroller=this.wrapper.children[0];this.scrollerStyle=this.scroller.style;this.options={resizeIndicator:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var u in i)this.options[u]=i[u];this.translateZ=this.options.HWCompositing&&r.hasPerspective?" translateZ(0)":"";this.options.useTransition=r.hasTransition&&this.options.useTransition;this.options.useTransform=r.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough=="vertical"?!1:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough=="horizontal"?!1:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing=="string"?r.ease[this.options.bounceEasing]||r.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;this.options.tap===!0&&(this.options.tap="tap");this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1;this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable()}function f(n,i,r){var u=t.createElement("div"),f=t.createElement("div");return r===!0&&(u.style.cssText="position:absolute;z-index:9999",f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),f.className="iScrollIndicator",n=="h"?(r===!0&&(u.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",f.style.height="100%"),u.className="iScrollHorizontalScrollbar"):(r===!0&&(u.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",f.style.width="100%"),u.className="iScrollVerticalScrollbar"),i||(u.style.pointerEvents="none"),u.appendChild(f),u}function e(i,u){this.wrapper=typeof u.el=="string"?t.querySelector(u.el):u.el;this.indicator=this.wrapper.children[0];this.indicatorStyle=this.indicator.style;this.scroller=i;this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,speedRatioX:0,speedRatioY:0};for(var f in u)this.options[f]=u[f];this.sizeRatioX=1;this.sizeRatioY=1;this.maxPosX=0;this.maxPosY=0;this.options.interactive&&(this.options.disableTouch||(r.addEvent(this.indicator,"touchstart",this),r.addEvent(n,"touchend",this)),this.options.disablePointer||(n.PointerEvent?(r.addEvent(this.indicator,"pointerdown",this),r.addEvent(n,"pointerup",this)):n.MSPointerEvent&&(r.addEvent(this.indicator,"MSPointerDown",this),r.addEvent(n,"MSPointerUp",this))),this.options.disableMouse||(r.addEvent(this.indicator,"mousedown",this),r.addEvent(n,"mouseup",this)))}var o=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(t){n.setTimeout(t,1e3/60)},r=function(){function u(n){return e===!1?!1:e===""?n:e+n.charAt(0).toUpperCase()+n.substr(1)}var r={},f=t.createElement("div").style,e=function(){for(var t=["t","webkitT","MozT","msT","OT"],i,n=0,r=t.length;n<r;n++)if(i=t[n]+"ransform",i in f)return t[n].substr(0,t[n].length-1);return!1}(),o;return r.getTime=Date.now||function(){return(new Date).getTime()},r.extend=function(n,t){for(var i in t)n[i]=t[i]},r.addEvent=function(n,t,i,r){n.addEventListener(t,i,!!r)},r.removeEvent=function(n,t,i,r){n.removeEventListener(t,i,!!r)},r.momentum=function(n,t,r,u,f){var s=n-t,o=i.abs(s)/r,e,h,c=.0006;return e=n+o*o/(2*c)*(s<0?-1:1),h=o/c,e<u?(e=f?u-f/2.5*(o/8):u,s=i.abs(e-n),h=s/o):e>0&&(e=f?f/2.5*(o/8):0,s=i.abs(n)+e,h=s/o),{destination:i.round(e),duration:h}},o=u("transform"),r.extend(r,{hasTransform:o!==!1,hasPerspective:u("perspective")in f,hasTouch:"ontouchstart"in n,hasPointer:navigator.msPointerEnabled,hasTransition:u("transition")in f}),r.isAndroidBrowser=/Android/.test(n.navigator.appVersion)&&/Version\/\d/.test(n.navigator.appVersion),r.extend(r.style={},{transform:o,transitionTimingFunction:u("transitionTimingFunction"),transitionDuration:u("transitionDuration"),transformOrigin:u("transformOrigin")}),r.hasClass=function(n,t){var i=new RegExp("(^|\\s)"+t+"(\\s|$)");return i.test(n.className)},r.addClass=function(n,t){if(!r.hasClass(n,t)){var i=n.className.split(" ");i.push(t);n.className=i.join(" ")}},r.removeClass=function(n,t){if(r.hasClass(n,t)){var i=new RegExp("(^|\\s)"+t+"(\\s|$)","g");n.className=n.className.replace(i," ")}},r.offset=function(n){for(var t=-n.offsetLeft,i=-n.offsetTop;n=n.offsetParent;)t-=n.offsetLeft,i-=n.offsetTop;return{left:t,top:i}},r.preventDefaultException=function(n,t){for(var i in t)if(t[i].test(n[i]))return!0;return!1},r.extend(r.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),r.extend(r.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(n){return n*(2-n)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(n){return i.sqrt(1- --n*n)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(n){var t=4;return(n=n-1)*n*((t+1)*n+t)+1}},bounce:{style:"",fn:function(n){return(n/=1)<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}},elastic:{style:"",fn:function(n){var t=.22;return n===0?0:n==1?1:.4*i.pow(2,-10*n)*i.sin((n-t/4)*2*i.PI/t)+1}}}),r.tap=function(n,i){var r=t.createEvent("Event");r.initEvent(i,!0,!0);r.pageX=n.pageX;r.pageY=n.pageY;n.target.dispatchEvent(r)},r.click=function(n){var i=n.target,r;i.tagName!="SELECT"&&i.tagName!="INPUT"&&i.tagName!="TEXTAREA"&&(r=t.createEvent("MouseEvents"),r.initMouseEvent("click",!0,!0,n.view,1,i.screenX,i.screenY,i.clientX,i.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,0,null),r._constructed=!0,i.dispatchEvent(r))},r}();return u.prototype={version:"5.0.6",_init:function(){this._initEvents();(this.options.scrollbars||this.options.indicators)&&this._initIndicators();this.options.mouseWheel&&this._initWheel();this.options.snap&&this._initSnap();this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0);this._execEvent("destroy")},_transitionEnd:function(n){n.target==this.scroller&&(this._transitionTime(0),this.resetPosition(this.options.bounceTime)||this._execEvent("scrollEnd"))},_start:function(n){if((r.eventType[n.type]==1||n.button===0)&&this.enabled&&(!this.initiated||r.eventType[n.type]===this.initiated)){!this.options.preventDefault||r.isAndroidBrowser||r.preventDefaultException(n.target,this.options.preventDefaultException)||n.preventDefault();var u=n.touches?n.touches[0]:n,t;this.initiated=r.eventType[n.type];this.moved=!1;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this._transitionTime();this.isAnimating=!1;this.startTime=r.getTime();this.options.useTransition&&this.isInTransition&&(t=this.getComputedPosition(),this._translate(i.round(t.x),i.round(t.y)),this._execEvent("scrollEnd"),this.isInTransition=!1);this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=u.pageX;this.pointY=u.pageY;this._execEvent("beforeScrollStart")}},_move:function(n){if(this.enabled&&r.eventType[n.type]===this.initiated){this.options.preventDefault&&n.preventDefault();var o=n.touches?n.touches[0]:n,t=o.pageX-this.pointX,u=o.pageY-this.pointY,c=r.getTime(),f,e,s,h;if(this.pointX=o.pageX,this.pointY=o.pageY,this.distX+=t,this.distY+=u,s=i.abs(this.distX),h=i.abs(this.distY),!(c-this.endTime>300)||!(s<10)||!(h<10)){if(this.directionLocked||this.options.freeScroll||(this.directionLocked=s>h+this.options.directionLockThreshold?"h":h>=s+this.options.directionLockThreshold?"v":"n"),this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical")n.preventDefault();else if(this.options.eventPassthrough=="horizontal"){this.initiated=!1;return}u=0}else if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal")n.preventDefault();else if(this.options.eventPassthrough=="vertical"){this.initiated=!1;return}t=0}t=this.hasHorizontalScroll?t:0;u=this.hasVerticalScroll?u:0;f=this.x+t;e=this.y+u;(f>0||f<this.maxScrollX)&&(f=this.options.bounce?this.x+t/3:f>0?0:this.maxScrollX);(e>0||e<this.maxScrollY)&&(e=this.options.bounce?this.y+u/3:e>0?0:this.maxScrollY);this.directionX=t>0?-1:t<0?1:0;this.directionY=u>0?-1:u<0?1:0;this.moved||this._execEvent("scrollStart");this.moved=!0;this._translate(f,e);c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y);this._execEvent("scroll")}}},_end:function(n){var f;if(this.enabled&&r.eventType[n.type]===this.initiated){this.options.preventDefault&&!r.preventDefaultException(n.target,this.options.preventDefaultException)&&n.preventDefault();var v=n.changedTouches?n.changedTouches[0]:n,o,s,e=r.getTime()-this.startTime,t=i.round(this.x),u=i.round(this.y),l=i.abs(t-this.startX),a=i.abs(u-this.startY),h=0,c="";if(this.scrollTo(t,u),this.isInTransition=0,this.initiated=0,this.endTime=r.getTime(),!this.resetPosition(this.options.bounceTime)){if(!this.moved){this.options.tap&&r.tap(n,this.options.tap);this.options.click&&r.click(n);return}if(this._events.flick&&e<200&&l<100&&a<100){this._execEvent("flick");return}if(this.options.momentum&&e<300&&(o=this.hasHorizontalScroll?r.momentum(this.x,this.startX,e,this.maxScrollX,this.options.bounce?this.wrapperWidth:0):{destination:t,duration:0},s=this.hasVerticalScroll?r.momentum(this.y,this.startY,e,this.maxScrollY,this.options.bounce?this.wrapperHeight:0):{destination:u,duration:0},t=o.destination,u=s.destination,h=i.max(o.duration,s.duration),this.isInTransition=1),this.options.snap&&(f=this._nearestSnap(t,u),this.currentPage=f,h=this.options.snapSpeed||i.max(i.max(i.min(i.abs(t-f.x),1e3),i.min(i.abs(u-f.y),1e3)),300),t=f.x,u=f.y,this.directionX=0,this.directionY=0,c=this.options.bounceEasing),t!=this.x||u!=this.y){(t>0||t<this.maxScrollX||u>0||u<this.maxScrollY)&&(c=r.ease.quadratic);this.scrollTo(t,u,h,c);return}this._execEvent("scrollEnd")}}},_resize:function(){var n=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){n.refresh()},this.options.resizePolling)},resetPosition:function(n){var t=this.x,i=this.y;return(n=n||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),t==this.x&&i==this.y)?!1:(this.scrollTo(t,i,n,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){var n=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;this.scrollerWidth=this.scroller.offsetWidth;this.scrollerHeight=this.scroller.offsetHeight;this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth);this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight);this.endTime=0;this.directionX=0;this.directionY=0;this.wrapperOffset=r.offset(this.wrapper);this._execEvent("refresh");this.resetPosition()},on:function(n,t){this._events[n]||(this._events[n]=[]);this._events[n].push(t)},_execEvent:function(n){if(this._events[n]){var t=0,i=this._events[n].length;if(i)for(;t<i;t++)this._events[n][t].call(this)}},scrollBy:function(n,t,i,r){n=this.x+n;t=this.y+t;i=i||0;this.scrollTo(n,t,i,r)},scrollTo:function(n,t,i,u){u=u||r.ease.circular;!i||this.options.useTransition&&u.style?(this._transitionTimingFunction(u.style),this._transitionTime(i),this._translate(n,t)):this._animate(n,t,i,u.fn);this._execEvent("scroll")},scrollToElement:function(n,t,u,f,e){if(n=n.nodeType?n:this.scroller.querySelector(n),n){var o=r.offset(n);o.left-=this.wrapperOffset.left;o.top-=this.wrapperOffset.top;u===!0&&(u=i.round(n.offsetWidth/2-this.wrapper.offsetWidth/2));f===!0&&(f=i.round(n.offsetHeight/2-this.wrapper.offsetHeight/2));o.left-=u||0;o.top-=f||0;o.left=o.left>0?0:o.left<this.maxScrollX?this.maxScrollX:o.left;o.top=o.top>0?0:o.top<this.maxScrollY?this.maxScrollY:o.top;t=t===undefined||t===null||t==="auto"?i.max(i.abs(this.x-o.left),i.abs(this.y-o.top)):t;this.scrollTo(o.left,o.top,t,e)}},_transitionTime:function(n){if(n=n||0,this.scrollerStyle[r.style.transitionDuration]=n+"ms",this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTime(n)},_transitionTimingFunction:function(n){if(this.scrollerStyle[r.style.transitionTimingFunction]=n,this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(n)},_translate:function(n,t){if(this.options.useTransform?this.scrollerStyle[r.style.transform]="translate("+n+"px,"+t+"px)"+this.translateZ:(n=i.round(n),t=i.round(t),this.scrollerStyle.left=n+"px",this.scrollerStyle.top=t+"px"),this.x=n,this.y=t,this.indicators)for(var u=this.indicators.length;u--;)this.indicators[u].updatePosition()},_initEvents:function(t){var i=t?r.removeEvent:r.addEvent,u=this.options.bindToWrapper?this.wrapper:n;i(n,"orientationchange",this);i(n,"resize",this);this.options.click&&i(this.wrapper,"click",this,!0);this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(u,"mousemove",this),i(u,"mousecancel",this),i(u,"mouseup",this));r.hasPointer&&!this.options.disablePointer&&(n.PointerEvent?(i(this.wrapper,"pointerdown",this),i(u,"pointermove",this),i(u,"pointercancel",this),i(u,"pointerup",this)):n.MSPointerEvent&&(i(this.wrapper,"MSPointerDown",this),i(u,"MSPointerMove",this),i(u,"MSPointerCancel",this),i(u,"MSPointerUp",this)));r.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(u,"touchmove",this),i(u,"touchcancel",this),i(u,"touchend",this));i(this.scroller,"transitionend",this);i(this.scroller,"webkitTransitionEnd",this);i(this.scroller,"oTransitionEnd",this);i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t=n.getComputedStyle(this.scroller,null),i,u;return this.options.useTransform?(t=t[r.style.transform].split(")")[0].split(", "),i=+(t[12]||t[4]),u=+(t[13]||t[5])):(i=+t.left.replace(/[^-\d]/g,""),u=+t.top.replace(/[^-\d]/g,"")),{x:i,y:u}},_initIndicators:function(){var i=this.options.interactiveScrollbars,o=typeof this.options.scrollbars!="object",u=typeof this.options.scrollbars!="string",n=[],t,r;for(this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:f("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:u,resize:this.options.resizeIndicator,listenX:!1},this.wrapper.appendChild(t.el),n.push(t)),this.options.scrollX&&(t={el:f("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:u,resize:this.options.resizeIndicator,listenY:!1},this.wrapper.appendChild(t.el),n.push(t))),this.options.indicators&&(n=n.concat(this.options.indicators)),r=n.length;r--;)this.indicators[r]=new e(this,n[r]);this.on("refresh",function(){if(this.indicators)for(var n=this.indicators.length;n--;)this.indicators[n].refresh()});this.on("destroy",function(){if(this.indicators)for(var n=this.indicators.length;n--;)this.indicators[n].destroy();delete this.indicators})},_initWheel:function(){r.addEvent(this.wrapper,"mousewheel",this);r.addEvent(this.wrapper,"DOMMouseScroll",this);this.on("destroy",function(){r.removeEvent(this.wrapper,"mousewheel",this);r.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(n){if(this.enabled){var f,t,r,u,e=this;if(clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){e._execEvent("scrollEnd")},400),"wheelDeltaX"in n)f=n.wheelDeltaX/120,t=n.wheelDeltaY/120;else if("wheelDelta"in n)f=t=n.wheelDelta/120,n.shiftKey?t=0:f=0;else if("detail"in n)f=t=-n.detail/3,n.shiftKey?t=0:f=0;else return;if(f*=this.options.mouseWheelSpeed,t*=this.options.mouseWheelSpeed,this.hasVerticalScroll||(f=t,t=0),this.options.snap){r=this.currentPage.pageX;u=this.currentPage.pageY;f>0?r--:f<0&&r++;t>0?u--:t<0&&u++;this.goToPage(r,u);return}r=this.x+i.round(this.hasHorizontalScroll?f*this.options.invertWheelDirection:0);u=this.y+i.round(this.hasVerticalScroll?t*this.options.invertWheelDirection:0);r>0?r=0:r<this.maxScrollX&&(r=this.maxScrollX);u>0?u=0:u<this.maxScrollY&&(u=this.maxScrollY);(r!==this.x||u!==this.y)&&n.preventDefault();this.scrollTo(r,u,0)}},_initSnap:function(){this.currentPage={};typeof this.options.snap=="string"&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap));this.on("refresh",function(){var n=0,f,e=0,h,o,s,r=0,u,c=this.options.snapStepX||this.wrapperWidth,l=this.options.snapStepY||this.wrapperHeight,t;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(o=i.round(c/2),s=i.round(l/2);r>-this.scrollerWidth;){for(this.pages[n]=[],f=0,u=0;u>-this.scrollerHeight;)this.pages[n][f]={x:i.max(r,this.maxScrollX),y:i.max(u,this.maxScrollY),width:c,height:l,cx:r-o,cy:u-s},u-=l,f++;r-=c;n++}else for(t=this.options.snap,f=t.length,h=-1;n<f;n++)(n===0||t[n].offsetLeft<=t[n-1].offsetLeft)&&(e=0,h++),this.pages[e]||(this.pages[e]=[]),r=i.max(-t[n].offsetLeft,this.maxScrollX),u=i.max(-t[n].offsetTop,this.maxScrollY),o=r-i.round(t[n].offsetWidth/2),s=u-i.round(t[n].offsetHeight/2),this.pages[e][h]={x:r,y:u,width:t[n].offsetWidth,height:t[n].offsetHeight,cx:o,cy:s},r>this.maxScrollX&&e++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0);this.options.snapThreshold%1==0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}});this.on("flick",function(){var n=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.x-this.startX),1e3),i.min(i.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,n)})},_nearestSnap:function(n,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var r=0,f=this.pages.length,u=0;if(i.abs(n-this.absStartX)<this.snapThresholdX&&i.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;for(n>0?n=0:n<this.maxScrollX&&(n=this.maxScrollX),t>0?t=0:t<this.maxScrollY&&(t=this.maxScrollY);r<f;r++)if(n>=this.pages[r][0].cx){n=this.pages[r][0].x;break}for(f=this.pages[r].length;u<f;u++)if(t>=this.pages[0][u].cy){t=this.pages[0][u].y;break}return r==this.currentPage.pageX&&(r+=this.directionX,r<0?r=0:r>=this.pages.length&&(r=this.pages.length-1),n=this.pages[r][0].x),u==this.currentPage.pageY&&(u+=this.directionY,u<0?u=0:u>=this.pages[0].length&&(u=this.pages[0].length-1),t=this.pages[0][u].y),{x:n,y:t,pageX:r,pageY:u}},goToPage:function(n,t,r,u){u=u||this.options.bounceEasing;n>=this.pages.length?n=this.pages.length-1:n<0&&(n=0);t>=this.pages[n].length?t=this.pages[n].length-1:t<0&&(t=0);var f=this.pages[n][t].x,e=this.pages[n][t].y;r=r===undefined?this.options.snapSpeed||i.max(i.max(i.min(i.abs(f-this.x),1e3),i.min(i.abs(e-this.y),1e3)),300):r;this.currentPage={x:f,y:e,pageX:n,pageY:t};this.scrollTo(f,e,r,u)},next:function(n,t){var i=this.currentPage.pageX,r=this.currentPage.pageY;i++;i>=this.pages.length&&this.hasVerticalScroll&&(i=0,r++);this.goToPage(i,r,n,t)},prev:function(n,t){var i=this.currentPage.pageX,r=this.currentPage.pageY;i--;i<0&&this.hasVerticalScroll&&(i=0,r--);this.goToPage(i,r,n,t)},_initKeys:function(){var i={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40},t;if(typeof this.options.keyBindings=="object")for(t in this.options.keyBindings)typeof this.options.keyBindings[t]=="string"&&(this.options.keyBindings[t]=this.options.keyBindings[t].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(t in i)this.options.keyBindings[t]=this.options.keyBindings[t]||i[t];r.addEvent(n,"keydown",this);this.on("destroy",function(){r.removeEvent(n,"keydown",this)})},_key:function(n){if(this.enabled){var t=this.options.snap,u=t?this.currentPage.pageX:this.x,f=t?this.currentPage.pageY:this.y,o=r.getTime(),s=this.keyTime||0,e;this.options.useTransition&&this.isInTransition&&(e=this.getComputedPosition(),this._translate(i.round(e.x),i.round(e.y)),this.isInTransition=!1);this.keyAcceleration=o-s<200?i.min(this.keyAcceleration+.25,50):0;switch(n.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?u+=t?1:this.wrapperWidth:f+=t?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?u-=t?1:this.wrapperWidth:f-=t?1:this.wrapperHeight;break;case this.options.keyBindings.end:u=t?this.pages.length-1:this.maxScrollX;f=t?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:u=0;f=0;break;case this.options.keyBindings.left:u+=t?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:f+=t?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:u-=t?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:f-=t?1:5+this.keyAcceleration>>0;break;default:return}if(t){this.goToPage(u,f);return}u>0?(u=0,this.keyAcceleration=0):u<this.maxScrollX&&(u=this.maxScrollX,this.keyAcceleration=0);f>0?(f=0,this.keyAcceleration=0):f<this.maxScrollY&&(f=this.maxScrollY,this.keyAcceleration=0);this.scrollTo(u,f,0);this.keyTime=o}},_animate:function(n,t,i,u){function c(){var a=r.getTime(),y,p,v;if(a>=l){f.isAnimating=!1;f._translate(n,t);f.resetPosition(f.options.bounceTime)||f._execEvent("scrollEnd");return}a=(a-h)/i;v=u(a);y=(n-e)*v+e;p=(t-s)*v+s;f._translate(y,p);f.isAnimating&&o(c)}var f=this,e=this.x,s=this.y,h=r.getTime(),l=h+i;this.isAnimating=!0;c()},handleEvent:function(n){if(n.type!="MSPointerDown"&&n.type!="MSPointerMove"&&n.type!="MSPointerCancel"&&n.type!="MSPointerUp"&&n.type!="pointerdown"&&n.type!="pointermove"&&n.type!="pointercancel"&&n.type!="pointerup"||n.pointerType!="mouse"&&n.pointerType!=4)switch(n.type){case"touchstart":case"MSPointerDown":case"pointerdown":case"mousedown":this._start(n);break;case"touchmove":case"MSPointerMove":case"pointermove":case"mousemove":this._move(n);break;case"touchend":case"MSPointerUp":case"pointerup":case"mouseup":case"touchcancel":case"MSPointerCancel":case"pointercancel":case"mousecancel":this._end(n);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(n);break;case"DOMMouseScroll":case"mousewheel":this._wheel(n);break;case"keydown":this._key(n);break;case"click":n._constructed||(n.preventDefault(),n.stopPropagation())}}},e.prototype={handleEvent:function(n){switch(n.type){case"touchstart":case"MSPointerDown":case"pointerdown":case"mousedown":this._start(n);break;case"touchmove":case"MSPointerMove":case"pointermove":case"mousemove":this._move(n);break;case"touchend":case"MSPointerUp":case"pointerup":case"mouseup":case"touchcancel":case"MSPointerCancel":case"pointercancel":case"mousecancel":this._end(n)}},destroy:function(){this.options.interactive&&(r.removeEvent(this.indicator,"touchstart",this),r.removeEvent(this.indicator,"MSPointerDown",this),r.removeEvent(this.indicator,"pointerdown",this),r.removeEvent(this.indicator,"mousedown",this),r.removeEvent(n,"touchmove",this),r.removeEvent(n,"MSPointerMove",this),r.removeEvent(n,"pointermove",this),r.removeEvent(n,"mousemove",this),r.removeEvent(n,"touchend",this),r.removeEvent(n,"MSPointerUp",this),r.removeEvent(n,"pointerup",this),r.removeEvent(n,"mouseup",this));this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(t){var i=t.touches?t.touches[0]:t;t.preventDefault();t.stopPropagation();this.transitionTime(0);this.initiated=!0;this.moved=!1;this.lastPointX=i.pageX;this.lastPointY=i.pageY;this.startTime=r.getTime();this.options.disableTouch||r.addEvent(n,"touchmove",this);this.options.disablePointer||(n.PointerEvent?r.addEvent(n,"pointermove",this):n.MSPointerEvent&&r.addEvent(n,"MSPointerMove",this));this.options.disableMouse||r.addEvent(n,"mousemove",this);this.scroller._execEvent("beforeScrollStart")},_move:function(n){var t=n.touches?n.touches[0]:n,i,u,f,e,o=r.getTime();this.moved||this.scroller._execEvent("scrollStart");this.moved=!0;i=t.pageX-this.lastPointX;this.lastPointX=t.pageX;u=t.pageY-this.lastPointY;this.lastPointY=t.pageY;f=this.x+i;e=this.y+u;this._pos(f,e);n.preventDefault();n.stopPropagation()},_end:function(t){if(this.initiated){if(this.initiated=!1,t.preventDefault(),t.stopPropagation(),r.removeEvent(n,"touchmove",this),r.removeEvent(n,"MSPointerMove",this),r.removeEvent(n,"pointermove",this),r.removeEvent(n,"mousemove",this),this.scroller.options.snap){var u=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),f=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.scroller.x-u.x),1e3),i.min(i.abs(this.scroller.y-u.y),1e3)),300);(this.scroller.x!=u.x||this.scroller.y!=u.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=u,this.scroller.scrollTo(u.x,u.y,f,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(n){n=n||0;this.indicatorStyle[r.style.transitionDuration]=n+"ms"},transitionTimingFunction:function(n){this.indicatorStyle[r.style.transitionTimingFunction]=n},refresh:function(){this.transitionTime(0);this.indicatorStyle.display=this.options.listenX&&!this.options.listenY?this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.scroller.hasVerticalScroll?"block":"none":this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none";this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(r.addClass(this.wrapper,"iScrollBothScrollbars"),r.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(r.removeClass(this.wrapper,"iScrollBothScrollbars"),r.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));var n=this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=i.max(i.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX);this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=i.max(i.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY);this.updatePosition()},updatePosition:function(){var n=i.round(this.sizeRatioX*this.scroller.x)||0,t=i.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(n<0?n=0:n>this.maxPosX&&(n=this.maxPosX),t<0?t=0:t>this.maxPosY&&(t=this.maxPosY));this.x=n;this.y=t;this.scroller.options.useTransform?this.indicatorStyle[r.style.transform]="translate("+n+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=n+"px",this.indicatorStyle.top=t+"px")},_pos:function(n,t){n<0?n=0:n>this.maxPosX&&(n=this.maxPosX);t<0?t=0:t>this.maxPosY&&(t=this.maxPosY);n=this.options.listenX?i.round(n/this.sizeRatioX):this.scroller.x;t=this.options.listenY?i.round(t/this.sizeRatioY):this.scroller.y;this.scroller.scrollTo(n,t)}},u.ease=r.ease,u}(window,document,Math);
/** @license React v16.4.1
 * react.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict';(function(p,h){"object"===typeof exports&&"undefined"!==typeof module?module.exports=h():"function"===typeof define&&define.amd?define(h):p.React=h()})(this,function(){function p(a){for(var b=arguments.length-1,f="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=0;d<b;d++)f+="&args[]="+encodeURIComponent(arguments[d+1]);O(!1,"Minified React error #"+a+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",f)}function h(a){return function(){return a}}function q(a,b,f){this.props=a;this.context=b;this.refs=D;this.updater=f||E}function F(){}function v(a,b,f){this.props=a;this.context=b;this.refs=D;this.updater=f||E}function G(a,b,f){var d=void 0,e={},k=null,c=null;if(null!=b)for(d in void 0!==b.ref&&(c=b.ref),void 0!==b.key&&(k=""+b.key),b)H.call(b,d)&&!I.hasOwnProperty(d)&&(e[d]=b[d]);var g=arguments.length-2;if(1===g)e.children=f;else if(1<g){for(var m=Array(g),l=0;l<g;l++)m[l]=arguments[l+2];e.children=m}if(a&&a.defaultProps)for(d in g=a.defaultProps,g)void 0===e[d]&&(e[d]=g[d]);return{$$typeof:r,type:a,key:k,ref:c,props:e,_owner:w.current}}function x(a){return"object"===typeof a&&null!==a&&a.$$typeof===r}function P(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}function J(a,b,f,d){if(u.length){var e=u.pop();e.result=a;e.keyPrefix=b;e.func=f;e.context=d;e.count=0;return e}return{result:a,keyPrefix:b,func:f,context:d,count:0}}function K(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>u.length&&u.push(a)}function t(a,b,f,d){var e=typeof a;if("undefined"===e||"boolean"===e)a=null;var k=!1;if(null===a)k=!0;else switch(e){case"string":case"number":k=!0;break;case"object":switch(a.$$typeof){case r:case Q:k=!0}}if(k)return f(d,a,""===b?"."+y(a,0):b),1;k=0;b=""===b?".":b+":";if(Array.isArray(a))for(var c=0;c<a.length;c++){e=a[c];var g=b+y(e,c);k+=t(e,g,f,d)}else if(null===a||"undefined"===typeof a?g=null:(g=L&&a[L]||a["@@iterator"],g="function"===typeof g?g:null),"function"===typeof g)for(a=g.call(a),c=0;!(e=a.next()).done;)e=e.value,g=b+y(e,c++),k+=t(e,g,f,d);else"object"===e&&(f=""+a,p("31","[object Object]"===f?"object with keys {"+Object.keys(a).join(", ")+"}":f,""));return k}function y(a,b){return"object"===typeof a&&null!==a&&null!=a.key?P(a.key):b.toString(36)}function R(a,b,f){a.func.call(a.context,b,a.count++)}function S(a,b,f){var d=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?z(a,d,f,A.thatReturnsArgument):null!=a&&(x(a)&&(b=e+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(M,"$&/")+"/")+f,a={$$typeof:r,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}),d.push(a))}function z(a,b,f,d,e){var c="";null!=f&&(c=(""+f).replace(M,"$&/")+"/");b=J(b,c,d,e);null==a||t(a,"",S,b);K(b)}var N=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,B=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var f={};"abcdefghijklmnopqrst".split("").forEach(function(a){f[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},f)).join("")?!1:!0}catch(d){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var f=Object(a);for(var d,e=1;e<arguments.length;e++){var c=Object(arguments[e]);for(var h in c)T.call(c,h)&&(f[h]=c[h]);if(N){d=N(c);for(var g=0;g<d.length;g++)U.call(c,d[g])&&(f[d[g]]=c[d[g]])}}return f},c="function"===typeof Symbol&&Symbol.for,r=c?Symbol.for("react.element"):60103,Q=c?Symbol.for("react.portal"):60106,n=c?Symbol.for("react.fragment"):60107,C=c?Symbol.for("react.strict_mode"):60108,V=c?Symbol.for("react.profiler"):60114,W=c?Symbol.for("react.provider"):60109,X=c?Symbol.for("react.context"):60110,Y=c?Symbol.for("react.async_mode"):60111,Z=c?Symbol.for("react.forward_ref"):60112;c&&Symbol.for("react.timeout");var L="function"===typeof Symbol&&Symbol.iterator,O=function(a,b,f,d,c,k,h,g){if(!a){if(void 0===b)a=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var e=[f,d,c,k,h,g],l=0;a=Error(b.replace(/%s/g,function(){return e[l++]}));a.name="Invariant Violation"}a.framesToPop=1;throw a}},D={};c=function(){};c.thatReturns=h;c.thatReturnsFalse=h(!1);c.thatReturnsTrue=h(!0);c.thatReturnsNull=h(null);c.thatReturnsThis=function(){return this};c.thatReturnsArgument=function(a){return a};var A=c,E={isMounted:function(a){return!1},enqueueForceUpdate:function(a,b,c){},enqueueReplaceState:function(a,b,c,d){},enqueueSetState:function(a,b,c,d){}};q.prototype.isReactComponent={};q.prototype.setState=function(a,b){"object"!==typeof a&&"function"!==typeof a&&null!=a?p("85"):void 0;this.updater.enqueueSetState(this,a,b,"setState")};q.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};F.prototype=q.prototype;c=v.prototype=new F;c.constructor=v;B(c,q.prototype);c.isPureReactComponent=!0;var w={current:null},H=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0},M=/\/+/g,u=[];n={Children:{map:function(a,b,c){if(null==a)return a;var d=[];z(a,d,null,b,c);return d},forEach:function(a,b,c){if(null==a)return a;b=J(null,null,b,c);null==a||t(a,"",R,b);K(b)},count:function(a){return null==a?0:t(a,"",A.thatReturnsNull,null)},toArray:function(a){var b=[];z(a,b,null,A.thatReturnsArgument);return b},only:function(a){x(a)?void 0:p("143");return a}},createRef:function(){return{current:null}},Component:q,PureComponent:v,createContext:function(a,b){void 0===b&&(b=null);a={$$typeof:X,_calculateChangedBits:b,_defaultValue:a,_currentValue:a,_currentValue2:a,_changedBits:0,_changedBits2:0,Provider:null,Consumer:null};a.Provider={$$typeof:W,_context:a};return a.Consumer=a},forwardRef:function(a){return{$$typeof:Z,render:a}},Fragment:n,StrictMode:C,unstable_AsyncMode:Y,unstable_Profiler:V,createElement:G,cloneElement:function(a,b,c){null===a||void 0===a?p("267",a):void 0;var d=void 0,e=B({},a.props),f=a.key,h=a.ref,g=a._owner;if(null!=b){void 0!==b.ref&&(h=b.ref,g=w.current);void 0!==b.key&&(f=""+b.key);var m=void 0;a.type&&a.type.defaultProps&&(m=a.type.defaultProps);for(d in b)H.call(b,d)&&!I.hasOwnProperty(d)&&(e[d]=void 0===b[d]&&void 0!==m?m[d]:b[d])}d=arguments.length-2;if(1===d)e.children=c;else if(1<d){m=Array(d);for(var l=0;l<d;l++)m[l]=arguments[l+2];e.children=m}return{$$typeof:r,type:a.type,key:f,ref:h,props:e,_owner:g}},createFactory:function(a){var b=G.bind(null,a);b.type=a;return b},isValidElement:x,version:"16.4.1",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:w,assign:B}};n=(C={default:n},n)||C;return n.default?n.default:n});
/** @license React v16.4.1
 * react-dom.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict';(function(ma,m){"object"===typeof exports&&"undefined"!==typeof module?module.exports=m(require("react")):"function"===typeof define&&define.amd?define(["react"],m):ma.ReactDOM=m(ma.React)})(this,function(ma){function m(a){for(var b=arguments.length-1,c="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=0;d<b;d++)c+="&args[]="+encodeURIComponent(arguments[d+1]);Sg(!1,"Minified React error #"+a+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",c)}function Sd(){if(Eb)for(var a in ua){var b=ua[a],c=Eb.indexOf(a);-1<c?void 0:m("96",a);if(!Ua[c]){b.extractEvents?void 0:m("97",a);Ua[c]=b;c=b.eventTypes;for(var d in c){var e=void 0;var f=c[d],g=b,h=d;vc.hasOwnProperty(h)?m("99",h):void 0;vc[h]=f;var k=f.phasedRegistrationNames;if(k){for(e in k)k.hasOwnProperty(e)&&Td(k[e],g,h);e=!0}else f.registrationName?(Td(f.registrationName,g,h),e=!0):e=!1;e?void 0:m("98",d,a)}}}}function Td(a,b,c){na[a]?m("100",a):void 0;na[a]=b;Fb[a]=b.eventTypes[c].dependencies}function Ud(a){Eb?m("101"):void 0;Eb=Array.prototype.slice.call(a);Sd()}function Vd(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];ua.hasOwnProperty(c)&&ua[c]===d||(ua[c]?m("102",c):void 0,ua[c]=d,b=!0)}b&&Sd()}function Gb(a){return function(){return a}}function Wd(a,b,c,d){b=a.type||"unknown-event";a.currentTarget=Xd(d);r.invokeGuardedCallbackAndCatchFirstError(b,c,void 0,a);a.currentTarget=null}function va(a,b){null==b?m("30"):void 0;if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function Va(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}function wc(a,b){var c=a.stateNode;if(!c)return null;var d=xc(c);if(!d)return null;c=d[b];a:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(d=!d.disabled)||(a=a.type,d=!("button"===a||"input"===a||"select"===a||"textarea"===a));a=!d;break a;default:a=!1}if(a)return null;c&&"function"!==typeof c?m("231",b,typeof c):void 0;return c}function yc(a,b){null!==a&&(Wa=va(Wa,a));a=Wa;Wa=null;a&&(b?Va(a,Tg):Va(a,Ug),Wa?m("95"):void 0,r.rethrowCaughtError())}function Yd(a,b,c,d){for(var e=null,f=0;f<Ua.length;f++){var g=Ua[f];g&&(g=g.extractEvents(a,b,c,d))&&(e=va(e,g))}yc(e,!1)}function Zd(a,b){b[wa]=a}function Xa(a){if(a[wa])return a[wa];for(;!a[wa];)if(a.parentNode)a=a.parentNode;else return null;a=a[wa];return 5===a.tag||6===a.tag?a:null}function xa(a){if(5===a.tag||6===a.tag)return a.stateNode;m("33")}function $d(a){return a[ae]||null}function be(a,b){a[ae]=b}function S(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}function ce(a,b,c){for(var d=[];a;)d.push(a),a=S(a);for(a=d.length;0<a--;)b(d[a],"captured",c);for(a=0;a<d.length;a++)b(d[a],"bubbled",c)}function de(a,b,c){if(b=wc(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=va(c._dispatchListeners,b),c._dispatchInstances=va(c._dispatchInstances,a)}function Vg(a){a&&a.dispatchConfig.phasedRegistrationNames&&ce(a._targetInst,de,a)}function Wg(a){if(a&&a.dispatchConfig.phasedRegistrationNames){var b=a._targetInst;b=b?S(b):null;ce(b,de,a)}}function zc(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=wc(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=va(c._dispatchListeners,b),c._dispatchInstances=va(c._dispatchInstances,a))}function Xg(a){a&&a.dispatchConfig.registrationName&&zc(a._targetInst,null,a)}function ya(a){Va(a,Vg)}function ee(a,b,c,d){if(c&&d)a:{var e=c;for(var f=d,g=0,h=e;h;h=S(h))g++;h=0;for(var k=f;k;k=S(k))h++;for(;0<g-h;)e=S(e),g--;for(;0<h-g;)f=S(f),h--;for(;g--;){if(e===f||e===f.alternate)break a;e=S(e);f=S(f)}e=null}else e=null;f=e;for(e=[];c&&c!==f;){g=c.alternate;if(null!==g&&g===f)break;e.push(c);c=S(c)}for(c=[];d&&d!==f;){g=d.alternate;if(null!==g&&g===f)break;c.push(d);d=S(d)}for(d=0;d<e.length;d++)zc(e[d],"bubbled",a);for(a=c.length;0<a--;)zc(c[a],"captured",b)}function Hb(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;c["ms"+a]="MS"+b;c["O"+a]="o"+b.toLowerCase();return c}function Ib(a){if(Ac[a])return Ac[a];if(!za[a])return a;var b=za[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in fe)return Ac[a]=b[c];return a}function ge(){!Bc&&T.canUseDOM&&(Bc="textContent"in document.documentElement?"textContent":"innerText");return Bc}function he(){if(z._fallbackText)return z._fallbackText;var a,b=z._startText,c=b.length,d,e=ie(),f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);z._fallbackText=e.slice(a,1<d?1-d:void 0);return z._fallbackText}function ie(){return"value"in z._root?z._root.value:z._root[ge()]}function L(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?M.thatReturnsTrue:M.thatReturnsFalse;this.isPropagationStopped=M.thatReturnsFalse;return this}function Yg(a,b,c,d){if(this.eventPool.length){var e=this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}function Zg(a){a instanceof this?void 0:m("223");a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function je(a){a.eventPool=[];a.getPooled=Yg;a.release=Zg}function ke(a,b){switch(a){case"keyup":return-1!==$g.indexOf(b.keyCode);case"keydown":return 229!==b.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function le(a){a=a.detail;return"object"===typeof a&&"data"in a?a.data:null}function ah(a,b){switch(a){case"compositionend":return le(b);case"keypress":if(32!==b.which)return null;me=!0;return ne;case"textInput":return a=b.data,a===ne&&me?null:a;default:return null}}function bh(a,b){if(Aa)return"compositionend"===a||!Cc&&ke(a,b)?(a=he(),z._root=null,z._startText=null,z._fallbackText=null,Aa=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return oe?null:b.data;default:return null}}function pe(a){if(a=qe(a)){Jb&&"function"===typeof Jb.restoreControlledState?void 0:m("194");var b=xc(a.stateNode);Jb.restoreControlledState(a.stateNode,a.type,b)}}function re(a){Ba?Ca?Ca.push(a):Ca=[a]:Ba=a}function se(){return null!==Ba||null!==Ca}function te(){if(Ba){var a=Ba,b=Ca;Ca=Ba=null;pe(a);if(b)for(a=0;a<b.length;a++)pe(b[a])}}function ue(a,b){if(Dc)return a(b);Dc=!0;try{return ve(a,b)}finally{Dc=!1,se()&&(we(),te())}}function xe(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!ch[a.type]:"textarea"===b?!0:!1}function Ec(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}function ye(a,b){if(!T.canUseDOM||b&&!("addEventListener"in document))return!1;a="on"+a;b=a in document;b||(b=document.createElement("div"),b.setAttribute(a,"return;"),b="function"===typeof b[a]);return b}function ze(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function dh(a){var b=ze(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null;delete a[b]}}}}function Kb(a){a._valueTracker||(a._valueTracker=dh(a))}function Ae(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d="";a&&(d=ze(a)?a.checked?"true":"false":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Ya(a){if(null===a||"undefined"===typeof a)return null;a=Be&&a[Be]||a["@@iterator"];return"function"===typeof a?a:null}function Za(a){var b=a.type;if("function"===typeof b)return b.displayName||b.name;if("string"===typeof b)return b;switch(b){case Ce:return"AsyncMode";case De:return"Context.Consumer";case ea:return"ReactFragment";case Da:return"ReactPortal";case Fc:return"Profiler("+a.pendingProps.id+")";case Ee:return"Context.Provider";case Fe:return"StrictMode";case Ge:return"Timeout"}if("object"===typeof b&&null!==b)switch(b.$$typeof){case He:return a=b.render.displayName||b.render.name||"",""!==a?"ForwardRef("+a+")":"ForwardRef"}return null}function Ie(a){var b="";do{a:switch(a.tag){case 0:case 1:case 2:case 5:var c=a._debugOwner,d=a._debugSource;var e=Za(a);var f=null;c&&(f=Za(c));c=d;e="\n    in "+(e||"Unknown")+(c?" (at "+c.fileName.replace(/^.*[\\\/]/,"")+":"+c.lineNumber+")":f?" (created by "+f+")":"");break a;default:e=""}b+=e;a=a.return}while(a);return b}function eh(a){if(Je.hasOwnProperty(a))return!0;if(Ke.hasOwnProperty(a))return!1;if(fh.test(a))return Je[a]=!0;Ke[a]=!0;return!1}function gh(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case"function":case"symbol":return!0;case"boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return"data-"!==a&&"aria-"!==a;default:return!1}}function hh(a,b,c,d){if(null===b||"undefined"===typeof b||gh(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function N(a,b,c,d,e){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b}function Gc(a,b,c,d){var e=u.hasOwnProperty(b)?u[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||"o"!==b[0]&&"O"!==b[0]||"n"!==b[1]&&"N"!==b[1]?!1:!0;f||(hh(b,c,e,d)&&(c=null),d||null===e?eh(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:"":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function Hc(a,b){var c=b.checked;return G({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Le(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Ic(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function Me(a,b){b=b.checked;null!=b&&Gc(a,"checked",b,!1)}function Jc(a,b){Me(a,b);var c=Ic(b.value);if(null!=c)if("number"===b.type){if(0===c&&""===a.value||a.value!=c)a.value=""+c}else a.value!==""+c&&(a.value=""+c);b.hasOwnProperty("value")?Kc(a,b.type,c):b.hasOwnProperty("defaultValue")&&Kc(a,b.type,Ic(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Ne(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){b=""+a._wrapperState.initialValue;var d=a.value;c||b===d||(a.value=b);a.defaultValue=b}c=a.name;""!==c&&(a.name="");a.defaultChecked=!a.defaultChecked;a.defaultChecked=!a.defaultChecked;""!==c&&(a.name=c)}function Kc(a,b,c){if("number"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c)}function Ic(a){switch(typeof a){case"boolean":case"number":case"object":case"string":case"undefined":return a;default:return""}}function Oe(a,b,c){a=L.getPooled(Pe.change,a,b,c);a.type="change";re(c);ya(a);return a}function ih(a){yc(a,!1)}function Lb(a){var b=xa(a);if(Ae(b))return a}function jh(a,b){if("change"===a)return b}function Qe(){$a&&($a.detachEvent("onpropertychange",Re),ab=$a=null)}function Re(a){"value"===a.propertyName&&Lb(ab)&&(a=Oe(ab,a,Ec(a)),ue(ih,a))}function kh(a,b,c){"focus"===a?(Qe(),$a=b,ab=c,$a.attachEvent("onpropertychange",Re)):"blur"===a&&Qe()}function lh(a,b){if("selectionchange"===a||"keyup"===a||"keydown"===a)return Lb(ab)}function mh(a,b){if("click"===a)return Lb(b)}function nh(a,b){if("input"===a||"change"===a)return Lb(b)}function oh(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=ph[a])?!!b[a]:!1}function Lc(a){return oh}function Se(a,b){return a===b?0!==a||0!==b||1/a===1/b:a!==a&&b!==b}function bb(a){var b=a;if(a.alternate)for(;b.return;)b=b.return;else{if(0!==(b.effectTag&2))return 1;for(;b.return;)if(b=b.return,0!==(b.effectTag&2))return 1}return 3===b.tag?2:3}function Te(a){2!==bb(a)?m("188"):void 0}function Ue(a){var b=a.alternate;if(!b)return b=bb(a),3===b?m("188"):void 0,1===b?null:a;for(var c=a,d=b;;){var e=c.return,f=e?e.alternate:null;if(!e||!f)break;if(e.child===f.child){for(var g=e.child;g;){if(g===c)return Te(e),a;if(g===d)return Te(e),b;g=g.sibling}m("188")}if(c.return!==d.return)c=e,d=f;else{g=!1;for(var h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}g?void 0:m("189")}}c.alternate!==d?m("190"):void 0}3!==c.tag?m("188"):void 0;return c.stateNode.current===c?a:b}function Ve(a){a=Ue(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}function qh(a){a=Ue(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child&&4!==b.tag)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}function Mb(a){var b=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function We(a,b){var c=a[0];a=a[1];var d="on"+(a[0].toUpperCase()+a.slice(1));b={phasedRegistrationNames:{bubbled:d,captured:d+"Capture"},dependencies:[c],isInteractive:b};Xe[a]=b;Mc[c]=b}function rh(a){var b=a.targetInst;do{if(!b){a.ancestors.push(b);break}var c;for(c=b;c.return;)c=c.return;c=3!==c.tag?null:c.stateNode.containerInfo;if(!c)break;a.ancestors.push(b);b=Xa(c)}while(b);for(c=0;c<a.ancestors.length;c++)b=a.ancestors[c],Yd(a.topLevelType,b,a.nativeEvent,Ec(a.nativeEvent))}function Nc(a){cb=!!a}function p(a,b){if(!b)return null;var c=(Ye(a)?Ze:Nb).bind(null,a);b.addEventListener(a,c,!1)}function db(a,b){if(!b)return null;var c=(Ye(a)?Ze:Nb).bind(null,a);b.addEventListener(a,c,!0)}function Ze(a,b){$e(Nb,a,b)}function Nb(a,b){if(cb){var c=Ec(b);c=Xa(c);null===c||"number"!==typeof c.tag||2===bb(c)||(c=null);if(Ob.length){var d=Ob.pop();d.topLevelType=a;d.nativeEvent=b;d.targetInst=c;a=d}else a={topLevelType:a,nativeEvent:b,targetInst:c,ancestors:[]};try{ue(rh,a)}finally{a.topLevelType=null,a.nativeEvent=null,a.targetInst=null,a.ancestors.length=0,10>Ob.length&&Ob.push(a)}}}function af(a){Object.prototype.hasOwnProperty.call(a,Pb)||(a[Pb]=sh++,bf[a[Pb]]={});return bf[a[Pb]]}function cf(a,b){return a&&b?a===b?!0:df(a)?!1:df(b)?cf(a,b.parentNode):"contains"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}function ef(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ff(a,b){var c=ef(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=ef(c)}}function Oc(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}function gf(a,b){if(Pc||null==Ea||Ea!==Qc())return null;var c=Ea;"selectionStart"in c&&Oc(c)?c={start:c.selectionStart,end:c.selectionEnd}:window.getSelection?(c=window.getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}):c=void 0;return eb&&Rc(eb,c)?null:(eb=c,a=L.getPooled(hf.select,Sc,a,b),a.type="select",a.target=Ea,ya(a),a)}function th(a){var b="";ma.Children.forEach(a,function(a){null==a||"string"!==typeof a&&"number"!==typeof a||(b+=a)});return b}function Tc(a,b){a=G({children:void 0},b);if(b=th(b.children))a.children=b;return a}function Fa(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=""+c;b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function jf(a,b){var c=b.value;a._wrapperState={initialValue:null!=c?c:b.defaultValue,wasMultiple:!!b.multiple}}function Uc(a,b){null!=b.dangerouslySetInnerHTML?m("91"):void 0;return G({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function kf(a,b){var c=b.value;null==c&&(c=b.defaultValue,b=b.children,null!=b&&(null!=c?m("92"):void 0,Array.isArray(b)&&(1>=b.length?void 0:m("93"),b=b[0]),c=""+b),null==c&&(c=""));a._wrapperState={initialValue:""+c}}function lf(a,b){var c=b.value;null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&(a.defaultValue=c));null!=b.defaultValue&&(a.defaultValue=b.defaultValue)}function mf(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vc(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?mf(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}function nf(a,b,c){a=a.style;for(var d in b)if(b.hasOwnProperty(d)){c=0===d.indexOf("--");var e=d;var f=b[d];e=null==f||"boolean"===typeof f||""===f?"":c||"number"!==typeof f||0===f||fb.hasOwnProperty(e)&&fb[e]?(""+f).trim():f+"px";"float"===d&&(d="cssFloat");c?a.setProperty(d,e):a[d]=e}}function Wc(a,b,c){b&&(uh[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML?m("137",a,c()):void 0),null!=b.dangerouslySetInnerHTML&&(null!=b.children?m("60"):void 0,"object"===typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML?void 0:m("61")),null!=b.style&&"object"!==typeof b.style?m("62",c()):void 0)}function Xc(a,b){if(-1===a.indexOf("-"))return"string"===typeof b.is;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function W(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=af(a);b=Fb[b];for(var d=0;d<b.length;d++){var e=b[d];if(!c.hasOwnProperty(e)||!c[e]){switch(e){case"scroll":db("scroll",a);break;case"focus":case"blur":db("focus",a);db("blur",a);c.blur=!0;c.focus=!0;break;case"cancel":case"close":ye(e,!0)&&db(e,a);break;case"invalid":case"submit":case"reset":break;default:-1===gb.indexOf(e)&&p(e,a)}c[e]=!0}}}function of(a,b,c,d){c=9===c.nodeType?c:c.ownerDocument;"http://www.w3.org/1999/xhtml"===d&&(d=mf(a));"http://www.w3.org/1999/xhtml"===d?"script"===a?(a=c.createElement("div"),a.innerHTML="<script>\x3c/script>",a=a.removeChild(a.firstChild)):a="string"===typeof b.is?c.createElement(a,{is:b.is}):c.createElement(a):a=c.createElementNS(d,a);return a}function pf(a,b){return(9===b.nodeType?b:b.ownerDocument).createTextNode(a)}function qf(a,b,c,d){var e=Xc(b,c);switch(b){case"iframe":case"object":p("load",a);var f=c;break;case"video":case"audio":for(f=0;f<gb.length;f++)p(gb[f],a);f=c;break;case"source":p("error",a);f=c;break;case"img":case"image":case"link":p("error",a);p("load",a);f=c;break;case"form":p("reset",a);p("submit",a);f=c;break;case"details":p("toggle",a);f=c;break;case"input":Le(a,c);f=Hc(a,c);p("invalid",a);W(d,"onChange");break;case"option":f=Tc(a,c);break;case"select":jf(a,c);f=G({},c,{value:void 0});p("invalid",a);W(d,"onChange");break;case"textarea":kf(a,c);f=Uc(a,c);p("invalid",a);W(d,"onChange");break;default:f=c}Wc(b,f,hb);var g=f,h;for(h in g)if(g.hasOwnProperty(h)){var k=g[h];"style"===h?nf(a,k,hb):"dangerouslySetInnerHTML"===h?(k=k?k.__html:void 0,null!=k&&rf(a,k)):"children"===h?"string"===typeof k?("textarea"!==b||""!==k)&&ib(a,k):"number"===typeof k&&ib(a,""+k):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(na.hasOwnProperty(h)?null!=k&&W(d,h):null!=k&&Gc(a,h,k,e))}switch(b){case"input":Kb(a);Ne(a,c,!1);break;case"textarea":Kb(a);c=a.textContent;c===a._wrapperState.initialValue&&(a.value=c);break;case"option":null!=c.value&&a.setAttribute("value",c.value);break;case"select":a.multiple=!!c.multiple;b=c.value;null!=b?Fa(a,!!c.multiple,b,!1):null!=c.defaultValue&&Fa(a,!!c.multiple,c.defaultValue,!0);break;default:"function"===typeof f.onClick&&(a.onclick=M)}}function sf(a,b,c,d,e){var f=null;switch(b){case"input":c=Hc(a,c);d=Hc(a,d);f=[];break;case"option":c=Tc(a,c);d=Tc(a,d);f=[];break;case"select":c=G({},c,{value:void 0});d=G({},d,{value:void 0});f=[];break;case"textarea":c=Uc(a,c);d=Uc(a,d);f=[];break;default:"function"!==typeof c.onClick&&"function"===typeof d.onClick&&(a.onclick=M)}Wc(b,d,hb);b=a=void 0;var g=null;for(a in c)if(!d.hasOwnProperty(a)&&c.hasOwnProperty(a)&&null!=c[a])if("style"===a){var h=c[a];for(b in h)h.hasOwnProperty(b)&&(g||(g={}),g[b]="")}else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(na.hasOwnProperty(a)?f||(f=[]):(f=f||[]).push(a,null));for(a in d){var k=d[a];h=null!=c?c[a]:void 0;if(d.hasOwnProperty(a)&&k!==h&&(null!=k||null!=h))if("style"===a)if(h){for(b in h)!h.hasOwnProperty(b)||k&&k.hasOwnProperty(b)||(g||(g={}),g[b]="");for(b in k)k.hasOwnProperty(b)&&h[b]!==k[b]&&(g||(g={}),g[b]=k[b])}else g||(f||(f=[]),f.push(a,g)),g=k;else"dangerouslySetInnerHTML"===a?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(a,""+k)):"children"===a?h===k||"string"!==typeof k&&"number"!==typeof k||(f=f||[]).push(a,""+k):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(na.hasOwnProperty(a)?(null!=k&&W(e,a),f||h===k||(f=[])):(f=f||[]).push(a,k))}g&&(f=f||[]).push("style",g);return f}function tf(a,b,c,d,e){"input"===c&&"radio"===e.type&&null!=e.name&&Me(a,e);Xc(c,d);d=Xc(c,e);for(var f=0;f<b.length;f+=2){var g=b[f],h=b[f+1];"style"===g?nf(a,h,hb):"dangerouslySetInnerHTML"===g?rf(a,h):"children"===g?ib(a,h):Gc(a,g,h,d)}switch(c){case"input":Jc(a,e);break;case"textarea":lf(a,e);break;case"select":a._wrapperState.initialValue=void 0,b=a._wrapperState.wasMultiple,a._wrapperState.wasMultiple=!!e.multiple,c=e.value,null!=c?Fa(a,!!e.multiple,c,!1):b!==!!e.multiple&&(null!=e.defaultValue?Fa(a,!!e.multiple,e.defaultValue,!0):Fa(a,!!e.multiple,e.multiple?[]:"",!1))}}function uf(a,b,c,d,e){switch(b){case"iframe":case"object":p("load",a);break;case"video":case"audio":for(d=0;d<gb.length;d++)p(gb[d],a);break;case"source":p("error",a);break;case"img":case"image":case"link":p("error",a);p("load",a);break;case"form":p("reset",a);p("submit",a);break;case"details":p("toggle",a);break;case"input":Le(a,c);p("invalid",a);W(e,"onChange");break;case"select":jf(a,c);p("invalid",a);W(e,"onChange");break;case"textarea":kf(a,c),p("invalid",a),W(e,"onChange")}Wc(b,c,hb);d=null;for(var f in c)if(c.hasOwnProperty(f)){var g=c[f];"children"===f?"string"===typeof g?a.textContent!==g&&(d=["children",g]):"number"===typeof g&&a.textContent!==""+g&&(d=["children",""+g]):na.hasOwnProperty(f)&&null!=g&&W(e,f)}switch(b){case"input":Kb(a);Ne(a,c,!0);break;case"textarea":Kb(a);b=a.textContent;b===a._wrapperState.initialValue&&(a.value=b);break;case"select":case"option":break;default:"function"===typeof c.onClick&&(a.onclick=M)}return d}function vf(a,b){return a.nodeValue!==b}function wf(a,b){switch(a){case"button":case"input":case"select":case"textarea":return!!b.autoFocus}return!1}function Yc(a,b){return"textarea"===a||"string"===typeof b.children||"number"===typeof b.children||"object"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&"string"===typeof b.dangerouslySetInnerHTML.__html}function Zc(a){for(a=a.nextSibling;a&&1!==a.nodeType&&3!==a.nodeType;)a=a.nextSibling;return a}function xf(a){for(a=a.firstChild;a&&1!==a.nodeType&&3!==a.nodeType;)a=a.nextSibling;return a}function fa(a){return{current:a}}function v(a,b){0>Ga||(a.current=$c[Ga],$c[Ga]=null,Ga--)}function y(a,b,c){Ga++;$c[Ga]=a.current;a.current=b}function Ha(a){return jb(a)?ad:X.current}function Ia(a,b){var c=a.type.contextTypes;if(!c)return Y;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function jb(a){return 2===a.tag&&null!=a.type.childContextTypes}function bd(a){jb(a)&&(v(x,a),v(X,a))}function cd(a){v(x,a);v(X,a)}function yf(a,b,c){X.current!==Y?m("168"):void 0;y(X,b,a);y(x,c,a)}function zf(a,b){var c=a.stateNode,d=a.type.childContextTypes;if("function"!==typeof c.getChildContext)return b;c=c.getChildContext();for(var e in c)e in d?void 0:m("108",Za(a)||"Unknown",e);return G({},b,c)}function dd(a){if(!jb(a))return!1;var b=a.stateNode;b=b&&b.__reactInternalMemoizedMergedChildContext||Y;ad=X.current;y(X,b,a);y(x,x.current,a);return!0}function Af(a,b){var c=a.stateNode;c?void 0:m("169");if(b){var d=zf(a,ad);c.__reactInternalMemoizedMergedChildContext=d;v(x,a);v(X,a);y(X,d,a)}else v(x,a);y(x,b,a)}function ha(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=null;this.index=0;this.ref=null;this.pendingProps=b;this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.expirationTime=0;this.alternate=null}function Qb(a,b,c){var d=a.alternate;null===d?(d=new ha(a.tag,b,a.key,a.mode),d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=b,d.effectTag=0,d.nextEffect=null,d.firstEffect=null,d.lastEffect=null);d.expirationTime=c;d.child=a.child;d.memoizedProps=a.memoizedProps;d.memoizedState=a.memoizedState;d.updateQueue=a.updateQueue;d.sibling=a.sibling;d.index=a.index;d.ref=a.ref;return d}function ed(a,b,c){var d=a.type,e=a.key;a=a.props;if("function"===typeof d)var f=d.prototype&&d.prototype.isReactComponent?2:0;else if("string"===typeof d)f=5;else switch(d){case ea:return Rb(a.children,b,c,e);case Ce:f=11;b|=3;break;case Fe:f=11;b|=2;break;case Fc:return d=new ha(15,a,e,b|4),d.type=Fc,d.expirationTime=c,d;case Ge:f=16;b|=2;break;default:a:{switch("object"===typeof d&&null!==d?d.$$typeof:null){case Ee:f=13;break a;case De:f=12;break a;case He:f=14;break a;default:m("130",null==d?d:typeof d,"")}f=void 0}}b=new ha(f,a,e,b);b.type=d;b.expirationTime=c;return b}function Rb(a,b,c,d){a=new ha(10,a,d,b);a.expirationTime=c;return a}function fd(a,b,c){a=new ha(6,a,null,b);a.expirationTime=c;return a}function gd(a,b,c){b=new ha(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}function Bf(a,b,c){b=new ha(3,null,null,b?3:0);a={current:b,containerInfo:a,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:c,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null};return b.stateNode=a}function Cf(a){return function(b){try{return a(b)}catch(c){}}}function vh(a){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=b.inject(a);hd=Cf(function(a){return b.onCommitFiberRoot(c,a)});id=Cf(function(a){return b.onCommitFiberUnmount(c,a)})}catch(d){}return!0}function Df(a){"function"===typeof hd&&hd(a)}function Ef(a){"function"===typeof id&&id(a)}function Sb(a){return{expirationTime:0,baseState:a,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function jd(a){return{expirationTime:a.expirationTime,baseState:a.baseState,firstUpdate:a.firstUpdate,lastUpdate:a.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Ja(a){return{expirationTime:a,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Tb(a,b,c){null===a.lastUpdate?a.firstUpdate=a.lastUpdate=b:(a.lastUpdate.next=b,a.lastUpdate=b);if(0===a.expirationTime||a.expirationTime>c)a.expirationTime=c}function oa(a,b,c){var d=a.alternate;if(null===d){var e=a.updateQueue;var f=null;null===e&&(e=a.updateQueue=Sb(a.memoizedState))}else e=a.updateQueue,f=d.updateQueue,null===e?null===f?(e=a.updateQueue=Sb(a.memoizedState),f=d.updateQueue=Sb(d.memoizedState)):e=a.updateQueue=jd(f):null===f&&(f=d.updateQueue=jd(e));null===f||e===f?Tb(e,b,c):null===e.lastUpdate||null===f.lastUpdate?(Tb(e,b,c),Tb(f,b,c)):(Tb(e,b,c),f.lastUpdate=b)}function Ff(a,b,c){var d=a.updateQueue;d=null===d?a.updateQueue=Sb(a.memoizedState):Gf(a,d);null===d.lastCapturedUpdate?d.firstCapturedUpdate=d.lastCapturedUpdate=b:(d.lastCapturedUpdate.next=b,d.lastCapturedUpdate=b);if(0===d.expirationTime||d.expirationTime>c)d.expirationTime=c}function Gf(a,b){var c=a.alternate;null!==c&&b===c.updateQueue&&(b=a.updateQueue=jd(b));return b}function Hf(a,b,c,d,e,f){switch(c.tag){case 1:return a=c.payload,"function"===typeof a?a.call(f,d,e):a;case 3:a.effectTag=a.effectTag&-1025|64;case 0:a=c.payload;e="function"===typeof a?a.call(f,d,e):a;if(null===e||void 0===e)break;return G({},d,e);case 2:ia=!0}return d}function kb(a,b,c,d,e){ia=!1;if(!(0===b.expirationTime||b.expirationTime>e)){b=Gf(a,b);for(var f=b.baseState,g=null,h=0,k=b.firstUpdate,m=f;null!==k;){var l=k.expirationTime;if(l>e){if(null===g&&(g=k,f=m),0===h||h>l)h=l}else m=Hf(a,b,k,m,c,d),null!==k.callback&&(a.effectTag|=32,k.nextEffect=null,null===b.lastEffect?b.firstEffect=b.lastEffect=k:(b.lastEffect.nextEffect=k,b.lastEffect=k));k=k.next}l=null;for(k=b.firstCapturedUpdate;null!==k;){var p=k.expirationTime;if(p>e){if(null===l&&(l=k,null===g&&(f=m)),0===h||h>p)h=p}else m=Hf(a,b,k,m,c,d),null!==k.callback&&(a.effectTag|=32,k.nextEffect=null,null===b.lastCapturedEffect?b.firstCapturedEffect=b.lastCapturedEffect=k:(b.lastCapturedEffect.nextEffect=k,b.lastCapturedEffect=k));k=k.next}null===g&&(b.lastUpdate=null);null===l?b.lastCapturedUpdate=null:a.effectTag|=32;null===g&&null===l&&(f=m);b.baseState=f;b.firstUpdate=g;b.firstCapturedUpdate=l;b.expirationTime=h;a.memoizedState=m}}function Jf(a,b){"function"!==typeof a?m("191",a):void 0;a.call(b)}function Kf(a,b,c,d){null!==b.firstCapturedUpdate&&(null!==b.lastUpdate&&(b.lastUpdate.next=b.firstCapturedUpdate,b.lastUpdate=b.lastCapturedUpdate),b.firstCapturedUpdate=b.lastCapturedUpdate=null);a=b.firstEffect;for(b.firstEffect=b.lastEffect=null;null!==a;)d=a.callback,null!==d&&(a.callback=null,Jf(d,c)),a=a.nextEffect;a=b.firstCapturedEffect;for(b.firstCapturedEffect=b.lastCapturedEffect=null;null!==a;)b=a.callback,null!==b&&(a.callback=null,Jf(b,c)),a=a.nextEffect}function Ub(a,b){return{value:a,source:b,stack:Ie(b)}}function Ka(a){var b=a.type._context;y(kd,b._changedBits,a);y(ld,b._currentValue,a);y(Lf,a,a);b._currentValue=a.pendingProps.value;b._changedBits=a.stateNode}function md(a){var b=kd.current,c=ld.current;v(Lf,a);v(ld,a);v(kd,a);a=a.type._context;a._currentValue=c;a._changedBits=b}function pa(a){a===lb?m("174"):void 0;return a}function nd(a,b){y(mb,b,a);y(nb,a,a);y(U,lb,a);var c=b.nodeType;switch(c){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Vc(null,"");break;default:c=8===c?b.parentNode:b,b=c.namespaceURI||null,c=c.tagName,b=Vc(b,c)}v(U,a);y(U,b,a)}function La(a){v(U,a);v(nb,a);v(mb,a)}function od(a){nb.current===a&&(v(U,a),v(nb,a))}function Vb(a,b,c){var d=a.memoizedState;b=b(c,d);d=null===b||void 0===b?d:G({},d,b);a.memoizedState=d;a=a.updateQueue;null!==a&&0===a.expirationTime&&(a.baseState=d)}function Mf(a,b,c,d,e,f){var g=a.stateNode;a=a.type;return"function"===typeof g.shouldComponentUpdate?g.shouldComponentUpdate(c,e,f):a.prototype&&a.prototype.isPureReactComponent?!Rc(b,c)||!Rc(d,e):!0}function Nf(a,b,c,d){a=b.state;"function"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);"function"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Wb.enqueueReplaceState(b,b.state,null)}function Of(a,b){var c=a.type,d=a.stateNode,e=a.pendingProps,f=Ha(a);d.props=e;d.state=a.memoizedState;d.refs=Y;d.context=Ia(a,f);f=a.updateQueue;null!==f&&(kb(a,f,e,d,b),d.state=a.memoizedState);f=a.type.getDerivedStateFromProps;"function"===typeof f&&(Vb(a,f,e),d.state=a.memoizedState);"function"===typeof c.getDerivedStateFromProps||"function"===typeof d.getSnapshotBeforeUpdate||"function"!==typeof d.UNSAFE_componentWillMount&&"function"!==typeof d.componentWillMount||(c=d.state,"function"===typeof d.componentWillMount&&d.componentWillMount(),"function"===typeof d.UNSAFE_componentWillMount&&d.UNSAFE_componentWillMount(),c!==d.state&&Wb.enqueueReplaceState(d,d.state,null),f=a.updateQueue,null!==f&&(kb(a,f,e,d,b),d.state=a.memoizedState));"function"===typeof d.componentDidMount&&(a.effectTag|=4)}function ob(a,b,c){a=c.ref;if(null!==a&&"function"!==typeof a&&"object"!==typeof a){if(c._owner){c=c._owner;var d=void 0;c&&(2!==c.tag?m("110"):void 0,d=c.stateNode);d?void 0:m("147",a);var e=""+a;if(null!==b&&null!==b.ref&&"function"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs===Y?d.refs={}:d.refs;null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}"string"!==typeof a?m("148"):void 0;c._owner?void 0:m("254",a)}return a}function Xb(a,b){"textarea"!==a.type&&m("31","[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,"")}function Pf(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b,c){a=Qb(a,b,c);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=fd(c,a.mode,d),b.return=a,b;b=e(b,c,d);b.return=a;return b}function k(a,b,c,d){if(null!==b&&b.type===c.type)return d=e(b,c.props,d),d.ref=ob(a,b,c),d.return=a,d;d=ed(c,a.mode,d);d.ref=ob(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=gd(c,a.mode,d),b.return=a,b;b=e(b,c.children||[],d);b.return=a;return b}function p(a,b,c,d,f){if(null===b||10!==b.tag)return b=Rb(c,a.mode,d,f),b.return=a,b;b=e(b,c,d);b.return=a;return b}function If(a,b,c){if("string"===typeof b||"number"===typeof b)return b=fd(""+b,a.mode,c),b.return=a,b;if("object"===typeof b&&null!==b){switch(b.$$typeof){case Yb:return c=ed(b,a.mode,c),c.ref=ob(a,null,b),c.return=a,c;case Da:return b=gd(b,a.mode,c),b.return=a,b}if(Zb(b)||Ya(b))return b=Rb(b,a.mode,c,null),b.return=a,b;Xb(a,b)}return null}function r(a,b,c,d){var e=null!==b?b.key:null;if("string"===typeof c||"number"===typeof c)return null!==e?null:h(a,b,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case Yb:return c.key===e?c.type===ea?p(a,b,c.props.children,d,e):k(a,b,c,d):null;case Da:return c.key===e?l(a,b,c,d):null}if(Zb(c)||Ya(c))return null!==e?null:p(a,b,c,d,null);Xb(a,c)}return null}function x(a,b,c,d,e){if("string"===typeof d||"number"===typeof d)return a=a.get(c)||null,h(b,a,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case Yb:return a=a.get(null===d.key?c:d.key)||null,d.type===ea?p(b,a,d.props.children,e,d.key):k(b,a,d,e);case Da:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e)}if(Zb(d)||Ya(d))return a=a.get(c)||null,p(b,a,d,e,null);Xb(b,d)}return null}function v(e,g,h,k){for(var m=null,q=null,l=g,t=g=0,w=null;null!==l&&t<h.length;t++){l.index>t?(w=l,l=null):w=l.sibling;var n=r(e,l,h[t],k);if(null===n){null===l&&(l=w);break}a&&l&&null===n.alternate&&b(e,l);g=f(n,g,t);null===q?m=n:q.sibling=n;q=n;l=w}if(t===h.length)return c(e,l),m;if(null===l){for(;t<h.length;t++)if(l=If(e,h[t],k))g=f(l,g,t),null===q?m=l:q.sibling=l,q=l;return m}for(l=d(e,l);t<h.length;t++)if(w=x(l,e,t,h[t],k))a&&null!==w.alternate&&l.delete(null===w.key?t:w.key),g=f(w,g,t),null===q?m=w:q.sibling=w,q=w;a&&l.forEach(function(a){return b(e,a)});return m}function D(e,g,h,k){var l=Ya(h);"function"!==typeof l?m("150"):void 0;h=l.call(h);null==h?m("151"):void 0;for(var q=l=null,t=g,w=g=0,A=null,n=h.next();null!==t&&!n.done;w++,n=h.next()){t.index>w?(A=t,t=null):A=t.sibling;var p=r(e,t,n.value,k);if(null===p){t||(t=A);break}a&&t&&null===p.alternate&&b(e,t);g=f(p,g,w);null===q?l=p:q.sibling=p;q=p;t=A}if(n.done)return c(e,t),l;if(null===t){for(;!n.done;w++,n=h.next())n=If(e,n.value,k),null!==n&&(g=f(n,g,w),null===q?l=n:q.sibling=n,q=n);return l}for(t=d(e,t);!n.done;w++,n=h.next())n=x(t,e,w,n.value,k),null!==n&&(a&&null!==n.alternate&&t.delete(null===n.key?w:n.key),g=f(n,g,w),null===q?l=n:q.sibling=n,q=n);a&&t.forEach(function(a){return b(e,a)});return l}return function(a,d,f,h){var k="object"===typeof f&&null!==f&&f.type===ea&&null===f.key;k&&(f=f.props.children);var l="object"===typeof f&&null!==f;if(l)switch(f.$$typeof){case Yb:a:{l=f.key;for(k=d;null!==k;){if(k.key===l)if(10===k.tag?f.type===ea:k.type===f.type){c(a,k.sibling);d=e(k,f.type===ea?f.props.children:f.props,h);d.ref=ob(a,k,f);d.return=a;a=d;break a}else{c(a,k);break}else b(a,k);k=k.sibling}f.type===ea?(d=Rb(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=ed(f,a.mode,h),h.ref=ob(a,d,f),h.return=a,a=h)}return g(a);case Da:a:{for(k=f.key;null!==d;){if(d.key===k)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[],h);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=gd(f,a.mode,h);d.return=a;a=d}return g(a)}if("string"===typeof f||"number"===typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f,h),d.return=a,a=d):(c(a,d),d=fd(f,a.mode,h),d.return=a,a=d),g(a);if(Zb(f))return v(a,d,f,h);if(Ya(f))return D(a,d,f,h);l&&Xb(a,f);if("undefined"===typeof f&&!k)switch(a.tag){case 2:case 1:h=a.type,m("152",h.displayName||h.name||"Component")}return c(a,d)}}function Qf(a,b){var c=new ha(5,null,null,0);c.type="DELETED";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function Rf(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=""===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,!0):!1;default:return!1}}function Sf(a){if(qa){var b=Ma;if(b){var c=b;if(!Rf(a,b)){b=Zc(c);if(!b||!Rf(a,b)){a.effectTag|=2;qa=!1;Z=a;return}Qf(Z,c)}Z=a;Ma=xf(b)}else a.effectTag|=2,qa=!1,Z=a}}function Tf(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag;)a=a.return;Z=a}function pd(a){if(a!==Z)return!1;if(!qa)return Tf(a),qa=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==b&&!Yc(b,a.memoizedProps))for(b=Ma;b;)Qf(a,b),b=Zc(b);Tf(a);Ma=Z?Zc(a.stateNode):null;return!0}function qd(){Ma=Z=null;qa=!1}function O(a,b,c){rd(a,b,c,b.expirationTime)}function rd(a,b,c,d){b.child=null===a?Uf(b,null,c,d):Vf(b,a.child,c,d)}function Wf(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function Xf(a,b,c,d,e){Wf(a,b);var f=0!==(b.effectTag&64);if(!c&&!f)return d&&Af(b,!1),D(a,b);c=b.stateNode;sd.current=b;var g=f?null:c.render();b.effectTag|=1;f&&(rd(a,b,null,e),b.child=null);rd(a,b,g,e);b.memoizedState=c.state;b.memoizedProps=c.props;d&&Af(b,!0);return b.child}function Yf(a){var b=a.stateNode;b.pendingContext?yf(a,b.pendingContext,b.pendingContext!==b.context):b.context&&yf(a,b.context,!1);nd(a,b.containerInfo)}function Zf(a,b,c,d){var e=a.child;null!==e&&(e.return=a);for(;null!==e;){switch(e.tag){case 12:var f=e.stateNode|0;if(e.type===b&&0!==(f&c)){for(f=e;null!==f;){var g=f.alternate;if(0===f.expirationTime||f.expirationTime>d)f.expirationTime=d,null!==g&&(0===g.expirationTime||g.expirationTime>d)&&(g.expirationTime=d);else if(null!==g&&(0===g.expirationTime||g.expirationTime>d))g.expirationTime=d;else break;f=f.return}f=null}else f=e.child;break;case 13:f=e.type===a.type?null:e.child;break;default:f=e.child}if(null!==f)f.return=e;else for(f=e;null!==f;){if(f===a){f=null;break}e=f.sibling;if(null!==e){e.return=f.return;f=e;break}f=f.return}e=f}}function xh(a,b,c){var d=b.type._context,e=b.pendingProps,f=b.memoizedProps,g=!0;if(x.current)g=!1;else if(f===e)return b.stateNode=0,Ka(b),D(a,b);var h=e.value;b.memoizedProps=e;if(null===f)h=1073741823;else if(f.value===e.value){if(f.children===e.children&&g)return b.stateNode=0,Ka(b),D(a,b);h=0}else{var k=f.value;if(k===h&&(0!==k||1/k===1/h)||k!==k&&h!==h){if(f.children===e.children&&g)return b.stateNode=0,Ka(b),D(a,b);h=0}else if(h="function"===typeof d._calculateChangedBits?d._calculateChangedBits(k,h):1073741823,h|=0,0===h){if(f.children===e.children&&g)return b.stateNode=0,Ka(b),D(a,b)}else Zf(b,d,h,c)}b.stateNode=h;Ka(b);O(a,b,e.children);return b.child}function D(a,b){null!==a&&b.child!==a.child?m("153"):void 0;if(null!==b.child){a=b.child;var c=Qb(a,a.pendingProps,a.expirationTime);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Qb(a,a.pendingProps,a.expirationTime),c.return=b;c.sibling=null}return b.child}function yh(a,b,c){if(0===b.expirationTime||b.expirationTime>c){switch(b.tag){case 3:Yf(b);break;case 2:dd(b);break;case 4:nd(b,b.stateNode.containerInfo);break;case 13:Ka(b)}return null}switch(b.tag){case 0:null!==a?m("155"):void 0;var d=b.type,e=b.pendingProps,f=Ha(b);f=Ia(b,f);d=d(e,f);b.effectTag|=1;"object"===typeof d&&null!==d&&"function"===typeof d.render&&void 0===d.$$typeof?(f=b.type,b.tag=2,b.memoizedState=null!==d.state&&void 0!==d.state?d.state:null,f=f.getDerivedStateFromProps,"function"===typeof f&&Vb(b,f,e),e=dd(b),d.updater=Wb,b.stateNode=d,d._reactInternalFiber=b,Of(b,c),a=Xf(a,b,!0,e,c)):(b.tag=1,O(a,b,d),b.memoizedProps=e,a=b.child);return a;case 1:return e=b.type,c=b.pendingProps,x.current||b.memoizedProps!==c?(d=Ha(b),d=Ia(b,d),e=e(c,d),b.effectTag|=1,O(a,b,e),b.memoizedProps=c,a=b.child):a=D(a,b),a;case 2:e=dd(b);if(null===a)if(null===b.stateNode){var g=b.pendingProps,h=b.type;d=Ha(b);var k=2===b.tag&&null!=b.type.contextTypes;f=k?Ia(b,d):Y;g=new h(g,f);b.memoizedState=null!==g.state&&void 0!==g.state?g.state:null;g.updater=Wb;b.stateNode=g;g._reactInternalFiber=b;k&&(k=b.stateNode,k.__reactInternalMemoizedUnmaskedChildContext=d,k.__reactInternalMemoizedMaskedChildContext=f);Of(b,c);d=!0}else{h=b.type;d=b.stateNode;k=b.memoizedProps;f=b.pendingProps;d.props=k;var l=d.context;g=Ha(b);g=Ia(b,g);var p=h.getDerivedStateFromProps;(h="function"===typeof p||"function"===typeof d.getSnapshotBeforeUpdate)||"function"!==typeof d.UNSAFE_componentWillReceiveProps&&"function"!==typeof d.componentWillReceiveProps||(k!==f||l!==g)&&Nf(b,d,f,g);ia=!1;var r=b.memoizedState;l=d.state=r;var v=b.updateQueue;null!==v&&(kb(b,v,f,d,c),l=b.memoizedState);k!==f||r!==l||x.current||ia?("function"===typeof p&&(Vb(b,p,f),l=b.memoizedState),(k=ia||Mf(b,k,f,r,l,g))?(h||"function"!==typeof d.UNSAFE_componentWillMount&&"function"!==typeof d.componentWillMount||("function"===typeof d.componentWillMount&&d.componentWillMount(),"function"===typeof d.UNSAFE_componentWillMount&&d.UNSAFE_componentWillMount()),"function"===typeof d.componentDidMount&&(b.effectTag|=4)):("function"===typeof d.componentDidMount&&(b.effectTag|=4),b.memoizedProps=f,b.memoizedState=l),d.props=f,d.state=l,d.context=g,d=k):("function"===typeof d.componentDidMount&&(b.effectTag|=4),d=!1)}else h=b.type,d=b.stateNode,f=b.memoizedProps,k=b.pendingProps,d.props=f,l=d.context,g=Ha(b),g=Ia(b,g),p=h.getDerivedStateFromProps,(h="function"===typeof p||"function"===typeof d.getSnapshotBeforeUpdate)||"function"!==typeof d.UNSAFE_componentWillReceiveProps&&"function"!==typeof d.componentWillReceiveProps||(f!==k||l!==g)&&Nf(b,d,k,g),ia=!1,l=b.memoizedState,r=d.state=l,v=b.updateQueue,null!==v&&(kb(b,v,k,d,c),r=b.memoizedState),f!==k||l!==r||x.current||ia?("function"===typeof p&&(Vb(b,p,k),r=b.memoizedState),(p=ia||Mf(b,f,k,l,r,g))?(h||"function"!==typeof d.UNSAFE_componentWillUpdate&&"function"!==typeof d.componentWillUpdate||("function"===typeof d.componentWillUpdate&&d.componentWillUpdate(k,r,g),"function"===typeof d.UNSAFE_componentWillUpdate&&d.UNSAFE_componentWillUpdate(k,r,g)),"function"===typeof d.componentDidUpdate&&(b.effectTag|=4),"function"===typeof d.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!==typeof d.componentDidUpdate||f===a.memoizedProps&&l===a.memoizedState||(b.effectTag|=4),"function"!==typeof d.getSnapshotBeforeUpdate||f===a.memoizedProps&&l===a.memoizedState||(b.effectTag|=256),b.memoizedProps=k,b.memoizedState=r),d.props=k,d.state=r,d.context=g,d=p):("function"!==typeof d.componentDidUpdate||f===a.memoizedProps&&l===a.memoizedState||(b.effectTag|=4),"function"!==typeof d.getSnapshotBeforeUpdate||f===a.memoizedProps&&l===a.memoizedState||(b.effectTag|=256),d=!1);return Xf(a,b,d,e,c);case 3:Yf(b);e=b.updateQueue;if(null!==e)if(d=b.memoizedState,d=null!==d?d.element:null,kb(b,e,b.pendingProps,null,c),e=b.memoizedState.element,e===d)qd(),a=D(a,b);else{d=b.stateNode;if(d=(null===a||null===a.child)&&d.hydrate)Ma=xf(b.stateNode.containerInfo),Z=b,d=qa=!0;d?(b.effectTag|=2,b.child=Uf(b,null,e,c)):(qd(),O(a,b,e));a=b.child}else qd(),a=D(a,b);return a;case 5:a:{pa(mb.current);e=pa(U.current);d=Vc(e,b.type);e!==d&&(y(nb,b,b),y(U,d,b));null===a&&Sf(b);e=b.type;k=b.memoizedProps;d=b.pendingProps;f=null!==a?a.memoizedProps:null;if(!x.current&&k===d){if(k=b.mode&1&&!!d.hidden)b.expirationTime=1073741823;if(!k||1073741823!==c){a=D(a,b);break a}}k=d.children;Yc(e,d)?k=null:f&&Yc(e,f)&&(b.effectTag|=16);Wf(a,b);1073741823!==c&&b.mode&1&&d.hidden?(b.expirationTime=1073741823,b.memoizedProps=d,a=null):(O(a,b,k),b.memoizedProps=d,a=b.child)}return a;case 6:return null===a&&Sf(b),b.memoizedProps=b.pendingProps,null;case 16:return null;case 4:return nd(b,b.stateNode.containerInfo),e=b.pendingProps,x.current||b.memoizedProps!==e?(null===a?b.child=Vf(b,null,e,c):O(a,b,e),b.memoizedProps=e,a=b.child):a=D(a,b),a;case 14:return e=b.type.render,c=b.pendingProps,d=b.ref,x.current||b.memoizedProps!==c||d!==(null!==a?a.ref:null)?(e=e(c,d),O(a,b,e),b.memoizedProps=c,a=b.child):a=D(a,b),a;case 10:return c=b.pendingProps,x.current||b.memoizedProps!==c?(O(a,b,c),b.memoizedProps=c,a=b.child):a=D(a,b),a;case 11:return c=b.pendingProps.children,x.current||null!==c&&b.memoizedProps!==c?(O(a,b,c),b.memoizedProps=c,a=b.child):a=D(a,b),a;case 15:return c=b.pendingProps,b.memoizedProps===c?a=D(a,b):(O(a,b,c.children),b.memoizedProps=c,a=b.child),a;case 13:return xh(a,b,c);case 12:a:if(d=b.type,f=b.pendingProps,k=b.memoizedProps,e=d._currentValue,g=d._changedBits,x.current||0!==g||k!==f){b.memoizedProps=f;h=f.unstable_observedBits;if(void 0===h||null===h)h=1073741823;b.stateNode=h;if(0!==(g&h))Zf(b,d,g,c);else if(k===f){a=D(a,b);break a}c=f.children;c=c(e);b.effectTag|=1;O(a,b,c);a=b.child}else a=D(a,b);return a;default:m("156")}}function pb(a){a.effectTag|=4}function zh(a,b,c){var d=b.pendingProps;switch(b.tag){case 1:return null;case 2:return bd(b),null;case 3:La(b);cd(b);c=b.stateNode;c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null);if(null===a||null===a.child)pd(b),b.effectTag&=-3;td(b);return null;case 5:od(b);c=pa(mb.current);var e=b.type;if(null!==a&&null!=b.stateNode){var f=a.memoizedProps,g=b.stateNode,h=pa(U.current);g=Ah(g,e,f,d,c);$f(a,b,g,e,f,d,c,h);a.ref!==b.ref&&(b.effectTag|=128)}else{if(!d)return null===b.stateNode?m("166"):void 0,null;a=pa(U.current);if(pd(b))d=b.stateNode,e=b.type,f=b.memoizedProps,$b(b,d),ud(d,f),c=Bh(d,e,f,a,c),b.updateQueue=c,null!==c&&pb(b);else{a=Ch(e,d,c,a);$b(b,a);ud(a,d);a:for(f=b.child;null!==f;){if(5===f.tag||6===f.tag)a.appendChild(f.stateNode);else if(4!==f.tag&&null!==f.child){f.child.return=f;f=f.child;continue}if(f===b)break;for(;null===f.sibling;){if(null===f.return||f.return===b)break a;f=f.return}f.sibling.return=f.return;f=f.sibling}Dh(a,e,d,c);wf(e,d)&&pb(b);b.stateNode=a}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)ag(a,b,a.memoizedProps,d);else{if("string"!==typeof d)return null===b.stateNode?m("166"):void 0,null;c=pa(mb.current);pa(U.current);pd(b)?(c=b.stateNode,d=b.memoizedProps,$b(b,c),Eh(c,d)&&pb(b)):(c=Fh(d,c),$b(b,c),b.stateNode=c)}return null;case 14:return null;case 16:return null;case 10:return null;case 11:return null;case 15:return null;case 4:return La(b),td(b),null;case 13:return md(b),null;case 12:return null;case 0:m("167");default:m("156")}}function bg(a,b){var c=b.source;null===b.stack&&null!==c&&Ie(c);null!==c&&Za(c);b=b.value;null!==a&&2===a.tag&&Za(a);try{b&&b.suppressReactErrorLogging||console.error(b)}catch(d){d&&d.suppressReactErrorLogging||console.error(d)}}function cg(a){var b=a.ref;if(null!==b)if("function"===typeof b)try{b(null)}catch(c){qb(a,c)}else b.current=null}function dg(a){"function"===typeof Ef&&Ef(a);switch(a.tag){case 2:cg(a);var b=a.stateNode;if("function"===typeof b.componentWillUnmount)try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){qb(a,c)}break;case 5:cg(a);break;case 4:eg(a)}}function fg(a){return 5===a.tag||3===a.tag||4===a.tag}function gg(a){a:{for(var b=a.return;null!==b;){if(fg(b)){var c=b;break a}b=b.return}m("160");c=void 0}var d=b=void 0;switch(c.tag){case 5:b=c.stateNode;d=!1;break;case 3:b=c.stateNode.containerInfo;d=!0;break;case 4:b=c.stateNode.containerInfo;d=!0;break;default:m("161")}c.effectTag&16&&(ib(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||fg(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag;){if(c.effectTag&2)continue b;if(null===c.child||4===c.tag)continue b;else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}for(var e=a;;){if(5===e.tag||6===e.tag)if(c)if(d){var f=b,g=e.stateNode,h=c;8===f.nodeType?f.parentNode.insertBefore(g,h):f.insertBefore(g,h)}else b.insertBefore(e.stateNode,c);else d?(f=b,g=e.stateNode,8===f.nodeType?f.parentNode.insertBefore(g,f):f.appendChild(g)):b.appendChild(e.stateNode);else if(4!==e.tag&&null!==e.child){e.child.return=e;e=e.child;continue}if(e===a)break;for(;null===e.sibling;){if(null===e.return||e.return===a)return;e=e.return}e.sibling.return=e.return;e=e.sibling}}function eg(a){for(var b=a,c=!1,d=void 0,e=void 0;;){if(!c){c=b.return;a:for(;;){null===c?m("160"):void 0;switch(c.tag){case 5:d=c.stateNode;e=!1;break a;case 3:d=c.stateNode.containerInfo;e=!0;break a;case 4:d=c.stateNode.containerInfo;e=!0;break a}c=c.return}c=!0}if(5===b.tag||6===b.tag){a:for(var f=b,g=f;;)if(dg(g),null!==g.child&&4!==g.tag)g.child.return=g,g=g.child;else{if(g===f)break;for(;null===g.sibling;){if(null===g.return||g.return===f)break a;g=g.return}g.sibling.return=g.return;g=g.sibling}e?(f=d,g=b.stateNode,8===f.nodeType?f.parentNode.removeChild(g):f.removeChild(g)):d.removeChild(b.stateNode)}else if(4===b.tag?d=b.stateNode.containerInfo:dg(b),null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return;b=b.return;4===b.tag&&(c=!1)}b.sibling.return=b.return;b=b.sibling}}function hg(a,b){switch(b.tag){case 2:break;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps;a=null!==a?a.memoizedProps:d;var e=b.type,f=b.updateQueue;b.updateQueue=null;null!==f&&(ud(c,d),Gh(c,f,e,a,d))}break;case 6:null===b.stateNode?m("162"):void 0;b.stateNode.nodeValue=b.memoizedProps;break;case 3:break;case 15:break;case 16:break;default:m("163")}}function vd(a,b,c){c=Ja(c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){wd(d);bg(a,b)};return c}function ig(a,b,c){c=Ja(c);c.tag=3;var d=a.stateNode;null!==d&&"function"===typeof d.componentDidCatch&&(c.callback=function(){null===ja?ja=new Set([this]):ja.add(this);var c=b.value,d=b.stack;bg(a,b);this.componentDidCatch(c,{componentStack:null!==d?d:""})});return c}function Hh(a,b,c,d,e,f,g){c.effectTag|=512;c.firstEffect=c.lastEffect=null;d=Ub(d,c);a=b;do{switch(a.tag){case 3:a.effectTag|=1024;d=vd(a,d,f);Ff(a,d,f);return;case 2:if(b=d,c=a.stateNode,0===(a.effectTag&64)&&null!==c&&"function"===typeof c.componentDidCatch&&(null===ja||!ja.has(c))){a.effectTag|=1024;d=ig(a,b,f);Ff(a,d,f);return}}a=a.return}while(null!==a)}function Ih(a,b,c){switch(a.tag){case 2:return bd(a),b=a.effectTag,b&1024?(a.effectTag=b&-1025|64,a):null;case 3:return La(a),cd(a),b=a.effectTag,b&1024?(a.effectTag=b&-1025|64,a):null;case 5:return od(a),null;case 16:return b=a.effectTag,b&1024?(a.effectTag=b&-1025|64,a):null;case 4:return La(a),null;case 13:return md(a),null;default:return null}}function jg(){if(null!==F)for(var a=F.return;null!==a;){var b=a;switch(b.tag){case 2:bd(b);break;case 3:La(b);cd(b);break;case 5:od(b);break;case 4:La(b);break;case 13:md(b)}a=a.return}rb=null;K=0;ac=-1;sb=!1;F=null;xd=!1}function kg(a){for(;;){var b=a.alternate,c=a.return,d=a.sibling;if(0===(a.effectTag&512)){b=zh(b,a,K);var e=a;if(1073741823===K||1073741823!==e.expirationTime){var f=0;switch(e.tag){case 3:case 2:var g=e.updateQueue;null!==g&&(f=g.expirationTime)}for(g=e.child;null!==g;)0!==g.expirationTime&&(0===f||f>g.expirationTime)&&(f=g.expirationTime),g=g.sibling;e.expirationTime=f}if(null!==b)return b;null!==c&&0===(c.effectTag&512)&&(null===c.firstEffect&&(c.firstEffect=a.firstEffect),null!==a.lastEffect&&(null!==c.lastEffect&&(c.lastEffect.nextEffect=a.firstEffect),c.lastEffect=a.lastEffect),1<a.effectTag&&(null!==c.lastEffect?c.lastEffect.nextEffect=a:c.firstEffect=a,c.lastEffect=a));if(null!==d)return d;if(null!==c)a=c;else{xd=!0;break}}else{a=Ih(a,sb,K);if(null!==a)return a.effectTag&=511,a;null!==c&&(c.firstEffect=c.lastEffect=null,c.effectTag|=512);if(null!==d)return d;if(null!==c)a=c;else break}}return null}function lg(a){var b=yh(a.alternate,a,K);null===b&&(b=kg(a));sd.current=null;return b}function mg(a,b,c){aa?m("243"):void 0;aa=!0;if(b!==K||a!==rb||null===F)jg(),rb=a,K=b,ac=-1,F=Qb(rb.current,null,K),a.pendingCommitExpirationTime=0;var d=!1;sb=!c||K<=ng;do{try{if(c)for(;null!==F&&!og();)F=lg(F);else for(;null!==F;)F=lg(F)}catch(f){if(null===F)d=!0,wd(f);else{null===F?m("271"):void 0;c=F;var e=c.return;if(null===e){d=!0;wd(f);break}Hh(a,e,c,f,sb,K,yd);F=kg(c)}}break}while(1);aa=!1;if(d)return null;if(null===F){if(xd)return a.pendingCommitExpirationTime=b,a.current.alternate;sb?m("262"):void 0;0<=ac&&setTimeout(function(){var b=a.current.expirationTime;0!==b&&(0===a.remainingExpirationTime||a.remainingExpirationTime<b)&&zd(a,b)},ac);Jh(a.current.expirationTime)}return null}function qb(a,b){var c;a:{aa&&!tb?m("263"):void 0;for(c=a.return;null!==c;){switch(c.tag){case 2:var d=c.stateNode;if("function"===typeof c.type.getDerivedStateFromCatch||"function"===typeof d.componentDidCatch&&(null===ja||!ja.has(d))){a=Ub(b,a);a=ig(c,a,1);oa(c,a,1);ra(c,1);c=void 0;break a}break;case 3:a=Ub(b,a);a=vd(c,a,1);oa(c,a,1);ra(c,1);c=void 0;break a}c=c.return}3===a.tag&&(c=Ub(b,a),c=vd(a,c,1),oa(a,c,1),ra(a,1));c=void 0}return c}function pg(){var a=2+25*(((ba()-2+500)/25|0)+1);a<=Ad&&(a=Ad+1);return Ad=a}function bc(a,b){a=0!==ka?ka:aa?tb?1:K:b.mode&1?Na?2+10*(((a-2+15)/10|0)+1):2+25*(((a-2+500)/25|0)+1):1;Na&&(0===ca||a>ca)&&(ca=a);return a}function ra(a,b){for(;null!==a;){if(0===a.expirationTime||a.expirationTime>b)a.expirationTime=b;null!==a.alternate&&(0===a.alternate.expirationTime||a.alternate.expirationTime>b)&&(a.alternate.expirationTime=b);if(null===a.return)if(3===a.tag){var c=a.stateNode;!aa&&0!==K&&b<K&&jg();var d=c.current.expirationTime;aa&&!tb&&rb===c||zd(c,d);cc>Kh&&m("185")}else break;a=a.return}}function ba(){yd=Bd()-Cd;return ng=(yd/10|0)+2}function qg(a){var b=ka;ka=2+25*(((ba()-2+500)/25|0)+1);try{return a()}finally{ka=b}}function Dd(a,b,c,d,e){var f=ka;ka=1;try{return a(b,c,d,e)}finally{ka=f}}function rg(a){if(0!==dc){if(a>dc)return;null!==ec&&Lh(ec)}var b=Bd()-Cd;dc=a;ec=Mh(Nh,{timeout:10*(a-2)-b})}function zd(a,b){if(null===a.nextScheduledRoot)a.remainingExpirationTime=b,null===E?(sa=E=a,a.nextScheduledRoot=a):(E=E.nextScheduledRoot=a,E.nextScheduledRoot=sa);else{var c=a.remainingExpirationTime;if(0===c||b<c)a.remainingExpirationTime=b}Q||(H?fc&&(P=a,I=1,gc(a,1,!1)):1===b?ub():rg(b))}function Ed(){var a=0,b=null;if(null!==E)for(var c=E,d=sa;null!==d;){var e=d.remainingExpirationTime;if(0===e){null===c||null===E?m("244"):void 0;if(d===d.nextScheduledRoot){sa=E=d.nextScheduledRoot=null;break}else if(d===sa)sa=e=d.nextScheduledRoot,E.nextScheduledRoot=e,d.nextScheduledRoot=null;else if(d===E){E=c;E.nextScheduledRoot=sa;d.nextScheduledRoot=null;break}else c.nextScheduledRoot=d.nextScheduledRoot,d.nextScheduledRoot=null;d=c.nextScheduledRoot}else{if(0===a||e<a)a=e,b=d;if(d===E)break;c=d;d=d.nextScheduledRoot}}c=P;null!==c&&c===b&&1===a?cc++:cc=0;P=b;I=a}function Nh(a){vb(0,!0,a)}function ub(){vb(1,!1,null)}function vb(a,b,c){wb=c;Ed();if(b)for(;null!==P&&0!==I&&(0===a||a>=I)&&(!hc||ba()>=I);)ba(),gc(P,I,!hc),Ed();else for(;null!==P&&0!==I&&(0===a||a>=I);)gc(P,I,!1),Ed();null!==wb&&(dc=0,ec=null);0!==I&&rg(I);wb=null;hc=!1;sg()}function tg(a,b){Q?m("253"):void 0;P=a;I=b;gc(a,b,!1);ub();sg()}function sg(){cc=0;if(null!==Oa){var a=Oa;Oa=null;for(var b=0;b<a.length;b++){var c=a[b];try{c._onComplete()}catch(d){Pa||(Pa=!0,ic=d)}}}if(Pa)throw a=ic,ic=null,Pa=!1,a}function gc(a,b,c){Q?m("245"):void 0;Q=!0;c?(c=a.finishedWork,null!==c?jc(a,c,b):(c=mg(a,b,!0),null!==c&&(og()?a.finishedWork=c:jc(a,c,b)))):(c=a.finishedWork,null!==c?jc(a,c,b):(c=mg(a,b,!1),null!==c&&jc(a,c,b)));Q=!1}function jc(a,b,c){var d=a.firstBatch;if(null!==d&&d._expirationTime<=c&&(null===Oa?Oa=[d]:Oa.push(d),d._defer)){a.finishedWork=b;a.remainingExpirationTime=0;return}a.finishedWork=null;tb=aa=!0;c=b.stateNode;c.current===b?m("177"):void 0;d=c.pendingCommitExpirationTime;0===d?m("261"):void 0;c.pendingCommitExpirationTime=0;ba();sd.current=null;if(1<b.effectTag)if(null!==b.lastEffect){b.lastEffect.nextEffect=b;var e=b.firstEffect}else e=b;else e=b.firstEffect;Fd=cb;var f=Qc();if(Oc(f)){if("selectionStart"in f)var g={start:f.selectionStart,end:f.selectionEnd};else a:{var h=window.getSelection&&window.getSelection();if(h&&0!==h.rangeCount){g=h.anchorNode;var k=h.anchorOffset,p=h.focusNode;h=h.focusOffset;try{g.nodeType,p.nodeType}catch(Qa){g=null;break a}var r=0,v=-1,x=-1,D=0,F=0,u=f,w=null;b:for(;;){for(var t;;){u!==g||0!==k&&3!==u.nodeType||(v=r+k);u!==p||0!==h&&3!==u.nodeType||(x=r+h);3===u.nodeType&&(r+=u.nodeValue.length);if(null===(t=u.firstChild))break;w=u;u=t}for(;;){if(u===f)break b;w===g&&++D===k&&(v=r);w===p&&++F===h&&(x=r);if(null!==(t=u.nextSibling))break;u=w;w=u.parentNode}u=t}g=-1===v||-1===x?null:{start:v,end:x}}else g=null}g=g||{start:0,end:0}}else g=null;Gd={focusedElem:f,selectionRange:g};Nc(!1);for(l=e;null!==l;){f=!1;g=void 0;try{for(;null!==l;){if(l.effectTag&256){var q=l.alternate;k=l;switch(k.tag){case 2:if(k.effectTag&256&&null!==q){var A=q.memoizedProps,J=q.memoizedState,y=k.stateNode;y.props=k.memoizedProps;y.state=k.memoizedState;var H=y.getSnapshotBeforeUpdate(A,J);y.__reactInternalSnapshotBeforeUpdate=H}break;case 3:case 5:case 6:case 4:break;default:m("163")}}l=l.nextEffect}}catch(Qa){f=!0,g=Qa}f&&(null===l?m("178"):void 0,qb(l,g),null!==l&&(l=l.nextEffect))}for(l=e;null!==l;){q=!1;A=void 0;try{for(;null!==l;){var B=l.effectTag;B&16&&ib(l.stateNode,"");if(B&128){var C=l.alternate;if(null!==C){var n=C.ref;null!==n&&("function"===typeof n?n(null):n.current=null)}}switch(B&14){case 2:gg(l);l.effectTag&=-3;break;case 6:gg(l);l.effectTag&=-3;hg(l.alternate,l);break;case 4:hg(l.alternate,l);break;case 8:J=l,eg(J),J.return=null,J.child=null,J.alternate&&(J.alternate.child=null,J.alternate.return=null)}l=l.nextEffect}}catch(Qa){q=!0,A=Qa}q&&(null===l?m("178"):void 0,qb(l,A),null!==l&&(l=l.nextEffect))}n=Gd;C=Qc();B=n.focusedElem;q=n.selectionRange;if(C!==B&&Oh(document.documentElement,B)){null!==q&&Oc(B)&&(C=q.start,n=q.end,void 0===n&&(n=C),"selectionStart"in B?(B.selectionStart=C,B.selectionEnd=Math.min(n,B.value.length)):window.getSelection&&(C=window.getSelection(),A=B[ge()].length,n=Math.min(q.start,A),q=void 0===q.end?n:Math.min(q.end,A),!C.extend&&n>q&&(A=q,q=n,n=A),A=ff(B,n),J=ff(B,q),A&&J&&(1!==C.rangeCount||C.anchorNode!==A.node||C.anchorOffset!==A.offset||C.focusNode!==J.node||C.focusOffset!==J.offset)&&(y=document.createRange(),y.setStart(A.node,A.offset),C.removeAllRanges(),n>q?(C.addRange(y),C.extend(J.node,J.offset)):(y.setEnd(J.node,J.offset),C.addRange(y)))));C=[];for(n=B;n=n.parentNode;)1===n.nodeType&&C.push({element:n,left:n.scrollLeft,top:n.scrollTop});"function"===typeof B.focus&&B.focus();for(B=0;B<C.length;B++)n=C[B],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}Gd=null;Nc(Fd);Fd=null;c.current=b;for(l=e;null!==l;){e=!1;B=void 0;try{for(C=d;null!==l;){var G=l.effectTag;if(G&36){var E=l.alternate;n=l;q=C;switch(n.tag){case 2:var z=n.stateNode;if(n.effectTag&4)if(null===E)z.props=n.memoizedProps,z.state=n.memoizedState,z.componentDidMount();else{var L=E.memoizedProps,N=E.memoizedState;z.props=n.memoizedProps;z.state=n.memoizedState;z.componentDidUpdate(L,N,z.__reactInternalSnapshotBeforeUpdate)}var K=n.updateQueue;null!==K&&(z.props=n.memoizedProps,z.state=n.memoizedState,Kf(n,K,z,q));break;case 3:var M=n.updateQueue;if(null!==M){A=null;if(null!==n.child)switch(n.child.tag){case 5:A=n.child.stateNode;break;case 2:A=n.child.stateNode}Kf(n,M,A,q)}break;case 5:var P=n.stateNode;null===E&&n.effectTag&4&&wf(n.type,n.memoizedProps)&&P.focus();break;case 6:break;case 4:break;case 15:break;case 16:break;default:m("163")}}if(G&128){n=void 0;var I=l.ref;if(null!==I){var O=l.stateNode;switch(l.tag){case 5:n=O;break;default:n=O}"function"===typeof I?I(n):I.current=n}}var Q=l.nextEffect;l.nextEffect=null;l=Q}}catch(Qa){e=!0,B=Qa}e&&(null===l?m("178"):void 0,qb(l,B),null!==l&&(l=l.nextEffect))}aa=tb=!1;"function"===typeof Df&&Df(b.stateNode);b=c.current.expirationTime;0===b&&(ja=null);a.remainingExpirationTime=b}function og(){return null===wb||wb.timeRemaining()>Ph?!1:hc=!0}function wd(a){null===P?m("246"):void 0;P.remainingExpirationTime=0;Pa||(Pa=!0,ic=a)}function Jh(a){null===P?m("246"):void 0;P.remainingExpirationTime=a}function ug(a,b){var c=H;H=!0;try{return a(b)}finally{(H=c)||Q||ub()}}function Hd(a,b){if(H&&!fc){fc=!0;try{return a(b)}finally{fc=!1}}return a(b)}function vg(a,b){Q?m("187"):void 0;var c=H;H=!0;try{return Dd(a,b)}finally{H=c,ub()}}function wg(a,b,c){if(Na)return a(b,c);H||Q||0===ca||(vb(ca,!1,null),ca=0);var d=Na,e=H;H=Na=!0;try{return a(b,c)}finally{Na=d,(H=e)||Q||ub()}}function xg(a){var b=H;H=!0;try{Dd(a)}finally{(H=b)||Q||vb(1,!1,null)}}function Id(a,b,c,d,e){var f=b.current;if(c){c=c._reactInternalFiber;var g;b:{2===bb(c)&&2===c.tag?void 0:m("170");for(g=c;3!==g.tag;){if(jb(g)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break b}(g=g.return)?void 0:m("171")}g=g.stateNode.context}c=jb(c)?zf(c,g):g}else c=Y;null===b.context?b.context=c:b.pendingContext=c;b=e;e=Ja(d);e.payload={element:a};b=void 0===b?null:b;null!==b&&(e.callback=b);oa(f,e,d);ra(f,d);return d}function yg(a){var b=a._reactInternalFiber;void 0===b&&("function"===typeof a.render?m("188"):m("268",Object.keys(a)));a=Ve(b);return null===a?null:a.stateNode}function kc(a,b,c,d){var e=b.current,f=ba();e=bc(f,e);return Id(a,b,c,e,d)}function lc(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function zg(a){var b=a.findFiberByHostInstance;return vh(G({},a,{findHostInstanceByFiber:function(a){a=Ve(a);return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null}}))}function Qh(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Da,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function xb(a){this._expirationTime=pg();this._root=a;this._callbacks=this._next=null;this._hasChildren=this._didComplete=!1;this._children=null;this._defer=!0}function Ra(){this._callbacks=null;this._didCommit=!1;this._onCommit=this._onCommit.bind(this)}function Sa(a,b,c){this._internalRoot=Bf(a,b,c)}function Jd(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function Rh(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute("data-reactroot")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new Sa(a,!1,b)}function mc(a,b,c,d,e){Jd(c)?void 0:m("200");var f=c._reactRootContainer;if(f){if("function"===typeof e){var g=e;e=function(){var a=lc(f._internalRoot);g.call(a)}}null!=a?f.legacy_renderSubtreeIntoContainer(a,b,e):f.render(b,e)}else{f=c._reactRootContainer=Rh(c,d);if("function"===typeof e){var h=e;e=function(){var a=lc(f._internalRoot);h.call(a)}}Hd(function(){null!=a?f.legacy_renderSubtreeIntoContainer(a,b,e):f.render(b,e)})}return lc(f._internalRoot)}function Ag(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;Jd(b)?void 0:m("200");return Qh(a,b,null,c)}var Sg=function(a,b,c,d,e,f,g,h){if(!a){if(void 0===b)a=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var k=[c,d,e,f,g,h],l=0;a=Error(b.replace(/%s/g,function(){return k[l++]}));a.name="Invariant Violation"}a.framesToPop=1;throw a}};ma?void 0:m("227");var Sh=function(a,b,c,d,e,f,g,h,k){this._hasCaughtError=!1;this._caughtError=null;var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(wh){this._caughtError=wh,this._hasCaughtError=!0}},r={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(a,b,c,d,e,f,g,h,k){Sh.apply(r,arguments)},invokeGuardedCallbackAndCatchFirstError:function(a,b,c,d,e,f,g,h,k){r.invokeGuardedCallback.apply(this,arguments);if(r.hasCaughtError()){var l=r.clearCaughtError();r._hasRethrowError||(r._hasRethrowError=!0,r._rethrowError=l)}},rethrowCaughtError:function(){return Th.apply(r,arguments)},hasCaughtError:function(){return r._hasCaughtError},clearCaughtError:function(){if(r._hasCaughtError){var a=r._caughtError;r._caughtError=null;r._hasCaughtError=!1;return a}m("198")}},Th=function(){if(r._hasRethrowError){var a=r._rethrowError;r._rethrowError=null;r._hasRethrowError=!1;throw a}},Eb=null,ua={},Ua=[],vc={},na={},Fb={},Uh={plugins:Ua,eventNameDispatchConfigs:vc,registrationNameModules:na,registrationNameDependencies:Fb,possibleRegistrationNames:null,injectEventPluginOrder:Ud,injectEventPluginsByName:Vd},ta=function(){};ta.thatReturns=Gb;ta.thatReturnsFalse=Gb(!1);ta.thatReturnsTrue=Gb(!0);ta.thatReturnsNull=Gb(null);ta.thatReturnsThis=function(){return this};ta.thatReturnsArgument=function(a){return a};var M=ta,xc=null,qe=null,Xd=null,Wa=null,Bg=function(a,b){if(a){var c=a._dispatchListeners,d=a._dispatchInstances;if(Array.isArray(c))for(var e=0;e<c.length&&!a.isPropagationStopped();e++)Wd(a,b,c[e],d[e]);else c&&Wd(a,b,c,d);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}},Tg=function(a){return Bg(a,!0)},Ug=function(a){return Bg(a,!1)},Kd={injectEventPluginOrder:Ud,injectEventPluginsByName:Vd},Vh={injection:Kd,getListener:wc,runEventsInBatch:yc,runExtractedEventsInBatch:Yd},Cg=Math.random().toString(36).slice(2),wa="__reactInternalInstance$"+Cg,ae="__reactEventHandlers$"+Cg,Dg={precacheFiberNode:Zd,getClosestInstanceFromNode:Xa,getInstanceFromNode:function(a){a=a[wa];return!a||5!==a.tag&&6!==a.tag?null:a},getNodeFromInstance:xa,getFiberCurrentPropsFromNode:$d,updateFiberProps:be},Wh={accumulateTwoPhaseDispatches:ya,accumulateTwoPhaseDispatchesSkipTarget:function(a){Va(a,Wg)},accumulateEnterLeaveDispatches:ee,accumulateDirectDispatches:function(a){Va(a,Xg)}},nc=!("undefined"===typeof window||!window.document||!window.document.createElement),T={canUseDOM:nc,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:nc&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:nc&&!!window.screen,isInWorker:!nc},za={animationend:Hb("Animation","AnimationEnd"),animationiteration:Hb("Animation","AnimationIteration"),animationstart:Hb("Animation","AnimationStart"),transitionend:Hb("Transition","TransitionEnd")},Ac={},fe={};T.canUseDOM&&(fe=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);var Eg=Ib("animationend"),Fg=Ib("animationiteration"),Gg=Ib("animationstart"),Hg=Ib("transitionend"),gb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bc=null,z={_root:null,_startText:null,_fallbackText:null},G=ma.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.assign,Ig="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),Xh={type:null,target:null,currentTarget:M.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};G(L.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=M.thatReturnsTrue)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=M.thatReturnsTrue)},persist:function(){this.isPersistent=M.thatReturnsTrue},isPersistent:M.thatReturnsFalse,destructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;for(a=0;a<Ig.length;a++)this[Ig[a]]=null}});L.Interface=Xh;L.extend=function(a){function b(){return c.apply(this,arguments)}var c=this,d=function(){};d.prototype=c.prototype;d=new d;G(d,b.prototype);b.prototype=d;b.prototype.constructor=b;b.Interface=G({},c.Interface,a);b.extend=c.extend;je(b);return b};je(L);var Yh=L.extend({data:null}),Zh=L.extend({data:null}),$g=[9,13,27,32],Cc=T.canUseDOM&&"CompositionEvent"in window,yb=null;T.canUseDOM&&"documentMode"in document&&(yb=document.documentMode);var $h=T.canUseDOM&&"TextEvent"in window&&!yb,oe=T.canUseDOM&&(!Cc||yb&&8<yb&&11>=yb),ne=String.fromCharCode(32),da={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},me=!1,Aa=!1,ai={eventTypes:da,extractEvents:function(a,b,c,d){var e=void 0;var f=void 0;if(Cc)b:{switch(a){case"compositionstart":e=da.compositionStart;break b;case"compositionend":e=da.compositionEnd;break b;case"compositionupdate":e=da.compositionUpdate;break b}e=void 0}else Aa?ke(a,c)&&(e=da.compositionEnd):"keydown"===a&&229===c.keyCode&&(e=da.compositionStart);e?(oe&&(Aa||e!==da.compositionStart?e===da.compositionEnd&&Aa&&(f=he()):(z._root=d,z._startText=ie(),Aa=!0)),e=Yh.getPooled(e,b,c,d),f?e.data=f:(f=le(c),null!==f&&(e.data=f)),ya(e),f=e):f=null;(a=$h?ah(a,c):bh(a,c))?(b=Zh.getPooled(da.beforeInput,b,c,d),b.data=a,ya(b)):b=null;return null===f?b:null===b?f:[f,b]}},Jb=null,Ba=null,Ca=null,Jg={injectFiberControlledHostComponent:function(a){Jb=a}},bi={injection:Jg,enqueueStateRestore:re,needsStateRestore:se,restoreStateIfNeeded:te},ve=function(a,b){return a(b)},$e=function(a,b,c){return a(b,c)},we=function(){},Dc=!1,ch={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},sd=ma.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,V="function"===typeof Symbol&&Symbol.for,Yb=V?Symbol.for("react.element"):60103,Da=V?Symbol.for("react.portal"):60106,ea=V?Symbol.for("react.fragment"):60107,Fe=V?Symbol.for("react.strict_mode"):60108,Fc=V?Symbol.for("react.profiler"):60114,Ee=V?Symbol.for("react.provider"):60109,De=V?Symbol.for("react.context"):60110,Ce=V?Symbol.for("react.async_mode"):60111,He=V?Symbol.for("react.forward_ref"):60112,Ge=V?Symbol.for("react.timeout"):60113,Be="function"===typeof Symbol&&Symbol.iterator,fh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ke={},Je={},u={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){u[a]=new N(a,0,!1,a,null)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];u[b]=new N(b,1,!1,a[1],null)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){u[a]=new N(a,2,!1,a.toLowerCase(),null)});["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(a){u[a]=new N(a,2,!1,a,null)});"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){u[a]=new N(a,3,!1,a.toLowerCase(),null)});["checked","multiple","muted","selected"].forEach(function(a){u[a]=new N(a,3,!0,a.toLowerCase(),null)});["capture","download"].forEach(function(a){u[a]=new N(a,4,!1,a.toLowerCase(),null)});["cols","rows","size","span"].forEach(function(a){u[a]=new N(a,6,!1,a.toLowerCase(),null)});["rowSpan","start"].forEach(function(a){u[a]=new N(a,5,!1,a.toLowerCase(),null)});var Ld=/[\-:]([a-z])/g,Md=function(a){return a[1].toUpperCase()};"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=a.replace(Ld,Md);u[b]=new N(b,1,!1,a,null)});"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(Ld,Md);u[b]=new N(b,1,!1,a,"http://www.w3.org/1999/xlink")});["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(Ld,Md);u[b]=new N(b,1,!1,a,"http://www.w3.org/XML/1998/namespace")});u.tabIndex=new N("tabIndex",1,!1,"tabindex",null);var Pe={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},$a=null,ab=null,Nd=!1;T.canUseDOM&&(Nd=ye("input")&&(!document.documentMode||9<document.documentMode));var ci={eventTypes:Pe,_isInputEventSupported:Nd,extractEvents:function(a,b,c,d){var e=b?xa(b):window,f=void 0,g=void 0,h=e.nodeName&&e.nodeName.toLowerCase();"select"===h||"input"===h&&"file"===e.type?f=jh:xe(e)?Nd?f=nh:(f=lh,g=kh):(h=e.nodeName)&&"input"===h.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(f=mh);if(f&&(f=f(a,b)))return Oe(f,c,d);g&&g(a,e,b);"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&Kc(e,"number",e.value)}},zb=L.extend({view:null,detail:null}),ph={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},Ab=zb.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Lc,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)}}),Kg=Ab.extend({pointerId:null,width:null,height:null,pressure:null,tiltX:null,tiltY:null,pointerType:null,isPrimary:null}),Bb={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},di={eventTypes:Bb,extractEvents:function(a,b,c,d){var e="mouseover"===a||"pointerover"===a,f="mouseout"===a||"pointerout"===a;if(e&&(c.relatedTarget||c.fromElement)||!f&&!e)return null;e=d.window===d?d:(e=d.ownerDocument)?e.defaultView||e.parentWindow:window;f?(f=b,b=(b=c.relatedTarget||c.toElement)?Xa(b):null):f=null;if(f===b)return null;var g=void 0,h=void 0,k=void 0,l=void 0;if("mouseout"===a||"mouseover"===a)g=Ab,h=Bb.mouseLeave,k=Bb.mouseEnter,l="mouse";else if("pointerout"===a||"pointerover"===a)g=Kg,h=Bb.pointerLeave,k=Bb.pointerEnter,l="pointer";a=null==f?e:xa(f);e=null==b?e:xa(b);h=g.getPooled(h,f,c,d);h.type=l+"leave";h.target=a;h.relatedTarget=e;c=g.getPooled(k,b,c,d);c.type=l+"enter";c.target=e;c.relatedTarget=a;ee(h,c,f,b);return[h,c]}},Qc=function(a){a=a||("undefined"!==typeof document?document:void 0);if("undefined"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}},ei=Object.prototype.hasOwnProperty,Rc=function(a,b){if(Se(a,b))return!0;if("object"!==typeof a||null===a||"object"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!ei.call(b,c[d])||!Se(a[c[d]],b[c[d]]))return!1;return!0},fi=L.extend({animationName:null,elapsedTime:null,pseudoElement:null}),gi=L.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),hi=zb.extend({relatedTarget:null}),ii={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ji={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ki=zb.extend({key:function(a){if(a.key){var b=ii[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=Mb(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?ji[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Lc,charCode:function(a){return"keypress"===a.type?Mb(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===a.type?Mb(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),li=Ab.extend({dataTransfer:null}),mi=zb.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Lc}),ni=L.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),oi=Ab.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null}),pi=[["abort","abort"],[Eg,"animationEnd"],[Fg,"animationIteration"],[Gg,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[Hg,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],Xe={},Mc={};[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(a){We(a,!0)});pi.forEach(function(a){We(a,!1)});var Lg={eventTypes:Xe,isInteractiveTopLevelEventType:function(a){a=Mc[a];return void 0!==a&&!0===a.isInteractive},extractEvents:function(a,b,c,d){var e=Mc[a];if(!e)return null;switch(a){case"keypress":if(0===Mb(c))return null;case"keydown":case"keyup":a=ki;break;case"blur":case"focus":a=hi;break;case"click":if(2===c.button)return null;case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=Ab;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=li;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=mi;break;case Eg:case Fg:case Gg:a=fi;break;case Hg:a=ni;break;case"scroll":a=zb;break;case"wheel":a=oi;break;case"copy":case"cut":case"paste":a=gi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=Kg;break;default:a=L}b=a.getPooled(e,b,c,d);ya(b);return b}},Ye=Lg.isInteractiveTopLevelEventType,Ob=[],cb=!0,qi={get _enabled(){return cb},setEnabled:Nc,isEnabled:function(){return cb},trapBubbledEvent:p,trapCapturedEvent:db,dispatchEvent:Nb},bf={},sh=0,Pb="_reactListenersID"+(""+Math.random()).slice(2),df=function(a){var b=(a?a.ownerDocument||a:document).defaultView||window;return!!(a&&("function"===typeof b.Node?a instanceof b.Node:"object"===typeof a&&"number"===typeof a.nodeType&&"string"===typeof a.nodeName))&&3==a.nodeType},Oh=cf,ri=T.canUseDOM&&"documentMode"in document&&11>=document.documentMode,hf={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Ea=null,Sc=null,eb=null,Pc=!1,si={eventTypes:hf,extractEvents:function(a,b,c,d){var e=d.window===d?d.document:9===d.nodeType?d:d.ownerDocument,f;if(!(f=!e)){a:{e=af(e);f=Fb.onSelect;for(var g=0;g<f.length;g++){var h=f[g];if(!e.hasOwnProperty(h)||!e[h]){e=!1;break a}}e=!0}f=!e}if(f)return null;e=b?xa(b):window;switch(a){case"focus":if(xe(e)||"true"===e.contentEditable)Ea=e,Sc=b,eb=null;break;case"blur":eb=Sc=Ea=null;break;case"mousedown":Pc=!0;break;case"contextmenu":case"mouseup":return Pc=!1,gf(c,d);case"selectionchange":if(ri)break;case"keydown":case"keyup":return gf(c,d)}return null}};Kd.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));(function(a){xc=a.getFiberCurrentPropsFromNode;qe=a.getInstanceFromNode;Xd=a.getNodeFromInstance})(Dg);Kd.injectEventPluginsByName({SimpleEventPlugin:Lg,EnterLeaveEventPlugin:di,ChangeEventPlugin:ci,SelectEventPlugin:si,BeforeInputEventPlugin:ai});var Y={},Mg="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,ti=Date,ui=setTimeout,vi=clearTimeout,la=void 0;if("object"===typeof performance&&"function"===typeof performance.now){var wi=performance;la=function(){return wi.now()}}else la=function(){return ti.now()};var Od=void 0,oc=void 0;if(T.canUseDOM){var Ng="function"===typeof Mg?Mg:function(a){m("276")},R=null,pc=null,Ta=-1,qc=!1,Cb=!1,rc=0,sc=33,Db=33,tc={didTimeout:!1,timeRemaining:function(){var a=rc-la();return 0<a?a:0}},Og=function(a,b){var c=a.scheduledCallback,d=!1;try{c(b),d=!0}finally{oc(a),d||(qc=!0,window.postMessage(Pd,"*"))}},Pd="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(a){if(a.source===window&&a.data===Pd&&(qc=!1,null!==R)){if(null!==R){var b=la();if(!(-1===Ta||Ta>b)){a=-1;for(var c=[],d=R;null!==d;){var e=d.timeoutTime;-1!==e&&e<=b?c.push(d):-1!==e&&(-1===a||e<a)&&(a=e);d=d.next}if(0<c.length)for(tc.didTimeout=!0,b=0,d=c.length;b<d;b++)Og(c[b],tc);Ta=a}}for(a=la();0<rc-a&&null!==R;)a=R,tc.didTimeout=!1,Og(a,tc),a=la();null===R||Cb||(Cb=!0,Ng(Pg))}},!1);var Pg=function(a){Cb=!1;var b=a-rc+Db;b<Db&&sc<Db?(8>b&&(b=8),Db=b<sc?sc:b):sc=b;rc=a+Db;qc||(qc=!0,window.postMessage(Pd,"*"))};Od=function(a,b){var c=-1;null!=b&&"number"===typeof b.timeout&&(c=la()+b.timeout);if(-1===Ta||-1!==c&&c<Ta)Ta=c;a={scheduledCallback:a,timeoutTime:c,prev:null,next:null};null===R?R=a:(b=a.prev=pc,null!==b&&(b.next=a));pc=a;Cb||(Cb=!0,Ng(Pg));return a};oc=function(a){if(null!==a.prev||R===a){var b=a.next,c=a.prev;a.next=null;a.prev=null;null!==b?null!==c?(c.next=b,b.prev=c):(b.prev=null,R=b):null!==c?(c.next=null,pc=c):pc=R=null}}}else{var Qd=new Map;Od=function(a,b){b={scheduledCallback:a,timeoutTime:0,next:null,prev:null};var c=ui(function(){a({timeRemaining:function(){return Infinity},didTimeout:!1})});Qd.set(a,c);return b};oc=function(a){var b=Qd.get(a.scheduledCallback);Qd.delete(a);vi(b)}}var uc=void 0,rf=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if("http://www.w3.org/2000/svg"!==a.namespaceURI||"innerHTML"in a)a.innerHTML=b;else{uc=uc||document.createElement("div");uc.innerHTML="<svg>"+b+"</svg>";for(b=uc.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}),ib=function(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b},fb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xi=["Webkit","ms","Moz","O"];Object.keys(fb).forEach(function(a){xi.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);fb[b]=fb[a]})});var uh=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),hb=M.thatReturns(""),yi={createElement:of,createTextNode:pf,setInitialProperties:qf,diffProperties:sf,updateProperties:tf,diffHydratedProperties:uf,diffHydratedText:vf,warnForUnmatchedText:function(a,b){},warnForDeletedHydratableElement:function(a,b){},warnForDeletedHydratableText:function(a,b){},warnForInsertedHydratedElement:function(a,b,c){},warnForInsertedHydratedText:function(a,b){},restoreControlledState:function(a,b,c){switch(b){case"input":Jc(a,c);b=c.name;if("radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=$d(d);e?void 0:m("90");Ae(d);Jc(d,e)}}}break;case"textarea":lf(a,c);break;case"select":b=c.value,null!=b&&Fa(a,!!c.multiple,b,!1)}}},Ch=of,Fh=pf,Dh=qf,Ah=sf,Gh=tf,Bh=uf,Eh=vf,$b=Zd,ud=be,Fd=null,Gd=null,Bd=la,Mh=Od,Lh=oc;new Set;var $c=[],Ga=-1,X=fa(Y),x=fa(!1),ad=Y,hd=null,id=null,ia=!1,Lf=fa(null),ld=fa(null),kd=fa(0),lb={},U=fa(lb),nb=fa(lb),mb=fa(lb),Wb={isMounted:function(a){return(a=a._reactInternalFiber)?2===bb(a):!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=ba();d=bc(d,a);var e=Ja(d);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);oa(a,e,d);ra(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=ba();d=bc(d,a);var e=Ja(d);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);oa(a,e,d);ra(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=ba();c=bc(c,a);var d=Ja(c);d.tag=2;void 0!==b&&null!==b&&(d.callback=b);oa(a,d,c);ra(a,c)}},Zb=Array.isArray,Vf=Pf(!0),Uf=Pf(!1),Z=null,Ma=null,qa=!1,td=void 0,$f=void 0,ag=void 0;td=function(a){};$f=function(a,b,c,d,e,f,g,h){(b.updateQueue=c)&&pb(b)};ag=function(a,b,c,d){c!==d&&pb(b)};var Cd=Bd(),ng=2,yd=Cd,Ad=0,ka=0,aa=!1,F=null,rb=null,K=0,ac=-1,sb=!1,l=null,tb=!1,xd=!1,ja=null,sa=null,E=null,dc=0,ec=void 0,Q=!1,P=null,I=0,ca=0,hc=!1,Pa=!1,ic=null,wb=null,H=!1,fc=!1,Na=!1,Oa=null,Kh=1E3,cc=0,Ph=1,zi={updateContainerAtExpirationTime:Id,createContainer:function(a,b,c){return Bf(a,b,c)},updateContainer:kc,flushRoot:tg,requestWork:zd,computeUniqueAsyncExpiration:pg,batchedUpdates:ug,unbatchedUpdates:Hd,deferredUpdates:qg,syncUpdates:Dd,interactiveUpdates:wg,flushInteractiveUpdates:function(){Q||0===ca||(vb(ca,!1,null),ca=0)},flushControlled:xg,flushSync:vg,getPublicRootInstance:lc,findHostInstance:yg,findHostInstanceWithNoPortals:function(a){a=qh(a);return null===a?null:a.stateNode},injectIntoDevTools:zg};Jg.injectFiberControlledHostComponent(yi);xb.prototype.render=function(a){this._defer?void 0:m("250");this._hasChildren=!0;this._children=a;var b=this._root._internalRoot,c=this._expirationTime,d=new Ra;Id(a,b,null,c,d._onCommit);return d};xb.prototype.then=function(a){if(this._didComplete)a();else{var b=this._callbacks;null===b&&(b=this._callbacks=[]);b.push(a)}};xb.prototype.commit=function(){var a=this._root._internalRoot,b=a.firstBatch;this._defer&&null!==b?void 0:m("251");if(this._hasChildren){var c=this._expirationTime;if(b!==this){this._hasChildren&&(c=this._expirationTime=b._expirationTime,this.render(this._children));for(var d=null,e=b;e!==this;)d=e,e=e._next;null===d?m("251"):void 0;d._next=e._next;this._next=b;a.firstBatch=this}this._defer=!1;tg(a,c);b=this._next;this._next=null;b=a.firstBatch=b;null!==b&&b._hasChildren&&b.render(b._children)}else this._next=null,this._defer=!1};xb.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var a=this._callbacks;if(null!==a)for(var b=0;b<a.length;b++)(0,a[b])()}};Ra.prototype.then=function(a){if(this._didCommit)a();else{var b=this._callbacks;null===b&&(b=this._callbacks=[]);b.push(a)}};Ra.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var a=this._callbacks;if(null!==a)for(var b=0;b<a.length;b++){var c=a[b];"function"!==typeof c?m("191",c):void 0;c()}}};Sa.prototype.render=function(a,b){var c=this._internalRoot,d=new Ra;b=void 0===b?null:b;null!==b&&d.then(b);kc(a,c,null,d._onCommit);return d};Sa.prototype.unmount=function(a){var b=this._internalRoot,c=new Ra;a=void 0===a?null:a;null!==a&&c.then(a);kc(null,b,null,c._onCommit);return c};Sa.prototype.legacy_renderSubtreeIntoContainer=function(a,b,c){var d=this._internalRoot,e=new Ra;c=void 0===c?null:c;null!==c&&e.then(c);kc(b,d,a,e._onCommit);return e};Sa.prototype.createBatch=function(){var a=new xb(this),b=a._expirationTime,c=this._internalRoot,d=c.firstBatch;if(null===d)c.firstBatch=a,a._next=null;else{for(c=null;null!==d&&d._expirationTime<=b;)c=d,d=d._next;a._next=d;null!==c&&(c._next=a)}return a};(function(a){ve=a.batchedUpdates;$e=a.interactiveUpdates;we=a.flushInteractiveUpdates})(zi);var Qg={createPortal:Ag,findDOMNode:function(a){return null==a?null:1===a.nodeType?a:yg(a)},hydrate:function(a,b,c){return mc(null,a,b,!0,c)},render:function(a,b,c){return mc(null,a,b,!1,c)},unstable_renderSubtreeIntoContainer:function(a,b,c,d){null==a||void 0===a._reactInternalFiber?m("38"):void 0;return mc(a,b,c,!1,d)},unmountComponentAtNode:function(a){Jd(a)?void 0:m("40");return a._reactRootContainer?(Hd(function(){mc(null,null,a,!1,function(){a._reactRootContainer=null})}),!0):!1},unstable_createPortal:function(){return Ag.apply(void 0,arguments)},unstable_batchedUpdates:ug,unstable_deferredUpdates:qg,unstable_interactiveUpdates:wg,flushSync:vg,unstable_flushControlled:xg,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:Vh,EventPluginRegistry:Uh,EventPropagators:Wh,ReactControlledComponent:bi,ReactDOMComponentTree:Dg,ReactDOMEventListener:qi},unstable_createRoot:function(a,b){return new Sa(a,!0,null!=b&&!0===b.hydrate)}};zg({findFiberByHostInstance:Xa,bundleType:0,version:"16.4.1",rendererPackageName:"react-dom"});var Rg={default:Qg},Rd=Rg&&Qg||Rg;return Rd.default?Rd.default:Rd});;!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports.SharedWidgets=t(require("react"),require("react-dom")):e.SharedWidgets=t(e.React,e.ReactDOM)}("undefined"!=typeof self?self:this,function(e,t){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=41)}([function(t,n){t.exports=e},function(e,t,n){"use strict";function o(e,t){function n(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&(n[o[i]]=e[o[i]]);return n}function r(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s}function s(e,t){return function(n,o){t(n,o,e)}}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,o){return new(n||(n=Promise))(function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}l((o=o.apply(e,t||[])).next())})}function d(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,r&&(s=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(r,n[1])).done)return s;switch(r=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,r=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){l.label=n[1];break}if(6===n[0]&&l.label<s[1]){l.label=s[1],s=n;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(n);break}s[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],r=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,r,s,a,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function c(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,r=n.call(e),s=[];try{for(;(void 0===t||t-->0)&&!(o=r.next()).done;)s.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function f(e,t,n){function o(e){c[e]&&(d[e]=function(t){return new Promise(function(n,o){p.push([e,t,n,o])>1||i(e,t)})})}function i(e,t){try{r(c[e](t))}catch(e){l(p[0][3],e)}}function r(e){e.value instanceof g?Promise.resolve(e.value.v).then(s,a):l(p[0][2],e)}function s(e){i("next",e)}function a(e){i("throw",e)}function l(e,t){e(t),p.shift(),p.length&&i(p[0][0],p[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,c=n.apply(e,t||[]),p=[];return d={},o("next"),o("throw"),o("return"),d[Symbol.asyncIterator]=function(){return this},d}function y(e){function t(t,i){e[t]&&(n[t]=function(n){return(o=!o)?{value:g(e[t](n)),done:"return"===t}:i?i(n):n})}var n,o;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function v(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof p?p(e):e[Symbol.iterator]()}function m(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}Object.defineProperty(t,"__esModule",{value:!0}),t.__extends=o,n.d(t,"__assign",function(){return S}),t.__rest=i,t.__decorate=r,t.__param=s,t.__metadata=a,t.__awaiter=l,t.__generator=d,t.__exportStar=c,t.__values=p,t.__read=u,t.__spread=h,t.__await=g,t.__asyncGenerator=f,t.__asyncDelegator=y,t.__asyncValues=v,t.__makeTemplateObject=m;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0
THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.
See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},S=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}},function(e,t,n){"use strict";function o(e,t){return e?t:void 0}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.join("-")}function r(e){return e&&/^[a-z0-9]$/i.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.conditional=o,t.testId=i,t.isAlphabeticChar=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=["#000000","#1B1B1B","#333333","#555555","#666666","#898989","#FFFFFF","#F5F5F5","#E6E6E6","#D4D4D4","#C0C0C0","#B4B4B4"],r=["#F28E2B","#F9A655","#FFBE7D","#B07AA1","#C290B4","#D4A6C8","#B6992D","#D3B348","#F1CE63","#D37295","#E799B3","#FABFD2","#59A14F","#72B966","#8CD17D","#E15759","#F17B79","#FF9D9A","#499894","#69AAA5","#86BCB6","#9D7660","#BA9582","#D7B5A6","#4E79A7","#75A1C7","#A0CBE8","#79706E","#998F8C","#BAB0AC","#606B76","#818B91","#A7ACAD","#76B7B2","#FF9DA7","#EDC948"],s=["#EFEBE8","#F5F1F0","#F9F8F7","#F0EAE8","#F5F0EF","#FAF5F4","#F5EDDC","#FAF4E7","#FEFAF1","#E9EBE0","#F0F1E8","#F7F7F0","#EBEBEB","#F2F2F2","#F9F9F9","#DFE7E8","#E9F0F1","#F2F9F9","#F3EBF3","#F7F1F6","#FBF7FB","#E2E6F0","#E9EDF5","#F0F3FA","#E6ECF0","#EEF1F3","#F2F6F7","#DDEBF0","#E7F1F5","#F0F7FA","#DFEDEB","#E9F3F2","#F3FAF9","#E8EDDA","#EFF3E3","#F7FAF0","#F5EAD7","#F6EEE3","#FAF5F0","#F9E9E0","#F9EEE8","#F9F3EF"],a=["#4F6980","#3D7FA6","#8BC2CA","#499893","#62AEA1","#7DC4AE","#638B66","#86AF6A","#C3BB3D","#EFC637","#F6A035","#F37941","#F59A9A","#CD677F","#C497B7","#845578","#B9AA98","#7E756D","#9EB0A5","#B56252"],l={XXLarge:24,XLarge:18,Large:13,Default:12,Small:11,Tiny:10},d={PrimaryDark:"rgba(0, 0, 0, 0.9)",Primary:"rgba(0, 0, 0, 0.8)",PrimaryMedium:"rgba(0, 0, 0, 0.7)",PrimaryLight:"rgba(0, 0, 0, 0.6)",Secondary:"rgba(0, 0, 0, 0.56)",Disabled:"rgba(0, 0, 0, 0.35)",InvertedPrimary:"rgba(255, 255, 255, 1)",InvertedSecondary:"rgba(255, 255, 255, .56)",InvertedDisabled:"rgba(255, 255, 255, .35)"},c={Grey250:"rgb(250, 250, 250)",Grey245:"rgb(245, 245, 245)",Grey235:"rgb(235, 235, 235)",Grey230:"rgb(230, 230, 230)",Grey225:"rgb(225, 225, 225)",Grey212:"rgb(212, 212, 212)",Grey203:"rgb(203, 203, 203)",Grey180:"rgb(180, 180, 180)",Grey180Disabled:"rgba(180, 180, 180, 0.35)",Grey102:"rgb(102, 102, 102)",Grey51:"rgb(51, 51, 51)",Grey51Disabled:"rgba(51, 51, 51, 0.2)"},p={White:"rgb(255, 255, 255)",WhiteTransparent:"rgba(255, 255, 255, 0.25)",WhiteDisabled:"rgba(255, 255, 255, 0.35)",WhiteTransparentLine:"rgba(255, 255, 255, 0.5)",WhiteTransparentLineHover:"rgba(255, 255, 255, 0.8)",Black:"rgb(0, 0, 0)",Transparent:"rgba(0, 0, 0, 0)",ActionLight:"rgb(235, 143, 80)",ActionDark:"rgb(209, 107, 54)",AttentionLight:"rgb(235, 68, 84)",AttentionDark:"rgb(201, 58, 71)",AttentionDarkDisabled:"rgba(201, 58, 71, 0.35)",Continuous:"rgb(0, 177, 128)",ContinuousDark:"rgb(0, 151, 104)",Discrete:"rgb(73, 150, 178)",DiscreteDark:"rgb(54, 126,156)",GoLight:"rgb(45, 204, 151)",GoDark:"rgb(47, 163, 125)",GoDarkDisabled:"rgba(47, 163, 125, 0.35)",Shaded:"rgba(0, 0, 0, 0.07)",DesktopBlue:"rgb(53, 92, 128)",ServerBlue:"rgb(42, 87, 117)",OnlineBlue:"rgb(40, 94, 127)",OpaqueGlass:c.Grey245,Focus:"rgb(52, 152, 219)",L1:c.Grey250,L2:c.Grey245,L2_5:c.Grey235,L3:c.Grey230,L4:c.Grey225,L5:c.Grey212,L6:c.Grey203,L7:c.Grey180,L8:c.Grey102,L9:c.Grey51,L9Disabled:c.Grey51Disabled,F1:c.Grey250,F2:c.Grey245,F2_5:c.Grey235,F3:c.Grey230,F4:c.Grey225,F5:c.Grey212,F6:c.Grey203,F7:c.Grey180,F7Disabled:c.Grey180Disabled,F8:c.Grey102,F9:c.Grey51},u={Colors:p,Shadow:{High:"0px 4px 10px 0px rgba(0,0,0,0.1),0px 2px 10px 0px rgba(0,0,0,0.1)",Medium:"2px 2px 10px -2px rgba(0,0,0,.22)",Low:"1px 2px 1px 0px rgba(51, 51, 51, 0.1) ",Standard:"1px 1px 2px 0px rgba(0, 0, 0, 0.15)"},Spacing:{SmallSpace:3,DefaultSpace:6,MediumSpace:12,LargeSpace:18,ExtraLargeSpace:24},Sizing:{BaseUnit:6,RowHeight:24,ButtonMinWidth:90,BorderWidth:1,ButtonBorderWidth:2,BorderRadius:1,SelectionBorderWidth:3,ListRowHeight:20},Typography:{FontFamily:"Benton Sans, Arial, Helvetica, sans-serif",Sizing:l,Color:d},Opacity:{ClearGlass:.01,Disabled:.35,OpaqueGlass:.33},ColorPickerPresets:{Dark:i.concat(r),Light:i.concat(s),MaestroFlowColors:a}};t.TabStyles=u;var h=function(e){u.Colors=o.__assign({},u.Colors,e.Colors),u.Opacity=o.__assign({},u.Opacity,e.Opacity),u.Shadow=o.__assign({},u.Shadow,e.Shadow),u.Sizing=o.__assign({},u.Sizing,e.Sizing),u.Spacing=o.__assign({},u.Spacing,e.Spacing),e.Typography&&(u.Typography.FontFamily=e.Typography.FontFamily?e.Typography.FontFamily:u.Typography.FontFamily,u.Typography.Color=o.__assign({},u.Typography.Color,e.Typography.Color),u.Typography.Sizing=o.__assign({},u.Typography.Sizing,e.Typography.Sizing))};t.overrideTabStyles=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(0),s=n(11),a={boxSizing:"border-box",position:"relative",margin:0,padding:0,lineHeight:"normal"};t.BlockStyle=a;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){return r.createElement("div",o.__assign({},this.props,{style:o.__assign({},a,this.props.style)}))},t}(i.Component);t.Block=l;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){return r.createElement("div",o.__assign({},this.props,{style:o.__assign({},a,{display:"inline-block"},this.props.style)}))},t}(i.Component);t.InlineBlock=d;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){return r.createElement("img",o.__assign({},this.props,{role:this.props.role||"presentation",style:o.__assign({},s.PreventUserSelect,this.props.style)}))},t}(i.Component);t.Img=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(44),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.componentDidMount=function(){r.WidgetManager.registerWidget(this)},t.prototype.componentWillUnmount=function(){r.WidgetManager.unregisterWidget(this)},t}(i.Component);t.DynamicThemeComponent=s},function(e,t,n){"use strict";function o(e,t){var n=t.props,o=n.disabled,i=n.interactiveStyles;return i?r.__assign({},e,t.state.hover&&!o&&i.hover,t.state.focus&&!o&&i.focus,t.state.active&&!o&&i.active,o&&i.disabled):e}function i(e,t){var n=e.props,i=n.disabled,d=n.pointerDown,p=i?{}:{pointerDown:l.mergeEventHandlers(d,function(){e.interactiveIsMounted&&(e.setState({active:!0}),e.props.handleActive&&e.props.handleActive(!0),e.removePointerUpListener||c(e))})},u=t.props,h=u.onMouseOver,g=u.onMouseOut,f=u.onKeyDown,y=u.onKeyUp,v=u.onFocus,m=u.onBlur,b=i?{}:{onMouseOver:l.mergeEventHandlers(h,function(){e.interactiveIsMounted&&(e.setState({hover:!0}),e.props.handleHover&&e.props.handleHover(!0))}),onMouseOut:l.mergeEventHandlers(g,function(){e.interactiveIsMounted&&(e.setState({hover:!1}),e.props.handleHover&&e.props.handleHover(!1))}),onKeyDown:l.mergeEventHandlers(f,function(t){e.interactiveIsMounted&&(" "!==t.key&&"Enter"!==t.key||(e.setState({active:!0}),e.props.handleActive&&e.props.handleActive(!0)))}),onKeyUp:l.mergeEventHandlers(y,function(t){e.interactiveIsMounted&&(" "!==t.key&&"Enter"!==t.key||(e.setState({active:!1}),e.props.handleActive&&e.props.handleActive(!1)))}),onFocus:l.mergeEventHandlers(v,function(){e.interactiveIsMounted&&(e.setState({focus:!0}),e.props.handleFocus&&e.props.handleFocus(!0))}),onBlur:l.mergeEventHandlers(m,function(){e.interactiveIsMounted&&(e.setState({focus:!1}),e.props.handleFocus&&e.props.handleFocus(!1))})},S=o(t.props.style,e),C=r.__assign({style:S,disabled:i},b),I=r.__assign({},e.props,p);return s.createElement(a.PointerEventWrapper,r.__assign({},I),s.cloneElement(t,C))}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=n(0),a=n(21),l=n(22),d=n(67),c=function(e){var t=function(){e.interactiveIsMounted&&(e.setState({active:!1}),e.props.handleActive&&e.props.handleActive(!1),e.removePointerUpListener(),e.removePointerUpListener=void 0)};e.removePointerUpListener=d.GlobalPointerUpListener.subscribe(t)},p=function(e){function t(t){var n=e.call(this,t)||this;return n.state=r.__assign({},n.state,{hover:!1,active:!1,focus:!1}),n.interactiveIsMounted=!0,n}return r.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.disabled&&e.disabled!==this.props.disabled&&this.setState({active:!1,focus:!1,hover:!1})},t.prototype.componentWillUnmount=function(){this.interactiveIsMounted=!1,this.removePointerUpListener&&this.removePointerUpListener()},t.prototype.render=function(){return i(this,s.Children.only(this.props.children))},t}(s.Component);t.InteractiveDomWrapper=p;var u=function(e){var t=l.convertToStatefulComponentClass(e);return n=function(e){function n(t){var n=e.call(this,t)||this;return n.state=r.__assign({},n.state,{hover:!1,active:!1,focus:!1}),n.interactiveIsMounted=!0,n}return r.__extends(n,e),n.prototype.componentWillReceiveProps=function(e){e.disabled&&e.disabled!==this.props.disabled&&this.setState({active:!1,focus:!1,hover:!1})},n.prototype.callComponentClassWillUnmount=function(){var e=t.prototype.componentWillUnmount;e&&e.apply(this)},n.prototype.componentWillUnmount=function(){this.callComponentClassWillUnmount(),this.interactiveIsMounted=!1,this.removePointerUpListener&&this.removePointerUpListener()},n.prototype.render=function(){return i(this,e.prototype.render.call(this))},n}(t),n.displayName="InteractiveDom("+l.getComponentName(e)+")",n;var n};t.InteractiveDomHoC=u;var h=u;t.InteractiveDomHoCDecorator=h},function(e,n){e.exports=t},function(e,t,n){"use strict";function o(e){return I.test(e)?e:"data:image/svg+xml;base64,"+btoa(e)}function i(e,t){void 0===t&&(t={});var n=Object.keys(t).filter(function(e){return!!t[e]}).join(" ");return o(e.replace("$state$",n))}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),s=n(82),a=n(83),l=n(84),d=n(85),c=n(86),p=n(87),u=n(88),h=n(89),g=n(90),f=n(91),y=n(92),v=n(93),m=n(94),b=n(95),S=n(96),C=n(97),I=/^data\:image\/svg\+xml/;t.encodeSvg=o,t.CloseButtonIcon={height:14,width:14,icon:function(e){return i(d.CloseButtonSvg,e)}},t.CheckBoxIcon={height:16,width:16,padding:1,icon:function(e){return i(s.CheckBoxSvg,e)}},t.CheckBoxMixedIcon={height:16,width:16,padding:1,icon:function(e){return i(a.CheckBoxMixedSvg,e)}},t.OutlineDropdownArrowIcon={height:18,width:18,icon:function(e){return i(g.OutlineDropdownArrowSvg,e)}},t.LineAndTextDropdownArrowIcon={height:20,width:20,icon:function(e){return i(h.LineAndTextDropdownArrowSvg,e)}},t.MenuItemArrowIcon={height:18,width:18,icon:function(e){return i(p.MenuItemArrowSvg,e)}},t.MenuItemCheckIcon={width:10,height:10,icon:function(e){return i(u.MenuItemCheckSvg,e)},checkedItemPaddingLeft:2*r.TabStyles.Spacing.DefaultSpace+10},t.RadioButtonIcon={height:16,width:16,padding:1,icon:function(e){return i(f.RadioButtonSvg,e)}},t.StepperUpIcon={height:11,width:18,icon:function(e){return i(C.StepperUpSvg,e)}},t.StepperDownIcon={height:11,width:18,icon:function(e){return i(S.StepperDownSvg,e)}},t.TextFieldClearIcon={height:12,width:12,icon:function(e){return i(l.ClearSvg,e)}},t.SearchIcon={height:12,width:12,icon:function(e){return i(y.SearchSvg,e)}},t.SliderHandleIcon={height:20,width:20,icon:function(e){return i(v.SliderHandleSvg,e)}},t.SliderLeftHandleIcon={height:20,width:20,icon:function(e){return i(m.SliderLeftHandleSvg,e)},artworkOffsetFromRightSide:4},t.SliderRightHandleIcon={height:20,width:20,icon:function(e){return i(b.SliderRightHandleSvg,e)},artworkOffsetFromLeftSide:2},t.ExpandoIcon={height:13,width:13,icon:function(e){return i(c.ExpandoSvg,e)}},t.ToastCloseButtonIcon={height:t.CloseButtonIcon.height,width:t.CloseButtonIcon.width,icon:function(e){var t={};return t[e]=!0,i(d.CloseButtonSvg,t)}}},function(e,t,n){"use strict";function o(){return"tab-shared-widget-"+l++}function i(e){window.setTimeout(function(){e&&window.document.body.contains(e)&&e.focus()})}function r(){var e=document.createElement("div");e.className="scrollbarMeasurement",a.__assign(e.style,{width:"100px",height:"100px",overflowY:"scroll",position:"absolute",visibility:"hidden",border:"none"}),document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}function s(e){return e.clientWidth<e.scrollWidth}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=0;t.generateId=o,t.timeoutFocus=i,t.detectScrollbarWidth=r,t.isElementOverflownX=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1),r=n(0),s=n(7),a=n(46),l=n(15),d=n(30),c=n(43),p=n(23),u=100;!function(e){e[e.top=0]="top",e[e.centerY=1]="centerY",e[e.bottom=2]="bottom"}(o||(o={})),t.VerticalOriginOption=o;var h;!function(e){e[e.left=0]="left",e[e.centerX=1]="centerX",e[e.right=2]="right"}(h||(h={})),t.HorizontalOriginOption=h;var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onResize=a(function(){return t.setPlacement()},u),t.setStackingWrapper=function(e){t.stackingWrapper=e,t.setPlacement()},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.addScrollingRootBehavior(),window.addEventListener("resize",this.onResize)},t.prototype.componentWillUnmount=function(){this.removeScrollingRootBehavior(),window.removeEventListener("resize",this.onResize)},t.prototype.componentDidUpdate=function(e){this.resetScrollingRootBehaviorIfNeeded(e),this.setPlacement()},t.prototype.addScrollingRootBehavior=function(){this.setOnScroll(),this.setScrollingRoot(),this.onScroll&&(this.scrollingRoot.addEventListener("scroll",this.onScroll),this.scrollingRoot.addEventListener("wheel",this.onScroll))},t.prototype.removeScrollingRootBehavior=function(){this.onScroll&&(this.scrollingRoot.removeEventListener("scroll",this.onScroll),this.scrollingRoot.removeEventListener("wheel",this.onScroll))},t.prototype.resetScrollingRootBehaviorIfNeeded=function(e){e.handleScrollOnScrollingRoot===this.props.handleScrollOnScrollingRoot&&e.shouldAutoPositionOnScrollingRootScroll===this.props.shouldAutoPositionOnScrollingRootScroll||(this.removeScrollingRootBehavior(),this.addScrollingRootBehavior())},t.prototype.setOnScroll=function(){var e=this;if(this.props.shouldAutoPositionOnScrollingRootScroll||this.props.handleScrollOnScrollingRoot){var t=function(){e.props.shouldAutoPositionOnScrollingRootScroll&&e.setPlacement(),e.props.handleScrollOnScrollingRoot&&e.props.handleScrollOnScrollingRoot()};this.onScroll=a(t,50)}else this.onScroll=null},t.prototype.setScrollingRoot=function(){if(this.scrollingRoot=this.props.scrollingRootId?document.getElementById(this.props.scrollingRootId):c.ScrollingRootConfig.getDefaultRootContainer(),!this.scrollingRoot)throw Error("Could not find scrolling root with the id scrollingRootId.")},t.prototype.getAnchorPosition=function(){var e=this.props.anchorEl?this.props.anchorEl:s.findDOMNode(this),t=e.getBoundingClientRect(),n=e.offsetWidth,o=e.offsetHeight,i={top:t.top,left:t.left};return i.right=t.right||i.left+n,i.bottom=t.bottom||i.top+o,i.centerX=i.left+(i.right-i.left)/2,i.centerY=i.top+(i.bottom-i.top)/2,i},t.prototype.getStackedElCurrentShapeInPositionCoords=function(){var e=this.getStackedEl();return{top:0,centerY:e.offsetHeight/2,bottom:e.offsetHeight,left:0,centerX:e.offsetWidth/2,right:e.offsetWidth}},t.prototype.getContainerRect=function(){var e=this.props.stackingRootId?document.getElementById(this.props.stackingRootId):d.StackingRootConfig.getDefaultRootContainer();if(!e)throw Error("Could not find stacking root.");return e.getBoundingClientRect()},t.prototype.setPlacement=function(){if(this.stackingWrapper&&this.stackingWrapper.getMountPoint()){var e=this.getStackedElAdjustedPosition(),t=this.getStackedEl();t.style.top=e.top+"px",t.style.left=e.left+"px",t.style.position="absolute"}},t.prototype.getStackedEl=function(){return this.stackingWrapper.getMountPoint().firstChild},t.prototype.getStackedElAdjustedPosition=function(){var e=this.getDefaultStackedElViewportPosition();this.props.allowAutoPosition&&(e=this.getAutoPositionIfNeeded(e));var t=this.getAdjustStackedElPositionForContainer(e);return t=this.getAdjustedStackedElPositionFromProps(t)},t.prototype.getDefaultStackedElViewportPosition=function(){return this.getStackedElViewportPosition(this.props.anchorOrigin,this.props.stackedOrigin)},t.prototype.getAdjustStackedElPositionForContainer=function(e){var t=this.getContainerRect();return{top:e.top-t.top,left:e.left-t.left}},t.prototype.getAdjustedStackedElPositionFromProps=function(e){return{top:e.top+(this.props.topFromOverlaidPosition||0),left:e.left+(this.props.leftFromOverlaidPosition||0)}},t.prototype.getStackedElViewportPosition=function(e,t){var n=this.getAnchorPosition(),i=this.getStackedElCurrentShapeInPositionCoords(),r=o[e.vertical],s=h[e.horizontal],a=o[t.vertical],l=h[t.horizontal],d=n[r],c=n[s];return{top:d-i[a],left:c-i[l]}},t.prototype.getAutoPositionIfNeeded=function(e){var t=this.getStackedElCurrentShapeInPositionCoords(),n=this.getOppositeOriginPosition(),o=p.getLayoutViewportSize(),i=e.top<0||e.top+t.bottom>o.height,r=e.left<0||e.left+t.right>o.width;return i&&(n.top+t.bottom<=o.height?e.top=Math.max(0,n.top):t.bottom<=o.height&&(e.top=Math.max(0,o.height-t.bottom))),r&&(n.left+t.right<=o.width?e.left=Math.max(0,n.left):t.right<=o.width&&(e.left=Math.max(0,o.width-t.right))),e},t.prototype.getOppositeOriginPosition=function(){var e=this.getOppositeOriginsOptions(this.props.anchorOrigin),t=this.getOppositeOriginsOptions(this.props.stackedOrigin);return this.getStackedElViewportPosition(e,t)},t.prototype.getOppositeOriginsOptions=function(e){return{horizontal:this.getOppositeHorizontalOption(e.horizontal),vertical:this.getOppositeVerticalOption(e.vertical)}},t.prototype.getOppositeVerticalOption=function(e){return e===o.centerY?o.centerY:e===o.top?o.bottom:o.top},t.prototype.getOppositeHorizontalOption=function(e){return e===h.centerX?h.centerX:e===h.left?h.right:h.left},t.prototype.render=function(){var e=this.props.stackingRootId?this.props.stackingRootId+"-":"";return e=this.props.scrollingRootId?""+e+this.props.scrollingRootId+"-":e,r.createElement("div",{style:{display:"none"}},r.createElement(l.StackingComponentWrapper,{portalEventTrapOverrides:this.props.portalEventTrapOverrides,ref:this.setStackingWrapper,stackingRootId:this.props.stackingRootId,wrapperTestId:e+"Overlay",zIndex:this.props.zIndex},this.props.children))},t.defaultProps={anchorOrigin:{vertical:o.top,horizontal:h.left},stackedOrigin:{vertical:o.top,horizontal:h.left}},t}(r.Component);t.Overlay=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreventUserSelect={userSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",MozUserSelect:"none"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(6),s=n(32),a=n(3),l=n(38),d=l.isIE||l.isEdge,c=d?"shared-widgets-text-input-ie-fix":"";d&&(s.SingletonStyleSheet.addRawSelector("."+c+":focus",{"background-color":a.TabStyles.Colors.Transparent}),s.SingletonStyleSheet.addRawSelector("."+c+"::-ms-clear",{display:"none"}));var p=function(){function e(e){this.value=e}return e.prototype.toString=function(){return this.value},e.Text=new e("text"),e.Password=new e("password"),e}();t.TextInputType=p;var u={input:{width:"100%",boxSizing:"border-box",WebkitAppearance:"none"}},h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleComposition=function(e){"compositionend"===e.type?(t.isComposing=!1,t.handleInputChange(e)):t.isComposing=!0},t.handleInputRef=function(e){t.props.inputRef&&t.props.inputRef(e)},t.handleInputChange=function(e){t.props.disabled||t.props.handleChange(e.target.value,t.isComposing)},t.handleInputFocus=function(e){if(t.props.shouldSelectTextOnFocus&&!t.shouldIgnoreFocusEvent(e)){var n=e.target;window.setTimeout(function(){try{n.value&&n.setSelectionRange(0,n.value.length)}catch(e){n.select()}})}},t.handleKeyDown=function(e){t.props.disabled||t.isComposing||t.props.onKeyDown&&t.props.onKeyDown(e)},t.handleKeyUp=function(e){t.props.disabled||t.isComposing||("Enter"===e.key&&t.props.handleEnter&&t.props.handleEnter(),"Escape"===e.key&&t.props.handleEscape&&t.props.handleEscape())},t}return o.__extends(t,e),t.prototype.shouldIgnoreFocusEvent=function(e){var t=e.target,n=e.relatedTarget;return!!(t.lastFocusEventMs&&e.timeStamp<t.lastFocusEventMs+100)||(t.lastFocusEventMs=e.timeStamp,n&&(n.lastFocusEventMs=e.timeStamp),!1)},t.prototype.render=function(){return i.createElement("input",{"aria-label":this.props.ariaLabel,"aria-placeholder":this.props.__INTERNAL__ariaPlaceholder,className:c,"data-tb-test-id":this.props.testId+"-TextInput",disabled:this.props.disabled,id:this.props.id,maxLength:this.props.maxLength,name:this.props.name,onBlur:this.props.handleBlur,onChange:this.handleInputChange,onCompositionEnd:this.handleComposition,onCompositionStart:this.handleComposition,onCompositionUpdate:this.handleComposition,onFocus:this.handleInputFocus,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,readOnly:this.props.readOnly,ref:this.handleInputRef,style:o.__assign({},u.input,this.props.style),type:this.props.type?this.props.type.toString():"text",value:this.props.text||""})},t.defaultProps={shouldSelectTextOnFocus:!0},t=o.__decorate([r.InteractiveDomHoCDecorator],t)}(i.Component);t.TextFieldInputWidget=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1),r=n(0),s=n(47),a=n(35),l=n(5),d=n(2);!function(e){e[e.Attention=0]="Attention",e[e.Grey=1]="Grey",e[e.Go=2]="Go",e[e.Outline=3]="Outline",e[e.LightOutline=4]="LightOutline",e[e.OutlineGo=5]="OutlineGo",e[e.OutlineAttention=6]="OutlineAttention",e[e.Text=7]="Text",e[e.DarkText=8]="DarkText",e[e.DarkBoldText=9]="DarkBoldText",e[e.Icon=10]="Icon",e[e.IconOutline=11]="IconOutline"}(o||(o={})),t.ButtonType=o;var c=function(e){function t(t){var n=e.call(this,t)||this;return n.handleActive=function(e){n.props.getContent&&e!==n.state.active&&n.setState({active:e})},n.handleFocus=function(e){n.props.getContent&&e!==n.state.focus&&n.setState({focus:e})},n.handleHover=function(e){n.props.getContent&&e!==n.state.hover&&n.setState({hover:e})},n.state={active:!1,disabled:t.disabled,focus:!1,hover:!1,selected:t.selected},n}return i.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){var t={};e.disabled!==this.props.disabled&&(t=e.disabled?{active:!1,disabled:e.disabled,focus:!1,hover:!1}:{disabled:e.disabled}),e.selected!==this.props.selected&&(t.selected=e.selected),this.setState(t)},t.prototype.content=function(){var e=this.props.getContent?this.props.getContent(this.state):this.props.children;return r.createElement(r.Fragment,null,this.props.label,e)},t.prototype.render=function(){var e=s.getButtonStyle(this.props.buttonType),t={disabled:this.props.disabled,disableTabAccessibility:this.props.disableTabAccessibility,handleClick:this.props.handleClick,interactiveStyle:e.interactive,onActive:this.handleActive,onFocus:this.handleFocus,onHover:this.handleHover,role:this.props.role,selected:this.props.selected,style:i.__assign({},e.base,this.props.style),testId:d.testId(this.props.testId,"Button"),title:this.props.title};return r.createElement(a.ButtonBase,i.__assign({},t),this.content())},t}(l.DynamicThemeComponent);t.ButtonWidget=c},function(e,t,n){"use strict";function o(){if("undefined"==typeof Localize)throw Error("The messages.<locale>.js file has not been loaded");return Localize}Object.defineProperty(t,"__esModule",{value:!0}),t.LocaleData={get:function(){return o().localeData}};var i=function(e,t){return o().msg.formatMessage(e,t)};t.Messages={close:function(){return i("@tableau__widgets/close")},closeDialog:function(){return i("@tableau__widgets/closeDialog")},customColor:function(){return i("@tableau__widgets/customColor")},increment:function(){return i("@tableau__widgets/increment")},decrement:function(){return i("@tableau__widgets/decrement")},waitIndicatorLabel:function(){return i("@tableau__widgets/waitIndicatorLabel")},enterValidDate:function(){return i("@tableau__widgets/enterValidDate")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(7),s=n(30),a=n(2),l=n(22),d=n(76),c=function(e){function t(t){var n=e.call(this,t)||this;if(n.stackingRoot=n.props.stackingRootId?document.getElementById(n.props.stackingRootId):s.StackingRootConfig.getDefaultRootContainer(),!n.stackingRoot)throw Error("Could not find stacking root.");return n.warnIfRootIsNotPositioned(),n.createMountPoint(),n}return o.__extends(t,e),t.prototype.warnIfRootIsNotPositioned=function(){if(this.stackingRoot!==document.body){var e=window.getComputedStyle(this.stackingRoot).position;if("relative"!==e&&"absolute"!==e)throw Error("Root Container does not have relative or absolute positioning.  Since some shared widgets absolutely\n      position relative to the container this may interfere with positioning")}},t.prototype.componentDidMount=function(){this.stackingRoot.appendChild(this.mountPoint)},t.prototype.componentWillUnmount=function(){this.stackingRoot.removeChild(this.mountPoint)},t.prototype.getMountPoint=function(){return this.mountPoint},t.prototype.createMountPoint=function(){this.mountPoint||(this.mountPoint=document.createElement("div"),this.mountPoint.style.zIndex=""+this.props.zIndex,this.mountPoint.style.position="absolute",this.mountPoint.style.top="0",this.mountPoint.style.left="0",this.mountPoint.setAttribute("data-tb-test-id",a.testId(this.props.wrapperTestId,"Root")))},t.prototype.render=function(){return r.createPortal(d.PortalEventTrap(i.Children.only(this.props.children),this.props.portalEventTrapOverrides),this.mountPoint)},t}(i.Component);t.StackingComponentWrapper=c,t.StackingComponentHOC=function(e){var t=l.convertToStatefulComponentClass(e),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){return i.createElement(c,this.props,e.prototype.render.call(this))},t}(t);return n.displayName="StackingComponentHOC("+l.getComponentName(e)+")",n}},function(e,t,n){"use strict";function o(e){return{top:e.top+e.height/2,left:e.left+e.width/2}}function i(e,t){return{top:e.top-t.top,left:e.left-t.left}}function r(e,t){return{width:Math.max(e.width,t.width),height:Math.max(e.height,t.height)}}function s(e,t){var n=o(t);return{top:n.top-e.height/2,left:n.left-e.width/2}}function a(e,t){var n=t.top+t.height,o=t.left+t.width;return{top:Math.max(t.top,Math.min(e.top,n-e.height)),left:Math.max(t.left,Math.min(e.left,o-e.width))}}function l(e,t){return{top:e.top,left:e.left,bottom:e.top+t.height,right:e.left+t.width,width:t.width,height:t.height}}function d(e,t){return t.left>=e.left&&t.left<=e.left+e.width&&t.top>=e.top&&t.top<=e.top+e.height}function c(e,t){return l({left:e.left+t,top:e.top},{width:e.width-t,height:e.height})}function p(e,t){return l({left:isNaN(t)?NaN:e.left,top:e.top},{width:e.width+t,height:e.height})}Object.defineProperty(t,"__esModule",{value:!0}),t.computeCenter=o,t.subtractPositions=i,t.getMaxWidthAndHeight=r,t.computePositionToCenterAreaInBounds=s,t.computePositionToContainBounds=a,t.makeClientRect=l,t.doesRectangleContainPoint=d,t.addClientRectLeft=c,t.addClientRectRight=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(8),s=n(2),a=n(4),l=n(3),d=n(12);t.TextInputType=d.TextInputType;var c=n(52),p=n(25),u=n(18),h=n(33),g=l.TabStyles.Colors,f=l.TabStyles.Sizing,y=l.TabStyles.Spacing,v=l.TabStyles.Typography,m=function(e){return{input:{base:{borderWidth:f.BorderWidth,borderRadius:f.BorderRadius,borderColor:e.onDarkBackground?g.WhiteTransparentLine:g.L6,borderStyle:"solid",height:f.RowHeight,paddingLeft:y.DefaultSpace,paddingRight:r.TextFieldClearIcon.width+2*y.DefaultSpace,outline:"none",backgroundColor:g.Transparent,fontSize:v.Sizing.Default,fontFamily:v.FontFamily,color:e.onDarkBackground?v.Color.InvertedPrimary:v.Color.Primary,position:"relative",fontWeight:"normal",lineHeight:"normal",WebkitUserSelect:"text",userSelect:"text"},interactive:{hover:{borderColor:e.onDarkBackground?g.WhiteTransparentLineHover:g.L8},active:{borderColor:e.onDarkBackground?g.WhiteTransparentLineHover:g.L8},focus:{borderColor:e.onDarkBackground?g.WhiteTransparentLineHover:g.L8},disabled:{borderColor:e.onDarkBackground?g.WhiteDisabled:g.L9Disabled,color:e.onDarkBackground?v.Color.InvertedDisabled:v.Color.Disabled}},noClearIconButton:{paddingRight:y.DefaultSpace}},errorInput:{borderColor:g.AttentionLight},errorLabel:{fontSize:v.Sizing.Tiny,fontFamily:v.FontFamily,fontWeight:"normal",color:g.AttentionLight,lineHeight:"normal"},errorContainer:{paddingTop:y.SmallSpace},placeholder:{base:o.__assign({fontSize:v.Sizing.Default,fontFamily:v.FontFamily,fontWeight:"normal",color:e.onDarkBackground?v.Color.InvertedSecondary:v.Color.Secondary,position:"absolute",left:y.DefaultSpace+f.BorderWidth,textAlign:"start",lineHeight:f.RowHeight+"px",maxWidth:"calc(100% - "+2*y.DefaultSpace+"px)"},u.TextEllipsis),disabled:{color:e.onDarkBackground?v.Color.InvertedDisabled:v.Color.Disabled}}}};t.getTextOutlineStyles=m;var b=function(e){function t(t){var n=e.call(this,t)||this;return n.handleClearHover=function(e){n.props.disabled||n.setState({clearHover:e})},n.state=o.__assign({},n.state,{clearHover:!1}),n}return o.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.text||this.setState({clearHover:!1})},t.prototype.getInputStyle=function(){var e=m({onDarkBackground:this.props.onDarkBackground});return o.__assign({},e.input.base,s.conditional(!this.props.handleClearText,e.input.noClearIconButton),s.conditional(this.state.clearHover,e.input.interactive.hover),s.conditional(this.props.hasError,e.errorInput),this.props.inputStyle)},t.prototype.render=function(){var e=this,t=m({onDarkBackground:this.props.onDarkBackground}),n=o.__assign({},t.placeholder.base,this.props.placeholderStyle,s.conditional(this.props.disabled,t.placeholder.disabled)),r={style:n,"data-tb-test-id":s.testId(this.props.testId,"Placeholder")},l=this.props.hasError?null:t.input.interactive,p={type:this.props.type,style:this.getInputStyle(),interactiveStyles:l,text:this.props.text,testId:this.props.testId,handleChange:this.props.handleChange,handleEnter:this.props.handleEnter,handleEscape:this.props.handleEscape,disabled:this.props.disabled,handleActive:function(t){return e.handleInputActive(t)},handleFocus:function(t){return e.handleInputFocus(t)},handleBlur:this.props.handleBlur,readOnly:this.props.readOnly,maxLength:this.props.maxLength,name:this.props.name,ariaLabel:this.props.placeholder,inputRef:this.props.inputRef,shouldSelectTextOnFocus:this.props.shouldSelectTextOnFocus},u={pointerClick:this.props.handleClearText,handleHover:this.handleClearHover,testId:this.props.testId,active:this.state.inputActive||this.state.inputHover||this.state.inputFocus,disabled:this.props.disabled},g=this.props.handleClearText?i.createElement(c.TextFieldWithClearIcon,{handleClearText:this.props.handleClearText,textFieldInputProps:p,textFieldClearButtonProps:u}):i.createElement(d.TextFieldInputWidget,o.__assign({},p));return i.createElement(a.Block,{style:this.props.containerStyle},i.createElement(a.Block,{},this.isPlaceholderShowing()?i.createElement("label",r,this.props.placeholder):null,g),this.props.displayErrorTextSection?i.createElement(a.Block,{style:t.errorContainer},i.createElement("label",{style:t.errorLabel,"data-tb-test-id":s.testId(this.props.testId,"ErrorLabel")},this.props.hasError?this.props.errorText:h.Unicode.NonBreakingSpace)):null)},t}(p.TextFieldBase);t.OutlineTextFieldWidget=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"};t.TextEllipsis=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(3),r=n(8),s={w:Math.ceil(r.SliderHandleIcon.width/2),h:Math.ceil(r.SliderHandleIcon.height/2)},a={w:40,h:40},l={w:a.w/2,h:a.h/2};t.getSliderTrackStyles=function(){var e={Track:{position:"absolute",left:s.w,right:s.w,backgroundColor:i.TabStyles.Colors.L3,height:4,top:18},RangeIndicatorBar:{position:"absolute",top:0,bottom:0,backgroundColor:i.TabStyles.Colors.L7},DataBar:{position:"absolute",top:0,bottom:0,backgroundColor:i.TabStyles.Colors.L8}};return o.__assign({},e,{RangeIndicatorBarDarkened:o.__assign({},e.RangeIndicatorBar,{backgroundColor:i.TabStyles.Colors.L8}),RangeIndicatorBarFocused:o.__assign({},e.RangeIndicatorBar,{backgroundColor:i.TabStyles.Colors.Focus}),DataBarDarkened:o.__assign({},e.DataBar,{backgroundColor:i.TabStyles.Colors.L9}),DataBarFocused:o.__assign({},e.DataBar,{backgroundColor:"rgb(24, 71, 102)"})})},t.getSliderTickBarStyles=function(){return{Bar:{position:"absolute",left:s.w,right:s.w+1,height:4,top:3},Tick:{position:"absolute",borderLeft:"solid 1px "+i.TabStyles.Colors.L6,height:4,width:0}}},t.getSliderHandleStyles=function(){var e={PositioningContainer:{position:"absolute"},PressIndicationBar:{position:"absolute",borderLeft:"solid 2px "+i.TabStyles.Colors.L9,marginLeft:-1,width:0,height:16,top:-3},HandleInteractiveArea:{position:"absolute",touchAction:"none",width:r.SliderHandleIcon.width,height:r.SliderHandleIcon.height,boxSizing:"content-box",paddingTop:l.h-s.h,paddingBottom:l.h-s.h,paddingLeft:l.w-s.w,paddingRight:l.w-s.w,marginLeft:-1*l.w,WebkitTouchCallout:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},HandleIcon:{position:"absolute",touchAction:"none",cursor:"pointer",width:r.SliderHandleIcon.width,height:r.SliderHandleIcon.height,marginLeft:-1*s.w,marginTop:l.h-s.h,outline:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none",WebkitTapHighlightColor:"transparent"}};return o.__assign({},e,{HandleInteractiveAreaLeft:o.__assign({},e.HandleInteractiveArea,{paddingLeft:e.HandleInteractiveArea.paddingLeft-5,paddingRight:e.HandleInteractiveArea.paddingRight+5}),HandleInteractiveAreaRight:o.__assign({},e.HandleInteractiveArea,{paddingLeft:e.HandleInteractiveArea.paddingLeft+6,paddingRight:e.HandleInteractiveArea.paddingRight-4}),HandleIconLeft:o.__assign({},e.HandleIcon,{marginLeft:e.HandleIcon.marginLeft-5}),HandleIconRight:o.__assign({},e.HandleIcon,{marginLeft:e.HandleIcon.marginLeft+6}),DisabledHandleMixin:{touchAction:void 0},DisabledHandleInnerFocusAreaMixin:{touchAction:void 0,cursor:void 0}})},t.getSliderHandleContainerStyles=function(){return{Container:{position:"absolute",top:0,bottom:0,left:0,right:0,marginLeft:s.w+1,marginRight:s.w},RangeHandleArea:{position:"absolute",cursor:"pointer",height:r.SliderHandleIcon.height,outline:"none",top:l.h-s.h}}},t.getSliderStyles=function(){return{OuterContainer:{paddingLeft:14,paddingRight:14,WebkitTapHighlightColor:"transparent",TapHighlightColor:"transparent"},TrackAndHandleContainer:{position:"relative",height:40}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.suppressionClassName=void 0,e}();t.ClickBustingConfig=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(7),s=n(45),a=n(22),l=function(e){function t(t){var n=e.call(this,t)||this;return n.pointerEventAdapter=s.PointerEventAdapterManager.adapterFactory(),n}return o.__extends(t,e),t.prototype.componentDidMount=function(){if(this.pointerEventAdapter.didMount){var e=r.findDOMNode(this);this.pointerEventAdapter.didMount(e,this.props)}},t.prototype.componentWillUnmount=function(){this.pointerEventAdapter.willUnmount&&this.pointerEventAdapter.willUnmount()},t.prototype.render=function(){var e=this.pointerEventAdapter.getHtmlAttributes(this.props),t=i.Children.only(this.props.children),n={};return Object.keys(e).forEach(function(o){n[o]=a.mergeEventHandlers(e[o],t.props[o])}),i.cloneElement(t,n,t.props.children)},t}(i.PureComponent);t.PointerEventWrapper=l;var d=function(e){var t=a.convertToStatefulComponentClass(e),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){return i.createElement(l,this.props,e.prototype.render.call(this))},t}(t);return n.displayName="PointerEventHoC("+a.getComponentName(e)+")",n};t.PointerEventHoC=d;var c=d;t.PointerEventHoCDecorator=c},function(e,t,n){"use strict";function o(e){return!e.prototype.render}function i(e){if(o(e)){var t=e;return n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(n,e),n.prototype.render=function(){return t(this.props)},n}(l.Component),n.displayName=s(t),n}return e;var n}function r(e,t){return e&&t&&function(n){e(n),t(n)}||e||t}function s(e){return e.displayName||e.name||"AnonymousComponent"}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),l=n(0);t.convertToStatefulComponentClass=i,t.mergeEventHandlers=r,t.getComponentName=s},function(e,t,n){"use strict";function o(e){return e.getBoundingClientRect()}function i(){var e=document.documentElement.getBoundingClientRect();return{top:-e.top,left:-e.left}}function r(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}function s(){var e=a(),t={left:e.offsetLeft,top:e.offsetTop},n={width:e.width,height:e.height};return l.makeClientRect(t,n)}function a(){return"visualViewport"in window?window.visualViewport:new d}Object.defineProperty(t,"__esModule",{value:!0});var l=n(16);t.getElementPositionRelativeToLayoutViewport=o,t.getLayoutViewportPositionRelativeToPage=i,t.getLayoutViewportSize=r,t.getVisualViewportRectRelativeToLayoutViewport=s;var d=function(){function e(){}return Object.defineProperty(e.prototype,"offsetLeft",{get:function(){var e=i();return window.pageXOffset-e.left},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetTop",{get:function(){var e=i();return window.pageYOffset-e.top},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageLeft",{get:function(){return window.pageXOffset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageTop",{get:function(){return window.pageYOffset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return window.innerWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return window.innerHeight},enumerable:!0,configurable:!0}),e}();t.getVisualViewport=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(2),s=n(3),a=n(6),l=n(5),d=s.TabStyles.Typography,c=function(){return{base:{fontSize:d.Sizing.Default,fontFamily:d.FontFamily,fontWeight:"normal",color:d.Color.Primary,lineHeight:"normal",cursor:"default"},disabled:{color:d.Color.Disabled}}},p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){var e=c(),t=o.__assign({},e.base,this.props.style,r.conditional(this.props.disabled,e.disabled));return i.createElement("label",{style:t,"data-tb-test-id":this.props.testId+"-Label"},this.props.children)},t=o.__decorate([a.InteractiveDomHoCDecorator],t)}(l.DynamicThemeComponent);t.InputLabelWidget=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(5),r=function(e){function t(t){var n=e.call(this,t)||this;return n.handleInputActive=function(e){n.props.disabled||n.setState({inputActive:e})},n.handleInputFocus=function(e){n.props.disabled||n.setState({inputFocus:e})},n.handleBlur=function(){n.props.disabled||n.props.handleBlur&&n.props.handleBlur()},n.handleInputHover=function(e){n.props.disabled||n.setState({inputHover:e})},n.state=o.__assign({},n.state,{inputFocus:!1,inputActive:!1,inputHover:!1}),n}return o.__extends(t,e),t.prototype.isInputActiveOrHasFocus=function(){return this.state.inputActive||this.state.inputFocus},t.prototype.isPlaceholderShowing=function(){return!this.props.text},t.defaultProps={shouldSelectTextOnFocus:!0},t}(i.DynamicThemeComponent);t.TextFieldBase=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1),r=n(0),s=n(7),a=n(46),l=n(101),d=n(3),c=n(2),p=n(107),u=n(5),h=n(16),g=n(108),f=n(10),y=n(109),v=n(110),m=n(23);!function(e){e[e.Centered=0]="Centered",e[e.Maximized=1]="Maximized",e[e.Draggable=2]="Draggable",e[e.Anchored=3]="Anchored"}(o||(o={})),t.DialogPositioningBehavior=o;var b;!function(e){e[e.NormalWithTitleBar=0]="NormalWithTitleBar",e[e.NormalWithoutTitleBar=1]="NormalWithoutTitleBar",e[e.Uber=2]="Uber",e[e.LightweightTitleBar=3]="LightweightTitleBar"}(b||(b={})),t.DialogType=b;t.SharedWidgetsDialogLabel="SharedWidgetsDialogLabel";var S=500,C=100,I=0,T=function(){return{Dialog:{borderWidth:d.TabStyles.Sizing.BorderWidth,borderStyle:"solid",borderColor:d.TabStyles.Colors.L5,borderRadius:d.TabStyles.Sizing.BorderRadius,backgroundColor:d.TabStyles.Colors.White,cursor:"default",boxShadow:d.TabStyles.Shadow.Standard,display:"flex",flexDirection:"column"}}},w=function(e){function t(t){var n=e.call(this,t)||this;return n.throttledHandleAdjustPositionOnResize=a(function(){return n.handleAdjustPositionOnResize()},C),n.handleAdjustPositionOnResize=function(){n.props.shouldAdjustPositionOnWindowResize&&(n.sizingWrapper&&n.sizingWrapper.updateSize(),n.repositionDialog())},n.handleFloaterWidgetRef=function(e){n.floaterWidget=e},n.handleOverlayRef=function(e){n.overlay=e},n.handleSizingWrapperRef=function(e){n.sizingWrapper=e},n.getDialogFloaterClientRect=function(){return n.floaterWidget?n.floaterWidget.getFloaterClientRect():null},n.dragBoundedDialogFloaterPosition=function(e){n.state.hasBeenDragged||n.setState({hasBeenDragged:!0}),n.floaterWidget&&n.floaterWidget.setPosition(n.getBoundedFloaterPos(e))},n.handleOrientationChange=function(){if(n.resizeAndRepositionTimeoutId)return clearTimeout(n.resizeAndRepositionTimeoutId),void(n.resizeAndRepositionTimeoutId=window.setTimeout(n.resizeAndRepositionCallback,S));n.hideDialogAndThen(function(e){n.forceRepaintHack(),n.resizeAndRepositionCallback=function(){n.resizeAndRepositionTimeoutId=null,n.resizeAndRepositionCallback=null,n.sizingWrapper.updateSize(),e&&e(),n.repositionDialog()},n.resizeAndRepositionTimeoutId=window.setTimeout(n.resizeAndRepositionCallback,S)})},n.handleGlassEscape=function(){n.props.onCloseRequest()},n.instanceId=I++,n.state={hasBeenDragged:!1},n}return i.__extends(t,e),t.prototype.addResizeEventListener=function(){window.addEventListener("resize",this.throttledHandleAdjustPositionOnResize)},t.prototype.removeResizeEventListener=function(){window.removeEventListener("resize",this.throttledHandleAdjustPositionOnResize)},t.prototype.repositionDialog=function(){switch(this.props.positioningBehavior){case o.Centered:case o.Maximized:this.floaterWidget.centerInVisualViewport();break;case o.Draggable:this.state.hasBeenDragged?this.repositionDraggedDialog():this.floaterWidget.centerInVisualViewport();break;case o.Anchored:this.overlay&&this.overlay.setPlacement();break;default:throw new Error("Invalid Dialog Positioning Behavior: "+this.props.positioningBehavior)}},t.prototype.saveDraggedDialogPositionBeforeHide=function(){this.dragPositionBeforeHide=this.getDialogFloaterClientRect()},t.prototype.repositionDraggedDialog=function(){var e;this.dragPositionBeforeHide?(e=this.dragPositionBeforeHide,this.dragPositionBeforeHide=void 0):e=this.getDialogFloaterClientRect(),this.floaterWidget.setPosition(this.getBoundedFloaterPos(e))},t.prototype.hideDialogAndThen=function(e){var t;switch(this.props.positioningBehavior){case o.Centered:case o.Maximized:this.floaterWidget.setPosition({top:-1e4,left:-1e4});break;case o.Draggable:this.saveDraggedDialogPositionBeforeHide(),this.floaterWidget.setPosition({top:-1e4,left:-1e4});break;case o.Anchored:var n=s.findDOMNode(this.sizingWrapper),i=n.style.display;n.style.display="none",t=function(){n.style.display=i};break;default:throw new Error("Invalid Dialog Positioning Behavior: "+this.props.positioningBehavior)}e(t)},t.prototype.forceRepaintHack=function(){var e=s.findDOMNode(this),t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t},t.prototype.getBoundedFloaterPos=function(e){var t=this.floaterWidget.getFloaterClientRect(),n={top:e.top,left:e.left,width:t.width,height:t.height},o=m.getVisualViewport(),i={top:0,left:0,width:o.width,height:o.height};return h.computePositionToContainBounds(n,i)},t.prototype.getPositionedDialogElem=function(e){switch(this.props.positioningBehavior){case o.Centered:case o.Draggable:case o.Maximized:var t=c.testId(this.props.testId,"Dialog");return r.createElement(p.FloaterWidget,{testId:t,stackingRootId:this.props.stackingRootId,ref:this.handleFloaterWidgetRef,zIndex:this.props.zIndex,shouldRecenterOnUpdate:!!this.props.shouldRecenterOnUpdate&&!this.state.hasBeenDragged,wrapperTestId:c.testId(t,"Floater")},e);case o.Anchored:return r.createElement(f.Overlay,{anchorEl:this.props.anchorEl,anchorOrigin:this.props.anchorOrigin||{vertical:f.VerticalOriginOption.bottom,horizontal:f.HorizontalOriginOption.left},stackedOrigin:this.props.stackedOrigin||{vertical:f.VerticalOriginOption.top,horizontal:f.HorizontalOriginOption.left},stackingRootId:this.props.stackingRootId,allowAutoPosition:!0,zIndex:this.props.zIndex,leftFromOverlaidPosition:this.props.dialogStyle?this.props.dialogStyle.left:void 0,topFromOverlaidPosition:this.props.dialogStyle?this.props.dialogStyle.top:void 0,ref:this.handleOverlayRef},e);default:throw new Error("Invalid Dialog Positioning Behavior: "+this.props.positioningBehavior)}},t.prototype.getGlassElem=function(){var e=c.testId(this.props.testId,"Dialog");return r.createElement(g.GlassWidget,{testId:e,handleClick:this.props.handleGlassClick,isTransparent:this.props.isGlassTransparent,stackingRootId:this.props.stackingRootId,zIndex:this.props.zIndex,handleEscape:this.handleGlassEscape,wrapperTestId:c.testId(e,"Glass")})},t.prototype.componentDidMount=function(){v.OrientationChange.addListener(this.handleOrientationChange),this.props.shouldAdjustPositionOnWindowResize&&this.addResizeEventListener()},t.prototype.componentDidUpdate=function(e){this.props.shouldAdjustPositionOnWindowResize!==e.shouldAdjustPositionOnWindowResize&&(this.props.shouldAdjustPositionOnWindowResize?this.addResizeEventListener():this.removeResizeEventListener())},t.prototype.componentWillUnmount=function(){v.OrientationChange.removeListener(this.handleOrientationChange),this.props.shouldAdjustPositionOnWindowResize&&this.removeResizeEventListener()},t.prototype.render=function(){var e=i.__assign({},this.props,{getDraggableDialogClientRect:this.getDialogFloaterClientRect,setDraggableDialogPosition:this.dragBoundedDialogFloaterPosition,instanceId:this.instanceId,testId:c.testId(this.props.testId,"Dialog")}),t={isMaximized:this.props.positioningBehavior===o.Maximized,horizontalMargins:40,verticalMargins:40,style:i.__assign({},T().Dialog,this.props.dialogStyle,{width:this.props.dialogWidth}),ref:this.handleSizingWrapperRef,testId:c.conditional(this.props.positioningBehavior===o.Anchored,c.testId(this.props.testId,"Dialog"))},n=r.createElement(y.ViewportConstrainedDomWrapper,t,r.createElement(l.DialogContent,e));return r.createElement("div",{style:{display:"none"}},c.conditional(this.props.isModal,this.getGlassElem()),this.getPositionedDialogElem(n))},t}(u.DynamicThemeComponent);t.DialogWidget=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(7),s=n(2),a=n(54),l=n(5),d=n(3),c=n(10),p=n(55),u=n(9),h=n(56),g=n(4),f={vertical:c.VerticalOriginOption.bottom,horizontal:c.HorizontalOriginOption.left},y=d.TabStyles.Spacing,v=d.TabStyles.Sizing,m=d.TabStyles.Colors,b=d.TabStyles.Shadow,S=function(){return{backgroundColor:"white",borderWidth:v.BorderWidth,borderRadius:v.BorderRadius,borderColor:m.L6,borderStyle:"solid",boxShadow:b.Standard}},C=function(e){function t(t){var n=e.call(this,t)||this;return n.handleSearchEscape=function(){n.state.searchString?n.setState({searchString:""}):n.onRequestClose()},n.handleSearchChanged=function(e){n.setState({searchString:e})},n.handleSearchEnter=function(){n.listWidgetInstance&&n.listWidgetInstance.selectActive()},n.getFilteredMenuItems=function(){return n.state.searchString?n.props.menuItemInfos.filter(function(e){return e.isDivider||e.keyboardAccessibleValue&&e.keyboardAccessibleValue.toUpperCase().indexOf(n.state.searchString.toUpperCase())>=0}).filter(function(e,t,n){return!(e.isDivider&&t>0&&n[t-1].isDivider)}).filter(function(e,t,n){return!(e.isDivider&&(0===t||t===n.length-1))}):n.props.menuItemInfos},n.onRequestClose=function(){n.props.requestCloseAll()},n.handleKeyDown=function(e){switch(e.key){case"ArrowUp":case"ArrowDown":if(!("search"===n.state.focusLocation&&n.getFilteredMenuItems().length>0))return;n.setState({focusLocation:"list"});break;case"Tab":"search"===n.state.focusLocation?n.getFilteredMenuItems().length>0&&n.setState({focusLocation:"list"}):n.props.__UNSUPPORTED__showSearchField&&n.setState({focusLocation:"search"});break;default:return}e.preventDefault(),e.stopPropagation()},n.setSearchDomNode=function(e){n.searchDomNode=e},n.handleListRef=function(e){n.listWidgetInstance=e},n.setFlyoutDomNode=function(e){n.flyoutDomNode=r.findDOMNode(e)},n.handleFocus=function(e){var t=e.target,o=n.getListDomNode(),i=n.state.focusLocation;n.searchDomNode&&n.searchDomNode.contains(t)?i="search":o&&o.contains(t)&&(i="list"),n.state.focusLocation!==i&&n.setState({focusLocation:i})},n.state={searchString:"",focusLocation:n.props.__UNSUPPORTED__showSearchField?"search":"list"},n}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.flyoutDomNode&&(this.pointerDownOutsideFlyoutListenerUnsubscribe=p.GlobalPointerDownOutsideListener.subscribe(this.flyoutDomNode,this.onRequestClose)),this.props.toggleEl&&(this.pointerDownOutsideToggleElListenerUnsubscribe=p.GlobalPointerDownOutsideListener.subscribe(this.props.toggleEl,this.onRequestClose)),this.syncFocus()},t.prototype.componentDidUpdate=function(){this.syncFocus()},t.prototype.componentWillUnmount=function(){this.pointerDownOutsideFlyoutListenerUnsubscribe&&this.pointerDownOutsideFlyoutListenerUnsubscribe(),this.pointerDownOutsideToggleElListenerUnsubscribe&&this.pointerDownOutsideToggleElListenerUnsubscribe(),this.props.toggleEl&&this.props.shouldReturnFocusToToggleEl&&u.timeoutFocus(this.props.toggleEl)},t.prototype.syncFocus=function(){if("list"===this.state.focusLocation){var e=this.getListDomNode();e&&e.focus()}else"search"===this.state.focusLocation&&this.searchDomNode&&this.searchDomNode.focus()},t.prototype.getListDomNode=function(){return r.findDOMNode(this.listWidgetInstance)},t.prototype.renderSearchField=function(){return i.createElement(h.SearchFieldWidget,{testId:"flyout-search",handleChange:this.handleSearchChanged,handleCancelSearch:this.handleSearchChanged,handleEscape:this.handleSearchEscape,handleEnter:this.handleSearchEnter,placeholder:this.props.__UNSUPPORTED__searchDefaultText,text:this.state.searchString,containerStyle:{margin:y.SmallSpace,marginBottom:y.DefaultSpace},shouldSelectTextOnFocus:!1,inputRef:this.setSearchDomNode})},t.prototype.render=function(){var e=o.__assign({},S(),this.props.menuStyle);return i.createElement(c.Overlay,{anchorEl:this.props.anchorEl,stackingRootId:this.props.stackingRootId,anchorOrigin:this.props.anchorOrigin||f,stackedOrigin:this.props.stackedOrigin,allowAutoPosition:this.props.allowAutoPosition,shouldAutoPositionOnScrollingRootScroll:this.props.shouldAutoPositionOnScrollingRootScroll,handleScrollOnScrollingRoot:this.props.handleScrollOnScrollingRoot,scrollingRootId:this.props.scrollingRootId,zIndex:this.props.zIndex,leftFromOverlaidPosition:this.props.leftFromOverlaidPosition,topFromOverlaidPosition:this.props.topFromOverlaidPosition},i.createElement(g.Block,{style:e,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,ref:this.setFlyoutDomNode},s.conditional(this.props.__UNSUPPORTED__showSearchField,this.renderSearchField()),i.createElement(a.ListMenuWidget,{onMouseEnter:this.props.onMouseEnter,menuItemInfos:this.getFilteredMenuItems(),onSelect:this.props.onSelect,requestCloseAll:this.onRequestClose,id:this.props.id,ref:this.handleListRef,__INTERNAL__isListbox:this.props.__INTERNAL__isListbox,__INTERNAL__focusIndex:this.props.__INTERNAL__focusIndex,maxHeight:this.props.maxHeight,stackingRootId:this.props.stackingRootId,zIndex:this.props.zIndex,testId:this.props.testId,onLeftArrowKeyDown:this.props.onLeftArrowKeyDown,onEscapeKeyUp:this.props.onEscapeKeyUp,subMenuAllowAutoPosition:this.props.allowAutoPosition,scrollingRootId:this.props.scrollingRootId,subMenuShouldAutoPositionOnScrollingRootScroll:this.props.shouldAutoPositionOnScrollingRootScroll,focusDisabled:"search"===this.state.focusLocation,letterSearchDisabled:this.props.__UNSUPPORTED__showSearchField})))},t.defaultProps={shouldReturnFocusToToggleEl:!0},t}(l.DynamicThemeComponent);t.GenericFlyoutListMenuWidget=C},function(e,t,n){"use strict";function o(e,t,n){return n<t?NaN:Math.min(Math.max(e,t),n)}Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1),r=n(0),s=n(60),a=n(135),l=n(139),d=n(140),c=n(61),p=n(19);!function(e){e.Both="both",e.Left="left",e.Right="right"}(o=t.HandleType||(t.HandleType={}));var u=function(e){function t(t){var n=e.call(this,t)||this;return n.getTickCount=function(){return n.props.isDiscrete?Math.floor(n.props.max)-Math.ceil(n.props.min)+1:0},n.getIndicatorAndDataBarPositions=function(e,t){if(h(n.props.value)&&!n.props.isDiscrete){if(n.props.openEndedAt===s.OpenEndedAt.Min)return{indicatorBarPosition:{start:0,end:e}};if(n.props.openEndedAt===s.OpenEndedAt.Max)return{indicatorBarPosition:{start:e,end:1}}}else if(!h(n.props.value)){var o=void 0;if(n.props.trackBarDataRange){var i=n.sliderValueLogic.calculateSliderPositionAsProportion(n.props.trackBarDataRange.from),r=n.sliderValueLogic.calculateSliderPositionAsProportion(n.props.trackBarDataRange.to);o={start:Math.max(e,i),end:Math.min(t,r)}}return{indicatorBarPosition:{start:e,end:t},dataBarPosition:o}}return{}},n.fireOnChangeForSingleValue=function(e,t){n.props.onChange&&(h(n.props.value)?t!==n.props.value&&n.props.onChange(t):e===o.Left&&t!==n.props.value.from?n.props.onChange({from:Math.min(t,n.props.value.to),to:n.props.value.to}):e===o.Right&&t!==n.props.value.to&&n.props.onChange({from:n.props.value.from,to:Math.max(t,n.props.value.from)}))},n.fireOnChangeForTwoValues=function(e,t){!n.props.onChange||h(n.props.value)||e>t||n.props.onChange({from:e,to:t})},n.onHandleDragStart=function(e,t){n.setState({areHandlesBeingDragged:!0});var o=n.sliderValueLogic.calculateNewSliderValueFromProportion(t);n.fireOnChangeForSingleValue(e,o)},n.onHandleDragMove=function(e,t){var o=n.sliderValueLogic.calculateNewSliderValueFromProportion(t);n.fireOnChangeForSingleValue(e,o)},n.onHandleDragEnd=function(){n.setState({areHandlesBeingDragged:!1})},n.onBothHandleDragStart=function(){n.setState({areHandlesBeingDragged:!0})},n.onBothHandleDragMove=function(e,t){var o=n.sliderValueLogic.calculateNewSliderValueFromProportion(e),i=n.sliderValueLogic.calculateNewSliderValueFromProportion(t);n.fireOnChangeForTwoValues(o,i)},n.onBothHandleDragEnd=function(){n.setState({areHandlesBeingDragged:!1})},n.onHandleKeyDown=function(e,t){if(e!==o.Both){var i;i=h(n.props.value)?n.props.value:e===o.Left?n.props.value.from:n.props.value.to;var r=n.sliderValueLogic.calculateNewSliderValueForKey(t,i);void 0!==r&&n.fireOnChangeForSingleValue(e,r)}else if(!h(n.props.value)){var s=n.sliderValueLogic.calculateNewSliderRangeValueForKey(t,n.props.value);n.fireOnChangeForTwoValues(s.from,s.to)}},n.handleRangeHandleFocus=function(e){n.setState({isRangeHandleFocused:e})},n.state={areHandlesBeingDragged:!1,isRangeHandleFocused:!1},n.sliderValueLogic=new c.SliderValueLogic(n.props.min,n.props.max,!!n.props.isDiscrete),n}return i.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.isDiscrete===e.isDiscrete&&this.props.min===e.min&&this.props.max===e.max||(this.sliderValueLogic=new c.SliderValueLogic(e.min,e.max,!!e.isDiscrete))},t.prototype.getSliderHandleAriaAttributes=function(e){return{"aria-label":this.props.ariaLabel,"aria-valuemax":this.props.isDiscrete?Math.floor(this.props.max):this.props.max,"aria-valuemin":this.props.isDiscrete?Math.ceil(this.props.min):this.props.min,"aria-valuenow":e}},t.prototype.render=function(){var e=p.getSliderStyles(),t=void 0,n=void 0,o=void 0,s=void 0;h(this.props.value)?(t=this.sliderValueLogic.calculateSliderPositionAsProportion(this.props.value),o=this.getSliderHandleAriaAttributes(this.props.value)):(t=this.sliderValueLogic.calculateSliderPositionAsProportion(this.props.value.from),n=this.sliderValueLogic.calculateSliderPositionAsProportion(this.props.value.to),o=this.getSliderHandleAriaAttributes(this.props.value.from),s=this.getSliderHandleAriaAttributes(this.props.value.to));var c=this.getTickCount(),u=this.getIndicatorAndDataBarPositions(t,n);return r.createElement("div",{style:i.__assign({},e.OuterContainer,this.props.style||{}),"data-tb-test-id":this.props.testId},r.createElement("div",{style:e.TrackAndHandleContainer},c>1&&r.createElement(l.SliderTickBarWidget,{testId:this.props.testId,tickCount:c}),r.createElement(d.SliderTrackWidget,{rangeIndicatorBarPosition:u.indicatorBarPosition,dataBarPosition:u.dataBarPosition,handleIsBeingDragged:this.state.areHandlesBeingDragged,isRangeHandleFocused:this.state.isRangeHandleFocused,testId:this.props.testId}),r.createElement(a.SliderHandleContainer,{onHandleDragStart:this.onHandleDragStart,onHandleDragMove:this.onHandleDragMove,onHandleDragEnd:this.onHandleDragEnd,onHandleKeyDown:this.onHandleKeyDown,onBothHandleDragStart:this.onBothHandleDragStart,onBothHandleDragMove:this.onBothHandleDragMove,onBothHandleDragEnd:this.onBothHandleDragEnd,onRangeHandleFocus:this.handleRangeHandleFocus,handles:{leftHandlePosition:t,rightHandlePosition:n},handlesAriaAttributes:{leftHandleAriaAttributes:o,rightHandleAriaAttributes:s},disabled:this.props.disabled,testId:this.props.testId})))},t}(r.Component);t.SliderBaseWidget=u;var h=function(e){return"number"==typeof e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.setDefaultRootContainerId=function(t){e.defaultStackingRootId=t},e.getDefaultRootContainer=function(){var t=e.defaultStackingRootId?document.getElementById(e.defaultStackingRootId):document.body;if(!t)throw Error("Could not find stacking root.");return t},e}();t.StackingRootConfig=o},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.idCounter=1,this.classNameLookup={},this.rawSelectorLookup={},"undefined"!=typeof document&&this.initializeStyleSheet(e)}return e.prototype.addRawSelector=function(e,t){var n=this.toRuleBody(t);if(e in this.rawSelectorLookup)throw new Error(e+" has already been defined.");this.rawSelectorLookup[e]=!0,this.addRule(e+" {"+n+"}")},e.prototype.addClass=function(e,t){var n=this.toRuleBody(e),o=this.classNameLookup[n];if(o){if(t&&t!==o)throw new Error("Attempting to define css rule using class name '"+t+"', but a class with the given\n           rule body already exists under class name '"+o+"'. Rule body: "+n+".");return o}return t||(t="shared-widgets_"+this.idCounter++),this.classNameLookup[n]=t,this.addRule("."+t+" {"+n+"}"),t},e.prototype.addAnimation=function(e,t){var n=e.options,o=JSON.stringify(e),i=this.classNameLookup[o];if(i){if(t&&t!==i)throw new Error("Attempting to define css animation using class name '"+t+"', but a css rule with that\n           definition already exists under class name '"+i+"'. Definition: "+e);return i}var r=this.addKeyframes(e.keyframes),s=this.addClass({"animation-duration":n.durationMs/1e3+"s","animation-timing-function":n.timingFunction,"animation-iteration-count":""+(n.count===1/0?"infinite":n.count),"animation-direction":n.direction,"animation-name":r},t);return this.classNameLookup[o]=s,s},e.prototype.dispose=function(){var e=this.styleSheet.ownerNode;e.parentElement.removeChild(e)},e.prototype.addKeyframes=function(e){var t=this,n=e.fromCSSLines,o=e.toCSSLines,i=e.tweenFrames,r="shared-widgets_"+this.idCounter++,s=[{percent:0,cssLines:n},{percent:100,cssLines:o}].concat(i),a=s.map(function(e){return e?e.percent+"% { "+t.toRuleBody(e.cssLines)+" }":""});return this.addRule("@keyframes "+r+" { "+a.join(" ")+"}"),r},e.prototype.toRuleBody=function(e){return Object.keys(e).map(function(t){if(t.toLowerCase()!==t)throw new Error("The CSS prop '"+t+"' should be written kebab-case, not camelCase");return t+": "+e[t]+";"}).join("")},e.prototype.addRule=function(e){try{this.styleSheet.insertRule(e,this.styleSheet.cssRules.length)}catch(t){throw new Error(t+". Stylesheet injection of "+e+" failed.  This browser may not support the given CSS rule or selector")}},e.prototype.initializeStyleSheet=function(e){var t="tableau-widgets-appendedCustomStyle-"+e,n=document.createElement("style");n.setAttribute("type","text/css"),n.id=t,n.appendChild(document.createTextNode("")),document.head.appendChild(n),this.styleSheet=document.getElementById(t).sheet},e}();t.StyleSheet=o;var i=new o("singleton");t.SingletonStyleSheet=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={NonBreakingSpace:" "};t.Unicode=o},function(e,t,n){"use strict";function o(e){return"number"==typeof e.clientX}function i(e){return!!e.touches}function r(e){if(o(e))return{x:e.clientX,y:e.clientY};if(i(e))return{x:e.touches[0].clientX,y:e.touches[0].clientY};throw Error("Could not identify event as either MouseEvent or TouchEvent")}Object.defineProperty(t,"__esModule",{value:!0}),t.isMouseEvent=o,t.isTouchEvent=i,t.getClientPosition=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(6),s=n(5),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isKeyboardPressed=!1,t.handleActive=function(e){t.props.onActive&&t.props.onActive(e)},t.handleFocus=function(e){t.props.onFocus&&t.props.onFocus(e)},t.handleHover=function(e){t.props.onHover&&t.props.onHover(e)},t.handleClick=function(e){t.props.disabled||t.props.handleClick(e)},t.handleKeyUp=function(e){t.props.disabled||t.props.disableTabAccessibility||(!t.isKeyboardPressed||" "!==e.key&&"Enter"!==e.key?t.props.onKeyUp&&t.props.onKeyUp(e):(t.props.handleClick(e),t.isKeyboardPressed=!1))},t.handleKeyDown=function(e){t.props.disabled||t.props.disableTabAccessibility||(" "!==e.key&&"Enter"!==e.key||(t.isKeyboardPressed=!0,e.preventDefault()),t.props.onKeyDown&&t.props.onKeyDown(e))},t.handleBlur=function(){t.isKeyboardPressed=!1,t.props.onBlur&&t.props.onBlur()},t}return o.__extends(t,e),t.prototype.render=function(){var e={disabled:this.props.disabled,handleActive:this.handleActive,handleFocus:this.handleFocus,handleHover:this.handleHover,interactiveStyles:this.props.interactiveStyle,pointerClick:this.handleClick},t={"aria-disabled":this.props.disabled,"data-tb-test-id":this.props.testId,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,role:this.props.role,style:this.props.style,tabIndex:this.props.disabled?void 0:this.props.disableTabAccessibility?-1:0,title:this.props.title};return t["radio"===this.props.role?"aria-checked":"aria-pressed"]=this.props.selected,i.createElement(r.InteractiveDomWrapper,o.__assign({},e),i.createElement("div",o.__assign({},t),this.props.label,this.props.children))},t.defaultProps={role:"button"},t}(s.DynamicThemeComponent);t.ButtonBase=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,n,o){void 0===n&&(n=0);for(var i=n;i<e.length+n;i++){var r=i%e.length;if(t.call(o,e[r],r))return r}return-1};t.findIndex=o},function(e,t,n){"use strict";function o(e){throw new Error("Unexpected object: "+e)}function i(e){return"Left"===e||"Right"===e}function r(e){return!i(e)}function s(e){switch(e){case"Top":return"Right";case"Right":return"Bottom";case"Bottom":return"Left";case"Left":return"Top";default:return o(e)}}function a(e){switch(e){case"Top":return"Left";case"Left":return"Bottom";case"Bottom":return"Right";case"Right":return"Top";default:return o(e)}}function l(e,t){var n=d(e),o=d(t);return n.containsRectangle(o)}function d(e){var t=e.left,n=e.right,o=e.top,i=e.bottom;return new f(t,n,o,i)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(1);t.assertNever=o,t.NumberOfSides=4,t.isHorizontalSide=i,t.isVerticalSide=r,t.getNextSideClockwise=s,t.getNextSideCounterClockwise=a;var p=function(){function e(e,t){if(this.min=e,this.max=t,t<e)throw new Error("max less than min")}return e.prototype.equals=function(e){return this.containsInterval(e)&&e.containsInterval(this)},e}();t.Interval=p;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.__extends(t,e),t.prototype.containsNumber=function(e){return this.min<=e&&e<=this.max},t.prototype.containsInterval=function(e){return this.min<=e.min&&e.max<=this.max},t}(p);t.ClosedInterval=u;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.__extends(t,e),t.prototype.containsNumber=function(e){return this.min<e&&e<this.max},t.prototype.containsInterval=function(e){var t=e.containsNumber(e.min)?this.min<e.min:this.min<=e.min,n=e.containsNumber(e.max)?e.max<this.max:e.max<=this.max;return t&&n},t}(p);t.OpenInterval=h;var g=function(){function e(){}return e.prototype.containsPoint=function(e,t){return this.xInterval.containsNumber(e)&&this.yInterval.containsNumber(t)},e.prototype.containsRectangle=function(e){return this.xInterval.containsInterval(e.xInterval)&&this.yInterval.containsInterval(e.yInterval)},e.prototype.equals=function(e){return this.containsRectangle(e)&&e.containsRectangle(this)},e}();t.Rectangle=g;var f=function(e){function t(t,n,o,i){var r=e.call(this)||this;return r.xInterval=new u(t,n),r.yInterval=new u(o,i),r}return c.__extends(t,e),t}(g);t.ClosedRectangle=f,t.containsClientRect=l},function(e,t,n){"use strict";function o(e){return!!navigator&&e.test(navigator.userAgent)}Object.defineProperty(t,"__esModule",{value:!0}),t.isIE=o(/Trident/),t.isEdge=o(/Edge\//)},function(e,t,n){"use strict";function o(e){return{container:{},button:{base:l.__assign({borderWidth:D.BorderWidth,borderRadius:D.BorderRadius,borderColor:e.primaryLineColors.normal,borderStyle:"solid",backgroundColor:x.Transparent,height:D.RowHeight,paddingLeft:k.DefaultSpace,paddingRight:k.LargeSpace+k.DefaultSpace,outline:"none",fontSize:_.Sizing.Default,fontFamily:_.FontFamily,fontWeight:"normal",color:e.primaryTextColors.normal,cursor:"default"},f.TextEllipsis,y.PreventUserSelect),interactive:{hover:{borderColor:e.primaryLineColors.hover},active:{borderColor:e.primaryLineColors.active},focus:{borderColor:e.primaryLineColors.focus},disabled:{borderColor:e.primaryLineColors.disabled,color:e.primaryTextColors.disabled}}},value:{lineHeight:e.innerRowHeight+"px"},iconContainer:{position:"absolute",right:0,height:e.innerRowHeight,borderWidth:D.BorderWidth,borderColor:e.secondaryLineColors.normal,borderStyle:"none none none solid"},icon:{marginTop:(e.innerRowHeight-S.OutlineDropdownArrowIcon.height)/2}}}function i(e){return{container:{},button:{base:l.__assign({borderTop:"none",borderRight:"none",borderLeft:"none",borderBottomWidth:D.BorderWidth,borderBottomColor:e.primaryLineColors.normal,borderBottomStyle:"solid",backgroundColor:x.Transparent,height:D.RowHeight,paddingRight:k.LargeSpace+k.DefaultSpace,outline:"none",fontSize:_.Sizing.Default,fontFamily:_.FontFamily,fontWeight:"normal",color:e.primaryTextColors.normal,cursor:"default"},f.TextEllipsis,y.PreventUserSelect),interactive:{hover:{borderBottomColor:e.primaryLineColors.hover},active:{borderBottomColor:e.primaryLineColors.active},focus:{borderBottomColor:e.primaryLineColors.focus},disabled:{borderBottomColor:e.primaryLineColors.disabled,color:e.primaryTextColors.disabled}}},value:{top:D.BorderWidth,lineHeight:e.innerRowHeight+"px"},iconContainer:{position:"absolute",right:0,border:"none"},icon:{marginTop:(e.innerRowHeight-S.LineAndTextDropdownArrowIcon.height)/2},label:{display:"block",boxSizing:"border-box",position:"relative",fontSize:_.Sizing.Tiny,fontFamily:_.FontFamily,fontWeight:"normal",color:e.secondaryTextColors.normal,lineHeight:"19px"}}}function r(e){return{container:{display:"inline-block",width:"auto"},button:{base:l.__assign({border:"none",backgroundColor:x.Transparent,height:D.RowHeight,outline:"none",fontSize:_.Sizing.Default,fontFamily:_.FontFamily,fontWeight:"normal",color:e.primaryTextColors.normal,cursor:"default",lineHeight:D.RowHeight+"px",display:"inline-block",paddingRight:S.LineAndTextDropdownArrowIcon.width},y.PreventUserSelect),interactive:{active:{color:e.primaryTextColors.active},disabled:{color:e.primaryTextColors.disabled}}},value:{lineHeight:"inherit"},iconContainer:{position:"absolute"},icon:{marginTop:(D.RowHeight-S.LineAndTextDropdownArrowIcon.height)/2}}}function s(e,t){var n=B();switch(e){case a.Outline:return t?n.OutlineDropdownDarkBackgroundStyle:n.OutlineDropdownStyle;case a.Line:return t?n.LineDropdownDarkBackgroundStyle:n.LineDropdownStyle;case a.Text:return t?n.TextDropdownDarkBackgroundStyle:n.TextDropdownStyle;default:throw new Error("DropdownWidget attempted to render invalid DropdownType: "+e)}}Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(1),d=n(0),c=n(0),p=n(7),u=n(2),h=n(36),g=n(2),f=n(18),y=n(11),v=n(3),m=n(6),b=n(4),S=n(8),C=n(27),I=n(10),T=n(5),w=n(9),D=v.TabStyles.Sizing,x=v.TabStyles.Colors,k=v.TabStyles.Spacing,_=v.TabStyles.Typography;!function(e){e[e.Outline=0]="Outline",e[e.Line=1]="Line",e[e.Text=2]="Text"}(a||(a={})),t.DropdownType=a;var B=function(){var e=D.RowHeight-2*D.BorderWidth,t={normal:x.L6,hover:x.L8,active:x.L9,focus:x.L8,disabled:x.L9Disabled},n={normal:x.L3,hover:x.L3,active:x.L3,focus:x.L3,disabled:x.L3},s={normal:_.Color.Primary,disabled:_.Color.Disabled,active:x.Black},a={normal:_.Color.Secondary,disabled:_.Color.Disabled,active:x.Black},l={normal:x.WhiteTransparentLine,hover:x.WhiteTransparentLineHover,active:x.White,focus:x.WhiteTransparentLineHover,disabled:x.WhiteDisabled},d={normal:x.WhiteTransparentLine,hover:x.WhiteTransparentLine,active:x.WhiteTransparentLine,focus:x.WhiteTransparentLine,disabled:x.WhiteTransparentLine},c={normal:_.Color.InvertedPrimary,disabled:_.Color.InvertedDisabled,active:x.White},p={normal:_.Color.InvertedSecondary,disabled:_.Color.InvertedDisabled,active:x.White},u={innerRowHeight:e,primaryLineColors:t,secondaryLineColors:n,primaryTextColors:s,secondaryTextColors:a},h={innerRowHeight:e,primaryLineColors:l,secondaryLineColors:d,primaryTextColors:c,secondaryTextColors:p};return{OutlineDropdownStyle:o(u),OutlineDropdownDarkBackgroundStyle:o(h),LineDropdownStyle:i(u),LineDropdownDarkBackgroundStyle:i(h),TextDropdownStyle:r(u),TextDropdownDarkBackgroundStyle:r(h)}};t.getDropdownStylesByType=s;var E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(t,e),t.prototype.componentDidUpdate=function(){this.props.dropdownOpen&&this.state.active&&this.setState({active:!1})},t.prototype.getDropdownIcon=function(){var e={active:this.state.active||this.props.dropdownOpen,disabled:this.props.disabled,hover:this.state.hover,onDarkBackground:this.props.onDarkBackground};return this.props.dropdownType===a.Outline?S.OutlineDropdownArrowIcon.icon(e):S.LineAndTextDropdownArrowIcon.icon(e)},t.prototype.render=function(){var e=s(this.props.dropdownType,this.props.onDarkBackground),t=l.__assign({},e.button.base,g.conditional(this.props.dropdownOpen,e.button.interactive.active)),n={disabled:this.props.disabled,style:t,onKeyDown:this.props.onKeyDown,tabIndex:this.props.disabled?-1:0,role:"combobox","aria-owns":this.props.dropdownId,"aria-haspopup":"listbox","aria-expanded":this.props.dropdownOpen,"aria-labelledby":this.props.labelledById,"data-tb-test-id":this.props.testId,title:this.props.title},o={style:e.value,title:g.conditional("string"==typeof this.props.children,this.props.children)};return c.createElement(b.Block,n,c.createElement("span",o,this.props.children),c.createElement(b.InlineBlock,{style:e.iconContainer},c.createElement(b.Img,{style:e.icon,src:this.getDropdownIcon()})))},t=l.__decorate([m.InteractiveDomHoCDecorator],t)}(d.Component);t.DropdownButtonWidget=E;var P=function(e){function t(t){var n=e.call(this,t)||this;if(n.labelId=w.generateId(),n.dropdownId=w.generateId(),n.toggleMenu=function(){n.props.disabled||n.setState(function(e,t){var n=!e.isOpen;return n?t.onOpen&&t.onOpen():t.onClose&&t.onClose(),{isOpen:n}})},n.handleSelect=function(e){n.props.onSelect(e,n.state.isOpen),n.onRequestClose()},n.handleKeyDown=function(e){if(!(n.props.disabled||n.state.isOpen||e.ctrlKey||e.altKey||e.metaKey)){var t=n.getIndexOfSelectedItem();if(g.isAlphabeticChar(e.key)){var o=h.findIndex(n.enabledItems,function(t){return!!t.keyboardAccessibleValue&&t.keyboardAccessibleValue.charAt(0).toUpperCase()===e.key.toUpperCase()},t+1,n);o>-1&&n.props.onSelect(n.enabledItems[o].value,n.state.isOpen)}else{var i=null;switch(e.key){case" ":case"Enter":n.toggleMenu();break;case"ArrowUp":t>0&&(i=n.enabledItems[t-1].value);break;case"ArrowDown":t<n.enabledItems.length-1&&(i=n.enabledItems[t+1].value);break;case"Home":i=n.enabledItems[0].value;break;case"End":i=n.enabledItems[n.enabledItems.length-1].value;break;default:return}i&&n.props.onSelect(i,n.state.isOpen),e.preventDefault(),e.stopPropagation()}}},n.onRequestClose=function(){n.toggleMenu()},n.setButtonElement=function(e){n.buttonEl=p.findDOMNode(e)},t.menuItemInfos.filter(function(e){return!!e.menuItemInfos}).length>0)throw Error("Dropdowns may not contain submenus");return n.setEnabledItems(n.props),n.state={isOpen:!1},n}return l.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.setEnabledItems(e)},t.prototype.getMenuWidth=function(){var e=void 0;if(this.props.flyoutStyle){var t=this.props.flyoutStyle.width;if("auto"===t)return t;e=parseInt(t,10)}else this.props.containerStyle&&(e=parseInt(this.props.containerStyle.width,10));if(this.buttonEl){var n=this.buttonEl.getBoundingClientRect().width;e=Math.max(n,e||0)}return e},t.prototype.getIndexOfSelectedItem=function(){var e=this;return h.findIndex(this.enabledItems,function(t){return t.value===e.props.selectedValue},0,this)},t.prototype.setEnabledItems=function(e){e.menuItemInfos?this.enabledItems=e.menuItemInfos.filter(function(e){return!e.isDivider&&!e.disabled&&!e.isUnselectable}):this.enabledItems=[]},t.prototype.getButtonDisplayValue=function(){var e=this.getIndexOfSelectedItem();return e>-1?this.enabledItems[e].textForDropdownButton||"":this.props.placeholder||""},t.prototype.render=function(){var e=this,t=s(this.props.dropdownType,this.props.onDarkBackground),n=this.props.dropdownType===a.Line&&!!this.props.label,o=l.__assign({},this.props.containerStyle,t.container),i=this.getMenuWidth(),r=l.__assign({},this.props.flyoutStyle,{width:i}),d=this.state.isOpen&&this.props.selectedValue?h.findIndex(this.props.menuItemInfos,function(t){return t.value===e.props.selectedValue}):0;return c.createElement(b.Block,{style:o,"data-tb-test-id":u.testId(this.props.testId,"Dropdown")},g.conditional(n,c.createElement("label",{style:t.label,id:this.labelId},this.props.label)),c.createElement(b.Block,{},c.createElement(E,{disabled:this.props.disabled,dropdownId:this.dropdownId,dropdownOpen:this.state.isOpen,dropdownType:this.props.dropdownType,onDarkBackground:this.props.onDarkBackground,interactiveStyles:t.button.interactive,onKeyDown:this.handleKeyDown,pointerClick:this.toggleMenu,labelledById:g.conditional(n,this.labelId),ref:this.setButtonElement,testId:u.testId(this.props.testId,"DropdownButton"),title:this.props.title},this.getButtonDisplayValue())),g.conditional(this.state.isOpen,c.createElement(C.GenericFlyoutListMenuWidget,{toggleEl:this.buttonEl,anchorEl:this.buttonEl,stackingRootId:this.props.stackingRootId,shouldReturnFocusToToggleEl:this.props.shouldReturnFocusOnClose,anchorOrigin:{vertical:I.VerticalOriginOption.bottom,horizontal:I.HorizontalOriginOption.left},allowAutoPosition:!0,scrollingRootId:this.props.scrollingRootId,handleScrollOnScrollingRoot:this.toggleMenu,onSelect:this.handleSelect,id:this.dropdownId,__INTERNAL__focusIndex:d,__INTERNAL__isListbox:!0,maxHeight:this.props.maxHeight,menuStyle:r,menuItemInfos:this.props.menuItemInfos,requestCloseAll:this.onRequestClose,zIndex:this.props.zIndex,testId:this.props.testId,__UNSUPPORTED__showSearchField:this.props.__UNSUPPORTED__showSearchField,__UNSUPPORTED__searchDefaultText:this.props.__UNSUPPORTED__searchDefaultText})))},t.defaultProps={shouldReturnFocusOnClose:!0},t}(T.DynamicThemeComponent);t.GenericDropdownWidget=P},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(4),s=n(2),a=n(0),l=n(6),d=n(3),c={border:"1px solid white"},p=function(e){return{base:{width:e.size,height:e.size,backgroundColor:e.color.toLowerCase(),boxSizing:"border-box"},interactive:{hover:o.__assign({},c,{cursor:e.disabled?"normal":"pointer"}),active:c}}},u=function(e){function t(t){var n=e.call(this,t)||this;return n.handleHover=function(e){n.setState({hover:e})},n.handleActive=function(e){n.setState({active:e})},n.handleClick=function(){n.props.disabled||n.props.handleClick(n.props.color.toLowerCase())},n.state={hover:!1,active:!1},n}return o.__extends(t,e),t.prototype.render=function(){var e=p(this.props),t={interactiveStyles:e.interactive,handleHover:this.handleHover,handleActive:this.handleActive,pointerClick:this.handleClick,disabled:this.props.disabled};return a.createElement(l.InteractiveDomWrapper,t,a.createElement("div",{style:o.__assign({},e.base,s.conditional(this.props.selected,c)),"aria-selected":this.props.selected,"data-tb-test-id":s.testId(this.props.testId,"ColorSwatch",this.props.color.toLowerCase())},s.conditional(!this.props.disabled,a.createElement("div",{style:this.getInnerBorderStyle()}))))},t.prototype.getInnerBorderStyle=function(){return{borderWidth:1,borderStyle:"solid",borderColor:(this.props.selected||this.state.hover||this.state.active)&&d.TabStyles.Colors?d.TabStyles.Colors.F9:"transparent",width:"100%",height:"100%",boxSizing:"border-box"}},t}(i.Component);t.ColorSwatchWidget=u;var h;!function(e){e[e.Default=0]="Default",e[e.Minimal=1]="Minimal"}(h||(h={})),t.ColorGridType=h;var g;!function(e){e[e.Dark=0]="Dark",e[e.Light=1]="Light",e[e.MaestroFlowColors=2]="MaestroFlowColors"}(g||(g={})),t.ColorGridPreset=g;var f=function(e){function t(t){var n=e.call(this,t)||this;return n.handleSwatchClicked=function(e){n.props.disabled||n.props.handleSwatchClicked(e.toLowerCase())},n.getColorSwatchGridBuilder=function(e){switch(e){default:case h.Default:return n.buildDefaultColorSwatchGrid();case h.Minimal:return n.buildMinimalColorSwatchGrid()}},n.preset=n.props.colorsPreset||g.Dark,n}return o.__extends(t,e),t.prototype.render=function(){return this.props.colorsPreset&&this.props.colorsPreset!==this.preset&&(this.preset=this.props.colorsPreset),a.createElement(r.Block,{"data-tb-test-id":s.testId(this.props.testId,"ColorGrid"),tabIndex:0},a.createElement(l.InteractiveDomWrapper,{interactiveStyles:{focus:{outline:"none"}}},this.getColorSwatchGridBuilder(this.props.gridType)))},t.prototype.getColorPreset=function(){switch(this.preset){default:case g.Dark:return d.TabStyles.ColorPickerPresets.Dark;case g.Light:return d.TabStyles.ColorPickerPresets.Light;case g.MaestroFlowColors:return d.TabStyles.ColorPickerPresets.MaestroFlowColors}},t.prototype.buildMinimalColorSwatchGrid=function(){this.colorsPerColumn=4;for(var e=[],n=this.getColorPreset(),o=[],i=[],r=0,s=0;s<n.length;s++){var l=n[s].toLowerCase(),c={color:l,handleClick:this.handleSwatchClicked,key:"swatch-"+l,size:15,selected:this.props.selectedColor===l,disabled:this.props.disabled,testId:this.props.testId};i.push(a.createElement(u,c)),r+=1,r===this.colorsPerColumn&&(o.push(a.createElement("div",{style:{border:"1px solid "+d.TabStyles.Colors.L6},key:"group-"+s},i)),r===this.colorsPerColumn&&(e.push(a.createElement("div",{key:"column-"+s,style:{float:"left",marginTop:0,marginRight:0,marginBottom:0,marginLeft:e.length?t.groupSpacingPx:0}},o)),o=[],r=0),i=[])}return a.createElement("div",{style:{display:"flex"},tabIndex:0},e)},t.prototype.buildDefaultColorSwatchGrid=function(){this.colorsPerColumn=6;for(var e=[],n=this.getColorPreset(),o=[],i=[],r=0,s=0;s<n.length;s++){var l=n[s].toLowerCase(),c={color:l,handleClick:this.handleSwatchClicked,key:"swatch-"+l,size:15,selected:this.props.selectedColor===l,disabled:this.props.disabled,testId:this.props.testId};i.push(a.createElement(u,c)),r+=1;var p=1===r&&e.length<2||3===r&&e.length>=2;(r===this.colorsPerColumn||p)&&(o.push(a.createElement("div",{style:{border:"1px solid "+d.TabStyles.Colors.L6},key:"group-"+s},i)),p&&o.push(a.createElement("div",{style:{width:15,height:t.dividerHeightPx},key:"divider-"+s})),r===this.colorsPerColumn&&(e.push(a.createElement("div",{key:"column-"+s,style:{float:"left",marginTop:0,marginRight:0,marginBottom:0,marginLeft:e.length?t.groupSpacingPx:0}},o)),o=[],r=0),i=[])}return a.createElement("div",{style:{display:"flex"},tabIndex:0},e)},t.groupSpacingPx=4,t.dividerHeightPx=5,t}(i.Component);t.ColorGridWidget=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(42);t.setConfig=o.setConfig;var i=n(3);t.TabStyles=i.TabStyles;var r=n(2);t.conditional=r.conditional,t.testId=r.testId,t.isAlphabeticChar=r.isAlphabeticChar;var s=n(9);t.detectScrollbarWidth=s.detectScrollbarWidth,t.timeoutFocus=s.timeoutFocus;var a=n(6);t.InteractiveDomHoC=a.InteractiveDomHoC,t.InteractiveDomHoCDecorator=a.InteractiveDomHoCDecorator,t.InteractiveDomWrapper=a.InteractiveDomWrapper;var l=n(10);t.VerticalOriginOption=l.VerticalOriginOption,t.HorizontalOriginOption=l.HorizontalOriginOption,t.Overlay=l.Overlay;var d=n(45);t.PointerEventAdapterManager=d.PointerEventAdapterManager;var c=n(21);t.PointerEventWrapper=c.PointerEventWrapper,t.PointerEventHoC=c.PointerEventHoC,t.PointerEventHoCDecorator=c.PointerEventHoCDecorator;var p=n(22);t.mergeEventHandlers=p.mergeEventHandlers,t.convertToStatefulComponentClass=p.convertToStatefulComponentClass,t.getComponentName=p.getComponentName;var u=n(15);t.StackingComponentHOC=u.StackingComponentHOC,t.StackingComponentWrapper=u.StackingComponentWrapper;var h=n(77);t.HostedStackedElementContainer=h.HostedStackedElementContainer;var g=n(32);t.SingletonStyleSheet=g.SingletonStyleSheet,t.StyleSheet=g.StyleSheet;var f=n(33);t.Unicode=f.Unicode;var y=n(34);t.isMouseEvent=y.isMouseEvent,t.isTouchEvent=y.isTouchEvent,t.getClientPosition=y.getClientPosition;var v=n(13);t.ButtonType=v.ButtonType,t.ButtonWidget=v.ButtonWidget;var m=n(78);t.AutoResetButton=m.AutoResetButton;var b=n(79);t.SelectableButtonGroupSelectionBehavior=b.SelectableButtonGroupSelectionBehavior,t.SelectableButtonGroupWidget=b.SelectableButtonGroupWidget;var S=n(80);t.ChromeTooltipWidget=S.ChromeTooltipWidget;var C=n(50);t.CheckBoxWidget=C.CheckBoxWidget;var I=n(98);t.CheckBoxWithLabelGroupWidget=I.CheckBoxWithLabelGroupWidget;var T=n(51);t.CheckBoxWithLabelWidget=T.CheckBoxWithLabelWidget;var w=n(99);t.DateTimeInputWidget=w.DateTimeInputWidget,t.DateTimeInputType=w.DateTimeInputType;var D=n(26);t.DialogPositioningBehavior=D.DialogPositioningBehavior,t.DialogType=D.DialogType,t.DialogWidget=D.DialogWidget;var x=n(111);t.DialogFooterButtonsWidget=x.DialogFooterButtonsWidget;var k=n(112);t.DiscreteProgressBarWidget_UNFINISHED=k.DiscreteProgressBarWidget_UNFINISHED;var _=n(4);t.Block=_.Block,t.InlineBlock=_.InlineBlock,t.Img=_.Img;var B=n(114);t.DropdownWidget=B.DropdownWidget;var E=n(39);t.DropdownType=E.DropdownType,t.GenericDropdownWidget=E.GenericDropdownWidget;var P=n(5);t.DynamicThemeComponent=P.DynamicThemeComponent;var L=n(117);t.ExpandoDirection=L.ExpandoDirection,t.ExpandoWidget=L.ExpandoWidget;var R=n(118);t.FlyoutListMenuWidget=R.FlyoutListMenuWidget;var H=n(27);t.GenericFlyoutListMenuWidget=H.GenericFlyoutListMenuWidget;var O=n(119);t.IconButtonWidget=O.IconButtonWidget;var F=n(24);t.InputLabelWidget=F.InputLabelWidget;var W=n(120);t.IntegerStepperWidget=W.IntegerStepperWidget;var M=n(123);t.LineTextFieldWidget=M.LineTextFieldWidget;var A=n(58);t.TextMenuDisplayFormatter=A.TextMenuDisplayFormatter;var z=n(17);t.OutlineTextFieldWidget=z.OutlineTextFieldWidget;var U=n(125);t.RadioLayoutType=U.RadioLayoutType,t.RadioButtonWithLabelGroupWidget=U.RadioButtonWithLabelGroupWidget;var N=n(128);t.RichTextEditOutlineWidget_UNFINISHED=N.RichTextEditOutlineWidget_UNFINISHED;var j=n(59);t.RichTextEditWidget_UNFINISHED=j.RichTextEditWidget_UNFINISHED;var G=n(56);t.SearchFieldWidget=G.SearchFieldWidget;var V=n(12);t.TextInputType=V.TextInputType,t.TextFieldInputWidget=V.TextFieldInputWidget;var K=n(129);t.ToggleTextWidget=K.ToggleTextWidget,t.SelectedToggle=K.SelectedToggle;var q=n(40);t.ColorGridWidget=q.ColorGridWidget,t.ColorGridPreset=q.ColorGridPreset,t.ColorGridType=q.ColorGridType;var $=n(131);t.ColorPickerWidget=$.ColorPickerWidget;var X=n(134);t.ActivitySpinnerSize=X.ActivitySpinnerSize,t.ActivitySpinnerWidget=X.ActivitySpinnerWidget;var Y=n(60);t.OpenEndedAt=Y.OpenEndedAt,t.SliderWidget=Y.SliderWidget;var Q=n(141);t.RangeSliderWidget=Q.RangeSliderWidget;var J=n(62);t.TabActivationMode=J.TabActivationMode,t.TabListAlignment=J.TabListAlignment,t.TabsWidget=J.TabsWidget;var Z=n(147);t.ToastType=Z.ToastType,t.ToastWidget=Z.ToastWidget;var ee=n(65);t.InteractiveLinkWidget=ee.InteractiveLinkWidget},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=n(20),r=n(43),s=n(30),a=n(66),l=n(44),d=function(e){e.styleMediaQueries&&a.StyleMediaQueryManager.setMediaStyleQueries(e.styleMediaQueries)},c=function(e){e.styles&&(o.overrideTabStyles(e.styles),l.WidgetManager.rerenderWidgets())},p=function(e){e.defaultStackingRootId&&s.StackingRootConfig.setDefaultRootContainerId(e.defaultStackingRootId)},u=function(e){e.defaultScrollingRootId&&r.ScrollingRootConfig.setDefaultRootContainerId(e.defaultScrollingRootId)},h=function(e){e.suppressClickBustingClassName&&(i.ClickBustingConfig.suppressionClassName=e.suppressClickBustingClassName)},g=function(e){c(e),p(e),u(e),d(e),h(e)};t.setConfig=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.setDefaultRootContainerId=function(t){e.defaultScrollingRootId=t},e.getDefaultRootContainer=function(){var t=e.defaultScrollingRootId?document.getElementById(e.defaultScrollingRootId):document.body;if(!t)throw Error("Could not find scrolling root with the id scrollingRootId.");return t},e}();t.ScrollingRootConfig=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.registerWidget=function(t){e.widgets.push(t)},e.unregisterWidget=function(t){e.widgets=e.widgets.filter(function(e){return e!==t})},e.rerenderWidgets=function(){for(var t=0;t<e.widgets.length;t++)e.widgets[t].forceUpdate()},e.widgets=[],e}();t.WidgetManager=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.prototype.getHtmlAttributes=function(e){return{onDoubleClick:e.pointerDoubleClick?function(t){e.disabled||e.pointerDoubleClick(t)}:void 0,onMouseDown:e.pointerDown?function(t){e.disabled||e.pointerDown(t)}:void 0,onMouseUp:e.pointerUp?function(t){e.disabled||e.pointerUp(t)}:void 0,onClick:e.pointerClick?function(t){e.disabled||e.pointerClick(t)}:void 0}},e}(),i=function(){function e(){}return e.adapterFactory=function(){return new o},e}();t.PointerEventAdapterManager=i},function(e,t,n){function o(e,t,n){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError(s);return r(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),i(e,t,{leading:o,maxWait:t,trailing:a})}var i=n(68),r=n(31),s="Expected a function";e.exports=o},function(e,t,n){"use strict";function o(){return k.RowHeight}function i(){return _.DefaultSpace}function r(){return{backgroundColor:D.F7Disabled,borderColor:D.Transparent,color:B.Color.Disabled}}function s(){return C.__assign({fontSize:B.Sizing.Default,fontFamily:B.FontFamily,fontWeight:"normal",color:B.Color.Primary,cursor:"default",display:"inline-block",paddingLeft:o(),paddingRight:o(),paddingTop:0,paddingBottom:0,position:"relative",textAlign:"center",borderStyle:"solid",borderWidth:k.BorderWidth,borderRadius:k.BorderRadius,height:k.RowHeight,lineHeight:k.RowHeight-2*k.BorderWidth+"px",minWidth:k.ButtonMinWidth,boxSizing:"border-box",outline:"none",whiteSpace:"nowrap"},T.PreventUserSelect)}function a(){return{base:C.__assign({},s(),{backgroundColor:D.AttentionLight,borderColor:D.AttentionLight,color:B.Color.InvertedPrimary}),interactive:{hover:{backgroundColor:D.AttentionLight,borderColor:D.L8,color:B.Color.InvertedPrimary},focus:{backgroundColor:D.AttentionLight,borderColor:D.L8,color:B.Color.InvertedPrimary},active:{backgroundColor:D.AttentionDark,borderColor:D.AttentionDark,color:B.Color.InvertedPrimary},disabled:r()}}}function l(){return{base:C.__assign({},s(),{backgroundColor:D.F5,borderColor:D.L5,color:B.Color.Primary}),interactive:{hover:{backgroundColor:D.F5,borderColor:D.L8,color:B.Color.Primary},focus:{backgroundColor:D.F5,borderColor:D.L8,color:B.Color.Primary},active:{backgroundColor:D.F8,borderColor:D.L8,color:B.Color.InvertedPrimary},disabled:r()}}}function d(){return{base:C.__assign({},s(),{backgroundColor:D.GoLight,borderColor:D.GoLight,color:B.Color.InvertedPrimary}),interactive:{hover:{backgroundColor:D.GoLight,borderColor:D.L8,color:B.Color.InvertedPrimary},focus:{backgroundColor:D.GoLight,borderColor:D.L8,color:B.Color.InvertedPrimary},active:{backgroundColor:D.GoDark,borderColor:D.GoDark,color:B.Color.InvertedPrimary},disabled:r()}}}function c(){return{base:C.__assign({},s(),{backgroundColor:D.White,borderColor:D.L6,color:B.Color.PrimaryMedium}),interactive:{hover:{backgroundColor:D.White,borderColor:D.L8,color:B.Color.Primary},focus:{backgroundColor:D.White,borderColor:D.L8,color:B.Color.PrimaryMedium},active:{backgroundColor:D.F2,borderColor:D.L9,color:B.Color.Primary},disabled:C.__assign({},r(),{backgroundColor:D.White,borderColor:D.L9Disabled,color:B.Color.Disabled})}}}function p(){return{base:C.__assign({},s(),{backgroundColor:D.Transparent,borderColor:D.L6,color:B.Color.InvertedPrimary}),interactive:{hover:{backgroundColor:D.Transparent,borderColor:D.White,color:B.Color.InvertedPrimary},focus:{backgroundColor:D.Transparent,borderColor:D.White,color:B.Color.InvertedPrimary},active:{backgroundColor:D.WhiteTransparent,borderColor:D.White,color:B.Color.InvertedPrimary},disabled:C.__assign({},r(),{borderColor:D.WhiteDisabled,backgroundColor:D.Transparent,color:B.Color.InvertedDisabled})}}}function u(){return{base:C.__assign({},s(),{backgroundColor:D.White,borderColor:D.GoLight,color:B.Color.PrimaryDark,borderWidth:k.ButtonBorderWidth,lineHeight:k.RowHeight-2*k.ButtonBorderWidth+"px"}),interactive:{hover:{backgroundColor:D.White,borderColor:D.GoDark,color:D.Black},focus:{backgroundColor:D.White,borderColor:D.L8,color:D.Black},active:{backgroundColor:D.F2,borderColor:D.GoDark,color:D.Black},disabled:C.__assign({},r(),{backgroundColor:D.White,borderColor:D.GoDarkDisabled,color:B.Color.Disabled})}}}function h(){return{base:C.__assign({},s(),{backgroundColor:D.White,borderColor:D.AttentionLight,color:B.Color.PrimaryDark,borderWidth:k.ButtonBorderWidth,lineHeight:k.RowHeight-2*k.ButtonBorderWidth+"px"}),interactive:{hover:{backgroundColor:D.White,borderColor:D.AttentionDark,color:D.Black},focus:{backgroundColor:D.White,borderColor:D.L8,color:D.Black},active:{backgroundColor:D.F2,borderColor:D.AttentionDark,color:D.Black},disabled:C.__assign({},r(),{backgroundColor:D.White,borderColor:D.AttentionDarkDisabled,color:B.Color.Disabled})}}}function g(){return{base:C.__assign({},s(),{fontWeight:"bold",backgroundColor:D.Transparent,borderColor:D.Transparent,color:D.GoLight}),interactive:{hover:{backgroundColor:D.F2,borderColor:D.F2,color:D.GoLight},focus:{backgroundColor:D.F2,borderColor:D.F2,color:D.GoLight},active:{backgroundColor:D.F2,borderColor:D.F2,color:D.GoDark},disabled:C.__assign({},r(),{backgroundColor:D.Transparent,borderColor:D.Transparent,color:D.GoDarkDisabled})}}}function f(){return{base:C.__assign({},s(),{backgroundColor:D.Transparent,borderColor:D.Transparent,color:B.Color.Primary}),interactive:{hover:{backgroundColor:D.F2,borderColor:D.F2,color:B.Color.Primary},focus:{backgroundColor:D.F2,borderColor:D.F2,color:B.Color.Primary},active:{backgroundColor:D.F2_5,borderColor:D.F2_5,color:D.Black},disabled:C.__assign({},r(),{backgroundColor:D.Transparent,borderColor:D.Transparent,color:B.Color.Disabled})}}}function y(){return{base:C.__assign({},s(),{fontWeight:"bold",backgroundColor:D.Transparent,borderColor:D.Transparent,color:B.Color.Primary}),interactive:{hover:{backgroundColor:D.F2,borderColor:D.F2,color:B.Color.Primary},focus:{backgroundColor:D.F2,borderColor:D.F2,color:B.Color.Primary},active:{backgroundColor:D.F2_5,borderColor:D.F2_5,color:D.Black},disabled:C.__assign({},r(),{backgroundColor:D.Transparent,borderColor:D.Transparent,color:B.Color.Disabled})}}}function v(){return C.__assign({alignItems:"center",cursor:"default",display:"inline-flex",justifyContent:"center",minHeight:20,minWidth:20,outline:"none"},T.PreventUserSelect)}function m(){return{base:C.__assign({},v(),{backgroundColor:D.Transparent,color:B.Color.PrimaryLight,fontFamily:B.FontFamily,fontSize:B.Sizing.Default,fontWeight:"normal",whiteSpace:"nowrap"}),interactive:{hover:{backgroundColor:D.F3,color:B.Color.Primary},focus:{backgroundColor:D.F3,color:B.Color.Primary},active:{backgroundColor:D.F5,color:B.Color.Primary},disabled:{color:B.Color.Disabled,opacity:x.Disabled}}}}function b(){return{base:C.__assign({},v()),interactive:{disabled:{opacity:x.Disabled}}}}function S(e){var t;switch(e){case I.ButtonType.Attention:t=a();break;case I.ButtonType.Grey:t=l();break;case I.ButtonType.Go:t=d();break;case I.ButtonType.Outline:t=c();break;case I.ButtonType.LightOutline:t=p();break;case I.ButtonType.OutlineGo:t=u();break;case I.ButtonType.OutlineAttention:t=h();break;case I.ButtonType.Text:t=g();break;case I.ButtonType.DarkText:t=f();break;case I.ButtonType.DarkBoldText:t=y();break;case I.ButtonType.Icon:t=m();break;case I.ButtonType.IconOutline:t=b();break;default:throw new Error("Attempted to retrieve style for unsupported ButtonType: "+e)}return t}Object.defineProperty(t,"__esModule",{value:!0});var C=n(1),I=n(13),T=n(11),w=n(3),D=w.TabStyles.Colors,x=w.TabStyles.Opacity,k=w.TabStyles.Sizing,_=w.TabStyles.Spacing,B=w.TabStyles.Typography;t.getDefaultSpacing=i,t.getButtonStyle=S},function(e,t,n){"use strict";function o(e){return s.createElement("div",{style:l},s.createElement("div",{style:i(e.width)},e.content))}function i(e){return r.__assign({},d,{width:e})}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=n(0),a=n(3);t.Padding=8,t.BorderWidth=a.TabStyles.Sizing.BorderWidth,t.OuterMaxWidth=250,t.OuterMaxHeight=250,t.InnerMaxWidth=t.OuterMaxWidth-2*(t.Padding+t.BorderWidth),t.InnerMaxHeight=t.OuterMaxHeight-2*(t.Padding+t.BorderWidth);var l={flexGrow:0,padding:t.Padding,borderWidth:t.BorderWidth,borderStyle:"solid",borderColor:a.TabStyles.Colors?a.TabStyles.Colors.L5:null,borderRadius:a.TabStyles.Sizing?a.TabStyles.Sizing.BorderRadius:null,boxShadow:a.TabStyles.Shadow.Standard,backgroundColor:a.TabStyles.Colors?a.TabStyles.Colors.White:null},d={maxWidth:t.InnerMaxWidth,maxHeight:t.InnerMaxHeight,overflowY:"auto"};t.ChromeTooltipBox=o},function(e,t,n){"use strict";function o(e){var t=e.direction,n=e.style,o=s(t).map(function(e){return e.x+","+e.y}).join(" ");return a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:n,height:i(t),width:r(t)},a.createElement("polyline",{points:o,fill:p,stroke:c,strokeWidth:u}))}function i(e){return"Left"===e||"Right"===e?t.Height:t.Width}function r(e){return"Left"===e||"Right"===e?t.Width:t.Height}function s(e){switch(e){case"Up":return[{x:0,y:t.Width},{x:t.Height/2,y:0},{x:t.Height,y:t.Width}];case"Down":return[{x:0,y:0},{x:t.Height/2,y:t.Width},{x:t.Height,y:0}];case"Left":return[{x:t.Width,y:0},{x:0,y:t.Height/2},{x:t.Width,y:t.Height}];case"Right":return[{x:0,y:0},{x:t.Width,y:t.Height/2},{x:0,y:t.Height}];default:return d.assertNever(e)}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),l=n(3),d=n(37);t.Height=12,t.Width=6;var c=l.TabStyles.Colors.L5,p=l.TabStyles.Colors.White,u=l.TabStyles.Sizing.BorderWidth;t.ChromeTooltipArrow=o},function(e,t,n){"use strict";function o(e,t){var n={checked:e.checked,disabled:e.disabled,focus:t.focus,hover:e.hover||t.hover};return e.indeterminate?d.CheckBoxMixedIcon.icon(n):d.CheckBoxIcon.icon(n)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(0),s=n(2),a=n(4),l=n(6),d=n(8),c=n(5),p=n(3),u=function(){return{baseDiv:{flexShrink:0,height:d.CheckBoxIcon.height,marginLeft:p.TabStyles.Spacing.DefaultSpace-d.CheckBoxIcon.padding,marginRight:p.TabStyles.Spacing.DefaultSpace-d.CheckBoxIcon.padding,minWidth:d.CheckBoxIcon.width,verticalAlign:"middle",width:d.CheckBoxIcon.width},checkbox:{cursor:"default",height:d.CheckBoxIcon.height,margin:0,opacity:0,verticalAlign:"top",width:d.CheckBoxIcon.width},fakeCheckBox:{height:d.CheckBoxIcon.height,position:"absolute",verticalAlign:"top",width:d.CheckBoxIcon.width},noLeftMargin:{marginLeft:-d.CheckBoxIcon.padding}}},h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.handleFormChange=function(e){!t.props.disabled&&t.props.handleChange&&t.props.handleChange(e.target.checked)},t.handleInputRef=function(e){t.inputElement=e,t.setInputElementsIndeterminateProp()},t.handleActive=function(e){t.setState({active:e})},t.handleFocus=function(e){t.setState({focus:!t.state.active&&e})},t.handleHover=function(e){t.setState({hover:e})},t}return i.__extends(t,e),t.prototype.componentDidUpdate=function(){this.setInputElementsIndeterminateProp()},t.prototype.setInputElementsIndeterminateProp=function(){this.inputElement&&(this.inputElement.indeterminate=this.props.indeterminate)},t.prototype.render=function(){var e=u(),t={"data-tb-test-id":s.testId(this.props.testId,"CheckBox"),checked:this.props.checked,disabled:this.props.disabled,id:this.props.id,name:this.props.name,onChange:this.handleFormChange,ref:this.handleInputRef,style:e.checkbox,type:"checkbox"};return r.createElement(l.InteractiveDomWrapper,{handleActive:this.handleActive,handleFocus:this.handleFocus,handleHover:this.handleHover},r.createElement(a.InlineBlock,{style:i.__assign({},e.baseDiv,s.conditional(this.props.removeLeftMargin,e.noLeftMargin))},r.createElement(a.Img,{src:o(this.props,this.state),style:e.fakeCheckBox}),r.createElement("input",i.__assign({},t))))},t}(c.DynamicThemeComponent);t.CheckBoxWidget=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(50),s=n(4),a=n(20),l=n(5),d=n(6),c=n(24),p=n(3),u=function(){return{label:{alignItems:"center",display:"flex",height:p.TabStyles.Sizing.ListRowHeight},text:{overflow:"hidden",paddingTop:"1px",textOverflow:"ellipsis",width:"100%"}}},h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){var e=u();return i.createElement(s.Block,{className:a.ClickBustingConfig.suppressionClassName,style:this.props.containerStyle},i.createElement(c.InputLabelWidget,{disabled:this.props.disabled,style:e.label,testId:this.props.testId},i.createElement(r.CheckBoxWidget,o.__assign({},this.props,{hover:this.state.hover})),i.createElement(s.InlineBlock,{"aria-label":this.props.label,style:e.text},this.props.label)))},t=o.__decorate([d.InteractiveDomHoCDecorator],t)}(l.DynamicThemeComponent);t.CheckBoxWithLabelWidget=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(7),s=n(12),a=n(100),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wasClearTextFired=!1,t.handleInputRef=function(e){t.props.textFieldInputProps.inputRef&&t.props.textFieldInputProps.inputRef(e),t.inputElement=e},t.handleClearTextWrapper=function(){t.props.textFieldInputProps.disabled||(t.wasClearTextFired=!0,t.props.handleClearText(),t.inputElement.focus(),window.setTimeout(function(){t.resetWasClearTextFired()},50))},t.handleBlur=function(){window.setTimeout(function(){if(t.wasClearTextFired||t.isTextFieldClearButtonActiveElement())return void t.resetWasClearTextFired();t.props.textFieldInputProps.handleBlur&&t.props.textFieldInputProps.handleBlur()},0)},t.handleTextFieldClearButtonRef=function(e){t.textFieldClearButton=e},t}return o.__extends(t,e),t.prototype.isTextFieldClearButtonActiveElement=function(){return!!this.textFieldClearButton&&document.activeElement===r.findDOMNode(this.textFieldClearButton)},t.prototype.resetWasClearTextFired=function(){this.wasClearTextFired=!1},t.prototype.render=function(){var e={inputRef:this.handleInputRef,handleBlur:this.handleBlur},t=o.__assign({},this.props.textFieldInputProps,e),n={ref:this.handleTextFieldClearButtonRef,pointerClick:this.handleClearTextWrapper},r=o.__assign({},this.props.textFieldClearButtonProps,n),l=this.props.textFieldInputProps.text&&!this.props.textFieldInputProps.disabled?i.createElement(a.TextFieldClearButton,o.__assign({},r)):void 0;return i.createElement("span",{style:{lineHeight:"normal",position:"relative"}},i.createElement(s.TextFieldInputWidget,o.__assign({},t)),l)},t}(i.Component);t.TextFieldWithClearIcon=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t,n){this.listenersAdded=!1,this.elementRef=e,this.onPointerMove=t,this.onPointerUp=n}return e.prototype.addListeners=function(){this.listenersAdded||(window.addEventListener("touchend",this.onPointerUp,!0),window.addEventListener("mouseup",this.onPointerUp,!0),window.addEventListener("touchmove",this.onPointerMove,{capture:!0,passive:!1}),window.addEventListener("mousemove",this.onPointerMove,{capture:!0,passive:!1}),this.elementRef.setCapture&&this.elementRef.setCapture(),this.listenersAdded=!0)},e.prototype.removeListeners=function(){this.listenersAdded&&(window.removeEventListener("touchend",this.onPointerUp,!0),window.removeEventListener("mouseup",this.onPointerUp,!0),window.removeEventListener("touchmove",this.onPointerMove,{capture:!0}),window.removeEventListener("mousemove",this.onPointerMove,{capture:!0}),this.elementRef.releaseCapture&&this.elementRef.releaseCapture(),this.listenersAdded=!1)},e}();t.GlobalPointerEventCapturer=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(7),r=n(0),s=n(4),a=n(2),l=n(36),d=n(3),c=n(115),p=n(5),u=n(116),h=d.TabStyles.Colors,g=d.TabStyles.Spacing,f=d.TabStyles.Typography,y=function(){return{backgroundColor:h.White,padding:g.DefaultSpace,outline:"none",fontSize:f.Sizing.Default,fontFamily:f.FontFamily,fontWeight:"normal",color:f.Color.Primary}},v=function(e){return!e.isDivider&&!e.disabled&&!e.isUnselectable},m=function(e){function t(t){var n=e.call(this,t)||this;return n.stopPropagation=function(e){e.stopPropagation()},n.handleKeyDown=function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){if(a.isAlphabeticChar(e.key)&&!n.props.letterSearchDisabled){var t=n.findNextMenuItemStartingWithLetter(e.key);return t>-1&&n.setActiveItemState(function(){return t},!0),e.stopPropagation(),void e.preventDefault()}var o=n.props.menuItemInfos.length;switch(e.key){case"ArrowUp":n.setActiveItemState(function(){return n.findNextEnabledItemIndex(n.state.activeItemIndex,-1)},!0);break;case"ArrowDown":n.setActiveItemState(function(){return n.findNextEnabledItemIndex(n.state.activeItemIndex,1)},!0);break;case"ArrowLeft":n.props.onLeftArrowKeyDown&&n.props.onLeftArrowKeyDown();break;case"Home":n.setActiveItemState(function(){return n.findNextEnabledItemIndex(-1,1)},!0);break;case"End":n.setActiveItemState(function(){return n.findNextEnabledItemIndex(o,-1)},!0);break;case" ":case"Enter":n.selectActive();break;default:return}e.preventDefault(),e.stopPropagation()}},n.handleKeyUp=function(e){switch(e.key){case"Escape":n.props.onEscapeKeyUp?n.props.onEscapeKeyUp():n.props.requestCloseAll();break;default:return}e.preventDefault(),e.stopPropagation()},n.handleItemHover=function(e){var t=n.state.activeItemIndex,o=t===n.displayedSubmenuItemIndex,i=e-t==1;o&&i?(clearTimeout(n.submenuTimeoutId),n.submenuTimeoutId=window.setTimeout(function(){return n.setActiveItemState(function(){return e},!1)},250)):n.setActiveItemState(function(){return e},!1)},n.handleItemSelect=function(e){n.props.onSelect(e)},n.handleSubmenuShown=function(e){n.displayedSubmenuItemIndex=e},n.state={activeItemIndex:n.props.__INTERNAL__focusIndex||0,keyboardFocused:!0},n}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.domNode=i.findDOMNode(this),this.addStopPropogationListeners()},t.prototype.componentWillReceiveProps=function(e){if(this.props.menuItemInfos!==e.menuItemInfos){var t=void 0;this.state.activeItemIndex>-1&&this.state.activeItemIndex<this.props.menuItemInfos.length&&(t=this.props.menuItemInfos[this.state.activeItemIndex].keyboardAccessibleValue);var n=Math.max(0,l.findIndex(e.menuItemInfos,function(e){return v(e)&&e.keyboardAccessibleValue===t},0,this));this.state.activeItemIndex!==n&&this.setState({activeItemIndex:n})}},t.prototype.componentWillUnmount=function(){this.removeStopPropogationListeners()},t.prototype.selectActive=function(){if(this.state.activeItemIndex<0||this.state.activeItemIndex>=this.props.menuItemInfos.length)return void console.warn("Tried to select a invalid index: "+this.state.activeItemIndex);var e=this.props.menuItemInfos[this.state.activeItemIndex];v(e)&&this.props.onSelect(e.value)},t.prototype.addStopPropogationListeners=function(){this.domNode.addEventListener("scroll",this.stopPropagation),this.domNode.addEventListener("wheel",this.stopPropagation)},t.prototype.removeStopPropogationListeners=function(){this.domNode.removeEventListener("scroll",this.stopPropagation),this.domNode.removeEventListener("wheel",this.stopPropagation)},t.prototype.findNextEnabledItemIndex=function(e,t){for(var n=this.props.menuItemInfos.length,o=e+t;o!==e;o+=t)if(o>=n?o=0:o<0&&(o=n-1),v(this.props.menuItemInfos[o]))return o;return e},t.prototype.findNextMenuItemStartingWithLetter=function(e){return l.findIndex(this.props.menuItemInfos,function(t){return v(t)&&t.keyboardAccessibleValue&&t.keyboardAccessibleValue.charAt(0).toUpperCase()===e.charAt(0).toUpperCase()},this.state.activeItemIndex+1,this)},t.prototype.setActiveItemState=function(e,t){var n=this;clearTimeout(this.submenuTimeoutId),this.setState(function(n,o){return{activeItemIndex:e(),keyboardFocused:t}},function(){n.displayedSubmenuItemIndex=void 0,n.state.keyboardFocused||n.props.letterSearchDisabled||n.domNode.focus()})},t.prototype.shouldShowCheckGutter=function(){for(var e=0;e<this.props.menuItemInfos.length;e++)if(void 0!==this.props.menuItemInfos[e].checked)return!0;return!1},t.prototype.buildMenuFromMenuItemInfos=function(){var e,t=this,n=this.shouldShowCheckGutter();return this.props.menuItemInfos.map(function(o,i){if(o.isDivider)e=r.createElement(u.DividerWidget,{key:i});else{if(!o.value)throw new Error("Each non-divider menu item requires a value");e=r.createElement(c.MenuItemWidget,{value:o.value,key:i,itemIndex:i,isHighlighted:!o.disabled&&!o.isUnselectable&&t.state.activeItemIndex===i,onHover:o.disabled||o.isUnselectable?null:t.handleItemHover,onSelect:t.handleItemSelect,onSubmenuShown:t.handleSubmenuShown,keyboardFocused:t.state.keyboardFocused&&!t.props.focusDisabled,checked:o.checked,showCheckGutter:n,role:a.conditional(t.props.__INTERNAL__isListbox,"option"),disabled:o.disabled,isUnselectable:o.isUnselectable,menuItemInfos:o.menuItemInfos,subMenuStyle:o.subMenuStyle,subMenuMaxHeight:o.subMenuMaxHeight,subMenuAllowAutoPosition:t.props.subMenuAllowAutoPosition,subMenuShouldAutoPositionOnScrollingRootScroll:t.props.subMenuShouldAutoPositionOnScrollingRootScroll,stackingRootId:t.props.stackingRootId,scrollingRootId:t.props.scrollingRootId,requestCloseAll:t.props.requestCloseAll,displayFormatterBoundWithData:o.displayFormatterBoundWithData,zIndex:t.props.zIndex,testId:t.props.testId})}return e})},t.subMenuMarginTop=function(){var e=y();return-(parseFloat(e.paddingTop||e.padding||0)+parseFloat(e.borderWidthTop||e.borderTop||e.borderWidth||e.border||0))},t.prototype.render=function(){var e=o.__assign({},y(),this.props.menuStyle,a.conditional(!!this.props.maxHeight,{maxHeight:this.props.maxHeight,overflowY:"auto",WebkitOverflowScrolling:"touch"}));return r.createElement(s.Block,{id:this.props.id,style:e,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onMouseEnter:this.props.onMouseEnter,tabIndex:-1,role:this.props.__INTERNAL__isListbox?"listbox":"menu","data-tb-test-id":this.props.testId+"-ListMenu"},this.buildMenuFromMenuItemInfos())},t}(p.DynamicThemeComponent);t.ListMenuWidget=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.subscribeOrUnsubscribeDocument=function(t,n){n?(t.addEventListener("mousedown",this.handleClickAway.bind(this),!0),t.addEventListener("touchstart",this.handleClickAway.bind(this),!0)):(t.removeEventListener("mousedown",this.handleClickAway.bind(this),!0),t.removeEventListener("touchstart",this.handleClickAway.bind(this),!0));for(var o=t.getElementsByTagName("iframe"),i=0;i<o.length;i++)e.trySubscribeOrUnscribeDocument(o[i].contentDocument,n)},e.trySubscribeOrUnscribeDocument=function(t,n){try{e.subscribeOrUnsubscribeDocument(t,n)}catch(e){}},e.subscribe=function(t,n){return!this.callback&&n&&(this.callback=n),0===this.domNodes.length&&e.trySubscribeOrUnscribeDocument(document,!0),this.domNodes.push(t),function(){e.unsubscribe(t)}},e.unsubscribe=function(t){this.domNodes=this.domNodes.filter(function(e){return e!==t}),0===this.domNodes.length&&(this.callback=null,e.trySubscribeOrUnscribeDocument(document,!1))},e.handleClickAway=function(e){if(this.callback){for(var t=e.target,n=0,o=this.domNodes;n<o.length;n++){if(o[n].contains(t))return}this.callback()}},e.domNodes=[],e}();t.GlobalPointerDownOutsideListener=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(2),s=n(4),a=n(8),l=n(3),d=n(17),c=n(25),p=n(12);t.TextInputType=p.TextInputType;var u=n(52),h=l.TabStyles.Sizing,g=l.TabStyles.Spacing,f=function(){return{iconPadding:{paddingRight:a.SearchIcon.width+2*g.DefaultSpace},icon:{position:"absolute",right:0,paddingRight:g.DefaultSpace,paddingLeft:g.DefaultSpace,marginTop:(h.RowHeight-a.SearchIcon.height)/2},outlineContainer:{width:"100%"}}},y=function(e){function t(t){var n=e.call(this,t)||this;return n.handleCancelHover=function(e){n.props.disabled||n.setState({cancelHover:e})},n.state=o.__assign({},n.state,{cancelHover:!1}),n}return o.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.text||this.setState({cancelHover:!1})},t.prototype.getIcon=function(){var e=!this.props.disabled&&(this.state.cancelHover||this.state.inputActive||this.state.inputFocus||this.state.inputHover);return a.SearchIcon.icon({active:e,onDarkBackground:this.props.onDarkBackground})},t.prototype.getInputStyle=function(){var e=d.getTextOutlineStyles({onDarkBackground:this.props.onDarkBackground}),t=f();return o.__assign({},e.input.base,t.iconPadding,r.conditional(this.state.cancelHover,e.input.interactive.hover),this.props.inputStyle)},t.prototype.render=function(){var e=f(),t=d.getTextOutlineStyles({onDarkBackground:this.props.onDarkBackground}),n=o.__assign({},t.placeholder.base,this.props.placeholderStyle,r.conditional(this.props.disabled,t.placeholder.disabled),{maxWidth:"calc(100% - "+e.iconPadding.paddingRight+"px)"}),a=this.isPlaceholderShowing(),l=this.getInputStyle(),c={type:this.props.type,style:l,interactiveStyles:t.input.interactive,text:this.props.text,testId:this.props.testId,handleChange:this.props.handleChange,handleEnter:this.props.handleEnter,handleEscape:this.props.handleEscape,disabled:this.props.disabled,handleActive:this.handleInputActive,handleFocus:this.handleInputFocus,handleHover:this.handleInputHover,handleBlur:this.props.handleBlur,inputRef:this.props.inputRef,readOnly:this.props.readOnly,maxLength:this.props.maxLength,name:this.props.name,ariaLabel:this.props.placeholder,shouldSelectTextOnFocus:this.props.shouldSelectTextOnFocus},p={pointerClick:this.props.handleCancelSearch,handleHover:this.handleCancelHover,testId:this.props.testId,active:this.state.inputActive||this.state.inputHover||this.state.inputFocus,disabled:this.props.disabled,onDarkBackground:this.props.onDarkBackground};return i.createElement(s.Block,{style:this.props.containerStyle},r.conditional(!this.props.text,i.createElement(s.Img,{src:this.getIcon(),style:e.icon,"data-tb-test-id":this.props.testId+"-SearchIcon"})),r.conditional(a,i.createElement("label",{style:n,"data-tb-test-id":this.props.testId+"-Placeholder"},this.props.placeholder)),i.createElement(u.TextFieldWithClearIcon,{handleClearText:this.props.handleCancelSearch,textFieldInputProps:c,textFieldClearButtonProps:p}))},t}(c.TextFieldBase);t.SearchFieldWidget=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(58),i=function(e){var t=[];return e.forEach(function(e){t.push({menuItemInfos:e.menuItemInfos?i(e.menuItemInfos):void 0,displayFormatterBoundWithData:o.TextMenuDisplayFormatter(e.displayValue,e.title),keyboardAccessibleValue:e.displayValue,textForDropdownButton:e.displayValue,value:e.value,disabled:e.disabled,isDivider:e.isDivider,subMenuStyle:e.subMenuStyle,isUnselectable:!1,checked:e.checked,subMenuMaxHeight:e.subMenuMaxHeight})}),t};t.convertMenuItemInfoToGeneric=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(2),s=n(9),a=n(4),l=n(18),d=n(11),c=n(3),p=n(8),u=c.TabStyles.Sizing,h=c.TabStyles.Colors,g=c.TabStyles.Spacing,f=c.TabStyles.Typography,y=function(){return{MenuItem:o.__assign({height:u.ListRowHeight,paddingLeft:g.DefaultSpace,paddingRight:g.DefaultSpace,lineHeight:u.ListRowHeight+"px",cursor:"default",position:"relative"},l.TextEllipsis,d.PreventUserSelect),Highlighted:{backgroundColor:h.F2_5},Active:{backgroundColor:h.F3},WithCheckGutter:{paddingLeft:p.MenuItemCheckIcon.checkedItemPaddingLeft},WithSubMenu:{paddingRight:p.MenuItemArrowIcon.width},Disabled:{color:f.Color.Disabled},ArrowIcon:{position:"absolute",right:0}}},v=function(e,t){return function(n){function l(o){var i=n.call(this,o)||this;return i.handleRef=function(e){i.renderedTextFormatter=e},i.handleMouseOver=function(n){t||i.setState({title:s.isElementOverflownX(i.renderedTextFormatter)?e:void 0})},i.state={title:t},i}return o.__extends(l,n),l.prototype.getSubMenuIcon=function(){if(this.props.hasSubMenu){var e=y(),t=p.MenuItemArrowIcon.icon({disabled:this.props.disabled});return i.createElement(a.Img,{style:e.ArrowIcon,src:t,"aria-hidden":!0})}return null},l.prototype.getCheckedStyles=function(){return{backgroundImage:"url('"+p.MenuItemCheckIcon.icon({active:this.props.active||this.props.isHighlighted,disabled:this.props.disabled})+"')",backgroundRepeat:"no-repeat",backgroundPosition:g.DefaultSpace+"px center"}},l.prototype.render=function(){var t=y(),n=o.__assign({},t.MenuItem,r.conditional(this.props.hasSubMenu,t.WithSubMenu),r.conditional(this.props.isHighlighted,t.Highlighted),r.conditional(this.props.active,t.Active),r.conditional(this.props.disabled,t.Disabled),r.conditional(this.props.showCheckGutter,t.WithCheckGutter),r.conditional(this.props.checked,this.getCheckedStyles())),s={style:n,title:this.state.title,ref:this.handleRef,onMouseOver:this.handleMouseOver,"data-tb-test-id":r.testId(this.props.testId,"TextMenuItem")};return i.createElement("div",o.__assign({},s),e,this.getSubMenuIcon())},l}(i.Component)};t.TextMenuDisplayFormatter=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(7),s=n(4),a=n(0),l=n(6),d=function(){return{userSelect:"text",WebkitUserSelect:"text"}},c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleKeyDown=function(e){t.props.disabled||"Enter"!==e.key||e.shiftKey||t.props.handleEnter&&(t.props.handleEnter(),e.preventDefault(),e.stopPropagation())},t.changeObserver=new MutationObserver(function(){return t.handleChange()}),t.handleKeyUp=function(){return t.handleChange()},t.callInputRef=function(e){t.props.handleInputRef(r.findDOMNode(e))},t}return o.__extends(t,e),t.prototype.handleChange=function(){this.props.disabled||this.props.handleChange&&this.props.handleChange()},t.prototype.componentDidMount=function(){var e=r.findDOMNode(this);e&&this.changeObserver.observe(e,{childList:!0,characterData:!0})},t.prototype.componentWillUnmount=function(){this.changeObserver.disconnect()},t.prototype.render=function(){var e={"data-tb-test-id":this.props.testId+"-TextInput",style:o.__assign({},d(),this.props.style),contentEditable:!0,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,ref:this.callInputRef};return a.createElement(s.Block,e)},t=o.__decorate([l.InteractiveDomHoCDecorator],t)}(i.Component);t.RichTextEditWidget_UNFINISHED=c},function(e,t,n){"use strict";function o(e){var t=i.__assign({},e,{testId:s.testId(e.testId,"Slider")});return r.createElement(a.SliderBaseWidget,i.__assign({},t))}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(0),s=n(2),a=n(29);!function(e){e[e.Min=0]="Min",e[e.Max=1]="Max"}(t.OpenEndedAt||(t.OpenEndedAt={})),t.SliderWidget=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(28),i=function(){function e(e,t,n){this.min=n?Math.ceil(e):e,this.max=n?Math.floor(t):t,this.roundToIntegers=n}return e.prototype.calculateSliderPositionAsProportion=function(e){if(this.min>this.max)return NaN;var t=this.roundToIntegers?Math.round(e):e,n=(t-this.min)/(this.max-this.min);return o.clamp(n,0,1)},e.prototype.calculateNewSliderValueFromProportion=function(e){if(this.min>this.max)return NaN;if(e<0)return this.min;if(e>1)return this.max;var t=this.roundToIntegers?Math.round(e*(this.max-this.min))+this.min:e*(this.max-this.min)+this.min;return o.clamp(t,this.min,this.max)},e.prototype.calculateNewSliderValueForKey=function(e,t){var n=this.roundToIntegers?Math.round(t):t,i=(this.max-this.min)/100,r=(this.max-this.min)/10,s=this.roundToIntegers?1:i,a=this.roundToIntegers?Math.max(Math.round(r),1):r,l=n;switch(e){case"ArrowLeft":case"ArrowDown":l=n-s;break;case"ArrowUp":case"ArrowRight":l=n+s;break;case"PageDown":l=n-a;break;case"PageUp":l=n+a;break;case"Home":l=this.min;break;case"End":l=this.max;break;default:return}return o.clamp(l,this.min,this.max)},e.prototype.calculateNewSliderRangeValueForKey=function(e,t){var n=Math.max(t.to-t.from,0),i=(this.max-this.min)/100,r=(this.max-this.min)/10,s=t;switch(e){case"ArrowDown":case"ArrowLeft":if(t.from>this.min){var a=Math.max(t.from-i,this.min);s={from:a,to:a+n}}break;case"ArrowUp":case"ArrowRight":if(t.to<this.max){var l=Math.min(t.to+i,this.max);s={from:l-n,to:l}}break;case"PageDown":if(t.from>this.min){var a=Math.max(t.from-r,this.min);s={from:a,to:a+n}}break;case"PageUp":if(t.to<this.max){var l=Math.min(t.to+r,this.max);s={from:l-n,to:l}}break;case"Home":s={from:this.min,to:this.min+n};break;case"End":s={from:this.max-n,to:this.max};break;default:return}return{from:o.clamp(s.from,this.min,this.max),to:o.clamp(s.to,this.min,this.max)}},e.KeysRelevantForManipulatingSlider={ArrowLeft:!0,ArrowRight:!0,ArrowUp:!0,ArrowDown:!0,PageUp:!0,PageDown:!0,Home:!0,End:!0},e}();t.SliderValueLogic=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(63),s=n(28),a=n(2),l=n(142),d=n(145),c=n(146);!function(e){e[e.Automatic=0]="Automatic",e[e.Manual=1]="Manual"}(t.TabActivationMode||(t.TabActivationMode={}));var p;!function(e){e[e.Left=0]="Left",e[e.Justified=1]="Justified"}(p=t.TabListAlignment||(t.TabListAlignment={}));var u=function(e){function t(t){var n=e.call(this,t)||this;return n.setActiveIndex=function(e){n.setState({activeIndex:e,focusedIndex:e},function(){n.props.onActiveIndexChanged&&n.props.onActiveIndexChanged(n.state.activeIndex)})},n.setFocusedIndex=function(e){n.setState({focusedIndex:e})},n.validateProps(t),n.state={activeIndex:s.clamp(t.initialActiveIndex,0,t.tabs.length-1),focusedIndex:-1},n.activator=l.TabActivatorFactory.CreateInstance(n),n}return o.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.validateProps(e)},t.prototype.validateProps=function(e){if(0===e.tabs.length)throw Error("Invalid 'tabs' count: 1+ tabs are required")},t.prototype.buildTabId=function(e){return a.testId(this.props.testId,"tab"+(e+1))},t.prototype.buildTabPanelId=function(e){return a.testId(this.props.testId,"tabpanel"+(e+1))},t.prototype.renderTabList=function(e){var t=this;return this.props.tabs.map(function(e,n){var s={ariaControls:t.buildTabPanelId(n),id:t.buildTabId(n),index:n,isActive:t.isTabActive(n),isFocused:t.isTabFocused(n),onBlur:function(){return t.setFocusedIndex(-1)},onClick:t.setActiveIndex,onFocus:t.setFocusedIndex,onKeyDown:t.activator.handleKeyDown,tabContainerStyles:r.GetTabLabelContainerStyles(),tabContent:e.tabContent};return t.props.dimensionOverrides&&t.props.dimensionOverrides.tabHorizontalPadding&&(s.tabContainerStyles.paddingRight=t.props.dimensionOverrides.tabHorizontalPadding,s.tabContainerStyles.paddingLeft=t.props.dimensionOverrides.tabHorizontalPadding),void 0!==t.props.tabListAlignment&&t.props.tabListAlignment!==p.Justified||(s.flexPercent=100/t.props.tabs.length),i.createElement(d.TabWidget,o.__assign({key:n},s))})},t.prototype.isTabActive=function(e){return e===this.state.activeIndex},t.prototype.isTabFocused=function(e){return e===this.state.focusedIndex},t.prototype.isAnchorTabActive=function(){return this.isTabActive(this.props.anchorTabIndex)},t.prototype.renderTabPanel=function(e){var t={ariaLabelledBy:this.buildTabId(e),containerStyle:this.getTabPanelContainerStyle(e),content:this.props.tabs[e].panelContent,id:this.buildTabPanelId(e)};return i.createElement(c.TabPanel,o.__assign({},t))},t.prototype.getTabPanelContainerStyle=function(e){return e!==this.props.anchorTabIndex?r.NonAnchorTabPanelStyles:this.isAnchorTabActive()?r.ActiveTabVisibility:r.InactiveTabVisibility},t.prototype.isAnIconDefinedInTabs=function(){for(var e=0;e<this.props.tabs.length;e++)if(this.props.tabs[e].tabContent.icon)return!0;return!1},t.prototype.render=function(){var e=this.isAnIconDefinedInTabs(),t={"aria-label":this.props.ariaLabel,"data-tb-test-id":a.testId(this.props.testId,"tablist"),role:"tablist",style:r.GetTabListStyles(e)};this.props.dimensionOverrides&&this.props.dimensionOverrides.tabHeight&&(t.style.height=this.props.dimensionOverrides.tabHeight);var n={"data-tb-test-id":a.testId(this.props.testId,"tabpanel-scroll-container"),style:r.TabPanelScrollContainerStyles},s={"data-tb-test-id":a.testId(this.props.testId,"tabpanel-container"),style:r.TabPanelContainerStyles};return i.createElement("div",null,i.createElement("div",o.__assign({},t),this.renderTabList(e)),i.createElement("div",o.__assign({},n),i.createElement("div",o.__assign({},s),this.renderTabPanel(this.props.anchorTabIndex),a.conditional(!this.isAnchorTabActive(),this.renderTabPanel(this.state.activeIndex)))))},t}(i.PureComponent);t.TabsWidget=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(3),r=n(18),s=n(11),a=i.TabStyles.Spacing,l=i.TabStyles.Colors,d=i.TabStyles.Typography.Color;t.ActiveTabVisibility={visibility:"visible"},t.InactiveTabVisibility={visibility:"hidden"},t.TabsWidgetDimensions={tabLabelPadding:a.ExtraLargeSpace,textOnlyTabListHeight:42,iconAndTextTabListHeight:54,tabIndicatorHeight:3},t.NonAnchorTabPanelStyles={position:"absolute",width:"100%",left:"0",top:"0"},t.TabPanelScrollContainerStyles={overflowY:"auto",padding:a.LargeSpace,position:"relative",WebkitOverflowScrolling:"touch"},t.TabPanelContainerStyles={position:"relative"},t.GetTabListStyles=function(e){return o.__assign({display:"flex",backgroundColor:l.F2,fontFamily:i.TabStyles.Typography.FontFamily,fontSize:e?i.TabStyles.Typography.Sizing.Tiny:i.TabStyles.Typography.Sizing.Default,height:e?t.TabsWidgetDimensions.iconAndTextTabListHeight:t.TabsWidgetDimensions.textOnlyTabListHeight},s.PreventUserSelect)},t.GetSingleTabStyles=function(e){var t={display:"inline-block",height:"100%",outline:"none",position:"relative"};return e&&(t.flex=e+"%",t.overflow="hidden"),t},t.GetTabLabelContainerStyles=function(){return{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",paddingRight:t.TabsWidgetDimensions.tabLabelPadding,paddingLeft:t.TabsWidgetDimensions.tabLabelPadding}},t.DefaultTabLabelStyles=o.__assign({color:d.PrimaryLight},r.TextEllipsis),t.TabContentStyle={alignItems:"center",display:"flex",justifyContent:"center"},t.LabelStyle=o.__assign({display:"block"},r.TextEllipsis),t.BaseTabIndicatorStyles={backgroundColor:"transparent",height:t.TabsWidgetDimensions.tabIndicatorHeight,position:"absolute",bottom:0,width:"100%"},t.FocusedTabIndicatorStyles={backgroundColor:l.Focus},t.HoveredTabIndicatorStyles={backgroundColor:l.L5},t.ActiveTabIndicatorStyles={backgroundColor:l.L8},t.PressedTabIndicatorStyles={backgroundColor:l.L9}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.tabsWidget=e,this.handleKeyDown=this.handleKeyDown.bind(this)}return e.prototype.tabIndexFromKeyDown=function(e,t){var n=this.tabsWidget.props.tabs.length;switch(t){case"ArrowRight":return(e+1)%n;case"ArrowLeft":return(n+e-1)%n;case"Home":return 0;case"End":return n-1;default:return-1}},e.preventDefaultAndStopPropagation=function(e){e.preventDefault(),e.stopPropagation()},e}();t.BaseTabActivator=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(2),s=n(6),a={textDecoration:"underline"},l={active:a,focus:a,hover:a},d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault(),t.props.onClick&&t.props.onClick()},t}return o.__extends(t,e),t.prototype.render=function(){var e={"data-tb-test-id":r.testId(this.props.testId,"InteractiveLink"),href:this.props.href||"#",onClick:this.handleClick,style:o.__assign({},this.props.style,{textDecoration:"none"})};return i.createElement(s.InteractiveDomWrapper,{interactiveStyles:l},i.createElement("a",o.__assign({},e),this.props.text))},t}(i.PureComponent);t.InteractiveLinkWidget=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(42),i=function(){function e(){}return e.setMediaStyleQueries=function(t){e.mediaQueryLists={};for(var n=0;n<t.length;n++){var o=t[n],i=e.registerMediaQuery(o),r=e.getMediaQueryListListener(o);r(i),i.addListener(r)}},e.registerMediaQuery=function(t){var n=t.mediaQuery;return n in e.mediaQueryLists||(e.mediaQueryLists[n]=window.matchMedia(n)),e.mediaQueryLists[n]},e.getMediaQueryListListener=function(e){return function(t){t.matches?o.setConfig({styles:e.matchingStyle}):o.setConfig({styles:e.nonMatchingStyle})}},e}();t.StyleMediaQueryManager=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.subscribeOrUnsubscribeWindows=function(t,n,o){n?(t.addEventListener("mouseup",o,!0),t.addEventListener("touchend",o,!0)):(t.removeEventListener("mouseup",o,!0),t.removeEventListener("touchend",o,!0));for(var i=t.document.getElementsByTagName("iframe"),r=0;r<i.length;r++)e.trySubscribeOrUnscribeWindows(i[r].contentWindow,n,o)},e.trySubscribeOrUnscribeWindows=function(t,n,o){try{e.subscribeOrUnsubscribeWindows(t,n,o)}catch(e){}},e.subscribe=function(t){return e.trySubscribeOrUnscribeWindows(window,!0,t),function(){e.trySubscribeOrUnscribeWindows(window,!1,t)}},e}();t.GlobalPointerUpListener=o},function(e,t,n){function o(e,t,n){function o(t){var n=m,o=b;return m=b=void 0,w=t,C=e.apply(o,n)}function c(e){return w=e,I=setTimeout(h,t),D?o(e):C}function p(e){var n=e-T,o=e-w,i=t-n;return x?d(i,S-o):i}function u(e){var n=e-T,o=e-w;return void 0===T||n>=t||n<0||x&&o>=S}function h(){var e=r();if(u(e))return g(e);I=setTimeout(h,p(e))}function g(e){return I=void 0,k&&m?o(e):(m=b=void 0,C)}function f(){void 0!==I&&clearTimeout(I),w=0,m=T=b=I=void 0}function y(){return void 0===I?C:g(r())}function v(){var e=r(),n=u(e);if(m=arguments,b=this,T=e,n){if(void 0===I)return c(T);if(x)return I=setTimeout(h,t),o(T)}return void 0===I&&(I=setTimeout(h,t)),C}var m,b,S,C,I,T,w=0,D=!1,x=!1,k=!0;if("function"!=typeof e)throw new TypeError(a);return t=s(t)||0,i(n)&&(D=!!n.leading,x="maxWait"in n,S=x?l(s(n.maxWait)||0,t):S,k="trailing"in n?!!n.trailing:k),v.cancel=f,v.flush=y,v}var i=n(31),r=n(69),s=n(73),a="Expected a function",l=Math.max,d=Math.min;e.exports=o},function(e,t,n){var o=n(70),i=function(){return o.Date.now()};e.exports=i},function(e,t,n){var o=n(71),i="object"==typeof self&&self&&self.Object===Object&&self,r=o||i||Function("return this")();e.exports=r},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(72))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){function o(e){if("number"==typeof e)return e;if(r(e))return s;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=d.test(e);return n||c.test(e)?p(e.slice(2),n?2:8):l.test(e)?s:+e}var i=n(31),r=n(74),s=NaN,a=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,c=/^0o[0-7]+$/i,p=parseInt;e.exports=o},function(e,t,n){function o(e){return"symbol"==typeof e||i(e)&&a.call(e)==r}var i=n(75),r="[object Symbol]",s=Object.prototype,a=s.toString;e.exports=o},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){"use strict";function o(e,t){var n=i.__assign({},a,t);return r.createElement("div",i.__assign({},n),e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(0),s=function(e){return e.stopPropagation()},a={onClick:s,onContextMenu:s,onDoubleClick:s,onDrag:s,onDragEnd:s,onDragEnter:s,onDragExit:s,onDragLeave:s,onDragOver:s,onDragStart:s,onDrop:s,onMouseDown:s,onMouseEnter:s,onMouseLeave:s,onMouseMove:s,onMouseOver:s,onMouseOut:s,onMouseUp:s,onKeyDown:s,onKeyPress:s,onKeyUp:s,onBlur:s,onChange:s,onInput:s,onInvalid:s,onSubmit:s};t.PortalEventTrap=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),i=function(){function e(){var e=this;this.internalEncapsulatedIsShown=!1,this.render=function(t){if(e.internalEncapsulatedIsShown)throw new Error("Cannot render the element; it is already shown");e.anchor=document.createElement("div"),o.render(t,e.anchor),e.internalEncapsulatedIsShown=!0},this.remove=function(){e.internalEncapsulatedIsShown&&(o.unmountComponentAtNode(e.anchor),e.anchor=null),e.internalEncapsulatedIsShown=!1},this.isShown=function(){return e.internalEncapsulatedIsShown}}return e}();t.HostedStackedElementContainer=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(47),s=n(35),a=n(5),l=n(3),d=n(2),c={backgroundColor:l.TabStyles.Colors.L8,borderColor:l.TabStyles.Colors.L8,color:l.TabStyles.Colors.White},p=function(e){function t(t){var n=e.call(this,t)||this;return n.handleClick=function(e){n.state.label||(n.setState({label:n.props.delayLabel}),window.setTimeout(n.handleReset,n.getDelayOrDefault()),n.props.handleClick(e))},n.handleReset=function(){n.setState({label:void 0}),n.props.handleReset()},n.state={label:void 0},n}return o.__extends(t,e),t.prototype.getDelayOrDefault=function(){return void 0!==this.props.delay?this.props.delay:5e3},t.prototype.render=function(){var e=r.getButtonStyle(this.props.buttonType);this.state.label&&(e.base=o.__assign({},e.base,c),e.interactive.disabled=o.__assign({},e.interactive.disabled,c));var t={disabled:this.props.disabled||!!this.state.label,handleClick:this.handleClick,interactiveStyle:e.interactive,style:o.__assign({},e.base,this.props.style),testId:d.testId(this.props.testId,"Button"),title:this.props.title};return i.createElement(s.ButtonBase,o.__assign({},t),this.state.label||this.props.label,this.props.children)},t}(a.DynamicThemeComponent);t.AutoResetButton=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1),r=n(0),s=n(7),a=n(2),l=n(13),d=n(36);!function(e){e.Multiple="Multiple",e.Single="Single"}(o||(o={})),t.SelectableButtonGroupSelectionBehavior=o;var c=function(e){function t(t){var n=e.call(this,t)||this;return n.childButtons=[],n.buttonElements=[],n.handleButtonRefs=[],n.handleButtonRefWrapper=function(e){return void 0===n.handleButtonRefs[e]&&(n.handleButtonRefs[e]=function(t){n.buttonElements[e]=s.findDOMNode(t)}),n.handleButtonRefs[e]},n.handleClick=function(e){var t=e.currentTarget,i=d.findIndex(n.childButtons,function(e,o){return t===n.buttonElements[o]}),r=n.childButtons[i].props.selected;n.props.selectionBehavior===o.Single&&r||n.props.onChange&&n.props.onChange(i,!r)},n.handleFocus=function(e){var t=e.target,o=d.findIndex(n.childButtons,function(e,o){return t===n.buttonElements[o]&&!e.props.disabled});o>=0&&o!==n.state.focusIndex&&n.setState({focusIndex:o})},n.handleKeyDown=function(e){var t=n.childButtons.length,i=0,r=n.state.focusIndex;if("ArrowLeft"===e.key||"ArrowUp"===e.key)i=-1;else if("ArrowDown"===e.key||"ArrowRight"===e.key)i=1;else if("Home"===e.key)r=-1,i=1;else{if("End"!==e.key)return;r=t,i=-1}e.preventDefault(),e.stopPropagation();do if((r=(r+i+t)%t)===n.state.focusIndex)return;while(n.childButtons[r].props.disabled);n.props.selectionBehavior===o.Single&&!n.isButtonSelected(r)&&n.props.onChange&&n.props.onChange(r,!0),r!==n.state.focusIndex&&n.setState({focusIndex:r},function(){void 0!==n.buttonElements[n.state.focusIndex]&&n.buttonElements[n.state.focusIndex].focus()})},n.updateChildButtons(),n.state={focusIndex:n.getInitialFocusIndex()},n}return i.__extends(t,e),t.prototype.updateChildButtons=function(){var e=[],t=0;if(r.Children.map(this.props.children,function(n){n.type===l.ButtonWidget&&(e.push(n),n.props.selected&&t++)}),e.length<2)throw Error("Invalid 'ButtonWidget' count: 2+ are required");if(this.props.selectionBehavior===o.Single&&t>1)throw Error("Invalid selected 'ButtonWidget' count: SelectableButtonGroupSelectionBehavior.Single requires one or zero buttons to be selected. "+t+" are selected");this.childButtons=e},t.prototype.getInitialFocusIndex=function(){var e=d.findIndex(this.childButtons,function(e){return e.props.selected&&!e.props.disabled});return e<0&&(e=d.findIndex(this.childButtons,function(e){return!e.props.disabled})),e},t.prototype.isButtonSelected=function(e){return this.childButtons[e].props.selected},t.prototype.renderChildren=function(){var e=this,t=0;return r.Children.map(this.props.children,function(n){if(n.type!==l.ButtonWidget)return n;var i={disableTabAccessibility:e.state.focusIndex!==t,handleClick:e.handleClick,key:t,ref:e.handleButtonRefWrapper(t),role:e.props.selectionBehavior===o.Single?"radio":"button",selected:!!n.props.selected};return t++,r.cloneElement(n,i)})},t.prototype.render=function(){this.updateChildButtons();var e=this.props.selectionBehavior===o.Single,t=i.__assign({"data-tb-test-id":a.testId(this.props.testId,"SelectableButtonGroup"),onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,role:e?"radiogroup":void 0,style:this.props.style,title:this.props.title},a.conditional(!e,{"aria-multiselectable":!0}));return r.createElement("div",i.__assign({},t),this.renderChildren())},t}(r.Component);t.SelectableButtonGroupWidget=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(37),s=n(81),a=n(48),l=n(49),d=n(41),c=1;t.DefaultOffset=a.BorderWidth+a.Padding+l.Height/2;var p="Right",u={position:"relative",display:"inline-block"},h=function(e){function n(n){var i=e.call(this,n)||this;return i.setContent=function(e){i.canceled||i.setState(function(t){return t.content?t:o.__assign({},t,{content:e})})},i.open=function(){i.props.getContent().then(i.setContent)},i.close=function(){i.setState({content:null,positioned:!1})},i.handleClick=function(e){i.state.content?i.close():i.open(),e.preventDefault()},i.handleMouseEnter=function(e){i.state.content||(i.canceled=!1,i.open())},i.handleMouseLeave=function(e){var t=e.clientX,n=e.clientY;if(i.state.content||(i.canceled=!0),i.tooltipElement){var o=i.tooltipElement.getBoundingClientRect(),s=o.left,a=o.right,l=o.top,d=o.bottom;switch(i.state.side){case"Top":d+=c;break;case"Bottom":l-=c;break;case"Left":a+=c;break;case"Right":s-=c;break;default:r.assertNever(i.state.side)}new r.ClosedRectangle(s,a,l,d).containsPoint(t,n)||i.close()}},i.updateTargetRef=function(e){i.targetElement=e},i.updateTooltipRef=function(e){i.tooltipElement=e},i.state={content:null,positioned:!1,side:n.defaultSide||p,offset:t.DefaultOffset},i}return o.__extends(n,e),n.prototype.componentDidUpdate=function(){if(this.state.content&&!this.state.positioned){if(!this.targetElement||!this.tooltipElement)throw new Error("reference to target or tooltip isn't set!");var e=(this.props.boundaryElement||document.body).getBoundingClientRect(),t=this.targetElement.getBoundingClientRect();if(!r.containsClientRect(e,t))throw new Error("boundary element doesn't contain target element!");for(var o=this.tooltipElement.getBoundingClientRect(),i=o.width,s=o.height,a=this.props.defaultSide||p,l=this.state.offset,d=0,c=n.computeTooltipRectangle(t,i,s,a,l);d<r.NumberOfSides&&!r.containsClientRect(e,c);)d++,a=r.getNextSideClockwise(a),c=n.computeTooltipRectangle(t,i,s,a,l);this.setState({positioned:!0,side:a})}},n.prototype.componentWillMount=function(){this.canceled=!1},n.prototype.componentWillUnmount=function(){this.canceled=!0},n.prototype.render=function(){return i.createElement(d.PointerEventWrapper,{pointerClick:this.handleClick},i.createElement("div",{ref:this.updateTargetRef,style:u,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this.props.children,this.renderTooltip()))},n.prototype.renderTooltip=function(){return this.state.content&&this.targetElement?i.createElement(s.ChromeTooltipDisplay,{content:this.state.content,width:this.props.width,targetElement:this.targetElement,handleRef:this.updateTooltipRef,close:this.close,positioned:this.state.positioned,side:this.state.side,offset:this.state.offset,zIndex:this.props.zIndex}):null},n.computeTooltipRectangle=function(e,t,n,o,i){var s,a;return r.isHorizontalSide(o)?(s=e.top+e.height/2-i,a="Left"===o?e.left-t:e.right):(a=e.left+e.width/2-i,s="Top"===o?e.top-n:e.bottom),{top:s,bottom:s+n,left:a,right:a+t,width:t,height:n}},n}(i.Component);t.ChromeTooltipWidget=h},function(e,t,n){"use strict";function o(e){return u.createElement(h.Overlay,{anchorEl:e.targetElement,zIndex:e.zIndex,anchorOrigin:i(e.side),stackedOrigin:r(e.side),topFromOverlaidPosition:s(e.side,e.offset),leftFromOverlaidPosition:a(e.side,e.offset)},u.createElement("div",{ref:e.handleRef,onMouseLeave:e.close},u.createElement("div",{style:l(e.positioned,e.side)},u.createElement(f.ChromeTooltipBox,{content:e.content,width:e.width}),u.createElement(y.ChromeTooltipArrow,{direction:c(e.side),style:p(e.side,e.offset)}))))}function i(e){switch(e){case"Top":return{horizontal:h.HorizontalOriginOption.centerX,vertical:h.VerticalOriginOption.top};case"Bottom":return{horizontal:h.HorizontalOriginOption.centerX,vertical:h.VerticalOriginOption.bottom};case"Left":return{horizontal:h.HorizontalOriginOption.left,vertical:h.VerticalOriginOption.centerY};case"Right":return{horizontal:h.HorizontalOriginOption.right,vertical:h.VerticalOriginOption.centerY};default:return g.assertNever(e)}}function r(e){switch(e){case"Top":return{horizontal:h.HorizontalOriginOption.left,vertical:h.VerticalOriginOption.bottom};case"Bottom":return{horizontal:h.HorizontalOriginOption.left,vertical:h.VerticalOriginOption.top};case"Left":return{horizontal:h.HorizontalOriginOption.right,vertical:h.VerticalOriginOption.top};case"Right":return{horizontal:h.HorizontalOriginOption.left,vertical:h.VerticalOriginOption.top};default:return g.assertNever(e)}}function s(e,t){return g.isHorizontalSide(e)?-1*t:0}function a(e,t){return g.isVerticalSide(e)?-1*t:0}function l(e,t){return{visibility:e?"visible":"hidden",display:"flex",flexDirection:d(t),flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"center"}}function d(e){switch(e){case"Top":return"column";case"Bottom":return"column-reverse";case"Left":return"row";case"Right":return"row-reverse";default:return g.assertNever(e)}}function c(e){switch(e){case"Top":return"Down";case"Bottom":return"Up";case"Left":return"Right";case"Right":return"Left";default:return g.assertNever(e)}}function p(e,t){var n=t-y.Height/2,o={alignSelf:"flex-start"};switch(e){case"Top":o.marginTop=-1.2,o.marginLeft=n;break;case"Bottom":o.marginBottom=-1.2,o.marginLeft=n;break;case"Left":o.marginLeft=-1.2,o.marginTop=n;break;case"Right":o.marginRight=-1.2,o.marginTop=n;break;default:g.assertNever(e)}return o}Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),h=n(10),g=n(37),f=n(48),y=n(49);t.ChromeTooltipDisplay=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckBoxSvg='<svg xmlns="http://www.w3.org/2000/svg" class="$state$" width="16" height="16">\n  <style>\n    .disabled{opacity:0.35}\n    .focus .outline{fill:#3498db}\n    .hover .outline,.active .outline{fill:#333}\n    .outline,.disabled .outline{fill:#666}\n    .check{fill:transparent}\n    .hover.checked .check,.active.checked .check{fill:#333}\n    .checked .check,.disabled.checked .check{fill:#666}\n  </style>\n  <path fill="#fff" d="M2 2h12v12H2z"/>\n  <path class="outline" d="M14 2v12H2V2h12m0-1H2c-.5 0-1 .4-1 1v12c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1z"/>\n  <path class="check" d="M7.2 12.3c-.2 0-.4-.1-.5-.2l-3-3L4.8 8l2.3 2.3 4-6.7 1.3.8L7.9 12c-.2.2-.4.3-.7.3z"/>\n</svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckBoxMixedSvg='<svg xmlns="http://www.w3.org/2000/svg" class="$state$" width="16" height="16">\n  <style>\n    .disabled{opacity:0.35}\n    .focus .outline{fill:#3498db}\n    .hover .outline,.active .outline,.hover .check,.active .check{fill:#333}\n    .outline,.disabled .outline,.check,.disabled .check{fill:#666}\n  </style>\n  <path fill="#fff" d="M2 2h12v12H2z"/>\n  <path class="outline" d="M14 2v12H2V2h12m0-1H2c-.5 0-1 .4-1 1v12c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1z"/>\n  <path class="check" d="M4 4h8v8H4z"/>\n</svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClearSvg='<svg xmlns="http://www.w3.org/2000/svg" class="$state$" width="12" height="12">\n  <style>\n    .onDarkBackground{opacity:0.5}\n    .onDarkBackground.active{opacity:1}\n    path{fill:#666}\n    .active path{fill:#333}\n    .onDarkBackground path{fill:#fff}\n  </style>\n  <path d="M8.9,2.9L3,8.9c-0.2,0.2-0.6,0.2-0.8,0l0,0C2,8.7,2,8.3,2.2,8.1l5.9-5.9C8.3,2,8.7,2,8.9,2.2l0,0 C9.1,2.4,9.1,2.7,8.9,2.9z"/>\n  <path d="M3,2.2l5.9,5.9c0.2,0.2,0.2,0.6,0,0.8l0,0c-0.2,0.2-0.6,0.2-0.8,0L2.2,3C2,2.8,2,2.4,2.2,2.2l0,0 C2.5,2,2.8,2,3,2.2z"/>\n</svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CloseButtonSvg='<svg xmlns="http://www.w3.org/2000/svg" class="$state$" width="14" height="14">\n  <style>\n    path{fill:#666}\n    .info path{fill:#0f445e}\n    .warning path{fill:#c64c30}\n    .error path{fill:#9b2f3c}\n    .success path{fill:#003f33}\n    .active path{fill:#333}\n  </style>\n  <path d="M7.7 7l4.7-4.7c.2-.2.2-.5 0-.7s-.5-.2-.7 0L7 6.3 2.3 1.6c-.2-.2-.5-.2-.7 0s-.2.5 0 .7L6.3 7l-4.7 4.7c-.2.2-.2.5 0 .7s.5.2.7 0L7 7.7l4.7 4.7c.2.2.5.2.7 0s.2-.5 0-.7L7.7 7z"/>\n</svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpandoSvg='<svg xmlns="http://www.w3.org/2000/svg" class="$state$" width="13" height="13">\n  <style>\n    path{fill:#666}\n    .active path{fill:#333}\n  </style>\n  <path d="M2.8,9.2l3.7-3.6l3.7,3.6c0.2,0.2,0.6,0.2,0.8,0s0.2-0.7,0-0.8L6.5,3.8L2,8.4\tC1.8,8.6,1.8,8.9,2,9.2C2.2,9.4,2.6,9.4,2.8,9.2z"/>\n</svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuItemArrowSvg='<svg xmlns="http://www.w3.org/2000/svg" class="$state$" width="18" height="18">\n  <style>\n    .disabled{opacity:0.35}\n    .active path{fill:#333}\n    path,.disabled path{fill:#666}\n  </style>\n  <path d="M7.3,13.2l4.6-3.5c0.1-0.1,0.1-0.2,0-0.3L7.3,5.8C7.1,5.7,7,5.8,7,6v7C7,13.2,7.1,13.3,7.3,13.2z"/>\n</svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuItemCheckSvg='<svg xmlns="http://www.w3.org/2000/svg" class="$state$" width="10" height="10">\n  <style>\n    .disabled{opacity:0.35}\n    .active path{fill:#333}\n    path,.disabled path{fill:#666}\n  </style>\n  <path d="M4.2 9.3C4 9.3 3.8 9.2 3.7 9.1l-3-3L1.8 5l2.3 2.3 4-6.7 1.3 0.8L4.9 9C4.7 9.2 4.5 9.3 4.2 9.3L4.2 9.3z" />\n</svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineAndTextDropdownArrowSvg='<svg xmlns="http://www.w3.org/2000/svg" class="$state$" width="16" height="20">\n  <style>\n    .onDarkBackground{opacity:0.5}\n    .onDarkBackground.active,.onDarkBackground.hover{opacity:1}\n    .disabled{opacity:0.35!important}\n    path,.disabled path{fill:#666}\n    .active path,.hover path{fill:#333}\n    .onDarkBackground path{fill:#fff!important}\n  </style>\n  <path d="M6.3,7h8.5C15,7,15.1,7.3,15,7.4l-4.2,5.3c-0.1,0.2-0.4,0.2-0.5,0L6,7.4C5.9,7.3,6,7,6.3,7z"/>\n</svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutlineDropdownArrowSvg='<svg xmlns="http://www.w3.org/2000/svg" class="$state$" width="18" height="18">\n  <style>\n    .onDarkBackground{opacity:0.5}\n    .onDarkBackground.active,.onDarkBackground.hover{opacity:1}\n    .disabled{opacity:0.35!important}\n    path,.disabled path{fill:#666}\n    .active path,.hover path{fill:#333}\n    .onDarkBackground path{fill:#fff!important}\n  </style>\n  <path d="M5.8,7.3l3.5,4.6c0.1,0.1,0.2,0.1,0.3,0l3.6-4.6C13.3,7.1,13.2,7,13,7H6C5.8,7,5.7,7.1,5.8,7.3z"/>\n</svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RadioButtonSvg='<svg xmlns="http://www.w3.org/2000/svg" class="$state$" width="16" height="16">\n  <style>\n    .hover .outline,.active .outline,.hover.checked .check,.active.checked .check{fill:#333}\n    .focus .outline{fill:#3498db}\n    .outline,.disabled .outline,.disabled.checked .check{fill:#666}\n    .disabled{opacity:0.35}\n    .check{fill:transparent}\n    .checked .check{fill:#666}\n  </style>\n  <circle fill="#fff" cx="8" cy="8" r="6"/>\n  <path class="outline" d="M8 2c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6 2.7-6 6-6m0-1C4.1 1 1 4.1 1 8s3.1 7 7 7 7-3.1 7-7-3.1-7-7-7z"/>\n  <circle class="check" cx="8" cy="8" r="3"/>\n</svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SearchSvg='<svg xmlns="http://www.w3.org/2000/svg" class="$state$" width="12" height="12">\n  <style>\n    .onDarkBackground{opacity:0.5}\n    .active.onDarkBackground{opacity:1}\n    path{fill:#666}\n    .active path{fill:#333}\n    .onDarkBackground path{fill:#fff}\n  </style>\n  <path d="M7.5 0C5.015 0 3 2.015 3 4.5S5.015 9 7.5 9 12 6.985 12 4.5 9.985 0 7.5 0zm0 8C5.567 8 4 6.433 4 4.5S5.567 1 7.5 1 11 2.567 11 4.5 9.433 8 7.5 8z"/><path d="M5.026 7.858l-3.96 3.96c-.243.243-.641.243-.884 0s-.243-.641 0-.884l3.96-3.96c.243-.243.641-.243.884 0s.243.641 0 .884z"/>\n</svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderHandleSvg='<svg xmlns="http://www.w3.org/2000/svg" class="$state$" width="20" height="20">\n  <style>\n    .bg{fill:#fff}\n    .outline{fill:#666}\n    .focus .outline{fill:#3498db}\n    .active .outline{fill:#333}\n    .disabled .bg{fill:#ebebeb}\n    .disabled .outline{fill:#b4b4b4}\n  </style>\n  <circle class="bg" cx="10" cy="10" r="7.5"/>\n  <path class="outline" d="M10,3c3.8,0,7,3.2,7,7s-3.2,7-7,7s-7-3.2-7-7S6.2,3,10,3 M10,2c-4.4,0-8,3.6-8,8\ts3.6,8,8,8s8-3.6,8-8S14.4,2,10,2L10,2z"/>\n</svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderLeftHandleSvg='<svg xmlns="http://www.w3.org/2000/svg" class="$state$" width="20" height="20">\n  <style>\n    .bg{fill:#fff}\n    .outline{fill:#666}\n    .focus .outline{fill:#3498db}\n    .active .outline{fill:#333}\n    .disabled .bg{fill:#ebebeb}\n    .disabled .outline{fill:#b4b4b4}\n  </style>\n  <path class="bg" d="M11.2,2.5c-4.3,0-7.7,3.3-7.7,7.5s3.5,7.5,7.8,7.5h4.3v-15H11.2z"/>\n  <path class="outline" d="M15,3v14h-3.6C7.3,17,4,13.9,4,10s3.3-7,7.4-7H15 M16,2h-4.6C6.7,2,3,5.6,3,10s3.7,8,8.4,8H16V2 L16,2z"/>\n</svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderRightHandleSvg='<svg xmlns="http://www.w3.org/2000/svg" class="$state$" width="20" height="20">\n  <style>\n    .bg{fill:#fff}\n    .outline{fill:#666}\n    .focus .outline{fill:#3498db}\n    .active .outline{fill:#333}\n    .disabled .bg{fill:#ebebeb}\n    .disabled .outline{fill:#b4b4b4}\n  </style>\n  <path class="bg" d="M7.8,2.6c4.3,0,7.8,3.3,7.8,7.4s-3.5,7.4-7.8,7.4H3.5V2.6H7.8z"/>\n  <path class="outline" d="M4,3h3.6c4.1,0,7.4,3.1,7.4,7s-3.3,7-7.4,7H4V3 M3,2v16h4.6\tc4.6,0,8.4-3.6,8.4-8s-3.7-8-8.4-8H3L3,2z"/>\n</svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StepperDownSvg='<svg xmlns="http://www.w3.org/2000/svg" class="$state$" width="18" height="11">\n  <style>\n    .onDarkBackground{opacity:0.5}\n    .onDarkBackground.active{opacity:1}\n    .disabled{opacity:0.35!important}\n    path,.disabled path{fill:#666}\n    .active path{fill:#333}\n    .onDarkBackground path{fill:#fff!important}\n  </style>\n  <path d="M12 3.3L9.1 7h-.2L6 3.3c0-.1 0-.3.2-.3h5.7c.1 0 .1.2.1.3z" />\n</svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StepperUpSvg='<svg xmlns="http://www.w3.org/2000/svg" class="$state$" width="18" height="11">\n  <style>\n    .onDarkBackground{opacity:0.5}\n    .onDarkBackground.active{opacity:1}\n    .disabled{opacity:0.35!important}\n    path,.disabled path{fill:#666}\n    .active path{fill:#333}\n    .onDarkBackground path{fill:#fff!important}\n  </style>\n  <path d="M6 7.7L8.8 4c.1 0 .3 0 .3.1L12 7.7c0 .1 0 .3-.2.3H6.2C6 8 6 7.8 6 7.7z" />\n</svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(51),s=n(4),a=n(5),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.getContainerStyleOfIndex=function(e){return{}},t.prototype.render=function(){var e=this;return i.createElement(s.Block,{role:"group"},this.props.checkBoxWithLabelPropsList.map(function(t,n){var s=o.__assign({},t.containerStyle,e.getContainerStyleOfIndex(n)),a=o.__assign({},t,{containerStyle:s,key:n});return i.createElement(r.CheckBoxWithLabelWidget,a)}))},t}(a.DynamicThemeComponent);t.CheckBoxWithLabelGroupWidget=l},function(e,t,n){"use strict";function o(e){var t=2-e.toString().length+1;return Array(+(t>0&&t)).join("0")+e}function i(e,t){if(!e)return null;if("string"==typeof e||e instanceof String)return e.toString();if(e instanceof Date){if(e=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),isNaN(e.getDate()))return null;if(t===u.Date)return e.getFullYear()+"-"+o(e.getMonth()+1)+"-"+o(e.getDate());if(t===u.Time)return o(e.getHours())+":"+o(e.getMinutes());if(t===u.DateTime)return e.getFullYear()+"-"+o(e.getMonth()+1)+"-"+o(e.getDate())+"T"+o(e.getHours())+":"+o(e.getMinutes())}return null}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=n(0),a=n(4),l=n(5),d=n(17),c=n(2),p=n(12),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.Date=new t("date"),t.DateTime=new t("datetime-local"),t.Time=new t("time"),t}(p.TextInputType);t.DateTimeInputType=u;var h=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChangeWrapper=function(e){var t=n.dateFromString(e);t&&null!==t&&!isNaN(t.getTime())&&n.props.handleChange(t)},n.handleKeyDown=function(e){n.props.disabled},n.state={inputFocus:!1,inputActive:!1,inputHover:!1},n}return r.__extends(t,e),t.prototype.getInputStyle=function(){var e=d.getTextOutlineStyles({});return r.__assign({},e.input.base,{paddingRight:0},this.props.inputStyle)},t.prototype.dateFromString=function(e){switch(this.props.type){case u.Date:e+="T00:00";break;case u.Time:e=(new Date).toISOString().substr(0,10)+"T"+e}return e+="+0000",new Date(e)},t.prototype.render=function(){var e={style:this.props.containerStyle},t=d.getTextOutlineStyles({}),n=this.getInputStyle(),o={style:n,inputRef:this.props.inputRef,interactiveStyles:t.input.interactive,text:i(this.props.value,this.props.type),testId:c.testId(this.props.testId,"DateTimeWidget"),type:this.props.type,handleChange:this.handleChangeWrapper,handleEnter:this.props.handleEnter,shouldSelectTextOnFocus:!1,disabled:this.props.disabled,readOnly:this.props.readOnly,onKeyDown:this.handleKeyDown,name:this.props.name};return s.createElement(a.Block,e,s.createElement(p.TextFieldInputWidget,o))},t}(l.DynamicThemeComponent);t.DateTimeInputWidget=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(0),s=n(4),a=n(3),l=n(6),d=n(2),c=n(8),p=a.TabStyles.Spacing,u=function(){return{position:"absolute",right:0,top:0,bottom:0,margin:"auto",paddingRight:p.DefaultSpace,paddingLeft:p.DefaultSpace,paddingTop:3}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.handlePointerClick=function(e){e.stopPropagation(),n.props.pointerClick&&n.props.pointerClick(e)},n.handleHover=function(e){n.setState({hover:e}),n.props.handleHover&&n.props.handleHover(e)},n.handleActive=function(e){n.setState({active:e}),n.props.handleActive&&n.props.handleActive(e)},n.handleFocus=function(e){n.setState({focus:e}),n.props.handleFocus&&n.props.handleFocus(e)},n.state={active:!1,hover:!1,focus:!1},n}return o.__extends(t,e),t.prototype.getIcon=function(e,t){var n={active:!e.disabled&&e.active||t.active||t.focus||t.hover,onDarkBackground:e.onDarkBackground};return c.TextFieldClearIcon.icon(n)},t.prototype.render=function(){var e={pointerClick:this.handlePointerClick,handleActive:this.handleActive,handleFocus:this.handleFocus,handleHover:this.handleHover,disabled:this.props.disabled},t=o.__assign({},this.props,e);return r.createElement(l.InteractiveDomWrapper,t,r.createElement(s.Img,{style:u(),tabIndex:-1,src:this.getIcon(this.props,this.state),"data-tb-test-id":d.testId(this.props.testId,"ClearIcon")}))},t}(i.Component);t.TextFieldClearButton=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(0),s=n(7),a=n(102),l=n(2),d=n(103),c=n(104),p=n(105),u=n(26),h=n(4),g=n(9),f=function(){return{DialogContent:{outline:"none",display:"flex",flexDirection:"column",overflow:"hidden"}}},y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDialogHeaderRef=function(e){t.dialogHeader=s.findDOMNode(e)},t.handleDialogKeyUp=function(e){"Escape"===e.key&&t.props.onCloseRequest()},t.handleDialogKeyDown=function(e){if("Tab"===e.key){var n=a(t.dialog),o=n.length>0?n[0]:null,i=n.length>0?n[n.length-1]:null;e.target!==i||e.shiftKey?e.target===o&&e.shiftKey&&(e.preventDefault(),i.focus()):(e.preventDefault(),o.focus())}},t}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.elementToReturnFocus=document.activeElement,this.dialog=s.findDOMNode(this),this.props.disableAutoFocus||this.initializeFocusOnMount(),this.setFocusEventListener(),document.addEventListener("focus",this.focusEventListener,!0),this.dialog.offsetHeight>this.dialog.parentElement.clientHeight&&(this.dialog.style.height=this.dialog.parentElement.clientHeight+"px")},t.prototype.initializeFocusOnMount=function(){var e=a(this.dialog);if(0===e.length)throw Error("Something within the dialog must be focusable as to dismiss it");var t=0;if(this.dialogHeader)for(var n=0;n<e.length;n++)if(!this.dialogHeader.contains(e[n])){t=n;break}var o=e[t];g.timeoutFocus(o)},t.prototype.setFocusEventListener=function(){var e=this;this.focusEventListener=function(t){if(!e.props.isModal){var n=t.target;e.dialog.contains(n)||(e.elementToReturnFocus=n)}}},t.prototype.componentWillUnmount=function(){document.removeEventListener("focus",this.focusEventListener,!0),this.props.shouldReturnFocusOnClose&&this.returnFocusToElement()},t.prototype.returnFocusToElement=function(){g.timeoutFocus(this.elementToReturnFocus)},t.prototype.render=function(){var e=f(),t=o.__assign({},this.props,{ref:this.handleDialogHeaderRef});return r.createElement(h.Block,{"aria-modal":this.props.isModal,"data-tb-test-id":l.testId(this.props.testId,"Content"),tabIndex:-1,style:o.__assign({},e.DialogContent,this.props.dialogContentStyle),onKeyDown:this.handleDialogKeyDown,onKeyUp:this.handleDialogKeyUp,role:"dialog","aria-labelledby":l.conditional(!!this.props.title,u.SharedWidgetsDialogLabel+String(this.props.instanceId))},l.conditional(this.props.type!==u.DialogType.Uber,r.createElement(p.DialogHeader,t)),r.createElement(d.DialogBody,this.props),l.conditional(this.props.showFooter,r.createElement(c.DialogFooter,this.props)))},t}(i.Component);t.DialogContent=y},function(e,t){function n(){var e=[];return function t(n){if(n===document.documentElement)return!1;for(var o=0,i=e.length;o<i;o++)if(e[o][0]===n)return e[o][1];var r=!1,s=window.getComputedStyle(n);return"hidden"===s.visibility||"none"===s.display?r=!0:n.parentNode&&(r=t(n.parentNode)),e.push([n,r]),r}}e.exports=function(e){for(var t,o,i=[],r=[],s=n(),a=e.querySelectorAll("input, select, a[href], textarea, button, [tabindex]"),l=0,d=a.length;l<d;l++)t=a[l],(o=t.tabIndex)<0||"INPUT"===t.tagName&&"hidden"===t.type||t.disabled||s(t)||(0===o?i.push(t):r.push({tabIndex:o,node:t}));var c=r.sort(function(e,t){return e.tabIndex-t.tabIndex}).map(function(e){return e.node});return Array.prototype.push.apply(c,i),c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(0),s=n(2),a=n(26),l=n(4),d=n(3),c=function(){return{Body:{outline:"none",overflow:"auto",WebkitOverflowScrolling:"touch"}}},p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.getPaddingStyle=function(){var e={paddingTop:0,paddingRight:d.TabStyles.Spacing.LargeSpace,paddingBottom:d.TabStyles.Spacing.LargeSpace,paddingLeft:d.TabStyles.Spacing.LargeSpace};switch(this.props.type){case a.DialogType.NormalWithTitleBar:e.paddingTop=d.TabStyles.Spacing.LargeSpace;break;case a.DialogType.LightweightTitleBar:e.paddingLeft=d.TabStyles.Spacing.ExtraLargeSpace-d.TabStyles.Sizing.BorderWidth,e.paddingRight=e.paddingLeft;break;case a.DialogType.Uber:e.paddingTop=d.TabStyles.Spacing.MediumSpace}return this.props.showFooter&&(e.paddingBottom=0),e},t.prototype.render=function(){var e=c(),t=o.__assign({},e.Body,this.getPaddingStyle(),this.props.dialogBodyStyle);return r.createElement(l.Block,{"data-tb-test-id":s.testId(this.props.testId,"Body"),style:t,id:s.testId(this.props.testId,"Body-Id")},this.props.children)},t}(i.Component);t.DialogBody=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(2),r=n(4),s=n(3),a=8*s.TabStyles.Sizing.BaseUnit,l=function(){return{Footer:{paddingLeft:s.TabStyles.Spacing.LargeSpace,paddingRight:s.TabStyles.Spacing.LargeSpace,paddingTop:0,paddingBottom:0,height:a,flexShrink:0},FooterContent:{height:"100%"}}},d=function(e){var t=l();return o.createElement(r.Block,{"data-tb-test-id":i.testId(e.testId,"Footer"),style:t.Footer},i.conditional(!!e.footerContent,o.createElement(r.Block,{style:t.FooterContent},e.footerContent)))};t.DialogFooter=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(0),s=n(7),a=n(106),l=n(2),d=n(26),c=n(4),p=n(21),u=n(3),h=n(18),g=n(34),f=n(14),y=n(11),v=n(53),m=function(){return{DraggableHeader:{cursor:"move"},Header:o.__assign({},y.PreventUserSelect,{fontFamily:u.TabStyles.Typography.FontFamily,flexShrink:0,minHeight:5*u.TabStyles.Sizing.BaseUnit}),TitleBar:o.__assign({fontSize:u.TabStyles.Typography.Sizing.Default,color:u.TabStyles.Typography.Color.Primary,backgroundColor:u.TabStyles.Colors.F2,height:"100%",minHeight:"inherit",paddingRight:u.TabStyles.Spacing.LargeSpace,paddingLeft:u.TabStyles.Spacing.LargeSpace,display:"flex",alignItems:"center",lineHeight:"normal"},h.TextEllipsis),TitleBarWithCloseButton:{paddingRight:0},LightweightTitleBar:{fontSize:20,height:"100%",minHeight:"inherit",paddingTop:20,paddingLeft:u.TabStyles.Spacing.ExtraLargeSpace-u.TabStyles.Sizing.BorderWidth,paddingRight:u.TabStyles.Spacing.ExtraLargeSpace-u.TabStyles.Sizing.BorderWidth,paddingBottom:u.TabStyles.Spacing.DefaultSpace,display:"flex",alignItems:"center",lineHeight:"normal"},LighweightTitleBarCloseButton:{top:10,right:10,position:"absolute"},Title:o.__assign({flexGrow:1},h.TextEllipsis)}},b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleStart=function(e){if(!t.isEventWithinCloseButton(e)&&t.props.positioningBehavior===d.DialogPositioningBehavior.Draggable){e.preventDefault();var n=g.getClientPosition(e),o=t.props.getDraggableDialogClientRect();t.startXPosition=n.x-o.left,t.startYPosition=n.y-o.top,t.addMouseEventListeners()}},t.handleMove=function(e){e.preventDefault();var n=g.getClientPosition(e);t.props.setDraggableDialogPosition({top:n.y-t.startYPosition,left:n.x-t.startXPosition})},t.handleStop=function(e){t.removeMouseEventListeners()},t.handleCloseButtonRef=function(e){t.closeButton=s.findDOMNode(e)},t.handleRef=function(e){t.globalPointerEventCapturer&&t.removeMouseEventListeners(),e&&(t.globalPointerEventCapturer=new v.GlobalPointerEventCapturer(s.findDOMNode(e),t.handleMove,t.handleStop))},t}return o.__extends(t,e),t.prototype.componentWillUnmount=function(){this.removeMouseEventListeners()},t.prototype.addMouseEventListeners=function(){this.globalPointerEventCapturer.addListeners()},t.prototype.removeMouseEventListeners=function(){this.globalPointerEventCapturer.removeListeners()},t.prototype.isEventWithinCloseButton=function(e){var t=e.target;return!!this.closeButton&&this.closeButton.contains(t)},t.prototype.render=function(){var e=m(),t=o.__assign({},e.Header,l.conditional(this.props.positioningBehavior===d.DialogPositioningBehavior.Draggable,e.DraggableHeader)),n=!1,i={},s={};this.props.type===d.DialogType.NormalWithTitleBar?(n=!0,i=o.__assign({},e.TitleBar,l.conditional(this.props.showCloseButton,e.TitleBarWithCloseButton))):this.props.type===d.DialogType.LightweightTitleBar&&(n=!0,i=o.__assign({},e.LightweightTitleBar),s=o.__assign({},e.LighweightTitleBarCloseButton));var u={testId:this.props.testId,tooltip:f.Messages.closeDialog(),requestClose:this.props.onCloseRequest,ref:this.handleCloseButtonRef};return r.createElement(p.PointerEventWrapper,{pointerDown:this.handleStart},r.createElement(c.Block,{ref:this.handleRef,"data-tb-test-id":l.testId(this.props.testId,"Header"),style:t},l.conditional(n,r.createElement(c.Block,{"data-tb-test-id":l.testId(this.props.testId,"TitleBar"),style:i},l.conditional(!!this.props.title,r.createElement(c.Block,{style:e.Title,id:d.SharedWidgetsDialogLabel+String(this.props.instanceId)},this.props.title)),l.conditional(this.props.showCloseButton,r.createElement(c.InlineBlock,{style:s},r.createElement(a.CloseButtonWidget,u)))))))},t}(i.Component);t.DialogHeader=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(3),s=n(6),a=n(2),l=n(4),d=n(8),c=n(5),p=n(14),u=function(){return{containerBase:{width:5*r.TabStyles.Sizing.BaseUnit,height:5*r.TabStyles.Sizing.BaseUnit,display:"flex",alignItems:"center",justifyContent:"center",cursor:"auto",outline:"none",flexShrink:0},imageContainer:{display:"flex",alignItems:"center",justifyContent:"center",width:3*r.TabStyles.Sizing.BaseUnit,height:3*r.TabStyles.Sizing.BaseUnit}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.handleHover=function(e){n.setState({hover:e})},n.handleFocus=function(e){n.setState({focus:e})},n.handleActive=function(e){n.setState({active:e})},n.handleKeyDown=function(e){"Enter"!==e.key&&" "!==e.key||n.props.requestClose()},n.state={hover:!1,active:!1,focus:!1},n}return o.__extends(t,e),t.prototype.render=function(){var e,t,n=u();return this.state.hover||this.state.focus||this.state.active?(e=d.CloseButtonIcon.icon({active:!0}),t=o.__assign({},n.imageContainer,{backgroundColor:r.TabStyles.Colors.F3})):(e=d.CloseButtonIcon.icon(),t=n.imageContainer),i.createElement(s.InteractiveDomWrapper,{pointerClick:this.props.requestClose,handleHover:this.handleHover,handleActive:this.handleActive,handleFocus:this.handleFocus},i.createElement(l.Block,{style:n.containerBase,tabIndex:0,onKeyDown:this.handleKeyDown,role:"button",title:this.props.tooltip||p.Messages.close(),"data-tb-test-id":a.testId(this.props.testId,"CloseButton")},i.createElement(l.Block,{style:t},i.createElement(l.Img,{src:e,draggable:!1,style:{width:d.CloseButtonIcon.width,height:d.CloseButtonIcon.height}}))))},t}(c.DynamicThemeComponent);t.CloseButtonWidget=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(7),s=n(0),a=n(4),l=n(2),d=n(16),c=n(15),p=n(23),u={Floater:{position:"absolute",outline:0,pointerEvents:"auto"}},h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.floaterRefHandler=function(e){t.floater=r.findDOMNode(e),t.props.handleFloaterRef&&t.props.handleFloaterRef(e)},t}return o.__extends(t,e),t.prototype.getCenteredFloaterRectInLayoutCoords=function(){var e=p.getVisualViewportRectRelativeToLayoutViewport(),t={width:this.floater.offsetWidth,height:this.floater.offsetHeight},n=d.computePositionToCenterAreaInBounds(t,e);return d.makeClientRect(n,t)},t.prototype.getMinimumPageRectInLayoutCoords=function(){var e=p.getElementPositionRelativeToLayoutViewport(document.documentElement),t=p.getLayoutViewportSize(),n=p.getVisualViewportRectRelativeToLayoutViewport(),o={width:n.right-e.left,height:n.bottom-e.top},i=d.getMaxWidthAndHeight(t,o);return d.makeClientRect(e,i)},t.prototype.centerInVisualViewport=function(){var e=this.getCenteredFloaterRectInLayoutCoords(),t=this.getMinimumPageRectInLayoutCoords(),n=d.computePositionToContainBounds(e,t);this.setPosition(n)},t.prototype.getFloaterClientRect=function(){return this.floater.getBoundingClientRect()},t.prototype.setPosition=function(e){var t=this.floater.offsetParent||document.documentElement,n=p.getElementPositionRelativeToLayoutViewport(t),o=d.subtractPositions(e,n);this.floater.style.top=o.top+"px",this.floater.style.left=o.left+"px"},t.prototype.componentDidMount=function(){this.centerInVisualViewport()},t.prototype.componentDidUpdate=function(e){var t=this;this.props.shouldRecenterOnUpdate&&(this.clearDeferredCentering(),this.centerTimeoutHandle=window.setTimeout(function(){t.centerInVisualViewport()},0))},t.prototype.clearDeferredCentering=function(){this.centerTimeoutHandle&&(clearTimeout(this.centerTimeoutHandle),this.centerTimeoutHandle=null)},t.prototype.componentWillUnmount=function(){this.clearDeferredCentering()},t.prototype.render=function(){var e={"data-tb-test-id":l.testId(this.props.testId,"Floater"),style:o.__assign({},u.Floater,this.props.customFloaterStyle),ref:this.floaterRefHandler};return s.createElement(a.Block,e,this.props.children)},t}(i.Component);t.FloaterWidgetDefault=h;var g=c.StackingComponentHOC(h);t.FloaterWidget=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(4),s=n(2),a=n(3),l=n(6),d=n(5),c=n(15),p=function(){return{Glass:{position:"fixed",top:0,left:0,bottom:0,right:0,padding:0,margin:0,pointerEvents:"auto"},Clear:{backgroundColor:a.TabStyles.Colors.White,opacity:a.TabStyles.Opacity.ClearGlass},Opaque:{backgroundColor:a.TabStyles.Colors.OpaqueGlass,opacity:a.TabStyles.Opacity.OpaqueGlass}}},u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleKeyDown=function(e){"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),e.stopPropagation())},t.handleKeyUp=function(e){t.props.handleEscape&&"Escape"===e.key&&(t.props.handleEscape(),e.preventDefault(),e.stopPropagation())},t}return o.__extends(t,e),t.prototype.render=function(){var e=this,t=p(),n=o.__assign({},t.Glass,this.props.isTransparent?t.Clear:t.Opaque);return i.createElement(l.InteractiveDomWrapper,{pointerClick:function(t){t.preventDefault(),e.props.handleClick&&e.props.handleClick()}},i.createElement(r.Block,{style:n,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,tabIndex:0,"data-tb-test-id":s.testId(this.props.testId,"Glass")}))},t}(d.DynamicThemeComponent);t.GlassWidgetBase=u;var h=c.StackingComponentHOC(u);t.GlassWidget=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(0),s=n(2),a=n(23),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state=n.getStateForCurrentViewport(),n}return o.__extends(t,e),t.prototype.getStateForCurrentViewport=function(){var e=a.getVisualViewport();return{visualViewportSize:{width:e.width,height:e.height},layoutViewportSize:a.getLayoutViewportSize()}},t.prototype.getMaxSize=function(){var e={width:this.state.visualViewportSize.width,height:this.state.visualViewportSize.height};return this.props.style&&this.props.style.minWidth||(e.width=Math.max(e.width,this.state.layoutViewportSize.width)),this.props.style&&this.props.style.minHeight||(e.height=Math.max(e.height,this.state.layoutViewportSize.height)),this.props.horizontalMargins&&(e.width-=this.props.horizontalMargins),this.props.verticalMargins&&(e.height-=this.props.verticalMargins),e},t.prototype.updateSize=function(){this.setState(this.getStateForCurrentViewport())},t.prototype.render=function(){var e=this.getMaxSize(),t={style:o.__assign({maxWidth:e.width,maxHeight:e.height},this.props.style,s.conditional(this.props.isMaximized,{width:e.width,height:e.height})),"data-tb-test-id":this.props.testId};return r.createElement("div",t,this.props.children)},t}(i.Component);t.ViewportConstrainedDomWrapper=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PendingOrientationChangeTimeoutMs=250;t.PendingResizeTimeoutMs=200;var o=function(){function e(){}return e.init=function(){window.addEventListener("orientationchange",e.handleOrientationChange),window.addEventListener("resize",e.handleResize)},e.handleOrientationChange=function(){null!==e.latestPendingResizeTimestamp&&Date.now()-e.latestPendingResizeTimestamp<=200?e.fireOrientationChange():e.latestPendingOrientationChangeTimestamp=Date.now()},e.handleResize=function(){null!==e.latestPendingOrientationChangeTimestamp&&Date.now()-e.latestPendingOrientationChangeTimestamp<=250?e.fireOrientationChange():e.latestPendingResizeTimestamp=Date.now()},e.fireOrientationChange=function(){e.latestPendingOrientationChangeTimestamp=null,e.latestPendingResizeTimestamp=null,e.listeners.forEach(function(e){e()})},e.addListener=function(t){t&&e.listeners.push(t)},e.removeListener=function(t){e.listeners=e.listeners.filter(function(e){return e!==t})},e.latestPendingOrientationChangeTimestamp=null,e.latestPendingResizeTimestamp=null,e.listeners=[],e}();t.OrientationChange=o,o.init()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(13),s=n(2),a=n(4),l=n(3),d=function(){return{ButtonsContainer:{alignItems:"center",display:"flex",height:"100%",justifyContent:"flex-end"},FooterButton:{paddingLeft:l.TabStyles.Spacing.MediumSpace}}},c=function(e){return e.buttons.map(function(e,t){return i.createElement(a.InlineBlock,{style:s.conditional(0!==t,d().FooterButton),key:t},i.createElement(r.ButtonWidget,o.__assign({},e)))})},p=function(e){var t={"data-tb-test-id":s.testId(e.testId,"Confirm-Cancel-Footer"),style:d().ButtonsContainer};return i.createElement(a.Block,o.__assign({},t),c(e))};t.DialogFooterButtonsWidget=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(113),s=n(5),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){var e=this.props.currentStep/this.props.totalSteps;return i.createElement(r.ProgressBarContainer,{width:this.props.width},i.createElement(r.ProgressCompleteBar,{fractionComplete:e},1===e?null:i.createElement(r.ProgressBarAnimation,{containerWidth:this.props.width*e})))},t}(s.DynamicThemeComponent);t.DiscreteProgressBarWidget_UNFINISHED=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(32),s=n(3),a=n(4),l=function(){return{backgroundColor:s.TabStyles.Colors.F3,borderRadius:s.TabStyles.Sizing.BorderRadius,height:s.TabStyles.Sizing.BaseUnit}},d=function(e){var t=o.__assign({},l(),{width:e.width});return i.createElement(a.Block,{style:t},e.children)};t.ProgressBarContainer=d;var c=function(){return{backgroundColor:s.TabStyles.Colors.GoLight,position:"absolute",top:0,left:0,height:"100%"}},p=function(e){var t=o.__assign({},c(),{width:100*e.fractionComplete+"%"});return i.createElement(a.Block,{style:t},e.children)};t.ProgressCompleteBar=p;var u=function(){return s.TabStyles.Sizing.BaseUnit},h=function(){return{position:"absolute",top:0,width:u(),height:"100%",backgroundColor:s.TabStyles.Colors.GoDark}},g=function(e){var t=e.containerWidth,n=r.SingletonStyleSheet.addAnimation({keyframes:{fromCSSLines:{transform:"translate3d(0px, 0px, 0px)"},toCSSLines:{transform:"translate3d("+(t-u())+"px, 0px, 0px)"}},options:{count:1/0,durationMs:1e3,direction:"alternate",timingFunction:"ease-in-out"}});return i.createElement(a.Block,{style:h(),className:n})};t.ProgressBarAnimation=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(39),s=n(57),a=function(e){var t=o.__assign({},e,{menuItemInfos:s.convertMenuItemInfoToGeneric(e.menuItemInfos)});return i.createElement(r.GenericDropdownWidget,t)};t.DropdownWidget=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(7),s=n(2),a=n(10),l=n(6),d=n(5),c=n(27),p=n(54),u=n(9),h=150,g=function(e){function t(t){var n=e.call(this,t)||this;return n.handleKeyDown=function(e){switch(e.key){case" ":case"Enter":n.onSelect();break;case"ArrowRight":n.hasSubMenu&&n.onSelect();break;default:return}e.preventDefault(),e.stopPropagation()},n.onSelect=function(){n.props.disabled||n.props.isUnselectable||(clearTimeout(n.subMenuTimeoutId),n.hasSubMenu?n.setState({menuItemActive:!0}):n.props.onSelect(n.props.value))},n.onHover=function(e){if(!e)return void clearTimeout(n.subMenuTimeoutId);n.props.onHover&&n.props.onHover(n.props.itemIndex),n.hasSubMenu&&(n.subMenuTimeoutId=window.setTimeout(function(){return n.setState({menuItemActive:!0})},h))},n.onActive=function(e){n.hasSubMenu||n.setState({menuItemActive:e})},n.setDomNode=function(e){n.domNode=e},n.requestClose=function(){n.setState({menuItemActive:!1})},n.handleSubmenuMouseEnter=function(){n.props.onHover(n.props.itemIndex)},n.hasSubMenu=!!n.props.menuItemInfos,n.state={menuItemActive:!1},n}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.updateFocus()},t.prototype.componentWillReceiveProps=function(e){this.hasSubMenu=!!e.menuItemInfos},t.prototype.componentDidUpdate=function(e,t){e.isHighlighted&&!this.props.isHighlighted&&this.state.menuItemActive&&this.setState({menuItemActive:!1}),this.updateFocus()},t.prototype.updateFocus=function(){if(this.props.isHighlighted&&!this.state.menuItemActive&&this.props.keyboardFocused){var e=r.findDOMNode(this);u.timeoutFocus(e)}},t.prototype.getDisplayElement=function(){var e={disabled:this.props.disabled,active:this.state.menuItemActive&&this.props.isHighlighted,isHighlighted:this.props.isHighlighted,checked:this.props.checked,showCheckGutter:this.props.showCheckGutter,hasSubMenu:this.hasSubMenu,testId:this.props.testId};return i.createElement(this.props.displayFormatterBoundWithData,e)},t.prototype.shouldShowOverlay=function(){return this.state.menuItemActive&&this.props.isHighlighted&&!this.props.disabled&&!this.props.isUnselectable&&this.hasSubMenu},t.prototype.render=function(){var e=this.shouldShowOverlay(),t=this.getDisplayElement(),n=o.__assign({},this.props.subMenuStyle,s.conditional(this.hasSubMenu,{marginTop:p.ListMenuWidget.subMenuMarginTop()}));return e&&this.props.onSubmenuShown(this.props.itemIndex),i.createElement(l.InteractiveDomWrapper,{pointerClick:this.onSelect,handleHover:this.onHover,handleActive:this.onActive,disabled:this.props.disabled},i.createElement("div",{style:{outline:"none"},onKeyDown:this.handleKeyDown,tabIndex:this.props.disabled?null:-1,ref:this.setDomNode,role:this.props.role||(void 0===this.props.checked?"menuitem":"menuitemcheckbox"),"aria-checked":this.props.checked,"aria-haspopup":this.hasSubMenu,"aria-disabled":this.props.disabled,"data-tb-test-id":this.props.testId+"-"+this.props.value+"-MenuItem"},t,s.conditional(e,i.createElement(c.GenericFlyoutListMenuWidget,{anchorEl:this.domNode,stackingRootId:this.props.stackingRootId,scrollingRootId:this.props.scrollingRootId,anchorOrigin:{vertical:a.VerticalOriginOption.top,horizontal:a.HorizontalOriginOption.right},stackedOrigin:{vertical:a.VerticalOriginOption.top,horizontal:a.HorizontalOriginOption.left},allowAutoPosition:this.props.subMenuAllowAutoPosition,shouldAutoPositionOnScrollingRootScroll:this.props.subMenuShouldAutoPositionOnScrollingRootScroll,zIndex:this.props.zIndex,onSelect:this.props.onSelect,menuItemInfos:this.props.menuItemInfos,maxHeight:this.props.subMenuMaxHeight,menuStyle:n,onLeftArrowKeyDown:this.requestClose,onEscapeKeyUp:this.requestClose,onMouseEnter:this.handleSubmenuMouseEnter,requestCloseAll:this.props.requestCloseAll,testId:this.props.testId+"-"+this.props.value}))))},t}(d.DynamicThemeComponent);t.MenuItemWidget=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(3),r=i.TabStyles.Sizing,s=i.TabStyles.Colors,a=function(){return{marginTop:r.ListRowHeight/2,marginBottom:r.ListRowHeight/2,marginRight:0,marginLeft:0,border:"none",borderTop:r.BorderWidth+"px solid "+s.L3}},l=function(e){return o.createElement("hr",{style:a(),role:"separator","aria-orientation":"horizontal"})};t.DividerWidget=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1),r=n(0),s=n(2),a=n(4),l=n(5),d=n(3),c=n(6),p=n(8),u=d.TabStyles.Spacing;!function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right"}(o||(o={})),t.ExpandoDirection=o;var h=function(e){function t(t){var n=e.call(this,t)||this;return n.expandoBaseTestId="Expando",n.mapExpandoDirectionToFlexDirection={0:"column-reverse",1:"column",2:"row-reverse",3:"row"},n.handleClick=function(e){n.handleExpandOrCollapse()},n.handleKeyUp=function(e){" "!==e.key&&"Enter"!==e.key||n.handleExpandOrCollapse()},n.handleHover=function(e){n.setState({hoveringOnExpandoButton:e})},n.getExpandoIconDirection=function(){if(n.props.isExpanded)switch(n.props.direction){case o.Up:return o.Down;case o.Down:return o.Up;case o.Left:return o.Right;case o.Right:return o.Left}return n.props.direction},n.getExpandoIconTransform=function(){var e=n.getExpandoIconDirection();switch(e){case o.Up:return"rotate(0deg)";case o.Right:return"rotate(90deg)";case o.Down:return"rotate(180deg)";case o.Left:return"rotate(270deg)"}throw Error("Unknown direction '"+e+"'")},n.state={hoveringOnExpandoButton:!1},n}return i.__extends(t,e),t.prototype.shouldShowLabel=function(){return this.props.label&&this.props.label.length>0},t.prototype.handleExpandOrCollapse=function(){this.props.isExpanded?this.props.onCollapse():this.props.onExpand()},t.prototype.updateHeightOrWidth=function(){this.isVertical()?this.props.isExpanded?this.contentRef.style.height=this.contentRef.scrollHeight+"px":this.contentRef.style.height="0px":this.props.isExpanded?this.contentRef.style.width=this.contentRef.scrollWidth+"px":this.contentRef.style.width="0px"},t.prototype.isVertical=function(){return this.props.direction===o.Up||this.props.direction===o.Down},t.prototype.componentDidUpdate=function(){this.updateHeightOrWidth()},t.prototype.componentDidMount=function(){this.updateHeightOrWidth()},t.prototype.render=function(){var e=this,t={display:"flex",flexDirection:this.mapExpandoDirectionToFlexDirection[this.props.direction],alignItems:"flex-start"},n={style:t,"data-tb-test-id":s.testId(this.props.testId,this.expandoBaseTestId)},o={handleHover:this.handleHover,pointerClick:this.handleClick,key:"expandoInteractiveDom"},l={display:"flex",alignItems:"center",cursor:"default"},d={onKeyUp:this.handleKeyUp,style:l,tabIndex:0,"aria-expanded":this.props.isExpanded,role:"button","data-tb-test-id":s.testId(this.props.testId,this.expandoBaseTestId,"Button")},h=this.getExpandoIconTransform(),g={height:p.ExpandoIcon.height,width:p.ExpandoIcon.width,transform:h,margin:"auto",marginLeft:0,marginRight:this.props.label?u.DefaultSpace:0},f=p.ExpandoIcon.icon({active:this.state.hoveringOnExpandoButton}),y={style:g,src:f,"data-tb-test-id":s.testId(this.props.testId,this.expandoBaseTestId,"Icon"),key:"expandoIcon"},v={"data-tb-test-id":s.testId(this.props.testId,this.expandoBaseTestId,"Label"),key:"expandoLabel"},m=i.__assign({},a.BlockStyle,{overflow:"hidden",transition:this.isVertical()?"height 0.2s ease-out":"width 0.2s ease-out"}),b={style:m,"data-tb-test-id":s.testId(this.props.testId,this.expandoBaseTestId,"Content"),ref:function(t){return e.contentRef=t},key:"expandoContent"},S=this.shouldShowLabel();return r.createElement(a.Block,n,r.createElement(c.InteractiveDomWrapper,o,r.createElement(a.Block,d,r.createElement(a.Img,y),s.conditional(S,r.createElement(a.InlineBlock,v,this.props.label)))),r.createElement("div",b,this.props.children))},t}(l.DynamicThemeComponent);t.ExpandoWidget=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(57),s=n(27),a=function(e){var t=o.__assign({},e,{menuItemInfos:r.convertMenuItemInfoToGeneric(e.menuItemInfos)});return i.createElement(s.GenericFlyoutListMenuWidget,t)};t.FlyoutListMenuWidget=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(35),s=n(4),a=n(3),l=n(2),d=a.TabStyles.Colors,c=function(){return{base:{alignItems:"center",display:"flex",justifyContent:"center"},interactive:{hover:{backgroundColor:d.F3},focus:{backgroundColor:d.F3},active:{backgroundColor:d.F5},disabled:{opacity:.35,outline:"none"}}}},p=function(e){function t(t){var n=e.call(this,t)||this;return n.handleActive=function(e){n.setState({active:e})},n.handleFocus=function(e){n.setState({focus:e})},n.handleHover=function(e){n.setState({hover:e})},n.handleClick=function(e){n.props.handleClick(e)},n.state={hover:!1,active:!1,focus:!1},n}return o.__extends(t,e),t.prototype.getIcon=function(){return this.props.disabled?this.props.disabledIcon?this.props.disabledIcon:this.props.activeIcon:this.state.active?this.props.activeIcon:this.state.hover?this.props.hoverIcon?this.props.hoverIcon:this.props.activeIcon:this.state.focus?this.props.focusIcon?this.props.focusIcon:this.props.activeIcon:this.props.defaultIcon},t.prototype.render=function(){var e={disabled:this.props.disabled,handleClick:this.handleClick,onActive:this.handleActive,onFocus:this.handleFocus,onHover:this.handleHover,interactiveStyle:o.__assign({},c().interactive,this.props.interactiveStyle),style:o.__assign({},c().base,this.props.style),testId:l.testId(this.props.testId,"IconButton"),title:this.props.title},t={src:this.getIcon(),draggable:!1};return i.createElement(r.ButtonBase,o.__assign({},e),i.createElement(s.Img,o.__assign({},t)))},t}(i.Component);t.IconButtonWidget=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(4),s=n(28),a=n(17),l=n(8),d=n(3),c=n(2),p=n(25),u=n(12),h=n(121),g=d.TabStyles.Spacing,f=d.TabStyles.Sizing,y=d.TabStyles.Typography,v=function(){return{verticalIconPadding:{paddingRight:l.StepperDownIcon.width+g.DefaultSpace},label:{fontSize:y.Sizing.Default,fontFamily:y.FontFamily,fontWeight:"normal",color:y.Color.Primary,lineHeight:f.RowHeight+"px",paddingRight:g.DefaultSpace}}},m=function(e){function t(n){var o=e.call(this,n)||this;return o.validateProps=function(e){if(!e.disabled){if(!o.isInteger(e.delta))throw Error("'delta' must be an integer");if(e.delta<1)throw Error("'delta' must a positive integer");if(!o.isInteger(e.pageDelta))throw Error("'pageDelta' must be an integer");if(e.pageDelta<1)throw Error("'pageDelta' must a positive integer");if(!o.isInteger(e.min))throw Error("'min' must be an integer");if(!o.isInteger(e.max))throw Error("'max' must be an integer");if(!o.isInteger(e.start))throw Error("'start' must be an integer");if(e.min>e.max)throw Error("'min' must be less than 'max'");if(e.start<e.min||e.start>e.max)throw Error("'start' is outside the valid range: ["+e.min+","+e.max+"]");if(e.delta>e.max-e.min)throw Error("'delta' is greater than range: "+e.max+" - "+e.min+" = "+(e.max-e.min));if(e.pageDelta>e.max-e.min)throw Error("'pageDelta' is greater than range: "+e.max+" - "+e.min+" = "+(e.max-e.min))}},o.isInteger=function(e){return e%1==0},o.handleIncrement=function(e){o.props.disabled||o.state.isIncrementDisabled||o.clampAndCommit(o.state.lastValidValue+e)},o.handleDecrement=function(e){o.props.disabled||o.state.isDecrementDisabled||o.clampAndCommit(o.state.lastValidValue-e)},o.handleInputChange=function(e){/^-?[0-9]*$/.test(e)&&o.updateState(e)},o.handleBlur=function(){o.confirmInput(),o.props.handleBlur&&o.props.handleBlur()},o.handleEnter=function(){o.confirmInput()},o.handleEscape=function(){o.revert()},o.handleKeyDown=function(e){if(!o.props.disabled&&!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey)){switch(e.key){case"ArrowUp":o.confirmInput(function(){return o.handleIncrement(o.props.delta)});break;case"ArrowDown":o.confirmInput(function(){return o.handleDecrement(o.props.delta)});break;case"Home":o.clampAndCommit(o.props.min);break;case"PageUp":o.confirmInput(function(){return o.handleIncrement(o.props.pageDelta)});break;case"PageDown":o.confirmInput(function(){return o.handleDecrement(o.props.pageDelta)});break;case"End":o.clampAndCommit(o.props.max);break;default:return}e.preventDefault(),e.stopPropagation()}},o.handleArrowHover=function(e){o.props.disabled||o.setState({arrowHover:e})},o.validateProps(n),o.state=t.getNextStateFromProps(n,{}),o}return o.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.validateProps(e),this.setState(t.getNextStateFromProps(e,this.state))},t.getNextStateFromProps=function(e,t){return o.__assign({},t,{isIncrementDisabled:e.start===e.max,isDecrementDisabled:e.start===e.min,inputValue:String(e.start),lastValidValue:e.start,arrowHover:t.arrowHover||!1})},t.prototype.getInputStyle=function(){var e=a.getTextOutlineStyles({onDarkBackground:this.props.onDarkBackground}),t=v(),n=t.verticalIconPadding.paddingRight,i=g.DefaultSpace;return o.__assign({},e.input.base,this.props.inputStyle,c.conditional(this.state.arrowHover,e.input.interactive.hover),t.verticalIconPadding,{minWidth:27+i+n+"px"})},t.prototype.updateState=function(e,t,n){var i=void 0!==t,r=i&&t!==this.state.lastValidValue,s=parseInt(e,10);this.setState(o.__assign({inputValue:e},c.conditional(i,{lastValidValue:t}),{isIncrementDisabled:s>=this.props.max,isDecrementDisabled:s<=this.props.min}),n),r&&this.props.onValueUpdated&&this.props.onValueUpdated(t)},t.prototype.confirmInput=function(e){var t=parseInt(this.state.inputValue,10);isNaN(t)?this.revert():this.clampAndCommit(t,e)},t.prototype.clampAndCommit=function(e,t){var n=s.clamp(e,this.props.min,this.props.max);this.updateState(n.toString(),n,t)},t.prototype.revert=function(){this.updateState(this.state.lastValidValue.toString())},t.prototype.renderStepperLabel=function(){var e=v(),t=o.__assign({},e.label,this.props.labelStyle,c.conditional(this.props.onDarkBackground,{color:y.Color.InvertedPrimary})),n={style:t,"data-tb-test-id":c.testId(this.props.testId,"IntegerStepperWidget","OptionalLabel")};return this.props.label?i.createElement(r.InlineBlock,null,i.createElement("label",o.__assign({},n),this.props.label)):null},t.prototype.render=function(){var e=this,t=this.getInputStyle(),n=a.getTextOutlineStyles({onDarkBackground:this.props.onDarkBackground}),s={style:this.props.containerStyle,role:"spinbutton",id:this.props.testId,"aria-valuemin":this.props.min,"aria-valuemax":this.props.max,"aria-labelledby":this.props.label,"aria-valuenow":parseInt(this.state.inputValue,10)||void 0},l={testId:c.testId(this.props.testId,"IntegerStepperWidget"),isIncrementDisabled:this.state.isIncrementDisabled,isDecrementDisabled:this.state.isDecrementDisabled,disabled:this.props.disabled,handleIncrement:function(){return e.handleIncrement(e.props.delta)},handleDecrement:function(){return e.handleDecrement(e.props.delta)},handleHover:this.handleArrowHover,onDarkBackground:this.props.onDarkBackground},d={style:t,interactiveStyles:n.input.interactive,text:this.state.inputValue,testId:c.testId(this.props.testId,"IntegerStepperWidget"),handleChange:this.handleInputChange,handleEnter:this.handleEnter,handleEscape:this.handleEscape,disabled:this.props.disabled,handleActive:this.handleInputActive,handleFocus:this.handleInputFocus,handleHover:this.handleInputHover,handleBlur:this.handleBlur,onKeyDown:this.handleKeyDown,inputRef:this.props.inputRef,name:this.props.name,onDarkBackground:this.props.onDarkBackground,shouldSelectTextOnFocus:this.props.shouldSelectTextOnFocus};return i.createElement(r.Block,o.__assign({},s),this.renderStepperLabel(),i.createElement(r.InlineBlock,null,i.createElement(u.TextFieldInputWidget,o.__assign({},d)),i.createElement(h.VerticalStepperArrowGroup,o.__assign({},l))))},t.defaultProps={delta:1,pageDelta:1},t}(p.TextFieldBase);t.IntegerStepperWidget=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(4),s=n(13),a=n(6),l=n(14),d=n(122),c=n(8),p=n(3),u=n(2),h=p.TabStyles.Colors,g=p.TabStyles.Sizing,f=function(e){var t={left:"calc(50% + "+g.BorderWidth+"px )",position:"absolute",transform:"translateX(-50%)"};return{arrowLayout:{borderLeft:g.BorderWidth+"px solid "+(e?h.WhiteTransparentLine:h.L6),borderRight:g.BorderWidth+"px solid transparent",bottom:0,boxSizing:"border-box",margin:g.BorderWidth,position:"absolute",right:0,top:0,width:18},incrementIconStyle:o.__assign({},t,{top:g.BorderWidth}),decrementIconStyle:o.__assign({},t,{bottom:g.BorderWidth})}},y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.getContentWrapper=function(e,t){var n=this;return function(s){var a={draggable:!1,height:e.height,src:e.icon(o.__assign({},s,{onDarkBackground:n.props.onDarkBackground})),style:t,width:e.width};return i.createElement(r.Img,o.__assign({},a))}},t.prototype.render=function(){var e=f(this.props.onDarkBackground),t={buttonType:s.ButtonType.IconOutline,disabled:this.props.disabled||this.props.isIncrementDisabled,disableTabAccessibility:!0,getContent:this.getContentWrapper(c.StepperUpIcon,e.incrementIconStyle),handleClick:this.handleIncrementWrapper,testId:u.testId(this.props.testId,"VerticalStepperArrowGroup","IncrementIcon"),title:l.Messages.increment()},n={buttonType:s.ButtonType.IconOutline,disabled:this.props.disabled||this.props.isDecrementDisabled,disableTabAccessibility:!0,getContent:this.getContentWrapper(c.StepperDownIcon,e.decrementIconStyle),handleClick:this.handleDecrementWrapper,testId:u.testId(this.props.testId,"VerticalStepperArrowGroup","DecrementIcon"),title:l.Messages.decrement()};return i.createElement(r.Block,{style:e.arrowLayout},i.createElement(s.ButtonWidget,o.__assign({},t)),i.createElement(s.ButtonWidget,o.__assign({},n)))},t=o.__decorate([a.InteractiveDomHoCDecorator],t)}(d.StepperArrowGroup);t.VerticalStepperArrowGroup=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleIncrementWrapper=function(){t.props.disabled||t.props.handleIncrement()},t.handleDecrementWrapper=function(){t.props.disabled||t.props.handleDecrement()},t.handleHoverWrapper=function(e){t.props.disabled||t.props.handleHover(e)},t}return o.__extends(t,e),t}(i.Component);t.StepperArrowGroup=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(2),s=n(4),a=n(25),l=n(12);t.TextInputType=l.TextInputType;var d=n(33),c=n(9),p=n(124),u=function(e){function t(t){var n=e.call(this,t)||this;return n.labelId=c.generateId(),n}return o.__extends(t,e),t.prototype.render=function(){var e=this,t=p.getLineTextFieldStyles({onDarkBackground:this.props.onDarkBackground}),n=o.__assign({},t.placeholder.base,this.props.placeholderStyle,r.conditional(this.props.disabled,t.placeholder.disabled)),a=o.__assign({},t.floatingLabel,this.props.floatingLabelStyle),c=this.isPlaceholderShowing();this.props.floatingLabel&&(c=c&&(this.props.disabled||!this.isInputActiveOrHasFocus()));var u=!this.props.hideErrorDiv&&!!this.props.errorText,h=o.__assign({},t.baseInput.base,r.conditional(u,t.errorInput),this.props.inputStyle),g={type:this.props.type,style:h,interactiveStyles:r.conditional(!u,t.baseInput.interactive),text:this.props.text,testId:this.props.testId,handleChange:this.props.handleChange,handleEnter:this.props.handleEnter,disabled:this.props.disabled,handleActive:function(t){return e.handleInputActive(t)},handleEscape:this.props.handleEscape,handleFocus:function(t){return e.handleInputFocus(t)},handleBlur:this.props.handleBlur,id:this.labelId,inputRef:this.props.inputRef,readOnly:this.props.readOnly,maxLength:this.props.maxLength,name:this.props.name,ariaLabel:this.props.floatingLabel,__INTERNAL__ariaPlaceholder:this.props.placeholder,shouldSelectTextOnFocus:this.props.shouldSelectTextOnFocus},f={style:a,"data-tb-test-id":r.testId(this.props.testId,"FloatingLabel"),htmlFor:this.labelId};return i.createElement(s.Block,{style:this.props.containerStyle},r.conditional(Boolean(this.props.floatingLabel),i.createElement(s.Block,null,i.createElement("label",o.__assign({},f),c?d.Unicode.NonBreakingSpace:this.props.floatingLabel))),i.createElement(s.Block,null,r.conditional(c,i.createElement("div",{style:n,"data-tb-test-id":r.testId(this.props.testId,"Placeholder")},this.props.placeholder||this.props.floatingLabel)),i.createElement(l.TextFieldInputWidget,o.__assign({},g))),r.conditional(!this.props.hideErrorDiv,i.createElement(s.Block,null,i.createElement("div",{style:t.errorLabel,"data-tb-test-id":r.testId(this.props.testId,"ErrorLabel")},this.props.errorText?this.props.errorText:d.Unicode.NonBreakingSpace))))},t}(a.TextFieldBase);t.LineTextFieldWidget=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=o.TabStyles.Colors,r=o.TabStyles.Sizing,s=o.TabStyles.Spacing,a=o.TabStyles.Typography,l=function(e){return{baseInput:{base:{border:"none",borderRadius:0,borderBottomWidth:r.BorderWidth,borderBottomColor:e.onDarkBackground?i.WhiteTransparentLine:i.L6,borderBottomStyle:"solid",height:r.RowHeight,outline:"none",backgroundColor:i.Transparent,fontSize:a.Sizing.Default,fontFamily:a.FontFamily,fontWeight:"normal",color:e.onDarkBackground?a.Color.InvertedPrimary:a.Color.Primary,position:"relative",paddingBottom:0,marginBottom:s.DefaultSpace,lineHeight:"normal",WebkitUserSelect:"text",userSelect:"text"},interactive:{hover:{borderBottomColor:e.onDarkBackground?i.WhiteTransparentLineHover:i.L8},active:{borderBottomColor:e.onDarkBackground?i.WhiteTransparentLineHover:i.GoLight},focus:{borderBottomColor:e.onDarkBackground?i.WhiteTransparentLineHover:i.GoLight},disabled:{borderBottomColor:e.onDarkBackground?i.WhiteDisabled:i.L9Disabled,color:e.onDarkBackground?a.Color.InvertedDisabled:a.Color.Disabled}}},errorInput:{borderBottomColor:i.AttentionLight},placeholder:{base:{fontSize:a.Sizing.Default,fontFamily:a.FontFamily,fontWeight:"normal",color:e.onDarkBackground?a.Color.InvertedSecondary:a.Color.Secondary,position:"absolute",textAlign:"start",lineHeight:r.RowHeight+"px",bottom:s.DefaultSpace},disabled:{color:e.onDarkBackground?a.Color.InvertedDisabled:a.Color.Disabled}},errorLabel:{fontSize:a.Sizing.Tiny,fontFamily:a.FontFamily,fontWeight:"normal",color:i.AttentionLight,lineHeight:"normal"},floatingLabel:{fontSize:a.Sizing.Tiny,fontFamily:a.FontFamily,fontWeight:"normal",color:e.onDarkBackground?a.Color.InvertedSecondary:a.Color.Secondary,lineHeight:"19px"}}};t.getLineTextFieldStyles=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1),r=n(0),s=n(0),a=n(4),l=n(3),d=n(126);!function(e){e[e.Veritical=0]="Veritical",e[e.Horizontal=1]="Horizontal"}(o||(o={})),t.RadioLayoutType=o;var c=function(e){function t(n){var o=e.call(this,n)||this;return o.groupId=t.groupIdIncrementor++,o}return i.__extends(t,e),t.prototype.getContainerStyleOfIndex=function(e){return e!==this.props.buttonList.length-1&&this.props.layout===o.Horizontal?{paddingRight:l.TabStyles.Spacing.ExtraLargeSpace}:{}},t.prototype.getContainerStyle=function(){var e={};return this.props.layout===o.Horizontal&&(e.display="flex",e.flexWrap="wrap",this.props.justifyHorizontalItems&&(e.justifyContent="space-between")),e},t.prototype.render=function(){var e=this,t=this.props.buttonList.map(function(t,n){var o=e.getContainerStyleOfIndex(n);return s.createElement(d.RadioButtonWithLabelWidget,{index:n,groupName:e.props.name||"RadioButtonWithLabelGroup"+e.groupId.toString(),value:t.value,testId:t.testId,checked:n===e.props.checkedIndex,disabled:t.disabled,handleChange:e.props.handleChange,label:t.label,containerStyle:o,removeLeftMargin:e.props.removeLeftMargin,key:n})});return s.createElement(a.Block,{role:"radiogroup","aria-label":this.props.ariaLabel,style:this.getContainerStyle(),"data-tb-test-id":"RadioButtonWithLabelGroupWidget-"+this.props.testId},t)},t.groupIdIncrementor=0,t}(r.Component);t.RadioButtonWithLabelGroupWidget=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(127),s=n(4),a=n(20),l=n(6),d=n(24),c=n(3),p=n(5),u=function(){return{label:{alignItems:"center",display:"flex",height:c.TabStyles.Sizing.ListRowHeight},text:{width:"100%",paddingTop:"1px"}}},h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){var e=u();return i.createElement(s.Block,{className:a.ClickBustingConfig.suppressionClassName,role:"radio","aria-checked":this.props.checked},i.createElement(d.InputLabelWidget,{disabled:this.props.disabled,testId:this.props.testId,style:o.__assign({},e.label,this.props.containerStyle)},i.createElement(r.RadioButtonWidget,{disabled:this.props.disabled,checked:this.props.checked,handleChange:this.props.handleChange,hover:this.state.hover,testId:this.props.testId,groupName:this.props.groupName,removeLeftMargin:this.props.removeLeftMargin,value:this.props.value,index:this.props.index}),i.createElement(s.InlineBlock,{"aria-label":this.props.label,style:e.text},this.props.label)))},t=o.__decorate([l.InteractiveDomHoCDecorator],t)}(p.DynamicThemeComponent);t.RadioButtonWithLabelWidget=h},function(e,t,n){"use strict";function o(e,t){var n={disabled:e.disabled,checked:e.checked,hover:e.hover||t.hover,focus:t.focus};return d.RadioButtonIcon.icon(n)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(0),s=n(2),a=n(4),l=n(6),d=n(8),c=n(3),p=n(5),u=function(){return{baseDiv:{marginLeft:c.TabStyles.Spacing.DefaultSpace-d.RadioButtonIcon.padding,marginRight:c.TabStyles.Spacing.DefaultSpace-d.RadioButtonIcon.padding,height:d.RadioButtonIcon.height,width:d.RadioButtonIcon.width,minWidth:d.RadioButtonIcon.width,flexShrink:0},noLeftMargin:{marginLeft:-d.RadioButtonIcon.padding},radioButton:{opacity:0,height:d.RadioButtonIcon.height,width:d.RadioButtonIcon.width,margin:0,cursor:"default",verticalAlign:"top"},fakeRadioButton:{height:d.RadioButtonIcon.height,width:d.RadioButtonIcon.width,position:"absolute",verticalAlign:"top"}}},h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.handleFormChange=function(e){!t.props.disabled&&t.props.handleChange&&(t.props.checked||t.props.handleChange(t.props.value,t.props.index))},t.handleActive=function(e){t.setState({active:e})},t.handleFocus=function(e){t.setState({focus:!t.state.active&&e})},t.handleHover=function(e){t.setState({hover:e})},t}return i.__extends(t,e),t.prototype.render=function(){var e=o(this.props,this.state),t=u(),n=i.__assign({},t.baseDiv,s.conditional(this.props.removeLeftMargin,t.noLeftMargin));return r.createElement(l.InteractiveDomWrapper,{handleHover:this.handleHover,handleFocus:this.handleFocus,handleActive:this.handleActive},r.createElement(a.InlineBlock,{style:n},r.createElement(a.Img,{style:t.fakeRadioButton,src:e}),r.createElement("input",{style:t.radioButton,type:"radio",name:this.props.groupName,onChange:this.handleFormChange,checked:this.props.checked,disabled:this.props.disabled,"data-tb-test-id":this.props.testId+"-RadioButton",id:this.props.id,value:this.props.value})))},t}(p.DynamicThemeComponent);t.RadioButtonWidget=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(7),s=n(0),a=n(4),l=n(2),d=n(6),c=n(3),p=n(59),u=c.TabStyles.Colors,h=c.TabStyles.Sizing,g=c.TabStyles.Spacing,f=c.TabStyles.Typography,y=function(){var e=5*h.ListRowHeight+2*h.BorderWidth;return{container:{background:u.White},input:{base:{borderWidth:h.BorderWidth,borderRadius:h.BorderRadius,borderColor:u.L6,borderStyle:"solid",paddingLeft:g.DefaultSpace,paddingRight:g.DefaultSpace,outline:"none",backgroundColor:u.Transparent,fontSize:f.Sizing.Default,fontFamily:f.FontFamily,color:f.Color.Primary,position:"relative",fontWeight:"normal",lineHeight:h.ListRowHeight+"px",minHeight:h.RowHeight,maxHeight:e,overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch",wordWrap:"break-word"},interactive:{hover:{borderColor:u.L8},active:{borderColor:u.L8},focus:{borderColor:u.L8},disabled:{borderColor:u.L9Disabled,color:f.Color.Disabled}}},placeholder:{position:"absolute",fontWeight:"normal",fontSize:f.Sizing.Default,fontFamily:f.FontFamily,color:f.Color.Disabled,top:g.SmallSpace,left:g.DefaultSpace,textAlign:"start",lineHeight:h.ListRowHeight+"px"}}};t.getRichTextEditOutlineStyles=y;var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleInputRef=function(e){t.textInputRef=r.findDOMNode(e),t.props.handleInputRef(e)},t.shouldShowPlaceholder=function(){return!t.state.focus&&(!t.textInputRef||0===t.textInputRef.innerText.length)},t}return o.__extends(t,e),t.prototype.render=function(){var e=y(),t=this.shouldShowPlaceholder(),n={style:o.__assign({},e.container,this.props.containerStyle)},i={style:e.placeholder,"data-tb-test-id":l.testId(this.props.testId,"Placeholder")},r={style:e.input.base,interactiveStyles:e.input.interactive,testId:this.props.testId,handleInputRef:this.handleInputRef,disabled:this.props.disabled,handleEnter:this.props.handleEnter,handleChange:this.props.handleChange};return s.createElement(a.Block,n,l.conditional(t,s.createElement("label",i,this.props.placeholder)),s.createElement(p.RichTextEditWidget_UNFINISHED,r))},t=o.__decorate([d.InteractiveDomHoCDecorator],t)}(i.Component);t.RichTextEditOutlineWidget_UNFINISHED=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1),r=n(0),s=n(5),a=n(11),l=n(3),d=n(130);!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(o||(o={})),t.SelectedToggle=o;var c="0 0 0 1px "+l.TabStyles.Colors.Focus+" inset",p=function(){return{container:{display:"flex"},toggleBase:i.__assign({flexBasis:"100%",display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:l.TabStyles.Spacing.MediumSpace,paddingRight:l.TabStyles.Spacing.MediumSpace,borderWidth:l.TabStyles.Sizing.BorderWidth,borderStyle:"solid",lineHeight:l.TabStyles.Sizing.RowHeight-2*l.TabStyles.Sizing.BorderWidth+"px"},a.PreventUserSelect),selectedToggle:{backgroundColor:l.TabStyles.Colors.F8,color:l.TabStyles.Typography.Color.InvertedPrimary,borderColor:l.TabStyles.Colors.F8},unselectedToggle:{backgroundColor:l.TabStyles.Colors.F1,color:l.TabStyles.Typography.Color.Primary,borderColor:l.TabStyles.Colors.L6},hoverSelectedToggle:{borderColor:l.TabStyles.Colors.L9},hoverUnselectedToggle:{borderColor:l.TabStyles.Colors.L9},focusSelectedToggle:{boxShadow:c},focusUnselectedToggle:{boxShadow:c},activeSelectedToggle:{backgroundColor:l.TabStyles.Colors.F8,color:l.TabStyles.Typography.Color.InvertedPrimary,borderColor:l.TabStyles.Colors.L9},activeUnselectedToggle:{backgroundColor:l.TabStyles.Colors.F8,color:l.TabStyles.Typography.Color.InvertedPrimary,borderColor:l.TabStyles.Colors.L9},inactiveToggle:{backgroundColor:l.TabStyles.Colors.F1,color:l.TabStyles.Typography.Color.Primary,borderColor:l.TabStyles.Colors.L6},firstToggle:{borderTopLeftRadius:l.TabStyles.Sizing.BorderRadius,borderBottomLeftRadius:l.TabStyles.Sizing.BorderRadius},lastToggle:{borderTopRightRadius:l.TabStyles.Sizing.BorderRadius,borderBottomRightRadius:l.TabStyles.Sizing.BorderRadius}}},u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleChange=function(e){1===e?t.props.handleRightToggleSelected():t.props.handleLeftToggleSelected()},t}return i.__extends(t,e),t.prototype.render=function(){var e=p();return e.container=i.__assign({},e.container,this.props.containerStyle),r.createElement(d.SwitcherTextBase,{checkedIndex:this.props.selectedToggle===o.Right?1:0,toggleTexts:[this.props.leftToggleText,this.props.rightToggleText],handleChange:this.handleChange,style:e,testId:this.props.testId,name:this.props.name,ariaLabel:this.props.ariaLabel})},t}(s.DynamicThemeComponent);t.ToggleTextWidget=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(0),s=n(2),a=n(4),l=n(20),d=n(2),c=n(24),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleChange=function(e){t.props.checked||t.props.handleChange(t.props.idx)},t.handleActive=function(e){t.props.handleActive(e?t.props.idx:-1)},t}return o.__extends(t,e),t.prototype.render=function(){return r.createElement(c.InputLabelWidget,{style:this.props.style,testId:this.props.testId,interactiveStyles:{hover:this.props.hoverStyle,focus:this.props.focusStyle},handleActive:this.handleActive},r.createElement("input",{style:{opacity:0,position:"absolute"},onChange:this.handleChange,type:"radio",checked:this.props.checked,name:this.props.groupName,"data-tb-test-id":d.testId(this.props.testId,"input")}),this.props.children)},t}(i.Component),u=function(e){function t(n){var o=e.call(this,n)||this;return o.handleActive=function(e){l.ClickBustingConfig.suppressionClassName&&l.ClickBustingConfig.suppressionClassName.length||o.setState({activerSwitcherIdx:e})},o.groupId=t.groupIdIncrementor++,o.state={activerSwitcherIdx:-1},o}return o.__extends(t,e),t.prototype.getToggleStyling=function(e){var t=this.state.activerSwitcherIdx>=0,n=0===e,i=e===this.props.toggleTexts.length-1,r=this.state.activerSwitcherIdx!==e,a=this.props.checkedIndex===e;return o.__assign({},this.props.style.toggleBase,s.conditional(n,this.props.style.firstToggle),s.conditional(i,this.props.style.lastToggle),t?r?this.props.style.inactiveToggle:a?this.props.style.activeSelectedToggle:this.props.style.activeUnselectedToggle:a?this.props.style.selectedToggle:this.props.style.unselectedToggle)},t.prototype.render=function(){var e=this,t="SwitcherTextGroup"+String(this.groupId),n=this.props.toggleTexts.map(function(n,o){var i=e.getToggleStyling(o),s=e.props.checkedIndex===o?e.props.style.hoverSelectedToggle:e.props.style.hoverUnselectedToggle,a=e.props.checkedIndex===o?e.props.style.focusSelectedToggle:e.props.style.focusUnselectedToggle;return r.createElement(p,{groupName:e.props.name||t,handleChange:e.props.handleChange,checked:e.props.checkedIndex===o,testId:d.testId(e.props.testId,n),idx:o,style:i,hoverStyle:s,focusStyle:a,key:o,handleActive:e.handleActive},n)});return r.createElement(a.Block,{style:this.props.style.container,className:l.ClickBustingConfig.suppressionClassName,role:"radiogroup","aria-label":this.props.ariaLabel},n)},t.groupIdIncrementor=0,t}(i.Component);t.SwitcherTextBase=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(7),s=n(40),a=n(2),l=n(0),d=n(39),c=n(3),p=n(55),u=n(132),h=n(10),g=function(e){var t=c.TabStyles.Sizing.RowHeight,n=.5*t;return{display:"inline-block",width:e.colorLabelWidth||40,height:n,boxSizing:"border-box",backgroundColor:(e.color||"").toLowerCase(),marginTop:(t-(n+2*c.TabStyles.Sizing.BorderWidth))/2}},f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){var e={dropdownType:d.DropdownType.Outline,dropdownId:null,pointerClick:this.props.handleClick,onKeyDown:this.props.onKeyDown,dropdownOpen:this.props.isPickerOpen,disabled:this.props.disabled,interactiveStyles:d.getDropdownStylesByType(d.DropdownType.Outline).button.interactive,testId:a.testId(this.props.testId,"ColorPickerButton"),title:this.props.title};return l.createElement(d.DropdownButtonWidget,e,l.createElement("div",{style:g(this.props)}))},t}(i.Component);t.ColorPickerButton=f;var y=function(e){function t(t){var n=e.call(this,t)||this;return n.setColorPickerButton=function(e){n.buttonElement=r.findDOMNode(e)},n.unsubscribeOutsideClickListeners=function(){n.outsideClickListenersUnsubscribe.forEach(function(e){return e()}),n.outsideClickListenersUnsubscribe=[]},n.onColorSelected=function(e){n.togglePicker(),n.props.handleColorSelected(e.toLowerCase())},n.togglePicker=function(){n.props.disabled||n.setState({isPickerVisible:!n.state.isPickerVisible})},n.togglePickerOnKeyEvent=function(e){n.togglePicker(),e.preventDefault(),e.stopPropagation()},n.handleKeyDown=function(e){" "!==e.key&&"Enter"!==e.key||n.togglePickerOnKeyEvent(e)},n.handleGridKeyUp=function(e){"Escape"===e.key&&n.state.isPickerVisible&&n.togglePickerOnKeyEvent(e)},n.state={isPickerVisible:!1,customColorText:""},n.outsideClickListenersUnsubscribe=[],n.colorGrid=null,n}return o.__extends(t,e),t.prototype.componentDidUpdate=function(e,t){var n=this;this.state.isPickerVisible&&!t.isPickerVisible&&this.colorGrid?(this.outsideClickListenersUnsubscribe=[this.colorGrid.parentElement,r.findDOMNode(this)].map(function(e){return p.GlobalPointerDownOutsideListener.subscribe(e,n.togglePicker)}),this.colorGrid.focus(),this.state.customColorWidgetWidth!==this.colorGrid.clientWidth&&this.setState({customColorWidgetWidth:this.colorGrid.clientWidth})):!this.state.isPickerVisible&&t.isPickerVisible&&this.unsubscribeOutsideClickListeners()},t.prototype.componentWillUnmount=function(){this.unsubscribeOutsideClickListeners()},t.prototype.render=function(){var e={handleClick:this.togglePicker,color:this.props.selectedColor,disabled:this.props.disabled,isPickerOpen:this.state.isPickerVisible,colorLabelWidth:this.props.colorLabelWidth,onKeyDown:this.handleKeyDown,testId:this.props.testId,title:this.props.title,ref:this.setColorPickerButton};return l.createElement("div",{style:{display:"inline-block"},"data-tb-test-id":a.testId(this.props.testId,"ColorPicker")},l.createElement(f,e),a.conditional(this.state.isPickerVisible,this.buildColorGridWidget()))},t.prototype.buildColorGridWidget=function(){var e=this,t={handleSwatchClicked:this.onColorSelected,selectedColor:(this.props.selectedColor||"").toLowerCase(),colorsPreset:this.props.colorsPreset,testId:"colorgrid",ref:function(t){return e.colorGrid=r.findDOMNode(t)}},n={onColorSelected:this.onColorSelected,color:this.getCustomColorInput(),testId:this.props.testId,width:this.state.customColorWidgetWidth||100},o={anchorEl:this.buttonElement,zIndex:this.props.dropdownZIndex,anchorOrigin:{vertical:h.VerticalOriginOption.bottom,horizontal:h.HorizontalOriginOption.left},allowAutoPosition:!0},i={style:{backgroundColor:c.TabStyles.Colors.White,zIndex:this.props.dropdownZIndex,position:"absolute",padding:c.TabStyles.Spacing.LargeSpace,borderWidth:c.TabStyles.Sizing.BorderWidth,borderStyle:"solid",borderColor:c.TabStyles.Colors.L5,borderRadius:c.TabStyles.Sizing.BorderRadius},onKeyUp:this.handleGridKeyUp,"data-tb-test-id":a.testId(this.props.testId,"ColorGridWrapper")};return l.createElement(h.Overlay,o,l.createElement("div",i,l.createElement(s.ColorGridWidget,t),a.conditional(this.props.showCustomColorInput,l.createElement("div",{},l.createElement("hr",{style:{marginTop:c.TabStyles.Spacing.LargeSpace}}),l.createElement(u.CustomColorInput,n)))))},t.prototype.getCustomColorInput=function(){var e=this.props.colorsPreset===s.ColorGridPreset.Light?c.TabStyles.ColorPickerPresets.Light:c.TabStyles.ColorPickerPresets.Dark;return this.isSelectedColorCustom(e)?this.props.selectedColor:""},t.prototype.isSelectedColorCustom=function(e){if(!this.props.selectedColor)return!1;for(var t=0,n=e;t<n.length;t++){if(n[t].toLowerCase()===this.props.selectedColor.toLowerCase())return!1}return!0},t.defaultProps={shouldReturnFocusOnClose:!0},t}(i.Component);t.ColorPickerWidget=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(133),s=n(2),a=n(0),l=n(3),d=n(14),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){var e={display:"flex",flexDirection:"column",textAlign:"center",width:this.props.width,fontFamily:l.TabStyles.Typography.FontFamily,fontSize:"small"},t={onColorSelected:this.props.onColorSelected,testId:this.props.testId,selectedColor:this.props.color,containerWidth:this.props.width};return a.createElement("div",{style:e,"data-tb-test-id":s.testId(this.props.testId,"CustomColorInput")},d.Messages.customColor(),a.createElement(r.HexColorInput,t))},t}(i.Component);t.CustomColorInput=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(17),s=n(2),a=n(0),l=n(3),d=n(40),c=function(e){function t(t){var n=e.call(this,t)||this;return n.hexColorRegExp=/^#?[0-9A-Fa-f]{6}$/,n.onHandleClearText=function(){n.setState({hexColorText:"#"})},n.onHexColorInput=function(e){n.setState({hexColorText:e})},n.onColorInputEnter=function(){n.isAHexColor(n.state.hexColorText)&&n.props.onColorSelected(n.prependHash(n.state.hexColorText))},n.handleSwatchClicked=function(e){n.isAHexColor(n.state.hexColorText)&&n.props.onColorSelected(n.prependHash(e.toLowerCase()))},n.isAHexColor=function(e){return n.hexColorRegExp.test(e)},n.removeHash=function(e){return null!==e&&"#"===e.charAt(0)&&(e=e.slice(1)),e},n.prependHash=function(e){return null!==e&&"#"!==e.charAt(0)&&(e="#"+e),e},n.state={hexColorText:n.shouldDisplayCustomColor()?n.removeHash(t.selectedColor.toUpperCase()):"#"},n}return o.__extends(t,e),t.prototype.render=function(){var e={handleEnter:this.onColorInputEnter,handleChange:this.onHexColorInput,handleClearText:this.onHandleClearText,placeholder:"#",text:this.state.hexColorText||"#",hasError:"#"!==this.state.hexColorText&&!this.isAHexColor(this.state.hexColorText),containerStyle:{display:"inline-flex",paddingLeft:l.TabStyles.Spacing.DefaultSpace,flexGrow:1,width:"100%"},testId:this.props.testId},t={height:l.TabStyles.Sizing.RowHeight,width:l.TabStyles.Sizing.RowHeight,minHeight:l.TabStyles.Sizing.RowHeight,minWidth:l.TabStyles.Sizing.RowHeight,borderWidth:l.TabStyles.Sizing.BorderWidth,borderStyle:"solid",borderColor:l.TabStyles.Colors.L6,boxSizing:"border-box",marginRight:6},n={color:this.getCustomColor()||"transparent",handleClick:this.handleSwatchClicked,size:l.TabStyles.Sizing.RowHeight-2*l.TabStyles.Sizing.BorderWidth,selected:this.shouldSwatchBeSelected(),disabled:!this.getCustomColor(),testId:this.props.testId};return a.createElement("div",{style:{display:"flex",flexGrow:1,paddingTop:l.TabStyles.Spacing.DefaultSpace},"data-tb-test-id":s.testId(this.props.testId,"HexInput")},a.createElement("div",{style:t},a.createElement(d.ColorSwatchWidget,n)),a.createElement(r.OutlineTextFieldWidget,e))},t.prototype.getCustomColor=function(){return"#"!==this.state.hexColorText&&this.isAHexColor(this.state.hexColorText)?this.prependHash(this.state.hexColorText):null},t.prototype.shouldDisplayCustomColor=function(){return 0!==this.props.selectedColor.length},t.prototype.shouldSwatchBeSelected=function(){return this.shouldDisplayCustomColor()&&this.prependHash(this.state.hexColorText.toLowerCase())===this.props.selectedColor},t}(i.Component);t.HexColorInput=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1),r=n(0),s=n(0),a=n(4),l=n(8),d=n(2),c=n(38),p=n(14);!function(e){e[e.Large=50]="Large",e[e.Small=14]="Small"}(o=t.ActivitySpinnerSize||(t.ActivitySpinnerSize={}));var u=function(e){return{underlay:{background:"rgba(255,255,255,.6)",borderRadius:10,textAlign:"center",width:65,height:65},spinnerWithUnderlay:{width:e,height:"100%"},spinner:{width:e,height:e}}},h=function(e,t){return'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="cursor:wait;overflow:hidden;-webkit-animation:svg-spinner-animation 1s linear infinite;animation:svg-spinner-animation 1s linear infinite;transform-origin:center;" viewBox="0 0 50 50">\n    <style type="text/css">\n      @-webkit-keyframes svg-spinner-animation{100%{-webkit-transform:rotate(360deg);}}@keyframes svg-spinner-animation{100%{transform:rotate(360deg);}}\n    </style>\n    <g>\n      <path d="M42.7,7.3L40,10c3.8,3.8,6.2,9.1,6.2,15c0,11.7-9.5,21.1-21.1,21.1C13.3,46.1,3.9,36.7,3.9,25H0c0,13.8,11.2,25,25,25c13.8,0,25-11.2,25-25C50,18.1,47.2,11.9,42.7,7.3z" style="fill:'+e+';"/>\n    </g>\n    '+(t?"":'\n    <g>\n      <defs>\n        <path id="svg-spinner-circle" d="M25,50C11.2,50,0,38.8,0,25C0,11.2,11.2,0,25,0c13.8,0,25,11.2,25,25C50,38.8,38.8,50,25,50z M25,3.9C13.3,3.9,3.9,13.3,3.9,25c0,11.7,9.5,21.1,21.1,21.1S46.1,36.7,46.1,25C46.1,13.3,36.7,3.9,25,3.9z"/>\n      </defs>\n      <clipPath id="svg-spinner-clippath">\n        <use style="overflow:visible;" xlink:href="#svg-spinner-circle"/>\n      </clipPath>\n      <linearGradient id="svg-spinner-gradient" x1="0" x2="50" y1="12.4998" y2="12.4998" gradientUnits="userSpaceOnUse">\n        <stop offset="0" style="stop-color:'+e+';stop-opacity:0"/>\n        <stop offset="0.15" style="stop-color:'+e+';stop-opacity:0.04"/>\n        <stop offset="0.3" style="stop-color:'+e+';stop-opacity:0.16"/>\n        <stop offset="0.45" style="stop-color:'+e+';stop-opacity:0.36"/>\n        <stop offset="0.61" style="stop-color:'+e+';stop-opacity:0.64"/>\n        <stop offset="0.76" style="stop-color:'+e+'"/>\n      </linearGradient>\n      <polygon points="25,25 0,25 0,0 50,0" style="clip-path:url(#svg-spinner-clippath);fill:url(#svg-spinner-gradient);"/>\n    </g>')+"\n  </svg>"},g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){if(this.props.spinnerSize!==o.Large&&this.props.shouldShowUnderlay)throw new Error("Underlay is only supported for Large size.");var e={style:u(this.props.spinnerSize).underlay,"data-tb-test-id":d.testId(this.props.testId,"Spinner-Underlay")};return this.props.shouldShowUnderlay?s.createElement(a.InlineBlock,e,this.getSpinnerElement()):this.getSpinnerElement()},t.prototype.getSpinnerElement=function(){var e=u(this.props.spinnerSize),t=this.props.onDarkBackground?"rgba(255, 255, 255, 0.8)":"rgb(97, 101, 112)";return c.isEdge?s.createElement("iframe",{"aria-label":p.Messages.waitIndicatorLabel(),"data-tb-test-id":d.testId(this.props.testId,"Spinner"),frameBorder:"0",role:"img",scrolling:"no",src:l.encodeSvg(h(t,!0)),style:this.props.shouldShowUnderlay?e.spinnerWithUnderlay:e.spinner,type:"image/svg+xml"}):s.createElement("object",{"aria-label":p.Messages.waitIndicatorLabel(),data:l.encodeSvg(h(t)),"data-tb-test-id":d.testId(this.props.testId,"Spinner"),role:"img",style:this.props.shouldShowUnderlay?e.spinnerWithUnderlay:e.spinner,type:"image/svg+xml"})},t.defaultProps={spinnerSize:o.Large},t}(r.Component);t.ActivitySpinnerWidget=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(38),s=n(21),a=n(34),l=n(53),d=n(2),c=n(19),p=n(29),u=n(136),h=n(61),g=n(137),f=n(138),y=function(e){function t(t){var n=e.call(this,t)||this;return n.getHandleCount=function(){return void 0===n.props.handles.rightHandlePosition?1:2},n.isSingleHandleBeingDragged=function(e){return e===p.HandleType.Left||e===p.HandleType.Right},n.determineSingleHandleDragOffsetIfNeeded=function(e,t,o){if(t){var i;return e===p.HandleType.Left?i=n.props.handles.leftHandlePosition:e===p.HandleType.Right&&(i=n.props.handles.rightHandlePosition),i?i-o:void 0}},n.determineWhichHandleShouldBeDraggedForEvent=function(e,t){return e?1===n.getHandleCount()?g.SliderHandleContainerDragHandleLogic.determineWhichHandleShouldBeDraggedForTouchAndOneHandle(t,n.leftHandleWidgetRef.getBoundingClientRectForInteractiveArea()):g.SliderHandleContainerDragHandleLogic.determineWhichHandleShouldBeDraggedForTouchAndTwoHandles(t,n.leftHandleWidgetRef.getBoundingClientRectForInteractiveArea(),n.rightHandleWidgetRef.getBoundingClientRectForInteractiveArea(),n.rangeHandleRef.getBoundingClientRect()):1===n.getHandleCount()?g.SliderHandleContainerDragHandleLogic.determineWhichHandleShouldBeDraggedForMouseAndOneHandle(t,n.leftHandleWidgetRef.getBoundingClientRectForIcon()):g.SliderHandleContainerDragHandleLogic.determineWhichHandleShouldBeDraggedForMouseAndTwoHandles(t,n.leftHandleWidgetRef.getBoundingClientRectForIcon(),n.rightHandleWidgetRef.getBoundingClientRectForIcon())},n.fireHandleDragStartEvents=function(e,t,o){if(n.isSingleHandleBeingDragged(e)){if(n.props.onHandleDragStart&&!isNaN(t)){var i=t+(o||0);n.props.onHandleDragStart(e,i)}}else n.props.onBothHandleDragStart&&n.props.onBothHandleDragStart()},n.fireHandleDragMoveEvents=function(e,t){n.isSingleHandleBeingDragged(n.state.handleBeingDragged)?n.props.onHandleDragMove&&!isNaN(e)&&n.props.onHandleDragMove(n.state.handleBeingDragged,e):!n.props.onBothHandleDragMove||void 0===t||isNaN(e)||isNaN(t)||n.props.onBothHandleDragMove(e,t)},n.fireHandleDragEndEvents=function(e){var t=n.isSingleHandleBeingDragged(e);t&&n.props.onHandleDragEnd?n.props.onHandleDragEnd(e):!t&&n.props.onBothHandleDragEnd&&n.props.onBothHandleDragEnd()},n.setKeyboardFocusOnHandle=function(e){var t;e===p.HandleType.Left?t=n.leftHandleWidgetRef:e===p.HandleType.Right?t=n.rightHandleWidgetRef:e===p.HandleType.Both&&(t=n.rangeHandleRef),t&&t.focus()},n.dragStart=function(e,t,o,i){if(n.containerElementRef){var r=f.SliderHandleContainerCoordinateLogic.convertClientCoordinateIntoProportionOfContainer(t.x,n.containerElementRef.getBoundingClientRect());n.globalPointerEventCapturer&&n.globalPointerEventCapturer.addListeners();var s=n.determineSingleHandleDragOffsetIfNeeded(e,o,r),a={leftHandlePosition:e===p.HandleType.Left?r:n.props.handles.leftHandlePosition,rightHandlePosition:e===p.HandleType.Right?r:n.props.handles.rightHandlePosition};n.setState({handleBeingTouched:i?e:void 0,handleBeingDragged:e,dragOriginInClientCoordinates:t,handlePositionsAtDragStart:a,singleHandleDragOffsetAsProportion:s}),n.fireHandleDragStartEvents(e,r,s),n.setKeyboardFocusOnHandle(e)}},n.dragMove=function(e){if(n.containerElementRef){var t=n.isSingleHandleBeingDragged(n.state.handleBeingDragged);if(t&&n.props.onHandleDragMove){var o=n.state.handleBeingDragged===p.HandleType.Left?n.state.handlePositionsAtDragStart.leftHandlePosition:n.state.handlePositionsAtDragStart.rightHandlePosition,i=f.SliderHandleContainerCoordinateLogic.calculateProportionalPositionWhenDraggingSingleHandle(n.state.dragOriginInClientCoordinates.x,o,e.x,n.containerElementRef.getBoundingClientRect());n.fireHandleDragMoveEvents(i)}else if(!t&&n.props.onBothHandleDragMove){var r=f.SliderHandleContainerCoordinateLogic.calculateProportionalPositionsWhenDraggingBothHandles(n.state.dragOriginInClientCoordinates.x,n.state.handlePositionsAtDragStart.leftHandlePosition,n.state.handlePositionsAtDragStart.rightHandlePosition,e.x,n.containerElementRef.getBoundingClientRect());n.fireHandleDragMoveEvents(r.leftHandlePosition,r.rightHandlePosition)}}},n.dragEnd=function(){if(void 0!==n.state.handleBeingDragged){n.globalPointerEventCapturer&&n.globalPointerEventCapturer.removeListeners();var e=n.state.handleBeingDragged;n.setState({handleBeingTouched:void 0,handleBeingDragged:void 0,dragOriginInClientCoordinates:void 0,handlePositionsAtDragStart:void 0}),n.fireHandleDragEndEvents(e)}},n.setContainerRef=function(e){n.containerElementRef=e,n.globalPointerEventCapturer=new l.GlobalPointerEventCapturer(n.containerElementRef,n.onPointerMove,n.onPointerUp)},n.setLeftHandleWidgetRef=function(e){n.leftHandleWidgetRef=e},n.setRightHandleWidgetRef=function(e){n.rightHandleWidgetRef=e},n.setRangeHandleRef=function(e){n.rangeHandleRef=e},n.onPointerDown=function(e){if(!n.props.disabled&&n.leftHandleWidgetRef&&(2!==n.getHandleCount()||n.rightHandleWidgetRef)){var t=e,o=a.getClientPosition(t),i=n.determineWhichHandleShouldBeDraggedForEvent(a.isTouchEvent(t),o);i&&(e.preventDefault(),e.stopPropagation(),n.dragStart(i.handleType,o,i.directlyOnIcon,a.isTouchEvent(t)))}},n.onPointerMove=function(e){!n.props.disabled&&n.containerElementRef&&(e.preventDefault(),e.stopPropagation(),n.dragMove(a.getClientPosition(e)))},n.onPointerUp=function(e){n.dragEnd(),n.props.disabled||(e.preventDefault(),e.stopPropagation())},n.onHandleKeyDown=function(e){return function(t){n.props.disabled||n.props.onHandleKeyDown&&h.SliderValueLogic.KeysRelevantForManipulatingSlider[t.key]&&(n.props.onHandleKeyDown(e,t.key),t.preventDefault(),t.stopPropagation())}},n.renderLeftHandle=function(){if(isNaN(n.props.handles.leftHandlePosition))return null;var e=n.state.handleBeingDragged===p.HandleType.Left||n.state.handleBeingDragged===p.HandleType.Both,t=n.state.handleBeingTouched===p.HandleType.Left||n.state.handleBeingTouched===p.HandleType.Both,o=1===n.getHandleCount()?u.SliderHandleIconType.Normal:u.SliderHandleIconType.Left;return i.createElement(u.SliderHandleWidget,{ariaAttributes:n.props.handlesAriaAttributes.leftHandleAriaAttributes,ref:n.setLeftHandleWidgetRef,disabled:n.props.disabled,position:n.props.handles.leftHandlePosition,iconType:o,isBeingDragged:e,onKeyDown:n.onHandleKeyDown(p.HandleType.Left),testId:n.props.testId,isBeingTouched:t})},n.renderRightHandle=function(){if(1===n.getHandleCount()||void 0===n.props.handles.rightHandlePosition||isNaN(n.props.handles.rightHandlePosition))return null;var e=n.state.handleBeingDragged===p.HandleType.Right||n.state.handleBeingDragged===p.HandleType.Both,t=n.state.handleBeingTouched===p.HandleType.Right||n.state.handleBeingTouched===p.HandleType.Both;return i.createElement(u.SliderHandleWidget,{ariaAttributes:n.props.handlesAriaAttributes.rightHandleAriaAttributes,ref:n.setRightHandleWidgetRef,disabled:n.props.disabled,iconType:u.SliderHandleIconType.Right,position:n.props.handles.rightHandlePosition,isBeingDragged:e,onKeyDown:n.onHandleKeyDown(p.HandleType.Right),testId:n.props.testId,isBeingTouched:t})},n.handleRangeHandleFocusBlur=function(e){n.props.onRangeHandleFocus&&n.props.onRangeHandleFocus("focus"===e.type)},n.state={},n}return o.__extends(t,e),t.prototype.componentWillUnmount=function(){this.globalPointerEventCapturer&&this.globalPointerEventCapturer.removeListeners()},t.prototype.renderRangeHandle=function(e){if(this.props.disabled||isNaN(this.props.handles.leftHandlePosition)||1===this.getHandleCount()||!this.props.handles.rightHandlePosition||isNaN(this.props.handles.rightHandlePosition))return null;var t=100*this.props.handles.leftHandlePosition,n=100-100*this.props.handles.rightHandlePosition;return i.createElement("span",{"data-tb-test-id":d.testId(this.props.testId,"RangeHandle"),onBlur:this.handleRangeHandleFocusBlur,onFocus:this.handleRangeHandleFocusBlur,onKeyDown:this.onHandleKeyDown(p.HandleType.Both),ref:this.setRangeHandleRef,style:o.__assign({},e,{left:t+"%",right:n+"%"}),tabIndex:0})},t.prototype.render=function(){var e=d.testId(this.props.testId,"SliderHandleContainer"),t=c.getSliderHandleContainerStyles(),n=t.Container;return r.isEdge&&(n.touchAction="none"),i.createElement(s.PointerEventWrapper,{pointerDown:this.onPointerDown,disabled:this.props.disabled},i.createElement("div",{style:n,onTouchStart:this.onPointerDown,ref:this.setContainerRef,"data-tb-test-id":e},this.renderLeftHandle(),this.renderRangeHandle(t.RangeHandleArea),this.renderRightHandle()))},t}(i.Component);t.SliderHandleContainer=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1),r=n(0),s=n(6),a=n(8),l=n(2),d=n(16),c=n(19);!function(e){e.Normal="normal",e.Left="left",e.Right="right"}(o=t.SliderHandleIconType||(t.SliderHandleIconType={}));var p=function(e){function t(t){var n=e.call(this,t)||this;return n.chooseIconAndStylesForRender=function(){var e=c.getSliderHandleStyles(),t=void 0,r=void 0,s=void 0;switch(n.props.iconType){case o.Left:t=a.SliderLeftHandleIcon,r=e.HandleInteractiveAreaLeft,s=e.HandleIconLeft;break;case o.Right:t=a.SliderRightHandleIcon,r=e.HandleInteractiveAreaRight,s=e.HandleIconRight;break;default:t=a.SliderHandleIcon,r=e.HandleInteractiveArea,s=e.HandleIcon}n.props.disabled&&(r=i.__assign({},r,e.DisabledHandleMixin),s=i.__assign({},s,e.DisabledHandleInnerFocusAreaMixin));var l={active:n.state.isHovered||n.props.isBeingDragged,disabled:n.props.disabled,focus:n.state.isFocused},d=t.icon(l);return{positioningContainerStyle:e.PositioningContainer,pressIndicationBarStyle:e.PressIndicationBar,interactiveAreaStyle:r,imgStyle:s,iconImageDataUrl:d}},n.setImgRef=function(e){n.imgRef=e},n.setInteractiveAreaRef=function(e){n.interactiveAreaRef=e},n.onFocus=function(e){n.setState({isFocused:!n.props.disabled&&e})},n.onHover=function(e){n.props.disabled||n.setState({isHovered:e})},n.state={isHovered:!1,isFocused:!1},n}return i.__extends(t,e),t.prototype.focus=function(){this.imgRef&&this.imgRef.focus()},t.prototype.getBoundingClientRectForIcon=function(){if(this.imgRef){var e=this.imgRef.getBoundingClientRect();return this.props.iconType===o.Left?d.addClientRectRight(e,-1*a.SliderLeftHandleIcon.artworkOffsetFromRightSide):this.props.iconType===o.Right?d.addClientRectLeft(e,a.SliderRightHandleIcon.artworkOffsetFromLeftSide):e}},t.prototype.getBoundingClientRectForInteractiveArea=function(){if(this.interactiveAreaRef)return this.interactiveAreaRef.getBoundingClientRect()},t.prototype.render=function(){var e=l.testId(this.props.testId,"SliderHandle"),t=100*this.props.position,n=this.chooseIconAndStylesForRender(),o=n.positioningContainerStyle,a=n.pressIndicationBarStyle,d=n.interactiveAreaStyle,c=n.imgStyle,p=n.iconImageDataUrl,u=this.props.isBeingDragged&&this.props.isBeingTouched,h=i.__assign({},this.props.ariaAttributes,{"aria-orientation":"horizontal",role:"slider"});return r.createElement(s.InteractiveDomWrapper,{handleHover:this.onHover,handleFocus:this.onFocus},r.createElement("span",{style:i.__assign({},o,{left:t+"%"}),"data-tb-test-id":e},u&&r.createElement("span",{style:a,"data-tb-test-id":e+"-touch-drag-indicator"}),r.createElement("span",{style:d,ref:this.setInteractiveAreaRef}),r.createElement("img",i.__assign({},h,{style:c,src:p,tabIndex:this.props.disabled?void 0:0,onKeyDown:this.props.onKeyDown,ref:this.setImgRef,"data-tb-test-id":l.testId(this.props.testId,"SliderHandleIconArea")}))))},t}(r.Component);t.SliderHandleWidget=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(16),i=n(29);!function(e){function t(e,t){var n={left:e.x,top:e.y},r=o.doesRectangleContainPoint(t,n);return{handleType:i.HandleType.Left,directlyOnIcon:r}}function n(e,t,n){var r={left:e.x,top:e.y};return o.doesRectangleContainPoint(t,r)?{handleType:i.HandleType.Left,directlyOnIcon:!0}:o.doesRectangleContainPoint(n,r)?{handleType:i.HandleType.Right,directlyOnIcon:!0}:e.x>=t.right&&e.x<=n.left?{handleType:i.HandleType.Both,directlyOnIcon:!1}:e.x<=t.right?{handleType:i.HandleType.Left,directlyOnIcon:!1}:{handleType:i.HandleType.Right,directlyOnIcon:!1}}function r(e,t){var n={left:e.x,top:e.y};if(o.doesRectangleContainPoint(t,n))return{handleType:i.HandleType.Left,directlyOnIcon:!0}}function s(e,t,n,r){var s={left:e.x,top:e.y},a=o.doesRectangleContainPoint(t,s),l=o.doesRectangleContainPoint(n,s),d=o.doesRectangleContainPoint(r,s);if(a&&l){return{handleType:Math.abs(s.left-t.left)<Math.abs(s.left-n.right)?i.HandleType.Left:i.HandleType.Right,directlyOnIcon:!0}}return a?{handleType:i.HandleType.Left,directlyOnIcon:!0}:l?{handleType:i.HandleType.Right,directlyOnIcon:!0}:d?{handleType:i.HandleType.Both,directlyOnIcon:!0}:void 0}e.determineWhichHandleShouldBeDraggedForMouseAndOneHandle=t,e.determineWhichHandleShouldBeDraggedForMouseAndTwoHandles=n,e.determineWhichHandleShouldBeDraggedForTouchAndOneHandle=r,e.determineWhichHandleShouldBeDraggedForTouchAndTwoHandles=s}(t.SliderHandleContainerDragHandleLogic||(t.SliderHandleContainerDragHandleLogic={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(28);!function(e){function t(e,t){var n=e-t.left,i=n/Math.max(1,t.width);return o.clamp(i,0,1)}function n(e,t,n,i){var r=n-e,s=r/i.width,a=t+s;return o.clamp(a,0,1)}function i(e,t,n,o,i){var r=o-e,s=r/i.width,a=t+s,l=n+s,d=n-t;return a<0?{leftHandlePosition:0,rightHandlePosition:d}:l>1?{leftHandlePosition:1-d,rightHandlePosition:1}:{leftHandlePosition:a,rightHandlePosition:l}}e.convertClientCoordinateIntoProportionOfContainer=t,e.calculateProportionalPositionWhenDraggingSingleHandle=n,e.calculateProportionalPositionsWhenDraggingBothHandles=i}(t.SliderHandleContainerCoordinateLogic||(t.SliderHandleContainerCoordinateLogic={}))},function(e,t,n){"use strict";function o(e){var t=[];if(1===e)t.push(.5);else if(e>1)for(var n=e-1,o=0;o<e;o++)t.push(o/n);return t}function i(e){var t=o(e.tickCount),n=t.map(function(e){return 100*e}),i=l.getSliderTickBarStyles();return s.createElement("div",{style:i.Bar,"data-tb-test-id":a.testId(e.testId,"SliderTickBar")},n.map(function(e,t){return s.createElement("span",{key:t,style:r.__assign({},i.Tick,{left:e+"%"})})}))}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=n(0),a=n(2),l=n(19);t.calculateTickProportionalPositions=o,t.SliderTickBarWidget=i},function(e,t,n){"use strict";function o(e){var t,n=a.getSliderTrackStyles();if(e.rangeIndicatorBarPosition){var o=100*e.rangeIndicatorBarPosition.start,l=100*(1-e.rangeIndicatorBarPosition.end),d=e.handleIsBeingDragged?n.RangeIndicatorBarDarkened:e.isRangeHandleFocused?n.RangeIndicatorBarFocused:n.RangeIndicatorBar;t=r.createElement("div",{style:i.__assign({},d,{left:o+"%",right:l+"%"})})}var c;if(e.dataBarPosition){var o=100*e.dataBarPosition.start,l=100*(1-e.dataBarPosition.end),d=e.handleIsBeingDragged?n.DataBarDarkened:e.isRangeHandleFocused?n.DataBarFocused:n.DataBar;c=r.createElement("div",{style:i.__assign({},d,{left:o+"%",right:l+"%"})})}return r.createElement("div",{style:n.Track,"data-tb-test-id":s.testId(e.testId,"SliderTrack")},t,c)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(0),s=n(2),a=n(19);t.SliderTrackWidget=o},function(e,t,n){"use strict";function o(e){var t=i.__assign({},e,{testId:s.testId(e.testId,"RangeSlider")});return r.createElement(a.SliderBaseWidget,i.__assign({},t))}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(0),s=n(2),a=n(29);t.RangeSliderWidget=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(143),i=n(144),r=n(62),s=function(){function e(){}return e.CreateInstance=function(e){return e.props.activationMode===r.TabActivationMode.Manual?new i.ManualTabActivator(e):new o.AutomaticTabActivator(e)},e}();t.TabActivatorFactory=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(64),r=function(e){function t(t){return e.call(this,t)||this}return o.__extends(t,e),t.prototype.handleKeyDown=function(e,t){var n=this.tabIndexFromKeyDown(e,t.key);-1!==n&&(this.tabsWidget.setActiveIndex(n),i.BaseTabActivator.preventDefaultAndStopPropagation(t))},t}(i.BaseTabActivator);t.AutomaticTabActivator=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(64),r=function(e){function t(t){return e.call(this,t)||this}return o.__extends(t,e),t.prototype.handleKeyDown=function(e,t){var n=this.tabIndexFromKeyDown(e,t.key);if(-1!==n)return this.tabsWidget.setFocusedIndex(n),void i.BaseTabActivator.preventDefaultAndStopPropagation(t);var o=this.tabIndexToActivate(t.key);-1!==o&&(this.tabsWidget.setActiveIndex(o),i.BaseTabActivator.preventDefaultAndStopPropagation(t))},t.prototype.tabIndexToActivate=function(e){switch(e){case"Enter":case" ":return this.tabsWidget.state.focusedIndex;default:return-1}},t}(i.BaseTabActivator);t.ManualTabActivator=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1),r=n(0),s=n(63),a=n(2),l=n(9),d=n(8);!function(e){e[e.none=0]="none",e[e.hovered=1]="hovered",e[e.pressed=2]="pressed"}(o=t.TabMouseInteraction||(t.TabMouseInteraction={}));var c=function(e){function t(t){var n=e.call(this,t)||this;return n.handleTabRef=function(e){n.tabRef=e},n.handleLabelRef=function(e){n.labelRef=e},n.handleMouseEnter=function(){var e=n.labelRef&&l.isElementOverflownX(n.labelRef)?n.props.tabContent.label:void 0;n.setState({mouseInteraction:o.hovered,title:e})},n.handleMouseDown=function(){n.setState({mouseInteraction:o.pressed})},n.handleMouseLeave=function(){n.setState({mouseInteraction:o.none})},n.handleClick=function(){n.setState({mouseInteraction:o.none}),n.props.onClick(n.props.index)},n.handleKeyDown=function(e){n.props.onKeyDown(n.props.index,e)},n.handleFocus=function(){n.props.onFocus(n.props.index)},n.state={mouseInteraction:o.none},n}return i.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.applyFocus=e.isFocused&&!this.props.isFocused},t.prototype.componentDidUpdate=function(){this.applyFocus&&this.tabRef&&(this.tabRef.focus(),this.applyFocus=!1)},t.prototype.getTabIndicatorStyles=function(){return i.__assign({},s.BaseTabIndicatorStyles,a.conditional(this.isHovered(),s.HoveredTabIndicatorStyles),a.conditional(this.props.isActive,s.ActiveTabIndicatorStyles),a.conditional(this.props.isFocused,s.FocusedTabIndicatorStyles),a.conditional(this.isPressed(),s.PressedTabIndicatorStyles))},t.prototype.isHovered=function(){return this.state.mouseInteraction===o.hovered},t.prototype.isPressed=function(){return this.state.mouseInteraction===o.pressed},t.prototype.render=function(){var e={"aria-controls":this.props.ariaControls,"aria-label":this.props.tabContent.label,"aria-selected":this.props.isActive,id:this.props.id,onBlur:this.props.onBlur,onClick:this.handleClick,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTouchEnd:this.handleClick,ref:this.handleTabRef,role:"tab",style:s.GetSingleTabStyles(this.props.flexPercent),tabIndex:this.props.isActive||this.props.isFocused?0:-1,title:this.props.tabContent.title||this.state.title},t=i.__assign({},s.DefaultTabLabelStyles,a.conditional(this.props.isActive&&!!this.props.flexPercent,{fontWeight:"bold"}));return r.createElement("div",i.__assign({},e),r.createElement("div",{style:this.props.tabContainerStyles},r.createElement("div",{style:t},this.renderIcon(),this.renderLabel())),r.createElement("div",{style:this.getTabIndicatorStyles()}))},t.prototype.renderIcon=function(){var e=this.props.tabContent.icon;if(e){var t={"data-tb-test-id":a.testId(this.props.id,"icon"),style:s.TabContentStyle},n="string"==typeof e?r.createElement("img",{src:d.encodeSvg(e)}):e;return r.createElement("div",i.__assign({},t),n)}},t.prototype.renderLabel=function(){var e={"data-tb-test-id":a.testId(this.props.id,"label"),ref:this.handleLabelRef,style:s.LabelStyle};return r.createElement("div",{style:s.TabContentStyle},r.createElement("div",i.__assign({},e),this.props.tabContent.label))},t}(r.PureComponent);t.TabWidget=c},function(e,t,n){"use strict";function o(e){var t={"aria-labelledby":e.ariaLabelledBy,id:e.id,role:"tabpanel",style:e.containerStyle};return r.createElement("div",i.__assign({},t),e.content)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(0);t.TabPanel=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1),r=n(0),s=n(15),a=n(2),l=n(3),d=n(4),c=n(13),p=n(65),u=n(8),h=n(14);!function(e){e.Error="error",e.Warning="warning",e.Success="success",e.Info="info"}(o||(o={})),t.ToastType=o;var g=function(e){switch(e){case o.Error:return{textColor:"rgb(155,47,60)",backgroundColor:"rgb(249,202,207)"};case o.Warning:return{textColor:"rgb(198,76,48)",backgroundColor:"rgb(255,214,187)"};case o.Info:return{textColor:"rgb(15,68,94)",backgroundColor:"rgb(219,233,238)"};case o.Success:return{textColor:"rgb(0,63,51)",backgroundColor:"rgb(172,229,200)"};default:throw new Error("Invalid Toast type: "+e)}},f=function(e){var t=g(e),n=l.TabStyles.Typography.Sizing.XLarge+"px";return{label:{lineHeight:n},outerDiv:{position:"fixed",left:"50%",transform:"translateX(-50%)",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",maxWidth:"800px",paddingLeft:l.TabStyles.Spacing.ExtraLargeSpace,padding:l.TabStyles.Spacing.MediumSpace,backgroundColor:t.backgroundColor,color:t.textColor,fontFamily:l.TabStyles.Typography.FontFamily,fontSize:l.TabStyles.Typography.Sizing.Default,transitionProperty:"opacity"},actionLink:{padding:"0px",marginLeft:l.TabStyles.Spacing.MediumSpace,lineHeight:n,color:t.textColor,fontWeight:"bold",cursor:"pointer",flexShrink:0},closeButton:{marginLeft:l.TabStyles.Spacing.ExtraLargeSpace,height:u.ToastCloseButtonIcon.height,width:u.ToastCloseButtonIcon.width,cursor:"pointer"}}},y=function(e){function t(n){var o=e.call(this,n)||this;return o.autoDismissTimerId=-1,o.fadeOutTimerId=-1,o.fadeOut=function(){var e=o.shouldAutoDismiss()?t.AutodimissCloseFadeTransitionTimeMS:t.FadeTransitionTimeMS;o.setState({fadeOpacity:0,fadeTransitionTime:e}),o.fadeOutTimerId=window.setTimeout(o.onClose,t.FadeTransitionTimeMS)},o.onMouseOver=function(){o.shouldAutoDismiss()&&(o.setState({fadeOpacity:1,fadeTransitionTime:t.HoverRestoreFadeTransitionTimeMS}),o.clearTimeouts())},o.onMouseOut=function(){o.shouldAutoDismiss()&&1===o.state.fadeOpacity&&(o.autoDismissTimerId=window.setTimeout(o.fadeOut,o.props.autoDismissTimeMS))},o.onClose=function(){o.clearTimeouts(),o.props.onCloseRequest()},o.state={fadeOpacity:0,fadeTransitionTime:t.FadeTransitionTimeMS},o}return i.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;setTimeout(function(){e.setState({fadeOpacity:1,fadeTransitionTime:t.FadeTransitionTimeMS})},0),this.shouldAutoDismiss()&&(this.autoDismissTimerId=window.setTimeout(this.fadeOut,this.props.autoDismissTimeMS))},t.prototype.componentWillUnmount=function(){this.clearTimeouts()},t.prototype.shouldAutoDismiss=function(){return this.props.autoDismiss&&this.props.toastType!==o.Error&&!this.props.fillFullWidth},t.prototype.renderCloseButton=function(e){var t=this;if(this.shouldAutoDismiss())return null;var n=function(e){var n=e.active||e.focus||e.hover?"active":t.props.toastType,o=u.ToastCloseButtonIcon.icon(n);return r.createElement(d.Img,{src:o,draggable:!1})},o={buttonType:c.ButtonType.IconOutline,getContent:n,handleClick:this.fadeOut,style:e.closeButton,testId:"toast-close",title:h.Messages.close()};return r.createElement(c.ButtonWidget,i.__assign({},o))},t.prototype.renderInteractiveLink=function(e){if(this.shouldAutoDismiss()||!this.props.actionMessage||0===this.props.actionMessage.length)return null;var t={onClick:this.props.onAction,style:e.actionLink,text:this.props.actionMessage,testId:this.props.testId};return r.createElement(p.InteractiveLinkWidget,i.__assign({},t))},t.prototype.outerDivWidthStyle=function(){var e={};return this.props.fillFullWidth?(e.left=0,e.transform="none",e.width=window.innerWidth,e.maxWidth=window.innerWidth):this.props.topLeftXPx>0&&(e.left=this.props.topLeftXPx,e.transform="none"),e},t.prototype.fadeStyle=function(){return{opacity:this.state.fadeOpacity,transitionDuration:this.state.fadeTransitionTime+"ms",transitionTimingFunction:0===this.state.fadeOpacity?"linear":"ease-in"}},t.prototype.clearTimeouts=function(){clearTimeout(this.autoDismissTimerId),clearTimeout(this.fadeOutTimerId)},t.prototype.render=function(){var e=a.testId(this.props.testId,t.ToastLabelId),n=f(this.props.toastType),o=i.__assign({top:this.props.topLeftYPx},n.outerDiv,this.outerDivWidthStyle(),this.fadeStyle()),l={style:o,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,role:"alert","data-tb-test-id":a.testId(this.props.testId,t.ToastContentDivId)},d={style:n.label,id:e},c={wrapperTestId:this.props.testId,zIndex:this.props.zIndex},p=this.renderInteractiveLink(n),u=this.renderCloseButton(n);return r.createElement(s.StackingComponentWrapper,i.__assign({},c),r.createElement("div",i.__assign({},l),r.createElement("div",i.__assign({},d),this.props.message),p,u))},t.ToastContentDivId="toast-content",t.ToastLabelId="toast-label",t.FadeTransitionTimeMS=500,t.AutodimissCloseFadeTransitionTimeMS=1e3,t.HoverRestoreFadeTransitionTimeMS=30,t.DefaultAutoDissmissTimeMS=1e4,t.defaultProps={autoDismiss:!0,autoDismissTimeMS:t.DefaultAutoDissmissTimeMS,fillFullWidth:!1},t}(r.Component);t.ToastWidget=y}])});!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("@tableau/widgets")):"function"==typeof define&&define.amd?define(["react","@tableau/widgets"],t):"object"==typeof exports?exports.Cancel=t(require("react"),require("@tableau/widgets")):e.Cancel=t(e.React,e.SharedWidgets)}("undefined"!=typeof self?self:this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.WaitingComponent=r.WaitingComponent},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(3),s=n(8),a=n(9),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}return r(t,e),t.prototype.render=function(){var e=this.props.title,t=this.props.message,n=void 0===this.props.showSpinner||this.props.showSpinner,r=void 0===this.props.showButton||this.props.showButton,c=void 0===this.props.buttonType?s.ButtonType.Text:this.props.buttonType,u=this.props.buttonLabel||a.Messages.cancel(),l={fontSize:"24px"};return o.createElement("div",{className:i.cancelContainer},e?this.renderItem(o.createElement(s.InputLabelWidget,{testId:"title",style:l},e)):null,n?this.renderItem(o.createElement(s.ActivitySpinnerWidget,{testId:"cancelSpinner"})):null,t?this.renderItem(o.createElement(s.InputLabelWidget,{testId:"message"},t)):null,r?this.renderItem(o.createElement(s.ButtonWidget,{handleClick:this.props.onButtonClick,testId:"cancelButton",buttonType:c,label:u,disabled:this.props.disableButton})):null)},t.prototype.renderItem=function(e){return o.createElement("div",null,e)},t}(o.PureComponent);t.WaitingComponent=c},function(t,n){t.exports=e},function(e,t,n){var r=n(4);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0};o.transform=void 0;n(6)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(5)(void 0),t.push([e.i,".WaitingComponent__cancelContainer__3MKgw {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n.WaitingComponent__cancelContainer__3MKgw > div {\n  margin: 6px 0px;\n}\n",""]),t.locals={cancelContainer:"WaitingComponent__cancelContainer__3MKgw"}},function(e,t){function n(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var i=r(o);return[n].concat(o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"})).concat([i]).join("\n")}return[n].join("\n")}function r(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var s=e[o];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=h[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(l(r.parts[i],t))}else{for(var s=[],i=0;i<r.parts.length;i++)s.push(l(r.parts[i],t));h[r.id]={id:r.id,refs:1,parts:s}}}}function o(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],s=t.base?i[0]+t.base:i[0],a=i[1],c=i[2],u=i[3],l={css:a,media:c,sourceMap:u};r[s]?r[s].parts.push(l):n.push(r[s]={id:s,parts:[l]})}return n}function i(e,t){var n=b(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=g[g.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),g.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=b(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,o)}}function s(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=g.indexOf(e);t>=0&&g.splice(t,1)}function a(e){var t=document.createElement("style");return e.attrs.type="text/css",u(t,e.attrs),i(e,t),t}function c(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",u(t,e.attrs),i(e,t),t}function u(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function l(e,t){var n,r,o,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var u=y++;n=m||(m=a(t)),r=f.bind(null,n,u,!1),o=f.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=c(t),r=d.bind(null,n,t),o=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),r=p.bind(null,n),o=function(){s(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}function f(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=x(t,o);else{var i=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function p(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t,n){var r=n.css,o=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(r=w(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([r],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}var h={},v=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),b=function(e){var t={};return function(n){if(void 0===t[n]){var r=e.call(this,n);if(r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[n]=r}return t[n]}}(function(e){return document.querySelector(e)}),m=null,y=0,g=[],w=n(7);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=v()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=o(e,t);return r(n,t),function(e){for(var i=[],s=0;s<n.length;s++){var a=n[s],c=h[a.id];c.refs--,i.push(c)}if(e){r(o(e,t),t)}for(var s=0;s<i.length;s++){var c=i[s];if(0===c.refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete h[c.id]}}}};var x=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o))return e;var i;return i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")"})}},function(e,n){e.exports=t},function(e,t,n){"use strict";function r(){if("undefined"==typeof Localize)throw Error("The messages.<locale>.js file has not been loaded");return Localize}Object.defineProperty(t,"__esModule",{value:!0}),t.LocaleData={get:function(){return r().localeData}};var o=function(e,t){return r().msg.formatMessage(e,t)};t.Messages={cancel:function(){return o("@tableau__cancel/cancel")}}}])});(function(){'dont use strict';var a={};global.spiff=global.spiff||{};ss.initAssembly(a,'spiffui');var b=function(ef,eg){dq.call(this,ef,eg)};b.__typeName='spiff.$0';b.$1=function(){var ef=new ck;ef.iScrollOptions={preventDefaultException:ss.mkdict(['tagName',new RegExp('^(INPUT|TEXTAREA|BUTTON|SELECT|A)$')]),disableMouse:true,interactiveScrollbars:true,mouseWheel:true};ef.ref='iscroll-component';return ef};b.$0=function(ef){var eg=b.$1();eg.augmentedScrollX=ef.augmentedScrollX;eg.augmentedScrollY=ef.augmentedScrollY;eg.extraCssClass=ef.extraCssClass;eg.iScrollOptions.scrollX=ef.scrollX;eg.iScrollOptions.scrollY=ef.scrollY;eg.scrollStopCallback=ef.onScrollStop;eg.scrollCallback=ef.onScroll;eg.alwaysShowScrollbarsIfScrollable=ef.alwaysShowScrollbarsIfScrollable;eg.startingY=ss.Nullable$1.neg(ef.startingY);eg.customStyle=ef.customStyle;if(ef.scrollbars){eg.iScrollOptions.scrollbars='custom'}return eg};var c=function(ef){this.$1=null;this.$1=ef};c.__typeName='spiff.$1';var d=function(){this.$1=null;this.$0=null;dL.call(this,$("<div><div class='tabTabLabels'/><div class='tabTabContentArea'/></div>"));this.$1=this.getElementBySelector('.tabTabLabels');this.$0=this.getElementBySelector('.tabTabContentArea')};d.__typeName='spiff.$10';var e=function(){dL.call(this,$("<span class='tabTabLabel' />"))};e.__typeName='spiff.$11';var f=function(ef){this.$0=null;this.$0=ef};f.__typeName='spiff.$12';var g=function(ef){this.$0=null;this.$0=ef};g.__typeName='spiff.$13';var h=function(ef,eg){this.$2=null;this.$0=true;this.$1=true;IScroll.call(this,ef,eg.iScrollOptions);this.$2=ef;this.$0=eg.augmentedScrollX;this.$1=eg.augmentedScrollY};h.__typeName='spiff.$2';var i=function(){};i.__typeName='spiff.$3';i.$0=function(ef,eg,eh){var ei=new cW(ef,eg,eh);ei.source=i.$3[ei.type];ei.inputType=i.$1(ei.type);return ei};i.$1=function(ef){var eg=6;if(ss.keyExists(i.$9,ef)){eg=0}else if(ss.keyExists(i.$6,ef)){eg=1}else if(ss.keyExists(i.$5,ef)){eg=2}else if(ss.keyExists(i.$7,ef)){eg=3}else if(ss.keyExists(i.$4,ef)){eg=5}else if(ss.keyExists(i.$8,ef)){eg=4}return eg};i.$2=function(){i.$9['touchstart']=2;i.$6['touchmove']=2;i.$5['touchend']=2;i.$4['touchcancel']=2;if(tsConfig.is_mobile){if(!BrowserSupport.BrowserSupport.IsTouch()){i.$9['mousedown']=1;i.$6['mousemove']=1;i.$5['mouseup']=1;i.$7['mouseout']=1}}else{i.$9['mousedown']=1;i.$6['mousemove']=1;i.$5['mouseup']=1;i.$7['mouseout']=1;i.$8['scroll']=1;i.$5['contextmenu']=1}$.extend(i.$3,i.$9,i.$6,i.$5,i.$7,i.$8,i.$4)};var j=function(){};j.__typeName='spiff.$4';var k=function(){};k.__typeName='spiff.$5';k.$2=function(ef,eg){if(ef===9){k.$3[0]=eg}else if(ef===27){k.$3[1]=eg}else if(ef>=33&&ef<=40){k.$3[ef-31]=eg}};k.$0=function(){k.$3=new Array(10)};k.$1=function(){for(var ef=0;ef<k.$3.length;ef++){if(k.$3[ef]){return true}}return false};var l=function(){this.$9=null;this.$6=null;this.$4=null;this.$5=null;this.$0=null;this.$8=null;this.$1=false;this.$2=false;this.$3=false;dL.call(this,$("\n<div class='tabMenuItem' role='menuitem'>\n  <div class='tabMenuItemNameArea'>\n    <span class='tabMenuItemName'/>\n  </div>\n</div>"))};l.__typeName='spiff.$6';var m=function(ef,eg){this.$7=new l;this.$7.$6=this.$7.getElementBySelector('.tabMenuItemName');this.$7.$6.text(ef);if(!eg){this.$7.domRoot.addClass('tabDisabled').attr('aria-disabled','true')}};m.__typeName='spiff.$7';var n=function(){this.$3=null;this.$2=null;this.$4=null;dL.call(this,$("<div class='tab-editable-text-view'><div><div class='view-mode'><span class = 'text-span'/></div><input class='edit-mode' type='text'/></div></div>"));this.$3=this.getElementBySelector('.view-mode');this.$2=this.getElementBySelector('.edit-mode');this.$4=this.$3.find('.text-span')};n.__typeName='spiff.$8';var o=function(){this.$0=null;dL.call(this,$("<div class='tabTextInputView'><input class='tabTextInputViewInputElement' type='text'/></div>"));this.$0=this.getElementBySelector('.tabTextInputViewInputElement')};o.__typeName='spiff.$9';var p=function(){};p.__typeName='spiff.AnchorTarget';global.spiff.AnchorTarget=p;var q=function(){};q.__typeName='spiff.AriaAttrName';global.spiff.AriaAttrName=q;var r=function(){};r.__typeName='spiff.AriaRole';global.spiff.AriaRole=r;var s=function(ef){de.call(this,ef)};s.__typeName='spiff.ArrowDropdownButtonComponent';global.spiff.ArrowDropdownButtonComponent=s;var t=function(ef){var eg=function(){this.$2$1=null;this.$2$2=ss.getDefaultValue(ef);x.call(this)};ss.registerGenericClassInstance(eg,t,[ef],{add_propsUpdated:function(eh){this.$2$1=ss.delegateCombine(this.$2$1,eh)},remove_propsUpdated:function(eh){this.$2$1=ss.delegateRemove(this.$2$1,eh)},get_props:function(){return this.$2$2},set_props:function(eh){this.$2$2=eh},updateProps$1:function(eh){this.set_props(eh);this.raiseActionEvent(this.$2$1)},updateProps:function(){this.raiseActionEvent(this.$2$1)}},function(){return x},function(){return[ss.IDisposable,tab.IViewModel,ss.makeGenericType(cf,[ef])]});return eg};t.__typeName='spiff.BaseComponentViewModel$1';ss.initGenericClass(t,a,1);global.spiff.BaseComponentViewModel$1=t;var u=function(ef){var eg=function(eh,ei){ss.makeGenericType(w,[ef]).call(this,eh,ei)};ss.registerGenericClassInstance(eg,u,[ef],{positionMenu:function(eh,ei,ej){var ek=Math.min(document.documentElement.clientWidth,tab.WindowHelper.get_windowSelf().innerWidth)-10;ej.domRoot.css('max-width',ek+'px');var el=(tsConfig.is_mobile?tab.WindowHelper.get_windowSelf().innerWidth:document.documentElement.clientWidth);var em=$(window).scrollLeft()+5;var en=em+el-10;var eo=ej.domRoot.outerHeight(false);var ep=Math.min(ej.domRoot.outerWidth(false),ek);var eq=eo-ej.domRoot.height();var er=tab.PointUtil.fromPosition(tab.DomUtil.getPageOffset$1(ei.relativeDom));var es=ei.relativeDom.outerWidth(false);var et=ei.relativeDom.outerHeight(false);if(ss.isValue(ei.cursorPosition)){er=tab.PointUtil.fromPosition(ei.cursorPosition);es=0;et=0}var eu,ev;var ew=eh.getVisibleRoom(er);var ex=null;if(!ei.preferUp&&ew.roomBelow>=eo+et){ev=er.y+et}else if(ew.roomAbove>eo){ev=er.y-eo}else if(ew.roomBelow-et>=ew.roomAbove){ev=er.y+et;ex=ew.roomBelow-et-eq-5}else{ev=er.y-ew.roomAbove+5;ex=ew.roomAbove-eq-5}if(ei.preferLeft){eu=er.x+es-ep}else{eu=er.x}eu=Math.max(eu,em);if(eu+ep>en){eu=en-ep}eu=Math.max(5,eu);ev-=bD.centeringContainerOffset();var ey={};ey['top']=ev+'px';ey['left']=eu+'px';ey['max-height']=(ss.isValue(ex)?(ex+'px'):'');ej.domRoot.css(ey)}},function(){return ss.makeGenericType(w,[ef])},function(){return[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[ef])]});eg.$0=5;return eg};u.__typeName='spiff.BaseMenuView$1';ss.initGenericClass(u,a,1);global.spiff.BaseMenuView$1=u;var v=function(ef){var eg=function(){this.$1=null;this.$2$1=null;x.call(this)};ss.registerGenericClassInstance(eg,v,[ef],{add_propsUpdated:function(eh){this.$2$1=ss.delegateCombine(this.$2$1,eh)},remove_propsUpdated:function(eh){this.$2$1=ss.delegateRemove(this.$2$1,eh)},get_props:function(){if(ss.isNullOrUndefined(this.$1)){this.$0()}return this.$1},set_props:function(eh){this.$1=eh},incrementProps:function(){var eh=this.createUpdatedProps();var ei=$.extend(false,new Object,this.get_props(),eh);this.set_props(ei);if(ss.isNullOrUndefined(eh)){}else{this.raiseActionEvent(this.$2$1)}},addChildViewModel:function(eh){var ei=ss.mkdel(this,this.incrementProps);eh.add_propsUpdated(ei);return new tab.CallOnDispose(function(){eh.remove_propsUpdated(ei)})},$0:function(){this.set_props(this.createInitialProps());this.incrementProps()},createInitialProps:function(){return new Object},createUpdatedProps:function(){return null}},function(){return x},function(){return[ss.IDisposable,tab.IViewModel,ss.makeGenericType(cf,[ef])]});return eg};v.__typeName='spiff.BaseReactViewModel$1';ss.initGenericClass(v,a,1);global.spiff.BaseReactViewModel$1=v;var w=function(ef){var eg=function(eh,ei){this.$3=null;this.$4=ss.getDefaultValue(ef);ed.call(this,ei.domRoot);tab.Param.verifyValue(eh,'viewModel');tab.Param.verifyValue(ei,'t');this.$3=ei;this.$4=eh;this.$4.add_disposed(ss.mkdel(this,this.$2));this.$4.add_propertyChanged(ss.mkdel(this,this.onViewModelPropertyChanged))};ss.registerGenericClassInstance(eg,w,[ef],{get_template:function(){return this.$3},get_rootElement:function(){return this.element},get_viewModel:function(){return this.$4},dispose:function(){this.$4.remove_propertyChanged(ss.mkdel(this,this.onViewModelPropertyChanged));this.$4.remove_disposed(ss.mkdel(this,this.$2));this.$3.dispose();ed.prototype.dispose.call(this)},onViewModelPropertyChanged:function(eh,ei){},$2:function(eh){this.dispose()}},function(){return ed},function(){return[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[ef])]});return eg};w.__typeName='spiff.BaseView$1';ss.initGenericClass(w,a,1);global.spiff.BaseView$1=w;var x=function(){this.disposables=new tab.DisposableHolder;this.$1$1=null;this.$1$2=null};x.__typeName='spiff.BaseViewModel';global.spiff.BaseViewModel=x;var y=function(ef){this.$7='hover';this.$6='focus';this.$5='disabled';this.$4=null;this.$8=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;ed.call(this,ef);this.$2()};y.__typeName='spiff.Button';global.spiff.Button=y;var z=function(ef){var eg=function(eh){React.Component.call(this,eh)};ss.registerGenericClassInstance(eg,z,[ef],{get_className:function(){var eh=['tab-UnifiedButton'];if(ss.isValue(this.props.customClassName)){eh.push(this.props.customClassName)}if(this.props.border){eh.push('bordered')}if(this.props.disabled){eh.push('disabled')}return eh.join(' ')},customContentBefore:function(){return(!ss.staticEquals(this.props.getCustomContentBefore,null)?this.props.getCustomContentBefore():null)},customContentAfter:function(){return(!ss.staticEquals(this.props.getCustomContentAfter,null)?this.props.getCustomContentAfter():null)},render:function(){var eh={className:this.get_className(),style:this.props.buttonStyle,title:(ss.isNullOrUndefined(this.props.tooltip)?this.props.label:this.props.tooltip),onKeyDown:ss.mkdel(this,function(ei){var ej=ei.keyCode;if(ej===32||ej===13){this.$1(cW.create(ei,ReactDOM.findDOMNode(this),null));ei.preventDefault();ei.stopPropagation()}}),'data-test-id':this.props.testId,role:'button'};if(ss.isValue(this.props.tabIndex)){eh.tabIndex=ss.unbox(this.props.tabIndex)}if(ss.isValue(this.props.additionalRoles)&&this.props.additionalRoles.length>0){eh.role+=' '+this.props.additionalRoles.join(' ')}return bt.div({tap:ss.mkdel(this,this.$1),doubleTap:ss.mkdel(this,this.$0)},eh,[this.customContentBefore(),bj.span({className:'tab-Text',style:this.props.labelStyle,key:'textContent'},this.props.label),this.customContentAfter()])},$1:function(eh){if(!this.props.disabled&&!ss.staticEquals(this.props.onTap,null)){this.props.onTap(eh)}},$0:function(eh){if(!this.props.disabled&&!ss.staticEquals(this.props.onDoubleTap,null)){this.props.onDoubleTap(eh)}}},function(){return React.Component},function(){return[]});return eg};z.__typeName='spiff.ButtonBaseComponent$1';ss.initGenericClass(z,a,1);global.spiff.ButtonBaseComponent$1=z;var A=function(ef){ss.makeGenericType(z,[Object]).call(this,ef)};A.__typeName='spiff.ButtonComponent';A.create=function(ef,eg,eh){return React.createElement(A,{customClassName:'tabStyledTextButton tabMediumStyledTextButton '+ef,label:eg,onTap:eh})};global.spiff.ButtonComponent=A;var B=function(){};B.__typeName='spiff.ButtonSize';global.spiff.ButtonSize=B;var C=function(ef,eg){ss.makeGenericType(dj,[ct,Object,Object]).call(this,ct.newCheckbox(ef.label,ef.isSelected),ef,eg);this.get_widget().set_disabled(ef.disabled)};C.__typeName='spiff.CheckboxComponent';global.spiff.CheckboxComponent=C;var D=function(ef,eg,eh,ei){this.$a=null;this.$b=null;this.$3$1=null;dN.call(this,ef,eg,eh,null,false);this.$a=ef;this.add_propertyChanged(ss.mkdel(this,this.$9));this.$b=new y(this.$a.get_searchBoxClear());this.$b.onClick(ss.mkdel(this,this.$8));this.$b.set_hoverTooltipText(ei);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_propertyChanged(ss.mkdel(this,this.$9));this.$b.dispose()})));this.$7()};D.__typeName='spiff.ClearableTextInputView';D.newClearableTextInputView=function(ef,eg,eh){var ei=new E;return new D(ei,ef,eg,eh)};global.spiff.ClearableTextInputView=D;var E=function(){this.$0=null;this.$1=null;this.$2=null;dL.call(this,$("<div class='tabTextInputView'><span class='tabClearableTextBoxClearButton'/><div class='tabTextInputViewInputElementContainer'><input class='tabTextInputViewInputElement' type='text'/></div></div>"));this.$0=this.getElementBySelector('.tabTextInputViewInputElement');this.$1=this.getElementBySelector('.tabTextInputViewInputElementContainer');this.$2=this.getElementBySelector('.tabClearableTextBoxClearButton')};E.__typeName='spiff.ClearableTextInputViewTemplate';global.spiff.ClearableTextInputViewTemplate=E;var F=function(){};F.__typeName='spiff.ClickBuster';F.add_clickBustDetected=function(ef){F.$1$1=ss.delegateCombine(F.$1$1,ef)};F.remove_clickBustDetected=function(ef){F.$1$1=ss.delegateRemove(F.$1$1,ef)};F.preventGhostClick=function(ef,eg,eh){if(!BrowserSupport.BrowserSupport.IsTouch()||!BrowserSupport.BrowserSupport.AddEventListener()){return}if(ss.isNullOrUndefined(F.$3)){F.$3=[];document.addEventListener('click',F.$0,true)}var ei=$(eh).closest('.'+F.suppressClickBustingClass).length>0;if(!ei){F.$3.push({item1:ef,item2:eg});window.setTimeout(F.$1,600)}};F.$1=function(){ss.removeAt(F.$3,0)};F.$0=function(ef){var eg=ef;var eh=eg.pageX;var ei=eg.pageY;for(var ej=0;ej<F.$3.length;ej++){var ek=F.$3[ej];if(Math.abs(ek.item1-eh)<25&&Math.abs(ek.item2-ei)<25){ef.stopPropagation();ef.preventDefault();if(ss.isValue(F.$1$1)){F.$1$1(ef)}}}};global.spiff.ClickBuster=F;var G=function(){this.$b=new tab.DisposableHolder;this.$e=0;this.$f=0;this.$g=null;this.$c='clickHandler'+G.$2++;this.$d=null;this.$a=null;this.$1$1=null;this.$1$2=null;this.$1$3=null};G.__typeName='spiff.ClickHandler';G.targetAndClick=function(ef,eg){return(new G).setTarget(ef).onClick(eg)};G.targetAndRightClick=function(ef,eg){return(new G).setTarget(ef).onRightClick(eg)};G.targetAndPress=function(ef,eg){return(new G).setTarget(ef).onPress(eg)};global.spiff.ClickHandler=G;var H=function(){React.Component.call(this);var ef=new O;ef.isSelecting=false;this.state=ef};H.__typeName='spiff.ComboBoxComponent';H.createCustomIconElements=function(ef){if(ss.isNullOrEmptyString(ef)){return null}return[bj.div({className:'tab-Icon '+ef})]};global.spiff.ComboBoxComponent=H;var I=function(ef){cO.call(this);this.itemClass='tabMenuItemComboDropdownTheme tab-ctrl-formatted-text';this.menuClass='tabMenuComboDropdownTheme tab-ctrl-formatted-widget '+ef};I.__typeName='spiff.ComboBoxDropdownMenuTheme';global.spiff.ComboBoxDropdownMenuTheme=I;var J=function(ef,eg,eh,ei,ej){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.set_iconClass(ef);this.set_name(eg);this.set_data(eh);this.set_description(ei);this.set_title(ej)};J.__typeName='spiff.ComboBoxItem';global.spiff.ComboBoxItem=J;var K=function(){cO.call(this);this.itemClass='tabMenuItemComboTheme';this.menuClass='tabMenuComboTheme'};K.__typeName='spiff.ComboBoxMenuTheme';global.spiff.ComboBoxMenuTheme=K;var L=function(){};L.__typeName='spiff.ComboBoxMenuThemeChoice';global.spiff.ComboBoxMenuThemeChoice=L;var M=function(){this.styleClass=null;this.buttonStyleClass=null;this.selectedText=null;this.selectedIconClass=null;this.hasTooltip=false;this.enabled=false;Object.call(this)};M.__typeName='spiff.ComboBoxProps';global.spiff.ComboBoxProps=M;var N=function(){};N.__typeName='spiff.ComboBoxSizing';global.spiff.ComboBoxSizing=N;var O=function(){this.isSelecting=false};O.__typeName='spiff.ComboBoxState';global.spiff.ComboBoxState=O;var P=function(){this.icon=null;this.name=null;this.button=null;dL.call(this,$("<span class='tabComboBox tab-ctrl-formatted-widget tab-ctrl-formatted-darker-border-hover'>\n    <span class='tabComboBoxIcon'/>\n    <div class='tabComboBoxNameContainer tab-ctrl-formatted-fixedsize'><span class='tabComboBoxName'/></div>\n    <div class='tabComboBoxButtonHolder'><span class='tabComboBoxButton'/></div>\n</span>"));this.icon=this.getElementBySelector('.tabComboBoxIcon');this.name=this.getElementBySelector('.tabComboBoxName');this.button=this.getElementBySelector('.tabComboBoxButtonHolder')};P.__typeName='spiff.ComboBoxTemplate';global.spiff.ComboBoxTemplate=P;var Q=function(){};Q.__typeName='spiff.ComboBoxTheme';global.spiff.ComboBoxTheme=Q;var R=function(ef,eg){this.clickHandler=null;this.$d=null;this.$c=null;ss.makeGenericType(w,[S]).call(this,ef,eg);this.$d=ef;this.$c=eg;this.$d.add_selectedItemChanged(ss.mkdel(this,this.$b));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$d.remove_selectedItemChanged(ss.mkdel(this,this.$b))})));this.$d.add_itemsChanged(ss.mkdel(this,this.$7));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$d.remove_itemsChanged(ss.mkdel(this,this.$7))})));this.$d.add_enabledChanged(ss.mkdel(this,this.$5));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$d.remove_enabledChanged(ss.mkdel(this,this.$5))})));this.$d.add_isSelectionInvalidChanged(ss.mkdel(this,this.$6));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$d.remove_isSelectionInvalidChanged(ss.mkdel(this,this.$6))})));this.clickHandler=dI.targetAndClick(this.$c.domRoot[0],ss.mkdel(this,this.$9));this.clickHandler.set_stopPropagationOnEvent(false);this.disposables.add$1(this.clickHandler);this.$c.domRoot.keydown(ss.mkdel(this,this.$a));this.$c.domRoot.addClass(R.classesForTheme[this.$d.get_theme()]);this.$d.add_menuHidden(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$d.remove_menuHidden(ss.mkdel(this,this.$8))})));this.$b(this.$d.get_selectedItem());this.$5();this.$6()};R.__typeName='spiff.ComboBoxView';global.spiff.ComboBoxView=R;var S=function(){this.$j=[];this.$m=null;this.$f=null;this.$p=0;this.$l=0;this.$o=0;this.$n=true;this.$g=true;this.$i=false;this.$k='';this.$e=null;this.$h=true;this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=null;this.$3$6=null;this.$3$7=false;this.menuItems=null;this.selectedMenuItem=null;this.generateProps=false;this.$3$8=false;this.$3$9=null;ss.makeGenericType(v,[M]).call(this);this.set_showDropdownIcon(false);this.generateProps=false};S.__typeName='spiff.ComboBoxViewModel';S.newUnificationComboBoxViewModel=function(){var ef=new S;ef.set_theme(2);ef.set_menuTheme(2);return ef};S.newLineAndArrowComboBoxViewModel=function(){var ef=new S;ef.set_theme(3);ef.set_menuTheme(2);return ef};S.newReactLineAndArrowComboBoxViewModel=function(){var ef=new S;ef.set_theme(3);ef.set_menuTheme(2);ef.generateProps=true;return ef};global.spiff.ComboBoxViewModel=S;var T=function(ef){this.compositeSearchWidgetTemplate=null;this.$8=null;this.initialSearchTextInfo=null;this.$7=false;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;ed.call(this,ef.get_domRootElement());this.compositeSearchWidgetTemplate=ef;this.compositeSearchWidgetTemplate.get_clearButton().add_click(ss.mkdel(this,this.$2));this.compositeSearchWidgetTemplate.get_searchButton().add_click(ss.mkdel(this,this.$6));this.compositeSearchWidgetTemplate.get_textInputView().add_propertyChanged(ss.mkdel(this,this.$3));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.compositeSearchWidgetTemplate.get_clearButton().remove_click(ss.mkdel(this,this.$2));this.compositeSearchWidgetTemplate.get_searchButton().remove_click(ss.mkdel(this,this.$6));this.compositeSearchWidgetTemplate.get_textInputView().remove_propertyChanged(ss.mkdel(this,this.$3));this.compositeSearchWidgetTemplate.disposeTemplate()})));this.disposables.add$1(bz.bindWithDispose(this.get_textInputView().get_inputElement(),'mousedown',ss.mkdel(this,this.$4)));this.disposables.add$1(bz.bindWithDispose(this.get_textInputView().get_inputElement(),'touchstart',ss.mkdel(this,this.$4)));this.get_textInputView().get_inputElement().attr('autocomplete','off');this.get_textInputView().get_inputElement().attr('autocorrect','off');this.get_textInputView().get_inputElement().attr('autocapitalize','off');this.get_textInputView().get_inputElement().attr('spellcheck','false')};T.__typeName='spiff.CompositeSearchWidget';global.spiff.CompositeSearchWidget=T;var U=function(){this.initialSearchText='';this.initialSearchTextDomClassName=''};U.__typeName='spiff.CompositeSearchWidgetInitialSearchTextInfo';global.spiff.CompositeSearchWidgetInitialSearchTextInfo=U;var V=function(){this.searchTextInputView=null;this.$1=null;this.$0=null;dL.call(this,$("<div class='tabCompositeSearchWidget'><div>"));this.searchTextInputView=dN.newTextInputView('','',null,false);this.get_textInputView().addToDom(this.domRoot);this.$1=cs.newNativeButton();this.$1.addClass('tabCompositeSearchWidget-SearchButton');this.get_searchButton().addToDom(this.domRoot);this.get_searchButton().element.attr('title',tab.Strings.MapsSearchViewInitialText);this.$0=cs.newNativeButton();this.$0.addClass('tabCompositeSearchWidget-ClearButton');this.$0.element.attr('title',tab.Strings.MapsSearchViewClearInputTooltip);this.get_clearButton().get_labelElement().css('display','none');this.$0.addToDom(this.domRoot)};V.__typeName='spiff.CompositeSearchWidgetTemplate';global.spiff.CompositeSearchWidgetTemplate=V;var W=function(ef,eg,eh,ei,ej){this.$0=null;J.call(this,eg,eh,ei,ej,null);this.$0=ef};W.__typeName='spiff.CustomComboBoxItem';global.spiff.CustomComboBoxItem=W;var X=function(ef,eg){this.$0=null;if(ss.isValue(ef)){this.$0='url('+tableau.util.assetUrl(ef,true)+'), '+eg}else{this.$0=eg}};X.__typeName='spiff.CustomCursor';X.copyFromElement=function(ef){var eg=(ss.isValue(ef)?ef.css('cursor'):'');return new X(null,eg)};global.spiff.CustomCursor=X;var Y=function(){this.contentWindow=null;this.verticalScrollbar=null;this.verticalScrollbarIndicator=null;this.horizontalScrollbar=null;this.horizontalScrollbarIndicator=null;cl.call(this,"<div class='tabCustomScroller'>\n            <div class='tabScrollerContentWindow'><span class='tabScrollerContent'/></div>\n            <div class='tabVerticalScrollbar'><div class='tabScrollbarIndicator'/></div>\n            <div class='tabHorizontalScrollbar'><div class='tabScrollbarIndicator'/></div>\n        </div>");this.content=this.getElementBySelector('.tabScrollerContent');this.scroll=this.domRoot;this.contentWindow=this.getElementBySelector('.tabScrollerContentWindow');this.verticalScrollbar=this.getElementBySelector('.tabVerticalScrollbar');this.verticalScrollbarIndicator=this.getElementBySelector('.tabVerticalScrollbar .tabScrollbarIndicator');this.horizontalScrollbar=this.getElementBySelector('.tabHorizontalScrollbar');this.horizontalScrollbarIndicator=this.getElementBySelector('.tabHorizontalScrollbar .tabScrollbarIndicator')};Y.__typeName='spiff.CustomIScrollTemplate';global.spiff.CustomIScrollTemplate=Y;var Z=function(ef){cm.call(this,ef,new Y);this.$9();this.$a();if(ef.get_hasScrollBars()){this.addScroller();this.setUpEvents();this.$b()}};Z.__typeName='spiff.CustomIScrollView';Z.$0=function(ef,eg,eh){return Math.max(ss.round(ef*eg/Math.max(eh,1)),8)};global.spiff.CustomIScrollView=Z;var ba=function(){this.$0=null;cG.call(this)};ba.__typeName='spiff.CustomMenuItem';ba.newCustomMenuItem=function(ef){var eg=new ba;eg.set_domRoot(ef);return eg};global.spiff.CustomMenuItem=ba;var bb=function(){cl.call(this,"<div class='tabScroller'><span class='tabScrollerContent'/></div>");this.content=this.getElementBySelector('.tabScrollerContent');this.scroll=this.domRoot};bb.__typeName='spiff.DefaultIScrollTemplate';global.spiff.DefaultIScrollTemplate=bb;var bc=function(ef){this.$a=null;this.$9=null;cm.call(this,ef,new bb);this.addScroller();this.setUpEvents()};bc.__typeName='spiff.DefaultIScrollView';global.spiff.DefaultIScrollView=bc;var bd=function(){this.canAccept=null;this.onFeedbackType=null;this.onDragOver=null;this.onDragExit=null;this.onAcceptDrop=null;this.onGetDropTarget=null;this.onGetDropCursor=null};bd.__typeName='spiff.DelegateDropTarget';global.spiff.DelegateDropTarget=bd;var be=function(ef,eg){this.$g=null;this.$u=null;this.$p=null;this.$s=null;this.$e=null;this.$f=null;this.$i=false;this.$v=false;this.$r=true;this.$l=null;this.$o=null;this.$j=false;this.$t=false;this.$m=0;this.$n=0;this.$h=false;this.$k=false;this.$q=false;this.$d=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.showTitleTooltip=false;ed.call(this,$("\n<div class='tab-dialog' role='dialog'>\n  <div class='tab-dialogTitleBar'>\n    <div class='tab-dialogTitle'></div>\n    <div class='tab-dialogCloseButton'></div>\n  </div>\n  <div class='tab-dialogBodyContainer'></div>\n  <div class='tab-dialogResizer tab-icon-resize-se'><div class='tab-dialogResizerHit'/></div>\n  <div class='tab-dialogSpinnerContainer'></div>\n</div>\n"));this.set_titleUnescaped(ef);this.set_body(eg);this.$f=cs.newNativeButton();this.$f.add_click(ss.mkdel(this,this.$7));this.element.find('.tab-dialogCloseButton').append(this.$f.element);this.$f.tabIndex(-2);this.$g=this.element;this.$u=this.element.find('.tab-dialogTitleBar');this.$p=this.element.find('.tab-dialogResizer');this.$s=this.element.find('.tab-dialogSpinnerContainer');this.$s.hide();var eh=$('#loadingSpinner');if(eh.length===1){this.$s.append(eh.html())}this.set_resizeable(false);this.$g.attr('tabindex','-1');bH.add_firstTouch(ss.mkdel(this,this.$4));bH.add_lastTouch(ss.mkdel(this,this.$5));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){bH.remove_firstTouch(ss.mkdel(this,this.$4))})));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){bH.remove_lastTouch(ss.mkdel(this,this.$5))})));bl.attachDropTarget(this.$g,be.$3)};be.__typeName='spiff.Dialog';global.spiff.Dialog=be;var bf=function(ef){this.$g=null;this.$j=0;this.$k=0;this.$h=false;this.$i=0;bF.call(this,ef,'discrete',true)};bf.__typeName='spiff.Discrete';global.spiff.Discrete=bf;var bg=function(){J.call(this,null,null,null,null,null)};bg.__typeName='spiff.DividerComboBoxItem';global.spiff.DividerComboBoxItem=bg;var bh=function(ef,eg,eh,ei){this.$z=false;this.$A=0;this.$y=null;this.template=null;be.call(this,ef,eg);this.template=new dL(eg);this.$z=eh;this.$A=ei;this.$w()};bh.__typeName='spiff.DockableSideDialog';global.spiff.DockableSideDialog=bh;var bi=function(){};bi.__typeName='spiff.DocumentBodySizeUsage';global.spiff.DocumentBodySizeUsage=bi;var bj=function(){};bj.__typeName='spiff.DOMElements';bj.$0=function(ef){return React.createFactory(ef)};bj.$1=function(ef){return React.createFactory(ef)};global.spiff.DOMElements=bj;var bk=function(ef){this.$a=false;this.$c=null;this.$b=null;this.$9=false;bF.call(this,ef,'drag',true)};bk.__typeName='spiff.Drag';global.spiff.Drag=bk;var bl=function(){};bl.__typeName='spiff.DragDropManager';bl.add_dragStarted=function(ef){bl.$1$1=ss.delegateCombine(bl.$1$1,ef)};bl.remove_dragStarted=function(ef){bl.$1$1=ss.delegateRemove(bl.$1$1,ef)};bl.add_dragMoved=function(ef){bl.$1$2=ss.delegateCombine(bl.$1$2,ef)};bl.remove_dragMoved=function(ef){bl.$1$2=ss.delegateRemove(bl.$1$2,ef)};bl.add_dragEnded=function(ef){bl.$1$3=ss.delegateCombine(bl.$1$3,ef)};bl.remove_dragEnded=function(ef){bl.$1$3=ss.delegateRemove(bl.$1$3,ef)};bl.add_currentTargetChanged=function(ef){bl.$1$4=ss.delegateCombine(bl.$1$4,ef)};bl.remove_currentTargetChanged=function(ef){bl.$1$4=ss.delegateRemove(bl.$1$4,ef)};bl.get_isDragging=function(){return ss.isValue(bl.get_currentDrag())};bl.$g=function(){return tab.Logger.lazyGetLogger(bl)};bl.get_lastDragEvent=function(){return bl.$z};bl.get_currentTarget=function(){return bl.$p};bl.set_currentTarget=function(ef){var eg=!ss.referenceEquals(bl.$p,ef);bl.$p=ef;if(eg&&!ss.staticEquals(bl.$1$4,null)){bl.$1$4(bl.$p)}};bl.get_currentDrag=function(){return bl.$1$5};bl.set_currentDrag=function(ef){bl.$1$5=ef};bl.init=function(){if(ss.isNullOrUndefined(bl.$s)){bl.$s=new dJ.$ctor1(document.body,bl.$v)}};bl.$0=function(ef,eg){var eh=ef.get(0);var ei=eh.getAttribute('class');if(ss.isNullOrEmptyString(ei)){eh.setAttribute('class',eg);return}var ej=ei.split(' ');if(ss.indexOf(ej,eg)===-1){eh.setAttribute('class',ej.concat([eg]).join(' '))}};bl.$b=function(ef,eg){var eh=ef.get(0);var ei=eh.getAttribute('class');if(ss.isNullOrEmptyString(ei)){return}var ej=ei.split(' ');var ek=ss.indexOf(ej,eg);if(ek>=0){ej.splice(ek,1);eh.setAttribute('class',ej.join(' '))}};bl.attachDropTarget=function(ef,eg){ef.attr('data-tab-drop-target','1');bl.$0(ef,'tabDropTarget');ef.data('tabDropTarget',eg)};bl.detachDropTarget=function(ef){ef.removeAttr('data-tab-drop-target');ef.removeData('tabDropTarget');bl.$b(ef,'tabDropTarget')};bl.isDropTarget=function(ef){return ss.isValue(ef.attr('data-tab-drop-target'))};bl.attachDragSource=function(ef,eg){ef.attr('data-tab-drag-source','1');ef.data('tabDragSource',eg)};bl.removeDragSource=function(ef){ef.removeData('tabDragSource');ef.removeAttr('data-tab-drag-source')};bl.isDragSource=function(ef){return ss.isValue(ef.attr('data-tab-drag-source'))};bl.$2=function(){bl.$t=new bn;bl.$t.show();if(bl.get_currentDrag().get_hasPayload()&&bl.get_currentDrag().get_dragType()==='dragmove'){bl.setDragCursor(X.copyFromElement(bl.$w))}bl.$u=new dJ.$ctor1(bl.$t.element.get(0),bl.$v);bl.$r=new tab.DisposableHolder;bl.$r.add$1(bl.$t);bl.$r.add$1(bl.$u);bl.$r.add$1(bz.bindWithDispose($(document.body),'keydown',bl.$9));bl.$r.add$1(bz.bindWithDispose($(document.body),'keyup',bl.$a))};bl.$3=function(){bl.$r=tab.MiscUtil.dispose$1(bl.$r)};bl.startDrag=function(ef,eg,eh){if(ss.isNullOrUndefined(ef)||ss.isNullOrUndefined(eg)||!ef.get_hasPayload()){return}if(ss.isValue(eh)){bl.$w=eh}bl.$z=eg;bl.cancelDrag(null);bl.set_currentDrag(ef);bl.$c(bl.get_currentDrag().get_dragAvatar());bl.$f();bl.$o=tab.WindowHelper.requestAnimationFrame(bl.$f);bl.$2();bl.$d(eg);if(ss.isValue(bl.$1$1)){bl.$1$1(bl.get_currentDrag())}};bl.cancelDrag=function(ef){if(ss.isNullOrUndefined(bl.get_currentDrag())){return}if(ss.isNullOrUndefined(ef)||ss.referenceEquals(ef,bl.get_currentDrag())){bl.get_currentDrag().cancelDrag();bl.$6(null,true,false,function(){return $.Deferred().resolve(false).promise()})}};bl.drop=function(ef,eg,eh){bl.get_currentDrag().isCopyDrag=ss.isValue(eg)&&eg;bl.get_currentDrag().set_isShiftDrag(ss.isValue(eh)&&eh);bl.$6(ef,false,bl.get_currentDrag().isCopyDrag,function(){if(ss.isValue(ef)){return ef.acceptDrop(bl.get_currentDrag()).always(function(ei){})}else{bl.get_currentDrag().dropToNowhereAction();return $.Deferred().resolve(true).promise()}})};bl.firstTouch=function(ef){var eg=$(ef.target).closest('[data-tab-drag-source]');if(ss.isNullOrUndefined(eg)||eg.length===0){bl.$x=null;bl.$w=null;return}bl.$x=eg.data('tabDragSource');bl.$w=eg};bl.dragEnd=function(ef){if(ss.isNullOrUndefined(bl.get_currentDrag())){return}switch(bl.get_currentDrag().get_dragType()){case'dragmove':{bl.$6(null,false,false,function(){bl.get_currentDrag().endDragAt(ef);return $.Deferred().resolve(true).promise()});break}case'dragmovedrop':case'dragdrop':{bl.drop(bl.get_currentTarget(),ef.get_isCtrlKey(),ef.shiftKey);break}}};bl.dragMove=function(ef){if(ss.isNullOrUndefined(bl.get_currentDrag())){return}bz.stopEvent(ef);bl.$z=ef;bl.get_currentDrag().isCopyDrag=ef.get_isCtrlKey();bl.get_currentDrag().set_isShiftDrag(ef.shiftKey);tab.WindowHelper.clearSelection();var eg=tab.DateUtil.get_nowAsTime();if(eg-bl.$y>75){if(ss.isValue(bl.$o)){tab.WindowHelper.cancelAnimationFrame(ss.unbox(bl.$o))}bl.$f()}bl.$d(ef);if(ss.isValue(bl.$1$2)){bl.$1$2(bl.get_currentDrag())}};bl.$9=function(ef){if(ss.isNullOrUndefined(bl.get_currentDrag())){return}bz.stopEvent(ef);switch(ef.which){case 16:{bl.get_lastDragEvent().shiftKey=true;bl.dragMove(bl.get_lastDragEvent());break}}};bl.$a=function(ef){if(ss.isNullOrUndefined(bl.get_currentDrag())){return}bz.stopEvent(ef);switch(ef.which){case 16:{bl.get_lastDragEvent().shiftKey=false;bl.dragMove(bl.get_lastDragEvent());break}case 27:{bl.cancelDrag(bl.get_currentDrag());break}}};bl.$d=function(ef){switch(bl.get_currentDrag().get_dragType()){case'dragmove':{bl.get_currentDrag().moveTo(ef);break}case'dragdrop':{bl.$e(ef);break}case'dragmovedrop':{bl.get_currentDrag().moveTo(ef);bl.$e(ef);break}default:{break}}};bl.$e=function(ef){var eg=bl.findDropTarget(ef);if(ss.isValue(bl.get_currentTarget())){if(!ss.referenceEquals(bl.get_currentTarget(),eg)){bl.get_currentTarget().dragExit(bl.get_currentDrag())}else if(bl.get_currentTarget().get_feedbackType()==='dropfeedbackuponentry'){return}}if(ss.isValue(eg)){var eh=eg.dragOver(bl.get_currentDrag());while(ss.isValue(eh)&&!ss.referenceEquals(eh,eg)){eg=eh;eh=eg.dragOver(bl.get_currentDrag())}eg=eh}if(ss.isValue(eg)){bl.setDragCursor(eg.getDropCursor(bl.get_currentDrag()))}else{bl.setDragCursor(bl.get_currentDrag().get_defaultDropCursor())}bl.set_currentTarget(eg)};bl.setDragCursor=function(ef){ef.setCursor(bl.$t.element)};bl.dragStart=function(ef){if(bl.get_isDragging()){return}var eg=bl.$x;if(ss.isNullOrUndefined(eg)){var eh=$(ef.target).closest('[data-tab-drag-source]');eg=eh.data('tabDragSource')}if(ss.isNullOrUndefined(eg)){return}var ei=eg.startDrag(ef);if(ss.isNullOrUndefined(ei)){return}bl.startDrag(ei,ef,null)};bl.$6=function(ef,eg,eh,ei){bl.$c(null);bl.$3();if(ss.isValue(bl.$o)){tab.WindowHelper.cancelAnimationFrame(ss.unbox(bl.$o));bl.$o=null}ei().always(function(ej){if(ss.isValue(bl.$1$3)){bl.$1$3({drag:bl.get_currentDrag(),target:ef,dropAccepted:ej,canceled:eg,isCopyDrop:eh})}bl.set_currentDrag(null);bl.set_currentTarget(null)})};bl.$c=function(ef){if(ss.isValue(bl.$q)){bl.$q.get_rootElement().detach();var eg=bl.$q;eg.dispose();bl.$q=null}bl.$q=ef;if(ss.isValue(bl.$q)){bl.$q.get_rootElement().addClass('dragAvatar').css('position','absolute').css('pointer-events','none');bl.$q.addToDom($('body'))}};bl.$f=function(){if(ss.isNullOrUndefined(bl.$q)){return}var ef=function(eh,ei,ej){if(ei<ss.Int32.div(ej,2)){return 0}else if(ei>eh-ss.Int32.div(ej,2)){return eh-ej}else{return ei-ss.Int32.div(ej,2)}};var eg=tab.DomUtil.get_documentBody();tab.DomUtil.setElementPosition(bl.$q.get_rootElement(),ef(eg.scrollWidth,bl.$z.pageX,tab.DoubleUtil.roundToInt(bl.$q.get_rootElement().outerWidth())),ef(eg.scrollHeight,bl.$z.pageY,tab.DoubleUtil.roundToInt(bl.$q.get_rootElement().outerHeight())));bl.$y=tab.DateUtil.get_nowAsTime();bl.$o=tab.WindowHelper.requestAnimationFrame(bl.$f)};bl.$7=function(ef){bl.$4();var eg=ef.clientX;var eh=ef.clientY;if(BrowserSupport.BrowserSupport.UseAlternateHitStrategy()){if(ss.isValue(ef.touches)&&ef.touches.length>0&&ss.isValue(ef.touches[0].screenX)){eg=ef.touches[0].screenX;eh=ef.touches[0].screenY}else{eg=ef.originalEvent['screenX'];eh=ef.originalEvent['screenY']}}var ei=$(null);if(ss.isValue(eg)&&ss.isValue(eh)){ei=$(document.elementFromPoint(eg,eh))}bl.$5();return ei};bl.$4=function(){for(var ef=0;ef<bl.$A.length;ef++){var eg=bl.$A[ef];eg.disableHitTests()}};bl.$5=function(){for(var ef=0;ef<bl.$A.length;ef++){var eg=bl.$A[ef];eg.enableHitTests()}};bl.findDropTarget=function(ef){if(!bl.get_isDragging()){return null}var eg=bl.get_currentDrag();var eh=bl.$8(ef);for(var ei=0;ei<eh.length;ei++){var ej=eh[ei];var ek=ej.data('tabDropTarget');if(bl.$1(ek,eg)){return ek.getDropTarget(ej)}}return null};bl.$8=function(ef){var eg=[];var eh=bl.$7(ef).closest('[data-tab-drop-target]');if(eh.length>0){eg.push(eh);eh.parents('[data-tab-drop-target]').each(function(ei,ej){eg.push($(ej))})}return eg};bl.$1=function(ef,eg){return ss.isValue(ef)&&ss.isValue(eg)&&ss.isValue(ef.dragOver(eg))};bl.registerDragGlass=function(ef){bl.$A.push(ef)};bl.unregisterDragGlass=function(ef){ss.remove(bl.$A,ef)};global.spiff.DragDropManager=bl;var bm=function(ef,eg){this.isCopyDrag=false;this.draggedObject=null;this.$0=null;this.$1=false;this.$1$1=null;this.$1$2=false;this.draggedObject=ef;this.$0=eg;this.isCopyDrag=false;this.$1=false;this.set_isRightDrag(false)};bm.__typeName='spiff.DragInstance';global.spiff.DragInstance=bm;var bn=function(ef){bG.call(this,ef,false);bl.registerDragGlass(this)};bn.__typeName='spiff.DragSafeGlass';global.spiff.DragSafeGlass=bn;var bo=function(ef){this.$0=null;this.$0=ef.element.clone(false).addClass('dragAvatar')};bo.__typeName='spiff.DragSortListItemDragAvatar';global.spiff.DragSortListItemDragAvatar=bo;var bp=function(){React.Component.call(this);this.state={isSelecting:false}};bp.__typeName='spiff.DropdownComponent';global.spiff.DropdownComponent=bp;var bq=function(ef,eg){ss.makeGenericType(dj,[br,Object,Object]).call(this,bq.$0(ef),ef,eg)};bq.__typeName='spiff.EditableTextLabelComponent';bq.$0=function(ef){var eg=br.newEditableTextView(ef.initialContent,ef.placeHolderText,ef.editOnDoubleClick);if(!tab.MiscUtil.isNullOrEmpty$3(ef.tooltip)){eg.get_inputElement().attr('title',ef.tooltip);eg.get_textElement().find('.text-span').get(0).title=ef.tooltip}eg.showHover=ss.isNullOrUndefined(ef.showHover)||ef.showHover;eg.showTooltip=ef.showTooltip;eg.add_committed(function(){ef.onCommit(eg.get_text())});if(!ss.isNullOrEmptyString(ef.styleOverrideClass)){tab.StyleUtil.appendCSSRuleToStyleSheet$1(ef.styleOverrideClass+'-override-style','.'+ef.styleOverrideClass+' .tab-editable-text-view > div',ef.styleOverride)}return eg};global.spiff.EditableTextLabelComponent=bq;var br=function(ef,eg,eh,ei){this.$9=null;this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=false;this.showHover=false;this.showTooltip=false;dN.call(this,ef,eg,eh,null,false);this.$9=ef;this.updateTextElement(eg);var ej=new y(this.get_textElement());if(ei){this.disposables.add$1(dI.targetAndDoubleClick(ej.element.get(0),ss.mkdel(this,function(el){this.edit()})))}else{ej.add_click(ss.mkdel(this,this.edit));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){ej.remove_click(ss.mkdel(this,this.edit));ej.dispose()})))}this.get_textElement().show();this.get_inputElement().hide();this.get_inputElement().blur(ss.mkdel(this,function(el){this.commit()}));this.add_enterKeyPressed(ss.mkdel(this,function(){this.commit()}));this.add_propertyChanged(ss.mkdel(this,function(){this.updateTextElement(this.get_text())}));if(!tsConfig.is_mobile){var ek=new bN(this,null,ss.mkdel(this,function(el){if(this.showHover){this.element.addClass('hover');this.$8(true)}}),ss.mkdel(this,function(el){if(this.showHover){this.element.removeClass('hover');this.$8(false)}}));this.disposables.add$1(ek)}this.set_isEditing(false);this.showHover=true};br.__typeName='spiff.EditableTextView';br.newEditableTextView=function(ef,eg,eh){var ei=new n;return new br(ei,ef,eg,eh)};global.spiff.EditableTextView=br;var bs=function(){this.$1=null;this.$0=null;this.$1=null;this.$0=ss.mkdel(this,function(ef){this.$1=ef})};bs.__typeName='spiff.EnsureElementVisibleHelper';bs.create=function(){return new bs};global.spiff.EnsureElementVisibleHelper=bs;var bt=function(ef){this.$2=null;this.$1=null;this.$3=null;React.Component.call(this,ef,null);this.$2=dK.createEmpty()};bt.__typeName='spiff.EventForwarder';bt.$0=function(ef,eg,eh,ei){var ej=new bu;ej.tagName=ef;ej.htmlAttributes=eh;ej.spec=eg;ej.key=eh.key;var ek=ej;if(ss.isValue(eh.ref)){ek.ref=eh.ref;delete eh['ref']}if(ss.isValue(ei)&&ei.length===1){return React.createElement(bt,ek,ei[0])}return React.createElement(bt,ek,ei)};bt.div=function(ef,eg,eh){return bt.$0('div',ef,eg,eh)};bt.span=function(ef,eg,eh){return bt.$0('span',ef,eg,eh)};bt.$1=function(ef,eg){return!_.every(Object.keys(eg),function(eh){return ss.contains(Object.keys(ef),eh)})};global.spiff.EventForwarder=bt;var bu=function(){this.tagName=null;this.htmlAttributes=null;this.spec=null};bu.__typeName='spiff.EventForwarderProps';global.spiff.EventForwarderProps=bu;var bv=function(){};bv.__typeName='spiff.EventHandleSpecExtensions';bv.isHandling=function(ef,eg){var eh=ef;return ss.isValue(eh[eg])};bv.isUsingHover=function(ef){return bv.isHandling(ef,'hover')||bv.isHandling(ef,'moving')};bv.setHandler=function(ef,eg,eh){ef[eg]=eh};bv.removeHandler=function(ef,eg){ef[eg]=null};bv.usingPressDrag=function(ef){return bv.isHandling(ef,'pressDragStart')||bv.isHandling(ef,'pressDragMove')||bv.isHandling(ef,'pressDragEnd')||bv.isHandling(ef,'doublePressDragStart')||bv.isHandling(ef,'doublePressDragMove')||bv.isHandling(ef,'doublePressDragEnd')};global.spiff.EventHandleSpecExtensions=bv;var bw=function(){};bw.__typeName='spiff.EventInputType';global.spiff.EventInputType=bw;var bx=function(ef){this.$1=null;this.$0=null;this.$6=null;this.$3=null;this.$5=false;this.$4=null;this.$2=false;this.$1=new bk(ef);this.$0=new bf(ef);this.$6=new da(ef);if(bv.isUsingHover(ef)){this.$3=new bL(ef)}};bx.__typeName='spiff.EventRecognizer';bx.get_currentGlobalMouseButton=function(){return bx.$0};bx.set_currentGlobalMouseButton=function(ef){if(bx.$0!==ef){bx.$0=ef}};global.spiff.EventRecognizer=bx;var by=function(){};by.__typeName='spiff.EventSource';global.spiff.EventSource=by;var bz=function(){};bz.__typeName='spiff.EventUtil';bz.bindWithDispose=function(ef,eg,eh){var ei=ss.formatString('{0}.{1}',eg,++bz.$0);ef.on(ei,eh);return new tab.CallOnDispose(function(){ef.off(ei)})};bz.addEventListenerWithDispose=function(ef,eg,eh,ei){ef.addEventListener(eg.toString(),eh,ei);return new tab.CallOnDispose(function(){ef.removeEventListener(eg.toString(),eh,ei)})};bz.isCtrlKey=function(ef){if(ss.isNullOrUndefined(ef)){return false}return(BrowserSupport.BrowserSupport.IsMac()?ef.metaKey:ef.ctrlKey)};bz.getDragFileList=function(ef){if(ss.isNullOrUndefined(ef)||ss.isNullOrUndefined(ef.dataTransfer)||ss.isNullOrUndefined(ef.dataTransfer.files)||ef.dataTransfer.files.length===0){return null}return ef.dataTransfer.files};bz.stopEvent=function(ef){ef.stopPropagation();ef.preventDefault()};global.spiff.EventUtil=bz;var bA=function(ef){cU.call(this,ef)};bA.__typeName='spiff.ExclusiveMultiSelectGroupSelection';bA.buildExclusiveMultiSelectGroupSelection=function(ef){return function(eg,eh){var ei=new bA(eg.length);var ej=eg.length;for(var ek=0;ek<ej;++ek){if(eh(eg[ek])){ei.get_selectedIndexes()[ek]=true}}ei.validateAllSelectedState();return ei}};global.spiff.ExclusiveMultiSelectGroupSelection=bA;var bB=function(ef){dA.call(this,ef)};bB.__typeName='spiff.ExclusiveSingleSelectGroupSelection';bB.buildExclusiveSingleSelectGroupSelection=function(ef){return function(eg,eh){var ei=new bB(eg.length);var ej=eg.length;for(var ek=0;ek<ej;++ek){if(eh(eg[ek])){ei.get_selectedIndexes()[ek]=true}}ei.validateAllSelectedState();return ei}};global.spiff.ExclusiveSingleSelectGroupSelection=bB;var bC=function(){{bC.$0('focus',bC.$3);bC.$0('blur',bC.$1);bC.$0('keydown',bC.$4);bC.$0('keyup',bC.$4);bH.add_firstTouch(bC.$2);if(!ss.referenceEquals(window.self,window.top)){bC.$a=1}}};bC.__typeName='spiff.FocusManager';bC.shutdown=function(){if(ss.isNullOrUndefined(bC.$9)){return}bC.$6('focus',bC.$3);bC.$6('blur',bC.$1);bC.$6('keydown',bC.$4);bC.$6('keyup',bC.$4);bH.remove_firstTouch(bC.$2);bC.$9=null};bC.initialize=function(){if(ss.isNullOrUndefined(bC.$9)){bC.$9=new bC}};bC.$0=function(ef,eg){document.addEventListener(ef,eg,true)};bC.$6=function(ef,eg){document.removeEventListener(ef,eg,true)};bC.updateFocusIndicatorVisibility=function(){$(document.activeElement).toggleClass('tab-showFocusIndicator',bC.$a===1)};bC.$3=function(ef){if(ss.referenceEquals(document.activeElement,document.body)){return}if(document.hasFocus()&&ss.referenceEquals(document.activeElement,ef.target)&&k.$1()){bC.$a=1}bC.updateFocusIndicatorVisibility()};bC.$1=function(ef){window.setTimeout(function(){if(document.hasFocus()){$(ef.target).removeClass('tab-showFocusIndicator')}else{k.$0()}})};bC.$4=function(ef){var eg=ef.keyCode;k.$2(eg,ef.type==='keydown');if(ss.isNullOrUndefined(document.activeElement)){document.body.focus()}};bC.$2=function(ef,eg){bC.$a=0};bC.wasFocusedByClick=function(){return bC.$a===0};bC.trapFocus=function(ef){ef.off(bC.$7).on(bC.$7,bC.$5)};bC.untrapFocus=function(ef){ef.off(bC.$7)};bC.$5=function(ef){if(ef.which===9){var eg=$(ef.currentTarget).find(':tabbable');if(ss.referenceEquals(ef.target,eg.last()[0])&&!ef.shiftKey){eg.first().focus()}else if(ss.referenceEquals(ef.target,eg.first()[0])&&ef.shiftKey){eg.last().focus()}else if(eg.length>0){return}ef.preventDefault();ef.stopPropagation()}};global.spiff.FocusManager=bC;var bD=function(){};bD.__typeName='spiff.FullscreenUtil';bD.add_fullscreenStateChanged=function(ef){bD.$1$1=ss.delegateCombine(bD.$1$1,ef)};bD.remove_fullscreenStateChanged=function(ef){bD.$1$1=ss.delegateRemove(bD.$1$1,ef)};bD.get_fullscreenChangeEventName=function(){return bD.$7.substring(2)};bD.get_fullscreenEnabled=function(){if(ss.isNullOrUndefined(bD.$6)){return false}return document[bD.$6]};bD.get_fullscreenElement=function(){if(ss.isNullOrUndefined(bD.$5)){return null}return document[bD.$5]};bD.get_inFullscreenMode=function(){return ss.isValue(bD.get_fullscreenElement())};bD.$0=function(ef,eg){for(var eh=0;eh<eg.length;eh++){var ei=eg[eh];if(ei in ef||ei.toLowerCase()in ef){return ei}}return null};bD.exitFullscreen=function(){if(ss.isNullOrUndefined(bD.$4)){return}document[bD.$4]()};bD.requestFullscreen=function(ef){if(ss.isNullOrUndefined(bD.$8)){return}ef[bD.$8]()};bD.$1=function(ef){document.documentElement.classList.toggle('fullscreen',bD.get_inFullscreenMode());window.setTimeout(function(){if(!ss.staticEquals(bD.$1$1,null)){bD.$1$1()}})};bD.$2=function(){var ef=$(document.documentElement);if(bD.get_inFullscreenMode()){bC.trapFocus(ef)}else{bC.untrapFocus(ef)}};bD.centeringContainerOffset=function(){if(!bD.get_inFullscreenMode()){return 0}var ef=$('#centeringContainer');return ef.offset().top};global.spiff.FullscreenUtil=bD;var bE=function(ef){de.call(this,ef)};bE.__typeName='spiff.GenericDropdownButtonComponent';bE.create=function(ef){return React.createElement(bE,ef)};global.spiff.GenericDropdownButtonComponent=bE;var bF=function(ef,eg,eh,ei){this.$2=null;this.$3=5;this.numTouches=1;this.type='gesture';this.isPotentialPress=false;this.isActivePress=false;this.pressTimer=null;this.doubleTapTimer=null;this.potentialPressTimer=null;if(ss.isValue(eg)){this.type=eg}if(ss.isValue(eh)){this.$3=(eh?5:0)}if(ss.isValue(ei)){this.numTouches=ei}this.$2={};this.update(ef)};bF.__typeName='spiff.Gesture';bF.$0=function(ef,eg){return ef.data('tab-'+eg)};global.spiff.Gesture=bF;var bG=function(ef,eg){this.$3=null;this.$2=null;this.$2$1=null;ed.call(this,$("<div class='tab-glass clear-glass'></div>"));this.$3=ef||document.body;if(!ss.referenceEquals(this.$3,document.body)){this.element.css('position','absolute')}var eh={};bv.setHandler(eh,'firstTouch',ss.mkdel(this,this.handleClick));if(eg){eh.doubleTap=function(ei){ei.preventDefault()};eh.pinchStart=function(ei){ei.preventDefault()}}this.$2=dI.targetAndConfig(this.element[0],eh).onClick(ss.mkdel(this,this.handleClick)).onRightClick(ss.mkdel(this,this.handleClick))};bG.__typeName='spiff.Glass';global.spiff.Glass=bG;var bH=function(){};bH.__typeName='spiff.GlobalUIEvents';bH.add_firstTouch=function(ef){bH.$1$1=ss.delegateCombine(bH.$1$1,ef)};bH.remove_firstTouch=function(ef){bH.$1$1=ss.delegateRemove(bH.$1$1,ef)};bH.add_press=function(ef){bH.$1$2=ss.delegateCombine(bH.$1$2,ef)};bH.remove_press=function(ef){bH.$1$2=ss.delegateRemove(bH.$1$2,ef)};bH.add_tap=function(ef){bH.$1$3=ss.delegateCombine(bH.$1$3,ef)};bH.remove_tap=function(ef){bH.$1$3=ss.delegateRemove(bH.$1$3,ef)};bH.add_lastTouch=function(ef){bH.$1$4=ss.delegateCombine(bH.$1$4,ef)};bH.remove_lastTouch=function(ef){bH.$1$4=ss.delegateRemove(bH.$1$4,ef)};bH.add_rightClick=function(ef){bH.$1$5=ss.delegateCombine(bH.$1$5,ef)};bH.remove_rightClick=function(ef){bH.$1$5=ss.delegateRemove(bH.$1$5,ef)};bH.add_dragEnd=function(ef){bH.$1$6=ss.delegateCombine(bH.$1$6,ef)};bH.remove_dragEnd=function(ef){bH.$1$6=ss.delegateRemove(bH.$1$6,ef)};bH.add_dismissTemporaryElements=function(ef){bH.$1$7=ss.delegateCombine(bH.$1$7,ef)};bH.remove_dismissTemporaryElements=function(ef){bH.$1$7=ss.delegateRemove(bH.$1$7,ef)};bH.fireFirstTouch=function(ef,eg){bH.$0(bH.$1$1,ef,eg)};bH.firePress=function(ef,eg){bH.$0(bH.$1$2,ef,eg)};bH.fireTap=function(ef,eg){bH.$0(bH.$1$3,ef,eg)};bH.fireLastTouch=function(ef,eg){bH.$0(bH.$1$4,ef,eg)};bH.fireRightClick=function(ef,eg){bH.$0(bH.$1$5,ef,eg)};bH.fireDragEnd=function(ef,eg){bH.$0(bH.$1$6,ef,eg)};bH.fireDismissTemporaryElements=function(){if(!ss.staticEquals(bH.$1$7,null)){bH.$1$7()}};bH.$0=function(ef,eg,eh){if(!ss.staticEquals(ef,null)){ef(eg,eh)}};global.spiff.GlobalUIEvents=bH;var bI=function(ef){this.$2=null;this.$0=null;this.$1=null;React.Component.call(this,ef);this.state={};this.$0=ss.mkdel(this,function(eg){this.$2=eg})};bI.__typeName='spiff.GridIScrollHandler';global.spiff.GridIScrollHandler=bI;var bJ=function(ef){this.groupSize=0;this.allSelected=false;this.$1$1=null;this.groupSize=ef;this.allSelected=false;this.set_selectedIndexes({})};bJ.__typeName='spiff.GroupSelection';global.spiff.GroupSelection=bJ;var bK=function(ef,eg){this.$2=false;de.$ctor1.call(this,ef,eg);this.state={value:ef.initialValue,emptyTextBox:false}};bK.__typeName='spiff.HorizontalSliderComponent';global.spiff.HorizontalSliderComponent=bK;var bL=function(ef){this.$b=0;this.$c=0;this.$a=true;this.$9=false;this.$8=null;this.$7=0;bF.call(this,ef,'hover',false);this.$7=(ss.isValue(ef.hoverDelay)?ef.hoverDelay:150)};bL.__typeName='spiff.Hover';global.spiff.Hover=bL;var bM=function(){};bM.__typeName='spiff.HoverAddClassBehavior';bM.attach=function(ef,eg,eh){eg=ss.coalesce(eg,'hover');return new bN(ef,eh,function(ei){bM.$0(ei,eg)},function(ei){bM.$1(ei,eg)})};bM.$0=function(ef,eg){$(ef.currentTarget).addClass(eg)};bM.$1=function(ef,eg){$(ef.currentTarget).removeClass(eg)};global.spiff.HoverAddClassBehavior=bM;var bN=function(ef,eg,eh,ei){this.$4=null;this.$5=null;this.$6=null;this.$7=null;this.$7=ef;this.$4=eg;this.$5=eh;this.$6=ei;this.$7.add_disposed(ss.mkdel(this,this.$2));if(ss.isValue(eg)){this.$7.element.on('mouseenter'+this.$3(),eg,ss.mkdel(this,this.$0));this.$7.element.on('mouseleave'+this.$3(),eg,ss.mkdel(this,this.$1))}else{this.$7.element.on('mouseenter'+this.$3(),ss.mkdel(this,this.$0));this.$7.element.on('mouseleave'+this.$3(),ss.mkdel(this,this.$1))}};bN.__typeName='spiff.HoverBehavior';global.spiff.HoverBehavior=bN;var bO=function(){};bO.__typeName='spiff.ICompositeSearchWidgetTemplate';global.spiff.ICompositeSearchWidgetTemplate=bO;var bP=function(){this.iconElement=null;y.call(this,$('<a>').addClass('tab-iconButton'));this.setEnabled(true)};bP.__typeName='spiff.IconButton';global.spiff.IconButton=bP;var bQ=function(ef){React.Component.call(this,ef);this.state=this.$0()};bQ.__typeName='spiff.IconButtonComponent';global.spiff.IconButtonComponent=bQ;var bR=function(){this.isActive=false};bR.__typeName='spiff.IconButtonState';global.spiff.IconButtonState=bR;var bS=function(){};bS.__typeName='spiff.IContent';global.spiff.IContent=bS;var bT=function(){};bT.__typeName='spiff.IDialogContent';global.spiff.IDialogContent=bT;var bU=function(){};bU.__typeName='spiff.IDragResponder';global.spiff.IDragResponder=bU;var bV=function(){};bV.__typeName='spiff.IDragSource';global.spiff.IDragSource=bV;var bW=function(){};bW.__typeName='spiff.IDropTarget';global.spiff.IDropTarget=bW;var bX=function(){};bX.__typeName='spiff.IHasEnabledState';global.spiff.IHasEnabledState=bX;var bY=function(){};bY.__typeName='spiff.IListItemContentCreator';global.spiff.IListItemContentCreator=bY;var bZ=function(){};bZ.__typeName='spiff.IListItemDragAvatarCreator';global.spiff.IListItemDragAvatarCreator=bZ;var ca=function(){};ca.__typeName='spiff.IListViewDragFeedback';global.spiff.IListViewDragFeedback=ca;var cb=function(){};cb.__typeName='spiff.IListViewScrollHandler';global.spiff.IListViewScrollHandler=cb;var cc=function(){};cc.__typeName='spiff.IMouseCaptureEventHandler';global.spiff.IMouseCaptureEventHandler=cc;var cd=function(){};cd.__typeName='spiff.InputType';global.spiff.InputType=cd;var ce=function(ef,eg){this.$4=null;de.$ctor1.call(this,ef,eg);this.$4={tap:ss.mkdel(this,function(eh){this.$2();this.$0(eh)})}};ce.__typeName='spiff.InteractAsButtonWrapperComponent';ce.create=function(ef){return React.createElement(ce,ef)};global.spiff.InteractAsButtonWrapperComponent=ce;var cf=function(ef){var eg=function(){};ss.registerGenericInterfaceInstance(eg,cf,[ef],{add_propsUpdated:null,remove_propsUpdated:null,get_props:null},function(){return[]});return eg};cf.__typeName='spiff.IPropsProvider$1';ss.initGenericInterface(cf,a,1);global.spiff.IPropsProvider$1=cf;var cg=function(){};cg.__typeName='spiff.IScrollable';global.spiff.IScrollable=cg;var ch=function(ef,eg){this.$4=null;this.$5=null;this.iScroll=null;React.Component.call(this,ef,eg);this.state={hovered:false,scrolling:false}};ch.__typeName='spiff.IScrollComponent';global.spiff.IScrollComponent=ch;var ci=function(){};ci.__typeName='spiff.IScroller';global.spiff.IScroller=ci;var cj=function(){};cj.__typeName='spiff.IScrollingControl';global.spiff.IScrollingControl=cj;var ck=function(){this.extraCssClass=null;this.iScrollOptions=null;this.refreshDelay=0;this.keepPositionOnRecreate=true;this.alwaysShowScrollbarsIfScrollable=false;this.startingY=null;this.augmentedScrollX=true;this.augmentedScrollY=true;this.customStyle=null;this.scrollStopCallback=null;this.scrollCallback=null};ck.__typeName='spiff.IScrollProps';global.spiff.IScrollProps=ck;var cl=function(ef){this.content=null;this.scroll=null;dL.call(this,$(ef))};cl.__typeName='spiff.IScrollTemplate';global.spiff.IScrollTemplate=cl;var cm=function(ef,eg){this.scrollEndCleanup=new tab.DisposableHolder;this.scroller=null;dl.call(this,ef,eg)};cm.__typeName='spiff.IScrollView';global.spiff.IScrollView=cm;var cn=function(){};cn.__typeName='spiff.ISelectable';global.spiff.ISelectable=cn;var co=function(){};co.__typeName='spiff.ITabControlTemplate';global.spiff.ITabControlTemplate=co;var cp=function(){};cp.__typeName='spiff.ITextInputViewTemplate';global.spiff.ITextInputViewTemplate=cp;var cq=function(){};cq.__typeName='spiff.IUberPopupContent';global.spiff.IUberPopupContent=cq;var cr=function(){};cr.__typeName='spiff.JQueryGestureExtensions';cr.fireTableauGesture=function(ef,eg,eh,ei){if(ss.isNullOrUndefined(eh)){var ej=new Object;ej.type='touchend';ej.timeStamp=tab.DateUtil.get_nowAsTime();ej.keyCode=null;ej.ctrlKey=false;ej.altKey=false;ej.metaKey=false;ej.shiftKey=false;ej.charOrCode=null;ej.clientX=0;ej.clientY=0;ej.touches=new Array;ej.targetTouches=new Array;ej.changedTouches=new Array;ej.target=ef;eh=ej}var ek;switch(eg){case'dragMove':case'dragStart':case'dragEnd':{ek='drag';break}case'hover':case'moving':case'mouseleave':{ek='hover';break}case'pinchStart':case'pinchMove':case'pinchEnd':{ek='pinch';break}default:{ek='discrete';break}}var el=cW.create(eh,ef,null);bF.$0($(ef),ek).$0(eg,el,ei||{})};global.spiff.JQueryGestureExtensions=cr;var cs=function(ef,eg){this.$b='.label';y.call(this,ef);this.$b=eg};cs.__typeName='spiff.LabelButton';cs.newAnchorButton=function(){return new cs($("<a href='#' class='tab-link-button'><span class='label hide'></span></a>"),'.label')};cs.newAnchorButton$1=function(ef,eg){var eh=new cs($("<a href='#' class='tab-link-button'><span class='label hide'></span></a>"),'.label');eh.element.attr('href',ef);eh.element.attr('target',ss.coalesce(eg,'_blank').toString());return eh};cs.newNativeButton=function(){return new cs($("<button class='tab-button' type='button'><span class='icon'></span><span class='label hide'></span></button>"),'.label')};cs.newMenuButton=function(){return new cs($("<button class='tab-button' type='button'>\n            <div class='paired-icon'>\n                <span class='icon menu-button'></span>\n                <span class='tabComboBoxButton'></span>\n            </div>\n            <span class='label hide'></span></button>"),'.label')};cs.newTextButton=function(ef,eg){var eh=new cs($("<span class='tab-text-button'><span class='label hide'></span></span>"),'.label');if(ss.isValue(ef)){eh.add_click(ef);eh.disposables.add$1(new tab.CallOnDispose(function(){eh.remove_click(ef)}))}if(ss.isValue(eg)){eh.set_label(eg)}return eh};global.spiff.LabelButton=cs;var ct=function(ef,eg){this.$e='.label';dO.call(this,ef);this.$e=eg};ct.__typeName='spiff.LabelToggleButton';ct.newCheckbox=function(ef,eg){var eh=ct.$0("<span class='tab-icon-toggle'><span class='icon'></span><span class='label hide'></span></span>",ef,eg);eh.element.addClass('tab-unification-check').find('.icon').append($("<span class='innerIcon'></span>").addClass('tab-img-check'));return eh};ct.newRadioButton=function(ef,eg){var eh=ct.$0("<span class='tab-icon-toggle'><span class='icon'></span><span class='label hide'></span></span>",ef,eg);eh.element.addClass('tab-unification-radio').find('.icon').append($("<span class='innerIcon'></span>"));return eh};ct.newNativeCheckbox=function(ef,eg){return ct.$0("<span class='tab-checkbox'><input type='checkbox'></input><span class='label hide'></span></span>",ef,eg)};ct.newNativeRadioButton=function(ef,eg){var eh=ct.$0("<span class='tab-radio'><input type='radio'></input><span class='label hide'></span></span>",ef,eg);eh.set_preventMouseDeselect(true);return eh};ct.newLabelToggleButton=function(ef,eg){return ct.$0("<span class='tab-icon-toggle'><span class='icon'></span><span class='label hide'></span></span>",ef,eg)};ct.$0=function(ef,eg,eh){var ei=new ct($(ef),'.label');ei.set_label(eg);ei.set_selected(eh);var ej=ei;var ek=ej.get_inputElement();if(ss.isValue(ek)){ek.click(function(el){el.preventDefault()})}return ej};global.spiff.LabelToggleButton=ct;var cu=function(ef){this.$4=null;React.Component.call(this,ef,null);this.state=this.$0();this.$4={firstTouch:ss.mkdel(this,function(eg){this.handleEnterPress()})}};cu.__typeName='spiff.LineEditWithButtonComponent';global.spiff.LineEditWithButtonComponent=cu;var cv=function(ef,eg){var eh=function(ei,ej){React.Component.call(this,ei,ej)};ss.registerGenericClassInstance(eh,cv,[ef,eg],{render:function(){var ei=_.map(this.props.items,ss.mkdel(this,function(ej){var ek=this.getEventHandleSpecForItem(ej);var el={className:'tabListItem',key:this.getItemKey(ej.data)};if(ss.isNullOrUndefined(ek)){return bj.div(el,this.buildItem(ej.data))}else{return bt.div(ek,el,[this.buildItem(ej.data)])}}));return bj.div({className:'tabList'},ei)},getItemKey:null,buildItem:null,getEventHandleSpecForItem:function(ei){return null}},function(){return React.Component},function(){return[]});return eh};cv.__typeName='spiff.ListComponent$2';ss.initGenericClass(cv,a,2);global.spiff.ListComponent$2=cv;var cw=function(ef,eg){this.$1$1=null;this.$1$2=null;this.set_parentListView(ef);this.set_draggableListItemView(eg)};cw.__typeName='spiff.ListItemDragSource';global.spiff.ListItemDragSource=cw;var cx=function(ef){this.$f=null;this.$g=null;dv.call(this);this.set_selectionType(ef)};cx.__typeName='spiff.ListItemGroup';global.spiff.ListItemGroup=cx;var cy=function(ef,eg){this.$g=null;this.$f=null;dO.call(this,cy.$0(ef));tab.Param.verifyValue(eg,'viewModel');tab.Param.verifyValue(eg.get_id(),'viewModel.Id');this.$g=eg;this.$g.add_propertyChanged(ss.mkdel(this,this.$e));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$g.remove_propertyChanged(ss.mkdel(this,this.$e))})));this.set_selectionId(eg.get_id());this.set_widgetId(eg.get_id());this.$f=ef};cy.__typeName='spiff.ListItemView';cy.$0=function(ef){var eg=$('<div/>').addClass('tab-list-item');eg.append(ef);return eg};global.spiff.ListItemView=cy;var cz=function(ef,eg,eh,ei,ej){this.$2=null;this.$0=null;this.$5=false;this.$4=false;this.$1=false;this.$6=false;this.$3=false;x.call(this);this.$2=ef;if(ss.isValue(eg)){this.$0=eg}this.$5=eh;this.$4=ei;this.$3=ej};cz.__typeName='spiff.ListItemViewModel';cz.newListItem=function(ef,eg,eh,ei,ej){tab.Param.verifyString(ef,'id');return new cz(ef,eg,eh,ei,ej)};global.spiff.ListItemViewModel=cz;var cA=function(){this.itemDatas=null;this.selectionIndexes=null;this.invalidIndexes=null;this.itemIds=null};cA.__typeName='spiff.ListItemViewModelCollectionBuilder';global.spiff.ListItemViewModelCollectionBuilder=cA;var cB=function(ef,eg){this.$l=[];this.$k=null;this.$3$1=null;this.$m=null;this.$3$2=null;ss.makeGenericType(w,[cD]).call(this,ef,new cE);this.get_viewModel().add_selectionModelUpdated(ss.mkdel(this,this.$c));this.get_viewModel().add_spotlightedItemChanged(ss.mkdel(this,this.$d));this.get_viewModel().add_itemMoved(ss.mkdel(this,this.$e));this.disposables.add(ss.mkdel(this,function(){this.get_viewModel().remove_selectionModelUpdated(ss.mkdel(this,this.$c));this.get_viewModel().remove_spotlightedItemChanged(ss.mkdel(this,this.$d));this.get_viewModel().remove_itemMoved(ss.mkdel(this,this.$e))}));this.set_scrollHandler(new g(this.element));this.get_dom().get_listItemContainer().keypress(ss.mkdel(this,this.$9)).keydown(ss.mkdel(this,this.$9));this.$k=eg;this.$5()};cB.__typeName='spiff.ListView';cB.createListView=function(ef,eg){return new cB(ef,eg)};global.spiff.ListView=cB;var cC=function(){this.$b='dragging';this.$c='dragHover';this.$e=null;this.$f=null;this.$n=0;this.$l=0;this.$g=null;this.$h=0;this.$k=null;this.$m=0;this.$j=0;this.$i=0;this.$d=null;this.$1$1=null;this.$1$2=null;this.$1$3=null};cC.__typeName='spiff.ListViewDragSortFeedback';global.spiff.ListViewDragSortFeedback=cC;var cD=function(ef,eg){this.$8=null;this.$6=null;this.$7=null;this.$5=null;this.$4=null;this.$9=null;this.$3=true;this.$a=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;x.call(this);this.$8={};this.$6=new cx(eg);this.$6.add_selectionChanged(ss.mkdel(this,this.onSelectionChanged));this.update(ef)};cD.__typeName='spiff.ListViewModel';global.spiff.ListViewModel=cD;var cE=function(){this.$0=null;dL.call(this,$("<div class='tab-list'><div class='tab-list-itemHolder'></div></div>"));this.$0=this.getElementBySelector('.tab-list-itemHolder')};cE.__typeName='spiff.ListViewTemplate';global.spiff.ListViewTemplate=cE;var cF=function(ef){this.menuItems=null;this.defaultItem=null;this.menuItems=ef;this.defaultItem=_.find(ef,function(eg){return eg.isDefault})};cF.__typeName='spiff.Menu';global.spiff.Menu=cF;var cG=function(){this.name=null;this.description=null;this.title=null;this.readId=null;this.iconClass=null;this.iconClassTwo=null;this.itemClass=null;this.checkState=0;this.enabled=false;this.isDivider=false;this.isTextInput=false;this.isDefault=false;this.subMenu=null;this.data=null;this.id=null;++cG.$0;this.id='menuItem'+cG.$0};cG.__typeName='spiff.MenuItem';cG.newDivider=function(){return(new cH).isDivider(true).enabled(false).build()};cG.newActionItem=function(ef,eg,eh,ei){return(new cH).name(ef).readId(ei).data(eg).enabled(!ss.staticEquals(eg,null)&&eh).build()};cG.newActionItemWithItemClass=function(ef,eg,eh){return(new cH).name(ef).itemClass(eh).data(eg).enabled(!ss.staticEquals(eg,null)).build()};cG.newItem=function(ef,eg,eh,ei){return(new cH).data(ef).name(eg).checkState(eh).subMenu(ei).enabled((ss.isValue(ei)?ei.menuItems.some(function(ej){return ej.enabled}):true)).build()};global.spiff.MenuItem=cG;var cH=function(){this.$0=null;this.$0=new cG};cH.__typeName='spiff.MenuItemBuilder';global.spiff.MenuItemBuilder=cH;var cI=function(){};cI.__typeName='spiff.MenuItemCheckState';global.spiff.MenuItemCheckState=cI;var cJ=function(){dL.call(this,$("<div class='tabMenuItemDivider' role='separator' />"))};cJ.__typeName='spiff.MenuItemDividerTemplate';global.spiff.MenuItemDividerTemplate=cJ;var cK=function(){this.textInput=null;dL.call(this,$("\n<div class='tabMenuItemTextInputPanel' role='menuitem'>\n  <div class='tabMenuItemTextInputHolder'>\n    <input class='tabMenuItemTextInput' type='text'>\n  </div>\n</div>"));this.textInput=this.getElementBySelector('.tabMenuItemTextInput')};cK.__typeName='spiff.MenuItemTextInputTemplate';global.spiff.MenuItemTextInputTemplate=cK;var cL=function(){this.content=null;dL.call(this,$("<div class='tabMenu' tabindex='-1' role='menu'><div class='tabMenuContent'/></div>"));this.content=this.getElementBySelector('.tabMenuContent')};cL.__typeName='spiff.MenuTemplate';global.spiff.MenuTemplate=cL;var cM=function(ef,eg){this.menuStack=[];this.dom=null;this.menuViewModel=null;this.glass=null;this.$b={};this.menuDisposables=new tab.DisposableHolder;ss.makeGenericType(u,[cN]).call(this,ef,eg);this.menuViewModel=ef;this.dom=eg;this.menuStack[0]=this.dom;this.menuViewModel.add_menuChanged(ss.mkdel(this,this.updateMenu));this.menuViewModel.add_shown(ss.mkdel(this,this.shown));this.menuViewModel.add_hidden(ss.mkdel(this,this.hidden));this.menuViewModel.add_menuItemSelectionChanged(ss.mkdel(this,this.$9));this.element.addClass(this.menuViewModel.get_theme().menuClass);this.element.on('blur',ss.mkdel(this,this.onBlur))};cM.__typeName='spiff.MenuView';cM.getMenuItem=function(ef){return ef.data('tabMenuMenuItem')};cM.getMenuItemLevel=function(ef){return ss.coalesce(ef.data('tabMenuMenuItemLevel'),1)};cM.$0=function(ef){ef.stopPropagation()};global.spiff.MenuView=cM;var cN=function(ef){this.$0=null;this.$2=null;this.$3=null;this.$1=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=false;this.$2$8=false;this.$2$9=false;this.$2$10=null;x.call(this);this.set_shouldAnimateOnClose(ef);this.set_theme(new ea);this.$0=ss.mkdel(this,function(){_.defer(ss.mkdel(this,this.dispose))});this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_hidden(this.$0)})))};cN.__typeName='spiff.MenuViewModel';cN.createForMenu=function(ef,eg,eh,ei,ej,ek){var el=new cN(ek);el.set_menu(ef);var em=el;if(ss.isValue(eg)){em.add_menuItemClicked(eg);em.disposables.add$1(new tab.CallOnDispose(function(){em.remove_menuItemClicked(eg)}))}em.set_disposeOnHide(true);em.set_theme(eh||new ea);if(ss.isValue(ei)){em.add_hidden(ei);em.disposables.add$1(new tab.CallOnDispose(function(){em.remove_hidden(ei)}))}if(ss.isValue(ej)){em.add_shown(ej);em.disposables.add$1(new tab.CallOnDispose(function(){em.remove_shown(ej)}))}tab.ObjectRegistry.newView(cM).call(null,[em]);return em};cN.handleMenuActionItemClicked=function(ef){if($.isFunction(ef.data)){ef.data()}};global.spiff.MenuViewModel=cN;var cO=function(){this.menuClass='tabMenuBaseTheme';this.itemClass='tabMenuItemBaseTheme';this.dividerClass='tabMenuItemDividerBaseTheme';this.noIconClass='tabMenuNoIcons';this.noDescClass='tabMenuNoDesc'};cO.__typeName='spiff.MenuViewTheme';global.spiff.MenuViewTheme=cO;var cP=function(ef,eg){this.$y=null;this.template=null;be.call(this,ef,eg.domRoot);this.template=eg;this.$w();this.element.attr('aria-modal','true')};cP.__typeName='spiff.ModalDialog';cP.$ctor1=function(ef,eg){cP.call(this,ef,new dL(eg))};global.spiff.ModalDialog=cP;var cQ=function(){};cQ.__typeName='spiff.MouseCapture';cQ.$6=function(){return tab.Logger.lazyGetLogger(cQ)};cQ.$7=function(){return!tsConfig.is_mobile&&BrowserSupport.BrowserSupport.AddEventListener()};cQ.$5=function(){return BrowserSupport.BrowserSupport.IsIE()&&tabBootstrap.Utility.get_isEmbedded()};cQ.setCapture=function(ef,eg,eh){tab.Param.verifyValue(ef,'element');tab.Param.verifyValue(eg,'handler');if(cQ.$7()){if(ss.isNullOrUndefined(cQ.$8)||ss.isNullOrUndefined(eh)||!eh){cQ.releaseCapture();document.addEventListener('mousemove',cQ.$2,true);document.addEventListener('mouseup',cQ.$4,true);document.addEventListener('mouseout',cQ.$3,true);cQ.$8=eg}else{}}};cQ.releaseCapture=function(){if(cQ.$7()){document.removeEventListener('mousemove',cQ.$2,true);document.removeEventListener('mouseup',cQ.$4,true);document.removeEventListener('mouseout',cQ.$3,true)}};cQ.$2=function(ef){if(ss.isValue(cQ.$8)){cQ.$8.handleCapturedMouseMove(ef)}};cQ.$4=function(ef){cQ.$1(ef)};cQ.$3=function(ef){if(cQ.$5()&&cQ.$0(ef)){cQ.$1(ef)}};cQ.$1=function(ef){cQ.releaseCapture();if(ss.isValue(cQ.$8)){cQ.$8.handleCapturedMouseComplete(ef);cQ.$8=null}};cQ.$0=function(ef){var eg=ef.toElement;return ss.isNullOrUndefined(eg)||eg.nodeName==='HTML'};global.spiff.MouseCapture=cQ;var cR=function(){};cR.__typeName='spiff.MouseEventUtil';cR.get_clickEvent=function(){return(BrowserSupport.BrowserSupport.IsTouch()?'touchstart':'click')};cR.getMouseButtonEnum=function(ef){cR.$0();var eg='none';var eh=ef['which'];if(ss.isValue(eh)){var ei=eh;if(ss.keyExists(cR.$3,ei)){eg=cR.$3[ei]}}else if(ss.isValue(ef['button'])){var ej=ef['button'];if(ss.keyExists(cR.$2,ej)){eg=cR.$2[ej]}}return eg};cR.$0=function(){if(!cR.$1){cR.$2={};cR.$2[1]='left';cR.$2[4]='middle';cR.$2[2]='right';cR.$3={};cR.$3[1]='left';cR.$3[2]='middle';cR.$3[3]='right';cR.$1=true}};global.spiff.MouseEventUtil=cR;var cS=function(ef,eg,eh,ei){cS.$ctor1.call(this,ef,eg,eh,cS.$0,ei)};cS.__typeName='spiff.MoveDragInstance';cS.$ctor1=function(ef,eg,eh,ei,ej){this.$4=null;this.$3=null;this.$2=null;bm.call(this,ef,ej);this.$4=eg;this.$3=eh;this.$2=ei};global.spiff.MoveDragInstance=cS;var cT=function(ef,eg,eh){this.$3=null;this.$2=null;this.$4=null;this.$1=null;this.$0=false;this.$1$1=null;this.$1$2=null;this.$3=ef;this.$2=eg;this.$1='useScrollSize';this.$0=eh;bl.attachDragSource(this.$3,this)};cT.__typeName='spiff.MoveDragSource';global.spiff.MoveDragSource=cT;var cU=function(ef){bJ.call(this,ef)};cU.__typeName='spiff.MultiSelectGroupSelection';cU.buildMultiSelectGroupSelection$1=function(ef){return function(eg,eh){var ei=new cU(eg.length);var ej=eg.length;for(var ek=0;ek<ej;++ek){if(eh(eg[ek])){ei.get_selectedIndexes()[ek]=true}}ei.validateAllSelectedState();return ei}};cU.buildMultiSelectGroupSelection=function(ef){return function(eg,eh){var ei=new cU(eg.length);if(eh){ei.handleTapAll()}return ei}};global.spiff.MultiSelectGroupSelection=cU;var cV=function(){bd.call(this);this.onFeedbackType=function(){return'dropfeedbackuponentry'};this.onDragOver=function(ef,eg){return eg};this.onAcceptDrop=function(ef){return $.Deferred().resolve(false)};this.onGetDropCursor=function(ef){return X.noOp}};cV.__typeName='spiff.NoopDropTarget';global.spiff.NoopDropTarget=cV;var cW=function(ef,eg,eh){this.originalEvent=null;this.reactEvent=null;this.inputType=0;this.source=0;this.type=null;this.target=null;this.currentTarget=null;this.timeStamp=0;this.keyCode=0;this.ctrlKey=false;this.altKey=false;this.metaKey=false;this.shiftKey=false;this.clientX=0;this.clientY=0;this.pageX=0;this.pageY=0;this.touches=null;this.targetTouches=null;this.changedTouches=null;this.touchesById=null;this.gestureName=null;this.$1=null;this.originalEvent=ef;this.reactEvent=eh;this.type=ef.type;this.timeStamp=ef.timeStamp;this.keyCode=ef['keyCode'];this.ctrlKey=ef.ctrlKey;this.altKey=ef.altKey;this.metaKey=ef.metaKey;this.shiftKey=ef.shiftKey;this.clientX=ef['clientX'];this.clientY=ef['clientY'];if(ss.isValue(ef.touches)){this.touches=ef.touches;this.targetTouches=ef.targetTouches;this.changedTouches=ef.changedTouches;var ei=ef.target;this.target=((ei.nodeType===3)?ei.parentNode:ei);this.currentTarget=eg}else{this.targetTouches=((ef.type==='mouseup')?[]:[ef]);this.touches=this.targetTouches;this.changedTouches=[ef];this.currentTarget=ef.currentTarget;this.target=ef.target}var ej=this.touches.length;this.touchesById=new Array(ej);while(ej>0){ej-=1;var ek=this.touches[ej].identifier||0;this.touchesById[ek]=this.touches[ej]}ej=this.changedTouches.length;while(ej>0){ej-=1;var el=this.changedTouches[ej].identifier||0;this.touchesById[el]=this.changedTouches[ej]}};cW.__typeName='spiff.NormalizedEvent';cW.get_allHandledEvents=function(){return Object.keys(i.$3)};cW.create=function(ef,eg,eh){return i.$0(ef,eg,eh)};global.spiff.NormalizedEvent=cW;var cX=function(){};cX.__typeName='spiff.OnBlurBehavior';global.spiff.OnBlurBehavior=cX;var cY=function(){};cY.__typeName='spiff.OrientationHandler';cY.add_orientationChanged=function(ef){cY.$1$1=ss.delegateCombine(cY.$1$1,ef)};cY.remove_orientationChanged=function(ef){cY.$1$1=ss.delegateRemove(cY.$1$1,ef)};cY.get_isLandscape=function(){return cY.$e===90||cY.$e===-90};cY.get_isPortrait=function(){return cY.$e===0||cY.$e===180};cY.get_windowInstHelper=function(){return cY.$k};cY.init=function(){if(!tsConfig.is_mobile_device){cY.$e=0;return}cY.$j=cY.$1();cY.$k=new tab.WindowHelper(cY.$j);cY.$e=cY.$3();cY.$f=cY.$k.get_innerWidth();if(BrowserSupport.BrowserSupport.OrientationChange()){$(cY.$j).on('orientationchange'.toString(),cY.$6)}$(cY.$j).on('resize'.toString(),cY.$7);if('addEventListener'in window.self){window.addEventListener('unload',cY.$a,true)}};cY.$a=function(ef){cY.unbindEvents()};cY.unbindEvents=function(){if(ss.isNullOrUndefined(cY.$j)){return}$(cY.$j).off('orientationchange'.toString(),cY.$6);$(cY.$j).off('resize'.toString(),cY.$7)};cY.$1=function(){var ef=tab.WindowHelper.get_windowSelf();if(tabBootstrap.Utility.get_isEmbedded()){try{while(ss.isValue(ef.parent)&&!ss.referenceEquals(ef.parent,ef)){var eg=ef.parent;var eh=new tab.WindowHelper(eg);if(ss.isNullOrUndefined(eh.get_outerWidth())){break}ef=eg}}catch(ei){}}return ef};cY.$6=function(ef){cY.$h=new Date;cY.$5()};cY.$5=function(){var ef=new Date;if(ef-cY.$h>=2500||cY.$g||cY.$9()||cY.$8()){cY.$b();cY.$2()}else{cY.$0();cY.$i=window.setTimeout(cY.$5,75)}};cY.$7=function(ef){if(cY.$g||cY.$9()){cY.$b();cY.$2()}};cY.$2=function(){cY.$0();if(cY.$8()){cY.$e=cY.$3();cY.$g=false;if(ss.isValue(cY.$1$1)){cY.$1$1()}}};cY.$9=function(){var ef=cY.$k.get_innerWidth();if(cY.$f!==ef){return true}return false};cY.$8=function(){var ef=cY.$3();if(cY.$e!==ef){return true}return false};cY.$b=function(){cY.$f=cY.$k.get_innerWidth();cY.$g=true};cY.$3=function(){var ef;if(!BrowserSupport.BrowserSupport.IsAndroid()){ef=cY.$4();if(ss.isValue(ef)){return ss.unbox(ef)}}ef=((cY.$k.get_innerWidth()<cY.$k.get_innerHeight())?0:90);return ss.unbox(ef)};cY.$4=function(){try{return cY.$j.orientation}catch(ef){}return null};cY.$0=function(){cY.$i=tab.MiscUtil.clearTimeout(cY.$i)};global.spiff.OrientationHandler=cY;var cZ=function(ef,eg){var eh=function(ei){React.Component.call(this,ei)};ss.registerGenericClassInstance(eh,cZ,[ef,eg],{render:function(){var ei=_.map(this.props.items,ss.mkdel(this,function(em,en){var eo=this.getEventHandleSpecForItem(em);var ep=['tabListItem'];if(en%2===1){ep.push('tabListItemAlternate')}var eq={className:ep.join(' '),key:this.getUniqueKey(em.data)};if(ss.isNullOrUndefined(eo)){return bj.div(eq,this.buildItem(em.data))}else{return bt.div(eo,eq,[this.buildItem(em.data)])}}));var ej=new dr;ej.scrollY=true;ej.scrollbars=true;ej.onScrollStop=ss.mkdel(this,this.onScrollStop);ej.alwaysShowScrollbarsIfScrollable=this.shouldScrollbarAlwaysBeShown();ej.startingY=this.props.startingY;var ek=ej;var el=dq.createScroller(ek,ei);return bj.div({className:'tabPagableList'},el)},buildItem:null,getUniqueKey:null,onScrollStop:null,getEventHandleSpecForItem:function(ei){return null},shouldScrollbarAlwaysBeShown:function(){return false}},function(){return React.Component},function(){return[]});return eh};cZ.__typeName='spiff.PagableListComponent$2';ss.initGenericClass(cZ,a,2);global.spiff.PagableListComponent$2=cZ;var da=function(ef){this.$7=false;this.$9=null;this.$a=null;this.$8=null;this.$6=null;bF.call(this,ef,'pinch',true,2)};da.__typeName='spiff.Pinch';global.spiff.Pinch=da;var db=function(ef){cB.call(this,ef,ef.get_listItemCreator())};db.__typeName='spiff.PopupListView';global.spiff.PopupListView=db;var dc=function(ef,eg,eh){this.$b=null;cD.call(this,ef,eh);this.$b=eg};dc.__typeName='spiff.PopupListViewModel';global.spiff.PopupListViewModel=dc;var dd=function(){};dd.__typeName='spiff.PureRender';dd.mixIn=function(ef){var eg=function(eh,ei){return dd.$0(ef,eh,ei)};ef['shouldComponentUpdate']=eg};dd.$0=function(ef,eg,eh){var ei=!tab.MiscUtil.shallowEquals(ef.props,eg)||!tab.MiscUtil.shallowEquals(ef.state,eh);if(!ei){}return ei};global.spiff.PureRender=dd;var de=function(ef){React.Component.call(this,ef)};de.__typeName='spiff.PureRenderComponent';de.$ctor1=function(ef,eg){React.Component.call(this,ef,eg)};global.spiff.PureRenderComponent=de;var df=function(){};df.__typeName='spiff.ReactComponentExtensions';df.generateUniqueKeys=function(ef){return function(eg,eh){var ei={};for(var ej=0;ej<eg.length;++ej){ei[eg[ej].toString()]=0}for(var ek=0;ek<eh.length;++ek){ei[eh[ek]]=1}return _.map(eg,function(el){var em=el.toString();var en=ei[em];if(en===0){ei[em]=1;return em}var eo=null;do eo=[em,'_',++en].join('');while(ss.isValue(ei[eo]));ei[em]=en;ei[eo]=1;return eo})}};global.spiff.ReactComponentExtensions=df;var dg=function(){};dg.__typeName='spiff.ReactElement';dg.div$1=function(ef,eg){return bj.div.apply(null,[{className:ef}].concat(eg))};dg.div=function(ef,eg){var eh=(ss.isValue(ef)?ef.join(' '):null);return bj.div.apply(null,[{className:eh}].concat(eg))};dg.span$1=function(ef,eg){return bj.span.apply(null,[{className:ef}].concat(eg))};dg.span=function(ef,eg){var eh=(ss.isValue(ef)?ef.join(' '):null);return bj.span.apply(null,[{className:eh}].concat(eg))};dg.br=function(ef){return bj.br({className:ef})};global.spiff.ReactElement=dg;var dh=function(ef,eg,eh){var ei=function(ej){this.$5=ss.getDefaultValue(ef);this.$1$1=null;this.$1$2=null;this.set_rootElement($("<div class='tab-ReactView' />"));this.$4(this.get_rootElement().get(0));this.$5=ej;this.$5.add_disposed(ss.mkdel(this,this.$1));this.$5.add_propsUpdated(ss.mkdel(this,this.$0))};ss.registerGenericClassInstance(ei,dh,[ef,eg,eh],{get_viewModel:function(){return this.$5},get_rootElement:function(){return this.$1$1},set_rootElement:function(ej){this.$1$1=ej},$3:function(){return this.$1$2},$4:function(ej){this.$1$2=ej},addToDom:function(ej){ej.append(this.$3());this.$2(this.$5.get_props())},onAddedToDom:function(){},$0:function(){this.$2(this.$5.get_props())},$2:function(ej){ReactDOM.render(React.createElement(eg,ej),this.$3())},dispose:function(){ReactDOM.unmountComponentAtNode(this.$3());this.get_rootElement().remove();this.$5.remove_propsUpdated(ss.mkdel(this,this.$0));this.$5.remove_disposed(ss.mkdel(this,this.$1))},$1:function(ej){this.dispose()},addClass:function(ej){this.get_rootElement().addClass(ej)}},function(){return null},function(){return[ss.IDisposable,tab.IAppendableView,ss.makeGenericType(tab.IView$1,[ef])]});ei.$0="<div class='tab-ReactView' />";tab.ObjectRegistry.registerType(ei,ei).call(null);return ei};dh.__typeName='spiff.ReactHostView$3';ss.initGenericClass(dh,a,3);global.spiff.ReactHostView$3=dh;var di=function(){};di.__typeName='spiff.ReactRefs';di.attachDragSource=function(ef){var eg=null;return function(eh){if(ss.isValue(eh)){eg=ReactDOM.findDOMNode(eh);bl.attachDragSource($(eg),ef())}else{bl.removeDragSource($(eg))}}};di.attachDropTarget=function(ef){var eg=null;return function(eh){if(ss.isValue(eh)){eg=ReactDOM.findDOMNode(eh);bl.attachDropTarget($(eg),ef())}else{bl.detachDropTarget($(eg))}}};global.spiff.ReactRefs=di;var dj=function(ef,eg,eh){var ei=function(ej,ek,el){this.$3$1=null;React.Component.call(this,ek,el);this.set_widget(ej);this.get_widget().add_propertyChanged(ss.mkdel(this,this.handleWidgetPropertyChanged))};ss.registerGenericClassInstance(ei,dj,[ef,eg,eh],{get_widget:function(){return this.$3$1},set_widget:function(ej){this.$3$1=ej},render:function(){return bj.div(null,'')},componentDidMount:function(){var ej=$(ReactDOM.findDOMNode(this));this.get_widget().addToDom(ej)},componentWillUnmount:function(){this.get_widget().remove_propertyChanged(ss.mkdel(this,this.handleWidgetPropertyChanged));this.get_widget().dispose()},componentWillReceiveProps:function(ej){this.updateWidgetState(ej)},handleWidgetPropertyChanged:null,updateWidgetState:null},function(){return React.Component},function(){return[]});return ei};dj.__typeName='spiff.ReactSpiffAdapter$3';ss.initGenericClass(dj,a,3);global.spiff.ReactSpiffAdapter$3=dj;var dk=function(ef,eg,eh){this.$5='bottomRight';cT.call(this,ef,eg,false);this.$5=eh};dk.__typeName='spiff.ResizeDragSource';global.spiff.ResizeDragSource=dk;var dl=function(ef,eg){ss.makeGenericType(w,[dm]).call(this,ef,eg)};dl.__typeName='spiff.ScrollableView';dl.createScrollableView=function(ef){if(ef.get_hasCustomIndicator()){return new Z(ef)}else{return new bc(ef)}};global.spiff.ScrollableView=dl;var dm=function(){this.$3=null;this.$4=null;this.$2$1=null;this.$2$2=null;this.isCenteredVertically=false;x.call(this);this.$0(true)};dm.__typeName='spiff.ScrollableViewModel';dm.$ctor1=function(ef){this.$3=null;this.$4=null;this.$2$1=null;this.$2$2=null;this.isCenteredVertically=false;x.call(this);this.$0(ef)};global.spiff.ScrollableViewModel=dm;var dn=function(ef){var eg=function(eh){this.$0=null;this.$1=0;de.call(this,eh);var ei=new bd;ei.canAccept=function(ej){return ss.isInstanceOfType(ej.get_payload(),ef)};ei.onAcceptDrop=ss.mkdel(this,function(ej){window.clearInterval(this.$1);return $.Deferred().resolve(true)});ei.onDragOver=ss.mkdel(this,function(ej,ek){this.props.scrollCallback();window.clearInterval(this.$1);this.$1=window.setInterval(this.props.scrollCallback,100);return ek});ei.onDragExit=ss.mkdel(this,function(ej){window.clearInterval(this.$1)});this.$0=ei};ss.registerGenericClassInstance(eg,dn,[ef],{render:function(){return bj.div({style:this.props.cssProps,ref:this.props.dropTargetRefConnectorCallback(this.$0)})},componentWillUnmount:function(){window.clearInterval(this.$1)}},function(){return de},function(){return[]});eg.$0=100;return eg};dn.__typeName='spiff.ScrollEdgeAreaComponent$1';ss.initGenericClass(dn,a,1);global.spiff.ScrollEdgeAreaComponent$1=dn;var dp=function(){};dp.__typeName='spiff.ScrollerType';global.spiff.ScrollerType=dp;var dq=function(ef,eg){React.Component.call(this,ef,eg)};dq.__typeName='spiff.ScrollingComponent';dq.$0=function(ef){var eg=ef.forceScrollerType;if(ss.isNullOrUndefined(eg)){eg=0}return ss.unbox(eg)};dq.createScroller=function(ef,eg){var eh=dq.$0(ef);var ei=dq.$1[eh];if(eg.length===1){return React.createElement(ei,ef,eg[0])}return React.createElement(ei,ef,eg)};global.spiff.ScrollingComponent=dq;var dr=function(){this.extraCssClass=null;this.customStyle=null;this.forceScrollerType=null;this.scrollX=false;this.scrollY=false;this.scrollbars=true;this.mouseWheel=true;this.alwaysShowScrollbarsIfScrollable=false;this.onScrollStop=null;this.onScroll=null;this.startingY=null;this.augmentedScrollX=true;this.augmentedScrollY=true;this.onScrollingControlRefUpdated=null};dr.__typeName='spiff.ScrollingProps';global.spiff.ScrollingProps=dr;var ds=function(ef){ss.makeGenericType(z,[Object]).call(this,ef)};ds.__typeName='spiff.SelectableButtonComponent';global.spiff.SelectableButtonComponent=ds;var dt=function(ef){React.Component.call(this,ef);this.state=this.$1(this.props.selection)};dt.__typeName='spiff.SelectableButtonGroupComponent';dt.getDesiredHeight=function(ef){return $('.tab-vScrollable',ef).get(0).scrollHeight};dt.getMinimumWidth=function(ef){return $('.tab-vScrollable',ef).get(0).scrollWidth};global.spiff.SelectableButtonGroupComponent=dt;var du=function(){this.disabled=false;this.isTabbable=false;this.label=null;this.tooltip=null;this.getCustomContentBefore=null;this.getCustomContentAfter=null;this.testId=null};du.__typeName='spiff.SelectableButtonGroupItem';global.spiff.SelectableButtonGroupItem=du;var dv=function(){this.$7=null;this.$9=null;this.$a=0;this.$8='tabSelected';this.$1$1=null;this.$7=[];this.$9={}};dv.__typeName='spiff.SelectableGroup';global.spiff.SelectableGroup=dv;var dw=function(ef,eg,eh){this.$1=false;this.$2=false;this.$0=false;ss.CancelEventArgs.call(this);this.$1=ef;this.$2=eg;this.$0=eh};dw.__typeName='spiff.SelectionEventArgs';global.spiff.SelectionEventArgs=dw;var dx=function(){};dx.__typeName='spiff.SelectionMethod';global.spiff.SelectionMethod=dx;var dy=function(){this.$0=null;this.$0=dK.createEmpty()};dy.__typeName='spiff.SharedWidgetsPointerEventAdapter';global.spiff.SharedWidgetsPointerEventAdapter=dy;var dz=function(ef,eg){this.relativeDom=null;this.preferUp=false;this.preferLeft=false;this.expanded=false;this.additionalMenuClass=null;this.cursorPosition=null;this.activatedBy=null;this.openedFrom=null;this.$1$1=0;this.relativeDom=ef;this.set_minWidth((eg?tab.DoubleUtil.roundToInt(ef.outerWidth()):0))};dz.__typeName='spiff.ShowMenuOptions';global.spiff.ShowMenuOptions=dz;var dA=function(ef){bJ.call(this,ef)};dA.__typeName='spiff.SingleSelectGroupSelection';dA.buildSingleSelectGroupSelection$1=function(ef){return function(eg,eh){var ei=new dA(eg.length);var ej=eg.length;if(ej===0){}for(var ek=0;ek<ej;++ek){if(eh(eg[ek])){ei.get_selectedIndexes()[ek]=true}}ei.validateAllSelectedState();return ei}};dA.buildSingleSelectGroupSelection=function(ef){return function(eg,eh){var ei=new dA(eg.length);if(eh){ei.handleTapAll()}return ei}};global.spiff.SingleSelectGroupSelection=dA;var dB=function(ef,eg){this.$0=null;this.$1=null;this.$0=ef;this.$1=eg};dB.__typeName='spiff.SpiffBrowserViewport';dB.getViewport=function(ef){if(!ss.staticEquals(dB.getSpiffBrowserViewportFunc,null)){dB.getSpiffBrowserViewportFunc(ef)}else{ef(new dB(null,null))}};global.spiff.SpiffBrowserViewport=dB;var dC=function(ef,eg){this.$5=null;this.$6=null;React.Component.call(this,ef,eg);this.$5=ss.mkdel(this,function(eh){this.$6=eh})};dC.__typeName='spiff.StatelessDropdownComponent';global.spiff.StatelessDropdownComponent=dC;var dD=function(ef){this.$p=null;this.$o=null;this.$n=false;de.call(this,ef)};dD.__typeName='spiff.StatelessHorizontalSliderComponent';dD.create=function(ef){return React.createElement(dD,ef)};global.spiff.StatelessHorizontalSliderComponent=dD;var dE=function(ef){cs.call(this,dE.$0(ef),'.tab-styled-button-middle');this.set_focusClass('tab-focus');this.set_disabledClass('tab-disabled')};dE.__typeName='spiff.StyledButton';dE.createStyledButton=function(ef,eg,eh,ei){var ej=new dE(eh);ej.set_label(eg);ej.add_click(ef);ej.disposables.add$1(new tab.CallOnDispose(function(){ej.remove_click(ef)}));if(ss.isValue(ei)){ej.tabIndex(ss.unbox(ei))}return ej};dE.$0=function(ef){return $('<span>').addClass('tab-styled-button').addClass(ef).append($('<span>').addClass('tab-styled-button-left')).append($('<span>').addClass('tab-styled-button-middle')).append($('<span>').addClass('tab-styled-button-right'))};global.spiff.StyledButton=dE;var dF=function(ef,eg){ss.makeGenericType(dj,[cs,Object,Object]).call(this,dG.createUnificationLabelButton(ef.clickHandler,ef.label,ef.buttonClass,ss.coalesce(ef.buttonStyle,0),ef.tabIndex),ef,eg);this.get_widget().set_disabled(ss.coalesce(ef.disabled,false));this.get_widget().set_hoverTooltipText(ef.tooltipText)};dF.__typeName='spiff.StyledButtonComponent';global.spiff.StyledButtonComponent=dF;var dG=function(){};dG.__typeName='spiff.StyledTextButton';dG.createUnificationLabelButton=function(ef,eg,eh,ei,ej){var ek=dG.$0(ef,eg,eh,1,ej);var el;switch(ei){case 0:{el='tabStyledTextButtonFilledGreen';break}case 1:{el='tabStyledTextButtonFilledRed';break}case 2:{el='tabStyledTextButtonFilledGrey';break}case 3:{el='tabStyledTextButtonOutline';break}default:{el='';break}}ek.addClass(el);return ek};dG.createUnificationIconTextButton=function(ef,eg,eh){var ei=new cs($("<span class='tabTextIconButton'><span class='icon'/><span class='label hide'/></span>"),'.label');if(!ss.staticEquals(ef,null)){ei.onClick(function(ej){ef()})}if(!ss.isNullOrEmptyString(eg)){ei.set_label(eg)}if(!ss.isNullOrEmptyString(eh)){ei.addClass(eh)}return ei};dG.createActionButton=function(ef,eg,eh,ei,ej){var ek=dG.$0(ef,eg,eh,ei,ej);ek.addClass('tabStyledTextButtonAction');return ek};dG.$0=function(ef,eg,eh,ei,ej){var ek=cs.newTextButton(ef,eg);ek.addClass('tabStyledTextButton');switch(ei){case 2:{ek.addClass('tabLargeStyledTextButton');break}case 1:{ek.addClass('tabMediumStyledTextButton');break}}ek.addClass(eh);if(ss.isValue(ej)){ek.tabIndex(ss.unbox(ej))}return ek};global.spiff.StyledTextButton=dG;var dH=function(ef){this.$1=new dv;this.$5=null;this.$3={};this.$2=new tab.DisposableHolder;this.$4=null;this.$1$1=null;if(ss.isNullOrUndefined(ef)){ef=new d}this.$5=ef};dH.__typeName='spiff.TabControl';global.spiff.TabControl=dH;var dI=function(ef,eg){this.eventConfig=null;this.handler=null;this.$1=new tab.DisposableHolder;this.$2=0;this.$3=0;this.$4=true;this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.eventConfig=eg||{};bv.setHandler(this.eventConfig,'firstTouch',ss.mkdel(this,this.handlePressEvent));bv.setHandler(this.eventConfig,'tap',ss.mkdel(this,this.handleClickEvent));bv.setHandler(this.eventConfig,'rightClick',ss.mkdel(this,this.handleRightClickEvent));this.handler=new dJ.$ctor1(ef,this.eventConfig)};dI.__typeName='spiff.TableauClickHandler';dI.target=function(ef){return new dI(ef,null)};dI.targetAndConfig=function(ef,eg){return new dI(ef,eg)};dI.targetAndClick=function(ef,eg){return(new dI(ef,null)).onClick(eg)};dI.targetAndPress=function(ef,eg){return(new dI(ef,null)).onPress(eg)};dI.targetAndRightClick=function(ef,eg){return(new dI(ef,null)).onRightClick(eg)};dI.targetAndDoubleClick=function(ef,eg){return(new dI(ef,null)).onDoubleClick(eg)};global.spiff.TableauClickHandler=dI;var dJ=function(){this.config=null;this.$2=null;this.$3=null};dJ.__typeName='spiff.TableauEventHandler';dJ.$ctor1=function(ef,eg){this.config=null;this.$2=null;this.$3=null;this.config=eg||{};this.config.domElem=ef;this.configureDomElem(ef);this.setupEventRecognizer(this.config);this.$0(ef)};dJ.$0=function(ef,eg){return ef[eg]};global.spiff.TableauEventHandler=dJ;var dK=function(){this.$2$1=null;dJ.call(this);this.set_eventHandlingAttributesForReact(this.$4())};dK.__typeName='spiff.TableauEventHandlerForReact';dK.createEmpty=function(){return new dK};dK.$0=function(ef){if(ss.isNullOrUndefined(dK.$1)){dK.$1={};dK.$1['touchstart']='onTouchStart';dK.$1['touchmove']='onTouchMove';dK.$1['touchend']='onTouchEnd';dK.$1['touchcancel']='onTouchCancel';dK.$1['mousedown']='onMouseDown';dK.$1['mousemove']='onMouseMove';dK.$1['mouseup']='onMouseUp';dK.$1['mouseout']='onMouseOut';dK.$1['scroll']='onScroll';dK.$1['contextmenu']='onContextMenu'}return dK.$1[ef]};global.spiff.TableauEventHandlerForReact=dK;var dL=function(ef){this.disposables=new tab.DisposableHolder;this.domRoot=null;this.domRoot=ef};dL.__typeName='spiff.Template';dL.fromHtml=function(ef){return new dL($(ef))};global.spiff.Template=dL;var dM=function(ef,eg){de.$ctor1.call(this,ef,eg)};dM.__typeName='spiff.TextDropdownButtonComponent';global.spiff.TextDropdownButtonComponent=dM;var dN=function(ef,eg,eh,ei,ej){this.$5=null;this.$6=null;this.$4=false;this.$2$1=null;this.$2$2=null;ed.call(this,ef.get_domRootElement());this.$5=ef;this.$6=eg;this.$5.get_inputElement().val(this.$6);this.$5.get_inputElement().attr('placeholder',eh);this.$5.get_inputElement().attr('title',eh);if(ss.isValue(ei)){var ek='textinput-'+this.get_instanceId();ef.get_inputElement().attr('id',ek);ef.get_inputElement().before($(ss.formatString("<label for='{0}'>{1}</label>",ek,ei)))}if(ej){ef.get_inputElement().attr('readonly','readonly')}this.$5.get_inputElement().on('compositionstart compositionupdate',ss.mkdel(this,function(el){this.$4=true})).on('compositionend',ss.mkdel(this,function(el){this.$4=false})).on('keydown',ss.mkdel(this,this.$3)).on('input',ss.mkdel(this,this.$2))};dN.__typeName='spiff.TextInputView';dN.newTextInputView=function(ef,eg,eh,ei){var ej=new o;return new dN(ej,ef,eg,eh,ei)};global.spiff.TextInputView=dN;var dO=function(ef,eg){this.$c=null;this.$d=null;this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=false;y.call(this,ef);this.$d=dO.$0();this.$c=ss.coalesce(eg,'selected')};dO.__typeName='spiff.ToggleButton';dO.createButton=function(ef,eg,eh){var ei=new dO(ef,eg);ei.set_selected(eh.get_toggleValue());var ej=function(ek,el){if(el.get_propertyName()==='selected'){eh.raiseToggled()}};ei.add_propertyChanged(ej);ei.disposables.add$1(new tab.CallOnDispose(function(){ei.remove_propertyChanged(ej)}));return ei};dO.$0=function(){dO.$1++;return'toggleBtn-'+dO.$1.toString()};global.spiff.ToggleButton=dO;var dP=function(ef,eg){this.$0=false;this.$2$1=null;this.$2$2=null;x.call(this);this.$0=eg;this.set_data({});this.add_toggled(ef);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_toggled(ef)})))};dP.__typeName='spiff.ToggleButtonViewModel';global.spiff.ToggleButtonViewModel=dP;var dQ=function(){};dQ.__typeName='spiff.UberPopupHorizontalAlign';global.spiff.UberPopupHorizontalAlign=dQ;var dR=function(){};dR.__typeName='spiff.UberPopupHorizontalAttach';global.spiff.UberPopupHorizontalAttach=dR;var dS=function(){};dS.__typeName='spiff.UberPopupMode';global.spiff.UberPopupMode=dS;var dT=function(){this.horizontalAlign=0;this.horizontalAttach=0;this.theme=0;this.preferUp=false;this.coverRelativeElement=false;this.limitPopupHeight=false;this.maxPopupHeight=null;this.additionalClassNames=null;this.isToolbarFlyout=false;this.isBeingPositionedRelativeToASharedDialogWidget=false;this.focusOnShown=true;this.popupMode=0;this.globalTouchWhitelist=null;this.glassZIndex=dT.startingGlassZIndex;this.useCaret=false};dT.__typeName='spiff.UberPopupShowOptions';dT.$ctor1=function(ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er){this.horizontalAlign=0;this.horizontalAttach=0;this.theme=0;this.preferUp=false;this.coverRelativeElement=false;this.limitPopupHeight=false;this.maxPopupHeight=null;this.additionalClassNames=null;this.isToolbarFlyout=false;this.isBeingPositionedRelativeToASharedDialogWidget=false;this.focusOnShown=true;this.popupMode=0;this.globalTouchWhitelist=null;this.glassZIndex=dT.startingGlassZIndex;this.useCaret=false;this.horizontalAlign=ef;this.horizontalAttach=eg;this.theme=eh;this.preferUp=ei;this.coverRelativeElement=ej;this.limitPopupHeight=ek;this.maxPopupHeight=el;this.additionalClassNames=em;this.isToolbarFlyout=en;this.popupMode=eo;this.globalTouchWhitelist=ep;this.glassZIndex=eq;this.focusOnShown=er};global.spiff.UberPopupShowOptions=dT;var dU=function(){this.content=null;this.caret=null;this.caretBorder=null;dL.call(this,$("<div class='tabUberPopup'><div class='tabUberPopupContent'/><div class='tabUberArrow'/><div class='tabUberArrow2'/></div>"));this.content=this.getElementBySelector('.tabUberPopupContent');this.caret=this.getElementBySelector('.tabUberArrow');this.caretBorder=this.getElementBySelector('.tabUberArrow2');this.caret.hide();this.caretBorder.hide()};dU.__typeName='spiff.UberPopupTemplate';global.spiff.UberPopupTemplate=dU;var dV=function(){};dV.__typeName='spiff.UberPopupTheme';global.spiff.UberPopupTheme=dV;var dW=function(ef,eg){this.popupViewModel=null;this.glass=null;this.contentView=null;this.visible=false;ss.makeGenericType(w,[dX]).call(this,ef,eg);this.popupViewModel=ef;this.popupViewModel.add_shown(ss.mkdel(this,this.shown));this.popupViewModel.add_hidden(ss.mkdel(this,this.hidden));this.$6()};dW.__typeName='spiff.UberPopupView';global.spiff.UberPopupView=dW;var dX=function(ef){this.$0=null;this.$1=null;this.options=new dT;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;x.call(this);this.$1=ef;this.set_resizeContent(function(){});this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_hidden(ss.mkdel(this,this.dispose))})))};dX.__typeName='spiff.UberPopupViewModel';dX.$ctor1=function(ef){dX.call(this,function(){return ef})};dX.createForContent=function(ef,eg,eh,ei){var ej=new dX(eg);if(!ss.staticEquals(eh,null)){ej.add_hidden(eh);ej.addDisposables(new tab.CallOnDispose(function(){ej.remove_hidden(eh)}))}ej.set_content(ef);ej.set_disposeOnHide(true);tab.ObjectRegistry.newView(dW).call(null,[ej]);if(ei){ej.disposables.add$1(new tab.CallOnDispose(function(){ef.disposeViewModel()}))}return ej};dX.createForContent$1=function(ef,eg,eh,ei){return dX.createForContent(ef,function(){return eg},eh,ei)};dX.createForContentUsingCaretStyle=function(ef,eg,eh,ei,ej){var ek=dX.createForContent(ef,function(){return eg},ei,ej);ek.set_mode(2);var el=new dT;el.popupMode=2;el.preferUp=true;el.additionalClassNames=['tabUberCaretStyle',eh];el.horizontalAttach=0;el.horizontalAlign=1;el.useCaret=true;ek.options=el;return ek};global.spiff.UberPopupViewModel=dX;var dY=function(){};dY.__typeName='spiff.UnificationClassNames';global.spiff.UnificationClassNames=dY;var dZ=function(){cO.call(this);this.menuClass='tabMenuUnificationTheme dark';this.itemClass='tabMenuItemUnificationTheme';this.dividerClass='tabMenuItemDividerUnificationTheme'};dZ.__typeName='spiff.UnificationDarkMenuTheme';global.spiff.UnificationDarkMenuTheme=dZ;var ea=function(){cO.call(this);this.menuClass='tabMenuUnificationTheme light';this.itemClass='tabMenuItemUnificationTheme';this.dividerClass='tabMenuItemDividerUnificationTheme'};ea.__typeName='spiff.UnificationLightMenuTheme';global.spiff.UnificationLightMenuTheme=ea;var eb=function(ef,eg){this.$c=null;React.Component.call(this,ef,eg);this.state=eb.$0(this.props.initialValue)};eb.__typeName='spiff.VerticalSpinnerComponent';eb.$0=function(ef){return{value:ef,pendingValue:ef,displayValue:ef.toString()}};global.spiff.VerticalSpinnerComponent=eb;var ec=function(){this.styleClass='tab-outline-spinner';this.extraCssClass=null;this.label=null;this.initialValue=0;this.maxValue=null;this.minValue=null;this.maxLength=16;this.stepSize=1;this.disabled=false;this.disabledText=null;this.onValueChanged=null;this.actionDelay=0;this.updateWhenKeyDown=false};ec.__typeName='spiff.VerticalSpinnerProps';global.spiff.VerticalSpinnerProps=ec;var ed=function(ef){this.disposables=new tab.DisposableHolder;this.$0=0;this.$1=null;this.$1$1=null;this.$1$2=null;this.element=null;this.addedToDom=false;tab.Param.verifyValue(ef,'element');this.element=ef;ef.addClass('tab-widget');ef.data('widgetInstance',this);ed.$3++;this.$0=ed.$3};ed.__typeName='spiff.Widget';ed.enableTextSelectionOnElement=function(ef){ef.removeClass('tab-unselectable');ef.addClass(ed.selectableNodeClass);ef.off('.tab-disableSelection')};ed.disableTextSelectionOnElement=function(ef){if(BrowserSupport.BrowserSupport.IsIE()){return}if(BrowserSupport.BrowserSupport.IsMobile()){return}ef.removeClass(ed.selectableNodeClass);ef.addClass('tab-unselectable');if(BrowserSupport.BrowserSupport.SelectStart()){var eg='selectstart'+'.tab-disableSelection';ef.on(eg,function(eh){if(tab.DomUtil.isFocusableTextElement(eh.target)){return}eh.preventDefault()})}};ed.findWidget=function(ef,eg){tab.Param.verifyValue(ef,'element');var eh=ef;var ei;eg=eg||ed;do{ei=eh.data('widgetInstance');if(ss.isValue(ei)&&!ss.isAssignableFrom(eg,ss.getInstanceType(ei))){ei=null}eh=eh.parent('.tab-widget')}while(ss.isNullOrUndefined(ei)&&!eh.is('body')&&eh.length>0);return(ss.isNullOrUndefined(ei)?null:ei)};ed.getWidgets=function(ef,eg){var eh=[];eg=eg||ed;var ei;ef.each(function(ej,ek){ei=$(ek).data('widgetInstance');if(ss.isValue(ei)&&ss.isAssignableFrom(eg,ss.getInstanceType(ei))){eh.push(ei)}});return eh};global.spiff.Widget=ed;var ee=function(){};ee.__typeName='spiff.ZoomScaleUtil';ee.$3=function(){var ef=document.documentElement.clientWidth;var eg=window.innerWidth;if(!tsConfig.is_mobile_device){eg-=17}return ef/eg};ee.$2=function(){return ss.isValue(ee.$7)};ee.$0=function(ef,eg){var eh=eg;if(typeof(eh.data)!=='string'){return}var ei=tab.NonApiCommand.parse(eh.data.toString());if(ei.get_name()==='sf'){var ej=ss.getItem(ei.get_parameters(),0);ee.$5=ss.getItem(ei.get_parameters(),1);var ek=ss.getItem(ei.get_parameters(),2);var el=ss.getItem(ei.get_parameters(),3);var em=ee.$4[ej];delete ee.$4[ej];ee.$7=eh.source;if(!ss.staticEquals(em,null)){em(ee.$5,ek,el)}}};ee.$1=function(ef){var eg=(++ee.$6).toString();ee.$4[eg]=ef;var eh=new tab.NonApiCommand('sf?',[eg]);ee.$7.postMessage(eh.serialize(),'*')};ee.getScaleAsync=function(ef){if(ee.$2()){ee.$1(ef)}else if(!ss.staticEquals(ef,null)){ef(ee.$3(),0,0)}};ee.getScaleSync=function(){if(ee.$2()){ee.$1(null);return ee.$5}else{return ee.$3()}};global.spiff.ZoomScaleUtil=ee;ss.initClass(dq,a,{get_scrollingControl:null,componentDidMount:null,componentWillUnmount:null,render:null},React.Component);ss.initClass(b,a,{get_scrollingControl:function(){var ef=this.refs['iscroll-component'];if(ss.isValue(ef)&&ss.isValue(ef.iScroll)){return new c(ef.iScroll)}return null},componentDidMount:function(){if(!ss.staticEquals(this.props.onScrollingControlRefUpdated,null)){this.props.onScrollingControlRefUpdated(this.get_scrollingControl())}},componentWillUnmount:function(){if(!ss.staticEquals(this.props.onScrollingControlRefUpdated,null)){this.props.onScrollingControlRefUpdated(null)}},render:function(){var ef=b.$0(this.props);return React.createElement(ch,ef,this.props.children)}},dq);ss.initInterface(cj,a,{get_x:null,get_y:null,get_maxScrollX:null,get_maxScrollY:null,get_canScroll:null,scrollBy:null,scrollTo:null,scrollToElement:null,destroy:null,resetPosition:null,refresh:null,handleEvent:null});ss.initClass(c,a,{get_x:function(){return this.$1.x},get_y:function(){return-this.$1.y},get_maxScrollX:function(){return this.$1.maxScrollX},get_maxScrollY:function(){return-this.$1.maxScrollY},get_canScroll:function(){return this.$1.hasHorizontalScroll||this.$1.hasVerticalScroll},scrollBy:function(ef,eg){this.$0(ss.mkdel(this,function(){this.$1.scrollBy(-ef,-eg,0,null)}))},scrollTo:function(ef,eg){this.$0(ss.mkdel(this,function(){this.$1.scrollTo(-ef,-eg,0,null)}))},scrollToElement:function(ef,eg,eh){this.$0(ss.mkdel(this,function(){this.$1.scrollToElement(ef,0,eg,eh)}))},destroy:function(){this.$1.destroy()},resetPosition:function(){this.$1.resetPosition()},refresh:function(){this.$1.refresh()},handleEvent:function(ef){this.$1.handleEvent(ef)},$0:function(ef){window.setTimeout(ss.mkdel(this,function(){this.$1.refresh();ef()}),0)}},null,[cj]);ss.initClass(dL,a,{getElementsBySelector:function(ef){return this.domRoot.find(ef)},getElementBySelector:function(ef){var eg=this.getElementsBySelector(ef);return eg},dispose:function(){this.disposables.dispose();this.domRoot.remove()},addDisposable:function(ef){if(ss.isValue(ef)){this.disposables.add$1(ef)}}},null,[ss.IDisposable]);ss.initInterface(co,a,{get_root:null,get_tabs:null,get_contentArea:null,createTabLabel:null});ss.initClass(d,a,{get_root:function(){return this.domRoot},get_tabs:function(){return this.$1},get_contentArea:function(){return this.$0},createTabLabel:function(ef,eg){return new e}},dL,[ss.IDisposable,co]);ss.initClass(e,a,{},dL,[ss.IDisposable]);ss.initInterface(cb,a,{get_scrollViewPagePosition:null,get_scrollViewSize:null,scrollToElement:null});ss.initClass(f,a,{get_scrollViewPagePosition:function(){return tab.DomUtil.getElementPosition(this.$0.element)},get_scrollViewSize:function(){return{w:tab.DoubleUtil.roundToInt(this.$0.element.outerWidth()),h:tab.DoubleUtil.roundToInt(this.$0.element.outerHeight())}},scrollToElement:function(ef,eg){var eh=ef.offsetTop;var ei=eh+ef.offsetHeight;var ej=this.$0.get_scrollerY();var ek=ej+tab.DoubleUtil.roundToInt(this.$0.element.height());if(eh<ej){var el=((eh<=eg)?0:eh);this.$0.scrollTo(this.$0.get_scrollerX(),el,0,null)}else if(ei>ek){this.$0.scrollTo(this.$0.get_scrollerX(),ej+ei-ek,0,null)}}},null,[cb]);ss.initClass(g,a,{get_scrollViewPagePosition:function(){return tab.DomUtil.getElementPosition(this.$0)},get_scrollViewSize:function(){return{w:this.$0[0].offsetWidth,h:this.$0[0].offsetHeight}},scrollToElement:function(ef,eg){var eh=ef.offsetTop;var ei=eh+ef.offsetHeight;var ej=tab.DoubleUtil.roundToInt(this.$0.scrollTop());var ek=ej+this.$0[0].offsetHeight;if(eh<ej){var el=((eh<=eg)?0:eh);this.$0.scrollTop(el)}else if(ei>ek){this.$0.scrollTop(ej+ei-ek)}}},null,[cb]);ss.initClass(h,a,{refresh:function(){IScroll.prototype.refresh.call(this);if(this.$0){var ef=$(this.$2).find('.iScrollHorizontalScrollbar');ef.toggleClass('noScroll',!this.hasHorizontalScroll)}if(this.$1){var eg=$(this.$2).find('.iScrollVerticalScrollbar');eg.toggleClass('noScroll',!this.hasVerticalScroll)}}},IScroll);ss.initClass(i,a,{});ss.initEnum(j,a,{$0:0,$1:1,$2:2});ss.initClass(k,a,{});ss.initClass(l,a,{$7:function(){return this.$9||(this.$9=this.getElementBySelector('.tabMenuItemNameArea'))}},dL,[ss.IDisposable]);ss.initClass(m,a,{$2:function(ef,eg){switch(ef){case 1:{this.$7.$4=$("<div class='tabMenuItemIcon tabMenuItemCheckIcon'/>");this.$7.domRoot.attr('role','menuitemcheckbox').attr('aria-checked','true').prepend(this.$7.$4);this.$7.$2=true;break}case 2:{this.$7.$4=$("<div class='tabMenuItemIcon tabMenuItemRadioIcon'/>");this.$7.domRoot.attr('role','menuitemcheckbox').attr('aria-checked','true').prepend(this.$7.$4);this.$7.$2=true;break}default:{if(ef===0&&!ss.isNullOrEmptyString(eg)){this.$7.$4=$(ss.formatString("<div class='tabMenuItemIcon {0}'/>",eg));this.$7.domRoot.prepend(this.$7.$4);this.$7.$2=true}break}}return this},$3:function(ef){if(ss.isNullOrEmptyString(ef)){return this}this.$7.$5=$(ss.formatString("<span class='tabMenuItemIconTwo {0}'/>",ef));this.$7.$7().append(this.$7.$5);this.$7.$3=true;return this},$1:function(ef){if(ss.isNullOrEmptyString(ef)){return this}this.$7.$0=$("<div class='tabMenuItemDesc'/>");this.$7.$0.text(ef);this.$7.$7().append(this.$7.$0);this.$7.$1=true;return this},$6:function(ef){if(ss.isNullOrEmptyString(ef)){return this}this.$7.domRoot.attr('title',ef);return this},$4:function(ef){if(ss.isNullOrUndefined(ef)){return this}this.$7.$8=$("<div class='tabMenuItemSubMenuIcon'/>");this.$7.domRoot.append(this.$7.$8);return this},$5:function(ef){for(var eg=0;eg<ef.length;eg++){var eh=ef[eg];if(ss.isValue(eh)){this.$7.domRoot.addClass(eh)}}return this},$0:function(){var ef=this.$7;this.$7=null;return ef},dispose:function(){this.$7.dispose()}},null,[ss.IDisposable]);ss.initInterface(cp,a,{get_domRootElement:null,get_inputElement:null});ss.initClass(n,a,{get_domRootElement:function(){return this.domRoot},$0:function(){return this.$3},get_inputElement:function(){return this.$2},$1:function(){return this.$4}},dL,[ss.IDisposable,cp]);ss.initClass(o,a,{get_domRootElement:function(){return this.domRoot},get_inputElement:function(){return this.$0}},dL,[ss.IDisposable,cp]);ss.initEnum(p,a,{_blank:'_blank',_self:'_self',_top:'_top'},true);ss.initClass(q,a,{});ss.initClass(r,a,{});ss.initClass(de,a,{render:null,shouldComponentUpdate:function(ef,eg){return dd.$0(this,ef,eg)}},React.Component);de.$ctor1.prototype=de.prototype;ss.initClass(s,a,{render:function(){return bj.div({className:'tab-ArrowDropdownButton'},bj.div({className:'arrow down'}))}},de);ss.initClass(x,a,{add_disposed:function(ef){this.$1$1=ss.delegateCombine(this.$1$1,ef)},remove_disposed:function(ef){this.$1$1=ss.delegateRemove(this.$1$1,ef)},add_propertyChanged:function(ef){this.$1$2=ss.delegateCombine(this.$1$2,ef)},remove_propertyChanged:function(ef){this.$1$2=ss.delegateRemove(this.$1$2,ef)},dispose:function(){if(ss.isValue(this.$1$1)){this.$1$1(this);this.$1$1=null}this.$1$2=null;this.disposables.dispose()},notifyPropertyChanged:function(ef){if(!ss.staticEquals(this.$1$2,null)){this.$1$2(this,new tab.PropertyChangedEventArgs(ef))}},raiseEvent:function(ef,eg){if(ss.isValue(ef)){ef(this,eg||ss.EventArgs.Empty)}},raiseActionEvent$1:function(ef){return function(eg,eh){if(ss.isValue(eg)){eg(eh)}}},raiseActionEvent:function(ef){if(ss.isValue(ef)){ef()}}},null,[ss.IDisposable,tab.IViewModel]);ss.initClass(ed,a,{add_disposed:function(ef){this.$1$1=ss.delegateCombine(this.$1$1,ef)},remove_disposed:function(ef){this.$1$1=ss.delegateRemove(this.$1$1,ef)},add_propertyChanged:function(ef){this.$1$2=ss.delegateCombine(this.$1$2,ef)},remove_propertyChanged:function(ef){this.$1$2=ss.delegateRemove(this.$1$2,ef)},get_name:function(){return ss.getTypeFullName(ss.getInstanceType(this))},get_instanceId:function(){return this.$0},get_eventNamespace:function(){return ss.formatString('.{0}_{1}',this.$0,ss.replaceAllString(ss.getTypeFullName(ss.getInstanceType(this)),'.','_'))},get_widgetId:function(){return this.$1},set_widgetId:function(ef){if(!ss.isNullOrEmptyString(this.$1)&&tab.StyleUtil.isValidCssClassName(this.$1)){this.element.removeClass(this.$1)}this.$1=ef;if(!ss.isNullOrEmptyString(this.$1)&&tab.StyleUtil.isValidCssClassName(this.$1)){this.element.addClass(this.$1)}},get_hoverTooltipText:function(){return this.element.attr('title')},set_hoverTooltipText:function(ef){tab.DomUtil.setNativeTooltip(this.element,ef)},enableTextSelection:function(){ed.enableTextSelectionOnElement(this.element);return this},disableTextSelection:function(){ed.disableTextSelectionOnElement(this.element);return this},dispose:function(){this.disposables.dispose();this.element.removeData('widgetInstance');this.element.remove();this.onDisposed(ss.EventArgs.Empty)},toString:function(){return this.get_name()},raisePropertyChanged:function(ef){if(ss.isValue(this.$1$2)){this.$1$2(this,new tab.PropertyChangedEventArgs(ef))}},createNamespacedEventName:function(ef){return ef+this.get_eventNamespace()},stopPropogationOfInputEvents:function(){tab.DomUtil.stopPropagationOfInputEvents(this.element,this.get_eventNamespace())},handleInputEvents:function(ef){tab.DomUtil.handleInputEvents(this.element,this.get_eventNamespace(),ef)},onDisposed:function(ef){if(ss.isValue(this.$1$1)){this.$1$1(this,ss.EventArgs.Empty)}},addToDom:function(ef){ef.append(this.element);this.onAddedToDom()},prependToDom:function(ef){ef.prepend(this.element);this.onAddedToDom()},onAddedToDom:function(){this.addedToDom=true},addClass:function(ef){this.element.addClass(ef)}},null,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(y,a,{add_press:function(ef){this.$2$1=ss.delegateCombine(this.$2$1,ef)},remove_press:function(ef){this.$2$1=ss.delegateRemove(this.$2$1,ef)},add_click:function(ef){this.$2$2=ss.delegateCombine(this.$2$2,ef)},remove_click:function(ef){this.$2$2=ss.delegateRemove(this.$2$2,ef)},add_shiftClick:function(ef){this.$2$3=ss.delegateCombine(this.$2$3,ef)},remove_shiftClick:function(ef){this.$2$3=ss.delegateRemove(this.$2$3,ef)},add_ctrlClick:function(ef){this.$2$4=ss.delegateCombine(this.$2$4,ef)},remove_ctrlClick:function(ef){this.$2$4=ss.delegateRemove(this.$2$4,ef)},add_hover:function(ef){this.$2$5=ss.delegateCombine(this.$2$5,ef)},remove_hover:function(ef){this.$2$5=ss.delegateRemove(this.$2$5,ef)},add_mouseEnter:function(ef){this.$2$6=ss.delegateCombine(this.$2$6,ef)},remove_mouseEnter:function(ef){this.$2$6=ss.delegateRemove(this.$2$6,ef)},add_mouseLeave:function(ef){this.$2$7=ss.delegateCombine(this.$2$7,ef)},remove_mouseLeave:function(ef){this.$2$7=ss.delegateRemove(this.$2$7,ef)},$9:function(ef){this.$2$8=ss.delegateCombine(this.$2$8,ef)},$a:function(ef){this.$2$8=ss.delegateRemove(this.$2$8,ef)},get_disabled:function(){return this.element.prop('disabled')},set_disabled:function(ef){this.element.prop('disabled',ef);this.element.toggleClass(this.$5,ef);if(ef){this.element.removeClass(this.$7)}},get_hoverClass:function(){return this.$7},set_hoverClass:function(ef){this.$7=ef},get_focusClass:function(){return this.$6},set_focusClass:function(ef){this.$6=ef},get_disabledClass:function(){return this.$5},set_disabledClass:function(ef){this.$5=ef},get_context:function(){return this.$4},set_context:function(ef){this.$4=ef},get_tableauClickHandler:function(){return this.$8},tabIndex:function(ef){this.element.attr('tabindex',ef.toString());return this},onClick:function(ef){var eg=ss.mkdel(this,function(){ef(this)});this.add_click(eg);return new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_click(eg)}))},onDoubleClick:function(ef){this.$8.onDoubleClick(ss.mkdel(this,this.handleDoubleClick));var eg=ss.mkdel(this,function(){ef(this)});this.$9(eg);return new tab.CallOnDispose(ss.mkdel(this,function(){this.$a(eg)}))},onShiftClick:function(ef){var eg=ss.mkdel(this,function(){ef(this)});this.add_shiftClick(eg);return new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_shiftClick(eg)}))},onMouseEnter:function(ef){var eg=ss.mkdel(this,function(){ef(this)});this.add_mouseEnter(eg);return new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_mouseEnter(eg)}))},onMouseMove:function(ef){var eg=ss.mkdel(this,function(){ef(this)});this.add_hover(eg);return new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_hover(eg)}))},onMouseLeave:function(ef){var eg=ss.mkdel(this,function(){ef(this)});this.add_mouseLeave(eg);return new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_mouseLeave(eg)}))},$2:function(){this.element.focusin(ss.mkdel(this,this.handleFocusIn)).focusout(ss.mkdel(this,this.handleFocusOut)).keypress(ss.mkdel(this,this.$3));this.disposables.add$1(bz.bindWithDispose(this.element,'mouseenter',ss.mkdel(this,this.handleMouseEnter)));var ef={};ef.hoverDelay=0;bv.setHandler(ef,'mouseleave',ss.mkdel(this,this.handleMouseLeave));bv.setHandler(ef,'hover',ss.mkdel(this,this.handleHover));this.$8=dI.targetAndConfig(this.element.get(0),ef).onClick(ss.mkdel(this,this.handleClick)).onPress(ss.mkdel(this,this.handlePress));this.disposables.add$1(this.$8)},raiseEvent:function(ef){if(ss.isValue(ef)){ef()}},$3:function(ef){if(ef.which===13){bz.stopEvent(ef);this.handleClick(null)}if(ef.which===32){bz.stopEvent(ef);this.handleClick(null)}},handleFocusOut:function(ef){this.element.removeClass(this.$6)},handleFocusIn:function(ef){this.element.addClass(this.$6)},handleHover:function(){if(!this.get_disabled()){this.element.addClass(this.$7)}this.raiseEvent(this.$2$5)},handleMouseEnter:function(ef){this.raiseEvent(this.$2$6)},handleMouseLeave:function(){this.element.removeClass(this.$7);this.raiseEvent(this.$2$7)},handleClick:function(ef){if(this.get_disabled()){return}if(ss.isValue(this.$2$3)&&ss.isValue(ef)&&ef.shiftKey){this.raiseEvent(this.$2$3)}else if(ss.isValue(this.$2$4)&&bz.isCtrlKey(ef)){this.raiseEvent(this.$2$4)}else{this.raiseEvent(this.$2$2)}},handleDoubleClick:function(ef){if(this.get_disabled()){return}this.raiseEvent(this.$2$8)},handlePress:function(){if(this.get_disabled()){return}this.raiseEvent(this.$2$1)}},ed,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(A,a,{},ss.makeGenericType(z,[Object]));ss.initEnum(B,a,{medium:1,large:2});ss.initClass(C,a,{updateWidgetState:function(ef){this.get_widget().set_label(ef.label);this.get_widget().set_disabled(ef.disabled);this.get_widget().set_selected(ef.isSelected)},handleWidgetPropertyChanged:function(ef,eg){if(eg.get_propertyName()==='selected'){if(!ss.staticEquals(this.props.onSelectedChanged,null)&&this.props.isSelected!==this.get_widget().get_selected()){this.props.onSelectedChanged(this.get_widget().get_selected())}}}},ss.makeGenericType(dj,[ct,Object,Object]));ss.initClass(dN,a,{add_enterKeyPressed:function(ef){this.$2$1=ss.delegateCombine(this.$2$1,ef)},remove_enterKeyPressed:function(ef){this.$2$1=ss.delegateRemove(this.$2$1,ef)},add_escapeKeyPressed:function(ef){this.$2$2=ss.delegateCombine(this.$2$2,ef)},remove_escapeKeyPressed:function(ef){this.$2$2=ss.delegateRemove(this.$2$2,ef)},get_text:function(){return this.$6},set_text:function(ef){if(ss.referenceEquals(this.$6,ef)){return}this.get_inputElement().val(ef).trigger('input')},get_inputElement:function(){return this.$5.get_inputElement()},$2:function(ef){var eg=this.get_inputElement().val();if(!ss.referenceEquals(this.$6,eg)){this.$6=eg;this.raisePropertyChanged('text')}},$3:function(ef){if(this.$4){return}switch(ef.which){case 13:{if(!ss.staticEquals(this.$2$1,null)){bz.stopEvent(ef);this.$2$1()}break}case 27:{if(!ss.staticEquals(this.$2$2,null)){this.$2$2();ef.stopPropagation()}break}}}},ed,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(D,a,{add_clearButtonClicked:function(ef){this.$3$1=ss.delegateCombine(this.$3$1,ef)},remove_clearButtonClicked:function(ef){this.$3$1=ss.delegateRemove(this.$3$1,ef)},get_dom:function(){return this.$a},get_searchBoxClearButton:function(){return this.$b},$7:function(){if(!ss.isNullOrEmptyString(this.get_text())){this.$a.get_searchBoxClear().show();this.$a.get_inputElementContainer().addClass('clearButtonOn')}else{this.$a.get_searchBoxClear().hide();this.$a.get_inputElementContainer().removeClass('clearButtonOn')}},$9:function(ef,eg){this.$7()},$8:function(ef){this.set_text('');if(!ss.staticEquals(this.$3$1,null)){this.$3$1()}}},dN,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(E,a,{get_domRootElement:function(){return this.domRoot},get_inputElement:function(){return this.$0},get_inputElementContainer:function(){return this.$1},get_searchBoxClear:function(){return this.$2}},dL,[ss.IDisposable,cp]);ss.initClass(F,a,{});ss.initClass(G,a,{$j:function(ef){this.$1$1=ss.delegateCombine(this.$1$1,ef)},$k:function(ef){this.$1$1=ss.delegateRemove(this.$1$1,ef)},$h:function(ef){this.$1$2=ss.delegateCombine(this.$1$2,ef)},$i:function(ef){this.$1$2=ss.delegateRemove(this.$1$2,ef)},$l:function(ef){this.$1$3=ss.delegateCombine(this.$1$3,ef)},$m:function(ef){this.$1$3=ss.delegateRemove(this.$1$3,ef)},get_target:function(){return this.$g},dispose:function(){this.$8();this.$b.dispose();if(!ss.isValue(this.$g)){return}this.$g.off('.'+this.$c);this.$g=null},onPress:function(ef){this.$j(ef);this.$b.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$k(ef)})));return this},onClick:function(ef){this.$h(ef);this.$b.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$i(ef)})));return this},onRightClick:function(ef){this.$l(ef);this.$b.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$m(ef)})));return this},setTarget:function(ef){this.$g=ef;ef.on(this.$0('touchstart'),ss.mkdel(this,this.$7));this.$b.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){ef.off(this.$0('touchstart'))})));if(tsConfig.is_mobile){if(!BrowserSupport.BrowserSupport.IsTouch()){ef.on(this.$0('mousedown'),ss.mkdel(this,this.$3)).on(this.$0('click'),ss.mkdel(this,this.$2));this.$b.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){ef.off(this.$0('mousedown')).off(this.$0('click'))})))}}else{ef.on(this.$0('mousedown'),ss.mkdel(this,this.$3)).on(this.$0('click'),ss.mkdel(this,this.$2)).on(this.$0('contextmenu'),ss.mkdel(this,this.$2));this.$b.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){ef.off(this.$0('mousedown')).off(this.$0('click')).off(this.$0('contextmenu'))})))}return this},$0:function(ef){return ef+'.'+this.$c},$8:function(){if(ss.isValue(this.$g)){this.$g.off(this.$0('touchend'));this.$g.off(this.$0('touchcancel'))}if(ss.isValue(this.$d)){document.body.removeEventListener('touchmove'.toString(),this.$d,true);this.$d=null}this.$a=tab.MiscUtil.clearTimeout(this.$a)},$3:function(ef){this.$e=ef.pageX;this.$f=ef.pageY;this.$9();if(ss.isValue(this.$1$1)){this.$1$1(ef)}},$1:function(ef){var eg=(ss.isValue(ef)?ef['originalEvent']:null);if(ss.isValue(eg)&&ss.isValue(eg.touches)&&ss.isValue(eg.touches[0])){return eg.touches[0]}return null},$7:function(ef){if(!tsConfig.is_mobile){if(tab.DomUtil.handleTouchEvents(ef.target)){ef.preventDefault()}else{return}}var eg=this.$1(ef);var eh=0;var ei=0;if(ss.isValue(eg)){eh=ss.coalesce(eg.pageX,0);ei=ss.coalesce(eg.pageY,0)}this.$g.on(this.$0('touchend'),ss.mkdel(this,this.$5));this.$g.on(this.$0('touchcancel'),ss.mkdel(this,this.$4));this.$9();if(BrowserSupport.BrowserSupport.AddEventListener()){this.$d=ss.thisFix(ss.mkdel(this,this.$6));document.body.addEventListener('touchmove'.toString(),this.$d,true)}this.$e=eh;this.$f=ei;if(ss.isValue(this.$1$1)){this.$1$1(ef)}},$5:function(ef){if(!tsConfig.is_mobile){if(tab.DomUtil.handleTouchEvents(ef.target)){ef.preventDefault()}else{return}}this.$2(ef)},$9:function(){this.$a=tab.MiscUtil.clearTimeout(this.$a);this.$a=window.setTimeout(ss.mkdel(this,this.$8),300)},$6:function(ef,eg){var eh=eg;if(!tsConfig.is_mobile){if(tab.DomUtil.handleTouchEvents(ef)){eg.preventDefault()}else{return}}var ei=eh.touches[0].pageX;var ej=eh.touches[0].pageY;if(Math.abs(ei-this.$e)>10||Math.abs(ej-this.$f)>10){this.$8()}},$4:function(ef){if(!tsConfig.is_mobile){if(tab.DomUtil.handleTouchEvents(ef.target)){ef.preventDefault()}else{return}}this.$8()},$2:function(ef){ef.stopPropagation();this.$8();if(ef.type==='contextmenu'){ef.preventDefault();if(ss.isValue(this.$1$3)){this.$1$3(ef)}}else{if(ss.isValue(this.$1$2)){this.$1$2(ef)}if(ef.type==='touchend'){F.preventGhostClick(this.$e,this.$f,ef.target)}}}},null,[ss.IDisposable]);ss.initClass(H,a,{render:function(){var ef=$.extend(new Object,this.props);ef.onSelectionChanged=ss.mkdel(this,function(ej){this.onSelect(ej,this.props.onSelectionChanged)});var eg=React.createElement(dt,ef);var eh=new Object;eh.styleClass=this.props.styleClass;eh.isSelecting=this.state.isSelecting;eh.getDesiredHeight=dt.getDesiredHeight;eh.getMinimumWidth=dt.getMinimumWidth;eh.onSelectorToggled=ss.mkdel(this,this.$1);eh.onFocusLost=ss.mkdel(this,this.$0);eh.tabIndex=-1;eh.renderButton=ss.mkdel(this,function(){return React.createElement(dM,{styleClass:this.props.buttonStyleClass,selectionIconClass:this.props.selectedIconClass,selectionText:this.props.selectedText})});var ei=React.createElement(dC,eh,eg);return ei},onSelect:function(ef,eg){var eh=new O;eh.isSelecting=false;this.setState(eh);if(!ss.staticEquals(eg,null)){eg(ef)}},$1:function(){if(!this.props.enabled){var ef=new O;ef.isSelecting=false;this.setState(ef)}else{var eg=new O;eg.isSelecting=!this.state.isSelecting;this.setState(eg)}},$0:function(){var ef=new O;ef.isSelecting=false;this.setState(ef)}},React.Component);ss.initClass(cO,a,{});ss.initClass(I,a,{},cO);ss.initClass(J,a,{get_iconClass:function(){return this.$1$1},set_iconClass:function(ef){this.$1$1=ef},get_name:function(){return this.$1$2},set_name:function(ef){this.$1$2=ef},get_data:function(){return this.$1$3},set_data:function(ef){this.$1$3=ef},get_description:function(){return this.$1$4},set_description:function(ef){this.$1$4=ef},get_title:function(){return this.$1$5},set_title:function(ef){this.$1$5=ef},asMenuItem:function(){return(new cH).data(this).name(this.get_name()).iconClass(this.get_iconClass()).enabled(true).description(this.get_description()).title(this.get_title()).build()}});ss.initClass(K,a,{},cO);ss.initEnum(L,a,{standard:0,dropdown:1,unification:2});ss.initClass(M,a,{},Object);ss.initEnum(N,a,{standard:0,autoFit:1});ss.initClass(O,a,{});ss.initClass(P,a,{},dL,[ss.IDisposable]);ss.initEnum(Q,a,{standard:0,compact:1,unification:2,lineAndArrow:3});ss.initClass(R,a,{$8:function(){this.$c.icon.removeClass('tabComboBoxNoIconPressed');this.$c.domRoot.removeClass(R.pressedClass)},$9:function(ef){if(!this.$d.get_enabled()){return}this.$c.domRoot.addClass(R.pressedClass);if(this.$d.get_showDropdownIcon()){this.$c.icon.addClass('tabComboBoxNoIconPressed')}this.$d.comboClicked(this.$c.domRoot)},$a:function(ef){var eg=0;switch(ef.which){case 40:{eg=1;break}case 38:{eg=-1;break}default:{return}}ef.preventDefault();ef.stopPropagation();var eh=ss.indexOf(this.$d.get_items(),this.$d.get_selectedItem());if(eh<0){return}eh+=eg;if(eh>=0&&eh<this.$d.get_items().length){this.$d.set_selectedItem(this.$d.get_items()[eh])}},$b:function(ef){if(ss.isInstanceOfType(ef,W)){return}this.$c.icon.remove();if(ss.isNullOrUndefined(ef)){var eg=(ss.isValue(this.$d.get_summary())?this.$d.get_summary():'&nbsp;');this.$c.name.html(eg);return}this.$c.icon=$('<span/>').addClass('tabComboBoxIcon').addClass(ef.get_iconClass()).appendTo(this.$c.domRoot);if(!ss.isValue(ef.get_iconClass())){this.$c.domRoot.addClass(R.noIconClass)}this.$c.name.text(ef.get_name());if(!ss.isNullOrEmptyString(ef.get_title())){this.$c.domRoot.attr('title',ef.get_title())}},$7:function(){this.$b(this.$d.get_selectedItem())},$5:function(){this.$c.domRoot.toggleClass(R.disabledClass,!this.$d.get_enabled())},$6:function(){this.$c.domRoot.toggleClass('invalid',this.$d.get_isSelectionInvalid())},onAddedToDom:function(){ed.prototype.onAddedToDom.call(this);if(this.$d.get_sizing()===1){var ef=tab.ObjectRegistry.newView(cM).call(null,[this.$d.get_menu()]);var eg=$('<div>').css({visibility:'hidden',position:'absolute',left:0+'px',top:0+'px'});$(document.body).append(eg);ef.addToDom(eg);this.$c.domRoot.css({width:ef.element.width()+'px'});ef.dispose();eg.remove()}}},ss.makeGenericType(w,[S]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[S])]);ss.initInterface(bX,a,{add_enabledChanged:null,remove_enabledChanged:null,get_enabled:null,set_enabled:null});ss.initClass(S,a,{add_itemsChanged:function(ef){this.$3$1=ss.delegateCombine(this.$3$1,ef)},remove_itemsChanged:function(ef){this.$3$1=ss.delegateRemove(this.$3$1,ef)},add_selectedItemChanged:function(ef){this.$3$2=ss.delegateCombine(this.$3$2,ef)},remove_selectedItemChanged:function(ef){this.$3$2=ss.delegateRemove(this.$3$2,ef)},add_menuHidden:function(ef){this.$3$3=ss.delegateCombine(this.$3$3,ef)},remove_menuHidden:function(ef){this.$3$3=ss.delegateRemove(this.$3$3,ef)},add_enabledChanged:function(ef){this.$3$4=ss.delegateCombine(this.$3$4,ef)},remove_enabledChanged:function(ef){this.$3$4=ss.delegateRemove(this.$3$4,ef)},add_isSelectionInvalidChanged:function(ef){this.$3$5=ss.delegateCombine(this.$3$5,ef)},remove_isSelectionInvalidChanged:function(ef){this.$3$5=ss.delegateRemove(this.$3$5,ef)},get_hasTooltip:function(){return this.$h},set_hasTooltip:function(ef){this.$h=ef},get_theme:function(){return this.$p},set_theme:function(ef){this.$p=ef},get_menu:function(){if(ss.isNullOrUndefined(this.$f)){this.$5()}return this.$f},get_menuTheme:function(){return this.$l},set_menuTheme:function(ef){this.$l=ef},get_sizing:function(){return this.$o},set_sizing:function(ef){this.$o=ef},get_menuStyleClass:function(){return this.$k},set_menuStyleClass:function(ef){this.$k=ef},get_items:function(){return this.$j},get_selectedItem:function(){return this.$m},set_selectedItem:function(ef){if(ss.referenceEquals(this.$m,ef)&&!this.get_allowSetToSameValue()){return}this.$m=ef;this.$b();this.raiseActionEvent$1(J).call(this,this.$3$2,this.$m)},get_summary:function(){return this.$3$6},set_summary:function(ef){this.$3$6=ef},get_showSelectedItem:function(){return this.$n},set_showSelectedItem:function(ef){this.$n=ef},get_showDropdownIcon:function(){return this.$3$7},set_showDropdownIcon:function(ef){this.$3$7=ef},get_enabled:function(){return this.$g},set_enabled:function(ef){if(this.$g===ef){return}this.$g=ef;this.$b();this.raiseActionEvent(this.$3$4)},get_isSelectionInvalid:function(){return this.$i},set_isSelectionInvalid:function(ef){if(this.$i===ef){return}this.$i=ef;this.raiseActionEvent(this.$3$5)},get_additionalMenuClass:function(){return this.$e},set_additionalMenuClass:function(ef){this.$e=ef},get_allowSetToSameValue:function(){return this.$3$8},set_allowSetToSameValue:function(ef){this.$3$8=ef},get_selectedText:function(){return(ss.isValue(this.get_selectedItem())?this.get_selectedItem().get_name():'')},get_selectedIconClass:function(){return(ss.isValue(this.get_selectedItem())?this.get_selectedItem().get_iconClass():'')},$c:function(){var ef=this.get_items();for(var eg=0;eg<ef.length;eg++){var eh=ef[eg];if(!tab.MiscUtil.isNullOrEmpty$3(eh.get_iconClass())){return true}}return false},get_dropdownStyleClass:function(){return this.$3$9},set_dropdownStyleClass:function(ef){this.$3$9=ef},$d:function(){var ef='tab-unification-line-arrow-dropdown';if(!this.get_enabled()){ef+=' disabled'}if(this.$c()){ef+=' hasIcons'}return ef},dispose:function(){if(ss.isValue(this.$f)){this.$f.dispose()}x.prototype.dispose.call(this);this.$f=null},setItems:function(ef){ss.clear(this.$j);var eg=ss.getEnumerator(ef);try{while(eg.moveNext()){var eh=eg.current();this.$j.push(eh)}}finally{eg.dispose()}this.$8();this.$b()},setItemsWithInitialSelection:function(ef,eg){ss.clear(this.$j);var eh=ss.getEnumerator(ef);try{while(eh.moveNext()){var ei=eh.current();this.$j.push(ei)}}finally{eh.dispose()}this.$m=eg;this.$8();this.$b()},addItem:function(ef){this.$j.push(ef);this.$8();this.$b()},clearItems:function(){ss.clear(this.$j);this.$8();this.set_selectedItem(null);this.$b()},$a:function(){return this.$j.length>0&&(this.$g||this.get_sizing()===1)},updateCurrentMenu:function(){if(!this.$a()||!ss.isValue(this.$f)){return}this.$2();this.$f.set_menu(new cF(this.menuItems));this.$f.set_selectedItem(this.selectedMenuItem)},$5:function(){if(!this.$a()){return}this.$2();this.$f=cN.createForMenu(new cF(this.menuItems),ss.mkdel(this,this.$6),this.$3(),ss.mkdel(this,this.$9),null,true);this.$f.set_selectedItem(this.selectedMenuItem);this.$f.set_focusedItem(this.selectedMenuItem)},comboClicked:function(ef){if(!this.$a()){return}this.$5();this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$f.remove_hidden(ss.mkdel(this,this.$9))})));var eg=new dz(ef,true);eg.additionalMenuClass='tabComboBoxMenu';var eh=eg;if(ss.isValue(this.$e)){eh.additionalMenuClass+=' '+this.$e}this.$f.show(eh)},$b:function(){if(this.generateProps){this.incrementProps()}},$2:function(){var ef=[];var eg=null;if(ss.isValue(this.$j)){for(var eh=0;eh<this.$j.length;eh++){var ei=this.$j[eh];if(this.$n||!ss.referenceEquals(ei,this.$m)){var ej=ei.asMenuItem();if(ss.referenceEquals(ei,this.$m)){eg=ej}ef.push(ej)}}}this.menuItems=ef;this.selectedMenuItem=eg},$3:function(){switch(this.$l){case 0:{return new K}case 1:{return new I(this.get_menuStyleClass())}case 2:{return new ea}default:{return new K}}},$9:function(){if(ss.isValue(this.$3$3)){this.$3$3()}},$8:function(){if(ss.isValue(this.$3$1)){this.$3$1()}},$6:function(ef){var eg=ef.data;this.set_selectedItem(eg)},$7:function(ef){this.set_selectedItem(ef.mapSelected(J).call(ef,ss.mkdel(this,function(eg){return this.get_items()[eg]}))[0])},$4:function(ef){return H.createCustomIconElements(ef.get_iconClass())},createUpdatedProps:function(){if(!this.generateProps){return null}var ef=new M;ef.items=_.map(this.get_items(),ss.mkdel(this,function(eg){var eh=new du;eh.label=eg.get_name();eh.getCustomContentBefore=ss.mkdel(this,function(){return this.$4(eg)});eh.tooltip=(!this.get_props().hasTooltip?'':null);return eh}));ef.selection=dA.buildSingleSelectGroupSelection$1(J).call(null,Array.prototype.slice.call(this.get_items()),ss.mkdel(this,function(eg){return ss.equals(eg,this.get_selectedItem())}));ef.selectedText=this.get_selectedText();ef.selectedIconClass=this.get_selectedIconClass();ef.onSelectionChanged=ss.mkdel(this,this.$7);ef.hasTooltip=this.get_hasTooltip();ef.hasAnyIcons=this.$c();ef.buttonStyleClass=this.$d();ef.styleClass=this.get_dropdownStyleClass();ef.enabled=this.get_enabled();return ef}},ss.makeGenericType(v,[M]),[ss.IDisposable,tab.IViewModel,ss.makeGenericType(cf,[M]),bX]);ss.initClass(T,a,{add_inputTextChanged:function(ef){this.$2$1=ss.delegateCombine(this.$2$1,ef)},remove_inputTextChanged:function(ef){this.$2$1=ss.delegateRemove(this.$2$1,ef)},add_listItemClicked:function(ef){this.$2$2=ss.delegateCombine(this.$2$2,ef)},remove_listItemClicked:function(ef){this.$2$2=ss.delegateRemove(this.$2$2,ef)},add_listItemMouseEnter:function(ef){this.$2$3=ss.delegateCombine(this.$2$3,ef)},remove_listItemMouseEnter:function(ef){this.$2$3=ss.delegateRemove(this.$2$3,ef)},add_listItemMouseMove:function(ef){this.$2$4=ss.delegateCombine(this.$2$4,ef)},remove_listItemMouseMove:function(ef){this.$2$4=ss.delegateRemove(this.$2$4,ef)},add_textInputElementClicked:function(ef){this.$2$5=ss.delegateCombine(this.$2$5,ef)},remove_textInputElementClicked:function(ef){this.$2$5=ss.delegateRemove(this.$2$5,ef)},add_textInputClearButtonClicked:function(ef){this.$2$6=ss.delegateCombine(this.$2$6,ef)},remove_textInputClearButtonClicked:function(ef){this.$2$6=ss.delegateRemove(this.$2$6,ef)},add_textInputSearchButtonClicked:function(ef){this.$2$7=ss.delegateCombine(this.$2$7,ef)},remove_textInputSearchButtonClicked:function(ef){this.$2$7=ss.delegateRemove(this.$2$7,ef)},get_template:function(){return this.compositeSearchWidgetTemplate.get_template()},get_domRoot:function(){return this.compositeSearchWidgetTemplate.get_domRootElement()},get_textInputView:function(){return this.compositeSearchWidgetTemplate.get_textInputView()},get_searchButton:function(){return this.compositeSearchWidgetTemplate.get_searchButton()},get_clearButton:function(){return this.compositeSearchWidgetTemplate.get_clearButton()},get_listViewModel:function(){return this.$2$8},set_listViewModel:function(ef){this.$2$8=ef},setPlaceholderText:function(ef){this.get_textInputView().get_inputElement().attr('placeholder',ef)},showList:function(ef,eg,eh){this.removeList();if(ef.length>0){this.set_listViewModel(new dc(ef,eg,0));if(!ss.staticEquals(this.$2$2,null)){this.get_listViewModel().add_selectionChanged(ss.mkdel(this,function(){this.$2$2(this.get_listViewModel().get_firstSelectedItem())}))}if(!ss.staticEquals(this.$2$3,null)){this.get_listViewModel().add_listItemMouseEnter(ss.mkdel(this,function(ej){this.$2$3(ej)}))}if(!ss.staticEquals(this.$2$4,null)){this.get_listViewModel().add_listItemMouseMove(ss.mkdel(this,function(ej){this.$2$4(ej)}))}var ei=new db(this.get_listViewModel());ei.addClass('tabCompositeSearchWidgetList');ei.addToDom(eh||this.get_domRoot())}},showListInsideUberPopup:function(ef,eg,eh,ei,ej){if(ef.length<=0){this.removeList();return}this.set_listViewModel(new dc(ef,eg,0));if(!ss.staticEquals(this.$2$2,null)){this.get_listViewModel().add_selectionChanged(ss.mkdel(this,function(){this.$2$2(this.get_listViewModel().get_firstSelectedItem())}))}if(!ss.staticEquals(this.$2$3,null)){this.get_listViewModel().add_listItemMouseEnter(ss.mkdel(this,function(en){this.$2$3(en)}))}if(!ss.staticEquals(this.$2$4,null)){this.get_listViewModel().add_listItemMouseMove(ss.mkdel(this,function(en){this.$2$4(en)}))}if(ss.isNullOrUndefined(this.$8)){this.$8=dX.createForContent$1(this.get_listViewModel(),eh,null,true);this.$8.set_resizeContent(ss.mkdel(this,this.$5));var ek=(ss.isValue(ei)?['tabCompositeSearchWidgetList',ei]:['tabCompositeSearchWidgetList']);var el=this.$8;var em=new dT;em.additionalClassNames=ek;em.globalTouchWhitelist=[this.get_textInputView().element.get(0),this.get_searchButton().element.get(0),this.get_clearButton().element.get(0)];em.horizontalAttach=1;em.limitPopupHeight=true;em.maxPopupHeight=ej;em.popupMode=1;em.theme=1;em.focusOnShown=false;el.options=em;this.$8.add_hidden(ss.mkdel(this,function(){this.$8=null;this.handleRemoveList()}));this.$8.show()}else{this.$8.set_content(this.get_listViewModel())}},$5:function(ef,eg){var eh=ef.children('.tab-list').eq(0);var ei=eh.prop('scrollHeight');if(ei<1){eg.show();ei=eh.prop('scrollHeight');eg.hide()}var ej=this.$8.get_relativeElement().outerWidth();eh.css('min-width',ej+'px').css('max-width',Math.max(ej,400)+'px');var ek=this.$8.options;if(ss.isValue(ek.maxPopupHeight)&&ei>ss.unbox(ek.maxPopupHeight)){eh.css('overflow-y','scroll')}},removeList:function(){if(ss.isValue(this.$8)){this.$8.hide(false)}else{this.handleRemoveList()}},handleRemoveList:function(){if(ss.isValue(this.get_listViewModel())){this.get_listViewModel().dispose();this.set_listViewModel(null)}},$2:function(){this.get_textInputView().get_inputElement().focus();this.get_textInputView().set_text('');if(!ss.staticEquals(this.$2$6,null)){this.$2$6()}},$6:function(){if(!ss.staticEquals(this.$2$7,null)){this.$2$7()}},setSearchText:function(ef){this.$7=true;this.get_textInputView().set_text(ef);this.$7=false},$3:function(ef,eg){if(!ss.staticEquals(this.$2$1,null)&&!this.$7){this.$2$1(this.get_textInputView().get_text())}},$4:function(ef){this.get_textInputView().get_inputElement().get(0).focus();if(!ss.staticEquals(this.$2$5,null)){this.$2$5()}}},ed,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(U,a,{});ss.initInterface(bO,a,{get_template:null,get_domRootElement:null,get_textInputView:null,get_searchButton:null,get_clearButton:null,disposeTemplate:null});ss.initClass(V,a,{get_domRootElement:function(){return this.domRoot},get_template:function(){return this},get_textInputView:function(){return this.searchTextInputView},get_searchButton:function(){return this.$1},get_clearButton:function(){return this.$0},disposeTemplate:function(){this.dispose()}},dL,[ss.IDisposable,bO]);ss.initClass(W,a,{get_domRoot:function(){return this.$0},asMenuItem:function(){return ba.newCustomMenuItem(this.get_domRoot())}},J);ss.initClass(X,a,{setCursor:function(ef){ef.css('cursor',this.$0)}});ss.initClass(cl,a,{},dL,[ss.IDisposable]);ss.initClass(Y,a,{},cl,[ss.IDisposable]);ss.initClass(dl,a,{get_scrollbarBuffer:null,get_scrollerX:null,get_scrollerY:null,scrollTo:null,scrollToElement:null},ss.makeGenericType(w,[dm]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[dm])]);ss.initClass(cm,a,{get_scrollerX:function(){return(ss.isNullOrUndefined(this.scroller)?0:-this.scroller.x)},get_scrollerY:function(){return(ss.isNullOrUndefined(this.scroller)?0:-this.scroller.y)},get_dom:function(){return this.get_template()},get_scrollableViewModel:function(){return this.get_viewModel()},get_scrollbarBuffer:null,get_verticalScrollbar:null,get_horizontalScrollbar:null,addScroller:function(){this.createScroller();this.postCreationScrollerSetup();this.get_dom().scroll.toggleClass('tabScrollerCanScrollX',this.get_scrollableViewModel().get_scrollX());this.get_dom().scroll.toggleClass('tabScrollerCanScrollY',this.get_scrollableViewModel().get_scrollY())},createScroller:null,postCreationScrollerSetup:function(){this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.scroller.destroy()})));this.scroller.on('scrollStart',ss.mkdel(this,this.$8));this.scroller.on('scrollEnd',ss.mkdel(this,this.$7));this.get_dom().scroll.addClass('tabScrollerIScroll');this.disposables.add$1(G.targetAndClick(this.get_verticalScrollbar(),function(ef){ef.stopPropagation()}));this.disposables.add$1(G.targetAndClick(this.get_horizontalScrollbar(),function(ef){ef.stopPropagation()}));this.get_dom().domRoot.on(BrowserSupport.BrowserSupport.MouseWheelEvent(),function(ef){ef.stopPropagation()})},setUpEvents:function(){this.get_scrollableViewModel().add_contentChanged(ss.mkdel(this,this.$5));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_scrollableViewModel().remove_contentChanged(ss.mkdel(this,this.$5))})));this.get_scrollableViewModel().add_refresh(ss.mkdel(this,this.handleRefresh));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_scrollableViewModel().remove_refresh(ss.mkdel(this,this.handleRefresh))})))},onAddedToDom:function(){ed.prototype.onAddedToDom.call(this);this.addNewContent()},$5:function(){this.get_dom().content.empty();this.addNewContent()},addNewContent:null,handleRefresh:function(){if(this.get_viewModel().get_hasScrollBars()){this.scroller.refresh();this.$6()}else{this.get_verticalScrollbar().addClass('noScroll');this.get_horizontalScrollbar().addClass('noScroll')}},$6:function(){this.get_verticalScrollbar().removeClass('noScroll');if(!this.scroller.hasVerticalScroll){this.get_verticalScrollbar().addClass('noScroll')}this.get_horizontalScrollbar().removeClass('noScroll');if(!this.scroller.hasHorizontalScroll){this.get_horizontalScrollbar().addClass('noScroll')}},$8:function(){if(tsConfig.is_mobile&&(this.scroller.directionX===0||!this.scroller.hasHorizontalScroll)&&(this.scroller.directionY===0||!this.scroller.hasVerticalScroll)){return}if(BrowserSupport.BrowserSupport.MouseCapture()){tab.DomUtil.setCapture(this.get_dom().scroll[0],true);this.scrollEndCleanup.add$1(new tab.CallOnDispose(function(){tab.DomUtil.releaseCapture()}))}else if(BrowserSupport.BrowserSupport.AddEventListener()&&!tsConfig.is_mobile){var ef=ss.mkdel(this,function(eh){this.sendEventToScroller(eh)});var eg=ss.mkdel(this,function(eh){var ei=eh.toElement;if(ss.isNullOrUndefined(ei)||ei.nodeName==='HTML'){if('createEvent'in document){var ej=document.createEvent('MouseEvent');ej.initEvent('mouseup',false,false);this.sendEventToScroller(ej)}}});document.addEventListener('mousemove',ef,true);document.addEventListener('mouseup',ef,true);document.addEventListener('mouseout',eg,true);this.scrollEndCleanup.add$1(new tab.CallOnDispose(function(){document.removeEventListener('mousemove',ef,true);document.removeEventListener('mouseup',ef,true);document.removeEventListener('mouseout',eg,true)}))}this.get_dom().scroll.addClass('tabScrolling')},sendEventToScroller:function(ef){this.scroller.handleEvent(ef);for(var eg=0;eg<this.scroller.indicators.length;eg++){var eh=this.scroller.indicators[eg];if(!ss.referenceEquals(ef.type,'mousemove'.toString())||eh.moved){eh.handleEvent(ef)}}},$7:function(){this.scrollEndCleanup.dispose();this.get_dom().scroll.removeClass('tabScrolling')},scrollTo:function(ef,eg,eh,ei){this.scroller.scrollTo(-ef,-eg,eh,ei)},scrollToElement:function(ef,eg,eh,ei){this.scroller.scrollToElement(ef,eg,eh,ei)}},dl,[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[dm])]);ss.initClass(Z,a,{get_scrollbarBuffer:function(){return 0},get_customDom:function(){return this.get_template()},get_verticalScrollbar:function(){return this.get_customDom().verticalScrollbar},get_horizontalScrollbar:function(){return this.get_customDom().horizontalScrollbar},$9:function(){this.get_scrollableViewModel().get_indicatorOptions().resize=false;this.get_scrollableViewModel().add_refresh(ss.mkdel(this,this.$c));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_scrollableViewModel().remove_refresh(ss.mkdel(this,this.$c))})));if(!tsConfig.is_mobile){this.get_scrollableViewModel().get_indicatorOptions().interactive=true}if(this.get_scrollableViewModel().get_scrollY()){this.get_scrollableViewModel().get_indicatorOptions().el=this.get_verticalScrollbar()[0]}else if(this.get_scrollableViewModel().get_scrollX()){this.get_scrollableViewModel().get_indicatorOptions().el=this.get_horizontalScrollbar()[0]}},$a:function(){if(this.get_scrollableViewModel().isCenteredVertically){this.get_customDom().contentWindow.addClass('centeredVertically')}if(this.get_scrollableViewModel().get_hasScrollBars()){this.get_customDom().contentWindow.addClass('scrollable')}},createScroller:function(){this.scroller=new IScroll(this.get_customDom().contentWindow[0],this.get_scrollableViewModel().get_options())},$b:function(){if(BrowserSupport.BrowserSupport.AddEventListener()){var ef=ss.mkdel(this,function(eg){this.sendEventToScroller(eg)});if(!tsConfig.is_mobile){this.get_template().domRoot[0].addEventListener(BrowserSupport.BrowserSupport.MouseWheelEvent(),ef,false);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_template().domRoot[0].removeEventListener(BrowserSupport.BrowserSupport.MouseWheelEvent(),ef,false)})))}}},addNewContent:function(){this.get_dom().content.append(this.get_scrollableViewModel().get_content());this.$c();this.handleRefresh()},$c:function(){if(this.get_scrollableViewModel().get_scrollY()){this.get_customDom().verticalScrollbarIndicator.height(Z.$0(tab.DoubleUtil.roundToInt(this.get_customDom().verticalScrollbar.height()),tab.DoubleUtil.roundToInt(this.get_customDom().contentWindow.height()),tab.DoubleUtil.roundToInt(this.get_customDom().content.height()))+'px')}else if(this.get_scrollableViewModel().get_scrollX()){this.get_customDom().horizontalScrollbarIndicator.width(Z.$0(tab.DoubleUtil.roundToInt(this.get_customDom().horizontalScrollbar.width()),tab.DoubleUtil.roundToInt(this.get_customDom().contentWindow.width()),tab.DoubleUtil.roundToInt(this.get_customDom().content.width()))+'px')}}},cm,[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[dm])]);ss.initClass(cG,a,{get_selectable:function(){return this.enabled&&!this.isDivider}});ss.initClass(ba,a,{get_domRoot:function(){return this.$0},set_domRoot:function(ef){this.$0=ef}},cG);ss.initClass(bb,a,{},cl,[ss.IDisposable]);ss.initClass(bc,a,{get_scrollbarSize:function(){return 9},get_scrollbarBuffer:function(){return 10},get_verticalScrollbar:function(){return this.$a},get_horizontalScrollbar:function(){return this.$9},createScroller:function(){this.scroller=new IScroll(this.get_dom().scroll[0],this.get_scrollableViewModel().get_options());if(this.get_scrollableViewModel().get_scrollY()){this.get_dom().content.css('margin-right',this.get_scrollbarBuffer()+'px')}if(this.get_scrollableViewModel().get_scrollX()){this.get_dom().content.css('margin-bottom',this.get_scrollbarBuffer()+'px')}this.$a=this.get_dom().scroll.find('.iScrollVerticalScrollbar').css('width',this.get_scrollbarSize()+'px');this.$9=this.get_dom().scroll.find('.iScrollHorizontalScrollbar').css('height',this.get_scrollbarSize()+'px')},addNewContent:function(){this.get_dom().content.append(this.get_scrollableViewModel().get_content());this.handleRefresh()}},cm,[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[dm])]);ss.initInterface(bW,a,{get_feedbackType:null,dragOver:null,dragExit:null,acceptDrop:null,getDropTarget:null,getDropCursor:null});ss.initClass(bd,a,{get_feedbackType:function(){return(!ss.staticEquals(this.onFeedbackType,null)?this.onFeedbackType():'dropfeedbackuponentry')},dragOver:function(ef){if(!ss.staticEquals(this.canAccept,null)&&!this.canAccept(ef)){return null}return(!ss.staticEquals(this.onDragOver,null)?this.onDragOver(ef,this):this)},dragExit:function(ef){if(!ss.staticEquals(this.onDragExit,null)){this.onDragExit(ef)}},acceptDrop:function(ef){if(!ss.staticEquals(this.canAccept,null)&&!this.canAccept(ef)){return $.Deferred().resolve(false)}return(!ss.staticEquals(this.onAcceptDrop,null)?this.onAcceptDrop(ef):$.Deferred().resolve(false))},getDropTarget:function(ef){return(!ss.staticEquals(this.onGetDropTarget,null)?this.onGetDropTarget(ef,this):this)},getDropCursor:function(ef){return(!ss.staticEquals(this.onGetDropCursor,null)?this.onGetDropCursor(ef):X.noOp)}},null,[bW]);ss.initClass(be,a,{add_closing:function(ef){this.$2$1=ss.delegateCombine(this.$2$1,ef)},remove_closing:function(ef){this.$2$1=ss.delegateRemove(this.$2$1,ef)},add_closed:function(ef){this.$2$2=ss.delegateCombine(this.$2$2,ef)},remove_closed:function(ef){this.$2$2=ss.delegateRemove(this.$2$2,ef)},add_resizeMove:function(ef){this.$2$3=ss.delegateCombine(this.$2$3,ef)},remove_resizeMove:function(ef){this.$2$3=ss.delegateRemove(this.$2$3,ef)},add_resizeEnd:function(ef){this.$2$4=ss.delegateCombine(this.$2$4,ef)},remove_resizeEnd:function(ef){this.$2$4=ss.delegateRemove(this.$2$4,ef)},get_body:function(){return this.$e},set_body:function(ef){if(ss.referenceEquals(this.$e,ef)){return}if(ss.isValue(this.$e)){this.$e.off(this.get_eventNamespace())}this.$e=ef;this.element.find('.tab-dialogBodyContainer').html('').append(ef);this.setInitialFocus()},get_bodyHeight:function(){return tab.DoubleUtil.roundToInt(this.$g.height())},get_position:function(){return{x:this.$m,y:this.$n}},set_position:function(ef){if(this.get_maximized()){return}if(ss.isNullOrUndefined(ef)){this.positionInWindow()}else{this.$m=ef.x;this.$n=ef.y;tab.DomUtil.setElementPosition(this.$g,this.$m,this.$n,null,false);this.$g.css('position','fixed')}this.raisePropertyChanged('position')},get_isActive:function(){return this.$h},set_isActive:function(ef){if(ef!==this.$h){this.$h=ef;this.$g.toggleClass('active',ef);this.raisePropertyChanged('isActive')}},get_draggable:function(){return!this.get_maximized()&&ss.isValue(this.$l)},get_resizeable:function(){return!this.get_maximized()&&ss.isValue(this.$o)},set_resizeable:function(ef){if(this.get_maximized()){return}if(ef){if(ss.isNullOrUndefined(this.$o)){this.$o=new dk(this.$p,this.$g,'bottomRight');this.$o.add_endAction(ss.mkdel(this,this.$b));this.$o.add_moveAction(ss.mkdel(this,this.$c))}this.$g.addClass('resizeable')}else{if(ss.isValue(this.$o)){this.$o.remove_endAction(ss.mkdel(this,this.$b));this.$o.remove_moveAction(ss.mkdel(this,this.$c));this.$o.dispose();this.$o=null}this.$g.removeClass('resizeable')}},get_zIndex:function(){return tab.DomUtil.getComputedZIndex(this.element[0])},set_zIndex:function(ef){this.element.css('z-index',ef.toString())},get_maximized:function(){return this.$j},set_maximized:function(ef){this.$j=ef;this.$g.toggleClass('maximized',ef)},get_startingPositionX:function(){return this.$2$5},set_startingPositionX:function(ef){this.$2$5=ef},get_startingPositionY:function(){return this.$2$6},set_startingPositionY:function(ef){this.$2$6=ef},get_titleUnescaped:function(){return this.get_titleElement().text()},set_titleUnescaped:function(ef){this.get_titleElement().text(ef);if(this.showTitleTooltip){this.get_titleElement().attr('title',this.get_titleElement().text())}},get_isShown:function(){return this.$i},get_setFocusOnShow:function(){return this.$r},set_setFocusOnShow:function(ef){this.$r=ef},get_closeButton:function(){return this.$f},get_closeButtonVisible:function(){return this.element.find('.tab-dialogCloseButton').is(':visible')},set_closeButtonVisible:function(ef){if(ef){this.element.find('.tab-dialogCloseButton').show()}else{this.element.find('.tab-dialogCloseButton').hide()}},get_stayInWindow:function(){return this.get_stayInWindow()},set_stayInWindow:function(ef){if(ef&&!this.$t){this.$2()}else if(!ef){this.$9()}this.$t=ef},get_useClosingAnimation:function(){return this.$v},set_useClosingAnimation:function(ef){this.$v=ef},get_dialogElement:function(){return this.$g},get_titleBarElement:function(){return this.$u},get_titleElement:function(){return this.element.find('.tab-dialogTitle')},get_resizerElement:function(){return this.$p},configMoveDragSource:function(ef){if(ss.isValue(this.$l)){throw new ss.Exception('dialog can only be configured once.')}this.$l=ef(this);if(ss.isValue(this.$l)){this.$l.add_endAction(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$l.remove_endAction(ss.mkdel(this,this.$8));this.$l.dispose()})))}},showSpinner:function(){this.$s.show()},hideSpinner:function(){this.$s.hide()},show:function(){this.ensureAttachedAndSized();this.element.show();this.$i=true;this.moveToTop();if(this.get_setFocusOnShow()){this.setInitialFocus()}this.set_isActive(true)},close:function(ef){this.$a();if(!this.get_isShown()){if(!ss.staticEquals(ef,null)){ef()}return}var eg=new ss.CancelEventArgs;this.onClosing(eg);if(eg.cancel){return}tab.DomUtil.blur();this.$d=ef;if(this.get_useClosingAnimation()){this.element.fadeOut('fast',ss.mkdel(this,this.$3))}else{this.element.hide();this.$3()}},closeAndDispose:function(){this.close(ss.mkdel(this,this.dispose))},$3:function(){this.detach();if(!ss.staticEquals(this.$d,null)){this.$d();this.$d=null}this.onClosed(new ss.EventArgs)},onClosing:function(ef){if(!ss.staticEquals(this.$2$1,null)){this.$2$1(this,ef)}},onClosed:function(ef){if(!ss.staticEquals(this.$2$2,null)){this.$2$2(this,ef)}},isAttached:function(){return ss.referenceEquals(this.element.parent().get(0),document.body)},ensureAttachedAndSized:function(){if(!this.isAttached()){this.element.appendTo(document.body);this.bindToEvents()}this.positionInWindow()},bindToEvents:function(){this.element.on(this.createNamespacedEventName('keydown'),ss.mkdel(this,this.onKeyDown))},$a:function(){this.$k=false;this.$q=false},$4:function(ef,eg){if(!this.$i){return}this.$a();this.$q=true;if(ss.isValue(ef)&&!tab.DomUtil.isEqualOrAncestorOf(this.get_closeButton().element[0],ef.target)&&tab.DomUtil.isEqualOrAncestorOf(this.element[0],ef.target)){this.moveToTop();this.$k=true}},$5:function(ef,eg){if(!this.$i||!this.$q){return}if(this.$k&&tab.DomUtil.isEqualOrAncestorOf(this.element.get(0),ef.target)||ss.isNullOrUndefined(ef)){if(!this.get_isActive()){this.set_isActive(true)}}else{if($('body').children('.tab-glass').length!==0){this.$a();return}this.set_isActive(false)}},unbindEvents:function(){this.element.off(this.get_eventNamespace())},$2:function(){cY.add_orientationChanged(ss.mkdel(this,this.ensureOnScreen));$(window).on(this.createNamespacedEventName('resize'),ss.mkdel(this,function(){this.ensureOnScreen()}))},$9:function(){cY.remove_orientationChanged(ss.mkdel(this,this.ensureOnScreen));$(window).off(this.createNamespacedEventName('resize'))},detach:function(){this.$i=false;this.element.hide();this.element.detach();this.unbindEvents();if(ss.referenceEquals(be.$9,this)){be.$9=null}},dispose:function(){if(ss.isValue(this.$f)){this.$f.remove_click(ss.mkdel(this,this.$7));this.$f.dispose();this.$f=null}if(ss.isValue(this.$o)){this.$o.remove_endAction(ss.mkdel(this,this.$b));this.$o.remove_moveAction(ss.mkdel(this,this.$c));this.$o.dispose();this.$o=null}this.$9();this.$i=false;this.$2$2=null;this.$2$1=null;this.unbindEvents();ed.prototype.dispose.call(this);if(ss.referenceEquals(be.$9,this)){be.$9=null}},setInitialFocus:function(){if(this.$i){var ef=this.element.find('.tab-dialogBodyContainer :tabbable');if(ef.length>0){ef.eq(0).focus()}else{this.$g.eq(0).focus()}}},ensureOnScreen:function(){if(!this.get_isShown()||this.get_maximized()){return}dB.getViewport(ss.mkdel(this,function(ef){if(ss.isNullOrUndefined(ef)||ss.isNullOrUndefined(ef.get_dimensions())){return}var eg=tab.DoubleUtil.roundToInt(this.$g.outerWidth(true));var eh=tab.DoubleUtil.roundToInt(this.$g.outerHeight(true));if(this.get_resizeable()){if(eg>ef.get_dimensions().w){var ei=tab.DoubleUtil.roundToInt(this.$g.width());this.$g.width(ef.get_dimensions().w-(eg-ei));eg=ef.get_dimensions().w}if(eh>ef.get_dimensions().h){var ej=tab.DoubleUtil.roundToInt(this.$g.height());this.$g.height(ef.get_dimensions().h-(eh-ej));eh=ef.get_dimensions().h}}var ek=null;if(this.$m+eg>ef.get_dimensions().w){ek=Math.max(0,ef.get_dimensions().w-eg)}var el=null;if(this.$n+eh>ef.get_dimensions().h){el=Math.max(0,ef.get_dimensions().h-eh)}if(ss.isValue(ek)||ss.isValue(el)){var em=ek;if(ss.isNullOrUndefined(em)){em=this.$m}ek=em;var en=el;if(ss.isNullOrUndefined(en)){en=this.$n}el=en;this.set_position({x:ss.unbox(ek),y:ss.unbox(el)})}}))},positionInWindow:function(){this.positionInWindow$1(0,0)},positionInWindow$1:function(ef,eg){if(this.get_maximized()){return}dB.getViewport(ss.mkdel(this,function(eh){var ei=0;var ej=0;var ek=tab.DoubleUtil.roundToInt(this.$g.outerWidth(true))+ef;var el=tab.DoubleUtil.roundToInt(this.$g.outerHeight(true))+eg;var em=tab.DoubleUtil.roundToInt($(window).width());var en=tab.DoubleUtil.roundToInt($(window).height());var eo=0;var ep=0;if(ss.isValue(eh.get_dimensions())){em=eh.get_dimensions().w;en=eh.get_dimensions().h;var eq=new tab.WindowHelper(window.self);eo=eh.get_dimensions().l-eq.get_pageXOffset();ep=eh.get_dimensions().t-eq.get_pageYOffset()}if(ss.isValue(this.get_startingPositionX())){var er=Math.min(ss.unbox(this.get_startingPositionX())+ek,em);ei=Math.max(0,er-ek)}else{ei=Math.max(0,Math.round((em-ek)/2)+eo)}if(ss.isValue(this.get_startingPositionY())){var es=Math.min(ss.unbox(this.get_startingPositionY())+el,en);ej=Math.max(0,es-el)}else{ej=Math.max(0,Math.round((en-el)/2)+ep)}this.set_position({x:ei,y:ej})}))},moveToTop:function(){if(!this.$i){return}this.set_isActive(true);if(ss.isNullOrUndefined(be.$9)){be.$9=this}else if(!ss.referenceEquals(be.$9,this)){be.$9.set_isActive(false);be.$9=this;this.element.appendTo(document.body);tab.DomUtil.blur()}},$b:function(ef){if(!ss.staticEquals(this.$2$4,null)){this.$2$4()}this.set_isActive(true);this.$a()},$c:function(ef){if(!ss.staticEquals(this.$2$3,null)){this.$2$3()}},$8:function(ef){this.set_position(tab.PointUtil.fromPosition(this.$g.position()));this.set_isActive(true);this.$a()},$7:function(){this.close(null)},onKeyDown:function(ef){if(ef.which===9){this.$6(ef);return}},$6:function(ef){var eg=this.element.find(':tabbable');var eh=eg.filter(':first');var ei=eg.filter(':last');if(ss.referenceEquals(ef.target,eh[0])&&ef.shiftKey){ei.focusDelayed(1);bz.stopEvent(ef)}else if(ss.referenceEquals(ef.target,ei[0])&&!ef.shiftKey){eh.focusDelayed(1);bz.stopEvent(ef)}}},ed,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(bF,a,{$1:function(){return'tab-'+this.type},get_zoomAdjustedSlop:function(){var ef=ee.getScaleSync();return ss.round(this.$3/ef)},update:function(ef){if(ss.isValue(ef)){$.extend(this.$2,ef);$(this.$2.domElem).data(this.$1(),this)}},start:function(ef){},move:function(ef){},end:function(ef){},cancel:function(){},$0:function(ef,eg,eh){if(bv.isHandling(this.$2,ef)){var ei=eg;$.extend(ei,eh);ei.gestureName=this.type;ei.$1=ef;var ej=dJ.$0(this.$2,ef);ej(ei)}},dispose:function(){this.cancel();$(this.$2.domElem).removeData(this.$1())}},null,[ss.IDisposable]);ss.initClass(bf,a,{start:function(ef){var eg=ef.touches[0];if(ef.touches.length!==this.numTouches){this.reset();return}var eh=this.$d(ef);if(!this.$f(bH.fireFirstTouch,ef)){return}this.$0('firstTouch',ef,eh);this.$j=eg.pageX;this.$k=eg.pageY;this.$h=true;this.pressTimer=tab.MiscUtil.clearTimeout(this.pressTimer);if(!ss.isValue(this.$g)){this.$i=(new Date).getTime();this.potentialPressTimer=window.setTimeout(ss.mkdel(this,function(){this.$7(ef,eh)}),500);this.pressTimer=window.setTimeout(ss.mkdel(this,function(){this.$8(ef,eh)}),750)}},move:function(ef){if(this.$e(ef)){this.reset()}if(ef.type==='touchmove'){this.$0('touchMove',ef,this.$d(ef))}},end:function(ef){var eg=this.$d(ef);if(this.isActivePress){this.$9(ef,eg)}this.$4();if(this.$h){if(ss.isValue(this.$g)&&ss.unbox(this.$g)){this.$5(ef,eg)}else{this.$b(ef,eg)}}if(ef.type==='contextmenu'){if(!this.$f(bH.fireRightClick,ef)){return}this.$a(ef,eg)}if(ef.touches.length===0){if(!this.$f(bH.fireLastTouch,ef)){return}this.$0('lastTouch',ef,eg)}},cancel:function(){this.reset()},reset:function(){this.$4();this.$h=false;this.$g=null;this.isPotentialPress=false;this.isActivePress=false;this.doubleTapTimer=tab.MiscUtil.clearTimeout(this.doubleTapTimer)},$6:function(ef,eg,eh,ei){this.$0(ef,eg,eh);if(ss.isValue(ei)&&ei['reset']===true){this.reset()}},$5:function(ef,eg){this.doubleTapTimer=tab.MiscUtil.clearTimeout(this.doubleTapTimer);this.$6('doubleTap',ef,eg,ss.mkdict(['reset',true]))},$8:function(ef,eg){this.isPotentialPress=false;if(!this.$f(bH.firePress,ef)){return}this.$6('press',ef,eg,ss.mkdict(['reset',true]));this.isActivePress=true},$7:function(ef,eg){this.isPotentialPress=true;this.$6('potentialPress',ef,eg)},$9:function(ef,eg){this.$6('pressEnd',ef,eg);this.isActivePress=false},$4:function(){this.potentialPressTimer=tab.MiscUtil.clearTimeout(this.potentialPressTimer);this.pressTimer=tab.MiscUtil.clearTimeout(this.pressTimer);if(this.isPotentialPress){this.$6('cancelPotentialPress',{},null)}},$b:function(ef,eg){this.$g=true;if(!this.$f(bH.fireTap,ef)){return}if(bv.isHandling(this.$2,'doubleTap')){this.doubleTapTimer=window.setTimeout(ss.mkdel(this,function(){this.reset();this.$0('cancelPotentialDoubleTap',ef,eg)}),390-this.$c())}else{this.reset()}this.$0('tap',ef,eg)},$a:function(ef,eg){this.$0('rightClick',ef,eg)},$f:function(ef,eg){var eh=false;var ei=ss.mkdel(this,function(ej){this.reset();if(ej){bz.stopEvent(eg)}eh=true});ef(eg,ei);return!eh},$c:function(){var ef=(new Date).getTime()-this.$i;return ef},$e:function(ef){var eg=ef.changedTouches[0];var eh=this.get_zoomAdjustedSlop();return Math.abs(eg.pageX-this.$j)>eh||Math.abs(eg.pageY-this.$k)>eh},$d:function(ef){var eg={};eg.pageX=ef.changedTouches[0].pageX;eg.pageY=ef.changedTouches[0].pageY;eg.clientX=ef.changedTouches[0].clientX;eg.clientY=ef.changedTouches[0].clientY;eg.startX=ef.changedTouches[0].pageX;eg.startY=ef.changedTouches[0].pageY;return eg}},bF,[ss.IDisposable]);ss.initClass(bg,a,{asMenuItem:function(){return cG.newDivider()}},J);ss.initClass(bh,a,{get_glass:function(){return this.$y},ensureAttachedAndSized:function(){if(ss.isValue(this.$y)||this.isAttached()){return}if(this.$z){this.$y=new bG;this.$y.set_opaque(true);this.$y.show();this.element.css('z-index',(this.$y.get_zIndex()+1).toString())}be.prototype.ensureAttachedAndSized.call(this)},bindToEvents:function(){be.prototype.bindToEvents.call(this);this.disposables.add$1(bz.bindWithDispose($(window),'resize',ss.mkdel(this,this.onWindowResize)));this.disposables.add$1(bz.bindWithDispose($(window),'keydown',ss.mkdel(this,this.onDocumentKeyDown)))},detach:function(){this.$x();be.prototype.detach.call(this)},dispose:function(){this.$x();if(ss.isValue(this.template)){this.template.dispose();this.template=null}be.prototype.dispose.call(this)},$x:function(){if(this.$z&&ss.isValue(this.$y)){this.$y.dispose();this.$y=null}},$w:function(){this.configMoveDragSource(be.defaultStationaryDialogConfigurer);if(tsConfig.is_mobile){this.set_startingPositionY(100);this.set_startingPositionX(0);this.get_dialogElement().css('height','50%')}else{this.set_startingPositionX(2000);this.set_startingPositionY(this.$A);this.get_dialogElement().css('height','95%')}},onWindowResize:function(ef){this.positionInWindow()},onDocumentKeyDown:function(ef){if(ef.which===27){this.close(null);ef.preventDefault();return}}},be,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initEnum(bi,a,{useScrollSize:'useScrollSize',useClientSize:'useClientSize'},true);ss.initClass(bj,a,{});ss.initInterface(cc,a,{handleCapturedMouseMove:null,handleCapturedMouseComplete:null});ss.initClass(bk,a,{start:function(ef){var eg=ef.touches[0];if(ss.isValue(ef.target)&&ef.target.tagName.toUpperCase()==='IMG'&&!tsConfig.is_mobile){ef.preventDefault()}if(ef.touches.length!==this.numTouches){if(this.$a){this.$0('dragEnd',ef,this.$b)}this.$7();this.$9=true;return}if(ss.isValue(this.$c)&&!BrowserSupport.BrowserSupport.IsTouch()){this.end(ef)}this.$9=false;this.$c=this.$4(eg);this.$b=this.$c;this.isPotentialPress=false;if(bv.isHandling(this.$2,'potentialPress')){this.$8()}},move:function(ef){if(this.$9){return}if(this.isPotentialPress&&ef.touches.length===this.numTouches){ef.preventDefault()}this.$b=this.$5(ef);if(this.$a){this.$0('dragMove',ef,this.$b)}else if(this.$6(ef)){this.$a=true;this.$0('dragStart',ef,this.$b);this.$0('dragMove',ef,this.$b);if(ss.isValue(this.$2.dragEnd)){cQ.setCapture(document.body,this,false)}}},end:function(ef){var eg;if(!this.$a){var eh=ef.touches.length===this.numTouches&&ss.isValue(ef.touches[0].identifier)&&this.$6(ef);if(!eh){this.$7();return}this.$c=this.$4(ef.touches[0]);this.$b=this.$c;eg=this.$5(ef);this.$9=false;this.$a=true;this.$0('dragStart',ef,eg);return}cQ.releaseCapture();eg=this.$5(ef);this.$7();if(bv.isHandling(this.$2,'dragEnd')){var ei=cW.create(ef.originalEvent,null,null);$.extend(ei,this.$b);var ej=function(){bl.cancelDrag(null)};bH.fireDragEnd(ei,ej)}this.$0('dragEnd',ef,eg)},cancel:function(){this.$9=true},$4:function(ef){return{pageX:ef.pageX,pageY:ef.pageY}},$5:function(ef){var eg=ef.changedTouches[0];if(ss.isNullOrUndefined(this.$c)){this.$c=this.$4(eg)}if(ss.isNullOrUndefined(this.$b)){this.$b=this.$c}var eh={clientX:eg.clientX,clientY:eg.clientY};eh.pageX=eg.pageX;eh.pageY=eg.pageY;eh.startX=this.$c.pageX;eh.startY=this.$c.pageY;eh.deltaX=eh.pageX-this.$c.pageX;eh.deltaY=eh.pageY-this.$c.pageY;eh.deltaXSinceLast=eh.pageX-this.$b.pageX;eh.deltaYSinceLast=eh.pageY-this.$b.pageY;eh.scale=1;return eh},$6:function(ef){var eg=ef.touches[0];if(ss.isNullOrUndefined(this.$c)){return false}var eh=this.get_zoomAdjustedSlop();return Math.abs(eg.pageX-this.$c.pageX)>eh||Math.abs(eg.pageY-this.$c.pageY)>eh},$7:function(){this.$c=null;this.$a=false;this.isPotentialPress=false;this.potentialPressTimer=tab.MiscUtil.clearTimeout(this.potentialPressTimer)},$8:function(){this.potentialPressTimer=window.setTimeout(ss.mkdel(this,function(){if(!this.$a){this.isPotentialPress=true}}),500)},handleCapturedMouseMove:function(ef){var eg=ef['offsetX'];var eh=ef['offsetY'];if(eg<0||eg>document.body.offsetWidth||eh<0||eh>document.body.offsetHeight){var ei=cW.create(ef,this.$2.domElem,null);this.move(ei)}},handleCapturedMouseComplete:function(ef){var eg=document.createEvent('MouseEvents');eg.initMouseEvent('mouseup'.toString(),false,true,window.self,null,this.$b.pageX,this.$b.pageY,this.$b.clientX,this.$b.clientY,ef.ctrlKey,ef.altKey,ef.shiftKey,ef.metaKey,null,null);document.body.dispatchEvent(eg)}},bF,[ss.IDisposable,cc]);ss.initClass(bl,a,{});ss.initClass(bm,a,{add_shiftStateChanged:function(ef){this.$1$1=ss.delegateCombine(this.$1$1,ef)},remove_shiftStateChanged:function(ef){this.$1$1=ss.delegateRemove(this.$1$1,ef)},get_payload:function(){return this.draggedObject},get_hasPayload:function(){return ss.isValue(this.draggedObject)},get_isShiftDrag:function(){return this.$1},set_isShiftDrag:function(ef){if(this.$1!==ef){this.$1=ef;if(!ss.staticEquals(this.$1$1,null)){this.$1$1()}}},get_isRightDrag:function(){return this.$1$2},set_isRightDrag:function(ef){this.$1$2=ef},get_dragAvatar:function(){return this.$0},get_dragType:function(){return'dragdrop'},get_readyToDrop:function(){return true},get_defaultDropCursor:function(){return X.noOp},moveTo:function(ef){},endDragAt:function(ef){},cancelDrag:function(){},payloadEquals:function(ef){if(ss.referenceEquals(this.draggedObject,ef)){return true}if($.isArray(this.draggedObject)){var eg=this.draggedObject;if(eg.length===1&&ss.referenceEquals(eg[0],ef)){return true}}return false},dropToNowhereAction:function(){}});ss.initClass(bG,a,{add_click:function(ef){this.$2$1=ss.delegateCombine(this.$2$1,ef)},remove_click:function(ef){this.$2$1=ss.delegateRemove(this.$2$1,ef)},get_zIndex:function(){return tab.DomUtil.getComputedZIndex(this.element[0])},set_zIndex:function(ef){this.element.css('z-index',ef.toString())},get_opaque:function(){return this.element.hasClass('opaque-glass')},set_opaque:function(ef){this.element.toggleClass('clear-glass',!ef);this.element.toggleClass('opaque-glass',ef)},set_preventWebPageScroll:function(ef){if(ef){this.element.on(BrowserSupport.BrowserSupport.MouseWheelEvent(),function(eg){eg.preventDefault()})}else{this.element.off(BrowserSupport.BrowserSupport.MouseWheelEvent(),function(eg){eg.preventDefault()})}},show:function(){if(!ss.referenceEquals(this.element.parent()[0],this.$3)){this.element.appendTo(this.$3)}if(this.get_opaque()){this.element.toggleClass('glass-fade-in-immediate',true)}this.element.show()},hide:function(){this.element.hide()},setColor:function(ef){this.element.css('background-color',ef)},dispose:function(){this.set_preventWebPageScroll(false);if(ss.isValue(this.$2)){this.$2.dispose();this.$2=null}ed.prototype.dispose.call(this)},handleClick:function(ef){if(ss.isValue(this.$2$1)){this.$2$1()}}},ed,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(bn,a,{dispose:function(){bl.unregisterDragGlass(this);bG.prototype.dispose.call(this)},disableHitTests:function(){this.element.css('pointer-events','none')},enableHitTests:function(){this.element.css('pointer-events','auto')}},bG,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(bo,a,{get_rootElement:function(){return this.$0},get_viewModel:function(){return null},dispose:function(){this.$0=null},addToDom:function(ef){ef.append(this.get_rootElement());this.onAddedToDom()},onAddedToDom:function(){}},null,[ss.IDisposable,tab.IAppendableView,ss.makeGenericType(tab.IView$1,[tab.IViewModel])]);ss.initClass(bp,a,{componentWillReceiveProps:function(ef){if(ef.resetSelector){this.setState({isSelecting:false})}},render:function(){var ef=new Object;ef.styleClass=this.props.styleClass;ef.isSelecting=this.state.isSelecting;ef.getDesiredHeight=this.props.getDesiredHeight;ef.getMinimumWidth=this.props.getMinimumWidth;ef.children=this.props.children;ef.renderButton=this.props.renderButton;ef.tabIndex=this.props.tabIndex;ef.onSelectorToggled=ss.mkdel(this,this.$1);ef.onFocusLost=ss.mkdel(this,this.$0);return React.createElement(dC,ef)},$1:function(){this.setState({isSelecting:!this.state.isSelecting})},$0:function(){this.setState({isSelecting:false})}},React.Component);ss.initClass(bq,a,{handleWidgetPropertyChanged:function(ef,eg){},updateWidgetState:function(ef){if(!this.get_widget().get_isEditing()){this.get_widget().set_text(ef.initialContent);this.get_widget().updateTextElement(ef.initialContent);this.get_widget().get_inputElement().val(ef.initialContent);if(!tab.MiscUtil.isNullOrEmpty$3(ef.tooltip)){this.get_widget().get_textElement().find('.text-span').get(0).title=ef.tooltip;this.get_widget().get_inputElement().attr('title',ef.tooltip)}}}},ss.makeGenericType(dj,[br,Object,Object]));ss.initClass(br,a,{add_hoverStateChanged:function(ef){this.$3$1=ss.delegateCombine(this.$3$1,ef)},remove_hoverStateChanged:function(ef){this.$3$1=ss.delegateRemove(this.$3$1,ef)},add_editing:function(ef){this.$3$2=ss.delegateCombine(this.$3$2,ef)},remove_editing:function(ef){this.$3$2=ss.delegateRemove(this.$3$2,ef)},add_committed:function(ef){this.$3$3=ss.delegateCombine(this.$3$3,ef)},remove_committed:function(ef){this.$3$3=ss.delegateRemove(this.$3$3,ef)},get_textElement:function(){return this.$9.$0()},get_isEditing:function(){return this.$3$4},set_isEditing:function(ef){this.$3$4=ef},get_textDisplayWidth:function(){return Math.min(tab.DoubleUtil.roundToInt(this.$9.$1().width()),tab.DoubleUtil.roundToInt(this.$9.$0().width()))},$8:function(ef){if(ss.isValue(this.$3$1)){this.$3$1(ef)}},updateTextElement:function(ef){this.$9.$1().text(ef);var eg=this.$9.$1().get(0);eg.title=(this.showTooltip?ef:'')},edit:function(){this.get_textElement().hide();this.get_inputElement().show();this.get_inputElement().focus();tab.DomUtil.selectAllInputText(this.get_inputElement());this.set_isEditing(true);this.element.addClass('editing');if(ss.isValue(this.$3$2)){this.$3$2()}},commit:function(){if(this.get_isEditing()){this.set_isEditing(false);this.get_inputElement().hide();this.get_textElement().show();this.element.removeClass('editing');if(ss.isValue(this.$3$3)){this.$3$3()}}},$7:function(){var ef=tab.DoubleUtil.roundToInt(this.element.parent().height());this.element.height(ef);var eg=this.element.children('div');var eh=tab.DoubleUtil.roundToInt(eg.height());this.get_textElement().css('height',eh+'px');this.get_textElement().css('line-height',eh+'px');this.get_inputElement().css('height',eh+'px');this.get_inputElement().css('line-height',eh+'px')},onAddedToDom:function(){this.$7();ed.prototype.onAddedToDom.call(this)}},dN,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(bs,a,{get_scrollingComponentRef:function(){return this.$0},ensureVisible:function(ef){window.setTimeout(ss.mkdel(this,function(){if(ss.isValue(this.$1)){var eg=$(ReactDOM.findDOMNode(this.$1));var eh=$(ef);var ei=eh;var ej=0;var ek=0;while(eg.find(ei[0]).length>0){var el=ei.position();ej+=el.top;ek+=el.left;ei=ei.offsetParent()}var em=ej<0||ek<0||ej+eh.height()>eg.height()||ek+eh.width()>eg.width();if(em){this.$1.get_scrollingControl().scrollToElement(ef)}}}),0)}});ss.initClass(bt,a,{render:function(){return React.createElement(this.props.tagName,$.extend({},this.$2.get_eventHandlingAttributesForReact(),this.props.htmlAttributes),this.props.children)},componentDidMount:function(){this.$0()},componentDidUpdate:function(){this.$0()},componentWillUnmount:function(){if(ss.isValue(this.$2)){this.$2.dispose()}},$0:function(){if(ss.isValue(this.props.spec)){var ef=ReactDOM.findDOMNode(this);if(!ss.referenceEquals(this.$1,ef)||bt.$1(this.$3,this.props.spec)){this.$2.updateEventHandleSpec(ef,this.props.spec);this.$1=ef;this.$3=this.props.spec}}}},React.Component);ss.initClass(bu,a,{});ss.initClass(bv,a,{});ss.initEnum(bw,a,{start:0,move:1,end:2,out:3,scroll:4,cancel:5,unSupported:6});ss.initClass(bx,a,{suppressHover:function(){this.$3.suppressHover()},unsuppressHover:function(){this.$3.unsuppressHover()},cancelHover:function(){this.$3.cancel()},handleEvent:function(ef,eg){if(this.$5&&(bx.get_currentGlobalMouseButton()!=='left'&&bx.get_currentGlobalMouseButton()!=='right')){this.$5=false}if(ef.get_isScrollEvent()){this.$5=false}else if(ef.get_isOutEvent()){if(bv.isUsingHover(eg)){this.$3.out(ef)}}else if(ef.get_isStartEvent()){this.handleStartEvent(ef,eg)}else if(ef.get_isMoveEvent()){this.handleMoveEvent(ef,eg)}else{this.handleEndCancelEvent(ef,eg)}},handleStartEvent:function(ef,eg){this.$2=false;this.$4=cR.getMouseButtonEnum(ef.originalEvent);if(ef.get_isMouseEvent()){if(!tab.FeatureFlags.isEnabled('WebAuthoringDragAggregation')&&!ef.get_isLeftMouseEvent()){return}this.$5=true;bx.set_currentGlobalMouseButton(this.$4)}this.handleStart(ef,bv.isUsingHover(eg))},handleMoveEvent:function(ef,eg){if(bv.isUsingHover(eg)){this.$3.move(ef)}if(ef.get_isMouseEvent()){if(!tab.FeatureFlags.isEnabled('WebAuthoringDragAggregation')&&this.$4!=='left'||!this.$5){return}}this.$0.move(ef);this.$1.move(ef);if(ss.isValue(this.$6)){this.$6.move(ef)}},handleEndCancelEvent:function(ef,eg){bx.set_currentGlobalMouseButton('none');if(bv.isUsingHover(eg)){this.$3.end(ef)}if(ss.isValue(this.$6)){this.$6.end(ef)}this.$1.end(ef);if(ef.get_isMouseEvent()){this.$5=false;if(ef.get_isRightClickEvent()||this.$4==='right'){this.$2=true}if(BrowserSupport.BrowserSupport.IsMac()&&this.$2&&ef.type==='mouseup'||this.$2&&!ef.get_isRightClickEvent()){return}}this.$0.end(ef)},cancelAllGestures:function(){if(ss.isValue(this.$1)){this.$1.cancel()}if(ss.isValue(this.$0)){this.$0.cancel()}if(ss.isValue(this.$6)){this.$6.cancel()}if(ss.isValue(this.$3)){this.$3.cancel()}},updateAllGestures:function(ef){if(ss.isValue(this.$1)){this.$1.update(ef)}if(ss.isValue(this.$0)){this.$0.update(ef)}if(ss.isValue(this.$6)){this.$6.update(ef)}if(ss.isValue(this.$3)){this.$3.update(ef)}},setupPressDrag:function(ef){var eg=bv.usingPressDrag(ef);if(!eg){return}var eh=ss.mkdel(this,function(ek){if(bv.isHandling(ef,'press')){var el=dJ.$0(ef,'press');el(ek)}var em={};bv.setHandler(em,'dragStart',dJ.$0(ef,'pressDragStart'));bv.setHandler(em,'dragMove',dJ.$0(ef,'pressDragMove'));bv.setHandler(em,'dragEnd',dJ.$0(ef,'pressDragEnd'));bv.setHandler(em,'pinchStart',dJ.$0(ef,'doublePressDragStart'));bv.setHandler(em,'pinchMove',dJ.$0(ef,'doublePressDragMove'));bv.setHandler(em,'pinchEnd',dJ.$0(ef,'doublePressDragEnd'));this.$1.update(em);if(ss.isValue(this.$6)){this.$6.update(em)}});var ei=ss.mkdel(this,function(ek){if(bv.isHandling(ef,'lastTouch')){var el=dJ.$0(ef,'lastTouch');el(ek)}this.$1.update(ef);if(ss.isValue(this.$6)){this.$6.update(ef)}});var ej={};bv.setHandler(ej,'press',eh);bv.setHandler(ej,'lastTouch',ei);this.$0.update(ej)},handleStart:function(ef,eg){if(eg){this.$3.start(ef)}this.$0.start(ef);this.$1.start(ef);if(ss.isValue(this.$6)){this.$6.start(ef)}},dispose:function(){if(ss.isValue(this.$0)){this.$0.dispose()}if(ss.isValue(this.$1)){this.$1.dispose()}if(ss.isValue(this.$3)){this.$3.dispose()}if(ss.isValue(this.$6)){this.$6.dispose()}}},null,[ss.IDisposable]);ss.initEnum(by,a,{mouse:1,touch:2});ss.initClass(bz,a,{});ss.initClass(bJ,a,{get_theAllItemIsSelected:function(){return this.allSelected},set_theAllItemIsSelected:function(ef){if(this.groupSize>0){this.allSelected=ef;if(ef===true){this.set_selectedIndexes(null)}else{this.set_selectedIndexes({})}}},get_selectedIndexes:function(){return this.$1$1},set_selectedIndexes:function(ef){this.$1$1=ef},get_selectedCount:function(){return(ss.isValue(this.get_selectedIndexes())?ss.count(Object.keys(this.get_selectedIndexes())):0)},validateAllSelectedState:function(){if(ss.isValue(this.get_selectedIndexes())&&ss.count(Object.keys(this.get_selectedIndexes()))===this.groupSize){this.set_theAllItemIsSelected(true)}},mapSelected:function(ef){return function(eg){return this.mapSelected$1(ef).call(this,eg,true)}},mapSelected$1:function(ef){return function(eg,eh){var ei;if(this.get_theAllItemIsSelected()&&eh){ei=[];var ej=this.groupSize;for(var ek=0;ek<ej;++ek){ei.push(ek)}}else{ei=_.map(this.get_selectedIndexes(),function(el,em){return em}).sort()}return _.map(ei,function(el){return eg(el)})}},handleTap:null,handleTapAll:null,isSelected:null,clone:null});ss.initClass(cU,a,{get_selectedCount:function(){return(this.get_theAllItemIsSelected()?this.groupSize:ss.count(Object.keys(this.get_selectedIndexes())))},handleTap:function(ef){if(this.get_theAllItemIsSelected()){this.set_theAllItemIsSelected(false);for(var eg=0;eg<this.groupSize;++eg){if(eg!==ef){this.get_selectedIndexes()[eg]=true}}}else if(this.get_selectedIndexes()[ef]){delete this.get_selectedIndexes()[ef]}else{this.get_selectedIndexes()[ef]=true;this.validateAllSelectedState()}},handleTapAll:function(){this.set_theAllItemIsSelected(!this.get_theAllItemIsSelected())},clone:function(){var ef=new cU(this.groupSize);ef.allSelected=this.allSelected;ef.set_selectedIndexes(_.clone(this.get_selectedIndexes()));return ef},isSelected:function(ef){return this.get_theAllItemIsSelected()||ss.isValue(this.get_selectedIndexes())&&ss.keyExists(this.get_selectedIndexes(),ef)}},bJ);ss.initClass(bA,a,{get_selectedCount:function(){return(ss.isValue(this.get_selectedIndexes())?ss.count(Object.keys(this.get_selectedIndexes())):0)},mapSelected:function(ef){return function(eg){return this.mapSelected$1(ef).call(this,eg,false)}},validateAllSelectedState:function(){if(ss.isValue(this.get_selectedIndexes())&&ss.count(Object.keys(this.get_selectedIndexes()))===0){this.set_theAllItemIsSelected(true)}},handleTap:function(ef){if(this.get_theAllItemIsSelected()){this.set_theAllItemIsSelected(false);this.get_selectedIndexes()[ef]=true}else if(this.get_selectedIndexes()[ef]){delete this.get_selectedIndexes()[ef];this.validateAllSelectedState()}else{this.get_selectedIndexes()[ef]=true}},handleTapAll:function(){if(this.get_theAllItemIsSelected()){this.set_theAllItemIsSelected(false);for(var ef=0;ef<this.groupSize;++ef){this.get_selectedIndexes()[ef]=true}}else{this.set_theAllItemIsSelected(true)}},clone:function(){var ef=new bA(this.groupSize);ef.allSelected=this.allSelected;ef.set_selectedIndexes(_.clone(this.get_selectedIndexes()));return ef},isSelected:function(ef){return ss.isValue(this.get_selectedIndexes())&&ss.keyExists(this.get_selectedIndexes(),ef)}},cU);ss.initClass(dA,a,{validateAllSelectedState:function(){if(ss.isValue(this.get_selectedIndexes())&&(ss.count(Object.keys(this.get_selectedIndexes()))===this.groupSize||ss.count(Object.keys(this.get_selectedIndexes()))===0)){{this.set_theAllItemIsSelected(true)}}},handleTap:function(ef){if(this.get_theAllItemIsSelected()){this.set_theAllItemIsSelected(false)}if(!this.get_selectedIndexes()[ef]){if(ss.count(Object.keys(this.get_selectedIndexes()))>0){ss.clearKeys(this.get_selectedIndexes())}this.get_selectedIndexes()[ef]=true}this.validateAllSelectedState()},handleTapAll:function(){if(!this.get_theAllItemIsSelected()){this.set_theAllItemIsSelected(true)}},clone:function(){var ef=new dA(this.groupSize);ef.allSelected=this.allSelected;ef.set_selectedIndexes(_.clone(this.get_selectedIndexes()));return ef},isSelected:function(ef){return ss.isValue(this.get_selectedIndexes())&&ss.keyExists(this.get_selectedIndexes(),ef)},selectNext:function(ef){var eg=0;var eh=eg;if(this.get_selectedCount()===1){eg=this.mapSelected(ss.Int32).call(this,function(ei){return ei-0})[0];eh=eg+ef}if(eh>=this.groupSize){if(eg===this.groupSize-1){eh=0}else{eh=this.groupSize-1}}this.$0(eh)},selectPrevious:function(ef){var eg=this.groupSize-1;var eh=eg;if(this.get_selectedCount()===1){eg=this.mapSelected(ss.Int32).call(this,function(ei){return ei-0})[0];eh=eg-ef}if(eh<0){if(eg===0){eh=this.groupSize-1}else{eh=0}}this.$0(eh)},selectFirst:function(){this.$0(0)},selectLast:function(){this.$0(this.groupSize-1)},$0:function(ef){ef=Math.max(0,ef);ef=Math.min(this.groupSize-1,ef);if(this.groupSize>0){this.allSelected=false;this.set_selectedIndexes({});this.get_selectedIndexes()[ef]=true}}},bJ);ss.initClass(bB,a,{mapSelected:function(ef){return function(eg){return this.mapSelected$1(ef).call(this,eg,false)}},validateAllSelectedState:function(){if(ss.isValue(this.get_selectedIndexes())&&ss.count(Object.keys(this.get_selectedIndexes()))===0){this.set_theAllItemIsSelected(true)}},clone:function(){var ef=new bB(this.groupSize);ef.allSelected=this.allSelected;ef.set_selectedIndexes(_.clone(this.get_selectedIndexes()));return ef}},dA);ss.initClass(bC,a,{});ss.initClass(bD,a,{});ss.initClass(bE,a,{render:function(){var ef=ss.coalesce(this.props.styleClass,'tab-unification-line-arrow-dropdown');var eg=null;if(this.props.isDisabled){ef=ef+' disabled'}if(this.props.disableArrowDown){eg={display:'none'}}return bj.div({className:'tab-GenericDropdownButton '+ef},bj.div({className:'tab-SelectionDisplay'},this.props.selectionDisplay()),bj.div({className:'tab-DownArrowButton',style:eg},bj.div({className:'arrow down'})))}},de);ss.initClass(bH,a,{});ss.initClass(bI,a,{render:function(){var ef=new dr;ef.customStyle={top:this.props.marginTop};ef.extraCssClass=this.props.rootCssClass;ef.scrollX=true;ef.scrollY=true;ef.onScroll=ss.mkdel(this,function(eg){this.props.onScroll(-eg.x,-eg.y)});ef.onScrollStop=ss.mkdel(this,function(eg,eh){this.props.onScroll(-eg.x,-eg.y);if(eg.y===eh.y&&!ss.staticEquals(this.$1,null)){this.$1()}});ef.startingY=this.state.writeOnlyScrollTop;ef.onScrollingControlRefUpdated=this.$0;return dq.createScroller(ef,[this.props.children])},componentDidMount:function(){if(!ss.staticEquals(this.props.onRefUpdated,null)){this.props.onRefUpdated(this)}},componentWillUnmount:function(){if(!ss.staticEquals(this.props.onRefUpdated,null)){this.props.onRefUpdated(null)}},callOnScrollToEnd:function(ef){this.$1=ef},setScrollPosition$1:function(ef,eg){this.setState({writeOnlyScrollTop:eg})},scrollBy$1:function(ef,eg){var eh=this.$2;this.scrollBy$2(ef,eg,eh.get_x(),eh.get_y(),eh.get_maxScrollX(),eh.get_maxScrollY())},scrollBy$2:function(ef,eg,eh,ei,ej,ek){var el=eh+ef;var em=Math.min(Math.max(el,0),ej);var en=ei+eg;var eo=Math.min(Math.max(en,0),ek);this.setScrollPosition$1(em,eo)},setScrollPosition:function(ef,eg){this.$2.scrollTo(ef,eg)},getScrollPosition:function(){var ef=this.$2;var eg=Math.min(Math.max(ef.get_x(),0),ef.get_maxScrollX());var eh=Math.min(Math.max(ef.get_y(),0),ef.get_maxScrollY());return{scrollLeft:eg,scrollTop:eh}},scrollBy:function(ef,eg){var eh=this.$2;this.scrollBy$2(ef,eg,eh.get_x(),eh.get_y(),eh.get_maxScrollX(),eh.get_maxScrollY())},getScrollbarWidth:function(){return 9},canScroll:function(){return this.$2.get_canScroll()},dispose:function(){this.$2.destroy()},resetPosition:function(){this.$2.resetPosition()},refresh:function(){this.$2.refresh()},handleEvent:function(ef){this.$2.handleEvent(ef)},getScrollContainer:function(){return ReactDOM.findDOMNode(this)}},React.Component,[Object]);ss.initClass(bK,a,{render:function(){return dD.create({commitValue:ss.mkdel(this,this.$0),disabled:this.props.disabled,emptyTextBox:this.state.emptyTextBox,extraCssClass:this.props.extraCssClass,maxValue:this.props.maxValue,minValue:this.props.minValue,showValueTextBox:this.props.showValueTextBox,showPercentageSign:this.props.showPercentageSign,styleClass:this.props.styleClass,tabIndex:this.props.tabIndex,value:this.state.value,displayValueChanged:ss.mkdel(this,this.$1),width:this.props.width})},$1:function(ef){if(this.props.disabled){return}if(ss.isNullOrUndefined(ef)){this.setState({value:0,emptyTextBox:true})}else{this.setState({value:ss.unbox(ef),emptyTextBox:false})}this.$2=true},$0:function(ef,eg){if(this.props.disabled){return}var eh=this.$2||ef!==this.state.value||eg;if(!ss.staticEquals(this.props.onValueChanged,null)&&eh){this.props.onValueChanged(ef);this.$2=false}}},de);ss.initClass(bL,a,{start:function(ef){this.cancel();this.$a=false},move:function(ef){var eg=ef.touches[0];if(!this.$a){return}if(!this.$6(ef)){return}var eh=this.$5(ef);if(ss.isValue(this.$8)){this.cancel()}this.$0('moving',ef,eh);this.$b=eg.pageX;this.$c=eg.pageY;this.$8=window.setTimeout(ss.mkdel(this,function(){if(!this.$9){this.$0('hover',ef,eh)}this.$4()}),this.$7)},end:function(ef){if(ef.touches.length===0){this.$a=true}},out:function(ef){var eg=ef.originalEvent['relatedTarget'];if(!ss.referenceEquals(this.$2.domElem,eg)&&!tab.DomUtil.isAncestorOf(this.$2.domElem,eg)){this.cancel();this.$0('mouseleave',ef,this.$5(ef))}},suppressHover:function(){if(!this.$9){}this.$9=true},unsuppressHover:function(){if(this.$9){}this.$9=false;this.$a=true},cancel:function(){this.$4();this.$b=0;this.$c=0;this.$a=true},$4:function(){this.$8=tab.MiscUtil.clearTimeout(this.$8)},$6:function(ef){var eg=ef.touches[0];var eh=Math.abs(eg.pageX-this.$b);var ei=Math.abs(eg.pageY-this.$c);return eh+ei>this.get_zoomAdjustedSlop()},$5:function(ef){var eg={};eg.pageX=ef.changedTouches[0].pageX;eg.pageY=ef.changedTouches[0].pageY;eg.clientX=ef.changedTouches[0].clientX;eg.clientY=ef.changedTouches[0].clientY;return eg}},bF,[ss.IDisposable]);ss.initClass(bM,a,{});ss.initClass(bN,a,{$3:function(){return ss.formatString('.{0}',ss.replaceAllString(ss.getTypeFullName(ss.getInstanceType(this)),'.','_'))},dispose:function(){if(ss.isNullOrUndefined(this.$7)){return}this.$7.remove_disposed(ss.mkdel(this,this.$2));if(ss.isValue(this.$4)){var ef=this.$7.element;var eg=this.$4;ef.off(this.$3(),eg)}else{this.$7.element.off(this.$3())}this.$7=null},$0:function(ef){if(ss.isValue(this.$5)){this.$5(ef)}},$1:function(ef){if(ss.isValue(this.$6)){this.$6(ef)}},$2:function(ef,eg){this.dispose()}},null,[ss.IDisposable]);ss.initClass(bP,a,{get_buttonElement:function(){return this.element},setEnabled:function(ef){if(ef){this.get_buttonElement().removeClass('tab-disabled');this.get_buttonElement().addClass('tab-enabled')}else{this.get_buttonElement().removeClass('tab-enabled');this.get_buttonElement().addClass('tab-disabled')}return this},setIcon:function(ef){if(!ss.isValue(this.iconElement)){this.iconElement=$('<span>');this.iconElement.appendTo(this.get_buttonElement())}this.iconElement.removeClass().addClass('tab-iconButtonIcon').addClass(ef);return this}},y,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(bQ,a,{get_className:function(){var ef=['tab-IconBtn'];ef.push(this.props.customClassName);if(this.props.disabled){ef.push('disabled')}return ef.join(' ')},$0:function(){var ef=new bR;ef.isActive=(ss.isValue(this.state)?this.state.isActive:false);return ef},render:function(){return bt.div({tap:ss.mkdel(this,this.$1),firstTouch:ss.mkdel(this,function(ef){if(tsConfig.is_mobile){var eg=new bR;eg.isActive=true;this.setState(eg)}}),lastTouch:ss.mkdel(this,function(ef){if(tsConfig.is_mobile){var eg=new bR;eg.isActive=false;this.setState(eg)}})},{className:this.get_className(),title:this.props.title,onMouseEnter:ss.mkdel(this,function(ef){if(!tsConfig.is_mobile){var eg=new bR;eg.isActive=true;this.setState(eg)}}),onMouseLeave:ss.mkdel(this,function(ef){if(!tsConfig.is_mobile){var eg=new bR;eg.isActive=false;this.setState(eg)}})},[bj.div({className:'tab-Icon '+this.props.iconClassName+(this.state.isActive?' active':'')})])},$1:function(ef){if(!this.props.disabled&&!ss.staticEquals(this.props.onTap,null)){this.props.onTap(ef)}}},React.Component);ss.initClass(bR,a,{});ss.initInterface(bS,a,{get_viewType:null,get_viewModel:null,disposeViewModel:null});ss.initInterface(bT,a,{add_hideDialogRequested:null,remove_hideDialogRequested:null,onDialogHidden:null},[ss.makeGenericType(cf,[Object])]);ss.initInterface(bU,a,{dragStarted:null,dragEnded:null});ss.initInterface(bV,a,{startDrag:null});ss.initInterface(bY,a,{createListItemContent:null});ss.initInterface(bZ,a,{createListItemDragAvatar:null});ss.initInterface(ca,a,{add_dragStarting:null,remove_dragStarting:null,add_dragEnded:null,remove_dragEnded:null,get_avatarCreator:null,set_avatarCreator:null,startDrag:null});ss.initEnum(cd,a,{positiveInteger:0,string:1});ss.initClass(ce,a,{render:function(){var ef='tab-custom-button';var eg={role:'button'};if(!this.props.disabled){eg.onKeyDown=ss.mkdel(this,this.$3);eg.tabIndex=0}else{ef+=' disabled'}eg.className=ef;return bt.div(this.$4,eg,[this.props.buttonContent()])},$3:function(ef){switch(ef.which){case 13:case 32:{this.$2();this.$1();break}default:{return}}ef.stopPropagation();ef.preventDefault()},$2:function(){if(!this.props.disabled&&!ss.staticEquals(this.props.handleAllTriggers,null)){this.props.handleAllTriggers()}},$1:function(){if(!this.props.disabled&&!ss.staticEquals(this.props.handleEnterSpaceOnly,null)){this.props.handleEnterSpaceOnly()}},$0:function(ef){if(!this.props.disabled&&!ss.staticEquals(this.props.handleClickOnly,null)){this.props.handleClickOnly(ef)}}},de);ss.initInterface(cg,a,{get_canScrollX:null,get_canScrollY:null,get_docSize:null,get_actualViewSize:null,set_actualViewSize:null,get_effectiveViewSize:null,get_scrollPos:null,set_scrollPos:null,setXPos:null,setYPos:null});ss.initClass(ch,a,{render:function(){var ef=['tab-iscroll-component'];if(this.state.hovered){ef.push('hover')}if(this.state.scrolling){ef.push('tabScrolling')}if(ss.isValue(this.props.extraCssClass)){ef.push(this.props.extraCssClass)}if(this.props.alwaysShowScrollbarsIfScrollable){ef.push('showIfScrollable')}var eg=ss.arrayFromEnumerable(ef).join(' ');return bj.div({ref:'iscroll-wrapper',className:eg,style:this.props.customStyle,onMouseOver:ss.mkdel(this,this.handleOnMouseOver),onMouseOut:ss.mkdel(this,this.handleOnMouseOut)},bj.div({className:'tab-iscroll-content'},this.props.children))},componentDidMount:function(){this.$5=bz.bindWithDispose($(window),'resize',ss.mkdel(this,this.$1));var ef=ReactDOM.findDOMNode(this.refs['iscroll-wrapper']);this.iScroll=new h(ef,this.props);this.iScroll.on('scrollStart',ss.mkdel(this,this.handleScrollStart));this.iScroll.on('scroll',ss.mkdel(this,this.$2));this.iScroll.on('scrollEnd',ss.mkdel(this,function(){this.handleScrollStop();this.$0()}));this.$3()},componentWillUnmount:function(){this.$5=tab.MiscUtil.dispose$1(this.$5);this.iScroll.destroy();this.iScroll=null;this.$4=tab.MiscUtil.clearTimeout(this.$4)},componentDidUpdate:function(ef){if(!ss.referenceEquals(this.props.startingY,ef.startingY)&&ss.isValue(this.props.startingY)){this.iScroll.scrollTo(this.iScroll.x,ss.unbox(this.props.startingY),0,null);this.$0()}this.$3()},handleOnMouseOver:function(ef){this.setState({hovered:true,scrolling:this.state.scrolling})},handleOnMouseOut:function(ef){this.setState({hovered:false,scrolling:this.state.scrolling})},handleScrollStart:function(){this.setState({hovered:this.state.hovered,scrolling:true})},$2:function(){if(!ss.staticEquals(this.props.scrollCallback,null)){this.props.scrollCallback(this.iScroll.getComputedPosition())}},handleScrollStop:function(){this.setState({hovered:this.state.hovered,scrolling:false})},$1:function(ef){this.$3()},$3:function(){this.$4=window.setTimeout(ss.mkdel(this,function(){if(ss.isValue(this.iScroll)){this.iScroll.refresh()}}),this.props.refreshDelay)},$0:function(){if(!ss.staticEquals(this.props.scrollStopCallback,null)){var ef=new Object;ef.x=this.iScroll.maxScrollX;ef.y=this.iScroll.maxScrollY;var eg=ef;this.props.scrollStopCallback(this.iScroll.getComputedPosition(),eg)}}},React.Component);ss.initInterface(ci,a,{get_canScrollX:null,get_canScrollY:null,get_scrollPos:null,get_maxScroll:null,get_visibleArea:null,scrollX:null,scrollY:null,setScrollTarget:null,refresh:null});ss.initClass(ck,a,{});ss.initInterface(cn,a,{add_selectableDisposed:null,remove_selectableDisposed:null,add_selectedChanging:null,remove_selectedChanging:null,add_selectedChanged:null,remove_selectedChanged:null,get_selectionId:null,set_selectionId:null,get_selected:null,set_selected:null,get_selectedClass:null,set_selectedClass:null});ss.initInterface(cq,a,{updateUberPopupViewModel:null},[bS]);ss.initClass(cr,a,{});ss.initClass(cs,a,{get_labelElement:function(){return this.element.find(this.$b)},get_label:function(){return this.get_labelElement().text()},set_label:function(ef){this.get_labelElement().text(ef);if(ss.isNullOrEmptyString(ef)){this.get_labelElement().addClass('hide')}else{this.get_labelElement().removeClass('hide')}},setLabelContents:function(ef){if(ss.isValue(ef)){this.get_labelElement().html(ef);this.get_labelElement().removeClass('hide')}else{this.get_labelElement().html('');this.get_labelElement().addClass('hide')}}},y,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(dO,a,{add_selectableDisposed:function(ef){this.$3$1=ss.delegateCombine(this.$3$1,ef)},remove_selectableDisposed:function(ef){this.$3$1=ss.delegateRemove(this.$3$1,ef)},add_selectedChanging:function(ef){this.$3$2=ss.delegateCombine(this.$3$2,ef)},remove_selectedChanging:function(ef){this.$3$2=ss.delegateRemove(this.$3$2,ef)},add_selectedChanged:function(ef){this.$3$3=ss.delegateCombine(this.$3$3,ef)},remove_selectedChanged:function(ef){this.$3$3=ss.delegateRemove(this.$3$3,ef)},get_selectedClass:function(){return this.$c},set_selectedClass:function(ef){if(ss.referenceEquals(this.$c,ef)){return}if(this.get_selected()){this.element.toggleClass(this.$c,false);this.element.toggleClass(ef,true)}this.$c=ef},get_selectionId:function(){return this.$d},set_selectionId:function(ef){this.$d=ef},get_selected:function(){return this.element.hasClass(this.$c)},set_selected:function(ef){if(this.get_selected()===ef){return}this.element.toggleClass(this.$c,ef);this.raisePropertyChanged('selected');this.$b(this.$3$3,null)},get_preventMouseDeselect:function(){return this.$3$4},set_preventMouseDeselect:function(ef){this.$3$4=ef},handleClick:function(ef){if(this.get_disabled()){return}var eg=!this.get_selected();if(this.get_preventMouseDeselect()&&!eg){return}if(!ss.staticEquals(this.$3$2,null)){var eh=new dw(eg,ss.isValue(ef)&&ef.shiftKey,bz.isCtrlKey(ef));this.$3$2(this,eh);if(eh.cancel){return}}this.set_selected(eg);y.prototype.handleClick.call(this,ef)},$b:function(ef,eg){if(!ss.staticEquals(ef,null)){ef(this,eg)}},onDisposed:function(ef){this.$b(this.$3$1,null);ed.prototype.onDisposed.call(this,ef)}},y,[tab.IWidget,tab.IAppendableView,ss.IDisposable,cn]);ss.initClass(ct,a,{get_labelElement:function(){return this.element.find(this.$e)},get_inputElement:function(){return this.element.find('input')},get_label:function(){return this.get_labelElement().text()},set_label:function(ef){this.get_labelElement().text(ef);if(ss.isNullOrEmptyString(ef)){this.get_labelElement().addClass('hide')}else{this.get_labelElement().removeClass('hide')}},get_selected:function(){return dO.prototype.get_selected.call(this)},set_selected:function(ef){if(this.get_selected()===ef){return}var eg=this.get_inputElement();if(ss.isValue(eg)){eg.prop('checked',(ef?'checked':''))}dO.prototype.set_selected.call(this,ef)},get_disabled:function(){return y.prototype.get_disabled.call(this)},set_disabled:function(ef){var eg=this.get_inputElement();if(ss.isValue(eg)){eg.prop('disabled',ef)}y.prototype.set_disabled.call(this,ef)}},dO,[tab.IWidget,tab.IAppendableView,ss.IDisposable,cn]);ss.initClass(cu,a,{handleBlur:function(ef){if(this.props.blurBehavior===0){this.$3()}else if(this.props.blurBehavior===1){this.handleEnterPress()}},componentWillReceiveProps:function(ef){if(!ss.referenceEquals(this.props.initialValue,ef.initialValue)){this.setState({displayedText:ef.initialValue})}},$3:function(){this.setState({displayedText:this.props.initialValue})},$0:function(){return{displayedText:(tab.MiscUtil.isNullOrEmpty$3(this.props.initialValue)?'':this.props.initialValue)}},handleInput:function(ef){if(this.props.inputFilter===0){ef=ss.replaceAllString(ef,',','');ef=ss.replaceAllString(ef,'.','');ef=ss.replaceAllString(ef,'-','');var eg={};if(ss.isNullOrEmptyString(ef)||ss.Int32.tryParse(ef,eg)){this.setState({displayedText:ef})}}else{this.setState({displayedText:ef})}},$2:function(ef){if(ef.keyCode===27){ef.preventDefault();ef.stopPropagation();this.$3()}},handleEnterPress:function(){var ef=this.$1();if(!ss.staticEquals(this.props.onCommit,null)){this.props.onCommit(ef)}if(this.props.blurBehavior===0){this.$3()}else if(!ss.referenceEquals(this.state.displayedText,ef)){this.setState({displayedText:ef})}},$1:function(){var ef={};if(ss.Int32.tryParse(this.state.displayedText,ef)){return((ss.isValue(this.props.maxValue)&&ss.Nullable$1.gt(ef.$,this.props.maxValue))?this.props.maxValue.toString():this.state.displayedText)}else{return this.state.displayedText}},render:function(){var ef=this.$4;var eg=new Object;eg.iconClassName='confirmArrowIcon';eg.customClassName='confirmButton';var eh=bt.div(ef,{className:'confirmButtonDiv'},[React.createElement(bQ,eg)]);var ei=React.createElement(SharedWidgets.OutlineTextFieldWidget,{text:this.state.displayedText,testId:'lineEdit',handleChange:ss.mkdel(this,this.handleInput),handleEnter:ss.mkdel(this,this.handleEnterPress),maxLength:ss.coalesce(this.props.maxLength,6)});return bj.div({className:'lineEditWithButtonComponent',onKeyDown:ss.mkdel(this,this.$2),onBlur:ss.mkdel(this,this.handleBlur),style:{width:ss.coalesce(this.props.textBoxWidth,'auto')}},ei,eh)}},React.Component);ss.initClass(cw,a,{get_parentListView:function(){return this.$1$1},set_parentListView:function(ef){this.$1$1=ef},get_draggableListItemView:function(){return this.$1$2},set_draggableListItemView:function(ef){this.$1$2=ef},startDrag:function(ef){if(ss.isNullOrUndefined(this.get_parentListView())||ss.isNullOrUndefined(this.get_draggableListItemView())||ss.isNullOrUndefined(this.get_parentListView().get_dragFeedback())){return null}return this.get_parentListView().get_dragFeedback().startDrag(this.get_parentListView(),this.get_draggableListItemView())}},null,[bV]);ss.initClass(dv,a,{add_selectionChanged:function(ef){this.$1$1=ss.delegateCombine(this.$1$1,ef)},remove_selectionChanged:function(ef){this.$1$1=ss.delegateRemove(this.$1$1,ef)},get_selectedClass:function(){return this.$8},set_selectedClass:function(ef){this.$8=ef},get_selectionType:function(){return this.$a},set_selectionType:function(ef){this.$a=ef},get_items:function(){return this.$7},get_selectedItems:function(){var ef=[];var eg=ss.getEnumerator(Object.keys(this.$9));try{while(eg.moveNext()){var eh=eg.current();ef.push(this.$9[eh])}}finally{eg.dispose()}return ef},get_selectedItem:function(){if(this.get_numberOfSelectedItems()===0){return null}var ef=Object.keys(this.$9)[0];return this.$9[ef]},get_numberOfSelectedItems:function(){return ss.getKeyCount(this.$9)},addItem:function(ef){ef.set_selectedClass(this.$8);this.$7.push(ef);if(ef.get_selected()){this.$6(ef,false,false)}this.$0(ef)},containsItem:function(ef){return ss.contains(this.get_items(),ef)},dispose:function(){ss.clearKeys(this.$9);this.get_items().forEach(ss.mkdel(this,this.$5));ss.clear(this.get_items())},onItemDisposed:function(ef,eg){var eh=ef;this.$5(eh);if(this.isItemSelected$1(eh)){delete this.$9[eh.get_selectionId()]}ss.remove(this.$7,eh)},$0:function(ef){ef.add_selectableDisposed(ss.mkdel(this,this.onItemDisposed));ef.add_selectedChanging(ss.mkdel(this,this.handleSelectionChanging));ef.add_selectedChanged(ss.mkdel(this,this.handleSelectionChanged))},$5:function(ef){ef.remove_selectableDisposed(ss.mkdel(this,this.onItemDisposed));ef.remove_selectedChanging(ss.mkdel(this,this.handleSelectionChanging));ef.remove_selectedChanged(ss.mkdel(this,this.handleSelectionChanged))},selectAll:function(){this.selectItems(this.get_items(),false)},isItemSelected$1:function(ef){return ss.isValue(ef)&&ss.keyExists(this.$9,ef.get_selectionId())},isItemSelected:function(ef){return ss.keyExists(this.$9,ef)},selectItem:function(ef){this.$6(ef,false,true)},selectSingleItem:function(ef){this.$6(ef,true,true)},$6:function(ef,eg,eh){var ei=false;if(eg||this.get_selectionType()===0){ei=this.$1(ef)}ei=this.$2(ef)||ei;if(eh&&ei){this.$4()}},selectItems:function(ef,eg){switch(this.get_selectionType()){case 0:{var eh=((ss.isValue(ef)&&ef.length>0)?ef[0]:null);this.selectItem(eh);break}case 1:case 2:{var ei=false;if(eg){ei=this.$1(null)}if(ss.isValue(ef)){for(var ej=0,ek=ef.length;ej<ek;ej++){ei=this.$2(ef[ej])||ei}}if(ei){this.$4()}break}}},$2:function(ef){if(ss.isNullOrUndefined(ef)){return false}if(ss.isNullOrUndefined(ef.get_selectionId())){return false}if(this.isItemSelected$1(ef)){return false}if(!this.containsItem(ef)){return false}this.$9[ef.get_selectionId()]=ef;ef.set_selected(true);return true},clearSelection:function(ef){if(this.$1(ef)){this.$4()}},$1:function(ef){var eg=ss.getKeyCount(this.$9);var eh=ss.getEnumerator(Object.keys(this.$9));try{while(eh.moveNext()){var ei=eh.current();if(ss.isValue(ef)&&ss.referenceEquals(ei,ef.get_selectionId())){continue}this.$3(this.$9[ei])}}finally{eh.dispose()}return eg>0&&ss.getKeyCount(this.$9)!==eg},unselectItem:function(ef){if(!this.isItemSelected$1(ef)){return}this.$3(ef);this.$4()},$3:function(ef){delete this.$9[ef.get_selectionId()];ef.set_selected(false)},handleSelectionChanging:function(ef,eg){var eh=ef;if(eg.get_selecting()){this.selectItem(eh)}else if(this.get_selectionType()!==0){this.unselectItem(eh)}else if(ss.referenceEquals(this.get_selectedItem(),eh)){eg.cancel=true}},handleSelectionChanged:function(ef,eg){var eh=ef;var ei=this.isItemSelected$1(eh);if(eh.get_selected()&&!ei){this.$2(eh)}else if(!eh.get_selected()&&ei){this.$3(eh)}},$4:function(){if(!ss.staticEquals(this.$1$1,null)){this.$1$1()}}},null,[ss.IDisposable]);ss.initClass(cx,a,{$e:function(ef){this.$d(ss.indexOf(this.get_items(),ef))},$d:function(ef){if(ef<0||ef>=this.get_items().length){return}this.$f=ef;this.$g=null},$b:function(){this.$f=null;this.$g=null},addItem:function(ef){dv.prototype.addItem.call(this,ef);if(ef.get_selected()&&ss.isNullOrUndefined(this.$f)&&this.get_selectionType()===0){this.$e(ef)}},onItemDisposed:function(ef,eg){this.$b();dv.prototype.onItemDisposed.call(this,ef,eg)},dispose:function(){this.$b();dv.prototype.dispose.call(this)},selectItem:function(ef){this.selectItemAtIndex(ss.indexOf(this.get_items(),ef))},selectSingleItem:function(ef){var eg=ss.indexOf(this.get_items(),ef);if(eg<0){return}dv.prototype.selectSingleItem.call(this,ef);this.$d(eg)},selectItemAtIndex:function(ef){dv.prototype.selectItem.call(this,this.get_items()[ef]);this.$d(ef)},selectItems:function(ef,eg){this.$c(ef,eg);this.$g=null},$c:function(ef,eg){dv.prototype.selectItems.call(this,ef,eg)},clearSelection:function(ef){dv.prototype.clearSelection.call(this,ef);this.$b()},selectItemForKey:function(ef,eg){if(this.get_selectionType()===2){return null}if(!ss.isValue(this.$f)){return null}var eh=ef===38;var ei=ef===40;if(eh||ei){if(!this.get_items()[ss.unbox(this.$f)].get_selected()){this.selectItem(this.get_items()[ss.unbox(this.$f)])}var ej=ss.unbox(this.$f)+(eh?-1:1);if(ej<0||ej>=this.get_items().length){return null}if(this.get_selectionType()===1&&eg){var ek=this.$g;if(ss.isValue(this.$g)){var el=Math.min(ss.unbox(this.$g),ss.unbox(this.$f));var em=Math.max(ss.unbox(this.$g),ss.unbox(this.$f));if(ej>=el&&ej<=em){this.unselectItem(this.get_items()[ss.unbox(this.$f)])}}else{ek=this.$f}this.selectItem(this.get_items()[ej]);this.$g=ek}else{this.selectSingleItem(this.get_items()[ej]);this.$g=null}this.$f=ej;return this.get_items()[ej]}return null},handleSelectionChanging:function(ef,eg){var eh=ef;var ei=ss.indexOf(this.get_items(),eh);if(ei<0){return}if(this.get_selectionType()===0){dv.prototype.handleSelectionChanging.call(this,ef,eg);return}var ej=this.$f;var ek=this.$g;this.$d(ei);if(this.get_selectionType()===2||eg.get_ctrlKey()){if(eg.get_selecting()){this.selectItem(eh)}else{this.unselectItem(eh)}return}if(eg.get_shiftKey()&&(ss.isValue(ej)||ss.isValue(ek))){this.$g=ss.coalesce(ek,ej);var el=Math.min(ss.unbox(this.$g),ss.unbox(this.$f));var em=Math.max(ss.unbox(this.$g),ss.unbox(this.$f));var en=[];for(var eo=el;eo<=em;eo++){en.push(this.get_items()[eo])}this.$c(en,true);eg.cancel=true;return}this.selectSingleItem(eh);if(ss.referenceEquals(this.get_selectedItem(),eh)){eg.cancel=true}},handleSelectionChanged:function(ef,eg){dv.prototype.handleSelectionChanged.call(this,ef,eg);this.$e(ef)}},dv,[ss.IDisposable]);ss.initClass(cy,a,{get_viewModel:function(){return this.$g},get_selected:function(){return(this.addedToDom?dO.prototype.get_selected.call(this):this.$g.get_selected())},set_selected:function(ef){dO.prototype.set_selected.call(this,ef);this.get_viewModel().set_selected(ef)},get_isInvalid:function(){return this.$g.get_isInvalid()},set_isInvalid:function(ef){this.$f.toggleClass('invalid',ef);this.get_viewModel().set_isInvalid(ef)},get_isBold:function(){return this.$g.get_isBold()},set_isBold:function(ef){this.$f.toggleClass('bold',ef);this.get_viewModel().set_isBold(ef)},get_disabled:function(){return y.prototype.get_disabled.call(this)},set_disabled:function(ef){this.$f.toggleClass(this.get_disabledClass(),ef);y.prototype.set_disabled.call(this,ef)},init:function(){this.set_selected(this.$g.get_selected())},$e:function(ef,eg){switch(eg.get_propertyName()){case'selected':{this.set_selected(this.get_viewModel().get_selected());break}case'invalid':{this.set_isInvalid(this.get_viewModel().get_isInvalid());break}case'bold':{this.set_isBold(this.get_viewModel().get_isBold());break}case'spotlighted':{this.element.toggleClass('tab-list-item-spotlighted',this.get_viewModel().get_spotlighted());break}}}},dO,[tab.IWidget,tab.IAppendableView,ss.IDisposable,cn]);ss.initClass(cz,a,{get_id:function(){return this.$2},get_data:function(){return this.$0},get_selected:function(){return this.$5},set_selected:function(ef){if(this.$5===ef){return}this.$5=ef;this.notifyPropertyChanged('selected')},get_isInvalid:function(){return this.$4},set_isInvalid:function(ef){if(this.$4===ef){return}this.$4=ef;this.notifyPropertyChanged('invalid')},get_isBold:function(){return this.$3},set_isBold:function(ef){if(this.$3===ef){return}this.$3=ef;this.notifyPropertyChanged('bold')},get_draggable:function(){return this.$1},set_draggable:function(ef){if(this.$1===ef){return}this.$1=ef;this.notifyPropertyChanged('draggable')},get_spotlighted:function(){return this.$6},set_spotlighted:function(ef){if(this.$6===ef){return}this.$6=ef;this.notifyPropertyChanged('spotlighted')}},x,[ss.IDisposable,tab.IViewModel]);ss.initClass(cA,a,{create:function(){this.$0();var ef=[];for(var eg=0,eh=this.itemDatas.length;eg<eh;eg++){var ei=this.itemIds[eg];var ej=(ss.isValue(this.selectionIndexes)?ss.contains(this.selectionIndexes,eg):false);var ek=(ss.isValue(this.invalidIndexes)?ss.contains(this.invalidIndexes,eg):false);var el=this.itemDatas[eg];var em=new cz(ei,el,ej,ek,false);em.set_draggable(eh>1);var en=em;ef.push(en)}return ef},$0:function(){tab.Param.verifyValue(this.itemDatas,'ItemDatas');tab.Param.verifyValue(this.itemIds,'ItemIds')}});ss.initClass(cB,a,{get_dragFeedback:function(){return this.$3$1},set_dragFeedback:function(ef){this.$3$1=ef},add_listItemsUpdated:function(ef){this.$3$2=ss.delegateCombine(this.$3$2,ef)},remove_listItemsUpdated:function(ef){this.$3$2=ss.delegateRemove(this.$3$2,ef)},get_dom:function(){return this.get_template()},get_domRoot:function(){return this.get_dom().domRoot},get_itemViews:function(){return this.$l},$j:function(){return((this.$l.length>0)?this.$l[0].element[0].offsetTop:0)},get_scrollerPosition:function(){return this.get_scrollHandler().get_scrollViewPagePosition()},get_scrollerSize:function(){return this.get_scrollHandler().get_scrollViewSize()},get_scrollHandler:function(){return this.$m},set_scrollHandler:function(ef){this.$m=ef||new g(this.element)},useScrollableView:function(ef){this.set_scrollHandler(new f(ef))},$5:function(){for(var ef=0;ef<this.get_viewModel().get_collection().length;ef++){var eg={$:this.get_viewModel().get_collection()[ef]};if(ss.isValue(eg.$)){var eh=this.$k.createListItemContent(eg.$);var ei=new cy(eh,eg.$);ei.init();ei.onDoubleClick(ss.mkdel(this,this.$8));ei.set_disabled(!this.get_viewModel().get_enabled());ei.set_isInvalid(eg.$.get_isInvalid());ei.set_isBold(eg.$.get_isBold());ei.onMouseEnter(ss.mkdel({itemViewModel:eg,$this:this},function(ej){this.$this.$a(this.itemViewModel.$)}));ei.onMouseMove(ss.mkdel({itemViewModel:eg,$this:this},function(ej){this.$this.$b(this.itemViewModel.$)}));this.$i(ei);this.$l.push(ei);this.get_viewModel().addItemToGroup(ei);ei.addToDom(this.get_dom().get_listItemContainer());eg.$.add_propertyChanged(ss.mkdel(this,this.$f))}}this.$g(this.$3$2)},$c:function(ef){if(!ss.isValue(ef)){return}this.$h(this.$l[ss.unbox(ef)])},$d:function(ef){if(ss.isValue(ef)){this.$h(this.$l[ss.unbox(ef)])}},$8:function(ef){this.get_viewModel().selectionSubmitted()},$a:function(ef){this.get_viewModel().handleListItemMouseEnter(ef)},$b:function(ef){this.get_viewModel().handleListItemMouseMove(ef)},$9:function(ef){var eg=this.get_viewModel().get_listItemGroup().selectItemForKey(ef.which,ef.shiftKey);if(ss.isValue(eg)){bz.stopEvent(ef);this.$h(eg)}},onViewModelPropertyChanged:function(ef,eg){if(eg.get_propertyName()==='collection'){this.$6();this.get_dom().get_listItemContainer().empty();this.$5()}else if(eg.get_propertyName()==='enabled'){this.$l.forEach(ss.mkdel(this,function(eh){eh.set_disabled(!this.get_viewModel().get_enabled());this.$i(eh)}))}ss.makeGenericType(w,[cD]).prototype.onViewModelPropertyChanged.call(this,ef,eg)},$f:function(ef,eg){if(eg.get_propertyName()==='draggable'){var eh=this.$7(ef);this.$i(eh)}},$i:function(ef){if(ef.get_viewModel().get_draggable()&&!ef.get_disabled()){ef.element.addClass('tabDraggable');bl.attachDragSource(ef.element,new cw(this,ef))}else{ef.element.removeClass('tabDraggable');bl.removeDragSource(ef.element)}},tabIndex:function(ef){this.get_dom().get_listItemContainer().attr('tabindex',ef.toString());return this},showItemAtIndex:function(ef){this.$h(this.get_itemViews()[ef])},$h:function(ef){if(ss.isNullOrUndefined(ef)){return}var eg=ef.element[0];this.$m.scrollToElement(eg,this.$j())},$e:function(ef,eg){if(ef===eg||ef<0||ef>=this.get_itemViews().length||eg<0||eg>=this.get_itemViews().length){return}var eh=this.get_itemViews()[ef];eh.element.hide();if(eg<ef){eh.element.insertBefore(this.get_itemViews()[eg].element)}else{eh.element.insertAfter(this.get_itemViews()[eg].element)}eh.element.fadeIn();ss.removeAt(this.get_itemViews(),ef);ss.insert(this.get_itemViews(),eg,eh)},dispose:function(){this.get_viewModel().remove_selectionModelUpdated(ss.mkdel(this,this.$c));this.get_viewModel().remove_itemMoved(ss.mkdel(this,this.$e));this.$6();ss.makeGenericType(w,[cD]).prototype.dispose.call(this)},$6:function(){this.$l.forEach(ss.mkdel(this,function(ef){ef.get_viewModel().remove_propertyChanged(ss.mkdel(this,this.$f));ef.dispose()}));ss.clear(this.$l)},$g:function(ef){if(ss.isValue(ef)){ef()}},$7:function(ef){for(var eg=0,eh=this.$l.length;eg<eh;eg++){if(ss.referenceEquals(this.$l[eg].get_selectionId(),ef.get_id())){return this.$l[eg]}}return null}},ss.makeGenericType(w,[cD]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[cD])]);ss.initClass(cC,a,{add_dragStarting:function(ef){this.$1$1=ss.delegateCombine(this.$1$1,ef)},remove_dragStarting:function(ef){this.$1$1=ss.delegateRemove(this.$1$1,ef)},add_dragEnded:function(ef){this.$1$2=ss.delegateCombine(this.$1$2,ef)},remove_dragEnded:function(ef){this.$1$2=ss.delegateRemove(this.$1$2,ef)},get_dragClassName:function(){return this.$b},set_dragClassName:function(ef){this.$b=ef},get_dragHoverClassName:function(){return this.$c},set_dragHoverClassName:function(ef){this.$c=ef},get_avatarCreator:function(){return this.$1$3},set_avatarCreator:function(ef){this.$1$3=ef},dispose:function(){bl.remove_dragStarted(ss.mkdel(this,this.$8));bl.remove_dragEnded(ss.mkdel(this,this.$7));this.$9();this.$0()},startDrag:function(ef,eg){if(ss.isNullOrUndefined(ef)||ss.isNullOrUndefined(ef.get_itemViews())){return null}var eh=ss.indexOf(ef.get_itemViews(),eg);if(eh<0){return null}this.$5(ef,eh);this.$6(tab.DoubleUtil.roundToInt(this.$e.outerWidth()));this.$e.toggleClass(this.get_dragClassName(),true);this.$a();if(!ss.staticEquals(this.$1$1,null)){this.$1$1(this.$f)}bl.add_dragStarted(ss.mkdel(this,this.$8));bl.add_dragEnded(ss.mkdel(this,this.$7));var ei=this.$1(ef.get_itemViews()[eh]);return new cS(this.$e,ss.mkdel(this,this.$3),ss.mkdel(this,this.$4),ei)},$5:function(ef,eg){this.$k=ef;this.$m=this.$k.get_itemViews().length;this.$j=this.$k.get_scrollerPosition().y;this.$i=this.$j+this.$k.get_scrollerSize().h;this.$n=eg;this.$l=eg;var eh=ef.get_itemViews()[eg];this.$f=eh.get_viewModel();this.$e=eh.element},$6:function(ef){this.$g=this.$2(ef).appendTo($('body')).hide();this.$h=ss.Int32.div(tab.DoubleUtil.roundToInt(this.$g.outerHeight()),2)},$2:function(ef){return $("<div class='tab-list-item-insertion-pointer'>").width(ef)},$1:function(ef){if(ss.isValue(this.get_avatarCreator())){return this.get_avatarCreator().createListItemDragAvatar(ef.get_viewModel())}return new bo(ef)},$8:function(ef){bl.remove_dragStarted(ss.mkdel(this,this.$8));bl.setDragCursor(new X(null,'move'));bl.setDragCursor(new X(null,'-webkit-grabbing'));bl.setDragCursor(new X(null,'-moz-grabbing'));bl.setDragCursor(new X(null,'grabbing'))},$7:function(ef){bl.remove_dragEnded(ss.mkdel(this,this.$7));this.$0();this.$9()},$3:function(ef){if(ss.isNullOrUndefined(this.$e)){return}this.$0();var eg=this.$k.get_itemViews()[this.$l].element;var eh=tab.DomUtil.getElementPosition(eg);var ei=this.$l>0&&(ef.pageY<this.$j||ef.pageY<eh.y);var ej=this.$l<this.$m-1&&(ef.pageY>this.$i||ef.pageY>eh.y+eg.outerHeight());if(!ei&&!ej){return}var ek=(ei?-1:1);this.$l+=ek;this.$k.showItemAtIndex(this.$l);this.$a();this.$d=window.setTimeout(ss.mkdel(this,function(){this.$3(bl.get_lastDragEvent())}),10)},$a:function(){if(this.$l===this.$n){this.$g.hide();this.$e.toggleClass(this.get_dragHoverClassName(),true);return}this.$e.toggleClass(this.get_dragHoverClassName(),false);var ef=this.$k.get_itemViews()[this.$l].element;var eg=tab.DomUtil.getElementPosition(ef);if(this.$l>this.$n){eg.y+=tab.DoubleUtil.roundToInt(ef.outerHeight())}tab.DomUtil.setElementPosition(this.$g,eg.x,eg.y-this.$h,null,false);this.$g.show()},$4:function(ef){this.$0();this.$9();if(this.$n!==this.$l){this.$k.get_viewModel().moveItem(this.$n,this.$l)}if(!ss.staticEquals(this.$1$2,null)){this.$1$2(this.$f,this.$n!==this.$l)}},$9:function(){if(ss.isValue(this.$g)){this.$g.remove();this.$g=null}if(ss.isValue(this.$e)){this.$e.removeClass(this.get_dragHoverClassName());this.$e.removeClass(this.get_dragClassName());this.$e=null}},$0:function(){this.$d=tab.MiscUtil.clearTimeout(this.$d)}},null,[ca,ss.IDisposable]);ss.initClass(cD,a,{add_propsUpdated:function(ef){this.$2$1=ss.delegateCombine(this.$2$1,ef)},remove_propsUpdated:function(ef){this.$2$1=ss.delegateRemove(this.$2$1,ef)},add_selectionChanged:function(ef){this.$2$2=ss.delegateCombine(this.$2$2,ef)},remove_selectionChanged:function(ef){this.$2$2=ss.delegateRemove(this.$2$2,ef)},add_submitSelection:function(ef){this.$2$3=ss.delegateCombine(this.$2$3,ef)},remove_submitSelection:function(ef){this.$2$3=ss.delegateRemove(this.$2$3,ef)},add_listItemMouseEnter:function(ef){this.$2$4=ss.delegateCombine(this.$2$4,ef)},remove_listItemMouseEnter:function(ef){this.$2$4=ss.delegateRemove(this.$2$4,ef)},add_listItemMouseMove:function(ef){this.$2$5=ss.delegateCombine(this.$2$5,ef)},remove_listItemMouseMove:function(ef){this.$2$5=ss.delegateRemove(this.$2$5,ef)},add_selectionModelUpdated:function(ef){this.$2$6=ss.delegateCombine(this.$2$6,ef)},remove_selectionModelUpdated:function(ef){this.$2$6=ss.delegateRemove(this.$2$6,ef)},add_spotlightedItemChanged:function(ef){this.$2$7=ss.delegateCombine(this.$2$7,ef)},remove_spotlightedItemChanged:function(ef){this.$2$7=ss.delegateRemove(this.$2$7,ef)},add_itemMoved:function(ef){this.$2$8=ss.delegateCombine(this.$2$8,ef)},remove_itemMoved:function(ef){this.$2$8=ss.delegateRemove(this.$2$8,ef)},get_originalCollection:function(){return this.$7},get_collection:function(){return this.$5},get_filter:function(){return this.$4},set_filter:function(ef){this.$4=ef;this.$0()},get_sort:function(){return this.$9},set_sort:function(ef){this.$9=ef;this.$0()},$2:function(){return!ss.staticEquals(this.$4,null)||!ss.staticEquals(this.$9,null)},get_props:function(){return this.$8},get_selectionType:function(){return this.$6.get_selectionType()},get_listItemGroup:function(){return this.$6},get_firstSelectedItem:function(){var ef=this.$1(1);return((ef.length>0)?ef[0]:null)},get_selectedItems:function(){return this.$1(this.$6.get_numberOfSelectedItems())},get_enabled:function(){return this.$3},set_enabled:function(ef){if(this.$3===ef){return}this.$3=ef;this.notifyPropertyChanged('enabled')},dispose:function(){this.$6.remove_selectionChanged(ss.mkdel(this,this.onSelectionChanged));this.$6.dispose();ss.clear(this.$7);ss.clear(this.$5);x.prototype.dispose.call(this)},selectionSubmitted:function(){this.raiseActionEvent(this.$2$3)},handleListItemMouseEnter:function(ef){this.raiseActionEvent$1(cz).call(this,this.$2$4,ef)},handleListItemMouseMove:function(ef){this.raiseActionEvent$1(cz).call(this,this.$2$5,ef)},update:function(ef){this.$7=ss.arrayClone(ef);this.$0();this.$8.items=_.map(this.get_collection(),function(eg){return{data:eg.get_data()}});this.raiseActionEvent(this.$2$1)},addItemToGroup:function(ef){this.$6.addItem(ef)},$0:function(){if(this.$2()){this.$5=(ss.isValue(this.$4)?this.$7.filter(this.$4):ss.arrayClone(this.$7));if(ss.isValue(this.$9)){this.$5.sort(this.$9)}}else{this.$5=this.$7}this.notifyPropertyChanged('collection')},onSelectionChanged:function(){this.raiseActionEvent(this.$2$2)},$1:function(ef){var eg=[];var eh=this.$6.get_numberOfSelectedItems();if(eh===1){eg.push(this.$6.get_selectedItem().get_viewModel());return eg}var ei=Math.min(eh,ef);for(var ej=0,ek=this.get_collection().length;ej<ek&&eg.length<ei;ej++){if(this.$6.isItemSelected(this.get_collection()[ej].get_id())){eg.push(this.get_collection()[ej])}}return eg},setSelectedItems:function(ef){if(this.get_collection().length===0){return}this.$6.remove_selectionChanged(ss.mkdel(this,this.onSelectionChanged));this.get_listItemGroup().clearSelection(null);var eg=null;for(var eh=0,ei=ef.length;eh<ei;eh++){var ej=ef[eh];eg=Math.min(ss.coalesce(eg,ej),ej);this.get_collection()[ej].set_selected(true);if(this.get_listItemGroup().get_selectionType()===0){break}}this.raiseActionEvent$1(ss.makeGenericType(ss.Nullable$1,[ss.Int32])).call(this,this.$2$6,ss.coalesce(eg,0));this.$6.add_selectionChanged(ss.mkdel(this,this.onSelectionChanged))},setInvalidItems:function(ef){for(var eg=0,eh=this.get_collection().length;eg<eh;++eg){this.get_collection()[eg].set_isInvalid(ss.contains(ef,eg))}},selectItemById:function(ef){for(var eg=0,eh=this.get_collection().length;eg<eh;eg++){var ei=this.get_collection()[eg];if(ss.referenceEquals(ei.get_id(),ef)){this.selectItemAtIndex(eg);break}}},selectItemAtIndex:function(ef){this.$6.remove_selectionChanged(ss.mkdel(this,this.onSelectionChanged));var eg=this.get_collection()[ef];var eh=!eg.get_selected();if(this.$6.get_selectionType()===0){this.clearSelection()}eg.set_selected(true);if(eh){this.raiseActionEvent(this.$2$2)}this.raiseActionEvent$1(ss.makeGenericType(ss.Nullable$1,[ss.Int32])).call(this,this.$2$6,ef);this.$6.add_selectionChanged(ss.mkdel(this,this.onSelectionChanged))},clearSpotlighting:function(){if(ss.isValue(this.$a)&&ss.isValue(this.get_collection()[this.$a])){this.get_collection()[this.$a].set_spotlighted(false)}this.$a=null;this.raiseActionEvent$1(ss.makeGenericType(ss.Nullable$1,[ss.Int32])).call(this,this.$2$7,this.$a)},spotlightItemAtIndex:function(ef){if(ss.isValue(this.$a)&&ss.isValue(this.get_collection()[this.$a])){this.get_collection()[this.$a].set_spotlighted(false)}var eg=this.get_collection()[ef];if(ss.isNullOrUndefined(eg)){return}eg.set_spotlighted(true);this.$a=ef;this.raiseActionEvent$1(ss.makeGenericType(ss.Nullable$1,[ss.Int32])).call(this,this.$2$7,this.$a)},clearSelection:function(){this.$6.clearSelection(null)},moveItem:function(ef,eg){if(ef===eg){return}var eh=this.get_collection()[ef];ss.removeAt(this.get_collection(),ef);ss.insert(this.get_collection(),eg,eh);if(!ss.staticEquals(this.$2$8,null)){this.$2$8(ef,eg)}}},x,[ss.IDisposable,tab.IViewModel,ss.makeGenericType(cf,[Object])]);ss.initClass(cE,a,{get_domRootElement:function(){return this.domRoot},get_listItemContainer:function(){return this.$0}},dL,[ss.IDisposable]);ss.initClass(cF,a,{});ss.initClass(cH,a,{checkState:function(ef){this.$0.checkState=ef;return this},data:function(ef){this.$0.data=ef;return this},description:function(ef){this.$0.description=ef;return this},enabled:function(ef){this.$0.enabled=ef;return this},isDivider:function(ef){this.$0.isDivider=ef;return this},isTextInput:function(ef){this.$0.isTextInput=ef;return this},iconClass:function(ef){this.$0.iconClass=ef;return this},iconClassTwo:function(ef){this.$0.iconClassTwo=ef;return this},itemClass:function(ef){this.$0.itemClass=ef;return this},name:function(ef){this.$0.name=ef;return this},readId:function(ef){this.$0.readId=ef;return this},subMenu:function(ef){this.$0.subMenu=ef;return this},title:function(ef){this.$0.title=ef;return this},build:function(){var ef=this.$0;this.$0=null;return ef}});ss.initEnum(cI,a,{none:0,check:1,radio:2});ss.initClass(cJ,a,{},dL,[ss.IDisposable]);ss.initClass(cK,a,{},dL,[ss.IDisposable]);ss.initClass(cL,a,{},dL,[ss.IDisposable]);ss.initClass(cM,a,{$a:function(){var ef=this.dom.domRoot;for(var eg=0;eg<this.menuStack.length;eg++){var eh=this.menuStack[eg];ef=ef.add(eh.domRoot)}return ef},dispose:function(){this.menuViewModel.remove_menuChanged(ss.mkdel(this,this.updateMenu));this.menuViewModel.remove_shown(ss.mkdel(this,this.shown));this.menuViewModel.remove_hidden(ss.mkdel(this,this.hidden));this.menuViewModel.remove_menuItemSelectionChanged(ss.mkdel(this,this.$9));var ef=ss.mkdel(this,function(){this.menuDisposables.dispose();for(var eg=0;eg<this.menuStack.length;eg++){var eh=this.menuStack[eg];eh.dispose()}ss.clear(this.menuStack);this.removeGlass();ss.makeGenericType(w,[cN]).prototype.dispose.call(this)});this.$5(ef)},removeGlass:function(){if(ss.isValue(this.glass)){this.glass.remove_click(ss.mkdel(this,this.glassClicked));this.glass.dispose();this.glass=null}},getElementForMenuItem:function(ef){return(ss.isValue(ef)?this.$b[ef.id]:null)},getMenuElementForMenuItem:function(ef){var eg=this.getElementForMenuItem(ef);if(ss.isNullOrUndefined(eg)){return null}var eh=this.menuStack[cM.getMenuItemLevel(eg)-1];if(ss.isNullOrUndefined(eh)){return null}else{return eh.domRoot}},updateMenu:function(){this.dom.content.children().remove();this.$b={};this.menuDisposables.dispose();this.menuDisposables=new tab.DisposableHolder;this.buildMenu(this.dom,this.menuViewModel.get_menu())},hidden:function(){var ef=ss.mkdel(this,function(){this.dom.domRoot.detach();this.removeGlass()});this.$5(ef)},shown:function(ef){if(ef.get_minWidth()!==0){var eg=tab.DoubleUtil.roundToInt(this.dom.domRoot.outerWidth(true))-tab.DoubleUtil.roundToInt(this.dom.domRoot.width());this.dom.domRoot.css('min-width',ef.get_minWidth()-eg+'px')}var eh=989;if(ef.relativeDom.length>0){var ei=tab.DomUtil.getComputedZIndex(ef.relativeDom[0]);if(ei>=eh){eh=Math.max(1000,ei+1)}}this.removeGlass();var ej=new bG;ej.set_zIndex(eh-1);this.glass=ej;this.glass.add_click(ss.mkdel(this,this.glassClicked));this.glass.show();this.dom.domRoot.css('z-index',eh);if(ss.isValue(ef.additionalMenuClass)){this.dom.domRoot.addClass(ef.additionalMenuClass)}dB.getViewport(ss.mkdel(this,function(el){this.dom.domRoot.appendTo($('body'));this.positionMenu(el,ef,this.dom);this.dom.domRoot.css('visibility','visible');this.onAddedToDom();this.dom.domRoot.show();this.onSized()}));this.disposables.add$1(bz.bindWithDispose($(window),'resize',ss.mkdel(this,function(el){this.menuViewModel.hide()})));var ek=ss.mkdel(this,function(el){this.menuViewModel.hide()});tab.WindowHelper.addListener(window.self,'popstate',ek);this.disposables.add$1(new tab.CallOnDispose(function(){tab.WindowHelper.removeListener(window.self,'popstate',ek)}));bH.add_dismissTemporaryElements(ss.mkdel(this,this.onDismissTemporaryElements));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){bH.remove_dismissTemporaryElements(ss.mkdel(this,this.onDismissTemporaryElements))})))},onSized:function(){},$9:function(ef,eg){var eh=this.$b[ef.id];if(ss.isValue(eh)&&eh.is(':visible')){eh.toggleClass('tabMenuSelectedItem',eg);if(eg){this.scrollToMenuItem(eh)}}},scrollToMenuItem:function(ef){ef.offsetParent().scrollTop(tab.DoubleUtil.roundToInt(ef.position().top))},glassClicked:function(){this.menuViewModel.hide()},onDismissTemporaryElements:function(){this.menuViewModel.hide()},showSubmenu:null,activateSubmenu:function(ef,eg){var eh=eg.data('tabMenuMenuItemLevel');if(ss.isValue(eh)&&eh<this.menuStack.length){return}var ei=new cL;ei.domRoot.addClass(this.menuViewModel.get_theme().menuClass);ei.domRoot.attr('data-sub-menu-depth',this.menuStack.length.toString());this.menuStack.push(ei);this.buildMenu(ei,ef.subMenu);this.showSubmenu(ef,eg,ei);ei.domRoot.focus();ei.domRoot.on('blur',ss.mkdel(this,this.onBlur))},buildMenu:function(ef,eg){var eh=false;var ei=false;var ej=false;var ek=[];var el=dI.targetAndClick(ef.domRoot.get(0),ss.mkdel(this,this.$8));this.menuDisposables.add$1(el);for(var em=0;em<eg.menuItems.length;em++){var en=eg.menuItems[em];var eo;if(en.isDivider){eo=(new cJ).domRoot.addClass(this.menuViewModel.get_theme().dividerClass)}else{if(en.isTextInput){var ep=this.$6(en);eo=ep.domRoot}else if(ss.isInstanceOfType(en,ba)){eo=en.get_domRoot()}else{var eq=(new m(en.name,en.enabled)).$2(en.checkState,en.iconClass).$3(en.iconClassTwo).$1(en.description).$6(en.title).$4(en.subMenu).$5([this.menuViewModel.get_theme().itemClass,en.itemClass]).$0();eh=eh||eq.$2;ei=ei||eq.$3;ej=ej||eq.$1;eq.domRoot.data('tabMenuMenuItem',en);eq.domRoot.data('tabMenuMenuItemLevel',this.menuStack.length);eo=eq.domRoot}eo.addClass('tabMenuMenuItem');if(en.isDefault){eo.addClass('tabMenuDefaultItem')}}ek.push(eo);this.$b[en.id]=eo}ef.content.append(ek);if(!eh){ef.domRoot.addClass(this.menuViewModel.get_theme().noIconClass)}if(ei){ef.domRoot.addClass('tabMenuHasIconTwo')}if(!ej){ef.domRoot.addClass(this.menuViewModel.get_theme().noDescClass)}if(ss.isValue(this.menuViewModel.get_selectedItem())){this.$9(this.menuViewModel.get_selectedItem(),true)}},$8:function(ef){var eg=$(ef.target).closest('.tabMenuMenuItem');var eh=eg.data('tabMenuMenuItem');if(ss.isNullOrUndefined(eh)){return}else if(ss.isValue(eh.subMenu)){this.activateSubmenu(eh,eg)}else{this.menuViewModel.clickMenuItem(eh)}},onBlur:function(ef){window.setTimeout(ss.mkdel(this,function(){var eg=this.$a();if(eg.index(document.activeElement)<0&&eg.find(document.activeElement).length===0){this.get_viewModel().hide()}}))},$7:function(ef){ef.stopPropagation();switch(ef.which){case 13:{var eg=ef.data['callback'];if($.isFunction(eg)){eg($(ef.target).val())}break}case 9:{ef.preventDefault();ef.target.blur();this.menuViewModel.iterateFocus((ef.shiftKey?-1:1),null);break}}},$6:function(ef){var eg=new cK;eg.textInput.keydown(ss.mkdict(['callback',ef.data]),ss.mkdel(this,this.$7)).keypress(cM.$0).focus(ss.mkdel(this,function(eh){this.get_viewModel().set_focusedItem(ef)})).attr('placeholder',ef.description);if(!ss.isNullOrEmptyString(ef.itemClass)){eg.domRoot.addClass(ef.itemClass)}this.disposables.add$1(new tab.CallOnDispose(function(){eg.textInput.off()}));return eg},$5:function(ef){if($.fx.off||!this.menuViewModel.get_shouldAnimateOnClose()){ef()}else{this.$a().fadeOut(50,ef)}}},ss.makeGenericType(u,[cN]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[cN])]);ss.initClass(cN,a,{add_shown:function(ef){this.$2$1=ss.delegateCombine(this.$2$1,ef)},remove_shown:function(ef){this.$2$1=ss.delegateRemove(this.$2$1,ef)},add_hidden:function(ef){this.$2$2=ss.delegateCombine(this.$2$2,ef)},remove_hidden:function(ef){this.$2$2=ss.delegateRemove(this.$2$2,ef)},add_menuChanged:function(ef){this.$2$3=ss.delegateCombine(this.$2$3,ef)},remove_menuChanged:function(ef){this.$2$3=ss.delegateRemove(this.$2$3,ef)},add_menuItemClicked:function(ef){this.$2$4=ss.delegateCombine(this.$2$4,ef)},remove_menuItemClicked:function(ef){this.$2$4=ss.delegateRemove(this.$2$4,ef)},add_menuItemSelectionChanged:function(ef){this.$2$5=ss.delegateCombine(this.$2$5,ef)},remove_menuItemSelectionChanged:function(ef){this.$2$5=ss.delegateRemove(this.$2$5,ef)},add_menuItemFocusChanged:function(ef){this.$2$6=ss.delegateCombine(this.$2$6,ef)},remove_menuItemFocusChanged:function(ef){this.$2$6=ss.delegateRemove(this.$2$6,ef)},get_visible:function(){return this.$2$7},set_visible:function(ef){this.$2$7=ef},get_isExpanded:function(){return this.$2$8},set_isExpanded:function(ef){this.$2$8=ef},get_shouldAnimateOnClose:function(){return this.$2$9},set_shouldAnimateOnClose:function(ef){this.$2$9=ef},set_disposeOnHide:function(ef){this.remove_hidden(this.$0);if(ef){this.add_hidden(this.$0)}},get_menu:function(){return this.$2},set_menu:function(ef){if(_.isEqual(this.$2,ef)){return}this.$2=ef;if(!ss.staticEquals(this.$2$3,null)){this.$2$3()}},get_theme:function(){return this.$2$10},set_theme:function(ef){this.$2$10=ef},get_selectedItem:function(){return this.$3},set_selectedItem:function(ef){if(ss.isValue(this.$3)){if(ss.isValue(this.$2$5)){this.$2$5(this.$3,false)}}if(ss.isNullOrUndefined(ef)){this.$3=null;return}this.$3=ef;if(!ss.staticEquals(this.$2$5,null)){this.$2$5(this.$3,true)}},get_focusedItem:function(){return this.$1},set_focusedItem:function(ef){if(ss.referenceEquals(this.$1,ef)){return}if(ss.isValue(this.$1)&&!ss.staticEquals(this.$2$6,null)){this.$2$6(this.$1,false)}if(ss.isNullOrUndefined(ef)||!ef.enabled){this.$1=null;return}this.$1=ef;if(!ss.staticEquals(this.$2$6,null)){this.$2$6(this.$1,true)}},show:function(ef){this.set_isExpanded(ef.expanded);if(this.get_visible()){return}this.set_visible(true);if(!ss.staticEquals(this.$2$1,null)){this.$2$1(ef)}},dispose:function(){this.hide();x.prototype.dispose.call(this)},hide:function(){if(this.get_visible()===false){return}this.set_visible(false);this.raiseActionEvent(this.$2$2)},clickMenuItem:function(ef){if(!ef.enabled){return}this.hide();if(!ss.staticEquals(this.$2$4,null)){this.$2$4(ef)}},iterateFocus:function(ef,eg){var eh=this.findMenuForMenuItem(this.get_focusedItem());if(ss.isNullOrUndefined(eh)){return}var ei=eg;if(ss.isNullOrUndefined(ei)){ei=ss.indexOf(eh.menuItems,this.get_focusedItem())}var ej=ei;var ek=ej;do{ek+=ef;if(ek>=eh.menuItems.length){ek=0}else if(ek<0){ek=eh.menuItems.length-1}}while(!eh.menuItems[ek].get_selectable()&&ek!==ej);if(ek!==ej){this.set_focusedItem(eh.menuItems[ek])}},focusByNamePrefix:function(ef){ef=ef.toLowerCase();var eg=this.findMenuForMenuItem(this.get_focusedItem());if(ss.isNullOrUndefined(eg)){return}var eh=ss.indexOf(eg.menuItems,this.get_focusedItem())+1;if(eh>=eg.menuItems.length){eh=0}var ei=eh;do{if(eg.menuItems[ei].enabled&&!eg.menuItems[ei].isDivider){if(ss.isValue(eg.menuItems[ei].name)&&ss.startsWithString(eg.menuItems[ei].name.toLowerCase(),ef)){this.set_focusedItem(eg.menuItems[ei]);return}}++ei;if(ei>=eg.menuItems.length){ei=0}}while(ei!==eh)},findMenuForMenuItem:function(ef){if(ss.isNullOrUndefined(ef)){return null}var eg=null;eg=function(eh){if(ss.contains(eh.menuItems,ef)){return eh}for(var ei=0;ei<eh.menuItems.length;ei++){var ej=eh.menuItems[ei];if(ss.isValue(ej.subMenu)){var ek=eg(ej.subMenu);if(ss.isValue(ek)){return ek}}}return null};return eg(this.get_menu())},findItemContainingSubMenu:function(ef){if(ss.isNullOrUndefined(ef)||ss.referenceEquals(this.get_menu(),ef)){return null}var eg=null;eg=function(eh){var ei=null;for(var ej=0;ej<eh.menuItems.length;ej++){var ek=eh.menuItems[ej];if(ss.isValue(ek.subMenu)){ei=(ss.referenceEquals(ek.subMenu,ef)?ek:eg(ek.subMenu));if(ss.isValue(ei)){break}}}return ei};return eg(this.get_menu())}},x,[ss.IDisposable,tab.IViewModel]);ss.initClass(cP,a,{get_glass:function(){return this.$y},ensureAttachedAndSized:function(){if(ss.isValue(this.$y)||this.isAttached()){return}this.$y=new bG;this.$y.set_opaque(true);this.$y.show();this.element.css('z-index',(this.$y.get_zIndex()+1).toString());be.prototype.ensureAttachedAndSized.call(this)},bindToEvents:function(){be.prototype.bindToEvents.call(this);this.disposables.add$1(bz.bindWithDispose($(window),'resize',ss.mkdel(this,this.onWindowResize)));this.disposables.add$1(bz.bindWithDispose($(window),'keyup',ss.mkdel(this,this.onDocumentKeyUp)))},detach:function(){this.$x();be.prototype.detach.call(this)},dispose:function(){this.$x();if(ss.isValue(this.template)){this.template.dispose();this.template=null}be.prototype.dispose.call(this)},$x:function(){if(ss.isValue(this.$y)){this.$y.dispose();this.$y=null}},$w:function(){this.configMoveDragSource(be.defaultStationaryDialogConfigurer)},onWindowResize:function(ef){this.positionInWindow()},onDocumentKeyUp:function(ef){if(ef.which===27){this.close(null);ef.preventDefault();ef.stopPropagation();return}}},be,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);cP.$ctor1.prototype=cP.prototype;ss.initClass(cQ,a,{});ss.initClass(cR,a,{});ss.initClass(cS,a,{get_dragType:function(){return'dragmove'},moveTo:function(ef){if(ss.isValue(this.$4)){this.$4(ef)}},endDragAt:function(ef){if(ss.isValue(this.$3)){this.$3(ef)}},cancelDrag:function(){if(ss.isValue(this.$2)){this.$2()}}},bm);cS.$ctor1.prototype=cS.prototype;ss.initClass(cT,a,{add_moveAction:function(ef){this.$1$1=ss.delegateCombine(this.$1$1,ef)},remove_moveAction:function(ef){this.$1$1=ss.delegateRemove(this.$1$1,ef)},add_endAction:function(ef){this.$1$2=ss.delegateCombine(this.$1$2,ef)},remove_endAction:function(ef){this.$1$2=ss.delegateRemove(this.$1$2,ef)},get_offset:function(){return this.$4},set_offset:function(ef){this.$4=ef},get_elementToDrag:function(){return this.$3},get_elementToChange:function(){return this.$2},get_documentBodySize:function(){return this.$1},set_documentBodySize:function(ef){this.$1=ef},dispose:function(){bl.removeDragSource(this.$3)},calculateOffset:function(ef){var eg=this.$2.position();return{x:ef.pageX-tab.DoubleUtil.roundToInt(eg.left),y:ef.pageY-tab.DoubleUtil.roundToInt(eg.top)}},startDrag:function(ef){this.$4=this.calculateOffset(ef);this.$3.addClass('dragging');if(this.$0){this.$2.addClass('dragging')}return new cS(this.$3,ss.mkdel(this,this.dragMove),ss.mkdel(this,this.dragEnd),null)},dragMove:function(ef){this.performMove(ef);if(ss.isValue(this.$1$1)){this.$1$1(ef)}},performMove:function(ef){var eg=ef.pageX-this.$4.x;var eh=ef.pageY-this.$4.y;var ei=((this.$1==='useClientSize')?document.body.clientWidth:document.body.scrollWidth);var ej=((this.$1==='useClientSize')?document.body.clientHeight:document.body.scrollHeight);eg=Math.max(0,Math.min(ei-tab.DoubleUtil.roundToInt(this.$2.outerWidth()),eg));eh=Math.max(0,Math.min(ej-tab.DoubleUtil.roundToInt(this.$2.outerHeight()),eh));tab.DomUtil.setElementPosition(this.$2,eg,eh)},dragEnd:function(ef){this.performMove(ef);this.$3.removeClass('dragging');if(this.$0){this.$2.removeClass('dragging')}if(ss.isValue(this.$1$2)){this.$1$2(ef)}}},null,[ss.IDisposable,bV]);ss.initClass(cV,a,{},bd,[bW]);ss.initClass(cW,a,{get_isMouseEvent:function(){return this.source===1},get_isTouchEvent:function(){return this.source===2},get_isStartEvent:function(){return this.inputType===0},get_isMoveEvent:function(){return this.inputType===1},get_isOutEvent:function(){return this.inputType===3},get_isEndEvent:function(){return this.inputType===2},get_isScrollEvent:function(){return this.inputType===4},get_isRightClickEvent:function(){return this.type==='contextmenu'&&this.source===1},get_isLeftMouseEvent:function(){if(this.get_isMouseEvent()){var ef=this.$0();if(ef==='left'){if(BrowserSupport.BrowserSupport.IsMac()&&this.ctrlKey){return false}return true}}return false},get_isRightMouseEvent:function(){if(this.get_isMouseEvent()){var ef=this.$0();if(ef==='right'){return true}else if(ef==='left'&&BrowserSupport.BrowserSupport.IsMac()&&this.ctrlKey){return true}}return false},get_isCtrlKey:function(){return(BrowserSupport.BrowserSupport.IsMac()?this.metaKey:this.ctrlKey)},get_gestureInfo:function(){return this},get_allTouchesShareCurrentTarget:function(){var ef=this.touches[0].target;var eg=this.touches[1].target;if(!ss.isInstanceOfType(ef,Element)||!ss.isInstanceOfType(eg,Element)){return false}var eh=document.body;var ei=this.currentTarget;var ej=false;while(!ej&&ss.isValue(ef)&&ss.isValue(eg)){ej=true;if(!ss.referenceEquals(ef,ei)&&!ss.referenceEquals(ef,eh)&&ss.isInstanceOfType(ef,Element)){ef=ef.parentNode;ej=false}if(!ss.referenceEquals(eg,ei)&&!ss.referenceEquals(eg,eh)&&ss.isInstanceOfType(eg,Element)){eg=eg.parentNode;ej=false}if(ss.referenceEquals(ef,eg)){ej=true}}return ss.referenceEquals(ef,eg)},$0:function(){return(this.get_isMoveEvent()?bx.get_currentGlobalMouseButton():cR.getMouseButtonEnum(this.originalEvent))},getSelectAction:function(){var ef='simple';var eg=this.get_isCtrlKey();if(this.shiftKey){ef='range'}if(eg){ef='toggle'}return ef},preventDefault:function(){if(typeof(this.originalEvent['preventDefault'])==='function'){this.originalEvent.preventDefault()}},stopPropagation:function(){if(typeof(this.originalEvent['stopPropagation'])==='function'){this.originalEvent.stopPropagation()}if(ss.isValue(this.reactEvent)){this.reactEvent.stopPropagation()}}});ss.initEnum(cX,a,{reset:0,commit:1,none:2});ss.initClass(cY,a,{});ss.initClass(da,a,{start:function(ef){if(ef.touches.length<this.numTouches){return}if(this.$7){return}this.$9=ef.touches[0];this.$a=ef.touches[1];this.$8=this.$5();this.$6=this.$8;var eg=this.$4();this.$0('pinchStart',ef,eg);this.$7=true},move:function(ef){if(!this.$7){return}if(ef.touches.length<2){this.end(ef);return}this.$9=ef.touches[0];this.$a=ef.touches[1];this.$6=this.$4();this.$0('pinchMove',ef,this.$6)},end:function(ef){if(ef.touches.length>this.numTouches){return}if(this.$7){this.$7=false;var eg=this.$4();this.$0('pinchEnd',ef,eg)}},$5:function(){var ef=this.$9;var eg=this.$a;var eh=eg.pageX-ef.pageX;var ei=eg.pageY-ef.pageY;var ej=Math.sqrt(eh*eh+ei*ei);var ek=ss.Int32.div(eh,2)+ef.pageX;var el=ss.Int32.div(ei,2)+ef.pageY;var em={pageX:ek,pageY:el,distance:ej};return em},$4:function(){var ef=this.$9;var eg=this.$a;var eh=eg.pageX-ef.pageX;var ei=eg.pageY-ef.pageY;var ej=Math.sqrt(eh*eh+ei*ei);var ek=ss.Int32.div(eh,2)+ef.pageX;var el=ss.Int32.div(ei,2)+ef.pageY;var em={pageX:ek,pageY:el,scale:ej/this.$8.distance,deltaX:ek-this.$8.pageX,deltaY:el-this.$8.pageY,startX:this.$8.pageX,startY:this.$8.pageY,deltaXSinceLast:ek-this.$6.pageX,deltaYSinceLast:el-this.$6.pageY};return em}},bF,[ss.IDisposable]);ss.initClass(db,a,{},cB,[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[cD])]);ss.initClass(dc,a,{get_viewType:function(){return db},get_viewModel:function(){return this},get_listItemCreator:function(){return this.$b},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(ef){}},cD,[ss.IDisposable,tab.IViewModel,ss.makeGenericType(cf,[Object]),bS,cq]);ss.initClass(dd,a,{});ss.initClass(df,a,{});ss.initClass(dg,a,{});ss.initClass(di,a,{});ss.initClass(dk,a,{calculateOffset:function(ef){var eg=tab.PointUtil.fromPosition(this.get_elementToChange().position());var eh={x:0,y:0};switch(this.$5){case'bottomRight':{eh.x=eg.x+tab.DoubleUtil.roundToInt(this.get_elementToChange().width())-ef.pageX;eh.y=eg.y+tab.DoubleUtil.roundToInt(this.get_elementToChange().height())-ef.pageY;break}case'topLeft':{eh.x=ef.pageX-eg.x;eh.y=ef.pageY-eg.y;break}case'left':{eh.x=ef.pageX-eg.x;break}case'right':{eh.x=eg.x+tab.DoubleUtil.roundToInt(this.get_elementToChange().width())-ef.pageX;break}case'top':{eh.y=ef.pageY-eg.y;break}case'bottom':{eh.y=eg.y+tab.DoubleUtil.roundToInt(this.get_elementToChange().height())-ef.pageY;break}}return eh},performMove:function(ef){var eg=tab.PointUtil.fromPosition(this.get_elementToChange().position());var eh=tab.DoubleUtil.roundToInt(this.get_elementToChange().width());var ei=tab.DoubleUtil.roundToInt(this.get_elementToChange().height());var ej=((this.get_documentBodySize()==='useClientSize')?tab.DomUtil.get_documentBody().clientWidth:tab.DomUtil.get_documentBody().scrollWidth);var ek=((this.get_documentBodySize()==='useClientSize')?tab.DomUtil.get_documentBody().clientHeight:tab.DomUtil.get_documentBody().scrollHeight);switch(this.$5){case'bottomRight':{this.get_elementToChange().width(Math.min(ef.pageX+this.get_offset().x,ej)-eg.x);this.get_elementToChange().height(Math.min(ef.pageY+this.get_offset().y,ek)-eg.y);break}case'topLeft':{this.get_elementToChange().width(eh+(eg.x-Math.max(ef.pageX-this.get_offset().x,0)));this.get_elementToChange().height(ei+(eg.y-Math.max(ef.pageY-this.get_offset().y,0)));tab.DomUtil.setElementPosition(this.get_elementToChange(),eg.x+eh-tab.DoubleUtil.roundToInt(this.get_elementToChange().width()),eg.y+ei-tab.DoubleUtil.roundToInt(this.get_elementToChange().height()));break}case'left':{this.get_elementToChange().width(eh+(eg.x-Math.max(ef.pageX-this.get_offset().x,0)));tab.DomUtil.setElementPosition(this.get_elementToChange(),eg.x+eh-tab.DoubleUtil.roundToInt(this.get_elementToChange().width()),eg.y);break}case'right':{this.get_elementToChange().width(Math.min(ef.pageX+this.get_offset().x,ej)-eg.x);break}case'top':{this.get_elementToChange().height(ei+(eg.y-Math.max(ef.pageY-this.get_offset().y,0)));tab.DomUtil.setElementPosition(this.get_elementToChange(),eg.x,eg.y+ei-tab.DoubleUtil.roundToInt(this.get_elementToChange().height()));break}case'bottom':{this.get_elementToChange().height(Math.min(ef.pageY+this.get_offset().y,ek)-eg.y);break}}}},cT,[ss.IDisposable,bV]);ss.initClass(dm,a,{add_contentChanged:function(ef){this.$2$1=ss.delegateCombine(this.$2$1,ef)},remove_contentChanged:function(ef){this.$2$1=ss.delegateRemove(this.$2$1,ef)},add_refresh:function(ef){this.$2$2=ss.delegateCombine(this.$2$2,ef)},remove_refresh:function(ef){this.$2$2=ss.delegateRemove(this.$2$2,ef)},get_content:function(){return this.$3},set_content:function(ef){this.$3=ef;this.raiseActionEvent(this.$2$1)},get_options:function(){return this.$4},get_scrollX:function(){return(ss.isValue(this.$4.scrollX)?this.$4.scrollX:false)},set_scrollX:function(ef){this.$4.scrollX=ef;if(this.get_hasCustomIndicator()){this.get_indicatorOptions().listenX=ef}},get_scrollY:function(){return(ss.isValue(this.$4.scrollY)?this.$4.scrollY:false)},set_scrollY:function(ef){this.$4.scrollY=ef;if(this.get_hasCustomIndicator()){this.get_indicatorOptions().listenY=ef}},get_hasScrollBars:function(){return this.get_scrollY()||this.get_scrollX()},get_hasCustomIndicator:function(){return ss.isValue(this.$4.indicators)},set_hasCustomIndicator:function(ef){if(ef){if(ss.isNullOrUndefined(this.$4.indicators)){this.get_options().indicators=new Object;this.get_options().indicators.listenX=this.get_scrollX();this.get_options().indicators.listenY=this.get_scrollY()}}else{this.get_options().indicators=null}},get_indicatorOptions:function(){return this.get_options().indicators},$0:function(ef){this.$4={};this.set_hasCustomIndicator(ef);if(tsConfig.is_mobile){this.$1()}else{this.$2()}},$2:function(){if(!this.get_hasCustomIndicator()){this.$4.scrollbars='custom';this.$4.interactiveScrollbars=true}this.$4.mouseWheel=true;this.$4.disableMouse=true},$1:function(){if(!this.get_hasCustomIndicator()){this.$4.scrollbars='custom'}},triggerRefresh:function(){this.raiseActionEvent(this.$2$2)}},x,[ss.IDisposable,tab.IViewModel]);dm.$ctor1.prototype=dm.prototype;ss.initEnum(dp,a,{iScroll:0});ss.initClass(dr,a,{});ss.initClass(ds,a,{get_className:function(){var ef=[ss.makeGenericType(z,[Object]).prototype.get_className.call(this)];ef.push('selectable');if(this.props.isSelected){ef.push('selected');if(this.props.isButtonTextMarkedAsExcluded){ef.push('excluded')}}else{ef.push('unselected');ef.push('tab-DesignTint')}return ef.join(' ')}},ss.makeGenericType(z,[Object]));ss.initClass(dt,a,{$7:function(){return this.state.currentSelection},$6:function(){return this.props.showApplyAndCancelButtons&&!ss.referenceEquals(this.state.currentSelection,this.state.currentlyAppliedSelection)},$1:function(ef){var eg=ef;if(ss.isValue(eg)){eg=eg.clone()}return{currentlyAppliedSelection:ef,currentSelection:eg}},componentWillReceiveProps:function(ef){if(!ss.referenceEquals(ef.selection,this.state.currentlyAppliedSelection)){this.setState(this.$1(ef.selection))}},$0:function(){if(ss.referenceEquals(this.$7(),this.state.currentlyAppliedSelection)){return}this.setState(this.$1(this.$7()));if(!ss.staticEquals(this.props.onSelectionChanged,null)){this.props.onSelectionChanged(this.$7())}},$5:function(){this.setState(this.$1(this.state.currentlyAppliedSelection))},render:function(){var ef=this.props.allOption&&this.$7().groupSize>0;var eg;eg=df.generateUniqueKeys(String).call(null,_.map(this.props.items,function(ej){return ej.label}),[(ef?'__ALL__':null)]);var eh=(!ss.isNullOrEmptyString(this.props.className)?('tab-vScrollable '+this.props.className):'tab-vScrollable');if(this.props.showApplyAndCancelButtons){eh+=' apply-cancel'}var ei='tab-SelectableButtonGroup'+(this.props.hasAnyIcons?' hasIcons':'');return bj.div({className:ei},bj.div({className:eh,role:'listbox'},(ef?ss.mkdel(this,function(){return React.createElement(ds,{border:this.props.borders,label:this.props.allItem.label,tooltip:this.props.allItem.tooltip,buttonStyle:this.props.buttonStyle,labelStyle:this.props.labelStyle,isSelected:this.$7().get_theAllItemIsSelected(),isButtonTextMarkedAsExcluded:false,onTap:ss.mkdel(this,function(ej){this.$3()}),key:'__ALL__',getCustomContentBefore:this.props.allItem.getCustomContentBefore,getCustomContentAfter:this.props.allItem.getCustomContentAfter,additionalRoles:['option']})})():null),_.map(this.props.items,ss.mkdel(this,function(ej,ek){return React.createElement(ds,{border:this.props.borders,disabled:ej.disabled,label:ej.label,tooltip:ej.tooltip,buttonStyle:this.props.buttonStyle,labelStyle:this.props.labelStyle,isSelected:this.$7().isSelected(ek),isButtonTextMarkedAsExcluded:this.props.isSelectionExclusive,onTap:ss.mkdel(this,function(el){this.$4(ek)}),key:eg[ek],testId:ej.testId,getCustomContentBefore:ej.getCustomContentBefore,getCustomContentAfter:ej.getCustomContentAfter,tabIndex:(ej.isTabbable?0:null),additionalRoles:['option']})}))),(this.props.showApplyAndCancelButtons?ss.mkdel(this,function(){return bj.div({className:'tab-ApplyCancelPanel'},React.createElement(A,{label:this.props.applyButtonLabel,customClassName:'apply',border:false,onTap:ss.mkdel(this,function(ej){this.$0()}),disabled:!this.$6()}),React.createElement(A,{label:this.props.cancelButtonLabel,customClassName:'cancel',border:false,onTap:ss.mkdel(this,function(ej){this.$5()}),disabled:!this.$6()}))})():null))},$3:function(){this.$7().handleTapAll();this.$2()},$4:function(ef){this.$7().handleTap(ef);this.$2()},$2:function(){if(this.props.showApplyAndCancelButtons){this.setState(this.state)}else{this.$0()}}},React.Component);ss.initClass(du,a,{});ss.initClass(dw,a,{get_selecting:function(){return this.$1},get_shiftKey:function(){return this.$2},get_ctrlKey:function(){return this.$0}},ss.CancelEventArgs);ss.initEnum(dx,a,{single:0,multiGrouped:1,multiToggle:2});ss.initClass(dy,a,{didMount:function(ef,eg){var eh={};if(!ss.staticEquals(eg.pointerClick,null)){eh.tap=function(ei){eg.pointerClick(ei.reactEvent)}}if(!ss.staticEquals(eg.pointerDown,null)){eh.firstTouch=function(ei){eg.pointerDown(ei.reactEvent)}}if(!ss.staticEquals(eg.pointerUp,null)){eh.lastTouch=function(ei){eg.pointerUp(ei.reactEvent)}}this.$0.updateEventHandleSpec(ef,eh)},getHtmlAttributes:function(ef){return this.$0.get_eventHandlingAttributesForReact()},willUnmount:function(){this.$0.dispose()}},null,[Object]);ss.initClass(dz,a,{get_minWidth:function(){return this.$1$1},set_minWidth:function(ef){this.$1$1=ef}});ss.initClass(dB,a,{get_dimensions:function(){return this.$0},get_getVisibleRoomFunc:function(){return this.$1},getVisibleRoom:function(ef){if(!ss.staticEquals(this.get_getVisibleRoomFunc(),null)){return this.get_getVisibleRoomFunc()(ef)}var eg=2147483647;return{roomAbove:2147483647,roomBelow:2147483647,roomLeft:2147483647,roomRight:2147483647}}});ss.initClass(dC,a,{componentDidMount:function(){bH.add_firstTouch(ss.mkdel(this,this.$2));bH.add_dismissTemporaryElements(ss.mkdel(this,this.$1));$(window).on('resize'.toString(),ss.mkdel(this,this.$0))},componentWillUnmount:function(){bH.remove_firstTouch(ss.mkdel(this,this.$2));bH.remove_dismissTemporaryElements(ss.mkdel(this,this.$1));$(window).off('resize'.toString(),ss.mkdel(this,this.$0))},componentDidUpdate:function(){if(this.props.isSelecting){dB.getViewport(ss.mkdel(this,this.$4))}},$2:function(ef,eg){if(ss.isValue(this.$6)&&this.$6.contains(ef.target)){return}this.props.onFocusLost()},$1:function(){this.props.onFocusLost()},$0:function(ef){if(this.props.isSelecting){dB.getViewport(ss.mkdel(this,this.$4))}},$4:function(ef){var eg=ReactDOM.findDOMNode(this.refs['selector']);var eh=ReactDOM.findDOMNode(this.refs['relative']);if(ss.isNullOrUndefined(eg)||ss.isNullOrUndefined(eh)){return}var ei=$(eg);var ej=this.props.getDesiredHeight(ei);var ek=$(eh);var el=tab.PointUtil.fromPosition(ek.offset());var em=ef.getVisibleRoom(el);var en=ek.innerHeight();var eo=em.roomBelow-en-3;var ep=em.roomAbove-3;var eq=eo>=Math.min(ej,ep);var er=(eq?eo:ep);ej=Math.min(ej,ss.Int32.trunc(er));var es=(eq?'auto':(en+'px'));var et=(eq?(en+'px'):'auto');ei.css('bottom',es);ei.css('top',et);ei.height(ej);if(!ss.staticEquals(this.props.getMinimumWidth,null)){var eu=this.props.getMinimumWidth(ei);if(eu>em.roomRight){var ev=eu-em.roomRight+13;ei.css('left',-1*ev+'px')}ei.css('min-width',eu)}},$3:function(ef){if(!ss.staticEquals(this.props.onKeyDown,null)){this.props.onKeyDown(ef)}},render:function(){var ef='tab-Dropdown';if(!ss.isNullOrUndefined(this.props.styleClass)){ef+=' '+this.props.styleClass}return bj.div({className:ef,role:'combobox',onKeyDown:ss.mkdel(this,this.$3),'aria-expanded':this.props.isSelecting,ref:this.$5},bt.div({tap:ss.mkdel(this,function(eg){this.props.onSelectorToggled()})},{className:'tab-DropdownButton',role:'button',tabIndex:ss.coalesce(this.props.tabIndex,0),ref:'relative'},[this.props.renderButton()]),(this.props.isSelecting?this.renderSelector():null))},renderSelector:function(){return[bj.div({className:'tab-SelectorContainerOuter',key:'selector-container-outer',ref:'selector'},bj.div({className:'tab-SelectorContainer',key:'selector-container'},this.props.children))]}},React.Component);ss.initClass(dD,a,{$l:function(){if(ss.isNullOrUndefined(this.$o)){return null}var ef=this.$o.value;if(ss.isNullOrEmptyString(ef)){return null}var eg=parseInt(tableau.format.convertFullwidthNumberToAscii(ef));return this.$i(eg)},$m:function(){if(ss.isNullOrUndefined(this.$p)){return 0}var ef=parseInt(this.$p.value);return this.$i(ef)},componentWillMount:function(){this.$0()},componentWillUnmount:function(){this.$e()},$0:function(){this.$h();bH.add_dragEnd(ss.mkdel(this,this.$3))},$e:function(){bH.remove_dragEnd(ss.mkdel(this,this.$3))},$h:function(){this.$n=false},$3:function(ef,eg){if(this.$n){this.$2(this.$m(),false);this.$h()}},$f:function(){var ef={type:'range',value:this.props.value.toString(),min:this.props.minValue,max:this.props.maxValue,className:'tabHorizontalSlider',style:{width:this.props.width},disabled:this.props.disabled,onInput:ss.mkdel(this,this.$6),onChange:ss.mkdel(this,this.$6),onMouseUp:ss.mkdel(this,this.$8),onMouseDown:ss.mkdel(this,this.$7),onTouchEnd:ss.mkdel(this,this.$9),onTouchStart:ss.mkdel(this,this.$a),ref:ss.mkdel(this,this.$k),key:'sliderInput'};return bj.input(ef)},$g:function(){var ef={type:'text',value:(this.props.emptyTextBox?'':this.props.value.toString()),className:'tabHorizontalSliderPercentageText',disabled:this.props.disabled,onInput:ss.mkdel(this,this.$c),onChange:ss.mkdel(this,this.$c),onKeyUp:ss.mkdel(this,this.$d),onBlur:ss.mkdel(this,this.$b),ref:ss.mkdel(this,this.$j),key:'sliderBox'};if(ss.isValue(this.props.tabIndex)){ef.tabIndex=ss.unbox(this.props.tabIndex)}return bj.input(ef)},render:function(){var ef=[];if(this.props.showValueTextBox){var eg=this.$g();ef.push(eg);if(this.props.showPercentageSign){ef.push(bj.div({className:'tabHorizontalSliderPercentageSign',key:'percentageSign'},'%'))}}var eh=this.$f();return bj.div({className:this.props.styleClass+(this.props.disabled?' disabled':'')+(ss.isNullOrUndefined(this.props.extraCssClass)?'':(' '+this.props.extraCssClass))},bj.div({className:'unification-slider-control tabHorizontalSliderContainer'},eh),ef)},$b:function(ef){this.$2(ss.coalesce(this.$l(),0),false)},$d:function(ef){if(ef.which===13){this.$2(ss.coalesce(this.$l(),0),true)}},$c:function(ef){this.$1(this.$l())},$8:function(ef){this.$4()},$7:function(ef){this.$5()},$9:function(ef){this.$4()},$a:function(ef){this.$5()},$5:function(){this.$n=true},$4:function(){if(this.$n){this.$2(this.$m(),false)}else{this.$1(this.$m())}},$6:function(ef){this.$1(this.$m())},$1:function(ef){if(this.props.disabled){return}this.props.displayValueChanged(ef)},$2:function(ef,eg){if(this.props.disabled){return}this.props.commitValue(ef,eg)},$k:function(ef){this.$p=null;if(ss.isValue(ef)){this.$p=ef}},$j:function(ef){this.$o=null;if(ss.isValue(ef)){this.$o=ef}},$i:function(ef){if(_.isNaN(ef)||ef<this.props.minValue){return this.props.minValue}else if(ef>this.props.maxValue){return this.props.maxValue}return ef}},de);ss.initClass(dE,a,{},cs,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(dF,a,{updateWidgetState:function(ef){this.get_widget().set_label(ef.label);this.get_widget().set_disabled(ss.coalesce(ef.disabled,false));this.get_widget().set_hoverTooltipText(ef.tooltipText)},handleWidgetPropertyChanged:function(ef,eg){}},ss.makeGenericType(dj,[cs,Object,Object]));ss.initClass(dG,a,{});ss.initClass(dH,a,{add_tabChanged:function(ef){this.$1$1=ss.delegateCombine(this.$1$1,ef)},remove_tabChanged:function(ef){this.$1$1=ss.delegateRemove(this.$1$1,ef)},get_domRoot:function(){return this.$5.get_root()},get_tabs:function(){return this.$5.get_tabs()},get_contentArea:function(){return this.$5.get_contentArea()},get_activeTabId:function(){return this.$4},set_activeTabId:function(ef){if(!ss.referenceEquals(this.$4,ef)){this.$4=ef;if(ss.isValue(this.$1$1)){this.$1$1()}}},addTab:function(ef,eg,eh,ei){if(ss.keyExists(this.$3,ef)){return}var ej=this.$5.createTabLabel(ef,eg);ej.domRoot.addClass('tabTabLabelId-'+ef);var ek=new dO(ej.domRoot);var el=ss.mkdel(this,function(em,en){if(en.get_propertyName()==='selected'&&ek.get_selected()){this.$0(eh.get_rootElement(),ef)}});ek.add_propertyChanged(el);this.$2.add$1(new tab.CallOnDispose(function(){ek.remove_propertyChanged(el)}));this.$2.add$1(ek);this.$1.addItem(ek);this.$3[ef]=ek;this.$5.get_tabs().append(ej.domRoot);eh.addToDom(this.$5.get_contentArea());if(ei){this.selectTab(ef)}else{ek.set_disabled(true)}},selectTab:function(ef){if(!ss.keyExists(this.$3,ef)){return}this.$1.selectItem(this.$3[ef])},enableTab:function(ef,eg){if(!ss.keyExists(this.$3,ef)){return}this.$3[ef].set_disabled(!eg);this.selectTab(this.get_activeTabId())},dispose:function(){this.$2.dispose();this.$1.dispose()},$0:function(ef,eg){this.$5.get_contentArea().children().hide();ef.show();this.set_activeTabId(eg)}},null,[ss.IDisposable]);ss.initClass(dI,a,{$9:function(ef){this.$1$1=ss.delegateCombine(this.$1$1,ef)},$a:function(ef){this.$1$1=ss.delegateRemove(this.$1$1,ef)},$5:function(ef){this.$1$2=ss.delegateCombine(this.$1$2,ef)},$6:function(ef){this.$1$2=ss.delegateRemove(this.$1$2,ef)},$7:function(ef){this.$1$3=ss.delegateCombine(this.$1$3,ef)},$8:function(ef){this.$1$3=ss.delegateRemove(this.$1$3,ef)},$b:function(ef){this.$1$4=ss.delegateCombine(this.$1$4,ef)},$c:function(ef){this.$1$4=ss.delegateRemove(this.$1$4,ef)},get_stopPropagationOnEvent:function(){return this.$4},set_stopPropagationOnEvent:function(ef){this.$4=ef},dispose:function(){if(ss.isValue(this.handler)){this.handler.dispose();this.handler=null}this.$1.dispose()},onPress:function(ef){this.$9(ef);this.$1.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$a(ef)})));return this},onClick:function(ef){this.$5(ef);this.$1.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$6(ef)})));return this},onDoubleClick:function(ef){this.$7(ef);this.$1.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$8(ef)})));this.$0('doubleTap',ss.mkdel(this,this.handleDoubleClickEvent));return this},onRightClick:function(ef){this.$b(ef);this.$1.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$c(ef)})));return this},$0:function(ef,eg){if(!bv.isHandling(this.eventConfig,ef)){var eh={};bv.setHandler(eh,ef,eg);this.handler.update(eh);$.extend(this.eventConfig,eh)}},raiseEvent:function(ef,eg,eh){if(ss.isValue(eg)){if(eh){ef.stopPropagation()}eg(ef)}},handlePressEvent:function(ef){this.$2=ef.pageX;this.$3=ef.pageY;this.raiseEvent(ef,this.$1$1,false)},handleClickEvent:function(ef){this.raiseEvent(ef,this.$1$2,this.$4);if(ef.type==='touchend'){F.preventGhostClick(this.$2,this.$3,ef.target)}},handleDoubleClickEvent:function(ef){this.raiseEvent(ef,this.$1$3,this.$4)},handleRightClickEvent:function(ef){ef.preventDefault();this.raiseEvent(ef,this.$1$4,this.$4)}},null,[ss.IDisposable]);ss.initClass(dJ,a,{get_domElement:function(){return this.config.domElem},setupEventRecognizer:function(ef){this.$2=new bx(ef);this.$2.setupPressDrag(ef)},suppressHover:function(){if(bv.isUsingHover(this.config)){this.$2.suppressHover()}},unsuppressHover:function(){if(bv.isUsingHover(this.config)){this.$2.unsuppressHover()}},cancelHover:function(){if(bv.isUsingHover(this.config)){this.$2.cancelHover()}},getHandledEvents:function(){var ef=[];var eg=this.config;var eh=ss.getEnumerator(Object.keys(eg));try{while(eh.moveNext()){var ei=eh.current();if(ss.isValue(eg[ei])&&ss.referenceEquals(ss.getInstanceType(eg[ei]),Function)){ef.push(ei)}}}finally{eh.dispose()}return ef},update:function(ef){$.extend(this.config,ef);this.$2.updateAllGestures(this.config);this.$2.setupPressDrag(this.config)},destroy:function(){this.dispose()},dispose:function(){if(ss.isValue(this.$3)){var ef=ss.getEnumerator(cW.get_allHandledEvents());try{while(ef.moveNext()){var eg=ef.current();this.$3.domElement.removeEventListener(eg.toString(),this.$3.eventHandler)}}finally{ef.dispose()}}if(ss.isValue(this['debugger'])){this['debugger']['destroy']()}this.$2.dispose()},configureDomElem:function(ef){if(!ss.equalsT(ef.tagName.toLowerCase(),'input')&&(ss.isNullOrUndefined(ef.style['user-select'])||ss.staticEquals(ef.style['user-select'],''))&&(ss.isNullOrUndefined(ef.style['-webkit-user-select'])||ss.staticEquals(ef.style['-webkit-user-select'],''))){ef.style['-webkit-user-select']='none'}ef.style['-webkit-touch-callout']='none';ef.style['-webkit-tap-highlight-color']='transparent';ef.style['-ms-touch-action']='none'},$1:function(ef){if(ef.touches.length>1&&!ef.get_allTouchesShareCurrentTarget()){this.$2.cancelAllGestures();return true}return false},handler:function(ef){var eg=!tsConfig.is_mobile&&ef.get_isTouchEvent();var eh=tab.DomUtil.handleTouchEvents(ef.target);if(eg&&!eh){return}else if(eg&&eh){if(ss.keyExists(ef.originalEvent,'preventDefault')){ef.originalEvent.preventDefault()}}if(this.$1(ef)){return}this.$2.handleEvent(ef,this.config)},$0:function(ef){var eg=ss.mkdel(this,function(ej){var ek=cW.create(ej,this.config.domElem,null);this.handler(ek)});this.$3={domElement:ef,eventHandler:eg};var eh=ss.getEnumerator(cW.get_allHandledEvents());try{while(eh.moveNext()){var ei=eh.current();ef.addEventListener(ei.toString(),eg,false)}}finally{eh.dispose()}}},null,[ss.IDisposable]);dJ.$ctor1.prototype=dJ.prototype;ss.initClass(dK,a,{get_eventHandlingAttributesForReact:function(){return this.$2$1},set_eventHandlingAttributesForReact:function(ef){this.$2$1=ef},updateEventHandleSpec:function(ef,eg){this.config=eg||{};this.config.domElem=ef;this.configureDomElem(ef);this.setupEventRecognizer(this.config)},$4:function(){var ef={};var eg=ss.mkdel(this,function(ek){var el=cW.create(ek.nativeEvent,this.config.domElem,ek);this.handler(el)});var eh=ss.getEnumerator(cW.get_allHandledEvents());try{while(eh.moveNext()){var ei=eh.current();var ej=dK.$0(ei);if(ss.isValue(ej)){ef[ej]=eg}else{}}}finally{eh.dispose()}return ef}},dJ,[ss.IDisposable]);ss.initClass(dM,a,{render:function(){var ef='tab-SelectionText'+(this.props.isSelectionTextMarkedAsExcluded?' excluded':'');var eg=ss.coalesce(this.props.styleClass,'tab-unification-outline-dropdown');return React.createElement(bE,{styleClass:'tab-TextDropdownButton '+eg,selectionDisplay:ss.mkdel(this,function(){return[(!ss.isNullOrEmptyString(this.props.selectionIconClass)?ss.mkdel(this,function(){return bj.span({className:'tab-Icon '+this.props.selectionIconClass,key:'icon'})})():null),bj.span({className:ef,key:'text'},this.props.selectionText)]})})}},de);ss.initClass(dP,a,{add_toggled:function(ef){this.$2$1=ss.delegateCombine(this.$2$1,ef)},remove_toggled:function(ef){this.$2$1=ss.delegateRemove(this.$2$1,ef)},get_toggleValue:function(){return this.$0},set_toggleValue:function(ef){if(ef!==this.get_toggleValue()){this.raiseToggled()}this.$0=ef},get_data:function(){return this.$2$2},set_data:function(ef){this.$2$2=ef},raiseToggled:function(){if(!ss.staticEquals(this.$2$1,null)){this.$2$1()}}},x,[ss.IDisposable,tab.IViewModel]);ss.initEnum(dQ,a,{left:0,center:1,right:2});ss.initEnum(dR,a,{left:0,right:1});ss.initEnum(dS,a,{blockAndAutoHide:0,doNotBlockAndAutoHide:1,doNotBlockAndStayOpen:2});ss.initClass(dT,a,{isPopupHeightLimited:function(){return this.limitPopupHeight||ss.isValue(this.maxPopupHeight)}});dT.$ctor1.prototype=dT.prototype;ss.initClass(dU,a,{get_caretHeight:function(){if(!ss.isValue(dU.$1)){dU.$1=tab.DoubleUtil.roundToInt(this.caret.outerHeight())}return ss.unbox(dU.$1)}},dL,[ss.IDisposable]);ss.initEnum(dV,a,{standard:0,minimalist:1});ss.initClass(dW,a,{get_uberPopupShadowHeight:null,get_uberPopupMinimalistShadowHeight:function(){return 0},get_width:function(){return this.element.outerWidth(false)},get_height:function(){return this.element.outerHeight(false)},get_dom:function(){return this.get_template()},$6:function(){this.element.attr('tabindex','-1').on('keydown',ss.mkdel(this,function(ef){if(ef.which===27&&!(ef.metaKey||ef.shiftKey||ef.ctrlKey||ef.altKey)){this.get_viewModel().hide(false);ef.preventDefault();ef.stopPropagation()}}));if(this.get_viewModel().options.popupMode===0){this.get_viewModel().add_shown(ss.mkdel(this,function(){bC.trapFocus(this.element)}))}},dispose:function(){this.disposeContent();this.popupViewModel.remove_shown(ss.mkdel(this,this.shown));this.popupViewModel.remove_hidden(ss.mkdel(this,this.hidden));this.disposeGlass();this.$a();ss.makeGenericType(w,[dX]).prototype.dispose.call(this)},disposeContent:function(){if(ss.isValue(this.contentView)){this.contentView.dispose()}},updateMode:function(){if(!this.visible){return}switch(this.popupViewModel.get_mode()){case 0:{this.$a();this.showGlass();break}case 1:{this.hideGlass();this.$5();break}case 2:{this.$a();this.hideGlass();break}}},onViewModelPropertyChanged:function(ef,eg){if(eg.get_propertyName()==='mode'){this.updateMode()}else if(eg.get_propertyName()==='size'){this.positionPopup()}else if(eg.get_propertyName()==='content'){this.updateContent()}},shown:function(){var ef=this.get_viewModel().options;this.updateContent();this.visible=true;this.updateMode();if(ef.theme===1){this.element.addClass('tabUberPopupMinimal')}if(ef.useCaret){this.get_dom().domRoot.addClass('tabUberCaretStyle')}this.element.css('left','0px').css('top','0px');this.element.appendTo('body');this.contentView.addToDom(this.get_template().content);if(ss.isValue(ef.additionalClassNames)){ef.additionalClassNames.forEach(ss.mkdel(this,function(eg){this.element.addClass(eg)}))}if(this.popupViewModel.options.isToolbarFlyout&&tsConfig.is_mobile){this.element.show();this.positionPopup()}else{this.element.hide();this.positionPopup();this.element.show();if(this.get_viewModel().options.focusOnShown){window.setTimeout(ss.mkdel(this,function(){if(!$.contains(this.element[0],document.activeElement)){this.element.focus()}}))}}},hidden:function(){this.visible=false;this.hideGlass();this.element.hide();this.element.detach()},showGlass:function(){if(ss.isNullOrUndefined(this.glass)){this.glass=new bG;this.glass.set_zIndex(this.popupViewModel.options.glassZIndex);this.glass.add_click(ss.mkdel(this,this.glassClicked))}this.glass.show()},hideGlass:function(){if(ss.isValue(this.glass)){this.glass.hide()}},disposeGlass:function(){if(ss.isValue(this.glass)){this.glass.remove_click(ss.mkdel(this,this.glassClicked));this.glass.dispose();this.glass=null}},glassClicked:function(){this.element.fadeOut(50,ss.mkdel(this,function(){this.popupViewModel.hide(true)}))},$5:function(){bH.add_firstTouch(ss.mkdel(this,this.$8));bH.add_dismissTemporaryElements(ss.mkdel(this,this.$7))},$a:function(){bH.remove_firstTouch(ss.mkdel(this,this.$8));bH.remove_dismissTemporaryElements(ss.mkdel(this,this.$7))},$8:function(ef,eg){if(this.get_template().domRoot.get(0).contains(ef.target)){return}if(ss.isValue(this.popupViewModel.options.globalTouchWhitelist)){for(var eh=0;eh<this.popupViewModel.options.globalTouchWhitelist.length;eh++){var ei=this.popupViewModel.options.globalTouchWhitelist[eh];if(ei.contains(ef.target)){return}}}this.popupViewModel.hide(false)},$7:function(){this.popupViewModel.hide(false)},positionPopup:function(){if(ss.isNullOrUndefined(this.get_viewModel().get_relativeElement())||this.get_viewModel().get_relativeElement().length<1){return}this.get_viewModel().get_resizeContent()(this.get_template().content,this.element);this.element.css('z-index',this.popupViewModel.options.glassZIndex+1);var ef=this.get_viewModel().options;if(!ef.isPopupHeightLimited()){this.element.css('max-height','100%')}this.positionPopupHorizontally();if(ef.isToolbarFlyout){this.$9()}else{this.positionPopupVertically()}this.get_dom().caret.toggle(ef.useCaret);this.get_dom().caretBorder.toggle(ef.useCaret)},positionPopupHorizontally:function(){var ef=this.get_viewModel().options;var eg=this.get_viewModel().get_relativeElement();var eh=$(eg.prop('ownerDocument'));var ei=this.get_width();var ej=tab.DomUtil.getPageOffset$1(eg).left;if(ef.horizontalAlign===1){ej+=eg.outerWidth(false)/2;ej-=ei/2}else if(ef.horizontalAlign===2){ej+=eg.outerWidth(false);ej-=ei}var ek=ej+ei-eh.width();if(ek>0){ej-=ek}if(ef.horizontalAttach===0){this.element.css('right','');this.element.css('left',Math.max(ej,0)+'px')}else{var el=$('body').outerWidth(true);var em=el-(ej+ei);em-=Math.max(0,em+ei-el);this.element.css('left','');this.element.css('right',em+'px')}if(ef.isToolbarFlyout){this.element.css('min-width',tab.DoubleUtil.roundToInt(eg.outerWidth(false)))}},$9:function(){var ef=this.get_viewModel().options;var eg=this.get_viewModel().get_relativeElement();var eh=$('body');var ei=tab.DomUtil.getPageOffset$1(eg).top;if(ef.preferUp){ei+=1;ei+=(ef.coverRelativeElement?eg.outerHeight(false):0);var ej=eh.outerHeight(true);this.element.css('top','');this.element.css('bottom',ss.Int32.trunc(ej-ei)+'px')}else{ei-=1;ei+=(ef.coverRelativeElement?0:eg.outerHeight(false));this.element.css('bottom','');this.element.css('top',ss.Int32.trunc(ei)+'px')}},positionPopupVertically:function(){var ef=this.get_viewModel().options;var eg=this.get_viewModel().get_relativeElement();var eh=tab.DomUtil.getPageOffset$1(eg);var ei=tab.DomUtil.roomAroundPosition(eh);var ej=eg.outerHeight(false);var ek=((ef.theme===1)?this.get_uberPopupMinimalistShadowHeight():this.get_uberPopupShadowHeight());if(ef.isPopupHeightLimited()){this.$b(ei,ek,ej)}var el=this.get_height();var em=ei.roomBelow>=el+ej+ek;var en=ei.roomAbove>el+ek;var eo=this.popupViewModel.options.useCaret;if(eo){en=ei.roomAbove>el+this.get_dom().get_caretHeight()+4+ek}var ep=eh.top+ej;var eq=eh.top-el;var er;if(ef.preferUp&&en){er=eq}else if(em&&!eo){er=ep}else if(en){er=eq}else if(ei.roomBelow>=ei.roomAbove&&!eo){er=eh.top-(el-ei.roomBelow+ek)}else{er=eh.top-ei.roomAbove+ek}if(eo){er-=this.get_dom().get_caretHeight()+4}this.element.css('top',er+'px')},$b:function(ef,eg,eh){var ei=this.get_viewModel().options;var ej=null;if(ei.limitPopupHeight){ej=Math.max(ef.roomAbove,ef.roomBelow-eh)-eg}if(ss.isValue(ei.maxPopupHeight)){var ek=ej;if(ss.isNullOrUndefined(ek)){ek=Number.MAX_VALUE}var el=ek;ej=Math.min(el,ss.unbox(ei.maxPopupHeight))}if(ss.isValue(ej)){this.element.css('max-height',ej+'px')}},updateContent:function(){this.disposeContent();var ef=this.get_template().content;ef.children().detach();this.contentView=this.get_viewModel().createContentView();if(this.visible){this.contentView.addToDom(ef)}}},ss.makeGenericType(w,[dX]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[dX])]);ss.initClass(dX,a,{add_shown:function(ef){this.$2$1=ss.delegateCombine(this.$2$1,ef)},remove_shown:function(ef){this.$2$1=ss.delegateRemove(this.$2$1,ef)},add_hidden:function(ef){this.$2$2=ss.delegateCombine(this.$2$2,ef)},remove_hidden:function(ef){this.$2$2=ss.delegateRemove(this.$2$2,ef)},add_commit:function(ef){this.$2$3=ss.delegateCombine(this.$2$3,ef)},remove_commit:function(ef){this.$2$3=ss.delegateRemove(this.$2$3,ef)},get_mode:function(){return this.options.popupMode},set_mode:function(ef){if(this.options.popupMode===ef){return}this.options.popupMode=ef;this.notifyPropertyChanged('mode')},get_content:function(){return this.$0},set_content:function(ef){this.$0=ef;if(ss.isValue(this.$0)){this.$0.updateUberPopupViewModel(this)}this.notifyPropertyChanged('content');this.notifyPropertyChanged('size')},set_disposeOnHide:function(ef){this.remove_hidden(ss.mkdel(this,this.dispose));if(ef){this.add_hidden(ss.mkdel(this,this.dispose))}},get_relativeElement:function(){return this.$1()},set_relativeElement:function(ef){this.$1=function(){return ef}},get_resizeContent:function(){return this.$2$4},set_resizeContent:function(ef){this.$2$4=ef},createContentView:function(){return tab.ObjectRegistry.newView$1(ss.makeGenericType(tab.IView$1,[tab.IViewModel])).call(null,this.get_content().get_viewType(),[this.get_content().get_viewModel()])},updatePosition:function(){this.notifyPropertyChanged('size')},show:function(){if(ss.isNullOrUndefined(this.$2$1)){return}this.$2$1()},hide:function(ef){if(ef&&ss.isValue(this.$2$3)){this.$2$3()}this.raiseActionEvent(this.$2$2)},addDisposables:function(ef){this.disposables.add$1(ef)}},x,[ss.IDisposable,tab.IViewModel]);dX.$ctor1.prototype=dX.prototype;ss.initClass(dY,a,{});ss.initClass(dZ,a,{},cO);ss.initClass(ea,a,{},cO);ss.initClass(eb,a,{render:function(){var ef=this.state.displayValue;if(this.props.disabled&&ss.isValue(this.props.disabledText)){ef=this.props.disabledText}var eg={type:'text',value:ef,onChange:ss.mkdel(this,this.$8),onBlur:ss.mkdel(this,this.$0),disabled:this.props.disabled,maxLength:this.props.maxLength,onKeyDown:ss.mkdel(this,this.$5),onKeyUp:ss.mkdel(this,this.$6)};var eh=bj.input(eg);var ei=bj.div({className:'tab-unification-spinner-btn-group tab-unification-spinner-btn-group-vertical'},bt.div({tap:ss.mkdel(this,function(ek){this.$7()})},{className:'tab-unification-spinner-btn'},[bj.span({className:'tab-img-triangle-up'})]),bt.div({tap:ss.mkdel(this,function(ek){this.$2()})},{className:'tab-unification-spinner-btn'},[bj.span({className:'tab-img-triangle-down'})]));var ej=bj.div({className:'tab-unification-spinner-ctrl'+(this.props.disabled?' disabled':'')},eh,ei);if(ss.isValue(this.props.label)){ej=bj.div(null,bj.span({className:'tab-unification-spinner-label'+(this.props.disabled?' disabled':'')},this.props.label),ej)}ej=bj.div({className:ss.coalesce(this.props.styleClass,'tab-outline-spinner')},ej);if(ss.isValue(this.props.extraCssClass)){ej=bj.div({className:this.props.extraCssClass},ej)}return ej},componentWillReceiveProps:function(ef){this.setState(eb.$0(ef.initialValue))},componentWillUnmount:function(){this.$1()},$8:function(ef){this.$1();var eg=ef.target;this.setState({value:this.state.value,pendingValue:this.state.pendingValue,displayValue:eg.value})},$0:function(ef){this.$1();var eg={};if(!ss.Int32.tryParse(this.state.displayValue,eg)){eg.$=this.state.value}this.$a(eg.$)},$5:function(ef){var eg=this.state.pendingValue;switch(ef.keyCode){case 38:{this.$1();eg+=this.props.stepSize;this.$9(eg);this.$b(eg);break}case 40:{this.$1();eg-=this.props.stepSize;this.$9(eg);this.$b(eg);break}case 13:{this.$0(null);break}}},$b:function(ef){if(this.props.updateWhenKeyDown){this.$3(ef)}},$6:function(ef){if(this.props.updateWhenKeyDown){return}switch(ef.keyCode){case 38:case 40:{this.$3(this.state.pendingValue);break}}},$7:function(){if(this.props.disabled){return}this.$3(this.state.pendingValue+this.props.stepSize)},$2:function(){if(this.props.disabled){return}this.$3(this.state.pendingValue-this.props.stepSize)},$3:function(ef){this.$1();if(this.props.actionDelay===0){this.$a(ef)}else{this.$9(ef);this.$c=window.setTimeout(ss.mkdel(this,function(){this.$a(this.state.pendingValue)}),this.props.actionDelay)}},$1:function(){this.$c=tab.MiscUtil.clearTimeout(this.$c)},$a:function(ef){ef=this.$4(ef);var eg=ef!==this.state.value;this.setState(eb.$0(ef));if(eg&&!ss.staticEquals(this.props.onValueChanged,null)){this.props.onValueChanged(ef)}},$4:function(ef){if(ss.isValue(this.props.minValue)){ef=Math.max(ef,ss.unbox(this.props.minValue))}if(ss.isValue(this.props.maxValue)){ef=Math.min(ef,ss.unbox(this.props.maxValue))}return ef},$9:function(ef){ef=this.$4(ef);this.setState({value:this.state.value,pendingValue:ef,displayValue:ef.toString()})}},React.Component);ss.initClass(ec,a,{});ss.initClass(ee,a,{});(function(){bj.a=bj.$0('a');bj.abbr=bj.$0('abbr');bj.address=bj.$0('address');bj.area=bj.$0('area');bj.article=bj.$0('article');bj.aside=bj.$0('aside');bj.audio=bj.$0('audio');bj.b=bj.$0('b');bj.base=bj.$0('base');bj.bdi=bj.$0('bdi');bj.bdo=bj.$0('bdo');bj.big=bj.$0('big');bj.blockquote=bj.$0('blockquote');bj.body=bj.$0('body');bj.br=bj.$0('br');bj.button=bj.$0('button');bj.canvas=bj.$0('canvas');bj.caption=bj.$0('caption');bj.cite=bj.$0('cite');bj.code=bj.$0('code');bj.col=bj.$0('col');bj.colgroup=bj.$0('colgroup');bj.data=bj.$0('data');bj.datalist=bj.$0('datalist');bj.dd=bj.$0('dd');bj.del=bj.$0('del');bj.details=bj.$0('details');bj.dfn=bj.$0('dfn');bj.dialog=bj.$0('dialog');bj.div=bj.$0('div');bj.dl=bj.$0('dl');bj.dt=bj.$0('dt');bj.em=bj.$0('em');bj.embed=bj.$0('embed');bj.fieldset=bj.$0('fieldset');bj.figcaption=bj.$0('figcaption');bj.figure=bj.$0('figure');bj.footer=bj.$0('footer');bj.form=bj.$0('form');bj.h1=bj.$0('h1');bj.h2=bj.$0('h2');bj.h3=bj.$0('h3');bj.h4=bj.$0('h4');bj.h5=bj.$0('h5');bj.h6=bj.$0('h6');bj.head=bj.$0('head');bj.header=bj.$0('header');bj.hgroup=bj.$0('hgroup');bj.hr=bj.$0('hr');bj.html=bj.$0('html');bj.i=bj.$0('i');bj.iframe=bj.$0('iframe');bj.img=bj.$0('img');bj.input=bj.$0('input');bj.ins=bj.$0('ins');bj.kbd=bj.$0('kbd');bj.keygen=bj.$0('keygen');bj.label=bj.$0('label');bj.legend=bj.$0('legend');bj.li=bj.$0('li');bj.link=bj.$0('link');bj.main=bj.$0('main');bj.map=bj.$0('map');bj.mark=bj.$0('mark');bj.menu=bj.$0('menu');bj.menuitem=bj.$0('menuitem');bj.meta=bj.$0('meta');bj.meter=bj.$0('meter');bj.nav=bj.$0('nav');bj.noscript=bj.$0('noscript');bj.object=bj.$0('object');bj.ol=bj.$0('ol');bj.optgroup=bj.$0('optgroup');bj.option=bj.$0('option');bj.output=bj.$0('output');bj.p=bj.$0('p');bj.param=bj.$0('param');bj.picture=bj.$0('picture');bj.pre=bj.$0('pre');bj.progress=bj.$0('progress');bj.q=bj.$0('q');bj.rp=bj.$0('rp');bj.rt=bj.$0('rt');bj.ruby=bj.$0('ruby');bj.s=bj.$0('s');bj.samp=bj.$0('samp');bj.script=bj.$0('script');bj.section=bj.$0('section');bj.select=bj.$0('select');bj.small=bj.$0('small');bj.source=bj.$0('source');bj.span=bj.$0('span');bj.strong=bj.$0('strong');bj.style=bj.$0('style');bj.sub=bj.$0('sub');bj.summary=bj.$0('summary');bj.sup=bj.$0('sup');bj.table=bj.$0('table');bj.tbody=bj.$0('tbody');bj.td=bj.$0('td');bj.textarea=bj.$0('textarea');bj.tfoot=bj.$0('tfoot');bj.th=bj.$0('th');bj.thead=bj.$0('thead');bj.time=bj.$0('time');bj.title=bj.$0('title');bj.tr=bj.$0('tr');bj.track=bj.$0('track');bj.u=bj.$0('u');bj.ul=bj.$0('ul');bj.var=bj.$0('var');bj.video=bj.$0('video');bj.wbr=bj.$0('wbr');bj.circle=bj.$1('circle');bj.clipPath=bj.$1('clipPath');bj.defs=bj.$1('defs');bj.ellipse=bj.$1('ellipse');bj.feColorMatrix=bj.$1('feColorMatrix');bj.filter=bj.$1('filter');bj.g=bj.$1('g');bj.height=bj.$1('height');bj.image=bj.$1('image');bj.line=bj.$1('line');bj.linearGradient=bj.$1('linearGradient');bj.mask=bj.$1('mask');bj.path=bj.$1('path');bj.pattern=bj.$1('pattern');bj.polygon=bj.$1('polygon');bj.polyline=bj.$1('polyline');bj.radialGradient=bj.$1('radialGradient');bj.rect=bj.$1('rect');bj.stop=bj.$1('stop');bj.svg=bj.$1('svg');bj.text=bj.$1('text');bj.tspan=bj.$1('tspan');bj.width=bj.$1('width')})();(function(){bz.$0=0})();(function(){dq.$1=null;dq.$1={};dq.$1[0]=b})();(function(){e.$0="<span class='tabTabLabel' />"})();(function(){d.$0="<div><div class='tabTabLabels'/><div class='tabTabContentArea'/></div>"})();(function(){cR.$2=null;cR.$3=null;cR.$1=false})();(function(){cQ.$8=null})();(function(){ed.$2='widgetInstance';ed.$1='tab-widget';ed.$0='.tab-disableSelection';ed.$3=0;ed.selectableNodeClass=null;if(tab.FeatureParamsLookup.getBool(33)===true){$(document.head).append('<style type="text/css">.tab-DesignTint { background-color: #F1F1FC; }</style>')}ed.selectableNodeClass='tab-selectable'})();(function(){F.suppressClickBustingClass='suppressClickBusting';F.$2=25;F.$3=null;F.$1$1=null})();(function(){X.noOp=new X('cursors/dragnop-black.cur','auto');X.delete$1=new X('cursors/dragdel-black.cur','auto');X.copy=new X('cursors/dragcopy-black.cur','auto');X.move=new X('cursors/dragmove-black.cur','auto')})();(function(){bH.$1$1=null;bH.$1$2=null;bH.$1$3=null;bH.$1$4=null;bH.$1$5=null;bH.$1$6=null;bH.$1$7=null})();(function(){ee.$4={};ee.$7=null;ee.$6=1;ee.$5=1;window.addEventListener('message',ss.thisFix(ee.$0),false)})();(function(){bL.hoverTime=150;bL.fastHoverTime=120})();(function(){bF.defaultSlop=5;bF.doubleTapTime=390;bF.potentialPressTime=500;bF.pressTime=750;bF.$1='tab-'})();(function(){bG.glassClass='tab-glass';bG.$1="<div class='tab-glass clear-glass'></div>";bG.$0='clear-glass';bG.$2='opaque-glass'})();(function(){bl.$h='data-tab-drag-source';bl.$j='[data-tab-drag-source]';bl.$i='tabDragSource';bl.$k='data-tab-drop-target';bl.$l='tabDropTarget';bl.$n='[data-tab-drop-target]';bl.$m='tabDropTarget';bl.$p=null;bl.$q=null;bl.$x=null;bl.$w=null;bl.$z=null;bl.$y=0;bl.$o=null;bl.$v=null;bl.$s=null;bl.$t=null;bl.$A=[];bl.$u=null;bl.$r=null;bl.$1$1=null;bl.$1$2=null;bl.$1$3=null;bl.$1$4=null;bl.$1$5=null;bl.$v={};bl.$v.dragStart=bl.dragStart;bl.$v.dragMove=bl.dragMove;bl.$v.dragEnd=bl.dragEnd;bl.$v.pressEnd=bl.dragEnd;bl.$v.firstTouch=bl.firstTouch})();(function(){bx.$0='none'})();(function(){i.$3={};i.$9={};i.$6={};i.$5={};i.$7={};i.$8={};i.$4={};i.$2()})();(function(){cW.$0=0})();(function(){k.$3=new Array(10)})();(function(){l.$0="\n<div class='tabMenuItem' role='menuitem'>\n  <div class='tabMenuItemNameArea'>\n    <span class='tabMenuItemName'/>\n  </div>\n</div>"})();(function(){n.$0="<div class='tab-editable-text-view'><div><div class='view-mode'><span class = 'text-span'/></div><input class='edit-mode' type='text'/></div></div>"})();(function(){o.$0="<div class='tabTextInputView'><input class='tabTextInputViewInputElement' type='text'/></div>"})();(function(){bC.$8='tab-showFocusIndicator';bC.$7='keydown.'+ss.getTypeName(bC);bC.$a=2;bC.$9=null})();(function(){bD.$6=null;bD.$5=null;bD.$4=null;bD.$8=null;bD.$7=null;bD.$3='#centeringContainer';bD.$1$1=null;bD.$6=bD.$0(document,['fullscreenEnabled','webkitFullscreenEnabled','msFullscreenEnabled','mozFullScreenEnabled']);bD.$5=bD.$0(document,['fullscreenElement','webkitFullscreenElement','msFullscreenElement','mozFullScreenElement']);bD.$4=bD.$0(document,['exitFullscreen','webkitExitFullscreen','msExitFullscreen','mozCancelFullScreen']);bD.$8=bD.$0(document.documentElement,['requestFullscreen','webkitRequestFullscreen','msRequestFullscreen','mozRequestFullScreen']);bD.$7=bD.$0(document,['onfullscreenchange','onwebkitfullscreenchange','onMSFullscreenChange','onmozfullscreenchange']);if(ss.isValue(bD.$7)&&bD.get_fullscreenEnabled()){document.addEventListener(bD.get_fullscreenChangeEventName().toString(),bD.$1)}bD.add_fullscreenStateChanged(bD.$2)})();(function(){dK.$1=null})();(function(){dO.defaultSelectedClassName='selected';dO.selectedProperty='selected';dO.toggleClassProperty='selectedClass';dO.$1=0})();(function(){ct.$2="<span class='tab-checkbox'><input type='checkbox'></input><span class='label hide'></span></span>";ct.$4="<span class='tab-radio'><input type='radio'></input><span class='label hide'></span></span>";ct.$5="<span class='tab-icon-toggle'><span class='icon'></span><span class='label hide'></span></span>";ct.$3="<span class='innerIcon'></span>";ct.$6='.label';ct.$1='hide';ct.$7='tab-unification-check';ct.$8='tab-img-check';ct.$9='tab-unification-radio'})();(function(){dN.textPropertyName='text'})();(function(){E.$0="<div class='tabTextInputView'><span class='tabClearableTextBoxClearButton'/><div class='tabTextInputViewInputElementContainer'><input class='tabTextInputViewInputElement' type='text'/></div></div>"})();(function(){G.$1=10;G.$0=300;G.$2=0})();(function(){dt.$0='__ALL__'})();(function(){dB.getSpiffBrowserViewportFunc=null})();(function(){dC.$2='selector';dC.$0='relative';dC.$1=3;dC.$3=13})();(function(){cG.$0=0})();(function(){P.$0="<span class='tabComboBox tab-ctrl-formatted-widget tab-ctrl-formatted-darker-border-hover'>\n    <span class='tabComboBoxIcon'/>\n    <div class='tabComboBoxNameContainer tab-ctrl-formatted-fixedsize'><span class='tabComboBoxName'/></div>\n    <div class='tabComboBoxButtonHolder'><span class='tabComboBoxButton'/></div>\n</span>"})();(function(){cL.$0="<div class='tabMenu' tabindex='-1' role='menu'><div class='tabMenuContent'/></div>"})();(function(){cJ.$0="<div class='tabMenuItemDivider' role='separator' />"})();(function(){cK.$0="\n<div class='tabMenuItemTextInputPanel' role='menuitem'>\n  <div class='tabMenuItemTextInputHolder'>\n    <input class='tabMenuItemTextInput' type='text'>\n  </div>\n</div>"})();(function(){cM.defaultMenuItem='tabMenuDefaultItem';cM.classMenuItem='tabMenuMenuItem';cM.keyMenuItem='tabMenuMenuItem';cM.menuFadeDurationMs=50;cM.$4='tabMenuMenuItemLevel';cM.$2='tabMenuHasIconTwo';cM.$1=989;cM.$3=1000})();(function(){S.$0='hasIcons'})();(function(){R.iconPressedClass='tabComboBoxNoIconPressed';R.invalidClass='invalid';R.noIconClass='tabComboBoxNoIcon';R.pressedClass='pressed';R.disabledClass='disabled';R.classesForTheme=ss.mkdict([0,'tabComboStdTheme',1,'tabComboCompactTheme',2,'tabComboStdTheme tabUnification',3,'tabComboStdTheme tab-unification-line-arrow-dropdown'])})();(function(){cy.listItemSpotlightedClassName='tab-list-item-spotlighted';cy.boldClass='bold';cy.invalidClass='invalid'})();(function(){cz.selectedProperty='selected';cz.invalidProperty='invalid';cz.draggableProperty='draggable';cz.spotlightedProperty='spotlighted';cz.boldProperty='bold'})();(function(){cD.collectionProperty='collection';cD.enabledProperty='enabled'})();(function(){cE.$0="<div class='tab-list'><div class='tab-list-itemHolder'></div></div>"})();(function(){tab.ObjectRegistry.registerType(db,db).call(null)})();(function(){dT.startingGlassZIndex=987})();(function(){dW.minimalistThemeClass='tabUberPopupMinimal'})();(function(){T.listClassName='tabCompositeSearchWidgetList';T.$0=400})();(function(){cs.$1="<a href='#' class='tab-link-button'><span class='label hide'></span></a>";cs.$0="<button class='tab-button' type='button'><span class='icon'></span><span class='label hide'></span></button>";cs.$2="<button class='tab-button' type='button'>\n            <div class='paired-icon'>\n                <span class='icon menu-button'></span>\n                <span class='tabComboBoxButton'></span>\n            </div>\n            <span class='label hide'></span></button>";cs.$3="<span class='tab-text-button'><span class='label hide'></span></span>";cs.$4='.label'})();(function(){V.$0="<div class='tabCompositeSearchWidget'><div>"})();(function(){Y.$0="<div class='tabCustomScroller'>\n            <div class='tabScrollerContentWindow'><span class='tabScrollerContent'/></div>\n            <div class='tabVerticalScrollbar'><div class='tabScrollbarIndicator'/></div>\n            <div class='tabHorizontalScrollbar'><div class='tabScrollbarIndicator'/></div>\n        </div>"})();(function(){bb.$0="<div class='tabScroller'><span class='tabScrollerContent'/></div>"})();(function(){bc.$1=1;bc.$0=9})();(function(){Z.centeredVerticallyClassName='centeredVertically';Z.scrollableClassName='scrollable';Z.$1=8})();(function(){cS.$0=function(){}})();(function(){cY.$c=2500;cY.$d=75;cY.$j=null;cY.$k=null;cY.$e=0;cY.$f=0;cY.$i=null;cY.$h=null;cY.$g=false;cY.$1$1=null;cY.init()})();(function(){be.positionProperty='position';be.isActiveProperty='isActive';be.$0='active';be.$2='.tab-dialogCloseButton';be.$1='.tab-dialogBodyContainer';be.$7='.tab-dialogTitleBar';be.$8='.tab-dialogTitle';be.$5='.tab-dialogResizer';be.$6='.tab-dialogSpinnerContainer';be.$4="\n<div class='tab-dialog' role='dialog'>\n  <div class='tab-dialogTitleBar'>\n    <div class='tab-dialogTitle'></div>\n    <div class='tab-dialogCloseButton'></div>\n  </div>\n  <div class='tab-dialogBodyContainer'></div>\n  <div class='tab-dialogResizer tab-icon-resize-se'><div class='tab-dialogResizerHit'/></div>\n  <div class='tab-dialogSpinnerContainer'></div>\n</div>\n";be.$9=null;be.$3=new cV;be.defaultDraggableDialogConfigurer=null;be.defaultStationaryDialogConfigurer=null;be.defaultDraggableDialogConfigurer=function(ef){var eg=new cT(ef.$u,ef.$g,false);eg.set_documentBodySize('useClientSize');return eg};be.defaultStationaryDialogConfigurer=function(){return null}})();(function(){br.$0='editing';br.$1='hover'})();(function(){cu.$0=6})();(function(){cC.$0=10})();(function(){SharedWidgets.PointerEventAdapterManager.adapterFactory=function(){return new dy}})();(function(){dG.$1="<span class='tabTextIconButton'><span class='icon'/><span class='label hide'/></span>"})();(function(){tab.ObjectRegistry.registerType(dH,dH).call(null)})();(function(){dU.contentClassName='tabUberPopupContent';dU.caretClassName='tabUberArrow';dU.caretBorderClassName='tabUberArrow2';dU.$0="<div class='tabUberPopup'><div class='tabUberPopupContent'/><div class='tabUberArrow'/><div class='tabUberArrow2'/></div>";dU.$1=null})();(function(){dY.designTint='tab-DesignTint';dY.text='tab-Text';dY.darkBackground='tab-darkBackground';dY.button='tab-UnifiedButton';dY.icon='tab-Icon';dY.iconButton='tab-IconBtn';dY.vScrollable='tab-vScrollable';dY.selectableButtonGroup='tab-SelectableButtonGroup';dY.selectionMark='tab-SelectionMark';dY.active='active';dY.hover='hover';dY.hitTestArea='tab-HitTestArea';dY.focused='focused';dY.bordered='bordered';dY.disabled='disabled';dY.selectable='selectable';dY.selected='selected';dY.unselected='unselected';dY.excluded='excluded';dY.textInput='tab-TextInput';dY.horizontalLayout='tab-HorizontalLayout';dY.applyCancelPanel='tab-ApplyCancelPanel';dY.applyCancel='apply-cancel';dY.apply$1='apply';dY.cancel='cancel';dY.sliderControlClass='unification-slider-control';dY.sliderContainerClass='tabHorizontalSliderContainer';dY.sliderInputClass='tabHorizontalSlider';dY.sliderTextBoxClass='tabHorizontalSliderPercentageText';dY.sliderPercentageClass='tabHorizontalSliderPercentageSign'})()})();;
/*! BEGIN EventUtils */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@tableau/browser-support"),require("jquery"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["@tableau/browser-support","jquery","react","react-dom"],t):"object"==typeof exports?exports.EventUtils=t(require("@tableau/browser-support"),require("jquery"),require("react"),require("react-dom")):e.EventUtils=t(e.BrowserSupport,e.$,e.React,e.ReactDOM)}("undefined"!=typeof self?self:this,function(e,t,n,r){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=13)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.IsNullOrUndefined=function(e){return null===e||void 0===e},e.CloneObject=function(e){var t=JSON.stringify(e,function(e,t){return t instanceof Uint32Array||t instanceof Float64Array||t instanceof Float32Array?Array.prototype.slice.call(t):t});return JSON.parse(t)},e.ClearTimeout=function(t){return e.IsNullOrUndefined(t)||window.clearTimeout(t),null},e}();t.MiscUtil=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r;!function(e){function t(e,t){return e[t]}function n(e,t,n){e[t]=n}e.GetField=t,e.SetField=n}(r||(r={})),t.TypeUtil=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return Object.defineProperty(e,"IsEmbedded",{get:function(){return e.isEmbedded},set:function(t){e.isEmbedded=t},enumerable:!0,configurable:!0}),e.isEmbedded=function(){return!1},e}();t.BootstrapUtility=r;var i=function(){function e(){}return Object.defineProperty(e,"WebAuthoringDragAggregation",{get:function(){return e.webAuthoringDragAggregation},set:function(t){e.webAuthoringDragAggregation=t},enumerable:!0,configurable:!0}),e.webAuthoringDragAggregation=function(){return!1},e}();t.FeatureFlags=i;var o=function(){function e(){}return Object.defineProperty(e,"IsMobile",{get:function(){return e.isMobile},set:function(t){e.isMobile=t},enumerable:!0,configurable:!0}),e.isMobile=function(){return!1},e}();t.TsConfig=o;var s=function(){function e(){}return Object.defineProperty(e,"DebugTools",{get:function(){return e.debugTools},set:function(t){e.debugTools=t},enumerable:!0,configurable:!0}),e.debugTools=function(){return!1},e}();t.FeatureParam=s},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=n(6),o=n(0),s=n(8),a=n(16),u=function(){function e(t,n,r,s){this.slop=5,this.numTouches=1,this.type="gesture",this.isPotentialPress=!1,this.isActivePress=!1,o.MiscUtil.IsNullOrUndefined(n)||(this.type=n),o.MiscUtil.IsNullOrUndefined(r)||(this.slop=r?e.DefaultSlop:0),o.MiscUtil.IsNullOrUndefined(s)||(this.numTouches=s),this.Config=new i.EventHandleSpec,this.Update(t)}return Object.defineProperty(e.prototype,"DataAttributeName",{get:function(){return e.DataAttributePrefix+this.type.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ZoomAdjustedSlop",{get:function(){var e=a.ZoomScaleUtil.GetScaleSync();return Math.round(this.slop/e)},enumerable:!0,configurable:!0}),e.prototype.Update=function(e){o.MiscUtil.IsNullOrUndefined(e)||(r.extend(this.Config,e),r(this.Config.DomElement).data(this.DataAttributeName,this))},e.prototype.Fire=function(e,t,n){if(this.Config.IsHandling(e)){var i=t;r.extend(i,n),i.GestureName=this.type.toString(),i.CallbackName=e;s.TableauEventHandler.GetHandler(this.Config,e)(i)}},e.prototype.dispose=function(){this.Cancel(),r(this.Config.DomElement).removeData(this.DataAttributeName)},e.FromHtml=function(t,n){return r(t).data(e.DataAttributePrefix+n.toString())},e.DefaultSlop=5,e.DoubleTapTime=390,e.PotentialPressTime=500,e.PressTime=750,e.DataAttributePrefix="tab-",e}();t.Gesture=u;var l=function(){function e(){}return e}();t.GestureEventInfo=l},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),o=function(){function e(){this.firstTouch=void 0,this.touchMove=void 0,this.lastTouch=void 0,this.cancelPotentialDoubleTap=void 0,this.tap=void 0,this.doubleTap=void 0,this.potentialPress=void 0,this.cancelPotentialPress=void 0,this.press=void 0,this.pressEnd=void 0,this.rightClick=void 0,this.tapAndHalf=void 0,this.hover=void 0,this.dragStart=void 0,this.dragMove=void 0,this.dragEnd=void 0,this.pressDragStart=void 0,this.pressDragMove=void 0,this.pressDragEnd=void 0,this.pinchStart=void 0,this.pinchMove=void 0,this.pinchEnd=void 0,this.doublePressDragStart=void 0,this.doublePressDragMove=void 0,this.doublePressDragEnd=void 0,this.holdTapStart=void 0,this.holdTapTap=void 0,this.holdTapEnd=void 0,this.domElem=void 0}return Object.defineProperty(e.prototype,"DomElement",{get:function(){return this.domElem},set:function(e){this.domElem=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"HoverDelay",{get:function(){return this.hoverDelay},set:function(e){this.hoverDelay=e},enumerable:!0,configurable:!0}),e.prototype.IsHandling=function(e){var t=this,n=i.TypeUtil.GetField(t,e);return!r.MiscUtil.IsNullOrUndefined(n)},e.prototype.IsUsingHover=function(){return this.IsHandling("hover")||this.IsHandling("moving")},e.prototype.UsingPressDrag=function(){return this.IsHandling("pressDragStart")||this.IsHandling("pressDragMove")||this.IsHandling("pressDragEnd")||this.IsHandling("doublePressDragStart")||this.IsHandling("doublePressDragMove")||this.IsHandling("doublePressDragEnd")},e.prototype.SetHandler=function(e,t){i.TypeUtil.SetField(this,e,t)},e.prototype.RemoveHandler=function(e){i.TypeUtil.SetField(this,e,null)},e}();t.EventHandleSpec=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),o=n(3),s=n(10),a=n(0),u=n(12),l=n(28),c=n(29),f=n(1),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.item=function(e){return this[e]},t}(Array),d=function(){function e(t,n,r){if(void 0===r&&(r=null),this.OriginalEvent=t,this.ReactEvent=r,this.Type=t.type,this.TimeStamp=t.timeStamp,this.KeyCode=f.TypeUtil.GetField(t,"keyCode"),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.shiftKey=t.shiftKey,this.ClientX=f.TypeUtil.GetField(t,"clientX"),this.ClientY=f.TypeUtil.GetField(t,"clientY"),a.MiscUtil.IsNullOrUndefined(t.touches)){var i=new p;i[0]=t,this.TargetTouches="mouseup"===t.type?new p:i,this.Touches=this.TargetTouches,this.ChangedTouches=new p,this.ChangedTouches[0]=t,this.CurrentTarget=t.currentTarget,this.Target=t.target}else{this.Touches=t.touches,this.TargetTouches=t.targetTouches,this.ChangedTouches=t.changedTouches;var o=t.target;this.Target=3===o.nodeType?o.parentNode:o,this.CurrentTarget=n}var s=this.Touches.length;for(this.TouchesById=new Array(s);s>0;){s-=1;var u=this.Touches[s].identifier||e.MouseIdentifier;this.TouchesById[u]=this.Touches[s]}for(s=this.ChangedTouches.length;s>0;){s-=1;var u=this.ChangedTouches[s].identifier||e.MouseIdentifier;this.TouchesById[u]=this.ChangedTouches[s]}}return Object.defineProperty(e.prototype,"IsMouseEvent",{get:function(){return 1===this.Source},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsTouchEvent",{get:function(){return 2===this.Source},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsStartEvent",{get:function(){return 0===this.InputType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsMoveEvent",{get:function(){return 1===this.InputType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsOutEvent",{get:function(){return 3===this.InputType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsEndEvent",{get:function(){return 2===this.InputType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsScrollEvent",{get:function(){return 4===this.InputType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsRightClickEvent",{get:function(){return"contextmenu"===this.Type&&1===this.Source},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsLeftMouseEvent",{get:function(){if(this.IsMouseEvent){if("left"===this.RetrieveMouseButton())return!o.BrowserSupport.IsMac()||!this.ctrlKey}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsRightMouseEvent",{get:function(){if(this.IsMouseEvent){var e=this.RetrieveMouseButton();if("right"===e)return!0;if("left"===e&&o.BrowserSupport.IsMac()&&this.ctrlKey)return!0}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsCtrlKey",{get:function(){return o.BrowserSupport.IsMac()?this.metaKey:this.ctrlKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GestureInfo",{get:function(){return this},enumerable:!0,configurable:!0}),e.prototype.AllTouchesShareCurrentTarget=function(){var e=this.Touches[0].target,t=this.Touches[1].target;if(!(e instanceof Element&&t instanceof Element))return!1;for(var n=document.body,r=this.CurrentTarget,i=!1;!i&&!a.MiscUtil.IsNullOrUndefined(e)&&!a.MiscUtil.IsNullOrUndefined(t);)i=!0,e!==r&&e!==n&&e instanceof Element&&(e=e.parentNode,i=!1),t!==r&&t!==n&&t instanceof Element&&(t=t.parentNode,i=!1),e===t&&(i=!0);return e===t},Object.defineProperty(e,"AllHandledEvents",{get:function(){return i.map(l.NormalizedEventBuilder.HandledEvents,function(e,t){return t})},enumerable:!0,configurable:!0}),e.Create=function(e,t,n){return void 0===n&&(n=null),l.NormalizedEventBuilder.CreateNormalizedEvent(e,t,n)},e.prototype.RetrieveMouseButton=function(){return this.IsMoveEvent?s.EventRecognizer.CurrentGlobalMouseButton:u.MouseEventUtil.GetMouseButtonEnum(this.OriginalEvent)},e.prototype.GetSelectAction=function(){var e=c.SelectAction.Simple,t=this.IsCtrlKey;return this.shiftKey&&(e=c.SelectAction.Range),t&&(e=c.SelectAction.Toggle),e},e.prototype.preventDefault=function(){a.MiscUtil.IsNullOrUndefined(f.TypeUtil.GetField(this.OriginalEvent,"preventDefault"))||this.OriginalEvent.preventDefault()},e.prototype.stopPropagation=function(){a.MiscUtil.IsNullOrUndefined(f.TypeUtil.GetField(this.OriginalEvent,"stopPropagation"))||this.OriginalEvent.stopPropagation(),a.MiscUtil.IsNullOrUndefined(this.ReactEvent)||this.ReactEvent.stopPropagation()},e.prototype.get_IsRightMouseEvent=function(){return this.IsRightMouseEvent},e.prototype.get_GestureInfo=function(){return this.GestureInfo},e.prototype.get_IsMouseEvent=function(){return this.IsMouseEvent},e.prototype.get_IsTouchEvent=function(){return this.IsTouchEvent},e.prototype.get_IsStartEvent=function(){return this.IsStartEvent},e.prototype.get_IsMoveEvent=function(){return this.IsMoveEvent},e.prototype.get_IsOutEvent=function(){return this.IsOutEvent},e.prototype.get_IsEndEvent=function(){return this.IsEndEvent},e.prototype.get_IsScrollEvent=function(){return this.IsScrollEvent},e.prototype.get_IsRightClickEvent=function(){return this.IsRightClickEvent},e.prototype.get_IsLeftMouseEvent=function(){return this.IsLeftMouseEvent},e.prototype.get_IsCtrlKey=function(){return this.IsCtrlKey},e.MouseIdentifier=0,e}();t.NormalizedEvent=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),i=n(24),o=n(15),s=n(6),a=n(10),u=n(2),l=n(0),c=n(7),f=n(1),p=function(){function e(t,n){void 0===t&&(t=null),void 0===n&&(n=null),this.subscriptionHandle=null,l.MiscUtil.IsNullOrUndefined(t)||l.MiscUtil.IsNullOrUndefined(s.EventHandleSpec)||(this.config=n||new s.EventHandleSpec,this.config.DomElement=t,this.ConfigureDomElem(t),this.SetupEventRecognizer(this.config),this.MakeConnections(t),e.RaiseTableauEventHandlerCreated(this))}return Object.defineProperty(e.prototype,"DomElement",{get:function(){return this.config.DomElement},enumerable:!0,configurable:!0}),e.prototype.SetupEventRecognizer=function(e){this.eventRecognizer=new a.EventRecognizer(e),this.eventRecognizer.SetupPressDrag(e)},e.prototype.suppressHover=function(){this.config.IsUsingHover()&&this.eventRecognizer.suppressHover()},e.prototype.unsuppressHover=function(){this.config.IsUsingHover()&&this.eventRecognizer.unsuppressHover()},e.prototype.CancelHover=function(){this.config.IsUsingHover()&&this.eventRecognizer.CancelHover()},e.prototype.GetHandledEvents=function(){for(var e=new Array,t=this.config,n=0,r=Object.keys(t);n<r.length;n++){var i=r[n],o=f.TypeUtil.GetField(t,i);l.MiscUtil.IsNullOrUndefined(o)||"function"!=typeof o||e.push(i)}return e},e.prototype.Update=function(e){$.extend(this.config,e),this.eventRecognizer.UpdateAllGestures(this.config),this.eventRecognizer.SetupPressDrag(this.config)},e.prototype.Destroy=function(){this.dispose()},e.prototype.dispose=function(){if(e.RaiseTableauEventHandlerToBeDisposed(this),!l.MiscUtil.IsNullOrUndefined(this.subscriptionHandle)&&!l.MiscUtil.IsNullOrUndefined(this.subscriptionHandle.DomElement)&&!l.MiscUtil.IsNullOrUndefined(this.subscriptionHandle.EventHandler))for(var t=0,n=c.NormalizedEvent.AllHandledEvents;t<n.length;t++){var r=n[t];this.subscriptionHandle.DomElement.removeEventListener(r.toString(),this.subscriptionHandle.EventHandler)}this.eventRecognizer.dispose()},e.GetHandler=function(e,t){return f.TypeUtil.GetField(e,t)},e.prototype.ConfigureDomElem=function(e){var t=f.TypeUtil.GetField(e.style,"user-select"),n=f.TypeUtil.GetField(e.style,"-webkit-user-select");"input"===e.tagName.toLowerCase()||!l.MiscUtil.IsNullOrUndefined(t)&&""!==t||!l.MiscUtil.IsNullOrUndefined(n)&&""!==n||f.TypeUtil.SetField(e.style,"-webkit-user-select","none"),f.TypeUtil.SetField(e.style,"-webkit-touch-callout","none"),f.TypeUtil.SetField(e.style,"-webkit-tap-highlight-color","transparent"),f.TypeUtil.SetField(e.style,"-ms-touch-action","none")},e.prototype.MultiTouchWithDifferentTargetElement=function(e){return e.Touches.length>1&&!e.AllTouchesShareCurrentTarget()&&(this.eventRecognizer.CancelAllGestures(),!0)},e.prototype.handler=function(e){var t=!u.TsConfig.IsMobile()&&e.IsTouchEvent,n=o.DomUtil.HandleTouchEvents(e.Target);t&&!n||(t&&n&&"preventDefault"in e.OriginalEvent&&e.OriginalEvent.preventDefault(),this.MultiTouchWithDifferentTargetElement(e)||this.eventRecognizer.HandleEvent(e,this.config))},e.prototype.MakeConnections=function(e){var t=this,n=function(e){var n=c.NormalizedEvent.Create(e,t.config.DomElement);t.handler(n)};this.subscriptionHandle=new i.DomSubscriptionHandle(e,n);for(var r=0,o=c.NormalizedEvent.AllHandledEvents;r<o.length;r++){var s=o[r];e.addEventListener(s.toString(),n,!1)}},e.add_TableauEventHandlerCreated=function(t){e.TableauEventHandlerCreated.add(t)},e.remove_TableauEventHandlerCreated=function(t){e.TableauEventHandlerCreated.remove(t)},e.add_TableauEventHandlerToBeDisposed=function(t){e.TableauEventHandlerToBeDisposed.add(t)},e.remove_TableauEventHandlerToBeDisposed=function(t){e.TableauEventHandlerToBeDisposed.remove(t)},e.RaiseTableauEventHandlerCreated=function(t){u.FeatureParam.DebugTools()&&null!==e.TableauEventHandlerCreated&&e.TableauEventHandlerCreated.invoke(t)},e.RaiseTableauEventHandlerToBeDisposed=function(t){u.FeatureParam.DebugTools()&&null!==e.TableauEventHandlerToBeDisposed&&e.TableauEventHandlerToBeDisposed.invoke(t)},e.TableauEventHandlerCreated=new r.Delegate,e.TableauEventHandlerToBeDisposed=new r.Delegate,e}();t.TableauEventHandler=p},function(e,t,n){(function(e,n){var r,i;!function(){var o="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},s=o._,a=Array.prototype,u=Object.prototype,l="undefined"!=typeof Symbol?Symbol.prototype:null,c=a.push,f=a.slice,p=u.toString,d=u.hasOwnProperty,h=Array.isArray,v=Object.keys,g=Object.create,m=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};void 0===t||t.nodeType?o._=y:(void 0!==n&&!n.nodeType&&n.exports&&(t=n.exports=y),t._=y),y.VERSION="1.9.0";var b,E=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},T=function(e,t,n){return y.iteratee!==b?y.iteratee(e,t):null==e?y.identity:y.isFunction(e)?E(e,t,n):y.isObject(e)&&!y.isArray(e)?y.matcher(e):y.property(e)};y.iteratee=b=function(e,t){return T(e,t,1/0)};var M=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}},I=function(e){if(!y.isObject(e))return{};if(g)return g(e);m.prototype=e;var t=new m;return m.prototype=null,t},U=function(e){return function(t){return null==t?void 0:t[e]}},P=function(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0},O=Math.pow(2,53)-1,S=U("length"),C=function(e){var t=S(e);return"number"==typeof t&&t>=0&&t<=O};y.each=y.forEach=function(e,t,n){t=E(t,n);var r,i;if(C(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=y.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},y.map=y.collect=function(e,t,n){t=T(t,n);for(var r=!C(e)&&y.keys(e),i=(r||e).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=t(e[a],a,e)}return o};var _=function(e){var t=function(t,n,r,i){var o=!C(t)&&y.keys(t),s=(o||t).length,a=e>0?0:s-1;for(i||(r=t[o?o[a]:a],a+=e);a>=0&&a<s;a+=e){var u=o?o[a]:a;r=n(r,t[u],u,t)}return r};return function(e,n,r,i){var o=arguments.length>=3;return t(e,E(n,i,4),r,o)}};y.reduce=y.foldl=y.inject=_(1),y.reduceRight=y.foldr=_(-1),y.find=y.detect=function(e,t,n){var r=C(e)?y.findIndex:y.findKey,i=r(e,t,n);if(void 0!==i&&-1!==i)return e[i]},y.filter=y.select=function(e,t,n){var r=[];return t=T(t,n),y.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},y.reject=function(e,t,n){return y.filter(e,y.negate(T(t)),n)},y.every=y.all=function(e,t,n){t=T(t,n);for(var r=!C(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(!t(e[s],s,e))return!1}return!0},y.some=y.any=function(e,t,n){t=T(t,n);for(var r=!C(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(t(e[s],s,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,r){return C(e)||(e=y.values(e)),("number"!=typeof n||r)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=M(function(e,t,n){var r,i;return y.isFunction(t)?i=t:y.isArray(t)&&(r=t.slice(0,-1),t=t[t.length-1]),y.map(e,function(e){var o=i;if(!o){if(r&&r.length&&(e=P(e,r)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)})}),y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var r,i,o=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=C(e)?e:y.values(e);for(var a=0,u=e.length;a<u;a++)null!=(r=e[a])&&r>o&&(o=r)}else t=T(t,n),y.each(e,function(e,n,r){((i=t(e,n,r))>s||i===-1/0&&o===-1/0)&&(o=e,s=i)});return o},y.min=function(e,t,n){var r,i,o=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=C(e)?e:y.values(e);for(var a=0,u=e.length;a<u;a++)null!=(r=e[a])&&r<o&&(o=r)}else t=T(t,n),y.each(e,function(e,n,r){((i=t(e,n,r))<s||i===1/0&&o===1/0)&&(o=e,s=i)});return o},y.shuffle=function(e){return y.sample(e,1/0)},y.sample=function(e,t,n){if(null==t||n)return C(e)||(e=y.values(e)),e[y.random(e.length-1)];var r=C(e)?y.clone(e):y.values(e),i=S(r);t=Math.max(Math.min(t,i),0);for(var o=i-1,s=0;s<t;s++){var a=y.random(s,o),u=r[s];r[s]=r[a],r[a]=u}return r.slice(0,t)},y.sortBy=function(e,t,n){var r=0;return t=T(t,n),y.pluck(y.map(e,function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var H=function(e,t){return function(n,r,i){var o=t?[[],[]]:{};return r=T(r,i),y.each(n,function(t,i){var s=r(t,i,n);e(o,t,s)}),o}};y.groupBy=H(function(e,t,n){y.has(e,n)?e[n].push(t):e[n]=[t]}),y.indexBy=H(function(e,t,n){e[n]=t}),y.countBy=H(function(e,t,n){y.has(e,n)?e[n]++:e[n]=1});var D=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;y.toArray=function(e){return e?y.isArray(e)?f.call(e):y.isString(e)?e.match(D):C(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:C(e)?e.length:y.keys(e).length},y.partition=H(function(e,t,n){e[n?0:1].push(t)},!0),y.first=y.head=y.take=function(e,t,n){if(!(null==e||e.length<1))return null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return f.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){if(!(null==e||e.length<1))return null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return f.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,Boolean)};var w=function(e,t,n,r){r=r||[];for(var i=r.length,o=0,s=S(e);o<s;o++){var a=e[o];if(C(a)&&(y.isArray(a)||y.isArguments(a)))if(t)for(var u=0,l=a.length;u<l;)r[i++]=a[u++];else w(a,t,n,r),i=r.length;else n||(r[i++]=a)}return r};y.flatten=function(e,t){return w(e,t,!1)},y.without=M(function(e,t){return y.difference(e,t)}),y.uniq=y.unique=function(e,t,n,r){y.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=T(n,r));for(var i=[],o=[],s=0,a=S(e);s<a;s++){var u=e[s],l=n?n(u,s,e):u;t&&!n?(s&&o===l||i.push(u),o=l):n?y.contains(o,l)||(o.push(l),i.push(u)):y.contains(i,u)||i.push(u)}return i},y.union=M(function(e){return y.uniq(w(e,!0,!0))}),y.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=S(e);r<i;r++){var o=e[r];if(!y.contains(t,o)){var s;for(s=1;s<n&&y.contains(arguments[s],o);s++);s===n&&t.push(o)}}return t},y.difference=M(function(e,t){return t=w(t,!0,!0),y.filter(e,function(e){return!y.contains(t,e)})}),y.unzip=function(e){for(var t=e&&y.max(e,S).length||0,n=Array(t),r=0;r<t;r++)n[r]=y.pluck(e,r);return n},y.zip=M(y.unzip),y.object=function(e,t){for(var n={},r=0,i=S(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n};var N=function(e){return function(t,n,r){n=T(n,r);for(var i=S(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}};y.findIndex=N(1),y.findLastIndex=N(-1),y.sortedIndex=function(e,t,n,r){n=T(n,r,1);for(var i=n(t),o=0,s=S(e);o<s;){var a=Math.floor((o+s)/2);n(e[a])<i?o=a+1:s=a}return o};var F=function(e,t,n){return function(r,i,o){var s=0,a=S(r);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=t(f.call(r,s,a),y.isNaN),o>=0?o+s:-1;for(o=e>0?s:a-1;o>=0&&o<a;o+=e)if(r[o]===i)return o;return-1}};y.indexOf=F(1,y.findIndex,y.sortedIndex),y.lastIndexOf=F(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i},y.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(f.call(e,r,r+=t));return n};var j=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=I(e.prototype),s=e.apply(o,i);return y.isObject(s)?s:o};y.bind=M(function(e,t,n){if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var r=M(function(i){return j(e,r,t,this,n.concat(i))});return r}),y.partial=M(function(e,t){var n=y.partial.placeholder,r=function(){for(var i=0,o=t.length,s=Array(o),a=0;a<o;a++)s[a]=t[a]===n?arguments[i++]:t[a];for(;i<arguments.length;)s.push(arguments[i++]);return j(e,r,this,this,s)};return r}),y.partial.placeholder=y,y.bindAll=M(function(e,t){t=w(t,!1,!1);var n=t.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=y.bind(e[r],e)}}),y.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return y.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},y.delay=M(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var r,i,o,s,a=0;n||(n={});var u=function(){a=!1===n.leading?0:y.now(),r=null,s=e.apply(i,o),r||(i=o=null)},l=function(){var l=y.now();a||!1!==n.leading||(a=l);var c=t-(l-a);return i=this,o=arguments,c<=0||c>t?(r&&(clearTimeout(r),r=null),a=l,s=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(u,c)),s};return l.cancel=function(){clearTimeout(r),a=0,r=i=o=null},l},y.debounce=function(e,t,n){var r,i,o=function(t,n){r=null,n&&(i=e.apply(t,n))},s=M(function(s){if(r&&clearTimeout(r),n){var a=!r;r=setTimeout(o,t),a&&(i=e.apply(this,s))}else r=y.delay(o,t,this,s);return i});return s.cancel=function(){clearTimeout(r),r=null},s},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},y.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},y.once=y.partial(y.before,2),y.restArguments=M;var A=!{toString:null}.propertyIsEnumerable("toString"),R=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],G=function(e,t){var n=R.length,r=e.constructor,i=y.isFunction(r)&&r.prototype||u,o="constructor";for(y.has(e,o)&&!y.contains(t,o)&&t.push(o);n--;)(o=R[n])in e&&e[o]!==i[o]&&!y.contains(t,o)&&t.push(o)};y.keys=function(e){if(!y.isObject(e))return[];if(v)return v(e);var t=[];for(var n in e)y.has(e,n)&&t.push(n);return A&&G(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return A&&G(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},y.mapObject=function(e,t,n){t=T(t,n);for(var r=y.keys(e),i=r.length,o={},s=0;s<i;s++){var a=r[s];o[a]=t(e[a],a,e)}return o},y.pairs=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},y.invert=function(e){for(var t={},n=y.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()};var x=function(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=e(o),a=s.length,u=0;u<a;u++){var l=s[u];t&&void 0!==n[l]||(n[l]=o[l])}return n}};y.extend=x(y.allKeys),y.extendOwn=y.assign=x(y.keys),y.findKey=function(e,t,n){t=T(t,n);for(var r,i=y.keys(e),o=0,s=i.length;o<s;o++)if(r=i[o],t(e[r],r,e))return r};var k=function(e,t,n){return t in n};y.pick=M(function(e,t){var n={},r=t[0];if(null==e)return n;y.isFunction(r)?(t.length>1&&(r=E(r,t[1])),t=y.allKeys(e)):(r=k,t=w(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var s=t[i],a=e[s];r(a,s,e)&&(n[s]=a)}return n}),y.omit=M(function(e,t){var n,r=t[0];return y.isFunction(r)?(r=y.negate(r),t.length>1&&(n=t[1])):(t=y.map(w(t,!1,!1),String),r=function(e,n){return!y.contains(t,n)}),y.pick(e,r,n)}),y.defaults=x(y.allKeys,!0),y.create=function(e,t){var n=I(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var s=n[o];if(t[s]!==i[s]||!(s in i))return!1}return!0};var B,X;B=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&X(e,t,n,r)},X=function(e,t,n,r){e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var i=p.call(e);if(i!==p.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return l.valueOf.call(e)===l.valueOf.call(t)}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(y.isFunction(s)&&s instanceof s&&y.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),o){if((u=e.length)!==t.length)return!1;for(;u--;)if(!B(e[u],t[u],n,r))return!1}else{var c,f=y.keys(e);if(u=f.length,y.keys(t).length!==u)return!1;for(;u--;)if(c=f[u],!y.has(t,c)||!B(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0},y.isEqual=function(e,t){return B(e,t)},y.isEmpty=function(e){return null==e||(C(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=h||function(e){return"[object Array]"===p.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){y["is"+e]=function(t){return p.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return y.has(e,"callee")});var Y=o.document&&o.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof Y&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return!y.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&isNaN(e)},y.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===p.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){if(!y.isArray(t))return null!=e&&d.call(e,t);for(var n=t.length,r=0;r<n;r++){var i=t[r];if(null==e||!d.call(e,i))return!1;e=e[i]}return!!n},y.noConflict=function(){return o._=s,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=function(e){return y.isArray(e)?function(t){return P(t,e)}:U(e)},y.propertyOf=function(e){return null==e?function(){}:function(t){return y.isArray(t)?P(e,t):e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var r=Array(Math.max(0,e));t=E(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},L=y.invert(z),K=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};y.escape=K(z),y.unescape=K(L),y.result=function(e,t,n){y.isArray(t)||(t=[t]);var r=t.length;if(!r)return y.isFunction(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=y.isFunction(o)?o.call(e):o}return e};var q=0;y.uniqueId=function(e){var t=++q+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,V={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Z=/\\|'|\r|\n|\u2028|\u2029/g,J=function(e){return"\\"+V[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var r=RegExp([(t.escape||W).source,(t.interpolate||W).source,(t.evaluate||W).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,s,a){return o+=e.slice(i,a).replace(Z,J),i=a+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";var s;try{s=new Function(t.variable||"obj","_",o)}catch(e){throw e.source=o,e}var a=function(e){return s.call(this,e,y)};return a.source="function("+(t.variable||"obj")+"){\n"+o+"}",a},y.chain=function(e){var t=y(e);return t._chain=!0,t};var $=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){return y.each(y.functions(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),$(this,n.apply(y,e))}}),y},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],$(this,n)}}),y.each(["concat","join","slice"],function(e){var t=a[e];y.prototype[e]=function(){return $(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return String(this._wrapped)},r=[],void 0!==(i=function(){return y}.apply(t,r))&&(n.exports=i)}()}).call(t,n(21),n(22)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(23),o=n(17),s=n(6),a=n(2),u=n(19),l=n(0),c=n(12),f=n(27),p=n(8),d=function(){function e(e){this.mousedown=!1,this.handlingContextMenu=!1,this.drag=new o.Drag(e),this.discrete=new i.Discrete(e),this.pinch=new f.Pinch(e),e.IsUsingHover()&&(this.hover=new u.Hover(e))}return Object.defineProperty(e,"CurrentGlobalMouseButton",{get:function(){return e.globalMouseButton},set:function(t){e.globalMouseButton!==t&&(e.globalMouseButton=t,console.debug("GlobalMouseButton="+e.globalMouseButton))},enumerable:!0,configurable:!0}),e.prototype.suppressHover=function(){this.hover.suppressHover()},e.prototype.unsuppressHover=function(){this.hover.unsuppressHover()},e.prototype.CancelHover=function(){this.hover.Cancel()},e.prototype.HandleEvent=function(t,n){this.mousedown&&"left"!==e.CurrentGlobalMouseButton&&"right"!==e.CurrentGlobalMouseButton&&(this.mousedown=!1),t.IsScrollEvent?this.mousedown=!1:t.IsOutEvent?n.IsUsingHover()&&this.hover.Out(t):t.IsStartEvent?this.HandleStartEvent(t,n):t.IsMoveEvent?this.HandleMoveEvent(t,n):this.HandleEndCancelEvent(t,n)},e.prototype.HandleStartEvent=function(t,n){if(this.handlingContextMenu=!1,this.lastMouseButtonPressed=c.MouseEventUtil.GetMouseButtonEnum(t.OriginalEvent),t.IsMouseEvent){if(!a.FeatureFlags.WebAuthoringDragAggregation()&&!t.IsLeftMouseEvent)return;this.mousedown=!0,e.CurrentGlobalMouseButton=this.lastMouseButtonPressed}this.HandleStart(t,n.IsUsingHover())},e.prototype.HandleMoveEvent=function(e,t){t.IsUsingHover()&&this.hover.Move(e),(!e.IsMouseEvent||(a.FeatureFlags.WebAuthoringDragAggregation()||"left"===this.lastMouseButtonPressed)&&this.mousedown)&&(this.discrete.Move(e),this.drag.Move(e),l.MiscUtil.IsNullOrUndefined(this.pinch)||this.pinch.Move(e))},e.prototype.HandleEndCancelEvent=function(t,n){e.CurrentGlobalMouseButton="none",n.IsUsingHover()&&this.hover.End(t),l.MiscUtil.IsNullOrUndefined(this.pinch)||this.pinch.End(t),this.drag.End(t),t.IsMouseEvent&&(this.mousedown=!1,(t.IsRightClickEvent||"right"===this.lastMouseButtonPressed)&&(this.handlingContextMenu=!0),r.BrowserSupport.IsMac()&&this.handlingContextMenu&&"mouseup"===t.Type||this.handlingContextMenu&&!t.IsRightClickEvent)||this.discrete.End(t)},e.prototype.CancelAllGestures=function(){l.MiscUtil.IsNullOrUndefined(this.drag)||this.drag.Cancel(),l.MiscUtil.IsNullOrUndefined(this.discrete)||this.discrete.Cancel(),l.MiscUtil.IsNullOrUndefined(this.pinch)||this.pinch.Cancel(),l.MiscUtil.IsNullOrUndefined(this.hover)||this.hover.Cancel()},e.prototype.UpdateAllGestures=function(e){l.MiscUtil.IsNullOrUndefined(this.drag)||this.drag.Update(e),l.MiscUtil.IsNullOrUndefined(this.discrete)||this.discrete.Update(e),l.MiscUtil.IsNullOrUndefined(this.pinch)||this.pinch.Update(e),l.MiscUtil.IsNullOrUndefined(this.hover)||this.hover.Update(e)},e.prototype.SetupPressDrag=function(e){var t=this;if(e.UsingPressDrag()){var n=function(n){e.IsHandling("press")&&p.TableauEventHandler.GetHandler(e,"press")(n);var r=new s.EventHandleSpec;r.SetHandler("dragStart",p.TableauEventHandler.GetHandler(e,"pressDragStart")),r.SetHandler("dragMove",p.TableauEventHandler.GetHandler(e,"pressDragMove")),r.SetHandler("dragEnd",p.TableauEventHandler.GetHandler(e,"pressDragEnd")),r.SetHandler("pinchStart",p.TableauEventHandler.GetHandler(e,"doublePressDragStart")),r.SetHandler("pinchMove",p.TableauEventHandler.GetHandler(e,"doublePressDragMove")),r.SetHandler("pinchEnd",p.TableauEventHandler.GetHandler(e,"doublePressDragEnd")),t.drag.Update(r),l.MiscUtil.IsNullOrUndefined(t.pinch)||t.pinch.Update(r)},r=function(n){e.IsHandling("lastTouch")&&p.TableauEventHandler.GetHandler(e,"lastTouch")(n),t.drag.Update(e),l.MiscUtil.IsNullOrUndefined(t.pinch)||t.pinch.Update(e)},i=new s.EventHandleSpec;i.SetHandler("press",n),i.SetHandler("lastTouch",r),this.discrete.Update(i)}},e.prototype.HandleStart=function(e,t){t&&this.hover.Start(e),this.discrete.Start(e),this.drag.Start(e),l.MiscUtil.IsNullOrUndefined(this.pinch)||this.pinch.Start(e)},e.prototype.dispose=function(){l.MiscUtil.IsNullOrUndefined(this.discrete)||this.discrete.dispose(),l.MiscUtil.IsNullOrUndefined(this.drag)||this.drag.dispose(),l.MiscUtil.IsNullOrUndefined(this.hover)||this.hover.dispose(),l.MiscUtil.IsNullOrUndefined(this.pinch)||this.pinch.dispose()},e.globalMouseButton="none",e}();t.EventRecognizer=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),i=n(0),o=function(){function e(){}return e.add_FirstTouch=function(e){this.FirstTouch.add(e)},e.remove_FirstTouch=function(e){this.FirstTouch.remove(e)},e.add_Press=function(e){this.Press.add(e)},e.remove_Press=function(e){this.Press.remove(e)},e.add_Tap=function(e){this.Tap.add(e)},e.remove_Tap=function(e){this.Tap.remove(e)},e.add_LastTouch=function(e){this.LastTouch.add(e)},e.remove_LastTouch=function(e){this.LastTouch.remove(e)},e.add_RightClick=function(e){this.RightClick.add(e)},e.remove_RightClick=function(e){this.RightClick.remove(e)},e.add_DragEnd=function(e){this.DragEnd.add(e)},e.remove_DragEnd=function(e){this.DragEnd.remove(e)},e.add_DismissTemporaryElements=function(e){this.DismissTemporaryElements.add(e)},e.remove_DismissTemporaryElements=function(e){this.DismissTemporaryElements.remove(e)},e.FireFirstTouch=function(t,n){e.FireEvent(e.FirstTouch,t,n)},e.FirePress=function(t,n){e.FireEvent(e.Press,t,n)},e.FireTap=function(t,n){e.FireEvent(e.Tap,t,n)},e.FireLastTouch=function(t,n){e.FireEvent(e.LastTouch,t,n)},e.FireRightClick=function(t,n){e.FireEvent(e.RightClick,t,n)},e.FireDragEnd=function(t,n){e.FireEvent(e.DragEnd,t,n)},e.FireDismissTemporaryElements=function(){i.MiscUtil.IsNullOrUndefined(e.DismissTemporaryElements)||e.DismissTemporaryElements.invoke(null)},e.FireEvent=function(e,t,n){i.MiscUtil.IsNullOrUndefined(e)||e.invoke(t,n)},e.FirstTouch=new r.Delegate,e.Press=new r.Delegate,e.Tap=new r.Delegate,e.LastTouch=new r.Delegate,e.RightClick=new r.Delegate,e.DragEnd=new r.Delegate,e.DismissTemporaryElements=new r.Delegate,e}();t.GlobalUIEvents=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),o=function(){function e(){}return e.InitMouseButtonMappings=function(){e.areMappingsInstantiated||(e.mouseButtonMappingsIE[1]="left",e.mouseButtonMappingsIE[4]="middle",e.mouseButtonMappingsIE[2]="right",e.mouseWhichMappings[1]="left",e.mouseWhichMappings[2]="middle",e.mouseWhichMappings[3]="right",e.areMappingsInstantiated=!0)},e.GetMouseButtonEnum=function(t){e.InitMouseButtonMappings();var n="none",o=i.TypeUtil.GetField(t,"which");if(r.MiscUtil.IsNullOrUndefined(o)){var s=i.TypeUtil.GetField(t,"button");if(!r.MiscUtil.IsNullOrUndefined(s)){var a=s;r.MiscUtil.IsNullOrUndefined(e.mouseButtonMappingsIE[a])||(n=e.mouseButtonMappingsIE[a])}}else{var u=o;r.MiscUtil.IsNullOrUndefined(e.mouseWhichMappings[u])||(n=e.mouseWhichMappings[u])}return n},e.areMappingsInstantiated=!1,e.mouseButtonMappingsIE={},e.mouseWhichMappings={},e}();t.MouseEventUtil=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=function(){function e(){}return e.SetFFWebAuthoringDragAggregation=function(e){r.FeatureFlags.WebAuthoringDragAggregation=e},e.SetFeatureParamDebugTools=function(e){r.FeatureParam.DebugTools=e},e.SetTsConfigIsMobile=function(e){r.TsConfig.IsMobile=e},e.SetBootStrapUtilIsEmbedded=function(e){r.BootstrapUtility.IsEmbedded=e},e}();t.FeatureFlagUtils=i;var o=n(7);t.NormalizedEvent=o.NormalizedEvent;var s=n(12);t.MouseEventUtil=s.MouseEventUtil;var a=n(6);t.EventHandleSpec=a.EventHandleSpec;var u=n(30);t.EventForwarder=u.EventForwarder;var l=n(8);t.TableauEventHandler=l.TableauEventHandler;var c=n(20);t.TableauEventHandlerForReact=c.TableauEventHandlerForReact;var f=n(4);t.Gesture=f.Gesture;var p=n(17);t.Drag=p.Drag;var d=n(11);t.GlobalUIEvents=d.GlobalUIEvents;var h=n(10);t.EventRecognizer=h.EventRecognizer;var v=n(19);t.Hover=v.Hover;var g=n(0);t.MiscUtil=g.MiscUtil;var m=n(16);t.ZoomScaleUtil=m.ZoomScaleUtil;var y=n(18);t.MouseCapture=y.MouseCapture},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n(0),o=function(){function e(){this.delegate=[]}return e.prototype.invoke=function(e,t){void 0===e&&(e=void 0),void 0===t&&(t=void 0);var n=this.delegate;if(i.MiscUtil.IsNullOrUndefined(n))return void console.debug("delegate type not supported");n.forEach(function(n){n(e,t)})},e.prototype.add=function(e){if(i.MiscUtil.IsNullOrUndefined(e))return void console.debug("delegate to add is not initialized (null)");this.delegate.push(e)},e.prototype.remove=function(e){if(i.MiscUtil.IsNullOrUndefined(e))return void console.debug("delegate to remove is not initialized (null)");var t=this.delegate.indexOf(e);if(t<0){var n=e;void 0!==n._targets&&2===n._targets.length&&(t=r.findIndex(this.delegate,function(e){return void 0!==e._targets&&2===e._targets.length&&e._targets[0]===n._targets[0]&&e._targets[1]===n._targets[1]}))}t>=0?this.delegate.splice(t,1):console.debug("delegate to remove is not found")},e}();t.Delegate=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=n(0),o=function(){function e(){}return e.HandleTouchEvents=function(t){return!e.IsCheckboxElement(t)&&!e.IsFocusableTextElement(t)},e.IsCheckboxElement=function(e){if(!i.MiscUtil.IsNullOrUndefined(e)&&!i.MiscUtil.IsNullOrUndefined(e.tagName)){var t=e.tagName.toLowerCase(),n=r(e).attr("type");if("input"===t&&"checkbox"===n)return!0}return!1},e.IsFocusableTextElement=function(e){if(!i.MiscUtil.IsNullOrUndefined(e)&&!i.MiscUtil.IsNullOrUndefined(e.tagName)){var t=e.tagName.toLowerCase();if("textarea"===t||"input"===t||"select"===t)return!0}return!1},e.IsAncestorOf=function(e,t){return!i.MiscUtil.IsNullOrUndefined(e)&&!i.MiscUtil.IsNullOrUndefined(t)&&r(t).parents().index(e)>=0},e}();t.DomUtil=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(25),o=n(2),s=function(){function e(){}return e.initialize=function(){window.addEventListener("message",function(t){return e.OnMessage(window,t)},!1)},Object.defineProperty(e,"ZoomScaleForLocalWindow",{get:function(){var e=document.documentElement.clientWidth,t=window.innerWidth;return o.TsConfig.IsMobile()||(t-=17),e/t},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsScaleFactorCommunicationAvailable",{get:function(){return!r.MiscUtil.IsNullOrUndefined(e.outerMessageSource)},enumerable:!0,configurable:!0}),e.OnMessage=function(t,n){var o=n;if("string"==typeof o.data){var s=i.NonApiCommand.Parse(o.data.toString());if(s.Name===i.NonApiCommandName.ScaleFactorResponse){var a=s.Parameters[0];e.lastScaleFactor=Number(s.Parameters[1]);var u=Number(s.Parameters[2]),l=Number(s.Parameters[3]),c=e.PendingCallbacks[a];delete e.PendingCallbacks.id,e.outerMessageSource=o.source,r.MiscUtil.IsNullOrUndefined(c)||c(e.lastScaleFactor,u,l)}}},e.RequestScaleFactor=function(t){void 0===t&&(t=null);var n=(++e.nextId).toString();e.PendingCallbacks[n]=t;var r=new i.NonApiCommand(i.NonApiCommandName.ScaleFactorRequest,[n]);e.outerMessageSource.postMessage(r.Serialize(),"*")},e.GetScaleAsync=function(t){e.IsScaleFactorCommunicationAvailable?e.RequestScaleFactor(t):r.MiscUtil.IsNullOrUndefined(t)||t(e.ZoomScaleForLocalWindow,0,0)},e.GetScaleSync=function(){return e.IsScaleFactorCommunicationAvailable?(e.RequestScaleFactor(),e.lastScaleFactor):e.ZoomScaleForLocalWindow},e.PendingCallbacks={},e.nextId=1,e.lastScaleFactor=1,e}();t.ZoomScaleUtil=s,s.initialize()},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=n(3),s=n(13),a=n(4),u=n(11),l=n(0),c=n(18),f=n(2),p=n(1),d=function(e){function t(t){var n=e.call(this,t,"drag",!0)||this;return n.canceled=!1,n.dragging=!1,n}return r(t,e),t.prototype.Start=function(e){console.debug("start");var t=e.Touches[0];if(l.MiscUtil.IsNullOrUndefined(e.Target)||"IMG"!==e.Target.tagName.toUpperCase()||f.TsConfig.IsMobile()||e.preventDefault(),e.Touches.length!==this.numTouches)return this.dragging&&this.Fire("dragEnd",e,this.lastInfo),this.ResetGestureState(),void(this.canceled=!0);l.MiscUtil.IsNullOrUndefined(this.startInfo)||o.BrowserSupport.IsTouch()||(console.debug("multiple starts in a row, ending old one first"),this.End(e)),this.canceled=!1,this.startInfo=this.BuildStartInfo(t),this.lastInfo=this.startInfo,this.isPotentialPress=!1,this.Config.IsHandling("potentialPress")&&this.StartPotentialPressDetection()},t.prototype.Move=function(e){this.canceled||(this.isPotentialPress&&e.Touches.length===this.numTouches&&e.preventDefault(),this.lastInfo=this.GetParams(e),this.dragging?this.Fire("dragMove",e,this.lastInfo):this.PastSlop(e)&&(this.dragging=!0,this.Fire("dragStart",e,this.lastInfo),this.Fire("dragMove",e,this.lastInfo),l.MiscUtil.IsNullOrUndefined(this.Config.dragEnd)||c.MouseCapture.SetCapture(document.body,this,!1)))},t.prototype.End=function(e){var t;if(!this.dragging){return e.Touches.length===this.numTouches&&!l.MiscUtil.IsNullOrUndefined(e.Touches[0].identifier)&&this.PastSlop(e)?(this.startInfo=this.BuildStartInfo(e.Touches[0]),this.lastInfo=this.startInfo,t=this.GetParams(e),this.canceled=!1,this.dragging=!0,void this.Fire("dragStart",e,t)):void this.ResetGestureState()}if(console.debug("end"),c.MouseCapture.ReleaseCapture(),t=this.GetParams(e),this.ResetGestureState(),this.Config.IsHandling("dragEnd")){var n=s.NormalizedEvent.Create(e.OriginalEvent,null);i.extend(n,this.lastInfo),u.GlobalUIEvents.FireDragEnd(n,null)}this.Fire("dragEnd",e,t)},t.prototype.Cancel=function(){this.canceled=!0},t.prototype.BuildStartInfo=function(e){var t=new a.GestureEventInfo;return t.PageX=e.pageX,t.PageY=e.pageY,t},t.prototype.GetParams=function(e){var t=e.ChangedTouches[0];l.MiscUtil.IsNullOrUndefined(this.startInfo)&&(this.startInfo=this.BuildStartInfo(t)),l.MiscUtil.IsNullOrUndefined(this.lastInfo)&&(this.lastInfo=this.startInfo);var n=new a.GestureEventInfo;return n.ClientX=t.clientX,n.ClientY=t.clientY,n.PageX=t.pageX,n.PageY=t.pageY,n.StartX=this.startInfo.PageX,n.StartY=this.startInfo.PageY,n.DeltaX=n.PageX-this.startInfo.PageX,n.DeltaY=n.PageY-this.startInfo.PageY,n.DeltaXSinceLast=n.PageX-this.lastInfo.PageX,n.DeltaYSinceLast=n.PageY-this.lastInfo.PageY,n.Scale=1,n},t.prototype.PastSlop=function(e){var t=e.Touches[0];if(l.MiscUtil.IsNullOrUndefined(this.startInfo))return!1;var n=this.ZoomAdjustedSlop;return Math.abs(t.pageX-this.startInfo.PageX)>n||Math.abs(t.pageY-this.startInfo.PageY)>n},t.prototype.ResetGestureState=function(){this.startInfo=null,this.dragging=!1,this.isPotentialPress=!1,this.potentialPressTimer=l.MiscUtil.ClearTimeout(this.potentialPressTimer)},t.prototype.StartPotentialPressDetection=function(){var e=this;this.potentialPressTimer=window.setTimeout(function(){e.dragging||(e.isPotentialPress=!0)},a.Gesture.PotentialPressTime)},t.prototype.HandleCapturedMouseMove=function(e){var t=p.TypeUtil.GetField(e,"offsetX"),n=p.TypeUtil.GetField(e,"offsetY");if(t<0||t>document.body.offsetWidth||n<0||n>document.body.offsetHeight){var r=s.NormalizedEvent.Create(e,this.Config.DomElement);this.Move(r)}},t.prototype.HandleCapturedMouseComplete=function(e){var t=document.createEvent("MouseEvents");t.initMouseEvent("mouseup".toString(),!1,!0,window.self,null,this.lastInfo.PageX,this.lastInfo.PageY,this.lastInfo.ClientX,this.lastInfo.ClientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,null,null),document.body.dispatchEvent(t)},t}(a.Gesture);t.Drag=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(3),o=n(0),s=n(26),a=function(){function e(){}return Object.defineProperty(e,"ManuallyCaptureMouseEvents",{get:function(){return!r.TsConfig.IsMobile()&&i.BrowserSupport.AddEventListener()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ForceDragStopOnIFrameMouseOut",{get:function(){return i.BrowserSupport.IsIE()&&r.BootstrapUtility.IsEmbedded()},enumerable:!0,configurable:!0}),e.SetCapture=function(t,n,r){s.Param.VerifyValue(t,"element"),s.Param.VerifyValue(n,"handler"),e.ManuallyCaptureMouseEvents&&(o.MiscUtil.IsNullOrUndefined(e.eventHandler)||o.MiscUtil.IsNullOrUndefined(r)||!r?(e.ReleaseCapture(),document.addEventListener("mousemove",this.HandleMouseMove,!0),document.addEventListener("mouseup",this.HandleMouseUp,!0),document.addEventListener("mouseout",this.HandleMouseOut,!0),e.eventHandler=n):console.debug("a capture already exists and keepExisting is true"))},e.ReleaseCapture=function(){e.ManuallyCaptureMouseEvents&&(document.removeEventListener("mousemove",this.HandleMouseMove,!0),document.removeEventListener("mouseup",this.HandleMouseUp,!0),document.removeEventListener("mouseout",this.HandleMouseOut,!0))},e.HandleMouseMove=function(t){o.MiscUtil.IsNullOrUndefined(e.eventHandler)||e.eventHandler.HandleCapturedMouseMove(t)},e.HandleMouseUp=function(t){console.debug("Mouse has been released, calling HandleCaptureComplete on the handler"),e.HandleComplete(t)},e.HandleMouseOut=function(t){e.ForceDragStopOnIFrameMouseOut&&e.EventIsOutsideDocument(t)&&(console.debug("Mouse is Exiting document and document is in an iFrame - calling HandleCapturedMouseComplete on the handler"),e.HandleComplete(t))},e.HandleComplete=function(t){e.ReleaseCapture(),o.MiscUtil.IsNullOrUndefined(e.eventHandler)||(e.eventHandler.HandleCapturedMouseComplete(t),e.eventHandler=null)},e.EventIsOutsideDocument=function(e){var t=e.toElement;return o.MiscUtil.IsNullOrUndefined(t)||"HTML"===t.NodeName},e}();t.MouseCapture=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),o=n(4),s=n(0),a=n(1),u=function(e){function t(n){var r=e.call(this,n,"hover",!1)||this;return r.startX=0,r.startY=0,r.possible=!0,r.hoverTime=s.MiscUtil.IsNullOrUndefined(n.HoverDelay)?t.HoverTime:n.HoverDelay,r}return r(t,e),t.prototype.Start=function(e){console.debug("Start"),this.Cancel(),this.possible=!1},t.prototype.Move=function(e){var t=this;console.debug("Move: "+e);var n=e.Touches[0];if(this.possible&&this.PastSlop(e)){var r=this.GetParam(e);s.MiscUtil.IsNullOrUndefined(this.hoverTimeout)||this.Cancel(),this.Fire("moving",e,r),this.startX=n.pageX,this.startY=n.pageY,this.hoverTimeout=window.setTimeout(function(){t.isSuppressed||(console.debug("Hover"),t.Fire("hover",e,r)),t.ClearTimeout()},this.hoverTime)}},t.prototype.End=function(e){console.debug("end"),0===e.Touches.length&&(this.possible=!0)},t.prototype.Out=function(e){var t=a.TypeUtil.GetField(e.OriginalEvent,"relatedTarget");this.Config.DomElement===t||i.DomUtil.IsAncestorOf(this.Config.DomElement,t)||(console.debug("Out."),this.Cancel(),this.Fire("mouseleave",e,this.GetParam(e)))},t.prototype.suppressHover=function(){this.isSuppressed||console.debug("SuppressHover."),this.isSuppressed=!0},t.prototype.unsuppressHover=function(){this.isSuppressed&&console.debug("UnsuppressHover."),this.isSuppressed=!1,this.possible=!0},t.prototype.Cancel=function(){this.ClearTimeout(),this.startX=0,this.startY=0,this.possible=!0},t.prototype.ClearTimeout=function(){this.hoverTimeout=s.MiscUtil.ClearTimeout(this.hoverTimeout)},t.prototype.PastSlop=function(e){var t=e.Touches[0];return Math.abs(t.pageX-this.startX)+Math.abs(t.pageY-this.startY)>this.ZoomAdjustedSlop},t.prototype.GetParam=function(e){var t=new o.GestureEventInfo;return t.PageX=e.ChangedTouches[0].pageX,t.PageY=e.ChangedTouches[0].pageY,t.ClientX=e.ChangedTouches[0].clientX,t.ClientY=e.ChangedTouches[0].clientY,t},t.HoverTime=150,t.FastHoverTime=120,t}(o.Gesture);t.Hover=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),o=n(0),s=n(7),a=n(8),u=n(1),l=function(e){function t(){var t=e.call(this)||this;return t.eventHandlingAttributesForReact=t.GetEventHandlingAttributesForReact(),t}return r(t,e),Object.defineProperty(t.prototype,"EventHandlingAttributesForReact",{get:function(){return this.eventHandlingAttributesForReact},enumerable:!0,configurable:!0}),t.CreateEmpty=function(){return new t},t.prototype.UpdateEventHandleSpec=function(e,t){this.config=o.MiscUtil.IsNullOrUndefined(t)?new i.EventHandleSpec:t,this.config.DomElement=e,this.ConfigureDomElem(e),this.SetupEventRecognizer(this.config)},t.LookupReactEventName=function(e){return o.MiscUtil.IsNullOrUndefined(t.browserEventToReactEvent)&&(t.browserEventToReactEvent={},t.browserEventToReactEvent.touchstart="onTouchStart",t.browserEventToReactEvent.touchmove="onTouchMove",t.browserEventToReactEvent.touchend="onTouchEnd",t.browserEventToReactEvent.touchcancel="onTouchCancel",t.browserEventToReactEvent.mousedown="onMouseDown",t.browserEventToReactEvent.mousemove="onMouseMove",t.browserEventToReactEvent.mouseup="onMouseUp",t.browserEventToReactEvent.mouseout="onMouseOut",t.browserEventToReactEvent.scroll="onScroll",t.browserEventToReactEvent.contextmenu="onContextMenu"),t.browserEventToReactEvent[e]},t.prototype.GetEventHandlingAttributesForReact=function(){var e=this,n={},r=function(t){var n=s.NormalizedEvent.Create(t.nativeEvent,e.config.DomElement,t);e.handler(n)};return s.NormalizedEvent.AllHandledEvents.forEach(function(e){var i=t.LookupReactEventName(e);o.MiscUtil.IsNullOrUndefined(i)?console.warn("Can't find a matching React.js event name for "+e):u.TypeUtil.SetField(n,i.toString(),r)}),n},t.browserEventToReactEvent=null,t}(a.TableauEventHandler);t.TableauEventHandlerForReact=l},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=n(11),s=n(0),a=function(e){function t(t){var n=e.call(this,t,"discrete",!0)||this;return n.doneFirstTap=null,n.startX=0,n.startY=0,n.possible=!1,n.startTime=0,n}return r(t,e),t.prototype.Start=function(e){var t=this,n=e.Touches[0];if(e.Touches.length!==this.numTouches)return void this.Reset();var r=this.GetParams(e);this.ProcessGlobalEvent(o.GlobalUIEvents.FireFirstTouch,e)&&(this.Fire("firstTouch",e,r),this.startX=n.pageX,this.startY=n.pageY,this.possible=!0,this.pressTimer=s.MiscUtil.ClearTimeout(this.pressTimer),s.MiscUtil.IsNullOrUndefined(this.doneFirstTap)&&(this.startTime=(new Date).getTime(),this.potentialPressTimer=window.setTimeout(function(){return t.DoPotentialPress(e,r)},i.Gesture.PotentialPressTime),this.pressTimer=window.setTimeout(function(){return t.DoPress(e,r)},i.Gesture.PressTime)))},t.prototype.Move=function(e){this.PastSlop(e)&&this.Reset(),"touchmove"===e.Type&&this.Fire("touchMove",e,this.GetParams(e))},t.prototype.End=function(e){var t=this.GetParams(e);if(this.isActivePress&&this.DoPressEnd(e,t),this.CancelPress(),this.possible&&(!s.MiscUtil.IsNullOrUndefined(this.doneFirstTap)&&this.doneFirstTap?this.DoDoubleTap(e,t):this.DoTap(e,t)),"contextmenu"===e.Type){if(!this.ProcessGlobalEvent(o.GlobalUIEvents.FireRightClick,e))return;this.DoRightClick(e,t)}if(0===e.Touches.length){if(!this.ProcessGlobalEvent(o.GlobalUIEvents.FireLastTouch,e))return;this.Fire("lastTouch",e,t)}},t.prototype.Cancel=function(){this.Reset()},t.prototype.Reset=function(){this.CancelPress(),this.possible=!1,this.doneFirstTap=null,this.isPotentialPress=!1,this.isActivePress=!1,this.doubleTapTimer=s.MiscUtil.ClearTimeout(this.doubleTapTimer)},t.prototype.DoEvent=function(e,t,n,r){this.Fire(e,t,n),r&&r.reset&&this.Reset()},t.prototype.DoDoubleTap=function(e,t){this.doubleTapTimer=s.MiscUtil.ClearTimeout(this.doubleTapTimer),this.DoEvent("doubleTap",e,t,{reset:!0})},t.prototype.DoPress=function(e,t){this.isPotentialPress=!1,this.ProcessGlobalEvent(o.GlobalUIEvents.FirePress,e)&&(this.DoEvent("press",e,t,{reset:!0}),this.isActivePress=!0)},t.prototype.DoPotentialPress=function(e,t){this.isPotentialPress=!0,this.DoEvent("potentialPress",e,t)},t.prototype.DoPressEnd=function(e,t){this.DoEvent("pressEnd",e,t),this.isActivePress=!1},t.prototype.CancelPress=function(){this.potentialPressTimer=s.MiscUtil.ClearTimeout(this.potentialPressTimer),this.pressTimer=s.MiscUtil.ClearTimeout(this.pressTimer),this.isPotentialPress&&this.DoEvent("cancelPotentialPress",{},null)},t.prototype.DoTap=function(e,t){var n=this;this.doneFirstTap=!0,this.ProcessGlobalEvent(o.GlobalUIEvents.FireTap,e)&&(this.Config.IsHandling("doubleTap")?this.doubleTapTimer=window.setTimeout(function(){n.Reset(),n.Fire("cancelPotentialDoubleTap",e,t)},i.Gesture.DoubleTapTime-this.GetElapsedTime()):this.Reset(),this.Fire("tap",e,t))},t.prototype.DoRightClick=function(e,t){this.Fire("rightClick",e,t)},t.prototype.ProcessGlobalEvent=function(e,t){var n=this,r=!1;return e(t,function(e){n.Reset(),e&&(t.stopPropagation(),t.preventDefault()),r=!0}),!r},t.prototype.GetElapsedTime=function(){return(new Date).getTime()-this.startTime},t.prototype.PastSlop=function(e){var t=e.ChangedTouches[0],n=this.ZoomAdjustedSlop;return Math.abs(t.pageX-this.startX)>n||Math.abs(t.pageY-this.startY)>n},t.prototype.GetParams=function(e){var t=new i.GestureEventInfo;return t.PageX=e.ChangedTouches[0].pageX,t.PageY=e.ChangedTouches[0].pageY,t.ClientX=e.ChangedTouches[0].clientX,t.ClientY=e.ChangedTouches[0].clientY,t.StartX=e.ChangedTouches[0].pageX,t.StartY=e.ChangedTouches[0].pageY,t},t}(i.Gesture);t.Discrete=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.DomElement=e,this.EventHandler=t}return e}();t.DomSubscriptionHandle=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r;!function(e){e.Bootstrap="tableau.bootstrap",e.Completed="completed",e.VisibleRectRequest="layoutInfoReq",e.VisibleRectResponse="layoutInfoResp",e.LegacyVizOffsetResp="vizOffsetResp",e.EnableVisibleRectCommunication="tableau.enableVisibleRectCommunication",e.TableauCompleted="tableau.completed",e.UnhandledException="tableau.unhandledException",e.Listening="tableau.listening",e.Responsive="tableau.responsive",e.ScaleFactorRequest="sf?",e.ScaleFactorResponse="sf"}(r||(r={})),t.NonApiCommandName=r;var i=function(){function e(e,t){this.Name=e,this.parameters=t}return Object.defineProperty(e.prototype,"Parameters",{get:function(){return this.parameters},enumerable:!0,configurable:!0}),e.Parse=function(t){var n=t.split(",");return new e(n[0],n.slice(1))},e.prototype.Serialize=function(){var e=new Array;return e.push(this.Name.toString()),e=e.concat(this.parameters),e.join(",")},e}();t.NonApiCommand=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),o=function(){function e(){}return e.VerifyValue=function(t,n){if(r.MiscUtil.IsNullOrUndefined(t)){var i=e.CreateArgumentNullOrUndefinedException(n);throw e.ShowParameterAlert(i),i}},e.CreateArgumentNullOrUndefinedException=function(e){var t=new DOMException("{paramName} is null or undefined");return i.TypeUtil.SetField(t,e,e),t},e.ShowParameterAlert=function(t){if(!this.SuppressAlerts)try{throw t}catch(t){window.alert(e.FormatExceptionMessage(t))}},e.FormatExceptionMessage=function(e){var t=e.stack;return r.MiscUtil.IsNullOrUndefined(t)?e.message:t},e.SuppressAlerts=!1,e}();t.Param=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=function(e){function t(t){var n=e.call(this,t,"pinch",!0,2)||this;return n.pinching=!1,n}return r(t,e),t.prototype.Start=function(e){if(!(e.Touches.length<this.numTouches||this.pinching)){this.touch1=e.Touches[0],this.touch2=e.Touches[1],this.startParams=this.GetStartParams(),this.lastParams=this.startParams;var t=this.GetParams();this.Fire("pinchStart",e,t),this.pinching=!0}},t.prototype.Move=function(e){if(this.pinching){if(e.Touches.length<2)return void this.End(e);this.touch1=e.Touches[0],this.touch2=e.Touches[1],this.lastParams=this.GetParams(),this.Fire("pinchMove",e,this.lastParams)}},t.prototype.End=function(e){if(!(e.Touches.length>this.numTouches)&&this.pinching){this.pinching=!1;var t=this.GetParams();this.Fire("pinchEnd",e,t)}},t.prototype.Cancel=function(){},t.prototype.GetStartParams=function(){var e=this.touch1,t=this.touch2,n=t.pageX-e.pageX,r=t.pageY-e.pageY,o=Math.sqrt(n*n+r*r),s=n/2+e.pageX,a=r/2+e.pageY,u=new i.GestureEventInfo;return u.PageX=s,u.PageY=a,u.Distance=o,u},t.prototype.GetParams=function(){var e=this.touch1,t=this.touch2,n=t.pageX-e.pageX,r=t.pageY-e.pageY,o=Math.sqrt(n*n+r*r),s=n/2+e.pageX,a=r/2+e.pageY,u=new i.GestureEventInfo;return u.PageX=s,u.PageY=a,u.Scale=o/this.startParams.Distance,u.DeltaX=s-this.startParams.PageX,u.DeltaY=a-this.startParams.PageY,u.StartX=this.startParams.PageX,u.StartY=this.startParams.PageY,u.DeltaXSinceLast=s-this.lastParams.PageX,u.DeltaYSinceLast=a-this.lastParams.PageY,u},t}(i.Gesture);t.Pinch=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=n(3),o=n(0),s=n(7),a=n(2),u=function(){function e(){}return Object.defineProperty(e,"HandledEvents",{get:function(){return e.SetupEventNames(),e.handledEvents},enumerable:!0,configurable:!0}),e.CreateNormalizedEvent=function(t,n,r){void 0===r&&(r=null),e.SetupEventNames();var i=new s.NormalizedEvent(t,n,r);return i.Source=e.HandledEvents[i.Type],i.InputType=e.GetEventInputType(i.Type),i},e.GetEventInputType=function(t){e.SetupEventNames();var n=6;return o.MiscUtil.IsNullOrUndefined(e.startEvents[t])?o.MiscUtil.IsNullOrUndefined(e.moveEvents[t])?o.MiscUtil.IsNullOrUndefined(e.endEvents[t])?o.MiscUtil.IsNullOrUndefined(e.outEvents[t])?o.MiscUtil.IsNullOrUndefined(e.cancelEvents[t])?o.MiscUtil.IsNullOrUndefined(e.scrollEvents[t])||(n=4):n=5:n=3:n=2:n=1:n=0,n},e.SetupEventNames=function(){e.initialized||(e.startEvents.touchstart=2,e.moveEvents.touchmove=2,e.endEvents.touchend=2,e.cancelEvents.touchcancel=2,a.TsConfig.IsMobile()?i.BrowserSupport.IsTouch()||(e.startEvents.mousedown=1,e.moveEvents.mousemove=1,e.endEvents.mouseup=1,e.outEvents.mouseout=1):(e.startEvents.mousedown=1,e.moveEvents.mousemove=1,e.endEvents.mouseup=1,e.outEvents.mouseout=1,e.scrollEvents.scroll=1,e.endEvents.contextmenu=1),r.extend(e.handledEvents,e.startEvents,e.moveEvents,e.endEvents,e.outEvents,e.scrollEvents,e.cancelEvents),e.initialized=!0)},e.handledEvents={},e.startEvents={},e.moveEvents={},e.endEvents={},e.outEvents={},e.scrollEvents={},e.cancelEvents={},e.initialized=!1,e}();t.NormalizedEventBuilder=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r;!function(e){e.Simple="simple",e.Toggle="toggle",e.Range="range",e.Menu="menu"}(r||(r={})),t.SelectAction=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),o=n(5),s=n(31),a=n(32),u=n(0),l=n(20),c=function(e){function t(t){var n=e.call(this,t,null)||this;return n.eventHandler=null,n.element=null,n.spec=null,n.eventHandler=l.TableauEventHandlerForReact.CreateEmpty(),n}return r(t,e),t.createElement=function(e,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a={TagName:e,HtmlAttributes:r,Spec:n,key:r.key};return u.MiscUtil.IsNullOrUndefined(r.ref)||(a.ref=r.ref,delete r.ref),u.MiscUtil.IsNullOrUndefined(i)||1!==i.length?s.createElement(t,a,i):s.createElement(t,a,i[0])},t.div=function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.createElement("div",e,n,r)},t.span=function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.createElement("span",e,n,r)},t.prototype.render=function(){return s.createElement(this.props.TagName,o.extend({},this.eventHandler.EventHandlingAttributesForReact,this.props.HtmlAttributes),this.props.children)},t.prototype.componentDidMount=function(){this.UpdateElementSpec()},t.prototype.componentDidUpdate=function(){this.UpdateElementSpec()},t.prototype.componentWillUnmount=function(){u.MiscUtil.IsNullOrUndefined(this.eventHandler)||this.eventHandler.dispose()},t.prototype.UpdateElementSpec=function(){if(!u.MiscUtil.IsNullOrUndefined(this.props.Spec)){var e=a.findDOMNode(this);e instanceof HTMLElement&&(this.element!==e||t.HasEventHandleSpecChanged(this.spec,this.props.Spec))&&(this.eventHandler.UpdateEventHandleSpec(e,this.props.Spec),this.element=e,this.spec=this.props.Spec)}},t.HasEventHandleSpecChanged=function(e,t){return!i.every(Object.keys(t),function(t){return-1!==Object.keys(e).indexOf(t)})},t}(s.Component);t.EventForwarder=c},function(e,t){e.exports=n},function(e,t){e.exports=r}])});(function(){(function(){'dont use strict';var a={};ss.initAssembly(a,'vqleventutils')})()}());;
/*! BEGIN LegacyDojoModuleInterfaces */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqllegacydojomoduleinterfaces');var b=function(w){var x=function(){};ss.registerGenericInterfaceInstance(x,b,[w],{},function(){return[ss.IDisposable,tab.IAppendableView,ss.makeGenericType(tab.IView$1,[w])]});ss.setMetadata(x,{variance:[1]});return x};b.__typeName='tab.ICategoricalLegendView$1';ss.initGenericInterface(b,a,1);global.tab.ICategoricalLegendView$1=b;var c=function(){};c.__typeName='tab.ICategoricalLegendViewModel';global.tab.ICategoricalLegendViewModel=c;var d=function(){};d.__typeName='tab.IContinuousSlider';global.tab.IContinuousSlider=d;var e=function(){};e.__typeName='tab.IContinuousSliderViewModel';global.tab.IContinuousSliderViewModel=e;var f=function(){};f.__typeName='tab.ICurrentPagePanelWidgetShim';global.tab.ICurrentPagePanelWidgetShim=f;var g=function(){};g.__typeName='tab.IFilterPanelWidgetShim';global.tab.IFilterPanelWidgetShim=g;var h=function(){};h.__typeName='tab.ILegacyDojoUIModule';global.tab.ILegacyDojoUIModule=h;var i=function(){};i.__typeName='tab.ILegacyDojoWidgetMaker';global.tab.ILegacyDojoWidgetMaker=i;var j=function(w){var x=function(){};ss.registerGenericInterfaceInstance(x,j,[w],{},function(){return[ss.IDisposable,tab.IAppendableView,ss.makeGenericType(tab.IView$1,[w])]});ss.setMetadata(x,{variance:[1]});return x};j.__typeName='tab.ILegacyLegendView$1';ss.initGenericInterface(j,a,1);global.tab.ILegacyLegendView$1=j;var k=function(){};k.__typeName='tab.ILegacyLegendViewModel';global.tab.ILegacyLegendViewModel=k;var l=function(w){var x=function(){};ss.registerGenericInterfaceInstance(x,l,[w],{},function(){return[ss.IDisposable,tab.IAppendableView,ss.makeGenericType(tab.IView$1,[w])]});ss.setMetadata(x,{variance:[1]});return x};l.__typeName='tab.ILegacyQuickFilterDisplayView$1';ss.initGenericInterface(l,a,1);global.tab.ILegacyQuickFilterDisplayView$1=l;var m=function(){};m.__typeName='tab.ILegacyQuickFilterDisplayViewModel';global.tab.ILegacyQuickFilterDisplayViewModel=m;var n=function(){};n.__typeName='tab.ILegacyWidgetShim';global.tab.ILegacyWidgetShim=n;var o=function(w){var x=function(){};ss.registerGenericInterfaceInstance(x,o,[w],{},function(){return[ss.IDisposable,tab.IAppendableView,ss.makeGenericType(tab.IView$1,[w])]});ss.setMetadata(x,{variance:[1]});return x};o.__typeName='tab.IPageView$1';ss.initGenericInterface(o,a,1);global.tab.IPageView$1=o;var p=function(){};p.__typeName='tab.IPageViewModel';global.tab.IPageViewModel=p;var q=function(w){var x=function(){};ss.registerGenericInterfaceInstance(x,q,[w],{updateViewProperties:null},function(){return[ss.IDisposable,tab.IAppendableView,ss.makeGenericType(tab.IView$1,[w])]});ss.setMetadata(x,{variance:[1]});return x};q.__typeName='tab.IParameterControlView$1';ss.initGenericInterface(q,a,1);global.tab.IParameterControlView$1=q;var r=function(){};r.__typeName='tab.IParameterControlViewModel';global.tab.IParameterControlViewModel=r;var s=function(){};s.__typeName='tab.IParameterControlWidgetShim';global.tab.IParameterControlWidgetShim=s;var t=function(w){var x=function(){};ss.registerGenericInterfaceInstance(x,t,[w],{},function(){return[ss.IDisposable,tab.IAppendableView,ss.makeGenericType(tab.IView$1,[w])]});ss.setMetadata(x,{variance:[1]});return x};t.__typeName='tab.IQuantitativeColorLegendView$1';ss.initGenericInterface(t,a,1);global.tab.IQuantitativeColorLegendView$1=t;var u=function(){};u.__typeName='tab.IQuantitativeColorLegendViewModel';global.tab.IQuantitativeColorLegendViewModel=u;var v=function(){};v.__typeName='tab.ITabbedNavigation';global.tab.ITabbedNavigation=v;ss.initInterface(c,a,{},[ss.IDisposable,tab.IViewModel]);ss.initInterface(d,a,{get_widgetNode:null,onAddedToDomShim:null});ss.initInterface(e,a,{add_sliderValueChange:null,remove_sliderValueChange:null,add_intermediateChange:null,remove_intermediateChange:null,get_sliderClassName:null,set_sliderClassName:null,get_currentFraction:null,set_currentFraction:null,get_pixelWidth:null,set_pixelWidth:null,get_ruleTickCount:null,set_ruleTickCount:null,currentFractionUpdated:null},[ss.IDisposable,tab.IViewModel,spiff.IHasEnabledState]);ss.initInterface(n,a,{getDomNode:null,destroyRecursiveShim:null,startupShim:null});ss.initInterface(f,a,{destroyRecursiveShim$1:null,updatePropertiesShim:null,refreshLayoutShim:null},[n]);ss.initInterface(g,a,{updateAttributesShim:null,updateFilterStateShim:null,setTitleSizeShim:null,updateFilterPropertiesShim:null,updateSubWidgetShim:null},[n,ss.IDisposable]);ss.initInterface(h,a,{createTabbedNavigation:null,createPageViewModel:null,createCategoricalLegendViewModel:null,createQuantitativeColorLegendViewModel:null,createLegacyLegendViewModel:null,createLegacyQuickFilterDisplayViewModel:null,createParameterControlViewModel:null,createPageView:null,createLegacyQuickFilterDisplayView:null,createParameterControlView:null,createQuantitativeColorLegendView:null,createContinuousSliderViewModel:null,createLegacyLegendView:null,createContinuousSlider:null});ss.initInterface(i,a,{makeCurrentPagePanelWidget:null,makeFilterPanelWidget:null,makeControlWidget:null});ss.initInterface(k,a,{},[ss.IDisposable,tab.IViewModel]);ss.initInterface(m,a,{},[ss.IDisposable,tab.IViewModel]);ss.initInterface(p,a,{get_visualId:null,get_isHistoryToggleInteractionDisabled:null,get_pageModel:null},[ss.IDisposable,tab.IViewModel]);ss.initInterface(r,a,{get_parameterCtrlModel:null,get_hasBorder:null},[ss.IDisposable,tab.IViewModel]);ss.initInterface(s,a,{destroyRecursiveShim$1:null,updatePropertiesShim:null,layoutShim:null},[n]);ss.initInterface(u,a,{},[ss.IDisposable,tab.IViewModel]);ss.initInterface(v,a,{get_widgetDomNode:null,destroyShim:null,startupShim:null,resizeShim:null});ss.setMetadata(b,{variance:[1]});ss.setMetadata(j,{variance:[1]});ss.setMetadata(l,{variance:[1]});ss.setMetadata(o,{variance:[1]});ss.setMetadata(q,{variance:[1]});ss.setMetadata(t,{variance:[1]})})();;
/*! BEGIN ModuleInterfaces */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqlmoduleinterfaces');var b=function(){this.isAuthoring=false;this.isPublic=false;this.isSaas=false};b.__typeName='tab.ExtensionServerContext';global.tab.ExtensionServerContext=b;var c=function(){this.previous=null;this.scroller=null;this.next=null;this.previousArrow=null;this.nextArrow=null;spiff.Template.call(this,$("<div class='tabFlipboardNav'><span class='tabFlipboardNavPrevious'><div class='tabStoryLeftArrow'/></span><span class='tabFlipboardNavScroller'/><span class='tabFlipboardNavNext'><div class='tabStoryRightArrow'/></span></div>"));this.previous=this.getElementBySelector('.tabFlipboardNavPrevious');this.scroller=this.getElementBySelector('.tabFlipboardNavScroller');this.next=this.getElementBySelector('.tabFlipboardNavNext');this.previousArrow=this.getElementBySelector('.tabStoryLeftArrow');this.nextArrow=this.getElementBySelector('.tabStoryRightArrow')};c.__typeName='tab.FlipboardNavigatorTemplate';global.tab.FlipboardNavigatorTemplate=c;var d=function(){};d.__typeName='tab.HitResultObjectType';global.tab.HitResultObjectType=d;var e=function(){};e.__typeName='tab.IAliasDialogModule';global.tab.IAliasDialogModule=e;var f=function(){};f.__typeName='tab.IAuthoringStoryboardView';global.tab.IAuthoringStoryboardView=f;var g=function(){};g.__typeName='tab.IAuthoringStoryboardViewModel';global.tab.IAuthoringStoryboardViewModel=g;var h=function(){};h.__typeName='tab.IAutomatedInsightsPanelFactory';global.tab.IAutomatedInsightsPanelFactory=h;var i=function(){};i.__typeName='tab.IAutomatedInsightsPanelModuleViewModel';global.tab.IAutomatedInsightsPanelModuleViewModel=i;var j=function(){};j.__typeName='tab.IAxisResizerManager';global.tab.IAxisResizerManager=j;var k=function(){};k.__typeName='tab.IBinDialogModule';global.tab.IBinDialogModule=k;var l=function(){};l.__typeName='tab.ICellResizerManager';global.tab.ICellResizerManager=l;var m=function(){};m.__typeName='tab.ICellResizerManagerViewModel';global.tab.ICellResizerManagerViewModel=m;var n=function(){};n.__typeName='tab.ICertificationMarkFactory';global.tab.ICertificationMarkFactory=n;var o=function(){};o.__typeName='tab.ICommentingFactory';global.tab.ICommentingFactory=o;var p=function(){};p.__typeName='tab.ICommentingModuleViewModel';global.tab.ICommentingModuleViewModel=p;var q=function(){};q.__typeName='tab.IConnectionDialogModule';global.tab.IConnectionDialogModule=q;var r=function(){};r.__typeName='tab.IDataAlertsPanelFactory';global.tab.IDataAlertsPanelFactory=r;var s=function(){};s.__typeName='tab.IDataAlertsPanelModuleViewModel';global.tab.IDataAlertsPanelModuleViewModel=s;var t=function(){};t.__typeName='tab.IDataConnectionModule';global.tab.IDataConnectionModule=t;var u=function(bg){var bh=function(){};ss.registerGenericInterfaceInstance(bh,u,[bg],{},function(){return[ss.IDisposable,tab.IAppendableView,ss.makeGenericType(tab.IView$1,[bg])]});ss.setMetadata(bh,{variance:[1]});return bh};u.__typeName='tab.IDataConnectionPromptView$1';ss.initGenericInterface(u,a,1);global.tab.IDataConnectionPromptView$1=u;var v=function(){};v.__typeName='tab.IDataConnectionPromptViewModel';global.tab.IDataConnectionPromptViewModel=v;var w=function(){};w.__typeName='tab.IDataTabModule';global.tab.IDataTabModule=w;var x=function(){};x.__typeName='tab.IDownloadAsVersionDialogModule';global.tab.IDownloadAsVersionDialogModule=x;var y=function(){};y.__typeName='tab.IDownloadDialogModule';global.tab.IDownloadDialogModule=y;var z=function(){};z.__typeName='tab.IFileUploadModule';global.tab.IFileUploadModule=z;var A=function(){};A.__typeName='tab.IFlipboardNavigatorView';global.tab.IFlipboardNavigatorView=A;var B=function(){};B.__typeName='tab.IFlipboardNavigatorViewModel';global.tab.IFlipboardNavigatorViewModel=B;var C=function(){};C.__typeName='tab.IFrelardServerBootstrapModule';global.tab.IFrelardServerBootstrapModule=C;var D=function(){};D.__typeName='tab.IGroupDialogModule';global.tab.IGroupDialogModule=D;var E=function(){};E.__typeName='tab.IHeaderResizerManager';global.tab.IHeaderResizerManager=E;var F=function(){};F.__typeName='tab.IHeaderResizerManagerViewModel';global.tab.IHeaderResizerManagerViewModel=F;var G=function(){};G.__typeName='tab.IHitTestResult';global.tab.IHitTestResult=G;var H=function(){};H.__typeName='tab.INlpSaveController';global.tab.INlpSaveController=H;var I=function(){};I.__typeName='tab.IPaneContent';global.tab.IPaneContent=I;var J=function(){};J.__typeName='tab.IPaneTableView';global.tab.IPaneTableView=J;var K=function(){};K.__typeName='tab.IPaneTableViewModel';global.tab.IPaneTableViewModel=K;var L=function(){};L.__typeName='tab.IPdfExportDialogModule';global.tab.IPdfExportDialogModule=L;var M=function(){};M.__typeName='tab.IResizeHeadersModule';global.tab.IResizeHeadersModule=M;var N=function(){};N.__typeName='tab.IResizerViewModel';global.tab.IResizerViewModel=N;var O=function(){};O.__typeName='tab.IRichTextAuthoringModule';global.tab.IRichTextAuthoringModule=O;var P=function(){};P.__typeName='tab.ISavingModule';global.tab.ISavingModule=P;var Q=function(){};Q.__typeName='tab.ISelfServiceSchedulesModule';global.tab.ISelfServiceSchedulesModule=Q;var R=function(){};R.__typeName='tab.ISharedWidgetsDataGrid';global.tab.ISharedWidgetsDataGrid=R;var S=function(){};S.__typeName='tab.ISharedWidgetsPlayground';global.tab.ISharedWidgetsPlayground=S;var T=function(){};T.__typeName='tab.IStoryAuthoringModule';global.tab.IStoryAuthoringModule=T;var U=function(){};U.__typeName='tab.IStoryContentPaneViewModel';global.tab.IStoryContentPaneViewModel=U;var V=function(){};V.__typeName='tab.IStoryLayoutPaneViewModel';global.tab.IStoryLayoutPaneViewModel=V;var W=function(){};W.__typeName='tab.IStoryModule';global.tab.IStoryModule=W;var X=function(){};X.__typeName='tab.IStoryPointCaptionViewModel';global.tab.IStoryPointCaptionViewModel=X;var Y=function(){};Y.__typeName='tab.ITrendLineDialogModule';global.tab.ITrendLineDialogModule=Y;var Z=function(){};Z.__typeName='tab.IViewController';global.tab.IViewController=Z;var ba=function(){};ba.__typeName='tab.IViewUnderlyingDataTableModule';global.tab.IViewUnderlyingDataTableModule=ba;var bb=function(){};bb.__typeName='tab.IVizHitInfo';global.tab.IVizHitInfo=bb;var bc=function(){};bc.__typeName='tab.IVizHitTestDebouncer';global.tab.IVizHitTestDebouncer=bc;var bd=function(){};bd.__typeName='tab.IVizZoneModule';global.tab.IVizZoneModule=bd;var be=function(){};be.__typeName='tab.IZoneViewModel';global.tab.IZoneViewModel=be;var bf=function(){this.authoringUrl=null;this.viewingUrl=null;this.projectName=null;this.workbookName=null};bf.__typeName='tab.SavedNlpWorkbookInfo';global.tab.SavedNlpWorkbookInfo=bf;ss.initClass(b,a,{});ss.initClass(c,a,{},spiff.Template,[ss.IDisposable]);ss.initEnum(d,a,{none:0,misc:1,annotation:2,trendLine:3,semanticModelRefLine:4,referenceLine:5,referenceLineLabel:6,mark:7,markLabel:8});ss.initInterface(e,a,{showDialog:null});ss.initInterface(f,a,{addToDom$1:null},[ss.IDisposable,tab.IAppendableView,ss.makeGenericType(tab.IView$1,[g])]);ss.initInterface(g,a,{get_leftPanelContentPaneViewModel:null,get_leftPanelLayoutPaneViewModel:null},[ss.IDisposable,tab.IViewModel]);ss.initInterface(h,a,{createAutomatedInsightsPanelModuleViewModel:null});ss.initInterface(i,a,{},[spiff.IContent]);ss.initInterface(j,a,{setAxisResizers:null});ss.initInterface(k,a,{showDialog:null});ss.initInterface(l,a,{handleCellResizerUpdate:null,scrollY:null,scrollX:null});ss.initInterface(m,a,{add_updateCellResizerViews:null,remove_updateCellResizerViews:null,get_resizeInfo:null,get_cellWidthResizerVM:null,get_cellHeightResizerVM:null});ss.initInterface(n,a,{createCertificationMark:null});ss.initInterface(o,a,{createCommentingModuleViewModel:null});ss.initInterface(p,a,{get_closeCommentingDrawer:null,set_closeCommentingDrawer:null,get_loadDrawerFonts:null,set_loadDrawerFonts:null,get_showNotification:null,set_showNotification:null,updateForSheet:null},[spiff.IContent]);ss.initInterface(q,a,{showCreateConnectionDialog:null,showCreateConnectionDialogForEmptyWorkbook:null,showReplaceFileDialog:null,showEditConnectionDialog:null,uploadDroppedFiles:null,showPublishedConnectionDialog:null,showSignInDialog:null,showExtractInProgressDialog:null});ss.initInterface(r,a,{createDataAlertsPanelModuleViewModel:null});ss.initInterface(s,a,{},[spiff.IContent]);ss.initInterface(t,a,{createDataConnectionPromptViewModel:null,createDataConnectionPromptView:null});ss.initInterface(v,a,{get_promptUpdated:null,set_promptUpdated:null},[ss.IDisposable,tab.IViewModel]);ss.initInterface(w,a,{showDataTab:null,hideDataTab:null});ss.initInterface(x,a,{showDownloadAsVersionDialog:null});ss.initInterface(y,a,{buildDialogContent:null});ss.initInterface(z,a,{uploadFiles:null,copyTempFileToSessionStorage:null});ss.initInterface(A,a,{get_dom:null,get_domRoot:null},[ss.IDisposable,tab.IAppendableView,ss.makeGenericType(tab.IView$1,[B])]);ss.initInterface(B,a,{add_zoneResized:null,remove_zoneResized:null,add_activePointUpdated:null,remove_activePointUpdated:null,add_remoteUpdateComplete:null,remove_remoteUpdateComplete:null,add_flipboardNavigatorUpdated:null,remove_flipboardNavigatorUpdated:null,add_findParentScroller:null,remove_findParentScroller:null,get_currentPointIndex:null,get_numberOfPoints:null,get_storyPointHeight:null,get_storyPointWidth:null,get_previousDisabled:null,get_nextDisabled:null,get_showArrows:null,get_captions:null,get_useDarkIcons:null,get_scrollBarStyle:null,get_navType:null,get_currentStoryPointId:null,closeUberMenu:null,clickNext:null,clickPrevious:null},[ss.IDisposable,tab.IViewModel]);ss.initInterface(C,a,{createApiDispatcher:null});ss.initInterface(D,a,{showGroupDialog:null});ss.initInterface(E,a,{handleResizerUpdate:null});ss.initInterface(F,a,{add_updateResizerViews:null,remove_updateResizerViews:null,get_resizeInfo:null,get_rowHeaderResizerVMs:null,get_columnHeaderResizerVMs:null,get_totalColumnHeadersHeight:null},[ss.IDisposable,tab.IViewModel]);ss.initInterface(G,a,{get_hitObjectType:null,get_id:null});ss.initInterface(H,a,{saveNlpWorkbook:null});ss.initInterface(I,a,{get_title:null,get_id:null,get_contentViewType:null,get_contentViewModel:null,get_additionalContentViewClass:null},[ss.IDisposable,tab.IViewModel]);ss.initInterface(J,a,{get_scrollPosition:null,get_vizHitTestDebouncer:null,doTiledViewerRefreshImages:null},[ss.IDisposable,tab.IAppendableView,ss.makeGenericType(tab.IView$1,[K])]);ss.initInterface(K,a,{add_differentMarkBrushing:null,remove_differentMarkBrushing:null,add_differentMarkSelection:null,remove_differentMarkSelection:null,get_visualModel:null,get_sheetId:null,get_viewController:null,set_viewController:null},[ss.IDisposable,tab.IViewModel]);ss.initInterface(L,a,{createSpiffPdfExportDialog:null,showExportPdfDialog:null});ss.initInterface(M,a,{newHeaderResizerManagerViewModel:null,newHeaderResizerManager:null,newAxisResizerManager:null,newCellResizerManagerViewModel:null,newCellResizerManager:null});ss.initInterface(N,a,{get_visualID:null,get_resizerOffset:null,get_resizerLength:null,get_isXResizer:null,get_resizerMinimumOffset:null,get_resizerMaximumOffset:null,get_cssClassName:null,sendResizeCommand:null});ss.initInterface(O,a,{showRichTextEditorDialog:null});ss.initInterface(P,a,{instance:null});ss.initInterface(Q,a,{get_defaultRecurrence:null,get_selfServiceSchedulePaneComponent:null,createSubscriptionWithSelfServiceSchedule:null,createSubscriptionsWithSelfServiceSchedule:null});ss.initInterface(R,a,{createGrid:null,createArrayRowStore:null,createGridSelection:null});ss.initInterface(S,a,{show:null});ss.initInterface(W,a,{newFlipboardNavigatorViewModel:null,newFlipboardViewModel:null,newFlipboardNavigatorView:null,newFlipboardView:null,insertStoryPoint:null,replaceStoryPoint:null,fireCloseStoryUberMenu:null,fireShowUpdateToast:null});ss.initInterface(T,a,{newAuthoringStoryboardViewModel:null},[W]);ss.initInterface(U,a,{},[ss.IDisposable,tab.IViewModel,I]);ss.initInterface(V,a,{},[ss.IDisposable,tab.IViewModel,I]);ss.initInterface(X,a,{add_pointCaptured:null,remove_pointCaptured:null,get_caption:null,get_isCurrentPoint:null,get_isCaptured:null,get_storyPointId:null,get_storyPointIndex:null,get_selectedStoryPointStyle:null,get_unselectedStoryPointStyle:null,clickStoryPoint:null,revertStoryPoint:null});ss.initInterface(Y,a,{showDialog:null});ss.initInterface(Z,a,{get_viewSession:null,get_sheetName:null,get_cacheVersion:null,setTiledViewer:null,incrementCacheVersion:null},[ss.IDisposable]);ss.initClass(ba,a,{showDialog:null});ss.initInterface(bb,a,{get_result:null,get_visualId:null,get_sheetId:null,get_paneColumnIndex:null,get_paneRowIndex:null,get_pageCoordinates:null});ss.initInterface(bc,a,{add_updated:null,remove_updated:null,get_current:null,getAsync:null,isWithinLastHitTestDistance:null,getLastHitTestDistance:null,update:null},[ss.IDisposable]);ss.initInterface(bd,a,{createPaneTableView:null,createPaneTableViewModel:null,addVizDragHandler:null,addAsyncVizDragHandler:null,addVizDragApprover:null,computeVizScrollCapabilities:null});ss.initInterface(be,a,{add_resizeZone:null,remove_resizeZone:null,add_zoneResized:null,remove_zoneResized:null,add_validStateChanged:null,remove_validStateChanged:null,get_width:null,get_height:null,get_contentWidth:null,get_contentHeight:null,get_contentContainerStyle:null,get_titleSize:null,get_zoneId:null,get_hasTitle:null,get_associatedSheet:null,get_valid:null,get_model:null,forceZoneValidState:null});ss.initClass(bf,a,{});ss.setMetadata(u,{variance:[1]});(function(){c.$0="<div class='tabFlipboardNav'><span class='tabFlipboardNavPrevious'><div class='tabStoryLeftArrow'/></span><span class='tabFlipboardNavScroller'/><span class='tabFlipboardNavNext'><div class='tabStoryRightArrow'/></span></div>"})()})();;
/*! BEGIN FileUploadModule */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqlfileuploadmodule');var b=function(){};b.__typeName='tab.ByteUtils';b.determineBestByteType=function(s){if(s<1024){return tab.Strings.UploadBytes}else if(s<1048576){return tab.Strings.UploadKB}else if(s<1073741824){return tab.Strings.UploadMB}else{return tab.Strings.UploadGB}};b.getBytesWithMagnitude=function(s,t){if(ss.referenceEquals(t,tab.Strings.UploadBytes)){return s}else if(ss.referenceEquals(t,tab.Strings.UploadKB)){return s/1024}else if(ss.referenceEquals(t,tab.Strings.UploadMB)){return s/1048576}else{return s/1073741824}};global.tab.ByteUtils=b;var c=function(s){this.$2=null;this.$6=0;this.$4=null;this.$7=0;this.$5=0;this.$3=null;this.$8='';this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=false;this.$1$5=0;this.$1$6=0;this.$2=s;this.$6=s.size;this.$4=s.name;this.set_uploadedSize(0);this.add_progressChanged(ss.mkdel(this,function(t){}))};c.__typeName='tab.DataFileUploader';c.new$1=function(s){return new c(s)};global.tab.DataFileUploader=c;var d=function(s){spiff.PureRenderComponent.call(this,s)};d.__typeName='tab.FatalErrorComponent';global.tab.FatalErrorComponent=d;var e=function(s){d.call(this,s)};e.__typeName='tab.FatalErrorFileExistsComponent';global.tab.FatalErrorFileExistsComponent=e;var f=function(){};f.__typeName='tab.FatalErrorType';global.tab.FatalErrorType=f;var g=function(){};g.__typeName='tab.FileTypeUtils';g.getFileExtensionsForConnectionType=function(s){switch(s){case'excel-direct':{return['.xls','.xlsx','.xlsm']}case'textscan':{return['.txt','.csv','.tab','.tsv']}default:{return[]}}};g.getFileTypeFromExtension=function(s){switch(s){case'.xls':case'.xlsx':case'.xlsm':{return tab.Strings.FileUploadFileTypeExcel}case'.txt':case'.csv':case'.tab':case'.tsv':{return tab.Strings.FileUploadFileTypeText}case'.mdb':case'.accdb':{return tab.Strings.FileUploadFileTypeAccess}case'.json':{return tab.Strings.FileUploadFileTypeJson}case'.kml':case'.shp':case'.mif':{return tab.Strings.FileUploadFileTypeSpatial}case'.sav':case'.sas7bdat':case'.rda':case'.rdata':{return tab.Strings.FileUploadFileTypeStatistical}default:{return tab.Strings.FileUploadFileTypeOther}}};g.getFileExtension=function(s){return g.getFileExtensionImpl(s)};g.getFileExtensionImpl=function(s){var t=s.lastIndexOf(String.fromCharCode(46));return s.substr(t,s.length-t).toLowerCase()};g.getAllFileTypes=function(s){var t='';var u=', ';s.forEach(function(v){t+=v+u});return ss.removeString(t,t.length-u.length)};g.isFileTypeSupported=function(s,t){var u=g.getFileExtension(s);if(ss.isNullOrEmptyString(t)){return _.contains(g.allSupportedFileExtensions,u)}else{return _.contains(g.getFileExtensionsForConnectionType(t),u)}};g.getConnectionClassToFileTypeName=function(s){switch(s){case'excel':case'excel-direct':{return tab.Strings.FileUploadFileTypeExcelFile}case'csv':case'textscan':{return tab.Strings.FileUploadFileTypeText.toLowerCase()}default:{return''}}};global.tab.FileTypeUtils=g;var h=function(){};h.__typeName='tab.FileUploadCommands';h.appendToFile=function(s,t){var u=$.Deferred();var v={type:'POST',url:tabBootstrap.BaseUrlFormatter.formatSessionMethod('fileUploadAppend',tsConfig.sessionid,tsConfig.vizql_root)+'/'+s,headers:ss.mkdict(['Accept','text/javascript']),dataType:'json',contentType:'application/octet-stream',processData:false,data:t,success:function(w,x,y){u.resolve()},error:function(w,x,y){var z=w;var A;var B=z['responseJSON'];if(!ss.isNullOrUndefined(B)&&ss.keyExists(B,'msg')){A=B['msg']}else{A=tab.Strings.FileUploadServerUnresponsive}u.reject(A)}};tab.SessionHeartbeat.onVizportalPinged();tab.XhrUtil.helper(v);return u.promise()};h.getMaxFileUploadSize=function(){var s=$.Deferred();var t={type:'GET',url:tabBootstrap.BaseUrlFormatter.formatSessionMethod('getMaxFileUploadSize',tsConfig.sessionid,tsConfig.vizql_root),headers:ss.mkdict(['Accept','text/javascript']),dataType:'json',data:{},success:function(u,v,w){var x=u;s.resolve(x.maxsize)},error:function(u,v,w){var x=u;var y;var z=x['responseJSON'];if(!ss.isNullOrUndefined(z)&&ss.keyExists(z,'msg')){y=z['msg']}else{y=tab.Strings.FileUploadServerUnresponsive}s.reject(y)}};tab.SessionHeartbeat.onVizportalPinged();tab.XhrUtil.helper(t);return s.promise()};h.createFileUpload=function(s){var t=$.Deferred();var u=ss.mkdict(['totalFileSize',s.toString()]);var v={type:'POST',url:tabBootstrap.BaseUrlFormatter.formatSessionMethod('fileUploadCreate',tsConfig.sessionid,tsConfig.vizql_root),headers:ss.mkdict(['Accept','text/javascript']),data:u,dataType:'json',success:function(w,x,y){var z=w;t.resolve(z.file.id)},error:function(w,x,y){var z=w;var A;var B=z['responseJSON'];if(!ss.isNullOrUndefined(B)&&ss.keyExists(B,'msg')){A=B['msg']}else{A=tab.Strings.FileUploadServerUnresponsive}t.reject(A)}};tab.SessionHeartbeat.onVizportalPinged();tab.XhrUtil.helper(v);return t.promise()};h.cancelFileUpload=function(s){var t={type:'POST',url:tabBootstrap.BaseUrlFormatter.formatSessionMethod('fileUploadCancel',tsConfig.sessionid,tsConfig.vizql_root)+'/'+s,headers:ss.mkdict(['Accept','text/javascript']),dataType:'json'};tab.SessionHeartbeat.onVizportalPinged();tab.XhrUtil.helper(t)};h.createDataSourceFromFileUpload=function(s,t,u,v){var w=new tab.CreateDataSourceFromFileUploadCmd;w.c['fileIds']=s;w.c['dsClasses']=t;w.c['fileNames']=u;var x=w;if(!ss.isNullOrEmptyString(v)){x.c['datasource']=v}return x.invoke()};h.replaceFileConnectionFromFileUpload=function(s,t,u,v,w){var x=new tab.ReplaceFileConnectionFromFileUploadCmd;x.c['fileIds']=s;x.c['dsClass']=t;x.c['bool']=!w;x.c['fileNames']=u;x.c['connectionName']=v;var y=x;return y.invoke()};h.getFileConnectionFileList=function(s,t){if(ss.isNullOrEmptyString(t)||t!=='textscan'){var u=$.Deferred();var v={};v['fileNames']=[];u.resolve(new tab.GetFileConnectionFileListCmd$Response(v));return u.promise()}var w=new tab.GetFileConnectionFileListCmd;w.c['connectionName']=s;var x=w;return x.invoke()};h.copyTempFileToSessionSpecificStorage=function(s,t){var u=new tab.CopyTempFileToSessionSpecificStorageCmd;u.c['fileId']=t;u.c['fileName']=s;var v=u;return v.invoke()};global.tab.FileUploadCommands=h;var i=function(){};i.__typeName='tab.FileUploadInfo';i.createInstance=function(){return i.$ctor()};i.$ctor=function(){var s={};s.fileSize=0;s.name=null;s.progress=0;return s};i.isInstanceOfType=function(){return true};global.tab.FileUploadInfo=i;var j=function(){};j.__typeName='tab.FileUploadModuleFactory';global.tab.FileUploadModuleFactory=j;var k=function(s){spiff.PureRenderComponent.call(this,s)};k.__typeName='tab.ProgressBarComponent';global.tab.ProgressBarComponent=k;var l=function(s){spiff.PureRenderComponent.call(this,s)};l.__typeName='tab.UploadDataFileErrorInfosComponent';global.tab.UploadDataFileErrorInfosComponent=l;var m=function(s){var t=function(u){spiff.PureRenderComponent.call(this,u)};ss.registerGenericClassInstance(t,m,[s],{render:function(){if(this.props.done&&!this.props.hasProcessingError){window.setTimeout(ss.mkdel(this,this.$0),1000)}return spiff.DOMElements.div({className:'tab-uploadDialog-fileUploadUI',key:this.props.key},spiff.DOMElements.div({className:'tab-uploadDialog-progressContainer'},this.renderTitle(),this.renderCurrentFile(),this.renderFileDescription(),this.renderProgressBar(),this.renderSpinner(),spiff.DOMElements.div({className:'tab-uploadDialog-expandosArea'},this.renderMoreButton()),(this.props.hasProcessingError?React.createElement(SharedWidgets.ButtonWidget,this.createCloseButtonProps()):this.renderMoreArea())),spiff.DOMElements.div({className:'tab-uploadDialog-fatalError-buttonContainer'},this.renderIgnoreAndContinue(),(this.props.hasProcessingError?this.renderMoreArea():React.createElement(SharedWidgets.ButtonWidget,this.createCloseButtonProps())),this.renderRetry()))},renderTitle:function(){return spiff.DOMElements.div({className:'tab-uploadDialog-title'},this.props.title)},renderMoreButton:function(){return null},renderRetry:function(){return null},renderMoreArea:function(){return null},renderIgnoreAndContinue:function(){return null},renderProgressBar:function(){return(!this.$1()?ss.mkdel(this,function(){return React.createElement(k,this.createProgressBarProps())})():null)},renderFileDescription:function(){return(!this.$1()?ss.mkdel(this,function(){return spiff.DOMElements.div({className:'tab-uploadDialog-fileDescription'},g.getAllFileTypes(this.props.fileTypeSet))})():null)},renderCurrentFile:function(){return((this.props.numberOfFiles===1)?ss.mkdel(this,function(){return spiff.DOMElements.div({className:'tab-uploadDialog-currentFileName'},this.props.fileName)})():null)},createProgressBarProps:function(){return{failed:false,byteType:this.props.byteType,totalProgressPercent:this.props.totalProgressPercent,totalSize:this.props.totalSize,uploadedSoFar:this.props.uploadedSoFar,doneUploadingAllFiles:this.props.done}},createCloseButtonProps:function(){var u=this.props.done;var v=this.$1();var w=(this.props.done?2:(v?1:3));var x=ss.mkdel(this,function(y){this.$0()});return{handleClick:x,buttonType:w,testId:'FileUploadExitButton',label:(u?tab.Strings.FileUploadButtonClose:tab.Strings.FileUploadButtonCancel),disabled:this.props.isProcessing,style:{marginRight:'12px',visibility:((u&&!this.props.hasProcessingError)?'hidden':'visible')}}},renderSpinner:function(){return(this.$1()?(function(){return spiff.DOMElements.div({style:{marginTop:'18px'}},React.createElement(SharedWidgets.ActivitySpinnerWidget,{testId:'fileupload-spinner'}))})():null)},$0:function(){if(!this.props.done){this.props.cancelUpload()}this.props.dismiss()},$1:function(){return this.props.isProcessing||this.props.numberOfFiles===0}},function(){return spiff.PureRenderComponent},function(){return[]});return t};m.__typeName='tab.UploadDataFileProgressComponent$1';ss.initGenericClass(m,a,1);global.tab.UploadDataFileProgressComponent$1=m;var n=function(s){React.Component.call(this,s)};n.__typeName='tab.UploadDataFileProgressDialogComponent';global.tab.UploadDataFileProgressDialogComponent=n;var o=function(s){ss.makeGenericType(m,[Object]).call(this,s)};o.__typeName='tab.UploadDataFileProgressErrorComponent';global.tab.UploadDataFileProgressErrorComponent=o;var p=function(){};p.__typeName='tab.UploadDataFileProgressErrorConstants';global.tab.UploadDataFileProgressErrorConstants=p;var q=function(s){React.Component.call(this,s);this.state={fatalErrorType:0,filesToIgnore:[],recentlyIgnoredFiles:[],uploadErrorMsg:{}}};q.__typeName='tab.UploadFileComponent';global.tab.UploadFileComponent=q;var r=function(s){React.Component.call(this,s);this.state={currentActionMessage:null,done:false,processing:false}};r.__typeName='tab.UploadFileContainer';global.tab.UploadFileContainer=r;ss.initClass(b,a,{});ss.initClass(c,a,{add_progressChanged:function(s){this.$1$1=ss.delegateCombine(this.$1$1,s)},remove_progressChanged:function(s){this.$1$1=ss.delegateRemove(this.$1$1,s)},add_uploadFinished:function(s){this.$1$2=ss.delegateCombine(this.$1$2,s)},remove_uploadFinished:function(s){this.$1$2=ss.delegateRemove(this.$1$2,s)},add_errorDetected:function(s){this.$1$3=ss.delegateCombine(this.$1$3,s)},remove_errorDetected:function(s){this.$1$3=ss.delegateRemove(this.$1$3,s)},get_canceled:function(){return this.$1$4},set_canceled:function(s){this.$1$4=s},get_file:function(){return this.$2},get_size:function(){return this.$6},get_name:function(){return this.$4},get_uploadedSize:function(){return this.$1$5},set_uploadedSize:function(s){this.$1$5=s},get_elapsedTime:function(){return this.$1$6},set_elapsedTime:function(s){this.$1$6=s},get_progress:function(){return this.$5},set_progress:function(s){if(this.$5!==s){this.$5=s;if(!ss.staticEquals(this.$1$1,null)){this.$1$1(this.$5)}}},get_isComplete:function(){return this.get_progress()===100},cancelUpload:function(){this.set_canceled(true);if(this.get_isComplete()){h.cancelFileUpload(this.$8)}},createUpload:function(){var s=h.createFileUpload(this.$6);s.then(ss.mkdel(this,function(t){this.upload(t)}),ss.mkdel(this,function(t){this.$0(t)}))},upload:function(s){this.$3=new FileReader;this.$8=s;var t=tab.DateUtil.get_nowAsTime();this.$3.onloadend=ss.mkdel(this,function(u){var v=h.appendToFile(s,new Uint8Array(this.$3.result));v.then(ss.mkdel(this,function(w){if(this.get_canceled()){h.cancelFileUpload(s);return}this.set_uploadedSize(this.$7);if(this.$7<this.$6){this.set_progress(Math.floor(this.$7/this.$6*100));this.$1()}else{this.set_progress(100);if(!ss.staticEquals(this.$1$2,null)){this.set_elapsedTime(tab.DateUtil.get_nowAsTime()-t);this.$1$2(s)}}}),ss.mkdel(this,function(w){this.$0(w)}))});this.$1()},$1:function(){this.$7=Math.min(this.get_uploadedSize()+2097152,this.$6);var s=this.get_file().slice(this.get_uploadedSize(),this.$7);this.$3.readAsArrayBuffer(s)},$0:function(s){this.cancelUpload();this.$1$3(s)}});ss.initClass(d,a,{get_getTitle:function(){return tab.Strings.FileUploadFatalErrorTitle},render:function(){return spiff.DOMElements.div({className:'tab-uploadDialog-fatalError'},spiff.DOMElements.div({className:'tab-uploadDialog-fatalError-title'},this.get_getTitle()),spiff.DOMElements.div({className:'tab-uploadDialog-fatalError-subtitle'},this.$0()),this.$1(),spiff.DOMElements.div({className:'tab-uploadDialog-fatalError-buttonContainer'},this.createCancelButton(),this.createAddButton(),this.createSkipButton()))},$0:function(){switch(this.props.fatalErrorType){case 0:{break}case 1:{return tab.Strings.FileUploadFatalErrorUnsupportedFileTypeSubtitle}case 2:{var s=_.find(this.props.recentlyIgnoredFiles,function(z){return g.isFileTypeSupported(z,'')});var t=g.getFileTypeFromExtension(g.getFileExtension(s));if(ss.referenceEquals(t,tab.Strings.FileUploadFileTypeExcel)){t=tab.Strings.FileUploadFileTypeExcelFile}var u=g.getConnectionClassToFileTypeName(this.props.connectionClass);var v=(this.$2(u)?2:0);v+=(this.$2(t)?1:0);switch(v){case 0:{return tab.Strings.FileUploadFatalErrorUnsupportedFileTypeByConnectionSubtitle_a_a(u,t)}case 1:{return tab.Strings.FileUploadFatalErrorUnsupportedFileTypeByConnectionSubtitle_a_an(u,t)}case 2:{return tab.Strings.FileUploadFatalErrorUnsupportedFileTypeByConnectionSubtitle_an_a(u,t)}default:{return tab.Strings.FileUploadFatalErrorUnsupportedFileTypeByConnectionSubtitle_an_an(u,t)}}}case 3:{var w=b.determineBestByteType(this.props.maxFileSize);var x=b.getBytesWithMagnitude(this.props.maxFileSize,w);var y=ss.formatString('{0:N1} {1}',x,w);return tab.Strings.FileUploadFatalErrorFileIsTooBigSubtitle(y)}case 4:{return tab.Strings.FileUploadFatalErrorFileIsEmptySubtitle}case 5:{return tab.Strings.FileUploadFatalErrorFileExists}case 6:{return tab.Strings.DragAndDropError_Multi}case 7:{return tab.Strings.FileUploadAccessError}default:{break}}return null},$1:function(){if(this.props.fatalErrorType===2||this.props.fatalErrorType===6||this.props.fatalErrorType===7){return null}var s=spiff.DOMElements.div({},_.map(this.props.recentlyIgnoredFiles,function(t,u){return spiff.DOMElements.div({key:u},t)}));return spiff.DOMElements.div({className:'tab-uploadDialog-fatalError-recentlyIgnoredContainer'},s)},createCancelButtonProps:function(){return{handleClick:ss.mkdel(this,function(s){this.props.dismiss()}),buttonType:3,testId:'FatalErrorCancelButton',label:tab.Strings.FileUploadButtonCancel}},createSkipButtonProps:function(){return{handleClick:ss.mkdel(this,function(s){this.props.skip()}),buttonType:2,testId:'FatalErrorSkipButton',style:{left:'12px'},label:((this.props.recentlyIgnoredFiles.length===1)?tab.Strings.FileUploadButtonSkipSingular:tab.Strings.FileUploadButtonSkipPlural)}},$2:function(s){return s.length>0&&'aeiouAEIOU'.indexOf(String.fromCharCode(s.charCodeAt(0)))!==-1},createCancelButton:function(){return React.createElement(SharedWidgets.ButtonWidget,this.createCancelButtonProps())},createAddButton:function(){return null},createSkipButton:function(){return((this.props.eligibleFileCount>0)?ss.mkdel(this,function(){return React.createElement(SharedWidgets.ButtonWidget,this.createSkipButtonProps())})():null)}},spiff.PureRenderComponent);ss.initClass(e,a,{get_getTitle:function(){return tab.Strings.FileUploadFatalErrorSameFileTitle},createAddButtonProps:function(){return{handleClick:ss.mkdel(this,function(s){this.props.add()}),buttonType:2,testId:'FatalErrorAddButton',label:tab.Strings.FileUploadButtonAdd}},createCancelButtonProps$1:function(){return{handleClick:ss.mkdel(this,function(s){this.props.dismiss()}),buttonType:3,testId:'FatalErrorCancelButton',style:{right:'12px'},label:tab.Strings.FileUploadButtonCancel}},createCancelButton:function(){return React.createElement(SharedWidgets.ButtonWidget,this.createCancelButtonProps$1())},createAddButton:function(){return React.createElement(SharedWidgets.ButtonWidget,this.createAddButtonProps())},createSkipButton:function(){var s=this.createSkipButtonProps();s.label=tab.Strings.FileUploadButtonReplaceUpdate;return React.createElement(SharedWidgets.ButtonWidget,s)}},d);ss.initEnum(f,a,{none:0,unsupportedType:1,fileTypeMismatch:2,fileTooBig:3,fileIsEmpty:4,fileAlreadyExists:5,multiFileNotExpected:6,fileIsLocked:7});ss.initClass(g,a,{});ss.initClass(h,a,{});ss.initClass(i,a,{});ss.initClass(j,a,{uploadFiles:function(s){var t=$.Deferred();var u=document.createElement('div');var v=0;h.getMaxFileUploadSize().done(function(w){v=w}).always(ss.mkdel(this,function(){var w={dismiss:ss.mkdel(this,function(){this.$0(u)}),files:s,maxFileSize:v,onFileUploadFinished:ss.mkdel(this,function(x,y,z){this.$0(u);t.resolve(x)}),onAllFileUploadsFinished:function(x){}};ReactDOM.render(React.createElement(r,w),u)}));return t.promise()},copyTempFileToSessionStorage:function(s,t){var u=$.Deferred();h.copyTempFileToSessionSpecificStorage(s.name,t).done(function(v){u.resolve(v.$$c['sessionStorageId'])});return u.promise()},$0:function(s){var t=s;s=null;if(!ss.isNullOrUndefined(t)){_.defer(function(){ReactDOM.unmountComponentAtNode(t)})}}},null,[tab.IFileUploadModule]);ss.initClass(k,a,{render:function(){var s=(this.props.doneUploadingAllFiles?' done':'');s=(this.props.failed?' error':s);return spiff.DOMElements.div({},spiff.DOMElements.progress({className:'tab-uploadDialog-progressBar'+s,max:100,value:((this.props.doneUploadingAllFiles||this.props.failed)?'100':this.props.totalProgressPercent.toString())}),spiff.DOMElements.div({className:'tab-uploadDialog-fraction'},ss.formatString(tab.Strings.FileUploadProgressIndicator(this.props.uploadedSoFar,this.props.totalSize,this.props.byteType))))}},spiff.PureRenderComponent);ss.initClass(l,a,{render:function(){return spiff.DOMElements.div({className:'tab-uploadDialog-errorInfosArea'},((ss.isValue(this.props.filesThatSucceeded)&&this.props.filesThatSucceeded.length>0)?ss.mkdel(this,function(){return spiff.DOMElements.div({className:'tab-uploadDialog-errorInfosCompletedSection'},spiff.DOMElements.div({className:'tab-uploadDialog-errorInfosCompletedHeader'},tab.Strings.FileUploadErrorInfosCompletedHeader),spiff.DOMElements.div({className:'tab-uploadDialog-errorInfosCompletedContent'},_.map(this.props.filesThatSucceeded,function(s,t){return spiff.DOMElements.div({key:t},s)})))})():null),spiff.DOMElements.div({className:'tab-uploadDialog-errorInfosFailedSection'},spiff.DOMElements.div({className:'tab-uploadDialog-errorInfosFailedHeader'},tab.Strings.FileUploadErrorInfosFailedHeader),spiff.DOMElements.div({className:'tab-uploadDialog-errorInfosFailedContent'},_.map(this.props.filesThatFailed,ss.mkdel(this,function(s,t){return spiff.DOMElements.div({key:t,title:(ss.isValue(this.props.reasons)?this.props.reasons[t]:s)},s)})))))}},spiff.PureRenderComponent);ss.initClass(n,a,{render:function(){return React.createElement(SharedWidgets.DialogWidget,{children:this.props.children,isModal:true,isGlassTransparent:false,onCloseRequest:this.props.dismiss,handleGlassClick:function(){},positioningBehavior:0,shouldAdjustPositionOnWindowResize:true,type:2,testId:'tabUploadProgressDialog',zIndex:1000})}},React.Component);ss.initClass(o,a,{renderTitle:function(){var s=((this.props.numberOfFiles>1)?ss.mkdel(this,function(){return spiff.DOMElements.div({className:'tab-uploadDialog-errorTitleComplete'},tab.Strings.FileUploadErrorTitleMultiComplete(this.props.successFilesCount))})():null);var t=((this.props.numberOfFiles>1)?ss.mkdel(this,function(){return spiff.DOMElements.div({className:'tab-uploadDialog-errorTitleFailed'},tab.Strings.FileUploadErrorTitleMultiFailed(this.props.failedFilesCount))})():null);return spiff.DOMElements.div({},s,t,((this.props.numberOfFiles===1)?(function(){return spiff.DOMElements.div({className:'tab-uploadDialog-errorTitle'},tab.Strings.FileUploadErrorTitle)})():null))},renderMoreButton:function(){return((this.props.numberOfFiles>1)?ss.mkdel(this,function(){return React.createElement(SharedWidgets.ExpandoWidget,{isExpanded:this.props.showingMore,onExpand:this.props.toggleShowMore,onCollapse:this.props.toggleShowMore,direction:1,testId:'MoreButtonExpando',label:(this.props.showingMore?tab.Strings.HideDetailsLabel:tab.Strings.ShowDetailsLabel)})})():null)},renderRetry:function(){return React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(s){this.props.retry()}),buttonType:2,testId:'FileUploadRetryButton',label:tab.Strings.FileUploadButtonRetry,style:{float:'right'}})},createProgressBarProps:function(){var s=ss.makeGenericType(m,[Object]).prototype.createProgressBarProps.call(this);s.failed=true;return s},renderIgnoreAndContinue:function(){return((this.props.successFilesCount>0&&this.props.numberOfFiles!==1)?ss.mkdel(this,function(){return React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(s){this.props.ignoreAndContinue()}),buttonType:3,testId:'FileUploadIgnoreAndContinueButton',label:tab.Strings.FileUploadFailureIgnoreAndContinueLabel,style:{marginRight:'12px'}})})():null)},renderMoreArea:function(){if(this.props.numberOfFiles===1){return spiff.DOMElements.div({className:'tab-uploadDialog-errorMessage'},this.props.errorMessage)}else{return(this.props.showingMore?ss.mkdel(this,function(){return spiff.DOMElements.div({className:'tab-uploadDialog-errorMoreAreaContainer'},React.createElement(l,this.props.errorInfosProps))})():null)}}},ss.makeGenericType(m,[Object]));ss.initClass(p,a,{});ss.initClass(q,a,{componentDidMount:function(){window.setTimeout(ss.mkdel(this,function(){this.$9(this.props.files)}),100)},render:function(){if(this.state.fatalErrorType!==0){var s=this.$1();if(this.state.fatalErrorType===5){return React.createElement(e,s)}else{return React.createElement(d,s)}}if(ss.isNullOrUndefined(this.state.fileUploaders)){return React.createElement(ss.makeGenericType(m,[Object]),this.createProgressProps())}var t=this.$7();if(t){var u=this.createErrorProps();if(this.$5()&&!ss.staticEquals(this.props.createCustomProcessingErrorComponent,null)){return this.props.createCustomProcessingErrorComponent(u)}else{return React.createElement(o,u)}}else{return React.createElement(ss.makeGenericType(m,[Object]),this.createProgressProps())}},createProgressProps:function(){var s=_.reduce(this.state.fileUploaders,function(G,H){return G+H.get_size()},0);var t=_.reduce(this.state.fileUploaders,function(G,H){return G+H.get_uploadedSize()},0);var u=new Set;_.each(this.state.fileUploaders,function(G){u.add(g.getFileTypeFromExtension(g.getFileExtension(G.get_name())))});var v=t/s*100;var w=b.determineBestByteType(s);var x=(ss.isValue(this.state.fileUploaders)?this.state.fileUploaders.length:0);var y=((x>0)?this.state.fileUploaders[0].get_name():'');var z=b.getBytesWithMagnitude(s,w);var A=ss.formatString('{0:N1}',z);var B=b.getBytesWithMagnitude(t,w);var C=ss.formatString('{0:N1}',B);var D=(ss.isValue(this.props.currentActionMessage)?this.props.currentActionMessage:((x>0)?tab.Strings.FileUploadTitle(x):tab.Strings.FileUploadPreProcessingTitle));var E=y;if(!ss.isNullOrEmptyString(E)){E=ss.replaceAllString(E,':','_')}var F=this.$5();return{byteType:w,cancelUpload:ss.mkdel(this,this.$0),dismiss:this.props.dismiss,done:this.props.done,fileName:E,fileTypeSet:u,hasProcessingError:F,key:x,numberOfFiles:x,isProcessing:this.props.isProcessing,title:D,totalProgressPercent:ss.Int32.trunc(v),totalSize:A,uploadedSoFar:C}},createErrorProps:function(){var s=[];_.each(this.state.fileUploaders,function(x){s.push(x.get_name())});var t=_.difference(s,this.state.filesToIgnore);var u=this.$5();if(u&&!(typeof(this.props.processingTelemetryType)==='undefined')){t=this.props.uploadOrProcessingFailedFiles;_.each(t,ss.mkdel(this,function(x){tab.FileUploadTelemetry.getInstance().logFileUploadFailureEvent(q.$0[x],this.props.processingTelemetryType)}))}var v=_.map(t,ss.mkdel(this,function(x,y){if(u){if(ss.isValue(this.props.uploadOrProcessingFailureReasons)){return this.props.uploadOrProcessingFailureReasons[y]}return ss.coalesce(this.props.defaultProcessingErrorReason,'')}else{if(ss.keyExists(this.state.uploadErrorMsg,x)){return this.state.uploadErrorMsg[x]}return tab.Strings.FileUploadUploadErrorReason}}));var w={filesThatFailed:t,filesThatSucceeded:_.difference(s,t),reasons:v};return _.extend({successFilesCount:s.length-t.length,failedFilesCount:t.length,ignoreAndContinue:ss.mkdel(this,function(){var x=((typeof(this.state.overwrite)==='undefined')?true:this.state.overwrite);this.props.onAllFileUploadsFinished(x);this.setState({errorMessage:null,fileUploaders:_.filter(this.state.fileUploaders,function(y){return!ss.contains(t,y.get_name())}),showingMore:false})}),toggleShowMore:ss.mkdel(this,function(){this.setState({showingMore:!this.state.showingMore})}),retry:ss.mkdel(this,function(){tab.FileUploadTelemetry.getInstance().logFileUploadRetryEvent('retry');var x=_.filter(this.props.files,ss.mkdel(this,function(y){return!ss.contains(this.state.filesToIgnore,y.name)}));this.$9(x);this.setState({errorMessage:null,showingMore:false})}),errorMessage:(u?this.props.processingErrorTitle:this.state.errorMessage),errorInfosProps:w,showingMore:this.state.showingMore},this.createProgressProps())},$1:function(){var s=_.filter(this.props.files,ss.mkdel(this,function(t){return!ss.contains(this.state.filesToIgnore,t.name)}));return{dismiss:ss.mkdel(this,function(){var t=this.state.fatalErrorType===5;if(t){tab.FileUploadTelemetry.getInstance().logFileUploadReplaceEvent('cancel')}else{tab.FileUploadTelemetry.getInstance().logFileUploadRetryEvent('cancel')}this.props.dismiss()}),eligibleFileCount:s.length,fatalErrorType:this.state.fatalErrorType,key:this.state.recentlyIgnoredFiles.length,maxFileSize:this.props.maxFileSize,recentlyIgnoredFiles:this.state.recentlyIgnoredFiles,skip:ss.mkdel(this,function(){var t=this.state.fatalErrorType===5;this.setState({fatalErrorType:0,recentlyIgnoredFiles:[],overwrite:(t?true:this.state.overwrite)},ss.mkdel(this,function(){if(t){tab.FileUploadTelemetry.getInstance().logFileUploadReplaceEvent('replace')}else{tab.FileUploadTelemetry.getInstance().logFileUploadRetryEvent('skip')}this.$9(s);return null}))}),add:ss.mkdel(this,function(){this.setState({fatalErrorType:0,recentlyIgnoredFiles:[],overwrite:false},ss.mkdel(this,function(){tab.FileUploadTelemetry.getInstance().logFileUploadReplaceEvent('add');this.$9(s);return null}))})}},$4:function(){if(this.state.fatalErrorType===2&&!ss.staticEquals(this.props.getMismatchErrorSubtitle,null)){return this.props.getMismatchErrorSubtitle(this.state.recentlyIgnoredFiles)}return''},$0:function(){_.each(this.state.fileUploaders,function(s){tab.FileUploadTelemetry.getInstance().logFileUploadFailureEvent(q.$0[s.get_name()],'upload_canceled');s.cancelUpload()})},$a:function(){return _.reduce(this.state.fileUploaders,function(s,t){return s&&t.get_isComplete()},true)},$7:function(){return ss.isValue(this.state.errorMessage)&&_.reduce(this.state.fileUploaders,function(s,t){return s&&(t.get_isComplete()||t.get_canceled())},true)||this.$5()},$9:function(s){if(ss.isNullOrUndefined(s)){return}if(this.state.filesToIgnore.length===0&&this.state.recentlyIgnoredFiles.length===0&&ss.isNullOrUndefined(this.state.fileUploaders)){ss.clearKeys(q.$0);_.each(s,function(A,B){tab.FileUploadTelemetry.getInstance().logFileUploadStartEvent(B,g.getFileExtension(A.name),A.size);q.$0[A.name]=B})}var t=_.filter(this.state.fileUploaders,function(A){return!A.get_canceled()&&A.get_isComplete()});var u=this.$3();var v=u.item1;var w=u.item2;if(ss.isNullOrUndefined(w)&&ss.isValue(v)){for(var x=0;x<v.length;x++){var y=v[x];var z={$:c.new$1(y)};z.$.add_uploadFinished(ss.mkdel({uploader1:z,$this:this},function(A){var B=this.uploader1.$.get_name();tab.FileUploadTelemetry.getInstance().logFileUploadSuccessEvent(q.$0[B],this.uploader1.$.get_elapsedTime());var C='textscan';if(ss.referenceEquals(g.getFileTypeFromExtension(g.getFileExtension(B)),tab.Strings.FileUploadFileTypeExcel)){C='excel-direct'}this.$this.props.onFileUploadFinished(A,C,B);if(this.$this.$a()){var D=((typeof(this.$this.state.overwrite)==='undefined')?true:this.$this.state.overwrite);this.$this.props.onAllFileUploadsFinished(D)}}));t.push(z.$);z.$.add_progressChanged(ss.mkdel({uploader1:z,$this:this},function(){if(this.uploader1.$.get_isComplete()){var A=ss.arrayClone(this.$this.state.filesToIgnore);A.push(this.uploader1.$.get_name());this.$this.setState({filesToIgnore:A})}else{this.$this.forceUpdate()}}));z.$.add_errorDetected(ss.mkdel({uploader1:z,$this:this},function(A){tab.FileUploadTelemetry.getInstance().logFileUploadFailureEvent(q.$0[this.uploader1.$.get_name()],'upload_error');var B=this.$this.state.uploadErrorMsg;B[this.uploader1.$.get_name()]=A;this.$this.setState({errorMessage:A,uploadErrorMsg:B})}));z.$.createUpload()}this.setState({fileUploaders:t,showingMore:false})}},$3:function(){var s=this.$2();this.$8(s.ineligibleFiles,s.fatalErrorType);return{item1:s.filesToUpload,item2:s.ineligibleFiles}},$2:function(){if(this.props.files.length===0){var s={fatalErrorType:7,filesToUpload:null,ineligibleFiles:null};tab.FileUploadTelemetry.getInstance().logFileUploadFailureEvent(0,'locked');return s}if(this.props.files.length>1&&!this.props.isMultiFileAllowed){var t={fatalErrorType:6,filesToUpload:null,ineligibleFiles:this.props.files};tab.FileUploadTelemetry.getInstance().logFileUploadFailureEvent(0,'multi_file_rejected');return t}var u=_.filter(this.props.files,ss.mkdel(this,function(C){return!ss.contains(this.state.filesToIgnore,C.name)}));var v=((this.props.maxFileSize===0)?[]:_.filter(u,ss.mkdel(this,function(C){return C.size>this.props.maxFileSize})));var w=_.filter(u,function(C){return C.size===0});var x=((typeof(this.state.overwrite)==='undefined'&&!(typeof(this.props.existingFilesToNotOverwrite)==='undefined'))?_.filter(u,ss.mkdel(this,function(C){return _.any(this.props.existingFilesToNotOverwrite,function(D){return ss.compareStrings(D,C.name,true)===0})})):null);if(ss.isValue(x)&&x.length>0){var y={fatalErrorType:5,filesToUpload:null,ineligibleFiles:x};this.$6(y.ineligibleFiles,'exists');return y}if(!ss.staticEquals(this.props.customFileFilter,null)){var z=this.props.customFileFilter(u);if(z.fatalErrorType!==0){if(z.fatalErrorType===2){this.$6(z.ineligibleFiles,'type_mismatch')}if(z.fatalErrorType===1){this.$6(z.ineligibleFiles,'unsupported')}return z}}if(v.length>0){var A={fatalErrorType:3,filesToUpload:_.difference(u,v),ineligibleFiles:v};this.$6(A.ineligibleFiles,'too_big');return A}if(w.length>0){var B={fatalErrorType:4,filesToUpload:_.difference(u,w),ineligibleFiles:w};this.$6(B.ineligibleFiles,'empty');return B}return{fatalErrorType:0,filesToUpload:u,ineligibleFiles:null}},$8:function(s,t){var u=ss.arrayClone(this.state.filesToIgnore);var v=[];_.each(s,function(w){if(t!==5){u.push(w.name)}v.push(w.name)});this.setState({fatalErrorType:t,filesToIgnore:u,recentlyIgnoredFiles:v})},$5:function(){return ss.isValue(this.props.uploadOrProcessingFailedFiles)&&this.props.uploadOrProcessingFailedFiles.length>0},$6:function(s,t){_.each(s,function(u){tab.FileUploadTelemetry.getInstance().logFileUploadFailureEvent(q.$0[u.name],t)})}},React.Component);ss.initClass(r,a,{render:function(){var s={currentActionMessage:this.state.currentActionMessage,dismiss:this.props.dismiss,done:this.state.done,uploadOrProcessingFailedFiles:this.state.failedFiles,uploadOrProcessingFailureReasons:this.state.failureReasons,files:this.props.files,key:this.props.files.length,maxFileSize:this.props.maxFileSize,onFileUploadFinished:this.props.onFileUploadFinished,onAllFileUploadsFinished:this.props.onAllFileUploadsFinished,isProcessing:this.state.processing};return React.createElement(n,{dismiss:this.props.dismiss},[React.createElement(q,s)])}},React.Component);(function(){b.$1=1024;b.$2=1048576;b.$0=1073741824})();(function(){g.allSupportedFileExtensions=null;var s=[];s.push.apply(s,g.getFileExtensionsForConnectionType('excel-direct'));s.push.apply(s,g.getFileExtensionsForConnectionType('textscan'));g.allSupportedFileExtensions=s})();(function(){n.$0='tabUploadProgressDialog'})();(function(){q.$0={}})()})();;
/*! BEGIN UI */
(function(){'dont use strict';var a={};global.tab=global.tab||{};global.tableau=global.tableau||{};ss.initAssembly(a,'vqlui');global.onhelp=function(){return false};var b=function(){};b.__typeName='FontFace$FontFaceLoadStatus';global.FontFace$FontFaceLoadStatus=b;var c=function(){};c.__typeName='FontFaceSet$FontFaceSetLoadStatus';global.FontFaceSet$FontFaceSetLoadStatus=c;var d=function(){};d.__typeName='tab.$0';d.$0=function(e,fE){var fF={};fF['api.commandResult']=e;fF['api.commandData']=fE;var fG=JSON.stringify(fF);return fG};var f=function(){};f.__typeName='tab.$1';f.$8=function(e){var fE=e;var fF=[];if(ss.isValue(fE)){for(var fG=0;fG<fE.length;fG++){var fH=fE[fG];var fI=f.$1(fH);if(ss.isValue(fI)&&fI.isValidPresModel){fF.push(fI)}}}var fJ=new Object;fJ.parameters=Array.prototype.slice.call(fF);return fJ};f.$6=function(e){var fE=e;if(ss.isValue(fE.valid)&&!fE.valid){var fF=new Object;fF.isValidPresModel=false;return fF}else{var fG=e;if(ss.isValue(fG)){return f.$1(fG)}}return null};f.$0=function(e){switch(e){case'boolean':{return'boolean'}case'real':{return'float'}case'integer':case'tuple':{return'integer'}case'date':{return'date'}case'datetime':{return'datetime'}case'cstring':default:{return'string'}}};f.$1=function(e){if(!ss.isValue(e.parameterName)||!ss.isValue(e.fieldCaption)){return null}var fE=e.dataType;var fF=[];for(var fG=0;fG<e.valuesAliases.length;fG++){var fH=e.valuesAliases[fG];var fI=e.formattedValues[fG];fF.push(f.$4(fE,fH,fI))}var fJ=new Object;fJ.isValidPresModel=true;fJ.parameterName=e.parameterName;fJ.name=e.fieldCaption;fJ.currentValue=f.$4(fE,e.valueAlias,e.formattedValue);fJ.dataType=f.$0(fE);fJ.allowableValuesType=t.convertParameterDomainType(e.parameterDomainType);fJ.allowableValues=Array.prototype.slice.call(fF);fJ.stepSize=f.$7(fE,e.valueInc);fJ.minValue=f.$5(fE,e.valueMin,e.formattedMin,null);fJ.maxValue=f.$5(fE,e.valueMax,e.formattedMax,null);if(fE==='date'||fE==='datetime'){fJ.dateStepPeriod=t.convertPeriodType(e.datePeriodType)}return fJ};f.$5=function(e,fE,fF,fG){var fH=new Object;fH.type=t.convertDataType(e);fH.value=n.serializeDataValue(fE,e);if(!tab.MiscUtil.isNullOrEmpty$3(fG)){fH.aliasedValue=fG}if(!tab.MiscUtil.isNullOrEmpty$3(fF)){fH.formattedValue=fF}return fH};f.$4=function(e,fE,fF){return f.$5(e,f.$3(fE),fF,f.$2(fE))};f.$7=function(e,fE){if(ss.isValue(fE)){if(e==='integer'||e==='date'||e==='datetime'){return parseInt(fE)}if(e==='real'){return parseFloat(fE)}}return null};f.$3=function(e){return e[0]};f.$2=function(e){if(e.length<2){return null}if(ss.isNullOrUndefined(e[1])||e[1].length===0){return null}return e[1]};var g=function(){};g.__typeName='tab.$2';g.$0=function(){if(tsConfig.isUnitTestRun){return}k.$2();g.$1();g.$2()};g.$1=function(){$(E.startup)};g.$2=function(){tab.CommandController.add_switchedViz(function(){E.startup()})};var h=function(e){this.$0=null;this.$3=null;this.$2=null;this.$1=null;this.$3=e;this.$0=this.$3.css('font-family').split(',')[0];this.$2=[];this.$1=[]};h.__typeName='tab.$3';var i=function(e,fE,fF,fG,fH){this.$5=0;this.$6=0;this.$4=0;this.$2=false;this.$3=null;this.$5=e;this.$6=fE;this.$4=fF;this.$2=fG;this.$3=fH};i.__typeName='tab.$4';var j=function(e,fE,fF,fG,fH,fI,fJ){this.$1=null;this.$5=0;this.$2=null;this.$6=null;this.$3=false;this.$4=false;this.$7=null;this.$1=e;this.$5=fE;this.$2=fF;this.$6=fG;this.$3=fH;this.$4=fI;this.$7=fJ.clone()};j.__typeName='tab.$5';var k=function(){};k.__typeName='tab.$6';k.$2=function(){if(tsConfig.embedded){var e=document.getElementById('staticImage');if(ss.isNullOrUndefined(e)){return}k.$0(e);k.$1(e);k.$3(e)}};k.$3=function(e){if(e.style.width!=='auto'){return}var fE=k.$4(e,0);if(ss.isNullOrUndefined(fE)){return}e.style.width=ss.unbox(fE)+'px'};k.$1=function(e){if(e.style.height!=='auto'){return}var fE=k.$4(e,1);if(ss.isNullOrUndefined(fE)){return}e.style.height=ss.unbox(fE)+'px'};k.$0=function(e){var fE=e.parentElement;var fF={h:fE.offsetHeight,w:fE.offsetWidth};var fG=tabBootstrap.ViewerBootstrap.get_instance().get_compositeSize();if(fG.maxWidth===0&&fG.maxHeight===0){return}if(fF.w<fG.minWidth){fF.w=fG.minWidth}else if(fG.maxWidth!==0&&fF.w>fG.maxWidth){fF.w=fG.maxWidth}if(fF.h<fG.minHeight){fF.h=fG.minHeight}else if(fG.maxHeight!==0&&fF.h>fG.maxHeight){fF.h=fG.maxHeight}e.style.height=fF.h-(tsConfig.showTabs?31:9)+'px';e.style.width=fF.w-8+'px'};k.$4=function(e,fE){if(ss.isNullOrUndefined(e.style.backgroundSize)){return null}var fF=e.style.backgroundSize.split(' ');if(fF.length<=1){return null}return parseInt(fF[fE],10)};var l=function(){this.$4=0;this.$5=0;this.$3=null;this.$1$1=null};l.__typeName='tab.$7';var m=function(e,fE){this.$1$1=null;this.$1$2=null;this.$1(e);this.$3(fE)};m.__typeName='tab.$8';var n=function(){};n.__typeName='tab._ApiSerializer';n.serializeClientInfo=function(e,fE){var fF=e.get_applicationPresModel().workbookPresModel.dashboardPresModel;var fG=e.get_toolbarCommands().$1();var fH=!ss.isNullOrEmptyString(fF.sheetLayoutInfo.downloadLink)||e.get_toolbarCommands().$2();var fI=tsConfig.current_sheet_name;var fJ=tsConfig.workbookName;var fK=z.getApiDashboardZonePresModels(fF.zones);var fL=n.serializePublishedSheets(e.get_applicationPresModel().workbookPresModel.sheetsInfo);var fM=n.serializeStory(fE);var fN=v.newClientInfo(fG,fH,fJ,fI,ss.coalesce(tsConfig.clientNumber,''),fL,fK,fM);return fN};n.serializeSheetInfo=function(e,fE){var fF;if(ss.isValue(e.isStory)&&e.isStory){fF='story'}else if(ss.isValue(e.isDashboard)&&e.isDashboard){fF='dashboard'}else{fF='worksheet'}var fG=v.newSheetInfo(e.sheet,fF,e.minWidth,e.minHeight,e.maxWidth,e.maxHeight,fE);return fG};n.serializePublishedSheets=function(e){var fE={};for(var fF=0;fF<e.length;fF++){var fG=e[fF];fE[fG.sheet]=fG}var fH=[];var fI=n.$0(tsConfig.repository_urls);for(var fJ=0;fJ<tsConfig.visible_sheets.length;fJ++){var fK=fE[tsConfig.visible_sheets[fJ]];if(ss.isValue(fK)){var fL=n.serializeSheetInfo(fK,fI[fJ]);fH.push(fL)}}return fH};n.serializeStory=function(e){var fE=e.get_flipboardNavigatorViewModel();if(ss.isNullOrUndefined(fE)){return null}var fF=fE.get_currentPointIndex();var fG=n.serializeStoryPoints(fE.get_captions(),e);var fH=v.newStory(fF,fG);return fH};n.serializeStoryPoints=function(e,fE){var fF=[];var fG=ss.getEnumerator(e);try{while(fG.moveNext()){var fH=fG.current();var fI=n.serializeStoryPoint(fH,fE);fF.push(fI)}}finally{fG.dispose()}return fF};n.serializeStoryPoint=function(e,fE){var fF=null;if(e.get_isCurrentPoint()&&fE.get_hasContainedSheet()){var fG=fE.get_containedSheetName();var fH=fE.get_containedSheetType();var fI=z.getApiDashboardZonePresModels(fE.get_containedDashboardZones());fF=v.newContainedSheetInfo(fG,fH,ss.unbox(fE.get_containedSheetZoneId()),fI)}var fJ=v.newStoryPoint(e.get_caption(),e.get_storyPointIndex(),e.get_storyPointId(),e.get_isCaptured(),fF);return fJ};n.serializeDataValue=function(e,fE){if(fE==='boolean'){if(_.isBoolean(e)){return e}return(ss.isValue(e)?(e.toString().toLowerCase()==='true'):false)}if(ss.isNullOrUndefined(e)){return null}switch(fE){case'boolean':{if(_.isBoolean(e)){return e}return(ss.isValue(e)?(e.toString().toLowerCase()==='true'):false)}case'date':case'datetime':{var fF=null;if(_.isDate(e)){fF=e}else if(_.isNumber(e)){if(isNaN(e)){fF=null}else{fF=new Date(tableau.types.JsDateFromOleDate(e))}}else{fF=tab.DateUtil.parsePresModelDate(e.toString())}if(ss.isNullOrUndefined(fF)||isNaN(fF)){return null}return fF.getTime()}case'integer':{if(_.isNumber(e)){return(isNaN(e)?null:e)}var fG=parseInt(e.toString(),10);return(isNaN(fG)?null:fG)}case'real':{if(_.isNumber(e)){return(isNaN(e)?null:e)}var fH=parseFloat(e.toString());return(isNaN(fH)?null:fH)}default:case'cstring':case'tuple':case'unknown':{return e.toString()}}};n.serializeCustomView=function(e,fE){return v.newCustomView(e.id,e.name,e.urlId,fE,e.startViewId,e.isPublic,n.serializeUser(e.owner))};n.serializeUser=function(e){return v.newUser(e.id,e.friendlyName,e.username)};n.convertToCustomizedView=function(e){var fE=new Object;fE.id=e.id;fE.isPublic=e.isPublic;fE.name=e.name;fE.owner=n.convertToUser(e.owner);fE.startViewId=e.startViewId;fE.urlId=e.urlId;return fE};n.convertToUser=function(e){var fE={friendlyName:e.friendlyName,id:e.id,username:e.username};return fE};n.$0=function(e){var fE=e.length;var fF=tab.VizUriModel.createForViewingSheets(e,false);var fG=new Array(fE);for(var fH=0;fH<fE;fH++){var fI=fF[fH];fG[fH]=fI.get_absoluteUri()}return fG};global.tab._ApiSerializer=n;var o=function(){this.action=null;ss.EventArgs.call(this)};o.__typeName='tab.ActionExecutedEventArgs';global.tab.ActionExecutedEventArgs=o;var p=function(e,fE){React.Component.call(this,e,fE);this.state={users:e.users,groups:e.groups}};p.__typeName='tab.AddSubscribersComponent';global.tab.AddSubscribersComponent=p;var q=function(){};q.__typeName='tab.AddSubscribersComponentConstants';global.tab.AddSubscribersComponentConstants=q;var r=function(){};r.__typeName='tab.AddSubscribersComponentProps';r.createInstance=function(){return r.$ctor()};r.$ctor=function(){var e={};e.userPillsComponentProps=null;e.users=null;e.addUser=null;e.removeUser=null;e.groups=null;e.addGroup=null;e.removeGroup=null;e.removeRecipientByIndex=null;e.isUsers=false;e.cancelSelection=null;e.confirmSelection=null;e.confirmUsersSelection=null;e.confirmGroupsSelection=null;return e};r.isInstanceOfType=function(){return true};global.tab.AddSubscribersComponentProps=r;var s=function(e,fE,fF){this.originalUsers=null;this.users=null;this.originalGroups=null;this.groups=null;this.isUsers=false;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;spiff.BaseViewModel.call(this);this.originalUsers=e;this.originalGroups=fE;this.users=ss.arrayClone(e);this.groups=ss.arrayClone(fE);this.isUsers=fF;var fG=r.$ctor();fG.users=this.users;fG.addUser=ss.mkdel(this,this.addUser);fG.removeUser=ss.mkdel(this,this.removeUser);fG.groups=this.groups;fG.addGroup=ss.mkdel(this,this.addGroup);fG.removeGroup=ss.mkdel(this,this.removeGroup);fG.removeRecipientByIndex=ss.mkdel(this,this.removeRecipientByIndex);fG.isUsers=this.isUsers;fG.cancelSelection=ss.mkdel(this,this.cancelSelection);fG.confirmSelection=ss.mkdel(this,this.confirmSelection);fG.confirmUsersSelection=ss.mkdel(this,function(fH){this.$2$3(fH)});fG.confirmGroupsSelection=ss.mkdel(this,function(fH){this.$2$4(fH)});this.set_props(fG)};s.__typeName='tab.AddSubscribersViewModel';global.tab.AddSubscribersViewModel=s;var t=function(){};t.__typeName='tab.ApiCrossDomainEnumConverter';t.convertDataType=function(e){switch(e){case'boolean':{return'bool'}case'date':case'datetime':{return'date'}case'integer':case'real':case'tuple':{return'number'}case'cstring':{return'string'}case'unknown':default:{return'string'}}};t.convertUnderlyingDataType=function(e){switch(e){case'boolean':{return'boolean'}case'date':{return'date'}case'datetime':{return'datetime'}case'integer':{return'integer'}case'real':case'tuple':{return'float'}case'cstring':case'unknown':default:{return'string'}}};t.convertFieldAggregation=function(e){switch(e){case'attr':{return'ATTR'}case'average':{return'AVG'}case'collect':{return'COLLECT'}case'count':{return'COUNT'}case'count-d':{return'COUNTD'}case'day':{return'DAY'}case'end':{return'END'}case'hour':{return'HOUR'}case'in-out':{return'INOUT'}case'kurtosis':{return'KURTOSIS'}case'max':{return'MAX'}case'mdy':{return'MDY'}case'median':{return'MEDIAN'}case'min':{return'MIN'}case'minute':{return'MINUTE'}case'month':{return'MONTH'}case'month-year':{return'MONTHYEAR'}case'none':{return'NONE'}case'percentile':{return'PERCENTILE'}case'qtr':{return'QTR'}case'quart1':{return'QUART1'}case'quart3':{return'QUART3'}case'second':{return'SECOND'}case'skewness':{return'SKEWNESS'}case'std-dev':{return'STDEV'}case'std-dev-p':{return'STDEVP'}case'sum':{return'SUM'}case'sum-xsqr':{return'SUM_XSQR'}case'trunc-day':{return'TRUNC_DAY'}case'trunc-hour':{return'TRUNC_HOUR'}case'trunc-month':{return'TRUNC_MONTH'}case'trunc-qtr':{return'TRUNC_QTR'}case'trunc-second':{return'TRUNC_SECOND'}case'trunc-week':{return'TRUNC_WEEK'}case'trunc-year':{return'TRUNC_YEAR'}case'user':{return'USER'}case'var':{return'VAR'}case'var-p':{return'VARP'}case'week':{return'WEEK'}case'weekday':{return'WEEKDAY'}case'year':{return'YEAR'}default:{throw new ss.Exception('Unknown AggType: '+e)}}};t.convertFieldRole=function(e){switch(e){case'dimension':{return'dimension'}case'measure':{return'measure'}case'unknown':{return'unknown'}default:{throw new ss.Exception('Unknown FieldRole type: '+e)}}};t.convertParameterDomainType=function(e){switch(e){case'any':{return'all'}case'list':{return'list'}case'range':{return'range'}default:{throw new ss.Exception('Unknown ParameterTypesDomainType: '+e)}}};t.convertPeriodType=function(e){switch(e){case'year':{return'year'}case'day':{return'day'}case'hour':{return'hour'}case'minute':{return'minute'}case'month':{return'month'}case'quarter':{return'quarter'}case'second':{return'second'}case'week':{return'week'}default:{throw new ss.Exception('Unknown DatePeriodType: '+e)}}};t.convertRangeType=function(e){switch(e){case'curr':{return'curr'}case'last':{return'last'}case'lastn':{return'lastn'}case'next':{return'next'}case'nextn':{return'nextn'}case'todate':{return'todate'}case'invalid':default:{throw new ss.Exception('Unknown or invalid Filters.RelativeDateRangeType: '+e)}}};t.convertZoneType=function(e){switch(e){case'color':case'shape':case'size':{return'legend'}case'map':{return'legend'}case'filter':{return'quickFilter'}case'viz':{return'worksheet'}case'paramctrl':{return'parameterControl'}case'empty':{return'blank'}case'title':{return'title'}case'text':{return'text'}case'bitmap':{return'image'}case'web':{return'webPage'}case'layout-basic':case'layout-flow':case'layout-free-form':{return null}default:{return'blank'}}};global.tab.ApiCrossDomainEnumConverter=t;var u=function(){};u.__typeName='tab.ApiCrossDomainParamConverter';u.convertFilterUpdateType=function(e){var fE=e.toString();if(fE.toLowerCase()==='replace'){return'filter-replace'.toString()}else if(fE.toLowerCase()==='all'){return'filter-all'.toString()}else if(fE.toLowerCase()==='add'){return'filter-add'.toString()}else if(fE.toLowerCase()==='remove'){return'filter-remove'.toString()}else{return'filter-replace'.toString()}};global.tab.ApiCrossDomainParamConverter=u;var v=function(){};v.__typeName='tab.ApiCrossDomainPresModelsFactory';v.newClientInfo=function(e,fE,fF,fG,fH,fI,fJ,fK){var fL=new Object;fL.isAutoUpdate=e;fL.isDownloadAllowed=fE;fL.workbookName=fF;fL.instanceId=fH;fL.currentSheetName=fG;fL.publishedSheets=fI;fL.dashboardZones=fJ;fL.story=fK;return fL};v.newAutoUpdateState=function(e){var fE=new Object;fE.isAutoUpdate=e;return fE};v.newCommandError=function(e,fE){var fF=new Object;fF.errorCode=e;fF.additionalInformation=fE;return fF};v.newSheetInfo=function(e,fE,fF,fG,fH,fI,fJ){var fK=new Object;fK.maxHeight=fI;fK.maxWidth=fH;fK.minHeight=fG;fK.minWidth=fF;var fL=new Object;fL.name=e;fL.sizeConstraints=fK;fL.repositoryUrl=fJ;fL.sheetType=fE;return fL};v.newContainedSheetInfo=function(e,fE,fF,fG){var fH=new Object;fH.name=e;fH.sheetType=fE;fH.zoneId=fF;fH.dashboardZones=fG;return fH};v.newDashboardZone=function(e,fE,fF,fG,fH,fI,fJ){var fK=new Object;fK.name=e;fK.zoneId=fE;fK.zoneType=fF;fK.height=fG;fK.width=fH;fK.x=fI;fK.y=fJ;return fK};v.newStory=function(e,fE){var fF=new Object;fF.activeStoryPointIndex=e;fF.storyPoints=fE;return fF};v.newStoryPoint=function(e,fE,fF,fG,fH){var fI=new Object;fI.caption=e;fI.index=fE;fI.storyPointId=fF;fI.isUpdated=fG;fI.containedSheetInfo=fH;return fI};v.$0=function(e,fE,fF,fG,fH,fI){var fJ=new Object;fJ.fieldName=e;fJ.filterType=fE;fJ.caption=fF;fJ.dataSourceName=fG;fJ.fieldRole=fH;fJ.fieldAggregation=fI;return fJ};v.newCategoricalFilter=function(e,fE,fF,fG,fH,fI,fJ,fK){var fL=v.$0(e,fE,fF,fG,fH,fI);fL.isExclude=fJ;fL.appliedValues=fK;return fL};v.newQuantitativeFilter=function(e,fE,fF,fG,fH,fI,fJ,fK,fL,fM,fN){var fO=v.$0(e,fE,fF,fG,fH,fI);fO.domainMinValue=fJ;fO.domainMaxValue=fK;fO.minValue=fL;fO.maxValue=fM;fO.includeNullValues=fN;return fO};v.newHierarchicalFilter=function(e,fE,fF,fG,fH,fI,fJ){var fK=v.$0(e,fE,fF,fG,fH,fI);fK.levels=fJ;return fK};v.newRelativeDateFilter=function(e,fE,fF,fG,fH,fI,fJ,fK,fL){var fM=v.$0(e,fE,fF,fG,fH,fI);fM.periodType=fJ;fM.rangeType=fK;fM.rangeN=fL;return fM};v.newDataSourcesForWorksheet=function(e,fE){var fF=new Object;fF.worksheetName=e;fF.dataSources=fE;return fF};v.newDataSource=function(e,fE,fF){var fG=new Object;fG.name=e;fG.fields=fE;fG.isPrimary=fF;return fG};v.newField=function(e,fE,fF){var fG=new Object;fG.name=e;fG.role=fE;fG.aggregation=fF;return fG};v.newCustomViewsInfo=function(e,fE,fF,fG){var fH=new Object;fH.customViewLoaded=e;fH.defaultCustomViewId=fE;fH.currentView=fF;fH.customViews=fG;return fH};v.newCustomView=function(e,fE,fF,fG,fH,fI,fJ){var fK=new Object;fK.id=e;fK.name=fE;fK.urlId=fF;fK.url=fG;fK.startViewId=fH;fK.isPublic=fI;fK.owner=fJ;return fK};v.newUser=function(e,fE,fF){var fG=new Object;fG.id=e;fG.friendlyName=fE;fG.username=fF;return fG};v.newUnderlyingDataTablePM=function(e,fE,fF){var fG=new Object;fG.dataTable=e;fG.headers=fE;fG.isSummary=fF;return fG};v.newUnderlyingDataColumnsPM=function(e,fE,fF,fG){var fH=new Object;fH.dataType=e;fH.fieldName=fE;fH.isReferenced=fF;fH.index=fG;return fH};v.newToolbarStatePM=function(e,fE,fF,fG,fH,fI,fJ,fK,fL,fM,fN){var fO=new Object;fO.canUndo=e;fO.canRedo=fE;fO.canRevert=fF;fO.isPaused=fG;fO.canRefreshData=fH;fO.canShowCustomViews=fI;fO.canShowPerformance=fJ;fO.canShowDataAlert=fK;fO.canShowSubscribe=fL;fO.canShowShare=fM;fO.canShowDownload=fN;return fO};v.newAddInInstancePM=function(e){var fE=new Object;fE.locator=v.newAddInLocatorPM(e.addInLocatorPresModel);fE.url=e.addInRegistrationPresModel.url;return fE};v.newAddInLocatorPM=function(e){var fE=new Object;fE.dashboardPath=v.newSheetPathPM(e.sheetPath);fE.instanceId=e.addInInstanceId;return fE};v.newSheetPathPM=function(e){var fE=new Object;fE.flipboardZoneID=e.flipboardZoneId;fE.storyPointID=e.storyPointId;fE.storyboard=e.storyboard;fE.sheetName=e.sheetName;fE.isDashboard=e.isDashboard;return fE};v.newVisualIdPM=function(e){var fE=new Object;fE.worksheet=e.worksheet;fE.dashboard=e.dashboard;fE.storyboard=e.storyboard;fE.flipboardZoneID=e.flipboardZoneId;fE.storyPointID=e.storyPointId;return fE};v.newAddInBootstrapInfoPM=function(e){var fE=new Object;fE.addinDashboardInfo=v.newAddInDashboardInfoPM(e.addInDashboardInfoPresModel);fE.addInSettingsInfo=v.newAddInSettingsInfoPM(e.addInSettingsInfo);fE.addInEnvironment=v.newAddInEnvironmentInfoPM(e.addInEnvironmentPresModel);return fE};v.newAddInDashboardInfoPM=function(e){var fE=new Object;fE.name=e.dashboardPresModel.sheetPath.sheetName;fE.addInZoneId=e.zoneId;fE.zones=z.getApiDashboardZonePresModels(e.dashboardPresModel.zones);return fE};v.newAddInSettingsInfoPM=function(e){var fE=new Object;fE.settingsValues=e.addInSettings||{};return fE};v.newAddInEnvironmentInfoPM=function(e){var fE=new Object;fE.addInContext=e.addInContext;fE.addInMode=e.addInMode;fE.addInLanguage=e.addInLanguage;fE.addInLocale=e.addInLocale;fE.tableauVersion=e.tableauVersion;fE.operatingSystem=e.operatingSystem;fE.apiVersion=e.apiVersion||'0.0.1';return fE};global.tab.ApiCrossDomainPresModelsFactory=v;var w=function(){};w.__typeName='tab.ApiDataSourcesHandler';w.$0=function(e,fE,fF){var fG=e.worksheetDataSchemaMap[fE].primaryDatasource;var fH=e.parametersDatasource;var fI=[];var fJ=e.dataSources;var fK=_.keys(fJ);for(var fL=0;fL<fK.length;fL++){var fM=fK[fL];if(ss.referenceEquals(fM,fH)){continue}var fN=fJ[fM];if(!ss.isNullOrEmptyString(fF)&&!ss.referenceEquals(fN.datasource,fF)){continue}var fO=w.processDataSourceFields(fN.fieldList);var fP=ss.referenceEquals(fN.datasource,fG);var fQ=v.newDataSource(fN.datasourceCaption,Array.prototype.slice.call(fO),fP);fI.push(fQ)}var fR=v.newDataSourcesForWorksheet(fE,Array.prototype.slice.call(fI));return fR};w.processDataSourceFields=function(e){var fE=[];for(var fF=0;fF<e.length;fF++){var fG=e[fF];if(ss.isValue(fG.baseColumnName)){continue}if(fG.type==='field-folder'){continue}if(fG.type==='field'){continue}var fH=fG;if(ss.isValue(fH.columnList)){for(var fI=0;fI<fH.columnList.length;fI++){var fJ=fH.columnList[fI];var fK=v.newField(fJ.name,t.convertFieldRole(fJ.fieldRole),t.convertFieldAggregation(fJ.aggregation));fE.push(fK)}}else if(fG.type==='dimension'){var fL=v.newField(fG.name,'dimension','NONE');fE.push(fL)}else{var fM=v.newField(fG.name,t.convertFieldRole(fG.defaultFieldRole),t.convertFieldAggregation(fG.defaultAggregation));fE.push(fM)}}return fE};global.tab.ApiDataSourcesHandler=w;var x=function(e,fE,fF){this.$12=new tab.DisposableHolder;this.$Z=null;this.$17={};this.$10=null;this.$14=null;this.$15=null;this.$11=false;this.$13=false;this.$16=null;this.$Z=fF;this.updateClients(e,fE);tab.CommandController.get().add_tabChangeCompleted(ss.mkdel(this,this.handleNewLayout));tab.StartupUtils.add_clientFullyLoaded(ss.mkdel(this,this.onClientFullyLoaded));tab.CommandController.get().add_commandQueueComplete(ss.mkdel(this,this.onCommandComplete))};x.__typeName='tab.ApiEventHandler';x.$2=function(e,fE){var fF=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),e);if(ss.isValue(fF)){var fG=_.find(fF.get_filters(),function(fH){return ss.referenceEquals(fH.get_globalFieldName(),fE)});if(ss.isValue(fG)){return fG.get_filterPresModel().fieldCaption}}return null};x.$0=function(e){var fE=new ss.StringBuilder;for(var fF=0;fF<e.length;fF++){var fG=e[fF];if(!(fE.length===0)){fE.append('.')}fE.append('['+fG+']')}return fE.toString()};x.$1=function(){var e=new Set;var fE=tab.ModelUtils.findContentDashboard();var fF=fE.get_zoneModels();for(var fG=0;fG<fF.length;fG++){var fH=fF[fG];if(fH.get_zoneType()==='filter'&&ss.referenceEquals(fH.get_worksheetName(),tsConfig.current_sheet_name)){var fI=fH.get_model().get_fieldName();e.add(fI)}}var fJ={};var fK=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name);if(ss.isValue(fK)){var fL=fK.get_filters();for(var fM=0;fM<fL.length;fM++){var fN=fL[fM];var fO=x.$0(fN.get_filterPresModel().name);if(e.has(fO)){var fP=fN.get_filterPresModel().fieldCaption;if(fN.get_filterPresModel().type!=='H'){fJ[fP]=fN.get_filterPresModel().type}else{fP='';var fQ=fN.get_filterPresModel().table[0].table;if(ss.isValue(fQ)&&ss.isValue(fQ.schema)&&ss.isValue(fQ.schema[0])&&ss.isValue(fQ.schema[0].name)){var fR=fQ.schema[0].name;for(var fS=1;fS<fR.length;fS++){fP+='['+fR[fS]+']';fJ[fP]=fN.get_filterPresModel().type;fP+='.'}}}}}}return fJ};x.$3=function(e){return null};x.$4=function(e){var fE=e;if(ss.isValue(fE['invalidFields'])){return v.newCommandError('invalidSelectionFieldName',fE['invalidFields'])}else if(ss.isValue(fE['invalidValues'])){return v.newCommandError('invalidSelectionValue',fE['invalidValues'])}else if(ss.isValue(fE['invalidDates'])){return v.newCommandError('invalidSelectionDate',fE['invalidDates'])}return null};global.tab.ApiEventHandler=x;var y=function(){};y.__typeName='tab.ApiFilterHandler';y.processFilters=function(e){var fE=JSON.parse(e.toString());var fF=[];if(ss.isValue(fE)){for(var fG=0;fG<fE.length;fG++){var fH=fE[fG];var fI=y.$5(fH);if(ss.isValue(fI)){fF.push(fI)}}}var fJ=new Object;fJ.filters=Array.prototype.slice.call(fF);return fJ};y.processFilterCommandReturningFieldName=function(e){var fE=y.$0(e);if(ss.isValue(fE)){return fE}return e};y.processSingleFilter=function(e){var fE=y.$0(e);if(ss.isValue(fE)){return fE}var fF=JSON.parse(e.toString());if(ss.isValue(fF)){return y.$5(fF)}return null};y.$0=function(e){var fE=e;if(ss.keyExists(fE,'parameterError')){if(ss.isValue(fE['invalidFieldCaption'])){return v.newCommandError('invalidFilterFieldName',fE['invalidFieldCaption'])}else if(ss.isValue(fE['invalidValues'])){return v.newCommandError('invalidFilterFieldValue',fE['invalidValues'])}else if(ss.isValue(fE['invalidAggFieldName'])){return v.newCommandError('invalidAggregationFieldName',fE['fieldCaption'])}else{return v.newCommandError('serverError',null)}}return null};y.$2=function(e){switch(e){case'C':{return'categorical'}case'H':{return'hierarchical'}case'Q':{return'quantitative'}case'RD':{return'relativedate'}default:{throw new ss.Exception('Unknown filter type: '+e)}}};y.$5=function(e){var fE=y.$2(e.type);switch(fE){case'categorical':{return y.$7(e)}case'relativedate':{return y.$a(e)}case'hierarchical':{return y.$8(e)}case'quantitative':{return y.$9(e)}default:{throw new ss.Exception('Unknown FilterType: '+fE)}}};y.$6=function(e,fE){var fF=e.fieldName;var fG=e.fieldCaption;var fH=y.$2(e.type);var fI=null;var fJ=null;var fK=null;if(ss.isValue(e.fieldDetailsJson)&&ss.isValue(e.fieldDatasource)){fI=e.fieldDatasource;var fL=JSON.parse(e.fieldDetailsJson);var fM=fL['genFieldColumnPresModel'];fJ=t.convertFieldRole(fM.fieldRole);fK=t.convertFieldAggregation(fM.aggregation)}return fE(fF,fH,fG,fI,fJ,fK)};y.$7=function(e){var fE=e.exclude||false;var fF=null;if(ss.isValue(e.table)){var fG=e.table;if(ss.isValue(fG.tuples)){var fH=ss.coalesce(e.all,false)||ss.coalesce(e.allChecked,false);var fI=fG.tuples;var fJ=[];for(var fK=0;fK<fI.length;fK++){var fL=fI[fK];if(fH||ss.isValue(fL.s)&&fL.s){var fM=fL.t[0];var fN=fL.d;fJ.push(y.$4(e,fM,fN))}}fF=Array.prototype.slice.call(fJ)}}var fO=function(fP,fQ,fR,fS,fT,fU){return v.newCategoricalFilter(fP,fQ,fR,fS,fT,fU,fE,fF)};return y.$6(e,fO)};y.$9=function(e){var fE=null;var fF=null;var fG=null;var fH=null;var fI=false;if(ss.isValue(e.range)){var fJ=e.range;if(ss.isValue(fJ.min)&&ss.isValue(fJ.min.v)){fE=y.$3(e,fJ.min,null)}if(ss.isValue(fJ.max)&&ss.isValue(fJ.max.v)){fF=y.$3(e,fJ.max,null)}}if(ss.isValue(e.table)){var fK=e.table;if(ss.isValue(fK.min)&&ss.isValue(fK.min.v)){fG=y.$3(e,fK.min,null)}if(ss.isValue(fK.max)&&ss.isValue(fK.max.v)){fH=y.$3(e,fK.max,null)}if(ss.isValue(fK.included)){var fL=fK.included;fI=fL==='include-all'||fL==='include-null'||fL==='include-range-or-null'}}var fM=function(fN,fO,fP,fQ,fR,fS){return v.newQuantitativeFilter(fN,fO,fP,fQ,fR,fS,fE,fF,fG,fH,fI)};return y.$6(e,fM)};y.$a=function(e){var fE=null;var fF=null;var fG=null;var fH=e.table;if(ss.isValue(fH)){if(ss.isValue(fH.periodType)){fE=t.convertPeriodType(fH.periodType)}if(ss.isValue(fH.rangeType)){fF=t.convertRangeType(fH.rangeType)}if(ss.isValue(fH.rangeN)){fG=fH.rangeN}}var fI=function(fJ,fK,fL,fM,fN,fO){return v.newRelativeDateFilter(fJ,fK,fL,fM,fN,fO,fE,fF,fG)};return y.$6(e,fI)};y.$4=function(e,fE,fF){return y.$3(e,fE,fF)};y.$3=function(e,fE,fF){var fG=new Object;if(ss.isNullOrUndefined(fE)){return fG}var fH=y.$1(fE.t);var fI=[fE];if(ss.isValue(e.range)){fI.push(e.range.min,e.range.max)}if(ss.isValue(e.table)){fI.push(e.table.min,e.table.max)}var fJ=tab.QuickFilterDateFormatUtil.getDateTimeFormatMode(fI,'none',e.date_format,null);fG.type=t.convertDataType(fH);var fK=((fH==='date'||fH==='datetime')?e.date_format:e.format);fG.formattedValue=tableau.format.formatDataValue(fE,e.role,fK,null,fJ);if(ss.isValue(fF)){fG.aliasedValue=fF}fG.value=z.serializeDataValue(fE.v,fH);return fG};y.$1=function(e){switch(e){case'b':{return'boolean'}case'd':{return'date'}case'i':{return'integer'}case'r':{return'real'}case's':{return'cstring'}case't':{return'datetime'}case null:{return'unknown'}}return'unknown'};y.$8=function(e){var fE=0;if(ss.isValue(e.levels)){fE=e.levels.length}var fF=function(fG,fH,fI,fJ,fK,fL){return v.newHierarchicalFilter(fG,fH,fI,fJ,fK,fL,fE)};return y.$6(e,fF)};global.tab.ApiFilterHandler=y;var z=function(){};z.__typeName='tab.ApiPresModelsConverter';z.getApiAddInInstancePresModel=function(e){return v.newAddInInstancePM(e)};z.getApiAddInBootstrapInfoPresModel=function(e){return v.newAddInBootstrapInfoPM(e)};z.getApiUnderlyingDataTablePresModel=function(e,fE){var fF=e.dataDictionary;var fG=e.underlyingDataTableColumns;var fH=z.$1(fG);var fI=z.$0(fF,fG);var fJ=v.newUnderlyingDataTablePM(fI,fH,fE);return fJ};z.getApiDashboardZonePresModels=function(e){var fE=[];if(ss.isNullOrUndefined(e)||ss.getKeyCount(e)===0){return fE}var fF=Object.keys(e);fF.sort(function(fR,fS){return parseInt(fR,10)-parseInt(fS,10)});for(var fG=0;fG<fF.length;fG++){var fH=fF[fG];var fI=e[fH];if(ss.isNullOrUndefined(fI)){continue}var fJ=t.convertZoneType(fI.zoneCommon.zoneType);if(!ss.isValue(fJ)){continue}var fK=(ss.isValue(fI.worksheet)?fI.worksheet:null);var fL=fI.zoneCommon.x;var fM=fI.zoneCommon.y;var fN=fI.zoneCommon.w;var fO=fI.zoneCommon.h;var fP=fI.zoneCommon.zoneId;var fQ=v.newDashboardZone(fK,fP,ss.unbox(fJ),fO,fN,fL,fM);fE.push(fQ)}return fE};z.processSelectedMarks=function(e){var fE=e.dataDictionary;var fF=e.vizData;return z.$4(fE,fF)};z.processHighlightedMarks=function(e){var fE=e.dataDictionary;var fF=e.vizData;return z.$4(fE,fF)};z.getAddInLocatorPresModel=function(e){return dm.newAddInLocatorPresModel(e)};z.$4=function(e,fE){var fF=new Object;var fG=new tab.DataDictionaryModel(null);fG.update(e);var fH=new tab.VizDataModel(null);fH.update(fE,tab.NoopModelEventsHandler.get_noopContext());var fI=[];fF.marks=fI;if(ss.isNullOrUndefined(fG)||fG.get_isEmpty()){return fF}fH.forEachTupleId(function(fJ){var fK=new Object;fK.tupleId=fJ;var fL=[];fK.pairs=fL;fI.push(fK);fH.forEachVizDataField(function(fM,fN){var fO=new Object;fO.fieldName=fM.get_fieldCaption();fO.formattedValue=tab.VizDataLookup.lookupAlias(fJ,fM,fG);fO.valueDataType=t.convertDataType(fM.get_dataType());var fP=null;if(!tab.VizDataLookup.isSpecial(fJ,fM,fG,null)&&fM.get_hasDataValues()&&fM.isTupleIdValid(fJ)){fP=tab.VizDataLookup.lookupRawDataValue(fJ,fM,fG)}var fQ=z.serializeDataValue(fP,fM.get_dataType());fO.value=fQ;fL.push(fO);return true});return true});return fF};z.serializeDataValue=function(e,fE){if(fE==='boolean'){if(_.isBoolean(e)){return e}return(ss.isValue(e)?(e.toString().toLowerCase()==='true'):false)}if(ss.isNullOrUndefined(e)){return null}switch(fE){case'boolean':{if(_.isBoolean(e)){return e}return(ss.isValue(e)?(e.toString().toLowerCase()==='true'):false)}case'date':case'datetime':{var fF=null;if(_.isDate(e)){fF=e}else if(_.isNumber(e)){if(isNaN(e)){fF=null}else{fF=new Date(tableau.types.JsDateFromOleDate(e))}}else{fF=tab.DateUtil.parsePresModelDate(e.toString())}if(ss.isNullOrUndefined(fF)||isNaN(fF)){return null}return fF.getTime()}case'integer':{if(_.isNumber(e)){return(isNaN(e)?null:e)}var fG=parseInt(e.toString(),10);return(isNaN(fG)?null:fG)}case'real':{if(_.isNumber(e)){return(isNaN(e)?null:e)}var fH=parseFloat(e.toString());return(isNaN(fH)?null:fH)}default:case'cstring':case'tuple':case'unknown':{return e.toString()}}};z.$1=function(e){var fE=[];for(var fF=0;fF<e.length;fF++){var fG=e[fF];var fH=t.convertUnderlyingDataType(fG.dataType);var fI=v.newUnderlyingDataColumnsPM(fH,fG.fieldCaption,fG.isReferenced,fF);fE.push(fI)}return fE};z.$0=function(e,fE){var fF=fE[0].formatValIdxs.length;var fG=new Array(fF);for(var fH=0;fH<fF;fH++){fG[fH]=new Array(fE.length)}for(var fI=0;fI<fE.length;fI++){var fJ=fE[fI];for(var fK=0;fK<fJ.formatValIdxs.length;fK++){var fL=new Object;fL.formattedValue=z.$3(e,fJ.formatValIdxs[fK],'cstring');fL.value=z.$3(e,fJ.valueIndices[fK],fJ.dataType);fL.aliasedValue=fL.formattedValue;fG[fK][fI]=fL}}return fG};z.$3=function(e,fE,fF){var fG=null;var fH;if(fE>=0){fH=fF}else{fH='cstring';fE=-fE-1}var fI=z.$2(e,fH,fE);if(ss.isValue(fI)){fG=fI.toString()}return fG};z.$2=function(e,fE,fF){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.dataSegments)){return null}var fG=ss.getEnumerator(Object.keys(e.dataSegments));try{while(fG.moveNext()){var fH=fG.current();var fI=e.dataSegments[fH];if(ss.isNullOrUndefined(fI.dataColumns)){continue}for(var fJ=0;fJ<fI.dataColumns.length;fJ++){var fK=fI.dataColumns[fJ];if(ss.isNullOrUndefined(fK)||fK.dataType!==fE){continue}if(fF<fK.dataValues.length){return fK.dataValues[fF]}fF-=fK.dataValues.length;break}}}finally{fG.dispose()}return null};global.tab.ApiPresModelsConverter=z;var A=function(e,fE){this.$7=null;this.$b=null;this.$8=new tab.DisposableHolder;this.$a=false;this.$9=false;tab.Param.verifyValue(e,'client');tab.Param.verifyValue(fE,'responder');this.$7=e;this.$b=fE;var fF=ss.mkdel(this,function(){var fG=e.get_flipboardNavigatorViewModel();if(ss.isValue(fG)){fG.add_remoteUpdateComplete(ss.mkdel(this,this.$4));this.$a=true;this.$8.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){fG.remove_remoteUpdateComplete(ss.mkdel(this,this.$4))})))}return ss.isValue(fG)});if(!fF()){_.defer(ss.mkdel(this,function(){if(this.$9){return}fF()}))}};A.__typeName='tab.ApiStorytellingHandler';A.$0=function(e,fE){var fF=($.isArray(fE)?fE:[fE]);var fG=_.any(fF,function(fH){return fH===e.get_name()});if(!fG){throw new ss.Exception("Command '"+e.get_name()+"' is not valid for the handler.")}};global.tab.ApiStorytellingHandler=A;var B=function(e,fE){this.$4=new tab.DisposableHolder;this.$5=null;this.$3=null;this.$1$1=null;if(ss.isNullOrUndefined(e)){throw new ss.ArgumentNullException('responder')}if(ss.isNullOrUndefined(fE)){throw new ss.ArgumentNullException('toolbarViewModel')}this.$5=fE;this.$3=e;this.$1();this.$5.add_newToolbar(ss.mkdel(this,this.$1));this.$4.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$5.remove_newToolbar(ss.mkdel(this,this.$1))})))};B.__typeName='tab.ApiToolbarStateManager';B.$1=function(e,fE){var fF=e[fE];return ss.isValue(fF)&&fF.get_enabled()};B.$2=function(e,fE,fF){var fG=e[fE];if(ss.isNullOrUndefined(fG)){return false}var fH=new tab.CommandsPresModelWrapper.$ctor1(fG.get_commands());var fI=fH.get_commandItems();for(var fJ=0;fJ<fI.length;fJ++){var fK=fI[fJ];var fL=new tab.CommandItemWrapper(fK);if(ss.equals(fL.get_name(),fF)){return fL.get_enabled()}}return false};B.$0=function(e,fE){var fF=ss.getEnumerator(fE);try{while(fF.moveNext()){var fG=fF.current();var fH=new tab.CommandItemWrapper(fG);e[fH.get_iconRes()]=fH}}finally{fF.dispose()}};global.tab.ApiToolbarStateManager=B;var C=function(){};C.__typeName='tab.ApiUnderlyingDataHandler';C.processSummaryData=function(e){var fE=e;var fF=C.processDataDictionary(fE,true);return fF};C.processUnderlyingData=function(e){var fE=e;var fF=C.processDataDictionary(fE,false);return fF};C.prepareSummaryCommand=function(e,fE){fE['maxRows']=e['api.maxRows'];fE['ignoreAliases']=e['api.ignoreAliases'];fE['ignoreSelection']=e['api.ignoreSelection']};C.prepareUnderlyingCommand=function(e,fE){C.prepareSummaryCommand(e,fE);fE['includeAllColumns']=e['api.includeAllColumns']};C.processDataDictionary=function(e,fE){var fF=new tab.DataDictionaryModel(null);fF.update(e.dataDictionary);var fG=e.underlyingDataTableColumns;var fH=C.$1(fG);var fI=C.$0(fF,fG);var fJ=v.newUnderlyingDataTablePM(fI,fH,fE);return fJ};C.$1=function(e){if(ss.isNullOrUndefined(e)){return[]}var fE=[];for(var fF=0;fF<e.length;fF++){var fG=e[fF];var fH=t.convertUnderlyingDataType(fG.dataType);var fI=v.newUnderlyingDataColumnsPM(fH,fG.fieldCaption,fG.isReferenced,fF);fE.push(fI)}return fE};C.$0=function(e,fE){if(ss.isNullOrUndefined(fE)||fE.length===0){return[]}var fF=fE[0].formatValIdxs.length;var fG=new Array(fF);for(var fH=0;fH<fF;fH++){fG[fH]=new Array(fE.length)}for(var fI=0;fI<fE.length;fI++){var fJ=fE[fI];for(var fK=0;fK<fJ.formatValIdxs.length;fK++){var fL=new Object;fL.formattedValue=C.$2(e,fJ.formatValIdxs[fK],'cstring');fL.value=C.$2(e,fJ.valueIndices[fK],fJ.dataType);fL.aliasedValue=fL.formattedValue;fG[fK][fI]=fL}}return fG};C.$2=function(e,fE,fF){var fG=null;var fH;if(fE>=0){fH=fF}else{fH='cstring';fE=-fE-1}var fI=e.getRawValue(fH,fE);if(ss.isValue(fI)){fG=fI.toString()}return fG};global.tab.ApiUnderlyingDataHandler=C;var C=function(){};C.__typeName='tab.ApiUnderlyingDataHandler';C.processSummaryData=function(e){var fE=e;var fF=C.$5(fE,true);return fF};C.$6=function(e){var fE=e;var fF=C.$5(fE,false);return fF};C.$3=function(e,fE){fE['maxRows']=e['api.maxRows'];fE['ignoreAliases']=e['api.ignoreAliases'];fE['ignoreSelection']=e['api.ignoreSelection']};C.$4=function(e,fE){C.$3(e,fE);fE['includeAllColumns']=e['api.includeAllColumns']};C.$5=function(e,fE){var fF=new tab.DataDictionaryModel(null);fF.update(e.dataDictionary);var fG=e.underlyingDataTableColumns;var fH=C.$1(fG);var fI=C.$0(fF,fG);var fJ=v.newUnderlyingDataTablePM(fI,fH,fE);return fJ};C.$1=function(e){if(ss.isNullOrUndefined(e)){return[]}var fE=[];for(var fF=0;fF<e.length;fF++){var fG=e[fF];var fH=t.convertUnderlyingDataType(fG.dataType);var fI=v.newUnderlyingDataColumnsPM(fH,fG.fieldCaption,fG.isReferenced,fF);fE.push(fI)}return fE};C.$0=function(e,fE){if(ss.isNullOrUndefined(fE)||fE.length===0){return[]}var fF=fE[0].formatValIdxs.length;var fG=new Array(fF);for(var fH=0;fH<fF;fH++){fG[fH]=new Array(fE.length)}for(var fI=0;fI<fE.length;fI++){var fJ=fE[fI];for(var fK=0;fK<fJ.formatValIdxs.length;fK++){var fL=new Object;fL.formattedValue=C.$2(e,fJ.formatValIdxs[fK],'cstring');fL.value=C.$2(e,fJ.valueIndices[fK],fJ.dataType);fL.aliasedValue=fL.formattedValue;fG[fK][fI]=fL}}return fG};C.$2=function(e,fE,fF){var fG=null;var fH;if(fE>=0){fH=fF}else{fH='cstring';fE=-fE-1}var fI=e.getRawValue(fH,fE);if(ss.isValue(fI)){fG=fI.toString()}return fG};global.tab.ApiUnderlyingDataHandler=C;var D=function(){spiff.BaseViewModel.call(this)};D.__typeName='tab.AppBannerViewModel';global.tab.AppBannerViewModel=D;var E=function(){this.$t=null;this.$r=null;this.$s=null;this.$p=null;this.$u=null;this.$q=new tab.DisposableHolder;this.$1$4=null;this.$1$5=null;this.$1$6=null;this.$1$7=null;this.$1$8=null;var e=null;e=ss.mkdel(this,function(fE,fF){E.remove_starting(e);this.$j();this.$k().$l();var fG=new tab.LayoutSession(null,E.get_commonDialogProvider());var fH=tab.CommandController.create(fG,E.get_commonDialogProvider(),new V(null,null,null));fH.setBrowserViewportFunc(R.getViewport);fH.add_newLayoutId(ss.mkdel(this,this.$6));fH.add_tabChangeCompleted(ss.mkdel(this,this.$8));E.add_onTabSelect(ss.mkdel(this,this.$3));fH.add_destroyView(ss.mkdel(this,this.$2));fH.add_intermediateUpdate(ss.mkdel(this,this.$m));fH.add_switchingViz(ss.mkdel(this,this.$7));this.$q.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){fH.remove_newLayoutId(ss.mkdel(this,this.$6));fH.remove_tabChangeCompleted(ss.mkdel(this,this.$8));E.remove_onTabSelect(ss.mkdel(this,this.$3));fH.remove_destroyView(ss.mkdel(this,this.$2));fH.remove_intermediateUpdate(ss.mkdel(this,this.$m));fH.remove_switchingViz(ss.mkdel(this,this.$7))})));tab.StartupUtils.add_clientFullyLoaded(ss.mkdel(this,this.$5));var fI=E.$0(false,fG);this.set_client(fI);this.$t=fI;this.get_client().startup();this.$c(this.get_client(),this.$t);if(BrowserSupport.BrowserSupport.IsIE()){this.$0()}this.$s=new dj;spiff.SpiffBrowserViewport.getSpiffBrowserViewportFunc=function(fJ){R.getViewport(function(fK){var fL=new spiff.SpiffBrowserViewport(fK.get_dimensions(),function(fM){return fK.getVisibleRoom(fM,0)});fJ(fL)})}});E.add_starting(e)};E.__typeName='tab.Application';E.add_starting=function(e){E.$1$1=ss.delegateCombine(E.$1$1,e)};E.remove_starting=function(e){E.$1$1=ss.delegateRemove(E.$1$1,e)};E.add_started=function(e){E.$1$2=ss.delegateCombine(E.$1$2,e)};E.remove_started=function(e){E.$1$2=ss.delegateRemove(E.$1$2,e)};E.add_onTabSelect=function(e){E.$1$3=ss.delegateCombine(E.$1$3,e)};E.remove_onTabSelect=function(e){E.$1$3=ss.delegateRemove(E.$1$3,e)};E.get_instance=function(){if(ss.isNullOrUndefined(E.$5)){E.$5=new E}return E.$5};E.get_isHostedInApiContext=function(){return!ss.isNullOrEmptyString(tsConfig.apiID)||tsConfig.is_mobile_app};E.get_commonDialogProvider=function(){return E.$4||(E.$4=new bd)};E.get_commonBannerProvider=function(){return E.$3||(E.$3=new bc)};E.startup=function(){var e={};e['t']=tabBootstrap.MetricsController.getTiming();e['d']='APPSTR'.toString();var fE=new tabBootstrap.MetricsEvent('gen',2,e);tabBootstrap.MetricsController.logEvent(fE);if(ss.isValue(E.$6)&&E.$6){throw new ss.Exception('Application.Startup() can only be called once')}var fF=E.get_instance();if(!ss.staticEquals(E.$1$1,null)){E.$1$1(fF,ss.EventArgs.Empty)}if(!ss.staticEquals(E.$1$2,null)){E.$1$2(fF,ss.EventArgs.Empty)}spiff.DragDropManager.init();SharedWidgets.setConfig(E.$1());E.$6=true};E.$1=function(){var e={styles:{Typography:{FontFamily:'inherit'}},suppressClickBustingClassName:spiff.ClickBuster.suppressClickBustingClass};return e};E.$0=function(e,fE){var fF=ss.getType((tsConfig.is_mobile?'tab.ApplicationViewModelMobile':'tab.ApplicationViewModelWeb'));return new fF(e,fE)};E.handleAllFontsFound=function(){ed.get_instance().downloadFonts();ed.get_instance().allFontsFound()};E.$2=function(){bf.get_instance().reset(1);bf.get_instance().addCompletedHandler(1,cv.logUIStabilized);ed.get_instance().initialize(true);var e=tab.ServerFonts.effectiveBentonSans;ed.get_instance().registerServerLoadedFonts(e);ed.get_instance().registerServerLoadedFonts(tab.ServerFonts.tableauFontNames);ed.get_instance().notifyDownloadableFont(e)};E.fireOnTabSelect=function(e){if(!ss.staticEquals(E.$1$3,null)){E.$1$3(e)}};global.tab.Application=E;var F=function(){this.domNode=null;this.toolbarContainer=null;spiff.Template.call(this,F.$0());this.domNode=this.domRoot;this.toolbarContainer=$((tab.FeatureFlags.isEnabled('IframeSizedToWindow')?G.toolbarContainerSelector:'.tab-toolbar-container'))};F.__typeName='tab.ApplicationTemplate';F.$0=function(){return(tab.FeatureFlags.isEnabled('IframeSizedToWindow')?$("<div id='dashboard-viewport'></div>"):$("<div id='tabViewer' class='wcBody' style='visibility: hidden;'></div>"))};global.tab.ApplicationTemplate=F;var G=function(e){this.$i=null;this.$h=null;this.$f=null;this.$g=null;ss.makeGenericType(spiff.BaseView$1,[I]).call(this,e,new F);spiff.FullscreenUtil.add_fullscreenStateChanged(G.$0);this.disposables.add(function(){spiff.FullscreenUtil.remove_fullscreenStateChanged(G.$0)})};G.__typeName='tab.ApplicationView';G.$0=function(){if(tsConfig.isPublic){if(spiff.FullscreenUtil.get_inFullscreenMode()){$(G.vizContainerSelector).css({width:'',height:''})}else{var e=tabBootstrap.ViewerBootstrap.get_instance().getVizClientContainerSize(tsConfig.current_sheet_type);$(G.vizContainerSelector).css({width:e.w+'px',height:e.h+'px'})}}var fE=E.get_instance().get_tabbedNavigation();if(tabBootstrap.VizLayoutConstants.get_shouldShowTabs()&&ss.isValue(fE)){fE.resizeShim()}};global.tab.ApplicationView=G;var H=function(e,fE){this.session=null;this._connections=[];this.skipInit=false;this.$A=null;this.$w=false;this.$z=null;this.$C=null;this.$v=null;this.$u=null;this.$x=false;this.$y=false;this.$B=0;this.$D=null;spiff.Widget.call(this,$(null));this.session=fE;this.skipInit=e;var fF=tabBootstrap.ViewerBootstrap.get_instance();if(ss.isNullOrUndefined(fF)){throw new ss.Exception('tabBootstrap.ViewerBootstrap is undefined')}if(fF.get_hasBootstrapCompleted()){tab.XhrUtil.set_currentTabName(tsConfig.current_sheet_name)}tab.XhrUtil.guid=tsConfig.guid;tab.XhrUtil.parentID=tsConfig.parentID;this.$C=new fl(this);this.enableTextSelection()};H.__typeName='tab.ApplicationViewModel';H.selectCenteringContainer=function(){return $('#centeringContainer')};H.getClientBounds=function(){var e=tabBootstrap.ViewerBootstrap.get_instance().getWebClientDashboardContainerSize(tsConfig.current_sheet_type);var fE=tabBootstrap.VizLayoutConstants.get_tabsHeight();var fF={l:0,t:fE,w:e.w,h:e.h};if(!eV.get_toolbarIsBottom()&&!tsConfig.is_authoring){fF.t+=tabBootstrap.VizLayoutConstants.get_vizToolbarHeight()}return fF};H.calculateDashboardViewportBounds=function(){var e=tab.DashboardSizeCalculator.get_dashboardViewportSize();var fE={l:0,t:0,w:e.w,h:e.h};if(!eV.get_toolbarIsBottom()&&!tsConfig.is_authoring){fE.t+=tabBootstrap.VizLayoutConstants.get_vizToolbarHeight()}if(tsConfig.is_authoring){fE.t+=tabBootstrap.VizLayoutConstants.get_authoringMenuBarHeight()+tabBootstrap.VizLayoutConstants.get_authoringToolbarHeight()}return fE};global.tab.ApplicationViewModel=H;var I=function(e){this.$6=null;this.$9=null;this.$5=null;this.$7=null;this.$8=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$6=e;this.$6.add_newWorkbook(ss.mkdel(this,this.handleNewWorkbook));if(ss.isValue(this.$6.get_workbook())){this.handleNewWorkbook(this.$6.get_workbook())}this.$6.add_applicationUpdate(ss.mkdel(this,this.handleApplicationUpdate));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$6.remove_applicationUpdate(ss.mkdel(this,this.handleApplicationUpdate))})));this.$5=new D;this.$7=new bR;if(tsConfig.is_metrics_authoring){}if(!tsConfig.is_authoring&&!this.$6.get_isOffline()){this.$8=new eV(this.$6.get_toolbar());this.$8.set_shouldShowCommenting(this.get_shouldShowCommenting());if(!tab.FeatureFlags.isEnabled('SkipPostLoadOperations')){tab.StartupUtils.callOnceAfterInitialBootstrap(ss.mkdel(this,this.$3))}else{this.get_toolbarViewModel().set_viewCount(tsConfig.viewCount)}}};I.__typeName='tab.ApplicationViewModelReal';global.tab.ApplicationViewModelReal=I;var J=function(e){this.$9=null;this.$2$1=null;this.$2$2=null;spiff.Widget.call(this,e.domRoot);this.$9=e;this.$8()};J.__typeName='tab.AreYouSureButtons';J.create=function(e,fE){var fF=new J(new K);if(ss.isValue(e)){fF.$a(e);fF.disposables.add$1(new tab.CallOnDispose(function(){fF.$b(e)}))}if(ss.isValue(fE)){fF.$c(fE);fF.disposables.add$1(new tab.CallOnDispose(function(){fF.$d(fE)}))}return fF};global.tab.AreYouSureButtons=J;var K=function(){this.container=null;this.label=null;this.cancelButton=null;this.confirmButton=null;spiff.Template.call(this,$("<div class='tab-areYouSure-container'><div class='tab-areYouSure-outer'><div class='tab-areYouSure-inner'><span class='tab-areYouSure-label'></span><div class='tab-areYouSure-no tab-areYouSure-button'></div><div class='tab-areYouSure-yes tab-areYouSure-button'></div></div></div></div>"));this.container=this.domRoot;this.label=this.getElementBySelector('.tab-areYouSure-label');this.cancelButton=this.getElementBySelector('.tab-areYouSure-no');this.confirmButton=this.getElementBySelector('.tab-areYouSure-yes')};K.__typeName='tab.AreYouSureTemplate';global.tab.AreYouSureTemplate=K;var L=function(){};L.__typeName='tab.AxisAuthoringTelemetry';L.$1=function(){return tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tab.FeatureFlags.isEnabled('EditAxisWebAffordance')&&tab.FeatureFlags.isEnabled('AxisAuthoringTelemetry')};L.logAxisCaretClickEvent=function(){L.$0(L.$2,[L.$8,(tab.ApplicationModel.get_instance().get_isLocalRenderMode()?L.$5:L.$a),L.$4,L.$3])};L.logAxisContextMenuShownEvent=function(){L.$0(L.$2,[L.$8,(tab.ApplicationModel.get_instance().get_isLocalRenderMode()?L.$5:L.$a),L.$4,L.$6])};L.logDoubleTapAxisEvent=function(){L.$0(L.$2,[L.$8,(tab.ApplicationModel.get_instance().get_isLocalRenderMode()?L.$5:L.$a),L.$4,L.$7])};L.logRightClickAxisEvent=function(){L.$0(L.$2,[L.$8,(tab.ApplicationModel.get_instance().get_isLocalRenderMode()?L.$5:L.$a),L.$4,L.$9])};L.$0=function(e,fE){if(L.$1()){tab.OnlineAnalyticsClient.logEvent(e,fE)}};global.tab.AxisAuthoringTelemetry=L;var M=function(e,fE,fF){this.$2=null;this.$4=null;this.$3=null;N.call(this,e,fF);this.$2=e.RedirectUrl;this.$4=fE.dataSourceConnectionAttemptInfos[0];this.$3=fE};M.__typeName='tab.BadPasswordAuthPromptOverlayWidget';global.tab.BadPasswordAuthPromptOverlayWidget=M;var N=function(e,fE){O.call(this,e,fE,null)};N.__typeName='tab.BaseDataSourceConnectionErrorOverlayWidget';global.tab.BaseDataSourceConnectionErrorOverlayWidget=N;var O=function(e,fE,fF){this.onProceed=null;this.onCancel=null;this.dataSourceConnectionAttemptErrorResponse=null;this.$1$1=false;this.dataSourceConnectionAttemptErrorResponse=e;this.onProceed=fE;this.onCancel=fF;this.set_submitted(false)};O.__typeName='tab.BaseDataSourceConnectionErrorWidget';global.tab.BaseDataSourceConnectionErrorWidget=O;var P=function(){this.parentNode=null};P.__typeName='tab.BaseDisposableDialog';global.tab.BaseDisposableDialog=P;var Q=function(e,fE){var fF=function(fG,fH,fI){this.$1=null;ss.makeGenericType(spiff.ReactSpiffAdapter$3,[fE,ss.makeGenericType(eM,[e]),Object]).call(this,fG(fH.viewModel),fH,fI);this.$1=fG};ss.registerGenericClassInstance(fF,Q,[e,fE],{handleWidgetPropertyChanged:function(fG,fH){},updateWidgetState:function(fG){if(!ss.referenceEquals(this.props.viewModel,fG.viewModel)){this.set_widget(tab.MiscUtil.dispose$1(this.get_widget()));this.set_widget(this.$1(fG.viewModel));var fH=$(ReactDOM.findDOMNode(this));if(ss.isValue(fH)){fH.append(this.get_widget().element)}}}},function(){return ss.makeGenericType(spiff.ReactSpiffAdapter$3,[fE,ss.makeGenericType(eM,[e]),Object])},function(){return[]});return fF};Q.__typeName='tab.BaseToolbarButtonComponent$2';ss.initGenericClass(Q,a,2);global.tab.BaseToolbarButtonComponent$2=Q;var R=function(e){this.$0=null;this.$0=e};R.__typeName='tab.BrowserViewport';R.$8=function(){return tab.Logger.lazyGetLogger(R)};R.$7=function(){var e=window.self.visualViewport;if(ss.isValue(e)){return{l:ss.Int32.trunc(e.pageLeft),t:ss.Int32.trunc(e.pageTop),w:ss.Int32.trunc(e.width),h:ss.Int32.trunc(e.height)}}else{var fE=new tab.WindowHelper(window.self);return{l:fE.get_pageXOffset(),t:fE.get_pageYOffset(),w:fE.get_innerWidth(),h:fE.get_innerHeight()}}};R.getViewport=function(e){tab.Param.verifyValue(e,'callback');if(spiff.FullscreenUtil.get_inFullscreenMode()){e(new R(R.$7()))}else if(R.$a){R.$b.push(e);R.$6()}else{e(new R(R.$7()))}};R.$0=function(e){if(tabBootstrap.Utility.get_isEmbedded()){if(ss.isValue(R.$c)){e.y+=R.$c.y;e.x+=R.$c.x}}else{try{var fE=window.self;while(ss.isValue(fE.frameElement)){var fF=$(fE.frameElement).offset();e.y+=tab.DoubleUtil.roundToInt(fF.top);e.x+=tab.DoubleUtil.roundToInt(fF.left);fE=fE.parent}}catch(fG){var e=ss.Exception.wrap(fG)}}};R.$3=function(e){if(typeof(ss.getType('ss'))==='undefined'){return}var fE=e.data;if(ss.isNullOrUndefined(fE)||typeof(fE)!=='string'){return}var fF=fE;var fG=tab.NonApiCommand.parse(fF);if(fG.get_name()==='layoutInfoResp'){var fH={l:parseInt(ss.getItem(fG.get_parameters(),0),10),t:parseInt(ss.getItem(fG.get_parameters(),1),10),w:parseInt(ss.getItem(fG.get_parameters(),2),10),h:parseInt(ss.getItem(fG.get_parameters(),3),10)};R.$2(fH)}else if(fG.get_name()==='tableau.enableVisibleRectCommunication'){R.$a=true}else if(fG.get_name()==='vizOffsetResp'){R.$c={x:parseInt(ss.getItem(fG.get_parameters(),0),10),y:parseInt(ss.getItem(fG.get_parameters(),1),10)};R.$a=true}};R.$2=function(e){var fE=new R(e);if(R.$b.length!==0){var fF=R.$b.shift();fF(fE)}};R.$6=function(){if(BrowserSupport.BrowserSupport.PostMessage()){var e=new tab.NonApiCommand('layoutInfoReq',[]);window.parent.postMessage(e.serialize(),'*')}else{R.$2(R.$7())}};R.$5=function(){if(R.$9){if('removeEventListener'in window.self){window.removeEventListener('message',R.$3,true)}else{window.self.detachEvent('onmessage',R.$3)}R.$9=false}};R.$1=function(){if('addEventListener'in window.self){window.addEventListener('unload',R.$4,true)}else{window.self.attachEvent('onunload',R.$4)}};R.$4=function(e){R.$5()};global.tab.BrowserViewport=R;var S=function(){};S.__typeName='tab.ButtonErrorDialog';S.$3=function(e){return{handleClick:function(fE){e()},buttonType:9,testId:'button-error-dialog-ok-button',label:tab.Strings.DialogButtonOK,disabled:false,style:S.$8}};S.$0=function(e){return{dialogWidth:260,isModal:false,onCloseRequest:e,positioningBehavior:0,shouldReturnFocusOnClose:true,showCloseButton:false,showFooter:false,testId:'button-error-dialog',type:2,zIndex:10000,dialogBodyStyle:S.$4,dialogStyle:S.$5}};S.$1=function(e){return spiff.DOMElements.div({id:'error-header',style:S.$6},e)};S.$2=function(e){return spiff.DOMElements.div({id:'error-msg',style:S.$7},e)};S.createDialog=function(e,fE,fF){var fG=S.$3(e);var fH=S.$0(e);var fI=S.$1(fE);var fJ=S.$2(fF);var fK=React.createElement(SharedWidgets.ButtonWidget,fG);return React.createElement(SharedWidgets.DialogWidget,fH,[fI,fJ,fK])};global.tab.ButtonErrorDialog=S;var T=function(e){React.Component.call(this,e)};T.__typeName='tab.ButtonZoneComponent';global.tab.ButtonZoneComponent=T;var U=function(e,fE){this.$l=null;this.$o=null;this.$n=false;this.$m=false;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$l=e;this.$o=fE;this.$l.add_contentUpdated(ss.mkdel(this,this.$7));this.$o.add_resizeZone(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$o.remove_resizeZone(ss.mkdel(this,this.$8));this.$l.remove_contentUpdated(ss.mkdel(this,this.$7))})))};U.__typeName='tab.ButtonZoneViewModel';global.tab.ButtonZoneViewModel=U;var V=function(e,fE,fF){this.dialogShowDelay=ss.coalesce(tab.FeatureParamsLookup.getInt(50),2000);this.$e=0;this.$d=null;this.$b=null;this.$c=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;P.call(this);this.$8(e);this.$6(fE);this.$a(fF)};V.__typeName='tab.CancelDialog';global.tab.CancelDialog=V;var W=function(e){spiff.PureRenderComponent.call(this,e);this.state={isCanceling:false}};W.__typeName='tab.CancelDialogComponent';global.tab.CancelDialogComponent=W;var X=function(){};X.__typeName='tab.CancelDialogTelemetry';X.$2=function(e,fE,fF){if(tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tab.FeatureFlags.isEnabled('CommandCancellation')){var fG=(ss.staticEquals(fE,null)?0:(fF-fE));tab.OnlineAnalyticsClient.logEvent('Cancel_Dialog',['ElapsedTotalTimeShownMS',fG,'CommandName',e,'CancelStatus','CompletedBeforeCancel'])}};X.$1=function(e,fE,fF,fG){X.$0(e,'Failure',fE,fF,fG)};X.$3=function(e,fE,fF,fG,fH){X.$0(e,tab.CancelTelemetry.convertCancellationStatusForLog(fE),fF,fG,fH)};X.$0=function(e,fE,fF,fG,fH){if(tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tab.FeatureFlags.isEnabled('CommandCancellation')){var fI=fG-fF;var fJ=fH-fF;tab.OnlineAnalyticsClient.logEvent('Cancel_Dialog',['ElapsedTimeBeforeCancelledMS',fI,'ElapsedTotalTimeShownMS',fJ,'CommandName',e,'CancelStatus',fE])}};global.tab.CancelDialogTelemetry=X;var Y=function(e,fE){this.$1=null;this.$2=null;this.$4=null;this.$5=null;this.$7=false;this.$3=null;this.$0=null;this.$6=null;this.$8=null;this.$1=e;this.$2=fE;this.$7=false;this.$8={x:0,y:0}};Y.__typeName='tab.CanvasRenderer';Y.$7=function(e,fE,fF){if(Math.round(fF)%2===1){var fG=fE.x-e.x;var fH=fE.y-e.y;if(fG!==0||fH!==0){var fI=fG*fG+fH*fH;fI=Math.sqrt(fI);var fJ=Math.abs(0.5*(fG/fI));var fK=Math.abs(0.5*(fH/fI));e.x+=fK;e.y+=fJ;fE.x+=fK;fE.y+=fJ}}};Y.getRenderContext=function(e,fE){var fF;if(fE==='opaque'&&tab.FeatureParamsLookup.getBool(42)){var fG=ss.mkdict(['alpha',false]);fF=e.getContext('2d',fG)}else{fF=e.getContext('2d')}return new eD(fF)};Y.addMultipolygonPath=function(e,fE){var fF=fE.polygonList;var fG=fF.length;for(var fH=0;fH<fG;fH++){var fI=fF[fH].lineList;var fJ=fI.length;for(var fK=0;fK<fJ;fK++){var fL=fI[fK].pointsF;var fM=fL.length;if(fM<2){continue}e.moveTo(fL[0],fL[1]);for(var fN=2;fN<fM;fN=fN+2){e.lineTo(fL[fN],fL[fN+1])}}}};Y.addMultipointPath=function(e,fE,fF){var fG=fE.pointsF;var fH=fG.length;for(var fI=0;fI<fH;fI=fI+2){var fJ=fG[fI];var fK=fG[fI+1];e.moveTo(fJ+fF,fK);e.arc(fJ,fK,fF,0,Y.twoPI,true)}};Y.addMultilinePath=function(e,fE){var fF=fE.lineList;var fG=fF.length;for(var fH=0;fH<fG;fH++){var fI=fF[fH].pointsF;var fJ=fI.length;if(fJ===0||fJ%2===1){continue}e.moveTo(fI[0],fI[1]);for(var fK=2;fK<fI.length;fK=fK+2){e.lineTo(fI[fK],fI[fK+1])}}};Y.boundsCoordinateArray=function(e,fE){var fF=e.length;for(var fG=0;fG<fF;fG=fG+2){var fH=e[fG];var fI=e[fG+1];fE.minX=Math.min(fE.minX,fH);fE.minY=Math.min(fE.minY,fI);fE.maxX=Math.max(fE.maxX,fH);fE.maxY=Math.max(fE.maxY,fI)}};Y.boundsMultipolygon=function(e,fE){for(var fF=0;fF<e.polygonList.length;fF++){var fG=e.polygonList[fF];for(var fH=0;fH<fG.lineList.length;fH++){var fI=fG.lineList[fH];Y.boundsCoordinateArray(fI.pointsF,fE)}}};Y.boundsMultilineString=function(e,fE){for(var fF=0;fF<e.lineList.length;fF++){var fG=e.lineList[fF];Y.boundsCoordinateArray(fG.pointsF,fE)}};Y.getBasisVectorsBetweenTwoPoints=function(e,fE,fF){var fG=fE.x-e.x;var fH=fE.y-e.y;var fI=Math.sqrt(fG*fG+fH*fH);var fJ={x:fF*(fG/fI),y:fF*(fH/fI)};var fK={x:-fJ.y,y:fJ.x};return{item1:fJ,item2:fK}};Y.fillPath=function(e,fE,fF){var fG=Math.floor(fE.length/2);if(fG<2){return}e.beginPath();e.moveTo(fE[0],fE[1]);for(var fH=2;fH<fG*2;fH+=2){e.lineTo(fE[fH],fE[fH+1])}if(fF){e.closePath()}e.fill()};Y.strokePath=function(e,fE,fF,fG){var fH=Math.floor(fE.length/2);if(fH<2){return}e.beginPath();var fI=e.get_lineWidth();for(var fJ=0;fJ<fH*2-2;fJ+=2){var fK={x:fE[fJ],y:fE[fJ+1]};var fL={x:fE[fJ+2],y:fE[fJ+3]};if(fH<=2&&fG){Y.$7(fK,fL,fI)}if(fJ===0){e.moveTo(fK.x,fK.y)}Y.$3(e,fK,fL)}if(fF){e.closePath();var fM=fH*2;var fN={x:fE[fM-2],y:fE[fM-1]};var fO={x:fE[0],y:fE[1]};if(fH<=2&&fG){Y.$7(fN,fO,fI)}Y.$3(e,fN,fO)}e.stroke()};Y.toCanvasAngle=function(e){return e*Y.twoPI-Y.halfPI};Y.toCanvasLineCap=function(e){switch(e){case'flat':{return'butt'}case'square':{return'square'}case'round':{return'round'}case'triangle':{break}}return'butt'};Y.toCanvasLineJoin=function(e){switch(e){case'bevel':{return'bevel'}case'miter':{return'miter'}case'round':{return'round'}}return'miter'};Y.renderRectangle=function(e,fE,fF,fG,fH,fI,fJ){var fK=fG/2;var fL=fH/2;e.set_lineJoin('miter');e.set_lineWidth(fJ);e.set_strokeStyle(fI);e.strokeRect(fE-fK,fF-fL,fG,fH)};Y.renderCircle=function(e,fE,fF,fG,fH,fI){e.beginPath();e.arc(fE,fF,fG/2,0,Y.twoPI,true);e.closePath();e.set_lineWidth(fI);e.set_strokeStyle(fH);e.stroke()};Y.renderFilledCircle=function(e,fE,fF,fG,fH){e.beginPath();e.arc(fE,fF,fG/2,0,Y.twoPI,true);e.closePath();e.set_shapeFillStyle(fH);e.fill()};Y.renderWedge=function(e,fE,fF,fG,fH,fI,fJ,fK,fL,fM){var fN=Y.toCanvasAngle(fH);var fO=Y.toCanvasAngle(fI);if(Math.abs(fO-fN)<Y.angleEpsilon){return}if(ss.isNullOrUndefined(fL)){fL=false}var fP=Math.abs(fI-fH)>=1;e.beginPath();if(!fP){e.moveTo(fE,fF)}fN=Y.$6(fN);fO=Y.$6(fO);e.arc(fE,fF,fG,fN,fO,fL);e.closePath();e.set_lineJoin((fM?'miter':'round'));e.set_lineWidth(fK);e.set_strokeStyle(fJ);e.stroke()};Y.createPlaceholderPath=function(e,fE,fF,fG){e.beginPath();e.arc(fE,fF,fG/2,0,Y.twoPI,true);e.closePath()};Y.createMultipolygonPath=function(e,fE){e.beginPath();Y.addMultipolygonPath(e,fE.multiPolygon);e.closePath()};Y.createMultipointPath=function(e,fE,fF){e.beginPath();Y.addMultipointPath(e,fF.multiPoint,fE/2);e.closePath()};Y.fillMultiLineStringPath=function(e,fE,fF){e.set_lineCap('butt');e.set_lineJoin('round');e.set_strokeStyle(fF);e.set_lineWidth(fE);e.stroke()};Y.fillClearMultiLineStringPath=function(e,fE,fF){var fG=e.get_globalCompositeOperation();e.set_globalCompositeOperation('destination-out');e.set_lineCap('butt');e.set_lineJoin('round');e.set_strokeStyle(fF);e.set_lineWidth(fE);e.stroke();e.set_globalCompositeOperation(fG)};Y.$2=function(e,fE,fF){e.beginPath();e.moveTo(fE.x,fE.y);e.lineTo(fF.x,fF.y);e.stroke()};Y.$0=function(e,fE,fF){var fG=e[0];var fH=e[1];var fI=Y.getBasisVectorsBetweenTwoPoints(fG,fH,fE);var fJ=Y.$8(fI.item1);var fK={x:fJ.x*(fF/2),y:fJ.y*(fF/2)};var fL=fI.item2;var fM={x:fG.x-fK.x+fL.x,y:fG.y-fK.y+fL.y};var fN={x:fG.x-fK.x-fL.x,y:fG.y-fK.y-fL.y};var fO=new Array(2);fO[0]=fM;fO[1]=fN;return fO};Y.fillMultiLineStringEndCaps=function(e,fE,fF,fG,fH){e.set_strokeStyle(fH);e.set_lineWidth(fG);var fI=fF/2;var fJ=fE.lineList;var fK=fJ.length;for(var fL=0;fL<fK;fL++){var fM=fJ[fL].pointsF;var fN=fM.length;if(fN<4||fN%2===1){continue}var fO={x:fM[0],y:fM[1]};var fP={x:fM[2],y:fM[3]};var fQ=new Array(2);fQ[0]=fO;fQ[1]=fP;var fR=Y.$0(fQ,fI,fG);Y.$2(e,fR[0],fR[1]);fO.x=fM[fN-2];fO.y=fM[fN-1];fP.x=fM[fN-4];fP.y=fM[fN-3];fQ[0]=fO;fQ[1]=fP;fR=Y.$0(fQ,fI,fG);Y.$2(e,fR[0],fR[1])}e.beginPath();Y.addMultilinePath(e,fE)};Y.$8=function(e){var fE=Math.sqrt(e.x*e.x+e.y*e.y);return{x:e.x/fE,y:e.y/fE}};Y.createMultiLinePath=function(e,fE){e.beginPath();Y.addMultilinePath(e,fE.multiLine)};Y.$3=function(e,fE,fF){if(BrowserSupport.BrowserSupport.CanvasLinePattern()){e.lineTo(fF.x,fF.y)}else{switch(e.get_linePattern()){case'dashed':{Y.$1(e,fE,fF,eD.defaultLineDashDashed[0],eD.defaultLineDashDashed[1]);break}case'dotted':{Y.$1(e,fE,fF,eD.defaultLineDashDotted[0],eD.defaultLineDashDotted[1]);break}case'solid':default:{e.lineTo(fF.x,fF.y);break}}}};Y.$1=function(e,fE,fF,fG,fH){var fI=e.get_lineWidth();fG=fI*fG;fH=fI*fH;e.moveTo(fE.x,fE.y);var fJ=false;var fK=fG;var fL=fE.x;var fM=fE.y;var fN=fF.x-fE.x;var fO=fF.y-fE.y;var fP=fN*fN+fO*fO;fP=Math.sqrt(fP);var fQ=fN/fP;var fR=fO/fP;while(fP>0){var fS=((fP>fK)?fK:fP);var fT=fL+fS*fQ;var fU=fM+fS*fR;if(fJ){e.moveTo(fT,fU)}else{e.lineTo(fT,fU)}fP-=fS;fK-=fS;if(fK===0){fJ=!fJ;fK=(fJ?fH:fG)}fL=fT;fM=fU}};Y.$5=function(e,fE){var fF=tab.DomUtil.parseWidthFromStyle(e.style);fF=(isNaN(fF)?fE:fF);return fF};Y.$4=function(e,fE){var fF=tab.DomUtil.parseHeightFromStyle(e.style);fF=(isNaN(fF)?fE:fF);return fF};Y.$6=function(e){return ss.Int32.trunc(e*100000)/100000};global.tab.CanvasRenderer=Y;var Z=function(){};Z.__typeName='tab.CanvasUtil';Z.sizeCanvasWithHighDPISupport=function(e,fE,fF){var fG=dR.calculatePixelRatio();Z.setCanvasSizeAndDensify(e,fG,fF);if(!tab.DoubleUtil.isApproximatelyEqual(fG,1)){Z.scaleCanvasDrawing(fE,fG)}};Z.setCanvasSizeAndDensify=function(e,fE,fF){if(ss.isValue(e)){var fG={w:ss.Int32.trunc(fF.w*fE),h:ss.Int32.trunc(fF.h*fE)};Z.densifyCanvasUsingSize(e,fG,fF)}};Z.densifyCanvasUsingSize=function(e,fE,fF){if(ss.isValue(e)&&ss.isValue(fE)&&ss.isValue(fF)){e.width=fE.w;e.height=fE.h;e.style.width=Z.$0(fF.w);e.style.height=Z.$0(fF.h)}};Z.scaleCanvasDrawing=function(e,fE){if(ss.isValue(e)){e.pixelRatio=fE;e.scale(fE,fE)}};Z.isOverCanvasSizeLimit=function(e,fE,fF){var fG=Math.floor(fF*e*fF*fE+0.5);return fG>tabBootstrap.ViewerBootstrap.get_canvasPixelLimit()};Z.canvasDensified=function(e){return!!e.style.height&&!ss.referenceEquals(e.style.height,Z.$0(e.height))};Z.$0=function(e){return e+'px'};global.tab.CanvasUtil=Z;var ba=function(){this.command=null;ss.EventArgs.call(this)};ba.__typeName='tab.CommandExecutedEventArgs';global.tab.CommandExecutedEventArgs=ba;var bb=function(){};bb.__typeName='tab.CommandsTelemetryUtils';bb.getMenuItemTelemetryInfoFromMenuAndCommands=function(e){if(ss.isNullOrUndefined(e.get_commands())){return null}var fE=[];var fF=[];bb.$0(e.get_commands(),e.get_menuPrefix(),fE,fF,e.get_menuTextMayBeSensitive());var fG=fw.getMenuItemsInFlatList(e.menuItems);var fH=_.filter(fG,function(fQ){return ss.referenceEquals(fQ.name,e.get_menuItem().name)});var fI=_.filter(fE,function(fQ){return ss.referenceEquals((new tab.CommandItemWrapper(fQ)).get_name(),e.get_menuItem().name)});var fJ=_.indexOf(fH,e.get_menuItem());var fK=fI[fJ];if(ss.isValue(fK)){var fL=new tab.CommandItemWrapper(fK);var fM=_.indexOf(fE,fK);var fN=fF[fM];var fO=fL.get_readId();var fP=new dg;fP.fullMenuItemName=fN;fP.set_menuItemPrefix(e.get_menuPrefix());fP.flatCommandItemList=fE;fP.set_commandIndexInFlattenedList(fM);fP.set_commandReadId(fO);fP.set_commandName(fL.get_commandName());return fP}return null};bb.$0=function(e,fE,fF,fG,fH){var fI=tab.CommandsPresModelWrapper.create(e);fI.get_commandItems().forEach(function(fJ){var fK=new tab.CommandItemWrapper(fJ);var fL=fK.get_readId();if(!fH&&ss.isNullOrUndefined(fL)&&ss.isValue(fK.get_name())){fL=fK.get_name()}var fM=bb.joinToPrefix(fE,fL,':');fF.push(fJ);fG.push(fM);if(ss.isValue(fK.get_commands())){bb.$0(fK.get_commands(),fM,fF,fG,fH)}})};bb.joinToPrefix=function(e,fE,fF){var fG=!ss.isNullOrEmptyString(e);var fH=!ss.isNullOrUndefined(fE)&&!ss.isNullOrEmptyString(fE);var fI=new ss.StringBuilder('');if(fG){fI.append(e)}if(fG&&fH){fI.append(fF)}if(fH){fI.append(fE)}return fI.toString()};global.tab.CommandsTelemetryUtils=bb;var bc=function(){this.$2=new tab.DisposableHolder};bc.__typeName='tab.CommonBannerProviderImpl';global.tab.CommonBannerProviderImpl=bc;var bd=function(){this.$2=new tab.DisposableHolder};bd.__typeName='tab.CommonDialogProviderImpl';bd.$0=function(){var e=document.createElement('div');return e};global.tab.CommonDialogProviderImpl=bd;var be=function(){};be.__typeName='tab.CommonDialogProviderTelemetry';be.$1=function(e,fE,fF){if(tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tab.FeatureFlags.isEnabled('WebErrorsOnlineTelemetry')){tab.OnlineAnalyticsClient.logEvent('Error.Alert',['Title',e,'Content',fE,'Links',(_.isArray(fF)?JSON.stringify(fF):'')])}};be.$0=function(e,fE){if(tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tab.FeatureFlags.isEnabled('WebErrorsOnlineTelemetry')){var fF=ss.coalesce(fE.ErrorType,'');var fG=ss.coalesce(fE.ErrorMessage,'');var fH=ss.coalesce(fE.RedirectUrl,'');tab.OnlineAnalyticsClient.logEvent('Error.DataSourceConnection',['Context',e,'ErrorType',fF,'Message',fG,'RedirectUrl',fH])}};global.tab.CommonDialogProviderTelemetry=be;var bf=function(){this.$2=null;this.$1=null;this.$2={};this.$1={}};bf.__typeName='tab.CompletionMonitor';bf.get_instance=function(){if(ss.isNullOrUndefined(bf.$0)){bf.$0=new bf}return bf.$0};global.tab.CompletionMonitor=bf;var bg=function(){};bg.__typeName='tab.CompletionMonitorType';global.tab.CompletionMonitorType=bg;var bh=function(e,fE){this.$0=null;this.completionMonitorType=0;this.completionMonitorType=e;this.$0=fE};bh.__typeName='tab.CompletionToken';global.tab.CompletionToken=bh;var bi=function(e,fE,fF){this.$3=null;this.$2=null;this.$1=null;this.$4=false;this.$5=null;this.$2$1=null;P.call(this);this.$3=e;this.$2=fE;this.$1=fF;this.$5=ss.mkdel(this,this.$0);this.$4=false;if(fF==='textscan'){var fG=tab.DataConnectionUtils.stripDirectoryFromPath(e);if(!ss.referenceEquals(fG,e)){this.$4=true}}};bi.__typeName='tab.ConnectionMissingFileDialog';global.tab.ConnectionMissingFileDialog=bi;var bj=function(e,fE){ss.makeGenericType(spiff.ReactSpiffAdapter$3,[bm,bk,Object]).call(this,tab.ObjectRegistry.newView(bm).call(null,[e.viewModel]),e,fE)};bj.__typeName='tab.CustomViewsComponent';global.tab.CustomViewsComponent=bj;var bk=function(){this.viewModel=null};bk.__typeName='tab.CustomViewsProps';global.tab.CustomViewsProps=bk;var bl=function(){this.customViewsArea=null;this.manageModeControlArea=null;this.myViewsArea=null;this.myViewsTitle=null;this.myViewsListArea=null;this.otherViewsTitle=null;this.otherViewsListArea=null;this.myViewsListWrapper=null;this.otherViewsListWrapper=null;this.saveViewArea=null;spiff.Template.call(this,$("\n<div class='tab-customViewsView tab-toolbarFlyout'>\n    <div class='tab-cv-flyoutSection tab-customViews-saveView' />\n    <div class='tab-cv-flyoutSection tab-cv-myViews'>\n        <div class='tab-toolbarFlyoutTitle'/>\n        <div class='tab-cv-listWrapper'>\n            <div class='tab-cv-viewsList'/>\n        </div>\n    </div>\n    <div class='tab-cv-flyoutSection tab-cv-otherViews'>\n        <div class='tab-toolbarFlyoutTitle'/>\n        <div class='tab-cv-listWrapper'>\n            <div class='tab-cv-viewsList'/>\n        </div>\n    </div>\n    <div class='tab-cv-flyoutSection tab-cv-manageModeControls' />\n</div>"));this.customViewsArea=this.domRoot;this.manageModeControlArea=this.getElementBySelector('.tab-cv-manageModeControls');this.myViewsArea=this.getElementBySelector('.tab-cv-myViews');this.myViewsListArea=this.getElementBySelector('.tab-cv-myViews .tab-cv-viewsList');this.myViewsTitle=this.getElementBySelector('.tab-cv-myViews .tab-toolbarFlyoutTitle');this.otherViewsTitle=this.getElementBySelector('.tab-cv-otherViews .tab-toolbarFlyoutTitle');this.otherViewsListArea=this.getElementBySelector('.tab-cv-otherViews .tab-cv-viewsList');this.myViewsListWrapper=this.getElementBySelector('.tab-cv-myViews .tab-cv-listWrapper');this.otherViewsListWrapper=this.getElementBySelector('.tab-cv-otherViews .tab-cv-listWrapper');this.saveViewArea=this.getElementBySelector('.tab-customViews-saveView')};bl.__typeName='tab.CustomViewsTemplate';global.tab.CustomViewsTemplate=bl;var bm=function(e){this.$15=null;this.$14=null;this.$12=null;this.$X=null;this.$Y=null;this.$Z=null;this.$10={};this.$11=null;this.$W=null;this.$13=null;ss.makeGenericType(spiff.BaseView$1,[bn]).call(this,e,new bl);this.$a();this.get_viewModel().add_customViewListChanged(ss.mkdel(this,this.$P));this.get_viewModel().updateCustomizedViews(null,null)};bm.__typeName='tab.CustomViewsView';global.tab.CustomViewsView=bm;var bn=function(){this.$t=null;this.$q=[];this.$r=[];this.$p=bn.modeSelect;this.$l=null;this.$m=null;this.$n=null;this.$o=false;this.$s=false;this.hideView=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;spiff.BaseViewModel.call(this);this.$t=new tab.CustomizedViewSession(tab.CommandController.get().legacySession);if(tsConfig.allow_custom_views){tab.StartupUtils.callOnceAfterInitialBootstrap(ss.mkdel(this,function(){this.$5(null,null)}));tab.DashboardModel.add_modifiedSheetsChanged(ss.mkdel(this,this.$9));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.DashboardModel.remove_modifiedSheetsChanged(ss.mkdel(this,this.$9))})))}};bn.__typeName='tab.CustomViewsViewModel';bn.$0=function(e,fE){return ss.compareStrings(e.name,fE.name,true)};global.tab.CustomViewsViewModel=bn;var bo=function(){};bo.__typeName='tab.DashboardAuthoringButtonTelemetry';bo.$1=function(){return tab.FeatureFlags.isEnabled('BasicButtonObjectTelemetry')&&tab.FeatureFlags.isEnabled('BasicButtonObject')};bo.logNavigateButtonByClickEvent=function(e,fE){bo.$0(bo.$4,['AuthoringMode',(e?bo.$3:bo.$7),'ClickType',(fE?bo.$2:bo.$6)])};bo.logNavigateButtonByKeyboardEvent=function(e){bo.$0(bo.$4,['AuthoringMode',(e?bo.$3:bo.$7),'ClickType',bo.$5])};bo.$0=function(e,fE){if(bo.$1()){tab.OnlineAnalyticsClient.logEvent(e,fE)}};global.tab.DashboardAuthoringButtonTelemetry=bo;var bp=function(){};bp.__typeName='tab.DashboardAuthoringObjectsPaneTelemetry';bp.logAddNewObjectToDashboardEvent=function(e,fE,fF){tab.OnlineAnalyticsClient.logEvent(bp.$3,['MethodAdded',(e?'dragDrop':'doubleClick'),'IsTiled',fE,'AddedObjectType',fF])};global.tab.DashboardAuthoringObjectsPaneTelemetry=bp;var bq=function(){};bq.__typeName='tab.DashboardLoadCompleteEventProperties';global.tab.DashboardLoadCompleteEventProperties=bq;var br=function(){};br.__typeName='tab.DashboardLoadCompleteTelemetry';br.$3=function(){return tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tab.FeatureFlags.isEnabled('DashboardLoadCompleteTelemetry')};br.track=function(e){if(ss.isValue(e)&&br.$3()){tab.ModuleManager.load(tab.IVizZoneModule).call(null,[]).done(function(fE){var fF=br.$0(e);var fG=br.$1(e,fE);var fH=fF.concat.apply(fF,fG);tab.OnlineAnalyticsClient.logEvent('Dashboard_LoadComplete',fH)})}};br.$0=function(e){if(ss.isNullOrUndefined(e.get_dashboardSize())){return[]}return['DashboardWidth',e.get_dashboardSize().w,'DashboardHeight',e.get_dashboardSize().h]};br.$1=function(e,fE){var fF=tab.ModelUtils.getVisualModelsFromDashboard(e);var fG=0;var fH=0;var fI=0;var fJ=0;var fK=new ss.ObjectEnumerator(fF);try{while(fK.moveNext()){var fL=fK.current();var fM=fL.value;var fN=fE.computeVizScrollCapabilities(fM);if(tab.ScrollCapabilitiesUtil.hasCapabilities(fN,3)){fG+=1}else if(tab.ScrollCapabilitiesUtil.hasCapabilities(fN,1)){fH+=1}else if(tab.ScrollCapabilitiesUtil.hasCapabilities(fN,2)){fI+=1}if(br.$2(fM)){fJ+=1}}}finally{fK.dispose()}return['BothScrollableVizCount',fG,'XScrollableVizCount',fH,'YScrollableVizCount',fI,'PannableMapCount',fJ,'VizCount',ss.getKeyCount(fF)]};br.$2=function(e){return e.get_isMap()&&e.get_vizNavigationSetting()!=='fixed'};global.tab.DashboardLoadCompleteTelemetry=br;var bs=function(e,fE){this.dashboardNode=null;spiff.Template.call(this,$(e));if(fE){this.dashboardNode=this.getElementBySelector('.tab-dashboard')}else{this.dashboardNode=this.domRoot}};bs.__typeName='tab.DashboardTemplate';bs.newDashboardTemplate=function(e){var fE=(e?"<div class='tab-gutter'><div id='tab-dashboard-region' class='tab-dashboard'/></div>":"<div id='tab-dashboard-region' class='tab-dashboard'/>");return new bs(fE,e)};global.tab.DashboardTemplate=bs;var bt=function(e){this.$e=null;ss.makeGenericType(spiff.BaseView$1,[bu]).call(this,e,bs.newDashboardTemplate(e.get_hasGutter()));this.$e=e;this.$e.add_formatsChanged(ss.mkdel(this,this.$9));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$e.remove_formatsChanged(ss.mkdel(this,this.$9))})));this.$e.add_newZone(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$e.remove_newZone(ss.mkdel(this,this.$a))})));this.$e.add_vizRebuildStart(ss.mkdel(this,this.$c));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$e.remove_vizRebuildStart(ss.mkdel(this,this.$c))})));this.$e.add_sizeChanged(ss.mkdel(this,this.$b));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$e.remove_sizeChanged(ss.mkdel(this,this.$b))})))};bt.__typeName='tab.DashboardView';bt.findDashboard=function(){return $('.tab-dashboard')};bt.uniquefyClonedFilterRadioElements=function(e){var fE=e.find('input:radio');for(var fF=0;fF<fE.length;++fF){var fG=fE[fF];var fH=ss.coalesce(fG.getAttribute('name'),'');fH+='_%%%CLONE%%%';fG.setAttribute('name',fH)}};global.tab.DashboardView=bt;var bu=function(e){this.$o={};this.$n=null;this.viewControllersBySheet={};this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.viewControllers=null;this.dashboardModel=null;this.gutter=null;spiff.BaseViewModel.call(this);this.gutter=tabBootstrap.ViewerBootstrap.get_instance().authoringGutter;this.dashboardModel=e;this.dashboardModel.zonesModel.add_newZone(ss.mkdel(this,this.$9));this.dashboardModel.add_newDashboard(ss.mkdel(this,this.$8));this.dashboardModel.add_activeZoneChanged(ss.mkdel(this,this.$7));this.dashboardModel.add_readyZoneChanged(ss.mkdel(this,this.$a));tab.SheetSession.add_sheetDataChanged(ss.mkdel(this,this.$m));tab.BaseSession.add_stateChanged(ss.mkdel(this,this.$i));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.BaseSession.remove_stateChanged(ss.mkdel(this,this.$i))})));this.disposables.add$1(new tab.CallOnDispose(tab.StyleUtil.clearDefaultStyleSheet));this.dashboardModel.add_renderModeChanged(ss.mkdel(this,this.$b));this.dashboardModel.add_sizeChanged(ss.mkdel(this,this.$h));this.dashboardModel.add_portSizeChanged(ss.mkdel(this,this.$g));this.dashboardModel.add_formatsChanged(ss.mkdel(this,this.$f));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.dashboardModel.remove_renderModeChanged(ss.mkdel(this,this.$b));this.dashboardModel.remove_sizeChanged(ss.mkdel(this,this.$h));this.dashboardModel.remove_portSizeChanged(ss.mkdel(this,this.$g));this.dashboardModel.remove_formatsChanged(ss.mkdel(this,this.$f))})));this.viewControllers=[];this.$2()};bu.__typeName='tab.DashboardViewModel';bu.new$1=function(e){return new bu(e)};global.tab.DashboardViewModel=bu;var bv=function(e,fE){React.Component.call(this,e,fE)};bv.__typeName='tab.DataAlertCreateComponent';global.tab.DataAlertCreateComponent=bv;var bw=function(){bF.call(this);this.successMessage=tab.Strings.DataAlertCreateSuccess;this.failureMessage=tab.Strings.DataAlertCreateFailure};bw.__typeName='tab.DataAlertCreatePersister';bw.new$1=function(){return new bw};global.tab.DataAlertCreatePersister=bw;var bx=function(e){this.$0=null;bG.call(this);this.$0=e};bx.__typeName='tab.DataAlertCreatePreparer';bx.new$1=function(e){return new bx(e)};global.tab.DataAlertCreatePreparer=bx;var by=function(e,fE){this.$G=null;this.$F=null;this.$E=null;this.$L=null;this.$K=false;this.$J=false;this.$H='';this.$I=null;this.users=null;this.$3$1=false;this.$3$2=false;ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]).call(this);this.set_emptySearch(true);if(tsConfig.is_guest){return}this.$F=e;this.$E=fE;this.$q();this.$o();this.refresh()};by.__typeName='tab.DataAlertCreateViewModel';by.new$1=function(e,fE){return new by(e,fE)};global.tab.DataAlertCreateViewModel=by;var bz=function(e,fE){this.$m=null;this.$o=null;this.$k=null;this.$l=null;this.$n=null;this.$q=null;this.$p=false;this.$3$1=null;this.dialogPosition=null;this.$3$2=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$q=e;this.$n=fE;e.add_showOrUpdateDialog(ss.mkdel(this,this.$g));this.$f();this.$g()};bz.__typeName='tab.DataAlertDialogViewModel';bz.get_instance=function(){return bz.$0};bz.new$1=function(e,fE){return new bz(e,fE)};bz.reinitDialogModelNotification=function(){var e=tab.DataAlertDialogModel.recreateInstance();tab.MiscUtil.dispose$1(bz.$0);bz.$0=bz.new$1(e,bC.editDataAlertId())};bz.handleDataAlertClick=function(e){bH.logAlertToolbarButtonClicked();if(!ss.isNullOrEmptyString(e)){bz.showNotificationAndLogError(e,'platformPropagatedError');return}tab.DataAlertClientCommands.newDataAlert(function(){bz.showNotificationAndLogError(tab.Strings.DataAlertInitFailure,'genericDataAlertInitError')})};bz.showNotificationAndLogError=function(e,fE){bH.logAlertToolbarButtonError(fE,e);ds.showNotification(e)};global.tab.DataAlertDialogViewModel=bz;var bA=function(e){this.$0='';bF.call(this);this.$0=e;this.successMessage=tab.Strings.DataAlertUpdateSuccess;this.failureMessage=tab.Strings.DataAlertUpdateFailure};bA.__typeName='tab.DataAlertEditPersister';bA.new$1=function(e){return new bA(e)};bA.getDifferenceInUserLists=function(e,fE){var fF=_.difference(fE.map(function(fJ){return fJ.id}),e.map(function(fJ){return fJ.id}));var fG=[];for(var fH=0;fH<fF.length;fH++){var fI={$:fF[fH]};ss.arrayAddRange(fG,fE.filter(ss.mkdel({id:fI},function(fJ){return fJ.id===this.id.$})))}return fG};bA.getOldUsersToRemove=function(e,fE){return bA.getDifferenceInUserLists(fE,e)};global.tab.DataAlertEditPersister=bA;var bB=function(e,fE){this.$7=null;this.$5=false;this.$6=false;bG.call(this);this.dataAlert=new tab.DataAlert.$ctor1(e);this.$7=fE};bB.__typeName='tab.DataAlertEditPreparer';bB.new$1=function(e,fE){return new bB(e,fE)};global.tab.DataAlertEditPreparer=bB;var bC=function(){};bC.__typeName='tab.DataAlertEditUrlHelper';bC.isDataAlertEdit=function(){var e=bC.editDataAlertId();if(ss.isNullOrEmptyString(e)){return false}return true};bC.editDataAlertId=function(){var e=tabBootstrap.Utility.get_urlLocationSearchParams()[bC.editDataAlertUrlParam];return(ss.isNullOrEmptyString(e)?'':e)};global.tab.DataAlertEditUrlHelper=bC;var bD=function(e){spiff.PureRenderComponent.call(this,e)};bD.__typeName='tab.DataAlertErrorComponent';global.tab.DataAlertErrorComponent=bD;var bE=function(e,fE){this.$b=null;this.$a=null;this.$9=null;this.$3$1=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$b=e;this.$a=fE;this.$7()};bE.__typeName='tab.DataAlertErrorViewModel';global.tab.DataAlertErrorViewModel=bE;var bF=function(){this.successMessage=null;this.failureMessage=null;this.$1$1=null;this.$1$2=null};bF.__typeName='tab.DataAlertPersisterBase';global.tab.DataAlertPersisterBase=bF;var bG=function(){this.dataAlert=null;this.$1$1=null;this.$1$2=null};bG.__typeName='tab.DataAlertPreparerBase';global.tab.DataAlertPreparerBase=bG;var bH=function(){};bH.__typeName='tab.DataAlertTelemetry';bH.logAlertToolbarButtonClicked=function(){tab.OnlineAnalyticsClient.logEvent('DataAlert_CreateAlertButtonClicked',['ErrorMessageType','createAlertButtonClicked'])};bH.logAlertToolbarButtonError=function(e,fE){tab.OnlineAnalyticsClient.logEvent('DataAlert_CreateAlertButtonClicked',['ErrorMessageType',e,'ErrorMessageString',fE])};bH.logSubmitOrCloseButtonClickedEvent=function(e){tab.OnlineAnalyticsClient.logEvent('DataAlert_CloseOrSubmitButtonClicked',e)};global.tab.DataAlertTelemetry=bH;var bI=function(){};bI.__typeName='tab.DataAlertTelemetryConstants';global.tab.DataAlertTelemetryConstants=bI;var bJ=function(e,fE){this.dataHighlighterViewModel=null;this.$l=null;this.$m=null;this.dataHighlighterContentElement=null;this.dataHighlighterViewRootElement=null;this.zoneTitleRegionRootElement=null;this.$p=null;this.queryDelayTimer=null;this.currentListPopulationMode=0;this.notShownResultsListItemIsVisible=false;this.$o=false;this.$n=null;ss.makeGenericType(spiff.BaseView$1,[bL]).call(this,e,fE);this.dataHighlighterViewModel=e;this.$m=fE.domRoot;this.dataHighlighterContentElement=fE.get_dataHighlighterContentElement();this.dataHighlighterViewRootElement=fE.get_dataHighlighterViewRootElement();this.zoneTitleRegionRootElement=fE.get_zoneTitleRegionRootElement();this.$l=tab.ObjectRegistry.newWidget(spiff.CompositeSearchWidget).call(null);this.dataHighlighterViewRootElement.append(this.$l.get_domRoot());this.$l.addClass('tabDataHighlighterView-searchControlsContainer');this.get_compositeSearchWidget().setPlaceholderText(this.get_viewModel().get_searchPlaceholderString());if(!ss.isNullOrUndefined(this.get_viewModel().get_searchText())&&this.get_viewModel().get_searchText().length>0){this.get_compositeSearchWidget().get_textInputView().get_inputElement().toggleClass('tabDataHighlighterViewInactiveText',!this.get_viewModel().get_isActive());this.get_compositeSearchWidget().setSearchText(this.get_viewModel().get_searchText())}this.$k();this.get_compositeSearchWidget().add_inputTextChanged(ss.mkdel(this,this.$a));this.get_compositeSearchWidget().add_textInputElementClicked(ss.mkdel(this,this.handleTextInputElementClicked));this.get_compositeSearchWidget().add_listItemClicked(ss.mkdel(this,this.handleListItemSelected));this.get_compositeSearchWidget().add_textInputSearchButtonClicked(ss.mkdel(this,this.handleSearchButtonClicked));this.get_compositeSearchWidget().add_textInputClearButtonClicked(ss.mkdel(this,this.handleClearButtonClicked));this.get_compositeSearchWidget().get_textInputView().add_enterKeyPressed(ss.mkdel(this,this.handleEnterKeyPress));this.get_compositeSearchWidget().get_textInputView().add_escapeKeyPressed(ss.mkdel(this,this.handleEscapeKeyPress));this.dataHighlighterViewModel.add_receivedSearchQueryResults(ss.mkdel(this,this.handleNewSearchQueryResults));this.dataHighlighterViewModel.add_titleChanged(ss.mkdel(this,this.handleTitleChanged));this.dataHighlighterViewModel.add_searchTextChanged(ss.mkdel(this,this.handleSearchTextChanged));this.dataHighlighterViewModel.add_isActiveChanged(ss.mkdel(this,this.handleIsActiveChanged));this.dataHighlighterViewModel.add_domainItemsChanged(ss.mkdel(this,this.$9));this.disposables.add$1(spiff.EventUtil.bindWithDispose(this.get_compositeSearchWidget().get_textInputView().get_inputElement(),'focus',ss.mkdel(this,this.$b)));this.disposables.add$1(spiff.EventUtil.bindWithDispose(this.get_compositeSearchWidget().get_textInputView().get_inputElement(),'focusout',ss.mkdel(this,this.$c)));this.disposables.add$1(spiff.EventUtil.bindWithDispose(this.get_compositeSearchWidget().get_textInputView().get_inputElement(),'mouseup',ss.mkdel(this,this.$d)));this.disposables.add$1(spiff.EventUtil.bindWithDispose(this.get_compositeSearchWidget().get_textInputView().get_inputElement(),'touchend',ss.mkdel(this,this.$d)));this.setTitleFromModel();this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_compositeSearchWidget().removeList();this.get_compositeSearchWidget().remove_inputTextChanged(ss.mkdel(this,this.$a));this.get_compositeSearchWidget().remove_textInputElementClicked(ss.mkdel(this,this.handleTextInputElementClicked));this.get_compositeSearchWidget().remove_listItemClicked(ss.mkdel(this,this.handleListItemSelected));this.get_compositeSearchWidget().remove_textInputSearchButtonClicked(ss.mkdel(this,this.handleSearchButtonClicked));this.get_compositeSearchWidget().remove_textInputClearButtonClicked(ss.mkdel(this,this.handleClearButtonClicked));this.get_compositeSearchWidget().get_textInputView().remove_enterKeyPressed(ss.mkdel(this,this.handleEnterKeyPress));this.get_compositeSearchWidget().get_textInputView().remove_escapeKeyPressed(ss.mkdel(this,this.handleEscapeKeyPress));this.dataHighlighterViewModel.remove_receivedSearchQueryResults(ss.mkdel(this,this.handleNewSearchQueryResults));this.dataHighlighterViewModel.remove_titleChanged(ss.mkdel(this,this.handleTitleChanged));this.dataHighlighterViewModel.remove_searchTextChanged(ss.mkdel(this,this.handleSearchTextChanged));this.dataHighlighterViewModel.remove_isActiveChanged(ss.mkdel(this,this.handleIsActiveChanged));this.dataHighlighterViewModel.remove_domainItemsChanged(ss.mkdel(this,this.$9));this.$g()})))};bJ.__typeName='tab.DataHighlighterView';global.tab.DataHighlighterView=bJ;var bK=function(){};bK.__typeName='tab.DataHighlighterView$ListPopulationMode';global.tab.DataHighlighterView$ListPopulationMode=bK;var bL=function(e,fE,fF){this.$5=null;this.$a=null;this.$b=null;this.$8=null;this.$7=false;this.$9=null;this.$6=null;this.lastSatisfiedSearchTerm=null;this.lastSatisfiedSearchResults=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;spiff.BaseViewModel.call(this);this.$5=e;this.$a=fE;this.$8=fF;this.$7=this.$5.get_isActive();this.set_searchText(this.$5.get_searchText());this.$6=ss.arrayClone(this.$5.get_fullDomainItemSet().dataHighlighterItems);if(ss.isValue(this.$8)){if(ss.isValue(this.$8.get_model().pm)&&this.$8.get_hasTitle()){this.$b=this.$8.get_model().pm.zoneTitle}this.$8.add_updateZone(ss.mkdel(this,this.$4));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$8.remove_updateZone(ss.mkdel(this,this.$4))})))}this.$5.add_newDataHighlighterPresModel(ss.mkdel(this,this.$3));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$5.remove_newDataHighlighterPresModel(ss.mkdel(this,this.$3))})))};bL.__typeName='tab.DataHighlighterViewModel';bL.$0=function(e,fE){if(e.length!==fE.length){return true}else{for(var fF=0;fF<e.length;fF++){if(!ss.referenceEquals(e[fF].text,fE[fF].text)){return true}}}return false};global.tab.DataHighlighterViewModel=bL;var bM=function(){this.$1=null;this.$2=null;this.$3=null;spiff.Template.call(this,$("\n            <div class='tabDataHighlighterContainer'>\n                <div class='tab-zone-titleregion' />\n                <div class='tabDataHighlighterContent'>\n                    <div class='tabDataHighlighterView'/>\n                </div>\n            </div>"));this.$1=this.domRoot.find('.tabDataHighlighterContent');this.$2=this.domRoot.find('.tabDataHighlighterView');this.$3=this.domRoot.find('.tab-zone-titleregion')};bM.__typeName='tab.DataHighlighterViewTemplate';global.tab.DataHighlighterViewTemplate=bM;var bN=function(e,fE,fF){this.$1=null;O.call(this,e,fE,fF);this.$1=new cd(tab.Strings.AuthenticationRequired,e.RedirectUrl,'dse-frame')};bN.__typeName='tab.DataSourceConnectionErrorDialog';global.tab.DataSourceConnectionErrorDialog=bN;var bO=function(e){this.$q=0;this.$C=null;this.$y=null;this.$r=null;this.$p=null;this.$B=null;this.$u=null;this.$v=null;this.$s=null;this.$t=null;this.$x=null;this.$A=null;this.$z=null;this.$w=null;this.$E=null;this.$D=null;this.$F=false;spiff.Widget.call(this,$('<span>'));this.$q=e.firstDayOfWeek;this.$C=e.shortDayOfWeekNames;this.$D=e.todayFormatTemplate;this.$y=e.monthYearFormatter;this.$r=e.fullDateFormatter;this.$F=false;var fE=new Date;this.$p=bO.$4(bO.$2(e.monthToShow)||fE);this.$B=bO.$2(e.dateToSelect);this.setDateRange(e.minDate,e.maxDate);this.element.addClass('tab-datepicker');this.$d().appendTo(this.element);var fF=$('<div>').addClass('tab-datepicker-month-table-wrapper').append($('<div>').addClass('tab-datepicker-week-shade')).append(this.$e());fF.appendTo(this.element);this.$c().appendTo(this.element);this.element.mousedown(function(fG){spiff.EventUtil.stopEvent(fG)});this.$l()};bO.__typeName='tab.DatePicker';bO.$2=function(e){return(!!e?new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()):null)};bO.$3=function(e){return(!!e?new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())):null)};bO.$4=function(e){return(!!e?new Date(e.getFullYear(),e.getMonth(),1):null)};bO.$1=function(e,fE,fF,fG){if(e+fE>fG){e=fG-fE;if(e<fF){e+=Math.ceil((fF-e)/2)}}return e};bO.$0=function(e,fE){return(e+fE+14)%7};bO.$5=function(e,fE){return e.getFullYear()===fE.getFullYear()&&e.getMonth()===fE.getMonth()&&e.getDate()===fE.getDate()};global.tab.DatePicker=bO;var bP=function(e,fE,fF,fG,fH,fI,fJ,fK,fL){this.monthToShow=null;this.dateToSelect=null;this.minDate=null;this.maxDate=null;this.firstDayOfWeek=0;this.shortDayOfWeekNames=null;this.todayFormatTemplate=null;this.monthYearFormatter=null;this.fullDateFormatter=null;this.monthToShow=(ss.isNullOrUndefined(e)?null:new Date(e.getTime()));this.dateToSelect=(ss.isNullOrUndefined(fE)?null:new Date(fE.getTime()));this.minDate=(ss.isNullOrUndefined(fF)?null:new Date(fF.getTime()));this.maxDate=(ss.isNullOrUndefined(fG)?null:new Date(fG.getTime()));this.firstDayOfWeek=ss.coalesce(fH,0);this.shortDayOfWeekNames=(ss.isNullOrUndefined(fI)?['S','M','T','W','T','F','S']:ss.arrayClone(fI));this.todayFormatTemplate=(ss.isNullOrUndefined(fJ)?'Today: {0}':fJ);this.monthYearFormatter=(ss.isNullOrUndefined(fK)?function(fM){return ss.localeFormatDate(bO.$2(fM),'MMMM yyyy')}:fK);this.fullDateFormatter=(ss.isNullOrUndefined(fL)?function(fM){return ss.localeFormatDate(bO.$2(fM),'MMMM d, yyyy')}:fL)};bP.__typeName='tab.DatePickerSettings';global.tab.DatePickerSettings=bP;var bQ=function(){};bQ.__typeName='tab.DetailedErrorDialog';bQ.$1=function(e){var fE=ss.arrayClone(ss.netSplit(e,['<br>','<br/>','\r\n','\r','\n','<li>','<ul>','</ul>'],null,1));var fF=fE[0];ss.remove(fE,fF);var fG=[];ss.arrayInsertRange(fG,0,fE);var fH=fG;return{item1:fF,item2:fH}};bQ.$0=function(e){var fE={};if(ss.isValue(e)){for(var fF=0;fF<e.length;fF++){var fG=e[fF];fE[fG.displayText]=fG.url}}return fE};bQ.show=function(e,fE,fF){var fG=bQ.$1(e);var fH=bQ.$0(fF);var fI={errorDialogTitle:fE,errorShortMessage:fG.item1,errorDetails:Array.prototype.slice.call(fG.item2),errorCodeId:0,errorHelpLink:'https://www.tableau.com/support/',issueHelperLinks:JSON.stringify(fH),queryDetails:'',useCopyCommand:false};var fJ='doc:update-detailed-error-dialog-event';try{tab.ApplicationModel.get_instance().raiseNotification(fJ,fI,null)}catch(fK){var exception=ss.Exception.wrap(fK);tab.ErrorTrace.report(new ss.Exception('Error when showing the error dialog.',exception))}};global.tab.DetailedErrorDialog=bQ;var bR=function(){this.$2$1=null;spiff.BaseViewModel.call(this)};bR.__typeName='tab.DevicePreviewViewModel';bR.get_isDevicePreviewMode=function(){return tab.FeatureParamsLookup.getBool(57)};bR.getZoomRatio=function(e,fE){var fF=0.25;var fG=e/fE;if(fG<fF){fG=fF}if(fG>1){fG=1}return fG};global.tab.DevicePreviewViewModel=bR;var bS=function(){React.Component.call(this)};bS.__typeName='tab.DialogHostComponent';global.tab.DialogHostComponent=bS;var bT=function(){this.$8=false;this.$7=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this)};bT.__typeName='tab.DialogHostViewModel';global.tab.DialogHostViewModel=bT;var bU=function(){};bU.__typeName='tab.DisabledTooltipBehavior';global.tab.DisabledTooltipBehavior=bU;var bV=function(e,fE){ss.makeGenericType(spiff.ReactSpiffAdapter$3,[bZ,bX,Object]).call(this,tab.ObjectRegistry.newView(bZ).call(null,[e.viewModel]),e,fE)};bV.__typeName='tab.DownloadComponent';global.tab.DownloadComponent=bV;var bW=function(e,fE,fF,fG){this.$4=null;this.$3=null;this.$5=null;this.$6=null;this.$2=null;tab.Param.verifyString(e,'title');tab.Param.verifyString(fE,'message');tab.Param.verifyString(fF,'url');tab.Param.verifyString(fG,'urlTarget');this.$4=e;this.$3=fE;this.$5=fF;this.$6=fG};bW.__typeName='tab.DownloadFileDialog';bW.$0=function(e){var fE=React.createElement(SharedWidgets.ButtonWidget,{handleClick:function(fG){e()},buttonType:1,testId:'CancelBtn',label:tab.Strings.DialogButtonCancel});var fF=spiff.DOMElements.div({key:'cancel-button-wrapper-key',children:fE});return fF};global.tab.DownloadFileDialog=bW;var bX=function(){this.viewModel=null};bX.__typeName='tab.DownloadProps';global.tab.DownloadProps=bX;var bY=function(){this.downloadArea=null;this.menuArea=null;this.applicationArea=null;this.explanationTitle=null;this.explanationBody=null;this.actionArea=null;this.availablePlatforms=null;this.downloadAppButton=null;spiff.Template.call(this,$("<div class='tab-downloadView tab-toolbarFlyout'><div class='tab-downloadApplication'><div class='tab-explanationTitle' /><div class='tab-explanationBody' /><div class='tab-downloadAction'><div class='tab-availablePlatforms' /><div class='tab-downloadAppButton' /></div></div><div class='tab-downloadButtons'></div></div>"));this.downloadArea=this.domRoot;this.menuArea=this.getElementBySelector('.tab-downloadButtons');this.applicationArea=this.getElementBySelector('.tab-downloadApplication');this.explanationTitle=this.getElementBySelector('.tab-explanationTitle');this.explanationBody=this.getElementBySelector('.tab-explanationBody');this.actionArea=this.getElementBySelector('.tab-downloadAction');this.availablePlatforms=this.getElementBySelector('.tab-availablePlatforms');this.downloadAppButton=this.getElementBySelector('.tab-downloadAppButton');if(tsConfig.is_mobile){this.downloadArea.addClass('tab-mobileDownloadView')}};bY.__typeName='tab.DownloadTemplate';global.tab.DownloadTemplate=bY;var bZ=function(e){this.$i=null;this.$h=null;this.$g=null;this.$j=false;ss.makeGenericType(spiff.BaseView$1,[ca]).call(this,e,new bY);this.$i=e;this.$j=Math.min(tabBootstrap.ViewerBootstrap.get_instance().getWebClientDashboardContainerSize(tsConfig.current_sheet_type).w,window.innerWidth)<715;if(this.$j){this.get_dom().downloadArea.addClass('tab-narrowDownloadView')}this.$a()};bZ.__typeName='tab.DownloadView';global.tab.DownloadView=bZ;var ca=function(){this.$2$1=null;spiff.BaseViewModel.call(this)};ca.__typeName='tab.DownloadViewModel';global.tab.DownloadViewModel=ca;var cb=function(e){spiff.ModalDialog.$ctor1.call(this,e,$('<span></span>'))};cb.__typeName='tab.DynamicallyLoadedContentDialog';global.tab.DynamicallyLoadedContentDialog=cb;var cc=function(e,fE){this.$P=null;cb.call(this,e);this.$P=fE;this.get_dialogElement().addClass('tab-dsauthdlg tab-dsauthdlg-small')};cc.__typeName='tab.DynamicallyLoadedContentIntoDomDialog';global.tab.DynamicallyLoadedContentIntoDomDialog=cc;var cd=function(e,fE,fF){this.$P=null;this.urlToLoadDialogContent=null;cb.call(this,e);this.$P=fF;this.urlToLoadDialogContent=fE;this.get_dialogElement().addClass('tab-dsauthdlg tab-dsauthdlg-tall')};cd.__typeName='tab.DynamicallyLoadedContentIntoIframeDialog';global.tab.DynamicallyLoadedContentIntoIframeDialog=cd;var ce=function(e){this.$2=null;this.$3=false;this.$2$1=null;P.call(this);this.$2=e};ce.__typeName='tab.EditConnectionInformationDialog';global.tab.EditConnectionInformationDialog=ce;var cf=function(){};cf.__typeName='tab.EmailValidator';cf.validate=function(e){if(ss.isNullOrEmptyString(e)){return false}if(e.length>cf.maxEmailLength){return false}var fE=new RegExp('^[^\\s"(),:;<>@[\\]]+@([-a-z0-9]+\\.)+[a-z0-9]{2,}$','i');return fE.test(e)};global.tab.EmailValidator=cf;var cg=function(){this.content=null;spiff.Template.call(this,$("<div class='tab-extension-empty'></div>"))};cg.__typeName='tab.EmptyExtensionTemplate';global.tab.EmptyExtensionTemplate=cg;var ch=function(){spiff.Template.call(this,$("<div class='tab-EmptyFloatingLayout'></div>"));this.domRoot.text(tab.Strings.EmptyFloatingLayoutMessage)};ch.__typeName='tab.EmptyFloatingLayoutTemplate';global.tab.EmptyFloatingLayoutTemplate=ch;var ci=function(e){ss.makeGenericType(spiff.BaseView$1,[cj]).call(this,e,new ch)};ci.__typeName='tab.EmptyFloatingLayoutView';global.tab.EmptyFloatingLayoutView=ci;var cj=function(e){spiff.BaseViewModel.call(this);e.add_childrenAdded(ss.mkdel(this,this.onChildrenAdded));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){e.remove_childrenAdded(ss.mkdel(this,this.onChildrenAdded))})))};cj.__typeName='tab.EmptyFloatingLayoutViewModel';global.tab.EmptyFloatingLayoutViewModel=cj;var ck=function(){this.eventHandler=null;this.onTabSelectHandle=null;this.zoneBecameValidHandler=null};ck.__typeName='tab.EventHandlerParam';global.tab.EventHandlerParam=ck;var cl=function(){this.$0=null;this.$0={}};cl.__typeName='tab.ExportHelper';global.tab.ExportHelper=cl;var cm=function(e){this.$1=null;spiff.Template.call(this,$('<div><iframe></iframe></div>'));this.$1=e;this.get_frame().prop('name',this.$1);this.get_frame().prop('id',this.$1);var fE={position:'absolute',top:0+'px',left:0+'px'};this.get_container().css(fE);this.get_frame().css({border:'0px none'})};cm.__typeName='tab.ExtensionIFrameTemplate';global.tab.ExtensionIFrameTemplate=cm;var cn=function(e){this.content=null;spiff.Template.call(this,$(ss.formatString("<div class='tab-extension-error'>{0}</div>",e)));var fE={'text-align':'center'};this.domRoot.css(fE)};cn.__typeName='tab.ExtensionLoadErrorTemplate';global.tab.ExtensionLoadErrorTemplate=cn;var co=function(){this.content=null;spiff.Template.call(this,$("<div class='tab-extension'></div>"))};co.__typeName='tab.ExtensionZoneTemplate';global.tab.ExtensionZoneTemplate=co;var cp=function(e,fE){this.$n=null;this.$l=null;this.$m=null;this.$k=null;ss.makeGenericType(spiff.BaseView$1,[cq]).call(this,e,new co);this.$n=fE;this.get_viewModel().add_extensionZoneUpdated(ss.mkdel(this,this.$b));this.$n.add_propertyChanged(ss.mkdel(this,this.$g));this.$n.add_resizeZone(ss.mkdel(this,this.$c));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_extensionZoneUpdated(ss.mkdel(this,this.$b));this.$n.remove_propertyChanged(ss.mkdel(this,this.$g));this.$n.remove_resizeZone(ss.mkdel(this,this.$c))})));this.$k=tab.ModuleManager.load$1('@tableau/api-platform-js',[]).pipe(function(fF){return fF})};cp.__typeName='tab.ExtensionZoneView';global.tab.ExtensionZoneView=cp;var cq=function(e,fE){this.$9=null;this.$c=null;this.$a=false;this.$b='initial';this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.$9=e;this.$c=fE;this.$9.add_extensionZoneUpdated(ss.mkdel(this,this.handleExtensionZoneUpdated));tab.ApplicationModel.get_instance().get_extensionPermissionsCache().add_updated(ss.mkdel(this,this.$4));if(!this.get_isEmpty()){this.$6()}this.disposables.add(ss.mkdel(this,function(){this.$9.remove_extensionZoneUpdated(ss.mkdel(this,this.handleExtensionZoneUpdated))}));this.disposables.add(ss.mkdel(this,function(){tab.ApplicationModel.get_instance().get_extensionPermissionsCache().remove_updated(ss.mkdel(this,this.$4))}))};cq.__typeName='tab.ExtensionZoneViewModel';global.tab.ExtensionZoneViewModel=cq;var cr=function(e){this.$3=null;this.$2=null;spiff.PureRenderComponent.call(this,e);this.$3=ss.mkdel(this,function(fE){this.$2=fE;this.$1()})};cr.__typeName='tab.FilePickerComponent';global.tab.FilePickerComponent=cr;var cs=function(){this.allowedFileExtensions=null;this.allowMulti=false};cs.__typeName='tab.FilePickerConfig';global.tab.FilePickerConfig=cs;var ct=function(e,fE){this.$6=null;this.$7=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$6=e;this.$7=fE};ct.__typeName='tab.FilePickerViewModel';ct.createFilePickerViewModel=function(e,fE){return new ct(e,fE)};global.tab.FilePickerViewModel=ct;var cu=function(e){el.call(this,e)};cu.__typeName='tab.FileReconnectWidget';global.tab.FileReconnectWidget=cu;var cv=function(){};cv.__typeName='tab.FontMetricsLogger';cv.logUIStabilized=function(){cv.$0('UI Stabilized')};cv.logFontsLoaded=function(){cv.$0('AllFontsDownloaded')};cv.$0=function(e){var fE={};fE['t']=tabBootstrap.MetricsController.getTiming();fE['d']=e;var fF=new tabBootstrap.MetricsEvent('gen',128,fE);tabBootstrap.MetricsController.logEvent(fF)};global.tab.FontMetricsLogger=cv;var cw=function(){this.normalizeFont=null;this.normalizeFont=(BrowserSupport.BrowserSupport.IsIE()?cw.$0:cw.$2)};cw.__typeName='tab.FontNormalizer';cw.instance=function(){if(ss.isNullOrUndefined(cw.$4)){cw.$4=new cw;cw.$1()}return cw.$4};cw.$0=function(e){if(tab.MiscUtil.isNullOrEmpty$3(e)){return e}var fE=e.split(' ');var fF;var fG=false;for(var fH=0;fH<fE.length;++fH){fF=cw.$3[fE[fH]];if(!(typeof(fF)==='undefined')){fG=true;fE[fH]=fF}}if(fG){return fE.join(' ')}return e};cw.$2=function(e){return e};cw.$1=function(){if(ss.isValue(cw.$3)){return}if(BrowserSupport.BrowserSupport.IsIE()){cw.$3={};cw.$3['華康中明體']='DLCMingMedium';cw.$3['華康粗明體']='DLCMingBold';cw.$3['細明體']='Ming Light';cw.$3['新細明體']='PMingLiU';cw.$3['細明體-ExtB']='MingLiU-ExtB';cw.$3['新細明體-ExtB']='PMingLiU-ExtB';cw.$3['MS宋体']='MS Song';cw.$3['新宋体']='NSimSun';cw.$3['中易宋体']='SimSun';cw.$3['宋体']='SimSun';cw.$3['宋体-18030']='SimSun-18030';cw.$3['新宋体-18030']='NSimSun-18030';cw.$3['宋体–方正超大字符集']='SimSun (Founder Extended)';cw.$3['宋體ExtA']='SimSun-ExtA';cw.$3['宋體ExtB']='SimSun-ExtB';cw.$3['华文宋体']='STSong';cw.$3['华文中宋']='STZhongsong';cw.$3['ＭＳ']='MS';cw.$3['明朝']='Mincho';cw.$3['Ｐ明朝']='PMincho';cw.$3['平成明朝']='Heisei Minchō';cw.$3['リュウミン']='Ry­ūbundō Minchō';cw.$3['小塚明朝']='Kozuka Minchō';cw.$3['바탕']='Batang';cw.$3['바탕체']='BatangChe';cw.$3['궁서']='Gungsuh';cw.$3['궁서체']='GungsuhChe';cw.$3['华文细黑']='STHeiti Light';cw.$3['微軟正黑體']='Microsoft JhengHei';cw.$3['微软雅黑']='Microsoft YaHei';cw.$3['MS黑体']='MS Hei';cw.$3['蒙纳黑体']='MHei';cw.$3['中易黑体']='SimHei';cw.$3['メイリオ']='Meiryo';cw.$3['ゴシック']='Gothic';cw.$3['Ｐゴシック']='PGothic';cw.$3['돋움']='Dotum';cw.$3['돋움체']='DotumChe';cw.$3['굴림']='Gulim';cw.$3['굴림체']='GulimChe';cw.$3['맑은']='Malgun';cw.$3['고딕']='Gothic';cw.$3['새굴림']='New Gulim';cw.$3['標楷體']='KaiU';cw.$3['中易楷体']='SimKai';cw.$3['楷体_GB2312']='SimKai';cw.$3['华文楷体']='STKaiti';cw.$3['中易隶书']='SimLi';cw.$3['隶书']='SimLi';cw.$3['中易仿宋']='SimFang';cw.$3['仿宋']='SimFang';cw.$3['幼圆']='SimYou';cw.$3['华文行楷']='HuaWen Xingkai';cw.$3['华文彩云']='HuaWen CaiYun';cw.$3['方正舒体']='FangZheng ShuTi';cw.$3['方正启体']='FangZheng QiTi';cw.$3['汉仪雪君体']='HanYi XueJun';cw.$3['華康少女體']='HuaKang ShaoNu';cw.$3['華康娃娃體']='HuaKang WuaWua'}};global.tab.FontNormalizer=cw;var cx=function(){};cx.__typeName='tab.FormattingTelemetryClient';cx.logRichTextEditorEvent=function(e){if(tab.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry')){tab.OnlineAnalyticsClient.logEvent('Formatting.RichTextEditing',e)}};cx.logPerformanceEvent=function(e){if(tab.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry')){tab.OnlineAnalyticsClient.logEvent('Formatting_Performance',e)}};global.tab.FormattingTelemetryClient=cx;var cy=function(e,fE){spiff.Widget.call(this,$('<div class="auth-box ocontent tb-data-source-error-container" role="alert"> \n                                                              <div class="tb-data-source-error"></div>\n                                                              <div class="tb-data-source-error-sub"></div>\n                                                              <div class="tab-UnifiedButton bordered tb-data-source-btn tb-data-source-button-retry" tabindex="0" role="button"></div>\n                                                              <div class="tab-data-source-msg"><textarea readonly class="tb-data-source-error-message"></textarea></div>\n                                                            </div>'));$('.tb-data-source-error',this.element).text(tab.Strings.DataSourceGenericErrorMsg);$('.tb-data-source-error-sub',this.element).text(tab.Strings.DataSourceGenericErrorSubMsg);var fF=$('.tb-data-source-button-retry',this.element);fF.text(tab.Strings.DataSourceGenericErrorButtonLabel);fF.on('click',function(fG){if(ss.isValue(fE)){fE()}});fF.on('keypress',function(fG){if(fG.which===13||fG.which===32){if(ss.isValue(fE)){fE()}fG.stopPropagation()}});e=ss.replaceAllString(e,'<br>','\r\n');$('.tb-data-source-error-message',this.element).text(e)};cy.__typeName='tab.GenericDataSourceErrorWidget';global.tab.GenericDataSourceErrorWidget=cy;var cz=function(e,fE,fF){this.$2=tab.Strings.DataSourceGenericTitle;this.$1=null;O.call(this,e,fE,fF);var fG=ss.mkdel(this,function(){if(ss.isValue(this.onProceed)){this.onProceed()}this.cleanup(null)});var fH=new cy(this.dataSourceConnectionAttemptErrorResponse.ErrorMessage,fG);this.$1=new cc(this.$2,fH.element);this.$1.add_closed(ss.mkdel(this,function(fI,fJ){this.$0()}))};cz.__typeName='tab.GenericDataSourceExceptionDialogWidget';global.tab.GenericDataSourceExceptionDialogWidget=cz;var cA=function(e,fE,fF){this.$1=null;N.call(this,e,fF);this.$1=fE};cA.__typeName='tab.GenericDataSourceExceptionOverlayWidget';global.tab.GenericDataSourceExceptionOverlayWidget=cA;var cB=function(e){dr.call(this,e);this.adjustMargin=false;this.element.addClass('tabGeoLocationNotification');if(ss.isValue(this.notificationViewModel.get_displayPosition())){this.messageDom.parent().css('left',this.notificationViewModel.get_displayPosition().x+'px');this.messageDom.parent().css('top',this.notificationViewModel.get_displayPosition().y+'px')}this.updateContent()};cB.__typeName='tab.GeoLocationNotificationView';global.tab.GeoLocationNotificationView=cB;var cC=function(e){this.$0=null;tab.GlobalKeyboardShortcut.call(this);this.$0=e};cC.__typeName='tab.HelpKeyboardShortcut';global.tab.HelpKeyboardShortcut=cC;var cD=function(){};cD.__typeName='tab.HitTargetColliders';global.tab.HitTargetColliders=cD;var cE=function(){};cE.__typeName='tab.HitTargetType';global.tab.HitTargetType=cE;var cF=function(){cZ.call(this,"<div class='tabCatLegendScrollButtonHolder'><span class='tabCatLegendScrollPrev'/><span class='tabCatLegendScrollNext'/></div>")};cF.__typeName='tab.HorizontalIteratorButtonTemplate';global.tab.HorizontalIteratorButtonTemplate=cF;var cG=function(e){spiff.Template.call(this,$("<div class='webZoneHttpsEmbedHttpAuthoring'><div class='message'></div><div class='url'><span>(</span><span class='scheme'>http://</span><span class='path'></span><span>)</span></div></div>"));this.$1().text(tab.Strings.WebZoneHttpsEmbedHttpAuthoring);if(ss.startsWithString(e,'http://')){e=e.replace('http://','')}this.$2().text(unescape(e))};cG.__typeName='tab.HttpsEmbedHttpAuthoringMessage';global.tab.HttpsEmbedHttpAuthoringMessage=cG;var cH=function(e){spiff.Template.call(this,$("<div class='webZoneHttpsEmbedHttpView'><div class='message'></div><a target='_blank'></a></div>"));this.$2().text(tab.Strings.WebZoneHttpsEmbedHttpView);this.$1().prop('href',e);this.$1().text(unescape(e))};cH.__typeName='tab.HttpsEmbedHttpViewMessage';global.tab.HttpsEmbedHttpViewMessage=cH;var cI=function(){};cI.__typeName='tab.IApiStorytellingClient';global.tab.IApiStorytellingClient=cI;var cJ=function(){};cJ.__typeName='tab.IAppBannerView';global.tab.IAppBannerView=cJ;var cK=function(){};cK.__typeName='tab.IClient';global.tab.IClient=cK;var cL=function(){};cL.__typeName='tab.IDashboardViewport';global.tab.IDashboardViewport=cL;var cM=function(){};cM.__typeName='tab.IDataAlertPreparer';global.tab.IDataAlertPreparer=cM;var cN=function(){};cN.__typeName='tab.IFilterTypeViewModel';global.tab.IFilterTypeViewModel=cN;var cO=function(){};cO.__typeName='tab.IFlipboardViewModel';global.tab.IFlipboardViewModel=cO;var cP=function(){};cP.__typeName='tab.IFontLoader';global.tab.IFontLoader=cP;var cQ=function(e,fE){spiff.Template.call(this,$('<div><iframe></iframe></div>'));this.get_frame().prop('name',e);var fF={position:'absolute',top:0+'px',left:0+'px'};if(tsConfig.is_mobile){if(BrowserSupport.BrowserSupport.IsSafari()||BrowserSupport.BrowserSupport.IsIos()){this.get_container().css('-webkit-overflow-scrolling','touch');fF.height=fE.get_contentHeight()+'px';fF.width=fE.get_contentWidth()+'px'}fF.overflow='auto'}this.get_container().css(fF);this.get_frame().css({border:'0px none'})};cQ.__typeName='tab.IFrameTemplate';global.tab.IFrameTemplate=cQ;var cR=function(){};cR.__typeName='tab.IHitTargetGeom';global.tab.IHitTargetGeom=cR;var cS=function(){};cS.__typeName='tab.ImageUtil';cS.scaleImage=function(e,fE,fF,fG,fH){var fI=document.createElement('canvas');fI.width=fE;fI.height=fF;if(fE>0&&fF>0){var fJ=document.createElement('canvas');fJ.width=fG;fJ.height=fH;var fK=fJ.getContext('2d');fK.drawImage(e,0,0);var fL=fK.getImageData(0,0,fG,fH);var fM=fI.getContext('2d');var fN=fM.createImageData(fE,fF);cS.bilinearDownSampleAlgorithm(fL,fN);fM.putImageData(fN,0,0)}return fI};cS.bilinearDownSampleAlgorithm=function(e,fE){var fF=e.width;var fG=e.height;var fH=fF/fE.width;var fI=fG/fE.height;var fJ=fH;var fK=fI;var fL=e.data;var fM=fE.data;var fN=new Array(fM.length);for(var fO=0;fO<fN.length;fO++){fN[fO]=0}var fP=1/(fH*fI);var fQ=0;var fR=0;var fS=false;var fT,fU;fT=fU=0;var fV=fP;var fW=0;var fX=0;var fY=0;var fZ=4*fE.width;for(var ga=0;ga<fG;ga++){fJ=fH;for(var gb=0;gb<fF;gb++){var gc=fL[fQ];var gd=fL[fQ+1];var ge=fL[fQ+2];var gf=fL[fQ+3];fV=fP;if(fS){fV=fT;fX=fU;if(fJ<1){fX*=fJ}var gg=fR+fZ;fN[gg]+=gc*fX;fN[gg+1]+=gd*fX;fN[gg+2]+=ge*fX;fN[gg+3]+=gf*fX}if(fJ<1){fW=fV*(1-fJ);fV*=fJ;if(fS){fY=fU*(1-fJ);var gh=fR+fZ;fN[gh+4]+=gc*fY;fN[gh+5]+=gd*fY;fN[gh+6]+=ge*fY;fN[gh+7]+=gf*fY}fN[fR+4]+=gc*fW;fN[fR+5]+=gd*fW;fN[fR+6]+=ge*fW;fN[fR+7]+=gf*fW}fN[fR++]+=gc*fV;fN[fR++]+=gd*fV;fN[fR++]+=ge*fV;fN[fR++]+=gf*fV;fQ+=4;fJ-=1;if(fJ<cS.$0){fJ+=fH}else{fR-=4}}fK-=1;if(fK<cS.$0){fK+=fI}else{fR-=fZ}if(fK<1){fS=true;fT=fK/(fH*fI);fU=(1-fK)/(fH*fI)}else{fS=false}}for(var gi=0;gi<fN.length;gi++){fM[gi]=fN[gi]+0.5}};global.tab.ImageUtil=cS;var cT=function(){spiff.Template.call(this,$("<div class='tab-image'></div>"))};cT.__typeName='tab.ImageZoneTemplate';global.tab.ImageZoneTemplate=cT;var cU=function(e,fE){this.$k=null;this.$l=null;this.$j=null;ss.makeGenericType(spiff.BaseView$1,[cV]).call(this,e,new cT);this.$l=fE;this.$i().add_newImageZone(ss.mkdel(this,this.handleNewImageZone));this.$l.add_resizeZone(ss.mkdel(this,this.$e));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$i().remove_newImageZone(ss.mkdel(this,this.handleNewImageZone));this.$l.remove_resizeZone(ss.mkdel(this,this.$e));this.$l=null})))};cU.__typeName='tab.ImageZoneView';global.tab.ImageZoneView=cU;var cV=function(e){this.$2=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$2=e;this.$2.add_newImageZone(ss.mkdel(this,this.handleNewImageZone));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$2.remove_newImageZone(ss.mkdel(this,this.handleNewImageZone))})))};cV.__typeName='tab.ImageZoneViewModel';global.tab.ImageZoneViewModel=cV;var cW=function(){};cW.__typeName='tab.IMovable';global.tab.IMovable=cW;var cX=function(){};cX.__typeName='tab.ISlider';global.tab.ISlider=cX;var cY=function(e,fE,fF){this.$a=null;this.$c=null;this.$8=new tab.DisposableHolder;this.$9=false;this.$b=0;this.$a=e;if(fE){this.$c=new cF}else{this.$c=new fj}this.$b=100;this.$9=fE;this.$c.$1();this.$c.nextButton.width(fF).height(fF).css('line-height',fF+'px');this.$c.prevButton.width(fF).height(fF).css('line-height',fF+'px');this.$8.add$1(spiff.EventUtil.bindWithDispose(this.$c.nextButton,'click',ss.mkdel(this,this.$2)));this.$8.add$1(spiff.EventUtil.bindWithDispose(this.$c.prevButton,'click',ss.mkdel(this,this.$3)));this.updateButtonState()};cY.__typeName='tab.IteratorButtons';global.tab.IteratorButtons=cY;var cZ=function(e){this.prevButton=null;this.nextButton=null;spiff.Template.call(this,$(e));this.prevButton=this.getElementBySelector('.tabCatLegendScrollPrev');this.nextButton=this.getElementBySelector('.tabCatLegendScrollNext')};cZ.__typeName='tab.IteratorButtonTemplate';global.tab.IteratorButtonTemplate=cZ;var da=function(){};da.__typeName='tab.ITooltipBehavior';global.tab.ITooltipBehavior=da;var db=function(){};db.__typeName='tab.KeyboardHandlers';db.setAccessibilityKeyboardHandlers=function(e,fE){return spiff.EventUtil.bindWithDispose($(e),'keyup',function(fF){db.$0(fF,fE)})};db.$0=function(e,fE){switch(e.which){case 32:case 13:{if(!ss.staticEquals(fE,null)){fE()}break}default:{return}}e.preventDefault();e.stopPropagation()};global.tab.KeyboardHandlers=db;var dc=function(e){React.Component.call(this,e)};dc.__typeName='tab.LegacyErrorDialog';global.tab.LegacyErrorDialog=dc;var dd=function(e,fE){React.Component.call(this,e,fE)};dd.__typeName='tab.MapScaleComponent';global.tab.MapScaleComponent=dd;var de=function(e){this.$5=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$5=e;this.$5.add_updatedMapScaleInfo(ss.mkdel(this,this.handleUpdatedMapScaleInfo));this.disposables.add(ss.mkdel(this,function(){this.$5.remove_updatedMapScaleInfo(ss.mkdel(this,this.handleUpdatedMapScaleInfo))}))};de.__typeName='tab.MapScaleViewModel';global.tab.MapScaleViewModel=de;var df=function(){this.menuItems=null;this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=false};df.__typeName='tab.MenuItemTelemetryConfigOptions';global.tab.MenuItemTelemetryConfigOptions=df;var dg=function(){this.flatCommandItemList=null;this.fullMenuItemName=null;this.$1$1=null;this.$1$2=0;this.$1$3=null;this.$1$4=null};dg.__typeName='tab.MenuItemTelemetryInfo';global.tab.MenuItemTelemetryInfo=dg;var dh=function(){};dh.__typeName='tab.MethodAdded';global.tab.MethodAdded=dh;var di=function(){};di.__typeName='tab.Metrics';di.get_scrollW=function(){return di.$1()};di.get_minScrollWidth=function(){if(BrowserSupport.BrowserSupport.IsSafari()||BrowserSupport.BrowserSupport.IsMac()){return 60}return di.get_scrollW()*2};di.get_scrollH=function(){return di.$1()};di.get_minScrollHeight=function(){if(BrowserSupport.BrowserSupport.IsSafari()||BrowserSupport.BrowserSupport.IsMac()){return 60}return di.get_scrollH()*2};di.$1=function(){return tab.LazyUtil.lazyInitStaticField(di,'_scrollBarSize',function(){return di.$0()})};di.$0=function(){if(tsConfig.is_mobile){return 0}var e=document.createElement('div');var fE=e.style;fE.width='100px';fE.height='100px';fE.overflow='scroll';fE.position='absolute';fE.top='0px';fE.filter='alpha(opacity=0)';fE.opacity='0';fE.left='0px';var fF=document.createElement('div');fF.style.width='400px';fF.style.height='400px';e.appendChild(fF);document.body.appendChild(e);var fG=e.offsetWidth-e.clientWidth;document.body.removeChild(e);e.removeChild(fF);e=fF=null;fG=((fG>0)?fG:9);return fG};global.tab.Metrics=di;var dj=function(){$(document).on('keydown.ModifierKeyState keyup.ModifierKeyState mouseover.ModifierKeyState',ss.mkdel(this,this.$0))};dj.__typeName='tab.ModifierKeyState';dj.add_modifierKeysChanged=function(e){dj.$1$1=ss.delegateCombine(dj.$1$1,e)};dj.remove_modifierKeysChanged=function(e){dj.$1$1=ss.delegateRemove(dj.$1$1,e)};dj.fireModifierKeysChanged=function(e){if(!ss.staticEquals(dj.$1$1,null)){dj.$1$1(e)}};global.tab.ModifierKeyState=dj;var dk=function(){};dk.__typeName='tab.ModulesRegistration';dk.$7=function(e){var fE=[];dk.$6(fE);var fF;if(tsConfig.debugMode||tsConfig.isUnitTestRun){var fG='vqllegacydojoui.debug';var fH=tab.ModuleManager.registerDependencyModule(fG,fG).andLoadOnDemandIf(e).moduleBeingConfigured;if(tsConfig.is_mobile){fF=tab.ModuleManager.register(tab.ILegacyDojoUIModule).call(null,'LegacyDojoUIMobile',null).andLoadOnDemandIf(e).moduleBeingConfigured}else{fF=tab.ModuleManager.register(tab.ILegacyDojoUIModule).call(null,'LegacyDojoUIWeb',null).andLoadOnDemandIf(e).moduleBeingConfigured}fE.push(fH)}else if(tsConfig.is_mobile){fF=tab.ModuleManager.register(tab.ILegacyDojoUIModule).call(null,'LegacyDojoUIMobile',null).andLoadOnDemandIf(e).moduleBeingConfigured}else{fF=tab.ModuleManager.register(tab.ILegacyDojoUIModule).call(null,'LegacyDojoUIWeb',null).andLoadOnDemandIf(e).moduleBeingConfigured}for(var fI=0;fI<fE.length;fI++){var fJ=fE[fI];fF.addDependency(fJ)}fF.waitUntilModuleReadyFunc=function(){var fK=$.Deferred();dojo.addOnLoad(function(){fK.resolve()});return fK}};dk.$6=function(e){var fE='.js.uncompressed';var fF='built-dojo/tableau/client{0}';var fG='built-dojo/dojo/dojo';var fH=(tsConfig.is_mobile?'mobile':'web');var fI=ss.formatString(fF,fH);var fJ=tab.ModuleManager.registerRawJsModule(fG,fG,'built-dojo/dojo/dojo.js.uncompressed').moduleBeingConfigured;var fK=tab.ModuleManager.registerRawJsModule(fI,fI,fI+fE).moduleBeingConfigured;e.push(fJ);e.push(fK)};dk.$4=function(e){var fE='commenting';var fF=tab.ModuleManager.registerRawJsModule(fE,'commenting.min',fE).andLoadOnDemandIf(e).andExportResultAs('Commenting').moduleBeingConfigured;var fG=tab.ModuleManager.register(tab.ICommentingFactory).call(null,'Commenting',null).andLoadOnDemandIf(e).moduleBeingConfigured;dk.$0(fG);fG.addDependency(fF)};dk.$1=function(e,fE,fF){var fG=tsConfig.external_static_asset_prefix+'/css/';var fH=(tsConfig.debugMode?fF:fE);e.addDependencyOnCssFile(fG+fH+'.css')};dk.$0=function(e){var fE=tab.ModuleManager.registerRawJsModule('codemirror','codemirror-min','codemirror').andExportResultAs('CodeMirror').moduleBeingConfigured;dk.$1(fE,'codemirror-min','codemirror');e.addDependency(fE)};dk.$9=function(){if(tab.FeatureFlags.isEnabled('RichTextEditingHybridDialogWeb')){tab.ModuleManager.registerRawJsModule('@tableau/rich-text-editor','rich-text-editor.min','rich-text-editor').andShowLoadingIndicator()}else{tab.ModuleManager.register(tab.IRichTextAuthoringModule).call(null,'RichTextEditorModule',null).andShowLoadingIndicator().andExportResultAs('RichTextEditor')}};dk.$3=function(e){tab.ModuleManager.registerTypicalRawJsModule('leaflet').andLoadOnDemandIf(e);var fE='-dev';var fF='mapboxgl';var fG='/css/mapbox-gl.css';tab.ModuleManager.registerRawJsModule('mapbox-gl','mapbox-gl','mapbox-gl-dev').andLoadOnDemandIf(e).andExportResultAs(fF).moduleBeingConfigured.addDependencyOnCssFile(tsConfig.external_static_asset_prefix+fG)};dk.$8=function(e){var fE=tab.ModuleManager.registerTypicalRawJsModule('natural-language-input-box').andLoadOnDemandIf(e).andExportResultAs('NaturalLanguageInputBox').moduleBeingConfigured;var fF=tab.ModuleManager.registerTypicalRawJsModule('natural-language-fields-panel').andLoadOnDemandIf(e).andExportResultAs('NaturalLanguageFieldsPanel').moduleBeingConfigured;var fG=tab.ModuleManager.registerTypicalRawJsModule('natural-language-layout').andLoadOnDemandIf(e).moduleBeingConfigured;fG.addDependency(fE);fG.addDependency(fF)};dk.$5=function(e){var fE=tab.ModuleManager.registerTypicalRawJsModule('data-alerts-panel').andLoadOnDemandIf(e).andExportResultAs('DataAlertsPanel').moduleBeingConfigured;var fF=tab.ModuleManager.register(tab.IDataAlertsPanelFactory).call(null,'DataAlertsPanel',null).andLoadOnDemandIf(e).moduleBeingConfigured;fF.addDependency(fE);dk.$0(fF)};dk.$2=function(){var e=tab.ModuleManager.registerTypicalRawJsModule('automated-insights-client').andLoadOnDemandIf(true).andExportResultAs('AutomatedInsightsPanel').moduleBeingConfigured;tab.ModuleManager.register(tab.IAutomatedInsightsPanelFactory).call(null,'AutomatedInsightsPanel',null).andLoadOnDemandIf(true).moduleBeingConfigured.addDependency(e)};global.tab.ModulesRegistration=dk;var dl=function(){this.$2=null;this.$3=null;this.$1$1=null;this.$1$2=null;this.$2={};this.$3=[]};dl.__typeName='tab.NativeFontLoader';dl.$0=function(){return document['fonts']};global.tab.NativeFontLoader=dl;var dm=function(){};dm.__typeName='tab.NativePresModelsFactory';dm.newAddInLocatorPresModel=function(e){var fE=new Object;fE.addInInstanceId=e.instanceId;fE.sheetPath=new Object;fE.sheetPath.flipboardZoneId=e.dashboardPath.flipboardZoneID;fE.sheetPath.isDashboard=e.dashboardPath.isDashboard;fE.sheetPath.sheetName=e.dashboardPath.sheetName;fE.sheetPath.storyboard=e.dashboardPath.storyboard;fE.sheetPath.storyPointId=e.dashboardPath.storyPointID;return fE};dm.newVisualIdPresModel=function(e){var fE=new Object;fE.worksheet=e.worksheet;fE.dashboard=e.dashboard;fE.storyboard=e.storyboard;fE.storyPointId=e.storyPointID;fE.flipboardZoneId=e.flipboardZoneID;return fE};global.tab.NativePresModelsFactory=dm;var dn=function(){this.serverBuild=null;this.siteId=null;this.siteLuid=null;this.pod=null;this.publishedDatasourceId=null;this.unifiedDatasourceId=null};dn.__typeName='tab.NaturalLanguageInfo';global.tab.NaturalLanguageInfo=dn;var dp=function(){};dp.__typeName='tab.NaturalLanguageModuleUtil';dp.createNaturalLanguageLayoutParentElement=function(){ed.downloadAdditionalNLPFonts();var e=$(document.body);var fE=$("<div class='tab-nlbox-layout'></div>");e.append(fE);return fE.get(0)};dp.whenNaturalLanguageLayoutModuleLoaded=function(e,fE){tab.WorkgroupServerCommands.get_getSessionInfo().done(function(fF){dp.$0(fF,e,fE)}).fail(function(fF){dp.$0(null,e,fE)})};dp.$0=function(e,fE,fF){var fG=new dn;fG.serverBuild=(ss.isValue(e)?e.server.version.build:'UNKNOWN BUILD');fG.siteId=(ss.isValue(e)?(e.site.id+''):'');fG.siteLuid=(ss.isValue(e)?e.site.luid:'');fG.pod=(ss.isValue(e)?e.server.logicalServerInstanceId:'(Unknown POD)');var fH=fG;tab.WorkgroupServerCommands.fetchDataSourcesByRepositoryUrl(function(fI){fH.publishedDatasourceId=((fI.length>0)?(fI[0].get_datasourceId()+''):'');fH.unifiedDatasourceId=((fI.length>0)?(fI[0].get_id()+''):'');tab.ModuleManager.load(tab.ISavingModule).call(null,[]).done(function(fJ){dp.$6(fE,fJ,fF,fH)})},dp.$1())};dp.$6=function(e,fE,fF,fG){var fH={build:fG.serverBuild,deploymentType:dp.$2(),pod:fG.pod,sessionId:tsConfig.sessionid,siteLuid:fG.siteLuid,userId:tsConfig.current_user_id,userName:tsConfig.current_user_name};var fI=[];fI.push({ns:'tabdoc',cmd:'interpret-query'});fI.push({ns:'tabdoc',cmd:'interpret-scoped-query'});fI.push({ns:'tabdoc',cmd:'get-suggestions'});fI.push({ns:'tabdoc',cmd:'update-term'});var fJ=fI;var fK={isAllowed:tsConfig.allow_save_as,save:dp.$7,saveAs:dp.$8,promptToSave:dp.$5};var fL={dashboardSpacer:fy.findDashboardContainer().get(0),dashboardViewport:$(G.dashboardViewportSelector).get(0),datasourceName:tsConfig.workbookName,datasourceUrl:dp.$1(),feedbackFormMode:dp.$3(),mainLayoutType:dp.$4(),pluginPresLayer:new tab.CustomUIBlockingPluginPresentationLayer(fJ),publishedDatasourceId:fG.publishedDatasourceId,savingActions:fK,unifiedDatasourceId:fG.unifiedDatasourceId,siteId:fG.siteId,siteRoot:tsConfig.site_root,siteUrlName:tsConfig.site_url_name,telemetryData:fH,worksheetName:tsConfig.current_sheet_name};dp.$9=fE.instance();ReactDOM.render(React.createElement(e,fL),fF)};dp.$7=function(e,fE){return dp.$9.saveNlpWorkbook(fE,e)};dp.$8=function(e){return dp.$9.saveNlpWorkbook(true,e)};dp.$5=function(e){};dp.$1=function(){return ss.replaceAllString(tsConfig.workbook_repo_url,'ds:','')};dp.$4=function(){switch(tsConfig.nlpLayoutMode){case'exploration':{return'explorationPage'}case'landing':{return'landingPage'}default:{return'landingPage'}}};dp.$3=function(){switch(tsConfig.nlpFeedbackMode){case'full':{return'full'}case'slackOnly':{return'slackOnly'}case'none':{return'none'}default:{return'none'}}};dp.$2=function(){return(tsConfig.is_saas?'online':'onPrem')};global.tab.NaturalLanguageModuleUtil=dp;var dq=function(){};dq.__typeName='tab.NeedRemoteTooltip';global.tab.NeedRemoteTooltip=dq;var dr=function(e){this.notificationViewModel=null;this.messageDom=null;this.closeDom=null;this.$b=false;this.adjustMargin=true;ss.makeGenericType(spiff.BaseView$1,[ds]).call(this,e,spiff.Template.fromHtml("<div class='tabNotification'>"));this.notificationViewModel=e;this.element.attr('role','alert');this.messageDom=$('<div>').addClass('tabNotificationMessage').appendTo(this.element);var fE=$('<div>').addClass('tabNotificationClose').attr('tabindex','0').attr('aria-label',tab.Strings.AccessbilityNotificationButtonDismissLabel).attr('role','button').keydown(ss.mkdel(this,function(fF){if(fF.which===13||fF.which===32){fF.preventDefault();fF.stopPropagation();this.$9(fF)}}));this.closeDom=spiff.ClickHandler.targetAndClick(fE,ss.mkdel(this,this.$9)).get_target();this.closeDom.appendTo(this.element);this.notificationViewModel.add_shown(ss.mkdel(this,this.shown));this.notificationViewModel.add_hidden(ss.mkdel(this,this.hidden))};dr.__typeName='tab.NotificationView';global.tab.NotificationView=dr;var ds=function(){this.$6=null;this.$7=false;this.$4=5000;this.$3=0;this.$5=null;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this)};ds.__typeName='tab.NotificationViewModel';ds.$0=function(e,fE){var fF=new ds;fF.set_message(e);if(ss.isValue(fE)){fF.set_autoHideTimeout(fE)}return fF};ds.showGeoLocationNotification=function(e,fE,fF){var fG=ds.$0(e,fE);fG.set_displayPosition(fF);tab.ObjectRegistry.newView(cB).call(null,[fG]);spiff.GlobalUIEvents.add_firstTouch(ss.mkdel(fG,fG.$2));spiff.GlobalUIEvents.add_dismissTemporaryElements(ss.mkdel(fG,fG.hide));fG.disposables.add$1(new tab.CallOnDispose(function(){spiff.GlobalUIEvents.remove_firstTouch(ss.mkdel(fG,fG.$2));spiff.GlobalUIEvents.remove_dismissTemporaryElements(ss.mkdel(fG,fG.hide))}));fG.disposeOnHide();fG.show()};ds.showNotification=function(e,fE){ds.showCustomNotification(dr).call(null,e,fE)};ds.showCustomNotification=function(e){return function(fE,fF){var fG=ds.$0(fE,fF);tab.ObjectRegistry.newView(e).call(null,[fG]);fG.disposeOnHide();fG.show();return fG}};global.tab.NotificationViewModel=ds;var dt=function(e,fE){this.$8=null;this.$7=null;spiff.Widget.call(this,$("<img class='tab-overlayImage'/>"));this.$8=$(e);this.element.on('load',ss.mkdel(this,function(){this.$6()}));this.element.attr('src',fE)};dt.__typeName='tab.OverlayImage';global.tab.OverlayImage=dt;var du=function(e){ss.makeGenericType(spiff.PagableListComponent$2,[Object,Object]).call(this,e)};du.__typeName='tab.PagableGroupListComponent';global.tab.PagableGroupListComponent=du;var dv=function(e){ss.makeGenericType(spiff.PagableListComponent$2,[Object,Object]).call(this,e)};dv.__typeName='tab.PagableUserListComponent';global.tab.PagableUserListComponent=dv;var dw=function(){};dw.__typeName='tab.PillStatus';global.tab.PillStatus=dw;var dx=function(){this.$0=new tab.DisposableHolder;this.$1=null;this.$2=null};dx.__typeName='tab.PluginFilePicker';dx.get_instance=function(){dx.$1=dx.$1||new dx;return dx.$1};dx.set_instance=function(e){dx.$1=e};dx.$0=function(e,fE){if(fE.length===0){e.reject('no-file-selected');return}tab.ModuleManager.load(tab.IFileUploadModule).call(null,[]).done(function(fF){try{fF.uploadFiles(fE).done(function(fG){fF.copyTempFileToSessionStorage(fE[0],fG).done(function(fH){var fI=new Object;fI.fileName=fE[0].name;fI.fileLocator=fH;var fJ=fI;e.resolve(fJ)})}).fail(function(fG){e.reject('upload-failed')})}catch(fG){e.reject('upload-failed')}}).fail(function(fF){e.reject('upload-failed')})};global.tab.PluginFilePicker=dx;var dy=function(e){ss.makeGenericType(spiff.BaseView$1,[dz]).call(this,e,spiff.Template.fromHtml('<div />'))};dy.__typeName='tab.PresModelBrowserView';global.tab.PresModelBrowserView=dy;var dz=function(e,fE,fF){this.data=null;this.$2=null;this.name=null;spiff.BaseViewModel.call(this);this.name=e;if(dz.$1(fE)){if($.isArray(fE)){this.data=dz.$2(fE)}else{this.data=dz.$3(fE)}}else{this.data=fE.toString()}this.$2=fF};dz.__typeName='tab.PresModelBrowserViewModel';dz.$1=function(e){return ss.isValue(e)&&typeof(e)==='object'};dz.$2=function(e){var fE=[];for(var fF=0;fF<e.length;++fF){fE.push(dz.$4(fF.toString(),e[fF]))}return fE};dz.$3=function(e){var fE=[];var fF=new ss.ObjectEnumerator(e);try{while(fF.moveNext()){var fG=fF.current();fE.push(dz.$4(fG.key,fG.value))}}finally{fF.dispose()}return fE};dz.$0=function(e){return'<strong>'+e+':</strong> '};dz.$4=function(e,fE){if(dz.$1(fE)){if($.isArray(fE)){return ss.mkdict(['text',dz.$0(e),'children',dz.$2(fE)])}else{return ss.mkdict(['text',dz.$0(e),'children',dz.$3(fE)])}}else if(ss.endsWithString(e,'Json')&&(ss.startsWithString(fE,'{')||ss.startsWithString(fE,'['))){var fF=null;try{fF=JSON.parse(fE)}catch(fG){}if(ss.isValue(fF)){return dz.$4(e,fF)}}return dz.$0(e)+fE};global.tab.PresModelBrowserViewModel=dz;var dA=function(e,fE){ss.makeGenericType(spiff.ReactSpiffAdapter$3,[dD,dB,Object]).call(this,tab.ObjectRegistry.newView(dD).call(null,[e.viewModel]),e,fE)};dA.__typeName='tab.PublicInfoComponent';global.tab.PublicInfoComponent=dA;var dB=function(){this.viewModel=null};dB.__typeName='tab.PublicInfoProps';global.tab.PublicInfoProps=dB;var dC=function(){this.publicInfoArea=null;this.moreAboutPublicSection=null;this.viewAndAuthorInfoSection=null;spiff.Template.call(this,$("<div class='tab-publicInfoView tab-toolbarFlyout'><a class='tab-moreAboutPublicSection' target='_blank' /></a><div class='tab-viewAndAuthorInfoSection'></div></div>"));this.publicInfoArea=this.domRoot;this.moreAboutPublicSection=this.getElementBySelector('.tab-moreAboutPublicSection');this.viewAndAuthorInfoSection=this.getElementBySelector('.tab-viewAndAuthorInfoSection')};dC.__typeName='tab.PublicInfoTemplate';global.tab.PublicInfoTemplate=dC;var dD=function(e){this.$e=null;ss.makeGenericType(spiff.BaseView$1,[dE]).call(this,e,new dC);this.$e=e;this.$d()};dD.__typeName='tab.PublicInfoView';global.tab.PublicInfoView=dD;var dE=function(){spiff.BaseViewModel.call(this)};dE.__typeName='tab.PublicInfoViewModel';global.tab.PublicInfoViewModel=dE;var dF=function(e,fE,fF){var fG=function(fH){this.$2=false;this.$1=ss.getDefaultValue(e);this.$0=null;spiff.PureRenderComponent.call(this,fH);this.$2=false;this.$0=this.fetchAsyncDependencies().done(ss.mkdel(this,function(fI){this.$1=fI;this.$2=true}))};ss.registerGenericClassInstance(fG,dF,[e,fE,fF],{render:function(){if(!this.$2){this.$0.done(ss.mkdel(this,function(fH){this.forceUpdate()}));return this.renderWhileWaiting()}return this.renderWithDependencies(this.$1)},fetchAsyncDependencies:null,renderWhileWaiting:null,renderWithDependencies:null},function(){return spiff.PureRenderComponent},function(){return[]});return fG};dF.__typeName='tab.PureComponentWithAsyncDependencies$3';ss.initGenericClass(dF,a,3);global.tab.PureComponentWithAsyncDependencies$3=dF;var dG=function(e,fE,fF){var fG=function(fH){ss.makeGenericType(dF,[e,fE,fF]).call(this,fH)};ss.registerGenericClassInstance(fG,dG,[e,fE,fF],{fetchAsyncDependencies:function(){return tab.ModuleManager.load(e).call(null,[])},renderWhileWaiting:function(){return null},renderWithDependencies:function(fH){return this.renderWithModule(fH)},renderWithModule:null},function(){return ss.makeGenericType(dF,[e,fE,fF])},function(){return[]});return fG};dG.__typeName='tab.PureComponentWithModule$3';ss.initGenericClass(dG,a,3);global.tab.PureComponentWithModule$3=dG;var dH=function(){};dH.__typeName='tab.QuickFilterConstants';global.tab.QuickFilterConstants=dH;var dI=function(e){spiff.PureRenderComponent.call(this,e)};dI.__typeName='tab.QuickFilterNoninteractiveDropdownComponent';global.tab.QuickFilterNoninteractiveDropdownComponent=dI;var dJ=function(e){spiff.PureRenderComponent.call(this,e)};dJ.__typeName='tab.QuickFilterReadoutComponent';global.tab.QuickFilterReadoutComponent=dJ;var dK=function(e){React.Component.call(this,e)};dK.__typeName='tab.RecipientPillComponent';global.tab.RecipientPillComponent=dK;var dL=function(e){React.Component.call(this,e)};dL.__typeName='tab.RecipientPillsComponent';global.tab.RecipientPillsComponent=dL;var dM=function(e){this.$8=null;this.$9=false;this.$a=null;this.disposables=new tab.DisposableHolder;this.$3$1=null;this.$3$2=null;React.Component.call(this,e);this.$8=new tab.Debouncer(ss.mkdel(this,function(){this.$9=true}),200);this.state=this.createNewDefaultState();this.$9=false;this.$a=null};dM.__typeName='tab.RecipientSearchComponent';global.tab.RecipientSearchComponent=dM;var dN=function(e,fE){this.numberOfRowsInViewport=6;this.$a=false;this.$b=null;React.Component.call(this,e,fE);this.state=this.createNewDefaultState();if(this.props.isBulkSubscribe){this.numberOfRowsInViewport=11}};dN.__typeName='tab.RecipientSearchSelectorComponent';global.tab.RecipientSearchSelectorComponent=dN;var dO=function(e){this.$0=null;this.$0=e};dO.__typeName='tab.RectangleGeom';global.tab.RectangleGeom=dO;var dP=function(){fe.call(this)};dP.__typeName='tab.RedoKeyboardShortcut';global.tab.RedoKeyboardShortcut=dP;var dQ=function(){this.$b=null;this.$a=null;this.$9=null;this.$8=null;this.$c=0;this.$d=0;this.$1$1=null;this.$1$2=null;this.$b={}};dQ.__typeName='tab.RenderAndCheckFontLoader';dQ.$0=function(e,fE){var fF=$('<span/>').text('The quick brown fox jumps over the lazy dog iiilllest');var fG=$('<div/>').css(dQ.$4).css('font-family',fE.join(', ')).addClass(e);fG.append(fF);return fG};dQ.$3=function(e,fE){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(fE)){return false}var fF=e.children('span')[0];var fG=fE.children('span')[0];return dQ.$1(fF,fG)===0&&dQ.$2(fF,fG)===0};dQ.$1=function(e,fE){var fF=e.getBoundingClientRect().height;var fG=(ss.isNullOrUndefined(fE)?0:fE.getBoundingClientRect().height);return ss.compare(fF,fG)};dQ.$2=function(e,fE){var fF=e.getBoundingClientRect().width;var fG=(ss.isNullOrUndefined(fE)?0:fE.getBoundingClientRect().width);return ss.compare(fF,fG)};global.tab.RenderAndCheckFontLoader=dQ;var dR=function(){};dR.__typeName='tab.RenderUtil';dR.calculatePixelRatio=function(e){var fE=1;if(ss.isValue(tsConfig.highDpi)&&tsConfig.highDpi){if(ss.isValue(tsConfig.pixelRatio)){fE=tsConfig.pixelRatio}else if(ss.isValue(e)&&!e){fE=BrowserSupport.BrowserSupport.DevicePixelRatio()}else{fE=BrowserSupport.BrowserSupport.DevicePixelRatio()/BrowserSupport.BrowserSupport.BackingStoragePixelRatio()}}return fE};dR.manualFadeAnimation=function(e,fE,fF,fG,fH,fI){var fJ=fE;var fK=fF;var fL=ss.Int32.div(fH,1000)*fG;var fM=(fF-fE)/fL;var fN=ss.Int32.div(1000,fG);var fO=null;fO=function(){if(fJ>fK){e.css('filter','alpha(opacity='+fK+')');e.css('opacity',(fK/100).toString());return}e.css('filter','alpha(opacity='+fJ+')');e.css('opacity',(fJ/100).toString());fJ+=fM;if(ss.isValue(fI)){fN+=fN}window.setTimeout(fO,fN)};window.setTimeout(fO,fN)};dR.compareBoundingClientHeight=function(e,fE){var fF=e.getBoundingClientRect().height;var fG=(ss.isNullOrUndefined(fE)?0:fE.getBoundingClientRect().height);return ss.compare(fF,fG)};dR.compareBoundingClientWidth=function(e,fE){var fF=e.getBoundingClientRect().width;var fG=(ss.isNullOrUndefined(fE)?0:fE.getBoundingClientRect().width);return ss.compare(fF,fG)};dR.ensureImageEltSize=function(e,fE){var fF=dR.calculatePixelRatio(false);if(tab.DoubleUtil.isGreaterThanAndNotApproximatelyEqual(fF,1)){var fG=$(e);fG.css('max-width',fE.w+'px');fG.css('max-height',fE.h+'px')}};global.tab.RenderUtil=dR;var dS=function(){this.disposables=new tab.DisposableHolder;this.$1=null;this.$2=null;this.$0=null};dS.__typeName='tab.RightAreaDrawerModuleLoader';global.tab.RightAreaDrawerModuleLoader=dS;var dT=function(){this.loaderContainer=null;spiff.Template.call(this,dT.$0());this.loaderContainer=this.domRoot};dT.__typeName='tab.RightAreaDrawerModuleLoaderTemplate';dT.$0=function(){return $("<div class='tab-right-area-drawer-module-loader'></div>")};global.tab.RightAreaDrawerModuleLoaderTemplate=dT;var dU=function(e){ss.makeGenericType(spiff.BaseView$1,[dV]).call(this,e,new dT);var fE=React.createElement(SharedWidgets.ActivitySpinnerWidget,{testId:'waiting',shouldShowUnderlay:false});window.setTimeout(ss.mkdel(this,function(){ReactDOM.render(fE,this.get_dom().loaderContainer.get(0))}),300);this.get_dom().loaderContainer.css({position:'absolute',top:0+'px',right:0+'px',bottom:0+'px',left:0+'px','box-sizing':'border-box','border-left-style':'solid','border-left-width':SharedWidgets.TabStyles.Sizing.BorderWidth+'px','border-left-color':SharedWidgets.TabStyles.Colors.L6,'background-color':SharedWidgets.TabStyles.Colors.L1,'padding-top':85+'px','text-align':'center'})};dU.__typeName='tab.RightAreaDrawerModuleLoaderView';global.tab.RightAreaDrawerModuleLoaderView=dU;var dV=function(){this.$4=null;this.$5=0;spiff.BaseViewModel.call(this)};dV.__typeName='tab.RightAreaDrawerModuleLoaderViewModel';global.tab.RightAreaDrawerModuleLoaderViewModel=dV;var dW=function(){};dW.__typeName='tab.RightAreaDrawerModuleLoaderViewModel$LoadingContentType';global.tab.RightAreaDrawerModuleLoaderViewModel$LoadingContentType=dW;var dX=function(){this.drawerContainer=null;spiff.Template.call(this,dX.$0());this.drawerContainer=this.domRoot};dX.__typeName='tab.RightAreaDrawerTemplate';dX.$0=function(){return(tab.FeatureFlags.isEnabled('IframeSizedToWindow')?$("<div id='right-panel'></div>"):$("<div class='tab-right-area-drawer'></div>"))};global.tab.RightAreaDrawerTemplate=dX;var dY=function(e){ss.makeGenericType(spiff.BaseView$1,[dZ]).call(this,e,new dX);this.get_viewModel().add_open(ss.mkdel(this,this.$a));this.get_viewModel().add_close(ss.mkdel(this,this.$9));this.get_viewModel().add_update(ss.mkdel(this,this.$d));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_open(ss.mkdel(this,this.$a));this.get_viewModel().remove_close(ss.mkdel(this,this.$9));this.get_viewModel().remove_update(ss.mkdel(this,this.$d))})));this.$b()};dY.__typeName='tab.RightAreaDrawerView';global.tab.RightAreaDrawerView=dY;var dZ=function(){this.$6=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=false;spiff.BaseViewModel.call(this);this.set_isOpen(false)};dZ.__typeName='tab.RightAreaDrawerViewModel';global.tab.RightAreaDrawerViewModel=dZ;var ea=function(){};ea.__typeName='tab.RightAreaDrawerViewModel$ToggleType';global.tab.RightAreaDrawerViewModel$ToggleType=ea;var eb=function(){};eb.__typeName='tab.SelectActionResolver';eb.fromNormalizedEvent=function(e,fE){var fF=e.getSelectAction();switch(fE){case 0:{return((fF==='toggle')?'range':fF)}case 1:{return((fF==='range')?'simple':fF)}case 2:default:{return fF}}};global.tab.SelectActionResolver=eb;var ec=function(){};ec.__typeName='tab.SelectActionResolverEvent';global.tab.SelectActionResolverEvent=ec;var ed=function(){this.$6={};this.$5=null;this.$8=false;this.$7=false;this.$3=null;this.$4=null;this.$1$1=null;this.$5=ed.$0();this.$5.add_fontsReady(ss.mkdel(this,this.$1));this.$5.add_fontDownloading(ss.mkdel(this,this.$0));this.$7=true};ed.__typeName='tab.ServerFontLoader';ed.get_instance=function(){if(ss.isNullOrUndefined(ed.$1)){ed.$1=new ed}return ed.$1};ed.get_allCustomFonts=function(){return _.union(tab.ServerFonts.tableauFontNames,tab.ServerFonts.effectiveBentonSans)};ed.loadFonts=function(e){var fE=$.Deferred();ed.get_instance().get_fontsLoadedPromise().then(function(){ed.get_instance().initialize(false);ed.get_instance().registerServerLoadedFonts(e);ed.get_instance().notifyDownloadableFont(e);ed.get_instance().downloadFonts();ed.get_instance().allFontsFound();ed.get_instance().get_fontsLoadedPromise().then(function(){fE.resolve()},null)},null);return fE};ed.downloadAdditionalDrawerFonts=function(){var e=(BrowserSupport.BrowserSupport.IsHighDpi()?ed.drawerFontNames:ed.drawerLowDpiFontNames);return ed.loadFonts(e)};ed.downloadAdditionalNLPFonts=function(){var e=(BrowserSupport.BrowserSupport.IsHighDpi()?ed.drawerFontNames:ed.drawerLowDpiFontNames);return ed.loadFonts(e)};ed.$0=function(){if(BrowserSupport.BrowserSupport.FontLoader()&&BrowserSupport.BrowserSupport.Promise()&&(BrowserSupport.BrowserSupport.IsFF()||BrowserSupport.BrowserSupport.IsChrome()||BrowserSupport.BrowserSupport.IsSafari()||BrowserSupport.BrowserSupport.IsIos())){return new dl}return new dQ};global.tab.ServerFontLoader=ed;var ee=function(e){spiff.BaseViewModel.call(this);e.add_onSessionRecoveryAttempt(ss.mkdel(this,this.$2));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){e.remove_onSessionRecoveryAttempt(ss.mkdel(this,this.$2))})))};ee.__typeName='tab.SessionViewModel';global.tab.SessionViewModel=ee;var ef=function(e,fE){ss.makeGenericType(spiff.ReactSpiffAdapter$3,[ej,eg,Object]).call(this,tab.ObjectRegistry.newView(ej).call(null,[e.viewModel]),e,fE)};ef.__typeName='tab.ShareComponent';global.tab.ShareComponent=ef;var eg=function(){this.viewModel=null};eg.__typeName='tab.ShareProps';global.tab.ShareProps=eg;var eh=function(){this.shareArea=null;this.shareStateArea=null;this.shareCurrentView=null;this.shareOriginalView=null;this.shareLinkSection=null;this.shareLinkTitle=null;this.shareLinkInput=null;this.shareLinkButtons=null;this.shareEmbedTitle=null;this.shareEmbedInput=null;spiff.Template.call(this,$("\n            <div class='tab-shareView tab-toolbarFlyout'>\n            </div>"));this.shareArea=this.domRoot};eh.__typeName='tab.ShareTemplate';global.tab.ShareTemplate=eh;var ei=function(){this.$6=0;this.$3$1=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this)};ei.__typeName='tab.ShareToggleButtonViewModel';global.tab.ShareToggleButtonViewModel=ei;var ej=function(e){this.$k=(tsConfig.is_mobile?390:300);this.$j=null;this.$i=false;this.$h=null;this.$l=null;ss.makeGenericType(spiff.BaseView$1,[ek]).call(this,e,new eh);this.$j=e;this.$j.saveSharedView();this.$a();this.$i=Math.min(tabBootstrap.ViewerBootstrap.get_instance().getWebClientDashboardContainerSize(tsConfig.current_sheet_type).w,window.innerWidth)<=this.$k;this.$j.add_selectedViewChanged(ss.mkdel(this,this.$g));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$j.remove_selectedViewChanged(ss.mkdel(this,this.$g))})))};ej.__typeName='tab.ShareView';global.tab.ShareView=ej;var ek=function(){this.embedCodeVersion=3;this.shareToggleButtonViewModel=null;this.$b=true;this.$2$1=null;spiff.BaseViewModel.call(this);this.$b=!this.$a();this.shareToggleButtonViewModel=new ei;this.shareToggleButtonViewModel.add_originalViewSelected(ss.mkdel(this,this.$9));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.shareToggleButtonViewModel.remove_originalViewSelected(ss.mkdel(this,this.$9))})))};ek.__typeName='tab.ShareViewModel';ek.$6=function(e){var fE='/javascripts/api/viz_v1.js';var fF=(tsConfig.forceHttpsForPublicEmbed?'https:':e['protocol']);return encodeURI(fF+'//'+e['hostname']+fE)};ek.$0=function(){var e;var fE=new ss.StringBuilder(ss.formatString('if ( divElement.offsetWidth > {0} ) { ',tsConfig.dsd_tablet_max_size));fE.append(ek.$2(tabBootstrap.ViewerBootstrap.get_instance().getCompositeSizeForDeviceType('desktop'),0.75));fE.append(ss.formatString('} else if ( divElement.offsetWidth > {0} ) { ',tsConfig.dsd_phone_max_size));fE.append(ek.$2(tabBootstrap.ViewerBootstrap.get_instance().getCompositeSizeForDeviceType('tablet'),0.75));fE.append('} else { ');fE.append(ek.$2(tabBootstrap.ViewerBootstrap.get_instance().getCompositeSizeForDeviceType('phone'),1.77));fE.append('} ');var fF=$.Deferred();e=fF.resolve(fE.toString()).promise();return e};ek.$2=function(e,fE){return ek.$1({minWidth:e.minWidth,maxWidth:e.maxWidth,minHeight:e.minHeight,maxHeight:e.maxHeight},fE)};ek.$1=function(e,fE){var fF=new ss.StringBuilder('');var fG=ek.$5();if(e.dashboardSizingMode==='automatic'||e.minWidth===0&&e.maxWidth===0){fF.append("vizElement.style.width='100%';")}else if(e.minWidth===e.maxWidth){fF.append(ss.formatString("vizElement.style.width='{0}px';",e.minWidth))}else{if(e.minWidth>0){fF.append(ss.formatString("vizElement.style.minWidth='{0}px';",e.minWidth))}else{fF.append("vizElement.style.width='100%';")}if(e.maxWidth>0){fF.append(ss.formatString("vizElement.style.maxWidth='{0}px';",e.maxWidth))}else{fF.append("vizElement.style.maxWidth='100%';")}if(e.minWidth>0&&e.maxWidth>0&&e.minWidth!==e.maxWidth){fF.append("vizElement.style.width='100%';")}}if(e.dashboardSizingMode==='automatic'||e.minHeight===0&&e.maxHeight===0){fF.append(ss.formatString("vizElement.style.height=(divElement.offsetWidth*{0})+'px';",fE))}else if(e.minHeight===e.maxHeight){fF.append(ss.formatString("vizElement.style.height='{0}px';",e.minHeight+fG))}else{if(e.minHeight>0){fF.append(ss.formatString("vizElement.style.minHeight='{0}px';",e.minHeight+fG))}else{fF.append(ss.formatString("vizElement.style.height=(divElement.offsetWidth*{0})+'px';",fE))}if(e.maxHeight>0){fF.append(ss.formatString("vizElement.style.maxHeight='{0}px';",e.maxHeight+fG))}else{fF.append(ss.formatString("vizElement.style.maxHeight=(divElement.offsetWidth*{0})+'px';",fE))}if(e.minHeight>0&&e.maxHeight>0&&e.minHeight!==e.maxHeight){fF.append(ss.formatString("vizElement.style.height=(divElement.offsetWidth*{0})+'px';",fE))}}return fF.toString()};ek.$8=function(e){var fE=e.protocol+'//'+e.host+'/javascripts/api/viz_v1.js';return"<script type='text/javascript' src='"+fE+"'></script>"};ek.$5=function(){var e=0;if(tsConfig.toolbarvis){e+=27}e+=tabBootstrap.VizLayoutConstants.get_tabsHeight();return e};ek.$7=function(){return tsConfig.facebookRedirectURI||ek.$c};ek.$3=function(e,fE,fF,fG){var fH=fE!==fF;var fI=e;var fJ=':'+fG+'='+(fE?'yes':'no');var fK=new RegExp(':'+fG+'=[^&]+');if(!!fI.match(fK)){if(fH){fI=fI.replace(fK,fJ)}else{fI=fI.replace(fK,'');fI=fI.replace(new RegExp('&&'),'&');fI=fI.replace(new RegExp('\\?&'),'?');fI=fI.replace(new RegExp('&$'),'');fI=fI.replace(new RegExp('\\?$'),'')}}else if(fH){if(!!fI.match(new RegExp('[?]'))){fI=fI+'&'+fJ}else{fI=fI+'?'+fJ}}return fI};ek.$4=function(){var e=(new Date).getTime().toString();return'viz'+e};global.tab.ShareViewModel=ek;var el=function(e){spiff.PureRenderComponent.call(this,e);this.state={isConnectionClassSupported:false}};el.__typeName='tab.SheetReconnectWidget';global.tab.SheetReconnectWidget=el;var em=function(){this.shownX=0;this.shownY=0;this.origX=0;this.origY=0;this.position=null;this.viewport=null;ss.EventArgs.call(this)};em.__typeName='tab.ShownEventArgs';em.areShownArgsSame=function(e,fE){if(ss.isNullOrUndefined(e)&&ss.isNullOrUndefined(fE)){return true}if(ss.isNullOrUndefined(e)&&ss.isValue(fE)||ss.isValue(e)&&ss.isNullOrUndefined(fE)){return false}var fF;fF=e.origX===fE.origX;fF=fF&&e.origY===fE.origY;fF=fF&&e.shownX===fE.shownX;fF=fF&&e.shownY===fE.shownY;fF=fF&&e.position===fE.position;fF=fF&&tab.RectUtil.isEqual(e.viewport.get_dimensions(),fE.viewport.get_dimensions());return fF};global.tab.ShownEventArgs=em;var en=function(){this.tooltipAnchorY=0;em.call(this)};en.__typeName='tab.ShownTooltipEventArgs';en.areShownArgsSame=function(e,fE){return em.areShownArgsSame(e,fE)&&e.tooltipAnchorY===fE.tooltipAnchorY};global.tab.ShownTooltipEventArgs=en;var eo=function(e){React.Component.call(this,e);this.state=new ep};eo.__typeName='tab.SimpleTextContentDialog';global.tab.SimpleTextContentDialog=eo;var ep=function(){this.detailsAreExpanded=false};ep.__typeName='tab.SimpleTextContentDialogState';global.tab.SimpleTextContentDialogState=ep;var eq=function(e){this.$6=750;this.$9=null;this.$7=null;this.$8=null;this.$5=new tab.DisposableHolder;this.$1$1=null;this.serverMarkBounds=null;tab.Param.verifyValue(e,'tooltip');this.$9=e;var fE=tab.FeatureParamsLookup.getInt(11);if(ss.isValue(fE)){this.$6=ss.coalesce(fE,0)}};eq.__typeName='tab.SmoothTooltipBehavior';global.tab.SmoothTooltipBehavior=eq;var er=function(){};er.__typeName='tab.Social';er.twitterPopup=function(e,fE){var fF=$('#twitter_creator');var fG=(ss.isValue(fF)?fF.attr('content'):null);if(!ss.isNullOrEmptyString(fG)){fG=' '+fG}fE+=fG;var fH={};fH['url']=e;fH['via']='tableaupublic';fH['text']=fE;fH['related']='tableau';var fI='https://twitter.com/share?'+$.param(fH);var fJ=null;var fK='scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=680,height=350';window.open(fI,fJ,fK)};er.facebookPopup=function(e,fE,fF,fG,fH,fI){var fJ={};fJ['app_id']=e;fJ['link']=fE;fJ['picture']=fF;fJ['name']=fG;fJ['description']=fH;if(!!fI&&fI.length>0){fJ['redirect_uri']=fI}var fK='http://www.facebook.com/dialog/feed?'+$.param(fJ);var fL=null;var fM='scrollbars=yes,resizable=yes,toolbar=no,location=no,width=1000,height=565';var fN=window.open(fK,fL,fM);if(ss.isValue(fN)&&typeof(fN['focus'])==='function'){fN.focus()}};er.mailTo=function(e,fE){var fF=ss.mkdict(['body',e]);if(!!fE){fF['subject']=fE}var fG='mailto:?'+$.param(fF);if(tsConfig.is_mobile&&!tsConfig.is_mobile_app&&BrowserSupport.BrowserSupport.IsSafari()){window.location.href=fG}else{var fH=window.open(fG,'MailWindow');if(ss.isValue(fH)){window.setTimeout(function(){try{if(fH.location.href==='about:blank'){fH.close()}}catch(fI){}},999)}}};global.tab.Social=er;var es=function(e,fE){React.Component.call(this,e,fE);var fF=e.users;var fG=((fF.length===0)?'':fF[0].friendlyName);var fH=e.groups;var fI=((fH.length===0)?'':fH[0].name);var fJ=(ss.isValue(this.props.selfServiceSchedulesModule)?this.props.selfServiceSchedulesModule.get_defaultRecurrence():null);this.state={mode:0,message:null,subject:e.defaultSubject,includeValue:'0',scheduleValue:'0',email:e.email,users:e.users,groups:e.groups,usersText:this.$0(fF.length,fG,tab.Strings.ToolbarSubscribeAddUsersPlaceholder),groupsText:this.$0(fH.length,fI,tab.Strings.ToolbarSubscribeAddGroupsPlaceholder),recurrenceModel:fJ,sendOnlyWhenDataPresent:false,selfSubscribe:!e.isSelfSubscribeCheckboxEnabled}};es.__typeName='tab.SubscribeComponent';global.tab.SubscribeComponent=es;var et=function(e){ss.makeGenericType(dF,[tab.ISelfServiceSchedulesModule,ev,Object]).call(this,e)};et.__typeName='tab.SubscribeComponentContainer';global.tab.SubscribeComponentContainer=et;var eu=function(e,fE){ss.makeGenericType(spiff.ReactSpiffAdapter$3,[ex,ew,Object]).call(this,tab.ObjectRegistry.newView(ex).call(null,[e.viewModel]),e,fE)};eu.__typeName='tab.SubscribeComponentDeprecated';global.tab.SubscribeComponentDeprecated=eu;var ev=function(){this.schedules=null;this.defaultSubject=null;this.email=null;this.emailIsValid=null;this.users=null;this.groups=null;this.onCancel=null;this.addSubscribersComponentProps=null;this.createSubscriptions=null;this.createSubscriptionsWithSelfServiceSchedule=null;this.setEmail=null;this.subscriptionsPageUrl=null;this.userSettingsPageUrl=null;this.sendOnlyWhenDataPresentCheckboxVisible=false;this.isSelfSubscribeCheckboxEnabled=false;this.isSelfServiceSchedulesEnabled=false;this.selfServiceSchedulesModule=null};ev.__typeName='tab.SubscribeProps';global.tab.SubscribeProps=ev;var ew=function(){this.viewModel=null};ew.__typeName='tab.SubscribePropsDeprecated';global.tab.SubscribePropsDeprecated=ew;var ex=function(e,fE){this.$E=null;this.$z=null;this.$C=null;this.$x=null;this.$B=null;this.$D=null;this.$A=null;this.menuTheme=0;this.$y=null;ss.makeGenericType(spiff.BaseView$1,[ey]).call(this,e,new ez);this.menuTheme=fE;this.$E=e;tab.ModuleManager.load(tab.ISelfServiceSchedulesModule).call(null,[]).done(ss.mkdel(this,function(fF){this.$9();this.$q(fF.get_defaultRecurrence())}));this.$E.add_schedulesChanged(ss.mkdel(this,this.handleSchedulesUpdated));this.$E.add_usersChanged(ss.mkdel(this,this.$m));this.$E.add_groupsChanged(ss.mkdel(this,this.$k));this.$E.add_addSubscribersPopupStateChanged(ss.mkdel(this,this.$w))};ex.__typeName='tab.SubscribeView';ex.get_sendOnlyWhenDataPresentCheckboxClass=function(){return'tab-sendOnlyWhenDataPresentCheckbox'};global.tab.SubscribeView=ex;var ey=function(){this.$f=[];this.$b=[];this.$d=[];this.addSubscribersViewModel=null;this.$e=false;this.$c=0;this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=null;this.$3$6=null;this.$3$7=null;this.$3$8=null;this.$3$9=null;this.$3$10=false;this.$3$11=null;this.$3$12=null;this.$3$13=null;this.$3$14=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);if(!tsConfig.is_guest||tab.FeatureFlags.isEnabled('SelfServiceSchedules')&&tsConfig.self_service_schedules_enabled){tab.StartupUtils.callOnceAfterInitialBootstrap(ss.mkdel(this,function(){tab.WorkgroupServerCommands.getSchedules(ss.mkdel(this,function(e){this.$d=e.filter(function(fE){return fE.get_schedulePresModel().scheduledAction==='Subscription'});if(!ss.staticEquals(this.$3$1,null)){this.$3$1()}this.incrementProps()}))}))}this.set_email(tsConfig.current_user_email);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,this.$6)));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,this.disposeViewModel)));this.set_subscriptionsPageUrl((ss.isNullOrEmptyString(tsConfig.site_url_name)?ss.formatString('/#/workbooks/{0}/subscriptions',tsConfig.current_workbook_id):ss.formatString('/#/site/{0}/workbooks/{1}/subscriptions',tsConfig.site_url_name,tsConfig.current_workbook_id)));if(tab.FeatureFlags.isEnabled('UserTimeZone')){this.set_userSettingsPageUrl((ss.isNullOrEmptyString(tsConfig.site_url_name)?ss.formatString('/#/user/{0}/{1}/settings',tsConfig.current_user_domain_name,tsConfig.current_user_name):ss.formatString('/#/site/{0}/user/{1}/{2}/settings',tsConfig.site_url_name,tsConfig.current_user_domain_name,tsConfig.current_user_name)))}};ey.__typeName='tab.SubscribeViewModel';ey.isSelfServiceSchedulesEnabled=function(){return tab.FeatureFlags.isEnabled('SelfServiceSchedules')&&tsConfig.self_service_schedules_enabled};global.tab.SubscribeViewModel=ey;var ez=function(){this.subscribeViewArea=null;this.subscribeViewsToggleLabel=null;this.subscribeThisView=null;this.subscribeAllViews=null;this.subscribeSelfArea=null;this.subscribeScheduleDropdown=null;this.subscribeEmail=null;this.addSubscribersLabel=null;this.addUsersPlaceholder=null;this.addGroupsPlaceholder=null;this.manageSubscribersLabel=null;this.subscribeSubject=null;this.subscribeMessage=null;this.subscribeButton=null;spiff.Template.call(this,$("<div class='tab-subscribeView tab-toolbarFlyout'></div>"));this.subscribeViewArea=this.domRoot};ez.__typeName='tab.SubscribeViewTemplate';global.tab.SubscribeViewTemplate=ez;var eA=function(e){this.$6=(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')?24:25);this.textAreaElement=null;this.$5=null;this.$4=null;React.Component.call(this,e);this.$5=ss.mkdel(this,function(fF){this.textAreaElement=fF});this.$4=ss.mkdel(this,function(fF){this.props.onDoneButtonClick(this.textAreaElement.value)});var fE=ss.isValue(this.props.message)&&this.props.message.length>=eA.characterWarningLimit;this.state={isError:false,isWarning:fE,warningMessage:(fE?tab.Strings.MessageCharacterLimit(this.props.message.length,eA.characterLimit):null)}};eA.__typeName='tab.SubscriptionMessageEditor';global.tab.SubscriptionMessageEditor=eA;var eB=function(e,fE,fF){this.tabLabelElement=null;this.tabContentElement=null;this.tabIndex=0;ss.EventArgs.call(this);this.tabLabelElement=e;this.tabContentElement=fE;this.tabIndex=fF};eB.__typeName='tab.TabEventArgs';global.tab.TabEventArgs=eB;var eC=function(e){el.call(this,e)};eC.__typeName='tab.TableauServerReconnectWidget';global.tab.TableauServerReconnectWidget=eC;var eD=function(e){this.$6=null;this.$c=null;this.$d=null;this.$m=null;this.$f=null;this.$k=0;this.$h=null;this.$l=null;this.$i=false;this.$7=null;this.$8=null;this.$9=null;this.$a=null;this.$j=false;this.$e=0;this.$g=0;this.$b=null;this.dirtyRect=null;this.pixelRatio=0;this.$6=e;this.$c=new Array;this.$d=cw.instance();this.$m=new tab.TransformationMatrix;this.reset();this.clearDirtyRect()};eD.__typeName='tab.TabRenderContext2D';eD.$0=function(e){if(!tab.MiscUtil.isNullOrEmpty$3(e)){var fE=e.split(' ');for(var fF=0;fF<fE.length;fF++){var fG=fE[fF];var fH=parseFloat(fG);if(isFinite(fH)){return fH}}}return 8};global.tab.TabRenderContext2D=eD;var eE=function(e){this.textSelectable=false;this.textSelectable=e};eE.__typeName='tab.TextRegionOptions';global.tab.TextRegionOptions=eE;var eF=function(e){this.textRegionBoundaryElem=null;this.contentElem=null;this.formatIndicatorElem=null;this.chevron=null;spiff.Template.call(this,$(eF.$0(e)));var fE=ss.mkdel(this,this.getElementBySelector);this.textRegionBoundaryElem=fE('.tab-textRegion-boundary');this.contentElem=fE('.tab-textRegion-content');this.formatIndicatorElem=fE('.tab-formatThisZone');this.formatIndicatorElem.hide()};eF.__typeName='tab.TextRegionTemplate';eF.$0=function(e){var fE='';if(e>0){fE=ss.formatString("role='heading' aria-level='{0}'",e)}return ss.formatString("<div {0} class='tab-textRegion'>\n            <div class='tab-textRegion-boundary'>\n                <div class='tab-textRegion-content'></div>\n            </div>\n            <div class='tab-formatThisZone'></div>\n        </div>",fE)};global.tab.TextRegionTemplate=eF;var eG=function(e){eG.$ctor1.call(this,e,-1)};eG.__typeName='tab.TextRegionView';eG.$ctor1=function(e,fE){this.$g=false;ss.makeGenericType(spiff.BaseView$1,[eH]).call(this,e,new eF(fE));this.$i().add_newTextRegion(ss.mkdel(this,this.handleNewTextRegion));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$i().remove_newTextRegion(ss.mkdel(this,this.handleNewTextRegion))})));this.disposables.add$1(spiff.TableauClickHandler.targetAndRightClick(this.element[0],ss.mkdel(this,this.handleRightClick)));if(tsConfig.is_authoring&&!tsConfig.is_mobile&&tab.FeatureFlags.isEnabled('RichTextEditingWorksheetTitle')&&this.get_viewModel().isTitle()){this.disposables.add$1(spiff.TableauClickHandler.targetAndDoubleClick(this.element[0],ss.mkdel(this,this.handleDoubleClick)));var fF={};fF.hoverDelay=0;spiff.EventHandleSpecExtensions.setHandler(fF,'mouseleave',ss.mkdel(this,this.handleMouseLeave));spiff.EventHandleSpecExtensions.setHandler(fF,'hover',ss.mkdel(this,this.handleHover));this.disposables.add$1(spiff.TableauClickHandler.targetAndConfig(this.element[0],fF));this.$h().addChevron(ss.mkdel(this,this.$c))}};eG.$3=function(e){return Math.round(e)===90};eG.$2=function(e){return Math.round(e)===-90};eG.$0=function(e,fE,fF){var fG={};fG['transform-origin']=fE;fG['transform']='rotate('+fF+'deg)';e.css(fG)};eG.$1=function(e,fE,fF,fG){var fH=0;if(fE>e){fF=(eG.$3(fG)?'h-align-right':'h-align-left')}switch(fF){case'h-align-left':{fH=0;break}case'h-align-right':{fH=e-fE;break}case'h-align-center':{fH=ss.Int32.div(e,2)-ss.Int32.div(fE,2);break}}return fH+'px'};global.tab.TextRegionView=eG;var eH=function(e){this.$5=null;this.options=new eE(true);this.$2$1=null;spiff.BaseViewModel.call(this);this.$5=e;this.$5.add_newText(ss.mkdel(this,this.handleNewTextRegion));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$5.remove_newText(ss.mkdel(this,this.handleNewTextRegion))})))};eH.__typeName='tab.TextRegionViewModel';global.tab.TextRegionViewModel=eH;var eI=function(){this.container=null;spiff.Template.call(this,$("<div class='tvimagesContainer'></div>"));this.container=this.getElementBySelector('.tvimagesContainer')};eI.__typeName='tab.TiledImageTemplate';global.tab.TiledImageTemplate=eI;var eJ=function(e){ss.makeGenericType(spiff.BaseView$1,[eK]).call(this,e,new eI)};eJ.__typeName='tab.TiledImageView';global.tab.TiledImageView=eJ;var eK=function(){spiff.BaseViewModel.call(this)};eK.__typeName='tab.TiledImageViewModel';global.tab.TiledImageViewModel=eK;var eL=function(){tab.GlobalKeyboardShortcut.call(this)};eL.__typeName='tab.ToggleFullScreenKeyboardShortcut';global.tab.ToggleFullScreenKeyboardShortcut=eL;var eM=function(e){var fE=function(){this.viewModel=null};ss.registerGenericClassInstance(fE,eM,[e],{},function(){return null},function(){return[]});return fE};eM.__typeName='tab.ToolbarButtonProps$1';ss.initGenericClass(eM,a,1);global.tab.ToolbarButtonProps$1=eM;var eN=function(){this.$2$1=null;this.$2$2=null;spiff.Template.call(this,$("<div class='tabToolbarButton' role='button'><span class='tabToolbarButtonImg' /><span class='tabToolbarButtonText' /></div>"));this.set_image(this.getElementBySelector('.tabToolbarButtonImg'));this.set_text(this.getElementBySelector('.tabToolbarButtonText'))};eN.__typeName='tab.ToolbarButtonTemplate';global.tab.ToolbarButtonTemplate=eN;var eO=function(e){this.$e=null;this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[eP]).call(this,e,new eN);this.get_viewModel().add_flyoverShown(ss.mkdel(this,this.$b));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_flyoverShown(ss.mkdel(this,this.$b))})));this.get_viewModel().add_flyoverHidden(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_flyoverHidden(ss.mkdel(this,this.$a))})));this.get_viewModel().add_clickButtonRequested(ss.mkdel(this,this.onClicked));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_clickButtonRequested(ss.mkdel(this,this.onClicked))})));this.get_viewModel().add_showButtonRequested(ss.mkdel(this,this.$d));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_showButtonRequested(ss.mkdel(this,this.$d))})));this.get_viewModel().add_hideButtonRequested(ss.mkdel(this,this.$9));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_hideButtonRequested(ss.mkdel(this,this.$9))})));this.$c()};eO.__typeName='tab.ToolbarButtonView';eO.create=function(e){return new eO(e)};global.tab.ToolbarButtonView=eO;var eP=function(e,fE,fF){this.$8=null;this.action=null;this.popupContent=null;this.dialogContent=null;this.$c=null;this.$d=null;this.$9=null;this.$6=null;this.$7=false;this.$a=false;this.popupViewModel=null;this.$b=new spiff.UberPopupShowOptions.$ctor1(2,1,0,eV.get_toolbarIsBottom(),false,false,null,null,true,0,null,987,true);this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;this.$2$9=false;this.$2$10=false;spiff.BaseViewModel.call(this);this.$c=e;this.$9=fE;this.action=fF;this.$7=!ss.staticEquals(fF,null)};eP.__typeName='tab.ToolbarButtonViewModel';eP.shouldShowButton=function(e,fE){if(ss.isNullOrUndefined(fE)){return false}switch(e.get_iconRes()){case'share':{return tsConfig.showShareOptions}case'edit':{return tsConfig.allow_authoring&&!tsConfig.previewMode&&!eV.$0()&&!tsConfig.is_mobile_app&&!fE.get_useSmallScreenToolbar()}case'customviews':{return tsConfig.allow_custom_views&&!fE.get_forceHideCustomViewsButton()&&!fE.get_useSmallScreenToolbar()}case'subscribe':{return tsConfig.allow_subscriptions&&tsConfig.workbook_allow_subscriptions}case'download':{return!tsConfig.previewMode}case'alert':{return tsConfig.allow_data_alert}case'public-logo':{return tsConfig.isPublic}default:{return true}}};eP.createSeparator=function(){var e=new eP(null,'tabAuthToolbarSeparator',null);e.set_isSeparator(true);return e};eP.createFromCommandItem=function(e,fE,fF){var fG=tab.CommandItemWrapper.create(e);tab.Param.verifyValue(e,'commandItem');var fH=new eP(fG.get_name(),fE+fG.get_iconRes(),null);fH.$7=ss.isNullOrUndefined(fG.get_enabled())||fG.get_enabled();fH.set_iconType(fG.get_iconRes());fH.set_description(fG.get_description());fH.set_itemWrapper(fG);var fI=fH;if(tab.FeatureFlags.isEnabled('ViewingToolbarModalDialog')||tsConfig.is_mobile_app||ss.isNullOrUndefined(fF)){fI.$8=function(){return eP.fetchDialogContent(fF,fI)}}else{fI.popupContent=eP.$1(e,fF,fI)}var fJ=tab.CommandSerializer.deserialize(fG.get_command());if(fI.get_iconType()==='edit'){fI.action=tab.ToolbarServerCommands.launchEditing}else if(fI.get_iconType()==='alert'){fI.action=function(){bz.handleDataAlertClick(fG.get_description())}}else if(ss.isValue(fJ)){fI.action=function(){var fK={ns:fJ.commandNamespace,cmd:fJ.commandName};fI.set_isActive(true);if(tab.WebCommandRegistry.get_instance().hasCommand(fK)){var fL=tab.WebCommandRegistry.get_instance().createCommandWithParams(fK,fJ.commandParams);fL.invoke();fI.set_isActive(false)}else{tab.ServerCommands.executeServerCommand(fJ,'immediately',function(fM){fI.set_isActive(false)},function(fM){fI.set_isActive(false)})}}}return fI};eP.fetchDialogContent=function(e,fE){var fF=$.Deferred();if(fE.get_iconType()==='download'){tab.ModuleManager.load(tab.IDownloadDialogModule).call(null,[]).done(function(fG){fE.dialogContent=fE.dialogContent||fG.buildDialogContent();fF.resolve(fE.dialogContent)})}else{fE.dialogContent=fE.dialogContent||eP.$0(fE.get_iconType(),e);fF.resolve(fE.dialogContent)}return fF.promise()};eP.$1=function(e,fE,fF){var fG=tab.CommandItemWrapper.create(e);tab.Param.verifyValue(e,'commandItem');var fH=function(){var fL=ss.getEnumerator(fE.get_nonVizItems());try{while(fL.moveNext()){var fM=fL.current();if(!ss.referenceEquals(fM,fF)){fM.$3()}}}finally{fL.dispose()}};fF.add_flyoverShown(fH);fF.disposables.add$1(new tab.CallOnDispose(function(){fF.remove_flyoverShown(fH)}));switch(fG.get_iconRes()){case'download':{var fI=new ca;fI.add_downloadInitiated(ss.mkdel(fF,fF.$3));fF.disposables.add$1(new tab.CallOnDispose(function(){fI.remove_downloadInitiated(ss.mkdel(fF,fF.$3))}));return fI}case'share':{return new ek}case'customviews':{var fJ=fE.get_customViewsViewModel();fJ.hideView=ss.delegateCombine(fJ.hideView,ss.mkdel(fF,fF.$3));fF.disposables.add$1(new tab.CallOnDispose(function(){var fL=fE.get_customViewsViewModel();fL.hideView=ss.delegateRemove(fL.hideView,ss.mkdel(fF,fF.$3))}));return fE.get_customViewsViewModel()}case'subscribe':{var fK=new ey;fK.add_subscribeSuccess(ss.mkdel(fF,fF.$3));fF.disposables.add$1(new tab.CallOnDispose(function(){fK.remove_subscribeSuccess(ss.mkdel(fF,fF.$3))}));return fK}case'public-logo':{return new dE}default:{return null}}};eP.$0=function(e,fE){switch(e){case'download':{if(!tab.FeatureFlags.isEnabled('ViewingToolbarModalDialog')&&tsConfig.is_mobile_app){return new ca}else{return null}}case'share':{return new ek}case'customviews':{return(ss.isNullOrUndefined(fE)?null:fE.get_customViewsViewModel())}case'subscribe':{return new ey}case'public-logo':{return new dE}default:{return null}}};global.tab.ToolbarButtonViewModel=eP;var eQ=function(e,fE,fF){this.$e=null;eP.call(this,e,fE,null);tab.Param.verifyValue(fF,'menuBuilder');this.$e=fF;this.set_enabled(this.createMenu().menuItems.some(function(fG){return fG.enabled}))};eQ.__typeName='tab.ToolbarDropdownButtonViewModel';global.tab.ToolbarDropdownButtonViewModel=eQ;var eR=function(e,fE,fF){this.$g=null;this.$f=null;this.$3$1=null;this.$3$2=null;eP.call(this,e,fE,null);tab.Param.verifyValue(fF,'menuBuilder');this.$g=fF;this.$f=this.createMenu();this.set_enabled(this.$f.menuItems.some(function(fK){return fK.enabled}));if(this.get_enabled()){var fG=0;var fH=0;for(var fI=0;fI<this.$f.menuItems.length;fI++){var fJ=this.$f.menuItems[fI];if(fJ.checkState!==0){fG=fH;break}fH++}fH=0;this.set_props({dropdownType:0,menuItemInfos:_.map(this.$f.menuItems,function(fK){return{displayValue:fK.name,disabled:!fK.enabled,value:(fH++).toString()}}),containerStyle:{width:'97px'},selectedValue:fG.toString(),onSelect:ss.mkdel(this,this.$e),testId:'FitDropdown'})}};eR.__typeName='tab.ToolbarDropdownMenuViewModel';global.tab.ToolbarDropdownMenuViewModel=eR;var eS=function(){this.toolbar=null;this.leftItems=null;this.rightItems=null;spiff.Template.call(this,$((eV.$0()?"\n            <div class='tab-toolbar public tab-fill'>\n                <div class='tab-vizItems tab-fill-left' />\n                <div class='tab-nonVizItems tab-fill-right' />\n            <div/>":"\n            <div class='tab-toolbar tab-fill'>\n                <div class='tab-vizItems tab-fill-left' />\n                <div class='tab-nonVizItems tab-fill-right' />\n            <div/>")));this.toolbar=this.domRoot;this.leftItems=this.getElementBySelector('.tab-vizItems');this.rightItems=this.getElementBySelector('.tab-nonVizItems')};eS.__typeName='tab.ToolbarTemplate';global.tab.ToolbarTemplate=eS;var eT=function(e,fE,fF,fG,fH){this.$e=null;eP.call(this,e,fF,fG);this.$e=fH;this.set_iconType(fE)};eT.__typeName='tab.ToolbarToggleButtonViewModel';eT.createFromCommandItems=function(e,fE,fF){var fG;var fH;var fI=tab.CommandItemWrapper.create(e);var fJ=tab.CommandItemWrapper.create(fE);if(!ss.isValue(fI.get_enabled())||fI.get_enabled()){fG=fI;fH=fJ}else if(!ss.isValue(fJ.get_enabled())||fJ.get_enabled()){fG=fJ;fH=fI}else{return null}var fK=eP.createFromCommandItem(fG.get_item(),fF);var fL=new eT(fK.get_text(),fK.get_iconType(),fK.get_iconClass(),fK.get_buttonAction(),fH.get_name());fL.disposables.add$1(fK);fL.set_enabled(ss.isValue(fH)&&!fH.get_enabled());if(fL.get_enabled()){return fL}return null};global.tab.ToolbarToggleButtonViewModel=eT;var eU=function(e){this.$L=null;this.$O=0;this.$N=0;this.$M=0;this.$K=0;this.$J=0;this.$I=0;this.$H=0;this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=null;this.$3$6=null;this.$3$7=null;ss.makeGenericType(spiff.BaseView$1,[eV]).call(this,e,new eS);this.$L=e;this.$L.add_newToolbar(ss.mkdel(this,this.$l));ed.get_instance().add_fontPreparationComplete(ss.mkdel(this,this.$h));spiff.FullscreenUtil.add_fullscreenStateChanged(ss.mkdel(this,this.$g));this.disposables.add(ss.mkdel(this,function(){this.$L.remove_newToolbar(ss.mkdel(this,this.$l));ed.get_instance().remove_fontPreparationComplete(ss.mkdel(this,this.$h));spiff.FullscreenUtil.remove_fullscreenStateChanged(ss.mkdel(this,this.$g))}));if(tab.FeatureFlags.isEnabled('AccessibilityViewingToolbar')){this.element.on('keydown',ss.mkdel(this,this.$k));this.element.attr('role','toolbar')}if(tsConfig.allow_custom_views){var fE=ss.mkdel(this,function(fG,fH){this.updateCustomViewsButton();this.$i()});this.$u().add_dirtyChanged(fE);this.$u().add_customViewListChanged(fE);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$u().remove_dirtyChanged(fE);this.$u().remove_customViewListChanged(fE)})))}var fF=_.throttle(ss.mkdel(this,this.$h),50);this.disposables.add$1(spiff.EventUtil.bindWithDispose($(window),'resize',function(fG){fF()}))};eU.__typeName='tab.ToolbarView';eU.$3=function(e){if(ss.isValue(e)){e.element.show()}};eU.shouldAllowFullScreen=function(){return spiff.FullscreenUtil.get_fullscreenEnabled()&&!tsConfig.is_mobile};eU.$0=function(e){e.children('.tabToolbarButton').each(function(fE,fF){var fG=$(fF);fG.css('width',tab.DoubleUtil.roundToInt(fG.outerWidth(false))+1)})};eU.$2=function(e){e.children('.tabToolbarButton').css('width','')};eU.$1=function(e){e.addClass('hideLabels');e.removeClass('showLabels');e.find('.tabToolbarButton').each(function(fE,fF){var fG=$(fF);var fH=fG.find('.tabToolbarButtonText').text();fG.attr('title',fH);if(tab.FeatureFlags.isEnabled('AccessibilityViewingToolbar')){fG.removeAttr('aria-label')}})};eU.$4=function(e){e.addClass('showLabels');e.removeClass('hideLabels');e.find('.tabToolbarButton').each(function(fE,fF){fF.removeAttribute('title');if(tab.FeatureFlags.isEnabled('AccessibilityViewingToolbar')){var fG=$(fF);var fH=fG.find('.tabToolbarButtonText').text();fG.attr('aria-label',fH)}})};global.tab.ToolbarView=eU;var eV=function(e){this.$b=null;this.$c=[];this.$a=[];this.$8=new bn;this.$9=false;this.$2$1=null;this.$2$2=null;this.$2$3=false;this.$2$4=null;spiff.BaseViewModel.call(this);this.$b=e;if(!tsConfig.allow_custom_view_save){this.$9=true;this.$8.add_customViewListChanged(ss.mkdel(this,this.$7));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$8.remove_customViewListChanged(ss.mkdel(this,this.$7))})))}this.set_dialogHostViewModel(new bT);if(ss.isValue(this.$b.get_vizCommandItems())){this.$6(null)}var fE=ss.mkdel(this,function(){this.$6(null)});this.$b.add_newToolbar(fE);tab.CommandController.get().add_tabChangeCompleted(ss.mkdel(this,this.$6));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$b.remove_newToolbar(fE);tab.CommandController.get().remove_tabChangeCompleted(ss.mkdel(this,this.$6))})))};eV.__typeName='tab.ToolbarViewModel';eV.get_toolbarHeight=function(){return tabBootstrap.VizLayoutConstants.get_vizToolbarHeight()};eV.$0=function(){return tsConfig.isPublic};eV.get_toolbarIsBottom=function(){return(eV.$0()||tsConfig.embedded)&&!tsConfig.forceToolbarTop};global.tab.ToolbarViewModel=eV;var eW=function(e){this.tupleId=null;this.$i=null;this.$m=[];this.$k=false;this.$o=null;this.$n=false;this.$s=16;this.$j=16;this.$l=null;this.$r=null;this.$q=false;this.$p=false;this.$h=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=false;spiff.Widget.call(this,(e||eW.$0()).domRoot);this.$i=e||eW.$0();this.$n=tsConfig.is_mobile;if(!tsConfig.is_mobile){$(window).on(this.createNamespacedEventName('resize'),ss.mkdel(this,function(){this.$r=null}))}};eW.__typeName='tab.Tooltip';eW.$0=function(){return eW.$5||(eW.$5=new fb)};global.tab.Tooltip=eW;var eX=function(e,fE){eY.call(this,'sticky',e,fE);var fF=this.get_currentBehavior();fF.attach()};eX.__typeName='tab.TooltipBaseLegacyMode';global.tab.TooltipBaseLegacyMode=eX;var eY=function(e,fE,fF){this.disposables=new tab.DisposableHolder;this.tooltipBehaviors=null;this.$k=null;this.readyForHover=true;this.$l=false;this.$n=null;this.$m=false;this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.$1$6=null;this.$1$7=null;this.$1$8=null;this.$1$9=null;this.$1$10=null;this.$k=fE;this.set_visualIDPresModel(fF);this.set_tooltip(new eW);this.get_tooltip().add_closed(ss.mkdel(this,this.$7));this.get_tooltip().add_prePosition(ss.mkdel(this,this.$0));this.get_tooltip().add_showed(ss.mkdel(this,this.$0));this.get_tooltip().get_body().on('mouseleave.basemode',ss.mkdel(this,this.$9));this.set_ubertip(new fc(this.get_tooltip(),this.get_ubertipShouldEnforceButtonOrdering(),this.shouldAddCommandButtonsAndActions()));this.get_ubertip().add_actionExecuted(ss.mkdel(this,this.$a));this.get_ubertip().add_commandExecuted(ss.mkdel(this,this.$b));this.get_ubertip().add_ubertipMenuToggled(ss.mkdel(this,this.$d));this.get_ubertip().add_ubertipMenuClosed(ss.mkdel(this,this.$c));this.set_defaultBehaviorType(e);this.set_currentBehaviorType(e);this.tooltipBehaviors={};this.buildBehaviorsDictionary();this.$l=tab.ActionUtils.getApplicableActions(this.get_visualIDPresModel().worksheet,'on-hover',null).length>0||tab.ActionUtils.getApplicableActions(this.get_visualIDPresModel().worksheet,'explicitly',null).length>0;if(tsConfig.is_mobile){fn.add_mobileVizReduceTransform(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){fn.remove_mobileVizReduceTransform(ss.mkdel(this,this.$8))})))}};eY.__typeName='tab.TooltipBaseMode';eY.isUbertipHtmlEmpty=function(e){return ss.isValue(e)&&tab.MiscUtil.isNullOrEmpty$3(e.tooltipHtml)};global.tab.TooltipBaseMode=eY;var eZ=function(){};eZ.__typeName='tab.TooltipBehaviorType';global.tab.TooltipBehaviorType=eZ;var fa=function(e){this.$0=null;this.$0=e};fa.__typeName='tab.TooltipContextProvider';global.tab.TooltipContextProvider=fa;var fb=function(){spiff.Template.call(this,$("\n<div class='tab-tooltip'>\n  <div class='tab-tooltipContainer'>\n    <div class='tab-tooltipContent' waiRole='alert'></div>\n  </div>\n  <div class='tab-tooltipConnector'></div>\n</div>"))};fb.__typeName='tab.TooltipTemplate';global.tab.TooltipTemplate=fb;var fc=function(e,fE,fF){this.$1e=null;this.$16=new tab.DisposableHolder;this.$19=null;this.$1a=null;this.$17=false;this.$11=false;this.$18=false;this.$Z=null;this.$1b=-1;this.$12=null;this.$15=null;this.$13=null;this.$10=null;this.$14=null;this.$1d=[];this.$1c=[];this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.Widget.call(this,$("\n<div class='tab-ubertip'>\n  <div class='tab-ubertipContent'>\n    <div class='tab-ubertipTooltip'></div>\n    <div class='tab-ubertipActions'></div>\n  </div>\n  <div class='tab-ubertipCommandArea'>\n    <div class='tab-ubertipSelected'></div>\n    <div class='tab-ubertipCommands'></div>\n    <div class='tab-clear'></div>\n  </div>\n</div>"));this.$15=this.element.find('.tab-ubertipContent');this.$13=this.element.find('.tab-ubertipCommandArea');this.$10=this.element.find('.tab-ubertipActions');this.$14=this.element.find('.tab-ubertipCommands');this.$1e=e;this.$1e.add_showed(ss.mkdel(this,this.handleTooltipShowed));this.$1e.add_positionCalculated(ss.mkdel(this,this.handleTooltipPositionCalculated));this.$11=fF;this.$17=fE};fc.__typeName='tab.Ubertip';fc.$c=function(e){return e.get_commandType()===10};fc.$8=function(e){return _.find(e.buttonModels,fc.$c)};fc.$d=function(e){var fE=e.get_wrappedCommandItemPresModel();if(ss.isNullOrUndefined(fE)){return false}return fE.get_iconRes()===':/en_US/TQRC_MERGE'};fc.$9=function(e){return _.find(e.buttonModels,fc.$d)};fc.$5=function(e,fE){return _.find(e.buttonModels,function(fF){return fF.get_isPlaceholder()&&fF.get_commandType()===fE})};fc.$7=function(e){var fE;if(ss.isNullOrEmptyString(e.get_imageRes())){fE='Command'+e.get_commandType()}else if(ss.endsWithString(e.get_imageRes().toString(),'png')){fE=tab.TabResources.getResourceName(e.get_imageRes())}else{fE=tab.TabResources.lookupFullResourceAlias(e.get_imageRes())}return fE};fc.$b=function(e,fE){if(tab.MiscUtil.isNullOrEmpty$3(e)){return fE}var fF=ss.formatString('Ubertip{0}Mobile',e);var fG=tab.Strings.getString(fF);if(ss.referenceEquals(fG,ss.formatString('!{0}!',fF))){return fE}return fG};fc.$2=function(e){var fE=spiff.LabelButton.newNativeButton();if(tsConfig.is_mobile){fE.set_label(fc.$b(fc.$7(e),e.get_name()))}else{fE.set_label(e.get_name());fE.set_hoverTooltipText(e.get_description())}fE.set_disabled(true);var fF=new ss.StringBuilder('tab-command');fF.append(fc.$7(e));fE.element.addClass(fF.toString());fE.element.css('visibility','hidden');return fE};fc.$6=function(e){var fE=e.find('.tab-selection-relaxation');for(var fF=0;fF<fE.length;fF++){if(ss.isValue(fE.eq(fF).data('isSelected'))){return fF}}return-1};fc.$3=function(e){var fE=spiff.LabelButton.newNativeButton();fE.set_label(e.get_name());fE.set_hoverTooltipText(e.get_description());$('<span>').addClass('tabComboBoxButton').appendTo(fE.element);return fE};fc.$e=function(e,fE,fF){if(tsConfig.is_mobile&&!tab.MiscUtil.isNullOrEmpty$3(fF)){var fG=fc.$b(fF,fE.get_description());e.setLabelContents($('<div>'+fG+'</div>'))}else{e.set_label(fE.get_name())}};fc.$1=function(e,fE){e.element.addClass(ss.formatString('tab-command{0}',fE))};fc.$4=function(e){e.element.addClass('enabled'.toString())};fc.$a=function(e){return tab.TabResources.getResourceName(tab.TabResources.lookupFullResourceAlias(e))};fc.$0=function(e){return tab.ActionUtils.isFilterAction(e)||tab.ActionUtils.isHighlightAction(e)&&!tab.ActionUtils.isTargetOfActionLocal(e)||tab.ActionUtils.isNavigationAction(e)||tab.ActionUtils.isGroupAction(e)};global.tab.Ubertip=fc;var fd=function(){fe.call(this)};fd.__typeName='tab.UndoKeyboardShortcut';global.tab.UndoKeyboardShortcut=fd;var fe=function(){tab.CommandKeyboardShortcut.call(this)};fe.__typeName='tab.UndoRedoKeyboardShortcut';global.tab.UndoRedoKeyboardShortcut=fe;var ff=function(){};ff.__typeName='tab.URIUtil';ff.absolutizeURI=function(e,fE){if(ss.isValue(e)){e=e.trim()}if(ss.isNullOrEmptyString(e)){return e}var fF=new RegExp('^([a-zA-Z0-9]+):(?!\\d+(/|$))');var fG=e.match(fF);if(ss.isValue(fG)&&fG[1]!=='http'&&fG[1]!=='https'){if(fE){return''}return e}var fH='//';var fI=new RegExp('^https|^/?/?[a-zA-Z0-9.-]+:443(/|$)');var fJ=new RegExp('^http|^/?/?[a-zA-Z0-9.-]+:80(/|$)');if(fI.test(e)){fH='https://'}else if(fJ.test(e)){fH='http://'}var fK=new RegExp('^(https?:)?/?/?');e=e.replace(fK,fH);return e};global.tab.URIUtil=ff;var fg=function(e){React.Component.call(this,e)};fg.__typeName='tab.UserPillComponent';global.tab.UserPillComponent=fg;var fh=function(e){React.Component.call(this,e)};fh.__typeName='tab.UserPillsComponent';global.tab.UserPillsComponent=fh;var fi=function(e){this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.set_props({users:ss.arrayClone(e),userValidator:function(fE){return(fE.hasEmail?0:1)},invalidUserTextGenerator:function(fE){return tab.Strings.UserHasNoEmailAddressWarning},addUser:ss.mkdel(this,this.addUser),removeUser:ss.mkdel(this,this.removeUser)})};fi.__typeName='tab.UserPillsViewModel';global.tab.UserPillsViewModel=fi;var fj=function(){cZ.call(this,"<div class='tabCatLegendScrollButtonHolder'><span class='tabCatLegendScrollPrev'/><br><span class='tabCatLegendScrollNext'/></div>")};fj.__typeName='tab.VerticalIteratorButtonTemplate';global.tab.VerticalIteratorButtonTemplate=fj;var fk=function(e){this.$4=null;this.$3=0;this.$5=null;this.$2=new tab.DisposableHolder;this.$1$2=null;this.$4=e};fk.__typeName='tab.ViewController';fk.add_selectionChanged=function(e){fk.$1$1=ss.delegateCombine(fk.$1$1,e)};fk.remove_selectionChanged=function(e){fk.$1$1=ss.delegateRemove(fk.$1$1,e)};global.tab.ViewController=fk;var fl=function(e){this.$g=null;this.$h=null;this.$g=e};fl.__typeName='tab.ViewingToolbarCommands';global.tab.ViewingToolbarCommands=fl;var fm=function(){this.$8=0;this.$7=false;this.$6=false;this.$1$1=null;this.$1$2=null};fm.__typeName='tab.ViewportChangeDetector';fm.get_instance=function(){if(ss.isNullOrUndefined(fm.$0)){fm.$0=new fm}return fm.$0};global.tab.ViewportChangeDetector=fm;var fn=function(){};fn.__typeName='tab.VizEvent';fn.add_mobileVizExpandTransform=function(e){fn.$1$1=ss.delegateCombine(fn.$1$1,e)};fn.remove_mobileVizExpandTransform=function(e){fn.$1$1=ss.delegateRemove(fn.$1$1,e)};fn.add_mobileVizReduceTransform=function(e){fn.$1$2=ss.delegateCombine(fn.$1$2,e)};fn.remove_mobileVizReduceTransform=function(e){fn.$1$2=ss.delegateRemove(fn.$1$2,e)};fn.notifyMobileVizExpandTransform=function(){if(ss.isValue(fn.$1$1)){fn.$1$1()}};fn.notifyMobileVizReduceTransform=function(){if(ss.isValue(fn.$1$2)){fn.$1$2()}};global.tab.VizEvent=fn;var fo=function(e,fE){this.$2=null;this.$3=null;this.$4=null;P.call(this);this.$3=e;this.$4=fE};fo.__typeName='tab.WaitDialog';global.tab.WaitDialog=fo;var fp=function(e){spiff.PureRenderComponent.call(this,e)};fp.__typeName='tab.WaitDialogComponent';global.tab.WaitDialogComponent=fp;var fq=function(){this.content=null;spiff.Template.call(this,$("<div class='tab-web'></div>"))};fq.__typeName='tab.WebZoneTemplate';global.tab.WebZoneTemplate=fq;var fr=function(e,fE){this.$k=null;this.$j=null;this.$h=null;this.$i=null;ss.makeGenericType(spiff.BaseView$1,[fs]).call(this,e,new fq);this.$k=e;this.$j=fE;this.$k.add_newWebZone(ss.mkdel(this,this.$a));this.$j.add_propertyChanged(ss.mkdel(this,this.$c));this.$j.add_resizeZone(ss.mkdel(this,this.$b));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$k.remove_newWebZone(ss.mkdel(this,this.$a));this.$j.remove_propertyChanged(ss.mkdel(this,this.$c));this.$j.remove_resizeZone(ss.mkdel(this,this.$b))})))};fr.__typeName='tab.WebZoneView';global.tab.WebZoneView=fr;var fs=function(e){this.$3=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$3=e;this.$3.add_newWebZone(ss.mkdel(this,this.handleNewWebZone));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$3.remove_newWebZone(ss.mkdel(this,this.handleNewWebZone))})))};fs.__typeName='tab.WebZoneViewModel';global.tab.WebZoneViewModel=fs;var ft=function(e){this.$0=null;React.PureComponent.call(this,e);var fE=new fv;fE.componentType=null;this.state=fE;this.$0=tab.ModuleManager.load$1(e.moduleName,[])};ft.__typeName='tab.WidgetPluginContainer';global.tab.WidgetPluginContainer=ft;var fu=function(){this.moduleName=null;this.initialProps=null};fu.__typeName='tab.WidgetPluginContainerProps';global.tab.WidgetPluginContainerProps=fu;var fv=function(){this.componentType=null};fv.__typeName='tab.WidgetPluginContainerState';global.tab.WidgetPluginContainerState=fv;var fw=function(){};fw.__typeName='tab.WidgetUtil';fw.newMenuItemsFromCommands=function(e,fE,fF,fG){if(ss.isNullOrUndefined(fE)){return}var fH=tab.CommandsPresModelWrapper.create(fE);if(!ss.isValue(fH.get_commandItems())){return}var fI=ss.coalesce(fH.get_defaultItem(),-1);var fJ=-1;var fK=true;var fL=fH.get_commandItems();for(var fM=0;fM<fL.length;fM++){var fN=fL[fM];fJ++;var fO=null;var fP=tab.CommandItemWrapper.create(fN);if(!fw.$1(fP,fG)){continue}var fQ=fJ===fI||fP.get_isDefault();switch(fP.get_commandsType()){case'item':{fO=spiff.MenuItem.newItem(fF(fN),fP.get_name());fO.description=fP.get_description();fO.enabled=ss.isNullOrUndefined(fP.get_enabled())||fP.get_enabled();break}case'separator':{if(!fK){fO=spiff.MenuItem.newDivider()}break}case'subcommands':{var fR=[];fw.newMenuItemsFromCommands(fR,fP.get_commands(),fF,fG);if(fR.length>0){fO=spiff.MenuItem.newItem(null,fP.get_name(),0,new spiff.Menu(fR))}break}}if(ss.isValue(fO)){fO.enabled=fP.get_enabled();fO.isDefault=fQ&&fO.enabled;if(fP.get_isRadioOn()){fO.checkState=2}else if(fP.get_isChecked()){fO.checkState=1}e.push(fO);fK=fO.isDivider}}if(e.length>0&&e[e.length-1].isDivider){ss.removeAt(e,e.length-1)}};fw.$1=function(e,fE){if(!e.get_isVisible()){return false}if(ss.isValue(e.get_command())&&ss.isValue(fE)){var fF=new tab.CommandModel;fF.command=tab.CommandSerializer.deserialize(e.get_command());tab.UbertipSerializer.setCommandType(fF);return fE.test(fF)}return true};fw.createDropdownMenuCommandHandler=function(e){var fE=tab.CommandItemWrapper.create(e);var fF=tab.CommandSerializer.deserialize(fE.get_command());var fG;fG=function(){var fH={ns:fF.commandNamespace,cmd:fF.commandName};if(tab.RichTextClientCommands.isRichTextEditingCommand(fF)){tab.RichTextClientCommands.callRichTextEditingCommand(fF)}else if(tab.WebCommandRegistry.get_instance().hasCommand(fH)){var fI=tab.WebCommandRegistry.get_instance().createCommandWithParams(fH,fF.commandParams);fI.invoke()}else{var fJ=fw.$0(fF);tab.ServerCommands.executeServerCommand(fF,fJ,tab.CommandUtils.createCommandRedirectSuccessHandler(null),null)}};return fG};fw.createDropdownMenuCommand=function(e){var fE=tab.CommandItemWrapper.create(e);var fF=tab.CommandSerializer.deserialize(fE.get_command());return fF};fw.$0=function(e){var fE='immediately';if(ss.contains(fw.$2,e.commandName)){fE='none'}return fE};fw.commandMenuItemClicked=function(e){if(ss.referenceEquals(ss.getInstanceType(e.data),Function)){e.data()}else{var fE=e.data;tab.ServerCommands.executeServerCommand(fE,'immediately')}};fw.menuViewModelFromCommands=function(e,fE,fF,fG,fH){tab.Param.verifyValue(e,'commands');var fI=tab.CommandsPresModelWrapper.create(e);if(tab.MiscUtil.isNullOrEmpty$1(fI.get_commandItems())){if(ss.isValue(fF)){fF()}return null}var fJ=[];fw.newMenuItemsFromCommands(fJ,e,fH||fw.createDropdownMenuCommandHandler);var fK=new spiff.Menu(fJ);var fL=spiff.MenuViewModel.createForMenu(fK,fE,null,fF,fG,true);return fL};fw.getMenuItemsInFlatList=function(e){var fE=[];if(ss.isValue(e)){for(var fF=0;fF<e.length;fF++){var fG=e[fF];fw.addMenuItemToList(fG,fE)}}return fE};fw.addMenuItemToList=function(e,fE){if(e.isDivider){}else if(ss.isValue(e.subMenu)&&ss.isValue(e.subMenu.menuItems)){for(var fF=0;fF<e.subMenu.menuItems.length;fF++){var fG=e.subMenu.menuItems[fF];fw.addMenuItemToList(fG,fE)}}else{fE.push(e)}};fw.getMenuItemInfos=function(e){var fE=[];if(ss.isValue(e)){for(var fF=0;fF<e.length;fF++){var fG=e[fF];fw.addMenuItemInfoToList(fG,fE)}}return fE};fw.addMenuItemInfoToList=function(e,fE){var fF=((e.checkState===1||e.checkState===2)?true:null);if(e.isDivider){fE.push({isDivider:true})}else if(ss.isValue(e.subMenu)){var fG=[];for(var fH=0;fH<e.subMenu.menuItems.length;fH++){var fI=e.subMenu.menuItems[fH];fw.addMenuItemInfoToList(fI,fG)}fE.push({value:e.name,displayValue:e.name,checked:fF,disabled:!e.enabled,menuItemInfos:fG})}else{fE.push({value:e.name,displayValue:e.name,checked:fF,disabled:!e.enabled})}};global.tab.WidgetUtil=fw;var fx=function(){this.dashboardSpacer=null;this.centeringContainer=null;spiff.Template.call(this,fx.$0());this.dashboardSpacer=this.domRoot;this.centeringContainer=$('#centeringContainer')};fx.__typeName='tab.WorkbookTemplate';fx.$0=function(){return(tab.FeatureFlags.isEnabled('IframeSizedToWindow')?$("<div id='dashboard-spacer' class='dashboardSpacer' role='application'></div>"):$("<div class='tab-workbook' role='application'><div class='dashboardSpacer'/></div>"))};global.tab.WorkbookTemplate=fx;var fy=function(e){this.$j=null;this.$h=null;this.$i=null;this.$g=null;ss.makeGenericType(spiff.BaseView$1,[fz]).call(this,e,new fx);this.$j=e;this.$j.add_newDashboard(ss.mkdel(this,this.$a));this.$j.add_newDataConnectionPrompt(ss.mkdel(this,this.$b));if(this.$j.get_hasPrompt()){this.$b()}this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$j.remove_newDashboard(ss.mkdel(this,this.$a));this.$j.remove_newDataConnectionPrompt(ss.mkdel(this,this.$b))})));this.handleFullScreenChanged()};fy.__typeName='tab.WorkbookView';fy.findDashboardContainer=function(){return $(fy.dashboardSpacerSelector)};global.tab.WorkbookView=fy;var fz=function(e){this.$7=null;this.$6=null;this.$5=null;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.$7=e;this.$7.addNewDashboardHandler(ss.mkdel(this,this.$2));this.$7.add_newDataConnectionPrompt(ss.mkdel(this,this.$3));this.$7.add_dataConnectionPromptDismissed(ss.mkdel(this,this.$4));if(this.$7.get_hasPrompt()){this.$3(this.$7.get_connectionPromptModel())}this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$7.remove_newDataConnectionPrompt(ss.mkdel(this,this.$3));this.$7.remove_dataConnectionPromptDismissed(ss.mkdel(this,this.$4))})))};fz.__typeName='tab.WorkbookViewModel';fz.add_workbookResized=function(e){fz.$2$3=ss.delegateCombine(fz.$2$3,e)};fz.remove_workbookResized=function(e){fz.$2$3=ss.delegateRemove(fz.$2$3,e)};global.tab.WorkbookViewModel=fz;var fA=function(){spiff.Template.call(this,$("<div class='tab-zone'><div class='tab-zone-margin'><div class='tab-zone-padding'></div></div></div>"))};fA.__typeName='tab.ZoneTemplate';global.tab.ZoneTemplate=fA;var fB=function(e){this.$B=null;this.$z=null;this.$A=0;this.$w='';this.$x=null;this.$y=$.Deferred();ss.makeGenericType(spiff.BaseView$1,[fC]).call(this,e,new fA);this.$v().add_updateZone(ss.mkdel(this,this.$l));this.$v().add_resizeZone(ss.mkdel(this,this.$j));this.$v().add_updateZIndex(ss.mkdel(this,this.$k));this.$v().add_newZoneContent(ss.mkdel(this,this.$d));this.$v().add_validStateChanged(ss.mkdel(this,this.$o));if(tsConfig.is_authoring){this.disposables.add$1(new spiff.HoverBehavior(this,null,ss.mkdel(this,this.$m),null))}this.$A=0;this.$x=null};fB.__typeName='tab.ZoneView';fB.add_zoneBecameValid=function(e){fB.$3$1=ss.delegateCombine(fB.$3$1,e)};fB.remove_zoneBecameValid=function(e){fB.$3$1=ss.delegateRemove(fB.$3$1,e)};fB.$0=function(e){return'tabZoneId'+e};fB.getZoneElement=function(e){return $('#'+fB.$0(e)).get(0)};global.tab.ZoneView=fB;var fC=function(e){this.$n=null;this.zoneContentViewModel=null;this.$m=null;this.$l=false;this.$j=false;this.$k=false;this.$i=false;this.$h=false;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;spiff.BaseViewModel.call(this);this.$l=true;this.$n=e;this.$n.add_updateZone(ss.mkdel(this,this.$b));this.$n.add_updateZIndex(ss.mkdel(this,this.$a));this.$n.get_zoneCommonModel().add_resizeZone(ss.mkdel(this,this.$8));this.$n.add_newZoneContent(ss.mkdel(this,this.$3));this.$n.add_removeZoneContent(ss.mkdel(this,this.$7));this.$n.get_zoneCommonModel().add_changeZoneTitleVisibility(ss.mkdel(this,this.$9));this.$e();this.$f();if(ss.isValue(e)&&ss.isValue(e.get_model())){this.$3(e.get_model())}else if(tsConfig.is_authoring){this.$2()}};fC.__typeName='tab.ZoneViewModel';fC.calculateZoneZIndex=function(e){return 10+e.get_relativeZoneZIndex()};global.tab.ZoneViewModel=fC;var fD=function(){};fD.__typeName='tableau.ApiCommandExecutor';fD.execute=function(e,fE,fF){var fG=tab._ApiCommand.generateNextCommandId();var fH=new tab._ApiCommand(e,fG,fE,fF);E.get_instance().get_apiEventHandler().routeCommand(fH);return fG};fD.installResponderOverride=function(e){var fE=ss.safeCast(tabBootstrap.ViewerBootstrap.get_instance().apiResponder,tabBootstrap.ApiNativeHostResponder);if(ss.isValue(fE)){fE.set_responseAction(e)}else{}};global.tableau.ApiCommandExecutor=fD;ss.initEnum(b,a,{unloaded:'unloaded',loading:'loading',loaded:'loaded',error:'error'},true);ss.initEnum(c,a,{loading:'loading',loaded:'loaded'},true);ss.initClass(d,a,{});ss.initClass(f,a,{});ss.initClass(g,a,{});ss.initClass(h,a,{});ss.initClass(i,a,{$0:function(e,fE){var fF;if(this.$3==='horizontal'){fF=Math.round(this.$6)===Math.round(fE)}else{fF=Math.round(this.$5)===Math.round(e)}return fF},$1:function(e,fE){var fF=this.$4;var fG=e;var fH=fE;switch(this.$3){case'horizontal':{if(this.$2){fF=-fF}fG=this.$5+fF;break}case'up':{if(!this.$2){fF=-fF}fH=this.$6+fF;break}case'down':{if(this.$2){fF=-fF}fH=this.$6+fF;break}default:{break}}return{x:fG,y:fH}}});ss.initClass(j,a,{$0:function(e){e.set_linePattern(this.$1);e.set_textAngle(this.$5);e.set_shapeFillStyle(this.$2);e.set_textFillStyle(this.$6);e.set_shouldAntialias(this.$3);e.set_shouldUnderlineText(this.$4);e.set_transformation(this.$7)}});ss.initClass(k,a,{});ss.initClass(l,a,{$6:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},$7:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},$0:function(e){this.$3=new Date;this.$4=e.pageX;this.$5=e.pageY},$1:function(e){this.$2(e)},$2:function(e){var fE=new Date-this.$3;var fF=Math.abs(e.pageX-this.$4);var fG=Math.abs(e.pageY-this.$5);if(fE<=600&&fF<=10&&fG<=10&&!ss.staticEquals(this.$1$1,null)){this.$1$1(e)}}});ss.initClass(m,a,{$0:function(){return this.$1$1},$1:function(e){this.$1$1=e},$2:function(){return this.$1$2},$3:function(e){this.$1$2=e}});ss.initClass(n,a,{});ss.initClass(o,a,{},ss.EventArgs);ss.initClass(p,a,{addUser:function(e){if(_.any(this.state.users,function(fE){return fE.id===e.id})){return}this.setState(function(fE,fF){var fG=ss.arrayClone(fE.users);fG.push(e);return{users:fG,groups:fE.groups}})},addGroup:function(e){if(_.any(this.state.groups,function(fE){return fE.id===e.id})){return}this.setState(function(fE,fF){var fG=ss.arrayClone(fE.groups);fG.push(e);return{users:fE.users,groups:fG}})},setUsers:function(e){this.setState(function(fE,fF){return{users:e,groups:fE.groups}})},removeUser:function(e){this.setState(function(fE,fF){var fG=ss.arrayClone(fE.users);ss.remove(fG,e);return{users:fG,groups:fE.groups}})},removeGroup:function(e){this.setState(function(fE,fF){var fG=ss.arrayClone(fE.groups);ss.remove(fG,e);return{users:fE.users,groups:fG}})},removeRecipientByIndex:function(e){if(this.props.isUsers){this.removeUserByIndex(e)}else{this.removeGroupByIndex(e)}},removeUserByIndex:function(e){this.setState(function(fE,fF){var fG=ss.arrayClone(fE.users);ss.removeAt(fG,e);return{users:fG,groups:fE.groups}})},removeGroupByIndex:function(e){this.setState(function(fE,fF){var fG=ss.arrayClone(fE.groups);ss.removeAt(fG,e);return{users:fE.users,groups:fG}})},confirmSelection:function(){if(this.props.isUsers){this.props.confirmUsersSelection(this.state.users)}else{this.props.confirmGroupsSelection(this.state.groups)}},render:function(){var e='tabAddSubscribersContent';if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')){e+='BulkSubscribeOthers'}return spiff.DOMElements.div({className:e},this.$2(),this.$3(),this.$1())},$2:function(){var e='';if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')){e=(this.props.isUsers?tab.Strings.ToolbarSubscribeAddUsersHeader:tab.Strings.ToolbarSubscribeAddGroupsHeader)}else{e=tab.Strings.AddSubscribersHeader}return spiff.DOMElements.div({className:'tabAddSubscribersHeader'},e)},$0:function(e,fE,fF,fG,fH,fI,fJ){return{users:e,addUser:fE,removeUser:fF,groups:fG,addGroup:fH,removeRecipientByIndex:fI,isUsers:this.props.isUsers,userValidator:function(fK){return(fK.hasEmail?0:1)},placeholderMessage:fJ,emptySearch:function(fK){},noResults:function(fK){},isBulkSubscribe:tab.FeatureFlags.isEnabled('BulkSubscribeOthers')}},$3:function(){var e;if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')){e=this.$0(this.state.users,ss.mkdel(this,this.addUser),ss.mkdel(this,this.removeUser),this.state.groups,ss.mkdel(this,this.addGroup),ss.mkdel(this,this.removeRecipientByIndex),'')}else{e=this.$0(this.props.users,this.props.addUser,this.props.removeUser,this.props.groups,this.props.addGroup,this.props.removeRecipientByIndex,tab.Strings.SubscribeOthersSearchPlaceholder)}return React.createElement(dN,e)},$1:function(){if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')){return spiff.DOMElements.div({className:'tabAddSubscribersButtons'},React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(fH){this.props.cancelSelection()}),buttonType:3,testId:'add-subscribers-cancel',label:tab.Strings.SubscribeCancel,style:{marginRight:12}}),React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(fH){this.confirmSelection()}),buttonType:2,testId:'add-subscribers-done',label:tab.Strings.SubscribeDone}))}else{var e={clickHandler:this.props.cancelSelection,label:tab.Strings.SubscribeCancel,buttonClass:'tabAddSubscribersCancelButton',buttonStyle:3,tabIndex:0};var fE={clickHandler:this.props.confirmSelection,label:tab.Strings.DialogButtonOK,buttonClass:'tabAddSubscribersConfirmButton',buttonStyle:0,tabIndex:0};var fF=React.createElement(spiff.StyledButtonComponent,fE);var fG=React.createElement(spiff.StyledButtonComponent,e);return spiff.DOMElements.div({className:'tabAddSubscribersButtons'},fG,fF)}}},React.Component);ss.initClass(q,a,{});ss.initClass(r,a,{});ss.initClass(s,a,{add_propsUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_propsUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_selectionCanceled:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_selectionCanceled:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_selectionConfirmedUser:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_selectionConfirmedUser:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_selectionConfirmedGroup:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_selectionConfirmedGroup:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},get_viewModel:function(){return this},get_props:function(){return this.$2$5},set_props:function(e){this.$2$5=e},get_viewType:function(){return ss.makeGenericType(spiff.ReactHostView$3,[s,p,r])},updateUberPopupViewModel:function(e){},addUser:function(e){if(_.any(this.users,function(fE){return fE.id===e.id})){return}this.users.push(e);this.$2()},addGroup:function(e){if(_.any(this.groups,function(fE){return fE.id===e.id})){return}this.groups.push(e);this.$2()},setUsers:function(e){this.users=e;this.$2()},removeUser:function(e){ss.remove(this.users,e);this.$2()},removeGroup:function(e){ss.remove(this.groups,e);this.$2()},removeRecipientByIndex:function(e){if(this.get_props().isUsers){this.removeUserByIndex(e)}else{this.removeGroupByIndex(e)}this.$2()},removeUserByIndex:function(e){ss.removeAt(this.users,e)},removeGroupByIndex:function(e){ss.removeAt(this.groups,e)},disposeViewModel:function(){this.dispose()},cancelSelection:function(){this.users=this.originalUsers;this.groups=this.originalGroups;this.$2();this.raiseActionEvent(this.$2$2)},confirmSelection:function(){if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')&&!this.isUsers){this.raiseActionEvent$1(Array).call(this,this.$2$4,this.groups)}else{this.raiseActionEvent$1(Array).call(this,this.$2$3,this.users)}},updateProps:function(){var e=r.$ctor();e.users=this.users;e.addUser=ss.mkdel(this,this.addUser);e.removeUser=ss.mkdel(this,this.removeUser);e.groups=this.groups;e.addGroup=ss.mkdel(this,this.addGroup);e.removeGroup=ss.mkdel(this,this.removeGroup);e.removeRecipientByIndex=ss.mkdel(this,this.removeRecipientByIndex);e.isUsers=this.isUsers;e.cancelSelection=ss.mkdel(this,this.cancelSelection);e.confirmSelection=ss.mkdel(this,this.confirmSelection);e.confirmGroupsSelection=this.$2$4;e.confirmUsersSelection=this.$2$3;this.set_props(e)},$2:function(){this.updateProps();this.raiseActionEvent(this.$2$1)}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel,spiff.IContent,spiff.IUberPopupContent,ss.makeGenericType(spiff.IPropsProvider$1,[r])]);ss.initClass(t,a,{});ss.initClass(u,a,{});ss.initClass(v,a,{});ss.initClass(w,a,{});ss.initClass(x,a,{dispose:function(){this.$12.dispose();if(ss.isValue(this.$16)){this.$16.dispose();this.$16=null}if(ss.isValue(this.$15)){this.$15.dispose();this.$15=null}tab.CommandController.get().remove_tabChangeCompleted(ss.mkdel(this,this.handleNewLayout));tab.StartupUtils.remove_clientFullyLoaded(ss.mkdel(this,this.onClientFullyLoaded));tab.CommandController.get().remove_commandQueueComplete(ss.mkdel(this,this.onCommandComplete))},updateClients:function(e,fE){if(!ss.referenceEquals(this.$10,e)){var fF=this.$10;this.$10=e;if(tsConfig.allow_custom_views){var fG=(ss.isValue(fF)?fF.get_customViewsViewModel():null);if(ss.isValue(fG)){fG.remove_dirtyChanged(ss.mkdel(this,this.onCustomViewUpdated));fG.remove_customViewListChanged(ss.mkdel(this,this.onCustomViewListLoaded));fG.remove_customViewDestroyed(ss.mkdel(this,this.onCustomViewDestroyed));fG.remove_defaultCustomViewChanged(ss.mkdel(this,this.onCustomViewSetDefault))}var fH=(ss.isValue(e)?e.get_customViewsViewModel():null);if(ss.isValue(fH)){fH.add_dirtyChanged(ss.mkdel(this,this.onCustomViewUpdated));fH.add_customViewListChanged(ss.mkdel(this,this.onCustomViewListLoaded));fH.add_customViewDestroyed(ss.mkdel(this,this.onCustomViewDestroyed));fH.add_defaultCustomViewChanged(ss.mkdel(this,this.onCustomViewSetDefault))}}this.$11=false;if(ss.isValue(this.$16)){this.$16.dispose();this.$16=null}if(ss.isValue(this.$Z)&&ss.isValue(this.$10.get_toolbarCommands().get_toolbarViewModel())){this.$16=new B(this.$Z,this.$10.get_toolbarCommands().get_toolbarViewModel())}}if(!ss.referenceEquals(this.$14,fE)||ss.isValue(this.$15)&&!this.$15.get_eventHandlerAttached()&&ss.isValue(fE.get_flipboardNavigatorViewModel())){if(ss.isValue(this.$15)){this.$15.dispose()}this.$14=fE;if(ss.isValue(this.$14)){this.$15=new A(fE,this.$Z)}}_.defer(ss.mkdel(this,this.$W));if(!this.$13){var fI=tab.ApplicationModel.get_instance().get_workbook();if(ss.isValue(fI)){fI.addNewDashboardHandler(ss.mkdel(this,this.onNewDashboard));this.$13=true}}else{this.onNewDashboard(null)}},$W:function(){var e={};var fE=this.$10.get_viewControllers();for(var fF=0;fF<fE.length;fF++){var fG=fE[fF];e[fG.get_sheetName()]=fG}var fH=_.keys(this.$17);for(var fI=0;fI<fH.length;fI++){var fJ=fH[fI];if(!ss.keyExists(e,fJ)){this.$17[fJ].dispose();delete this.$17[fJ]}else{delete e[fJ]}}this.$Q(e)},$Q:function(e){_.each(_.keys(e),ss.mkdel(this,function(fE){var fF=e[fE];var fG=ss.mkdel(this,function(fH,fI){if(ss.referenceEquals(fF.get_sheetName(),fH)){this.onSelectionChanged(fH,fI)}});fk.add_selectionChanged(fG);this.$17[fE]=new tab.CallOnDispose(function(){fk.remove_selectionChanged(fG)})}))},handleEvent:function(e){var fE=e.data;if(ss.isNullOrUndefined(fE)||typeof(fE)!=='string'){return}var fF=fE;var fG=tab._ApiCommand.parse(fF);if(ss.isNullOrUndefined(fG.get_rawName())){return}this.routeCommand(fG)},routeCommand:function(e){switch(e.get_name()){case'api.GetClientInfoCommand':{this.$D(e);break}case'api.GetCurrentUrlCommand':{this.$F(e);break}case'api.ClearFilterCommand':{this.$6(e);break}case'api.ApplyCategoricalFilterCommand':{this.$2(e);break}case'api.ApplyRangeFilterCommand':{this.$4(e);break}case'api.ApplyRelativeDateFilterCommand':{this.$5(e);break}case'api.ApplyHierarchicalFilterCommand':{this.$3(e);break}case'api.RefreshDataCommand':{this.$x(e);break}case'api.RevertAllCommand':{this.$z(e);break}case'api.SwitchActiveSheetCommand':{this.$R(e);break}case'api.UpdateActiveSheetCommand':{this.$U(e);break}case'api.SelectMarksCommand':{this.$B(e);break}case'api.ClearSelectedMarksCommand':{this.$8(e);break}case'api.FetchSelectedMarksCommand':{this.$e(e);break}case'api.FetchParametersCommand':{this.$d(e);break}case'api.SetParameterValueCommand':{this.$G(e);break}case'api.InvokeCommandCommand':{this.$o(e);break}case'api.SetSheetSizeCommand':{this.$H(e);break}case'api.ShowHideToolbarCommand':{this.$M(e);break}case'api.GetFiltersListCommand':{this.$h(e);break}case'api.GetOneFilterInfoCommand':{this.$i(e);break}case'api.GetDataSourceCommand':{this.$f(e);break}case'api.GetDataSourcesCommand':{this.$g(e);break}case'api.FetchCustomViewsCommand':{this.$b(e);break}case'api.ShowCustomViewCommand':{this.$I(e);break}case'api.UpdateCustomViewCommand':{this.$V(e);break}case'api.MakeCurrentCustomViewDefaultCommand':{this.$q(e);break}case'api.RemoveCustomViewCommand':{this.$y(e);break}case'api.SaveNewCustomViewCommand':{this.$A(e);break}case'api.ActivateStoryPoint':{this.$15.activateStoryPoint(e);break}case'api.ActivatePreviousStoryPoint':{this.$15.activatePreviousStoryPoint(e);break}case'api.ActivateNextStoryPoint':{this.$15.activateNextStoryPoint(e);break}case'api.SwitchViz':{var fE=JSON.parse(e.get_parameters());tab.SessionServerCommands.switchToViz(fE['api.invokeCommandParam']);break}case'api.RevertStoryPoint':{this.$15.revertStoryPoint(e);break}case'api.GetSummaryTableCommand':{this.$j(e);break}case'api.GetUnderlyingTableCommand':{this.$l(e);break}case'api.ClearHighlightedMarksCommand':{this.$7(e);break}case'api.HighlightMarksCommand':{this.$m(e);break}case'api.HighlightMarksByPatternMatch':{this.$n(e);break}case'api.FetchHighlightedMarksCommand':{this.$c(e);break}case'api.GetToolbarState':{this.$k(e);break}case'api.Undo':{this.$T(e);break}case'api.Redo':{this.$w(e);break}case'api.ToggleUpdates':{this.$S(e);break}case'api.ShowShareDialog':{this.$O();break}case'api.ShowDataAlertDialog':{this.$K();break}case'api.ShowSubscribeDialog':{this.$P();break}case'api.ShowCustomViewsDialog':{this.$J();break}case'api.ShowPerformanceDialog':{this.$N();break}case'api.ShowDownloadDialog':{this.$L();break}}},handleNewLayout:function(e){var fE=e.item1;var fF=e.item2;this.$Z.sendEventNotification('api.TabSwitchEvent',fE,fF)},handleMarkSelectionEvent:function(e,fE){if(ss.referenceEquals(e,fE.primarySheet)){this.$Z.sendEventNotification('api.MarksSelectionChangedEvent',e,null)}},handleFilterChangeEvent:function(e,fE){if(ss.isNullOrUndefined(fE.primarySheet)){return}var fF=fE.cmdResult.commandReturn;var fG=fF['fn'];if(ss.isNullOrUndefined(fF['invalidValues'])&&ss.isNullOrUndefined(fF['invalidFieldCaption'])&&ss.isValue(fG)){var fH=null;var fI=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),fE.primarySheet);if(ss.isValue(fI)){var fJ=_.find(fI.get_filters(),function(fL){return ss.referenceEquals(fL.get_globalFieldName(),fG)});if(ss.isValue(fJ)){fH=fJ.get_filterPresModel().fieldCaption}}var fK=[fG,ss.coalesce(fH,fG)];this.$Z.sendEventNotification('api.FilterChangedEvent',e,JSON.stringify(fK))}},$p:function(e){return ss.referenceEquals(e,{ns:'tabdoc',cmd:'reset-filter'}.cmd)||ss.referenceEquals(e,{ns:'tabdoc',cmd:'clear-existing-filter'}.cmd)||ss.referenceEquals(e,{ns:'tabdoc',cmd:'range-filter'}.cmd)||ss.referenceEquals(e,{ns:'tabdoc',cmd:'categorical-filter'}.cmd)||ss.referenceEquals(e,{ns:'tabdoc',cmd:'categorical-filter-by-index'}.cmd)||ss.referenceEquals(e,{ns:'tabdoc',cmd:'hierarchical-filter'}.cmd)||ss.referenceEquals(e,{ns:'tabdoc',cmd:'relative-date-filter'}.cmd)},removeEditDataAlertUrlParam:function(e){this.$Z.sendEventNotification('api.RemoveEditDataAlertUrlParamEvent',e,'')},onSelectionChanged:function(e,fE){if(ss.isNullOrUndefined(fE)||ss.isNullOrUndefined(fE.cmdResult)||ss.isNullOrUndefined(fE.cmdResult.commandName)){return}var fF=fE.cmdResult.commandName.split(':');if(fF[0]==='tabsrv'&&(ss.startsWithString(fF[1],'select')&&!ss.startsWithString(fF[1],'select-legend'))){this.handleMarkSelectionEvent(e,fE)}else{if(ss.startsWithString(fF[1],'highlight')||ss.startsWithString(fF[1],'select-legend')){this.$Z.sendEventNotification('api.MarksHighlightChangedEvent',e,null)}if(ss.startsWithString(fF[1],'select')&&!ss.startsWithString(fF[1],'select-legend')){this.handleMarkSelectionEvent(e,fE)}else if(this.$p(fF[1])){this.handleFilterChangeEvent(e,fE)}}},onClientFullyLoaded:function(){tab.StartupUtils.remove_clientFullyLoaded(ss.mkdel(this,this.onClientFullyLoaded));this.$Z.sendEventNotification('api.VizInteractiveEvent',null,tsConfig.clientNumber)},onCommandComplete:function(){this.$Z.sendEventNotification('api.VizInteractiveEvent',null,tsConfig.clientNumber)},onNewDashboard:function(e){e=tab.ModelUtils.findContentDashboard();this.$12.dispose();if(ss.isNullOrUndefined(e)){return}var fE=e.get_zoneModels();_.each(fE,ss.mkdel(this,function(fF,fG){if(fF.get_zoneType()==='paramctrl'&&ss.isValue(fF.get_model())){if(ss.referenceEquals(ss.getInstanceType(fF.get_model()),tab.ParameterCtrlModel)){var fH=fF.get_model();fH.add_newParameterCtrl(ss.mkdel(this,this.onParameterChange));this.$12.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){fH.remove_newParameterCtrl(ss.mkdel(this,this.onParameterChange))})))}}}))},onParameterChange:function(e){var fE=e.fieldCaption;this.$Z.sendEventNotification('api.ParameterChangedEvent',null,fE)},onCustomViewDestroyed:function(e,fE){this.$Z.sendEventNotification('api.CustomViewRemovedEvent',null,JSON.stringify(this.$9()))},onCustomViewUpdated:function(e,fE){this.$Z.sendEventNotification('api.CustomViewUpdatedEvent',null,JSON.stringify(this.$9()))},onCustomViewSetDefault:function(e,fE){this.$Z.sendEventNotification('api.CustomViewSetDefaultEvent',null,JSON.stringify(this.$9()))},onCustomViewListLoaded:function(e,fE){this.$Z.sendEventNotification('api.CustomViewsListLoadedEvent',null,JSON.stringify(this.$9()));this.$11=true},$d:function(e){var fE=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-parameter-models'},null);this.$E(e,fE,f.$8)},$G:function(e){var fE=JSON.parse(e.get_parameters());var fF={};fF['fieldCaption']=fE['api.setParameterName'];fF['valueString']=fE['api.setParameterValue'];var fG=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-parameter-value'},fF);this.$E(e,fG,f.$6)},$h:function(e){var fE=function(fG,fH){fH['ignoreDomain']=fG['api.ignoreDomain']};var fF=this.$s(e,{ns:'tabsrv',cmd:'get-filter-info'},fE);this.$E(e,fF,y.processFilters)},$i:function(e){var fE=function(fG,fH){if(ss.isValue(fG['api.fieldCaption'])){fH['fieldCaption']=fG['api.fieldCaption']}else{fH['fn']=fG['api.fieldName']}if(ss.isValue(fG['api.filterHierarchicalLevels'])){fH['filterLevel']=fG['api.filterHierarchicalLevels']}fH['ignoreDomain']=fG['api.ignoreDomain']};var fF=this.$s(e,{ns:'tabsrv',cmd:'get-filter-info'},fE);this.$E(e,fF,y.processSingleFilter)},$e:function(e){var fE=function(fG,fH){};var fF=this.$s(e,{ns:'tabdoc',cmd:'get-selection'},fE);this.$E(e,fF,ss.mkdel(this,this.$v))},$t:function(e,fE){var fF=new Object;var fG=new tab.DataDictionaryModel(null);fG.update(e);var fH=new tab.VizDataModel(null);fH.update(fE,tab.NoopModelEventsHandler.get_noopContext());var fI=[];fF.marks=fI;if(ss.isNullOrUndefined(fG)||fG.get_isEmpty()){return fF}fH.forEachTupleId(function(fJ){var fK=new Object;fK.tupleId=fJ;var fL=[];fK.pairs=fL;fI.push(fK);fH.forEachVizDataField(function(fM,fN){var fO=new Object;fO.fieldName=fM.get_fieldCaption();fO.formattedValue=tab.VizDataLookup.lookupAlias(fJ,fM,fG);fO.valueDataType=t.convertDataType(fM.get_dataType());var fP=null;if(!tab.VizDataLookup.isSpecial(fJ,fM,fG,null)&&fM.get_hasDataValues()&&fM.isTupleIdValid(fJ)){fP=tab.VizDataLookup.lookupRawDataValue(fJ,fM,fG)}var fQ=n.serializeDataValue(fP,fM.get_dataType());fO.value=fQ;fL.push(fO);return true});return true});return fF},$v:function(e){var fE=e;var fF=fE.dataDictionary;var fG=fE.vizData;return this.$t(fF,fG)},$3:function(e){var fE=function(fG,fH){fH['qualifiedFieldCaption']=fG['api.fieldCaption'];if(ss.isValue(fG['api.filterReset'])&&fG['api.filterReset']){fH['filterUpdateType']='filter-clear'.toString()}else{if(ss.isValue(fG['api.exclude'])){fH['exclude']=fG['api.exclude']}var fI=u.convertFilterUpdateType(fG['api.filterUpdateType'].toString());fH['filterUpdateType']=fI;if(ss.isValue(fG['api.filterHierarchicalValues'])){fH['filterValues']=fG['api.filterHierarchicalValues']}if(ss.isValue(fG['api.filterHierarchicalLevels'])){fH['filterLevels']=fG['api.filterHierarchicalLevels']}if(ss.isNullOrUndefined(fG['api.filterHierarchicalValues'])&&ss.isNullOrUndefined(fG['api.filterHierarchicalLevels'])){fH['filterLevels']='[]'}}};var fF=this.$s(e,{ns:'tabdoc',cmd:'hierarchical-filter'},fE);this.$E(e,fF,y.processFilterCommandReturningFieldName)},$4:function(e){var fE=function(fG,fH){fH['qualifiedFieldCaption']=fG['api.fieldCaption'];if(ss.isValue(fG['api.filterReset'])&&fG['api.filterReset']){fH['filterUpdateType']='filter-clear'.toString()}else{if(ss.isValue(fG['api.filterRangeMax'])){fH['rangeMax']=fG['api.filterRangeMax']}if(ss.isValue(fG['api.filterRangeMin'])){fH['rangeMin']=fG['api.filterRangeMin']}if(ss.isValue(fG['api.filterRangeNullOption'])){if(fG['api.filterRangeNullOption']==='NULL_VALUES'){fH['included']='include-null'.toString()}else if(fG['api.filterRangeNullOption']==='NON_NULL_VALUES'){fH['included']='include-non-null'.toString()}else{fH['included']='include-all'.toString()}}}};var fF=this.$s(e,{ns:'tabdoc',cmd:'range-filter'},fE);this.$E(e,fF,y.processFilterCommandReturningFieldName)},$5:function(e){var fE=function(fG,fH){fH['qualifiedFieldCaption']=fG['api.fieldCaption'];if(ss.isValue(fG['api.filterReset'])&&fG['api.filterReset']){fH['filterUpdateType']='filter-clear'.toString()}else{if(ss.isValue(fG['api.filterDateArchorValue'])){fH['anchorDate']=fG['api.filterDateArchorValue']}fH['datePeriodType']=fG['api.filterPeriodType'].toLowerCase();fH['dateRangeType']=fG['api.filterDateRangeType'].toLowerCase();if(ss.isValue(fG['api.filterDateRange'])){fH['rangeN']=fG['api.filterDateRange']}}};var fF=this.$s(e,{ns:'tabdoc',cmd:'relative-date-filter'},fE);this.$E(e,fF,y.processFilterCommandReturningFieldName)},$Y:function(e){if(e.toLowerCase()==='replace'){return'select-replace'.toString()}else if(e.toLowerCase()==='add'){return'select-add'.toString()}else if(e.toLowerCase()==='remove'){return'select-remove'.toString()}return'select-replace'.toString()},$X:function(e){if(e.toLowerCase()==='nullvalues'){return'include-null'.toString()}else if(e.toLowerCase()==='nonnullvalues'){return'include-non-null'.toString()}else if(e.toLowerCase()==='allvalues'){return'include-all'.toString()}return'include-all'.toString()},$6:function(e){var fE=JSON.parse(e.get_parameters());var fF=x.$1();var fG=fE['api.fieldCaption'];var fH=ss.keyExists(fF,fG);var fI;if(fH){if(fF[fG]==='RD'){var fJ=d.$0('api.localfailed','Clearing a relative date filter is not supported when an associated quick filter is on the Worksheet. Please call applyRelativeDateFilter instead.');this.$Z.sendResponse(e,fJ);return}fI={ns:'tabdoc',cmd:'reset-filter'}}else{fI={ns:'tabdoc',cmd:'clear-existing-filter'}}var fK=function(fM,fN){fN['qualifiedFieldCaption']=fG};var fL=this.$s(e,fI,fK);this.$E(e,fL,y.processFilterCommandReturningFieldName)},$2:function(e){var fE=function(fG,fH){fH['qualifiedFieldCaption']=fG['api.fieldCaption'];if(ss.isValue(fG['api.filterReset'])&&fG['api.filterReset']){fH['filterUpdateType']='filter-clear'.toString()}else{if(ss.isValue(fG['api.exclude'])){fH['exclude']=fG['api.exclude'].toString()}var fI=u.convertFilterUpdateType(fG['api.filterUpdateType'].toString());fH['filterUpdateType']=fI;if(ss.isValue(fG['api.filterCategoricalValues'])){fH['filterValues']=JSON.stringify(fG['api.filterCategoricalValues'])}else{fH['filterValues']='[""]'}}};var fF=this.$s(e,{ns:'tabdoc',cmd:'categorical-filter'},fE);this.$E(e,fF,y.processFilterCommandReturningFieldName)},$0:function(e,fE){var fF=new ss.StringBuilder;fF.append('[');for(var fG=0;fG<e.length;fG++){if(fG>0){fF.append(',')}fF.append('{');fF.append('"'+'qualifiedFieldCaption'.toString()+'":');fF.append('"'+e[fG]+'"');fF.append(',');fF.append('"'+'selectValues'.toString()+'":');fF.append(fE[fG]);fF.append('}')}fF.append(']');return fF.toString()},$1:function(e,fE){var fF=new ss.StringBuilder;fF.append('[');for(var fG=0;fG<e.length;fG++){if(fG>0){fF.append(',')}fF.append('{');fF.append('"'+'qualifiedFieldCaption'+'":');fF.append('"'+e[fG]+'"');fF.append(',');var fH=JSON.parse(fE[fG]);var fI=JSON.parse(fH[0]);if(ss.isValue(fI['max'])){fF.append('"'+'maxValue'+'":');fF.append('"'+fI['max'].toString()+'"')}if(ss.isValue(fI['min'])){if(ss.isValue(fI['max'])){fF.append(',')}fF.append('"'+'minValue'.toString()+'":');fF.append('"'+fI['min'].toString()+'"')}if(ss.isValue(fI['nullOption'])){var fJ=this.$X(fI['nullOption'].toString());fF.append(',');fF.append('"'+'included'.toString()+'":');fF.append('"'+fJ+'"')}fF.append('}')}fF.append(']');return fF.toString()},$j:function(e){var fE=this.$s(e,{ns:'tabdoc',cmd:'get-summary-data'},C.$3);this.$E(e,fE,C.processSummaryData)},$l:function(e){var fE=this.$s(e,{ns:'tabdoc',cmd:'get-underlying-data'},C.$4);this.$E(e,fE,C.$6)},$7:function(e){var fE=function(fG,fH){};var fF=this.$s(e,{ns:'tabsrv',cmd:'select-none'},fE);this.$E(e,fF,x.$3)},$m:function(e){var fE=function(fG,fH){fH['qualifiedFieldCaption']=fG['api.fieldCaption'];fH['objectTextIds']=fG['api.ObjectTextIDs']};var fF=this.$s(e,{ns:'tabdoc',cmd:'highlight-items'},fE);this.$E(e,fF,x.$3)},$n:function(e){var fE=function(fG,fH){fH['qualifiedFieldCaption']=fG['api.fieldCaption'];fH['valueString']=fG['api.Pattern']};var fF=this.$s(e,{ns:'tabdoc',cmd:'highlight-items-by-pattern-match'},fE);this.$E(e,fF,x.$3)},$c:function(e){var fE=function(fG,fH){};var fF=this.$s(e,{ns:'tabdoc',cmd:'get-highlighted-data'},fE);this.$E(e,fF,ss.mkdel(this,this.$u))},$u:function(e){var fE=e;var fF=fE.dataDictionary;var fG=fE.vizData;return this.$t(fF,fG)},$B:function(e){var fE=ss.mkdel(this,function(fG,fH){if(tab.MiscUtil.isNullOrEmpty$2(fG)){fH['selectionUpdateType']='select-replace'.toString()}else{fH['selectionUpdateType']=this.$Y(fG['api.filterUpdateType'].toString());if(ss.isValue(fG['api.categoricalFieldCaption'])&&ss.isValue(fG['api.categoricalMarkValues'])){var fI=JSON.parse(fG['api.categoricalFieldCaption']);var fJ=JSON.parse(fG['api.categoricalMarkValues']);var fK=this.$0(fI,fJ);fH['dimensionValueSelectionModels']=fK}if(ss.isValue(fG['api.hierarchicalFieldCaption'])&&ss.isValue(fG['api.hierarchicalMarkValues'])){var fL=JSON.parse(fG['api.hierarchicalFieldCaption']);var fM=JSON.parse(fG['api.hierarchicalMarkValues']);var fN=this.$0(fL,fM);fH['hierarchicalValueSelectionModels']=fN}if(ss.isValue(fG['api.rangeFieldCaption'])&&ss.isValue(fG['api.rangeMarkValues'])){var fO=JSON.parse(fG['api.rangeFieldCaption']);var fP=JSON.parse(fG['api.rangeMarkValues']);var fQ=this.$1(fO,fP);fH['quantativeRangeSelectionModels']=fQ}if(ss.isValue(fG['api.tupleIds'])){var fR=new ss.StringBuilder;fR.append('{');fR.append('"'+'selectionType'+'":');fR.append('"tuples"');fR.append(',');fR.append('"'+'objectIds'+'":');fR.append(fG['api.tupleIds']);fR.append('}');fH['selection']=fR.toString()}}});var fF=this.$s(e,{ns:'tabdoc',cmd:'select-by-value'},fE);this.$E(e,fF,x.$4)},$8:function(e){var fE=function(fG,fH){};var fF=this.$s(e,{ns:'tabsrv',cmd:'select-none'},fE);this.$E(e,fF,x.$4)},$9:function(){var e=this.$10.get_customViewsViewModel();var fE=e.get_currentCustomView();var fF=null;if(ss.isValue(fE)){fF=n.serializeCustomView(e.get_currentCustomView(),e.buildUrl(e.get_currentCustomView(),true))}var fG=[];var fH=this.$10.get_customViewsViewModel().get_myCustomViews();var fI=ss.getEnumerator(fH);try{while(fI.moveNext()){var fJ=fI.current();var fK=e.buildUrl(fJ,true);var fL=n.serializeCustomView(fJ,fK);fG.push(fL)}}finally{fI.dispose()}var fM=this.$10.get_customViewsViewModel().get_otherCustomViews();var fN=ss.getEnumerator(fM);try{while(fN.moveNext()){var fO=fN.current();var fP=e.buildUrl(fO,true);var fQ=n.serializeCustomView(fO,fP);fG.push(fQ)}}finally{fN.dispose()}return v.newCustomViewsInfo(this.$11,e.get_defaultCustomViewId(),fF,fG)},$b:function(e){this.$10.get_customViewsViewModel().updateCustomizedViews(ss.mkdel(this,function(fE,fF){var fG=d.$0('api.success',this.$9());this.$Z.sendResponse(e,fG)}),ss.mkdel(this,function(fE){var fF=d.$0('api.remotefailed',fE);this.$Z.sendResponse(e,fF)}))},$I:function(e){var fE=JSON.parse(e.get_parameters());var fF=null;if(ss.isValue(fE['api.customViewParam'])){var fG=fE['api.customViewParam'];fF=n.convertToCustomizedView(fG)}this.$10.get_customViewsViewModel().select(fF)},$y:function(e){var fE=JSON.parse(e.get_parameters());var fF=fE['api.customViewParam'];var fG=n.convertToCustomizedView(fF);this.$10.get_customViewsViewModel().destroy(fG,ss.mkdel(this,function(){var fH=d.$0('api.success',this.$9());this.$Z.sendResponse(e,fH)}),ss.mkdel(this,function(fH){var fI=d.$0('api.remotefailed',fH);this.$Z.sendResponse(e,fI)}))},$V:function(e){var fE=JSON.parse(e.get_parameters());var fF=fE['api.customViewParam'];var fG=n.convertToCustomizedView(fF);this.$10.get_customViewsViewModel().update(fG,ss.mkdel(this,function(fH){var fI=d.$0('api.success',this.$9());this.$Z.sendResponse(e,fI)}),ss.mkdel(this,function(fH){var fI=d.$0('api.remotefailed',fH);this.$Z.sendResponse(e,fI)}))},$q:function(e){this.$10.get_customViewsViewModel().makeCurrentDefault(ss.mkdel(this,function(fE){var fF=d.$0('api.success',this.$9());this.$Z.sendResponse(e,fF)}),ss.mkdel(this,function(fE){var fF=d.$0('api.remotefailed',fE);this.$Z.sendResponse(e,fF)}))},$A:function(e){var fE=JSON.parse(e.get_parameters());var fF=fE['api.customViewName'];this.$10.get_customViewsViewModel().save(fF,ss.mkdel(this,function(fG){var fH=this.$9();fH.newView=n.serializeCustomView(fG,this.$10.get_customViewsViewModel().buildUrl(fG,false));var fI=d.$0('api.success',fH);this.$Z.sendResponse(e,fI)}),ss.mkdel(this,function(fG){var fH=d.$0('api.remotefailed',fG);this.$Z.sendResponse(e,fH)}))},$f:function(e){var fE=JSON.parse(e.get_parameters());var fF=fE['api.dataSourceName'];var fG=fE['api.worksheetName'];var fH={};var fI=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-schema'},fH);var fJ=function(fK){var fL=fK;var fM=w.$0(fL,fG,fF);return fM.dataSources[0]};this.$E(e,fI,fJ)},$g:function(e){var fE=JSON.parse(e.get_parameters());var fF=fE['api.worksheetName'];var fG=function(fJ,fK){};var fH=this.$s(e,{ns:'tabdoc',cmd:'get-schema'},fG);var fI=function(fJ){var fK=fJ;var fL=w.$0(fK,fF,null);return fL};this.$E(e,fH,fI)},$o:function(e){var fE=JSON.parse(e.get_parameters());var fF=fE['api.invokeCommandName'];if(fF==='showExportImageDialog'){this.$10.get_toolbarCommands().exportImage()}else if(fF==='showExportDataDialog'){var fG=null;if(ss.isValue('api.invokeCommandParam')){fG=fE['api.invokeCommandParam']}this.$10.get_toolbarCommands().exportData(fG)}else if(fF==='showExportCrosstabDialog'){var fH=null;if(ss.isValue('api.invokeCommandParam')){fH=fE['api.invokeCommandParam']}this.$10.get_toolbarCommands().exportCrosstab(fH)}else if(fF==='showExportPDFDialog'){this.$10.get_toolbarCommands().exportPdf()}else if(fF==='pauseAutomaticUpdates'){this.$10.get_toolbarCommands().$3();this.$C(e)}else if(fF==='resumeAutomaticUpdates'){this.$10.get_toolbarCommands().$5();this.$C(e)}else if(fF==='toggleAutomaticUpdates'){this.$S(e)}else if(fF==='showShareDialog'){this.$10.get_toolbarCommands().$d()}else if(fF==='showDownloadWorkbookDialog'){var fI=this.$10.get_applicationPresModel().workbookPresModel.dashboardPresModel;this.$10.get_toolbarCommands().$0(fI.sheetLayoutInfo.downloadLink)}else if(fF==='selectedMarksKeepOnly'){this.$10.get_toolbarCommands().$8()}else if(fF==='selectedMarksExclude'){this.$10.get_toolbarCommands().$7()}},$k:function(e){if(ss.isValue(this.$16)){var fE=d.$0('api.success',this.$16.get_toolbarState());this.$Z.sendResponse(e,fE)}},$T:function(e){tab.WorksheetServerCommands.undo();var fE=d.$0('api.success','');this.$Z.sendResponse(e,fE)},$w:function(e){tab.WorksheetServerCommands.redo();var fE=d.$0('api.success','');this.$Z.sendResponse(e,fE)},$S:function(e){this.$10.get_toolbarCommands().$f();this.$C(e)},$O:function(){this.$10.get_toolbarCommands().$d()},$K:function(){this.$10.get_toolbarCommands().$a()},$P:function(){this.$10.get_toolbarCommands().$e()},$N:function(){this.$10.get_toolbarCommands().$c()},$J:function(){this.$10.get_toolbarCommands().$9()},$L:function(){this.$10.get_toolbarCommands().$b()},$C:function(e){var fE=v.newAutoUpdateState(this.$10.get_toolbarCommands().$1());var fF=d.$0('api.success',fE);this.$Z.sendResponse(e,fF)},$H:function(e){var fE=JSON.parse(e.get_parameters());var fF={};fF['sheet']=fE['api.setSheetSizeName'];fF['minWidth']=fE['api.minWidth'];fF['minHeight']=fE['api.minHeight'];fF['maxWidth']=fE['api.maxWidth'];fF['maxHeight']=fE['api.maxHeight'];var fG=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-sheet-size'},fF);this.$E(e,fG,null)},$x:function(e){this.$10.get_toolbarCommands().$4();var fE=d.$0('api.success','');this.$Z.sendResponse(e,fE)},$z:function(e){tab.WorksheetServerCommands.revert();var fE=d.$0('api.success','');this.$Z.sendResponse(e,fE)},$M:function(e){var fE=JSON.parse(e.get_parameters());var fF=fE['api.showHideToolbarValue'];this.$10.set_toolbarDisplayed(fF);this.$10.doResize()},$R:function(e){var fE=JSON.parse(e.get_parameters());var fF=new Object;fF.oldRepositoryUrl=fE['api.oldRepositoryUrl'];fF.repositoryUrl=fE['api.switchToRepositoryUrl'];fF.sheetName=fE['api.switchToSheetName'];fF.oldSheetName=tsConfig.current_sheet_name;fF.noUndo=true;fF.successCallback=ss.mkdel(this,function(fG){var fH=d.$0('api.success','');this.$Z.sendResponse(e,fH)});fF.errorCallback=ss.mkdel(this,function(fG){var fH=d.$0('api.remotefailed',fG);this.$Z.sendResponse(e,fH)});E.fireOnTabSelect(fF)},$U:function(e){this.$10.doResize()},$D:function(e){if(tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapFailed()){return}if(!tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapCompleted()){return}tab.ModuleManager.registerModulesLoadedCallback(ss.mkdel(this,function(){var fE=n.serializeClientInfo(this.$10,this.$14);var fF=d.$0('api.success',fE);this.$Z.sendResponse(e,fF)}))},$F:function(e){var fE=tab.VizUriModel.createForViewingSheet(tsConfig.repositoryUrl).get_absoluteUri();var fF=d.$0('api.success',fE);this.$Z.sendResponse(e,fF)},$s:function(e,fE,fF){return this.$r(e,tab.CommandUtils.newCommand(fE,null),fF)},$r:function(e,fE,fF){var fG=JSON.parse(e.get_parameters());var fH=this.$a(fG);fE.commandParams=fH;fF(fG,fH);return fE},$a:function(e){var fE={};if(ss.isValue(e['api.visualId'])){fE['visualIdPresModel']=JSON.stringify(e['api.visualId'])}else{fE['worksheet']=e['api.worksheetName'];if(ss.isValue(e['api.dashboardName'])){fE['dashboard']=e['api.dashboardName']}}return fE},$E:function(e,fE,fF){fE.noExceptionDialog=true;tab.ApiClientCommands.doApiCommand(fE,ss.mkdel(this,function(fG){var fH=fG;if(ss.isValue(fF)){fH=fF(fG)}var fI=d.$0('api.success',fH);this.$Z.sendResponse(e,fI)}),ss.mkdel(this,function(fG){var fH=d.$0('api.remotefailed',fG);this.$Z.sendResponse(e,fH)}))}},null,[ss.IDisposable]);ss.initClass(y,a,{});ss.initClass(z,a,{});ss.initClass(A,a,{get_eventHandlerAttached:function(){return this.$a},dispose:function(){this.$8.dispose();this.$9=true},activateStoryPoint:function(e){this.$6(e,ss.mkdel(this,this.$2))},activatePreviousStoryPoint:function(e){this.$6(e,ss.mkdel(this,function(fE){return this.$1(fE,function(fF){return fF.clickPrevious()})}))},activateNextStoryPoint:function(e){this.$6(e,ss.mkdel(this,function(fE){return this.$1(fE,function(fF){return fF.clickNext()})}))},revertStoryPoint:function(e){this.$6(e,ss.mkdel(this,this.$5))},$5:function(e){return this.$3(e,'api.RevertStoryPoint',function(fE){return fE.revertStoryPoint()})},$2:function(e){return this.$3(e,'api.ActivateStoryPoint',function(fE){return fE.clickStoryPoint()})},$3:function(e,fE,fF){A.$0(e,fE);var fG=JSON.parse(e.get_parameters());var fH=fG['api.storyPointIndex'];if(!ss.isValue(fH)||isNaN(ss.unbox(fH))){throw new ss.Exception('Missing index parameter.')}var fI=this.$0();if(ss.Nullable$1.lt(fH,0)||ss.Nullable$1.ge(fH,ss.count(fI.get_captions()))){throw new ss.Exception('The index is out of bounds.')}var fJ=$.Deferred();var fK=ss.getItem(fI.get_captions(),ss.unbox(fH));fF(fK).then(ss.mkdel(this,function(fL){var fM=n.serializeStoryPoint(fL,this.$7);fJ.resolve(fM)}),function(fL){fJ.reject(fL)});return fJ.promise()},$1:function(e,fE){A.$0(e,['api.ActivateNextStoryPoint','api.ActivatePreviousStoryPoint']);var fF=this.$0();var fG=$.Deferred();fE(fF).then(ss.mkdel(this,function(fH){var fI=ss.getItem(fF.get_captions(),fH);var fJ=n.serializeStoryPoint(fI,this.$7);fG.resolve(fJ)}),function(fH){fG.reject(fH)});return fG.promise()},$4:function(){var e=n.serializeStory(this.$7);var fE=JSON.stringify(e);this.$b.sendEventNotification('api.StorytellingStateChangedEvent',null,fE)},$0:function(){var e=this.$7.get_flipboardNavigatorViewModel();if(ss.isNullOrUndefined(e)){throw new ss.Exception('The active sheet is not a story.')}return e},$6:function(fE,fF){try{fF(fE).then(ss.mkdel(this,function(e){var fG=d.$0('api.success',e);this.$b.sendResponse(fE,fG)}),ss.mkdel(this,function(e){var fG=d.$0('api.remotefailed',e);this.$b.sendResponse(fE,fG)}))}catch(fG){var e=ss.Exception.wrap(fG);var errorResult1=d.$0('api.localfailed',e.get_message());this.$b.sendResponse(fE,errorResult1)}}},null,[ss.IDisposable]);ss.initClass(B,a,{get_toolbarState:function(){return this.$1$1},set_toolbarState:function(e){this.$1$1=e},dispose:function(){this.$4.dispose()},$2:function(){var e=new tab._ApiCommand('api.ToolbarStateChangedEvent',tab._ApiCommand.generateNextCommandId(),null,null);var fE=d.$0('api.success',this.get_toolbarState());this.$3.sendResponse(e,fE);this.$3.sendEventNotification('api.ToolbarStateChangedEvent',null,JSON.stringify(this.get_toolbarState()))},$0:function(e,fE){var fF=e[fE];return ss.isValue(fF)&&eP.shouldShowButton(fF,this.$5)},$1:function(){if(ss.isNullOrUndefined(this.$5.get_vizCommandItems())||ss.isNullOrUndefined(this.$5.get_nonVizCommandItems())){return}var e={};B.$0(e,this.$5.get_vizCommandItems());B.$0(e,this.$5.get_nonVizCommandItems());var fE=v.newToolbarStatePM(B.$1(e,'undo'),B.$1(e,'redo'),B.$1(e,'revert'),!B.$2(e,'toggle-updates','Pause'),B.$1(e,'refresh'),this.$0(e,'customviews'),tsConfig.is_metrics_enabled,this.$0(e,'alert'),this.$0(e,'subscribe'),this.$0(e,'share'),this.$0(e,'download'));this.set_toolbarState(fE);this.$2()}},null,[ss.IDisposable]);ss.initClass(C,a,{});ss.initClass(C,a,{});ss.initClass(D,a,{shouldShowAppBanner:function(){if(!tsConfig.is_mobile||tsConfig.is_mobile_app||!tsConfig.showAppBanner||tsConfig.isPublic||tsConfig.is_authoring||tabBootstrap.Utility.get_isEmbedded()){return false}var e=tab.CookieHelper.getValueForCookie('hideAppBanner');var fE=tab.MiscUtil.toBoolean(e,false);return!fE},createHideAppBannerCookie:function(){var e=new Date;e.setTime(e.getTime()+tab.DateUtil.oneWeek);tab.CookieHelper.setCookie('hideAppBanner',true.toString(),'/',e)},redirectToApp:function(){var e=tab.WindowHelper.getLocation(window.self);var fE=ss.replaceAllString(e.href,e.protocol,'tableau:');tab.WindowHelper.locationReplace(window.self,fE);window.setTimeout(ss.mkdel(this,function(){this.$2()}),1000)},$2:function(){if(BrowserSupport.BrowserSupport.IsAndroid()){tab.WindowHelper.locationReplace(window.self,'https://play.google.com/store/apps/details?id=com.Tableau.TableauApp')}else if(BrowserSupport.BrowserSupport.IsIos()){if(window.confirm(tab.Strings.RedirectToApp)){tab.WindowHelper.locationReplace(window.self,'https://itunes.apple.com/app/tableau-mobile/id434633927')}}}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(E,a,{add_clientChanged:function(e){this.$1$4=ss.delegateCombine(this.$1$4,e)},remove_clientChanged:function(e){this.$1$4=ss.delegateRemove(this.$1$4,e)},get_tabHeight:function(){var e=$(this.get_tabbedNavigation().get_widgetDomNode());return e.outerHeight(true)},get_tabbedNavigation:function(){return this.$1$5},set_tabbedNavigation:function(e){this.$1$5=e},get_rightAreaDrawerViewModel:function(){return this.$1$6},set_rightAreaDrawerViewModel:function(e){this.$1$6=e},get_client:function(){return this.$1$7},set_client:function(e){this.$1$7=e},get_apiEventHandler:function(){return this.$1$8},set_apiEventHandler:function(e){this.$1$8=e},initRightAreaDrawer:function(){if(ss.isValue(this.get_rightAreaDrawerViewModel())){return}this.set_rightAreaDrawerViewModel(new dZ);this.$b(this.get_rightAreaDrawerViewModel())},processUrlParamsToShowRightAreaDrawer:function(){if(ss.isNullOrUndefined(this.get_rightAreaDrawerViewModel())){return}var e=tab.VizUriModel.createForCurrentWindowLocation();if(tsConfig.allow_commenting&&e.get_showComments()&&tsConfig.commentingEnabled){this.get_rightAreaDrawerViewModel().toggleCommenting()}else if(tab.FeatureFlags.isEnabled('AlertSidePanel')&&tsConfig.allow_data_alert&&(!ss.isNullOrEmptyString(e.get_showDataAlertId())||e.get_showDataAlerts())){this.get_rightAreaDrawerViewModel().toggleDataAlertsPanel()}},$b:function(e){var fE=function(){E.get_instance().get_client().doResize()};e.add_open(fE);e.add_close(fE);this.$q.add$1(new tab.CallOnDispose(function(){e.remove_open(fE);e.remove_close(fE);tab.MiscUtil.dispose$1(e)}));this.$r=tab.ObjectRegistry.newView(dY).call(null,[e]);this.$1(this.$r)},initTabbedNavigation:function(){if(!tab.ApplicationModel.get_instance().get_showTabs()){return}var e=$('.tabbedNavigationWrapper');if(e.length>0){if(ss.isValue(this.get_tabbedNavigation())){this.get_tabbedNavigation().destroyShim()}tab.ModuleManager.load(tab.ILegacyDojoUIModule).call(null,[]).done(ss.mkdel(this,function(fE){var fF=$("<div dojoAttachPoint='tabbed_navigation' class='tabbedNavigation'></div>").get(0);fF.id=(tsConfig.features['IframeSizedToWindow']?'tabs':'tabbedNavigation');e.append(fF);this.set_tabbedNavigation(fE.createTabbedNavigation({},fF));this.get_tabbedNavigation().startupShim()}))}},dispose:function(){if(!ss.isValue(E.$5)){return}if(ss.isValue(this.get_apiEventHandler())){this.get_apiEventHandler().dispose();this.set_apiEventHandler(null)}this.$2();this.$q.dispose();this.$g();this.$s.dispose();if(ss.isValue(this.get_tabbedNavigation())){this.get_tabbedNavigation().destroyShim();this.set_tabbedNavigation(null)}E.$5=null},$k:function(){this.$p=tab.ApplicationModel.get_instance();this.$p.add_newWorkbook(ss.mkdel(this,this.$f));this.$q.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$p.remove_newWorkbook(ss.mkdel(this,this.$f));this.$p=null})));return this},$l:function(){this.$f(this.$p.get_workbook());this.$q.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$f(null)})));return this},$f:function(e){if(ss.isValue(e)){e.add_dashboardDeleted(ss.mkdel(this,this.$o));e.add_uiModeChanged(ss.mkdel(this,this.$9))}if(ss.isValue(this.$u)){this.$u.remove_dashboardDeleted(ss.mkdel(this,this.$o));this.$u.remove_uiModeChanged(ss.mkdel(this,this.$9))}this.$u=e},$1:function(e){if(ss.isValue(e)){e.element.insertAfter(this.get_client().get_domNode())}},$o:function(e){this.$2()},$2:function(){if(ss.isNullOrUndefined(this.get_client())){return}this.get_client().destroyRecursive();this.set_client(null);this.$t=null},$3:function(e){tab.SheetClientCommands.switchSheets(e)},$g:function(){if(!E.get_isHostedInApiContext()){return}if(ss.isValue(this.get_apiEventHandler())){var e=window.removeEventListener;if(ss.isValue(e)){e('message',ss.mkdel(this,this.$4),true)}else{var fE=ss.mkdel(this,this.$4);window.self.detachEvent('onmessage',fE)}this.set_apiEventHandler(null)}},$c:function(e,fE){if(!E.get_isHostedInApiContext()){return}this.set_apiEventHandler(new x(e,fE,tabBootstrap.ViewerBootstrap.get_instance().apiResponder));var fF=window.addEventListener;if(ss.isValue(fF)){fF('message',ss.mkdel(this,this.$4),true)}else{var fG=ss.mkdel(this,this.$4);window.self.attachEvent('onmessage',fG)}},$0:function(){if(!E.get_isHostedInApiContext()){return}if('addEventListener'in window.self){window.addEventListener('unload',ss.mkdel(this,this.$e),true)}else{window.self.attachEvent('onunload',ss.mkdel(this,this.$e))}},$e:function(e){this.$g()},$5:function(){this.$m();this.$a();this.processUrlParamsToShowRightAreaDrawer();tab.StartupUtils.remove_clientFullyLoaded(ss.mkdel(this,this.$5))},$7:function(){E.$5.dispose();if(ss.isValue(E.$4)){E.$4.dispose()}E.$6=false},$j:function(){var e=function(fG){var fH=[];for(var fI=0;fI<fG.length;fI++){var fJ=fG[fI];fH.push(tab.DownloadableFontPropertiesExtensions.toDownloadableFontProperties(fJ,''))}ed.get_instance().notifyDownloadableFont(fH)};tab.FontNotificationUtil.add_fontPropertiesIdentified(e);tab.WorldUpdateInterceptor.get().add_onCommandResponse(function(fG){var fH=!tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&fG.get_applicationPresModel().renderMode==='render-mode-client';if(ss.referenceEquals(fG.get_worldUpdateCommand().commandName,{ns:'tabdoc',cmd:'set-active-story-point'}.cmd)||ss.referenceEquals(fG.get_worldUpdateCommand().commandName,{ns:'tabsrv',cmd:'render-tooltip-server'}.cmd)||fG.get_sheetChanged()||fG.get_rebuildTheWorld()||fH){E.$2();if(fH){var fI=null;fI=function(){tab.CommandController.get().remove_modelsUpdated(fI);E.handleAllFontsFound()};tab.CommandController.get().add_modelsUpdated(fI)}}});tab.FontNotificationUtil.add_allFontsFound(E.handleAllFontsFound);if(tab.ProgressiveLoader.get_progressiveLoadEnabled()){var fE=null;fE=function(){tab.WorldUpdateInterceptor.get().remove_onProgressiveLoadComplete(fE);E.handleAllFontsFound()};tab.WorldUpdateInterceptor.get().add_onProgressiveLoadComplete(fE)}var fF=function(){if(!tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapCompleted()){ed.get_instance().downloadFonts()}};tab.StartupUtils.callAfterModelsInitialized(function(){tab.CommandController.get().add_modelsUpdated(fF)});tab.StartupUtils.callOnceAfterInitialBootstrap(function(){if(!tab.ProgressiveLoader.get_progressiveLoadEnabled()){E.handleAllFontsFound()}tab.CommandController.get().remove_modelsUpdated(fF)});E.$2()},$a:function(){tabBootstrap.MetricsController.initSessionInfo();tab.MetricsLogger.get_instance().attach()},$4:function(e){if(typeof(ss.getType('ss'))==='undefined'){return}if(ss.isValue(this.get_apiEventHandler())){this.get_apiEventHandler().handleEvent(e)}},$6:function(e){this.$n(e);var fE=tab.CommandController.get().legacySession;this.$2();tab.ApplicationModel.get_instance().get_shapeManager().clearShapeStampCache();tabBootstrap.MetricsController.initSessionInfo();var fF=E.$0(true,fE);this.set_client(fF);this.$t=fF;this.get_client().startup();if(!ss.staticEquals(this.$1$4,null)){this.$1$4()}this.$m();if(!tabBootstrap.Utility.get_isEmbedded()){this.$h(e)}},$8:function(e){this.$m();E.handleAllFontsFound()},$m:function(){if(ss.isValue(this.get_apiEventHandler())){this.get_apiEventHandler().updateClients(this.get_client(),this.$t)}},$h:function(e){if(tsConfig.is_authoring){this.$i(e.repositoryUrl,e.sheetName)}else{this.replaceWindowLocationForTabChangeWhileViewing(e.repositoryUrl)}},$i:function(e,fE){if(this.$d(e)){var fF=tab.VizUriModel.createForAuthoringPublishedSheet(e);fF.replaceState(null)}else{var fG=tab.VizUriModel.createForCurrentWindowLocation();if(fG.get_isAuthorNewWorkbookUri()){}else if(tab.MiscUtil.isNullOrEmpty$3(e)){var fH=tab.VizUriModel.createForAuthoringUnpublishedSheet(tsConfig.origin_repository_url,fE);fH.replaceState(null)}}},replaceWindowLocationForTabChangeWhileViewing:function(e){if(this.$d(e)){var fE=tab.VizUriModel.createForViewingSheet(e);fE.replaceState(null)}else{}},$d:function(e){return!tab.MiscUtil.isNullOrEmpty$3(e)&&!ss.startsWithString(e,'ds:')},$n:function(e){tsConfig.current_sheet_name=e.sheetName;tsConfig.current_sheet_type=e.sheetType;tsConfig.current_view_id=e.viewId;if(e.isCurrentCustViewIdValid){tsConfig.current_custom_view_id=e.currentCustomViewId}else{tsConfig.current_custom_view_id=null}tsConfig.layoutid=e.layoutId;tsConfig.embeddedTitle=e.embeddedTitle;tsConfig.blogURI=e.blogLink;tsConfig.requestURI=e.shareLink;if(!ss.isNullOrEmptyString(tsConfig.downloadURI)){tsConfig.downloadURI=e.downloadLink}else{tsConfig.downloadURI=''}tsConfig.staticImage=e.staticImage;tsConfig.guid=e.guid;var fE=e.repositoryUrl;tsConfig.repositoryUrl=(this.$d(fE)?fE:'')},$9:function(){if(tab.ApplicationModel.get_instance().get_workbook().get_uiMode()==='data-tab'){spiff.GlobalUIEvents.fireDismissTemporaryElements()}}},null,[ss.IDisposable]);ss.initClass(F,a,{},spiff.Template,[ss.IDisposable]);ss.initInterface(cL,a,{add_scrolled:null,remove_scrolled:null,get_visibleRect:null,appendToDom:null,convertPointFromPageToDashboardCoords:null});ss.initClass(G,a,{add_scrolled:function(e){this.get_dom().domNode[0].addEventListener('scroll',e)},remove_scrolled:function(e){this.get_dom().domNode[0].removeEventListener('scroll',e)},get_dom:function(){return this.get_template()},get_dashboardNode:function(){return this.$i.get_dashboardNode()},get_containerNode:function(){return this.$i.get_containerNode()},get_toolbarContainer:function(){return this.get_dom().toolbarContainer},$e:function(){return this.get_viewModel()},get_visibleRect:function(){return{l:this.get_dom().domNode[0].scrollLeft,t:this.get_dom().domNode[0].scrollTop,w:this.get_dom().domNode[0].clientWidth,h:this.get_dom().domNode[0].clientHeight}},onAddedToDom:function(){if(!this.addedToDom){this.$d();this.$c();this.$a();this.$9();this.$b();spiff.FocusManager.initialize();if(tab.FeatureFlags.isEnabled('IframeSizedToWindow')){$(document.body).addClass('ff-IFrameSizedToWindow')}if(this.$e().get_shouldShowCommenting()){$(document.body).addClass('ff-CommentingPane')}if(tab.GestureModelSettings.get_newModelEnabled()){$(document.body).addClass('ff-TouchSmoothTooltips')}}spiff.Widget.prototype.onAddedToDom.call(this)},$d:function(){if(eV.get_toolbarIsBottom()){this.get_toolbarContainer().detach().appendTo($(G.vizContainerSelector))}},resizeToolbar:function(){this.$h.forceResizeToolbar()},resizeAppBanner:function(e){if(ss.isValue(this.$f)){this.$f.get_rootElement().width(e.w)}},addDevicePreviewSettings:function(){var e=this.$e().get_devicePreviewViewModel();if(e.get_shouldCutInteraction()){this.$g=new spiff.Glass;this.$g.show()}if(e.get_shouldScaleDownVizContainer()){var fE=e.get_getDevicePreviewVizContainerCss();$(G.vizContainerSelector).css(fE)}},$9:function(){if(this.$e().get_appBannerViewModel().shouldShowAppBanner()){this.$f=tab.ObjectRegistry.newView(cJ).call(null,[this.$e().get_appBannerViewModel()]);this.$f.get_rootElement().insertBefore(H.selectCenteringContainer()).width(H.getClientBounds().w)}},$c:function(){this.$i=tab.ObjectRegistry.newView(fy).call(null,[this.$e().get_workbookViewModel()]);this.$i.addToDom(this.get_dom().domNode)},$a:function(){if(ss.isNullOrUndefined(this.$e().get_toolbarViewModel())||!tsConfig.toolbarContainerVis){return}{var e=tabBootstrap.MetricsController.createContext('TBRADD'.toString(),64,null);try{this.$h=tab.ObjectRegistry.newView(eU).call(null,[this.$e().get_toolbarViewModel()]);this.$h.addToDom(this.get_toolbarContainer());this.get_toolbarContainer().height(tabBootstrap.VizLayoutConstants.get_vizToolbarHeight())}finally{if(ss.isValue(e)){e.dispose()}}}},$b:function(){if(ss.isNullOrUndefined(this.$e().get_toolbarViewModel())||ss.isNullOrUndefined(this.$e().get_toolbarViewModel().get_dialogHostViewModel())){return}var e=this.$e().get_toolbarViewModel().get_dialogHostViewModel();var fE=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[bT,bS,Object])).call(null,[e]);fE.addToDom(this.get_toolbarContainer());fE.addClass('tab-toolbar-dialoghost');if(tab.FeatureFlags.isEnabled('ViewingToolbarModalDialog')||tsConfig.is_mobile_app){$(document.body).addClass('ff-ViewingToolbarModalDialog')}},appendToDom:function(e){e.addToDom(this.get_dom().domNode)},convertPointFromPageToDashboardCoords:function(e){var fE=tab.DomUtil.toPoint(tab.DomUtil.getPageOffset$1(this.get_dom().domNode));var fF=tab.PointUtil.subtract(e,fE);var fG={x:this.get_dom().domNode[0].scrollLeft,y:this.get_dom().domNode[0].scrollTop};var fH=tab.PointUtil.add(fF,fG);return fH},dispose:function(){if(ss.isValue(this.$g)){this.$g.dispose()}ss.makeGenericType(spiff.BaseView$1,[I]).prototype.dispose.call(this)}},ss.makeGenericType(spiff.BaseView$1,[I]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[I]),cL]);ss.initInterface(cK,a,{get_domNode:null,get_isDashboard:null,get_vizSize:null,get_session:null,get_viewControllers:null,get_applicationPresModel:null,get_toolbarContainer:null,get_toolbarDisplayed:null,set_toolbarDisplayed:null,get_toolbarCommands:null,get_customViewsViewModel:null,get_dashboardViewport:null,destroyRecursive:null,startup:null,doResize:null});ss.initInterface(cI,a,{get_flipboardNavigatorViewModel:null,get_containedSheetName:null,get_containedSheetType:null,get_containedSheetZoneId:null,get_containedDashboardZones:null,get_hasContainedSheet:null});ss.initClass(H,a,{get_flipboardNavigatorViewModel:function(){if(ss.isValue(this.$v)&&ss.isValue(this.$v.get_dashboardViewModel())){return this.$v.get_dashboardViewModel().get_flipboardNavigatorViewModel()}return null},get_hasContainedSheet:function(){return ss.isValue(this.get_containedSheetZoneId())},get_containedSheetName:function(){var e=this.$r();if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.get_dashboardViewModel())||ss.isNullOrUndefined(e.get_dashboardViewModel().dashboardModel)){return null}return e.get_dashboardViewModel().dashboardModel.get_sheetName()},get_containedSheetZoneId:function(){var e=this.$r();if(ss.isNullOrUndefined(e)||e.get_flipboardModel()===null){return null}return e.get_flipboardModel().get_zoneId()},get_containedSheetType:function(){var e=this.$r();if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.get_flipboardModel())||ss.isNullOrUndefined(e.get_flipboardModel().get_storyPointModel())){return'worksheet'}return(e.get_flipboardModel().get_storyPointModel().get_isBackingSheetDashboard()?'dashboard':'worksheet')},get_containedDashboardZones:function(){var e=this.$r();if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.get_dashboardViewModel())||ss.isNullOrUndefined(e.get_dashboardViewModel().dashboardModel)||ss.isNullOrUndefined(e.get_dashboardViewModel().dashboardModel.pm)){return null}return e.get_dashboardViewModel().dashboardModel.pm.zones},get_autoUpdate:function(){return tab.ApplicationModel.get_instance().get_autoUpdate()},set_autoUpdate:function(e){tab.ApplicationModel.get_instance().set_autoUpdate(e)},get_isDashboard:function(){return this.$p().get_isDashboard()},$t:function(){return tabBootstrap.VizLayoutConstants.get_shouldShowTabs()},get_vizSize:function(){return tab.ApplicationModel.get_instance().get_workbook().get_outerDashboardSize()},get_session:function(){return this.session},get_applicationPresModel:function(){return tab.ApplicationModel.get_instance().get_appPresModel()},get_viewControllers:function(){var e=this.$o();if(ss.isValue(e)){return e.viewControllers}return[]},get_toolbarDisplayed:function(){return tabBootstrap.ViewerBootstrap.get_instance().toolbarDisplayed},set_toolbarDisplayed:function(e){tabBootstrap.ViewerBootstrap.get_instance().toolbarDisplayed=e;if(ss.isValue(this.get_toolbarContainer())){this.get_toolbarContainer().toggle(e)}},get_invalid:function(){return tab.ApplicationModel.get_instance().get_invalid()},set_invalid:function(e){tab.ApplicationModel.get_instance().set_invalid(e)},get_skipInit:function(){return this.skipInit},get_toolbarCommands:function(){return this.$C},get_customViewsViewModel:function(){if(ss.isValue(this.get_toolbarViewModel())){return this.get_toolbarViewModel().get_customViewsViewModel()}else{return null}},get_toolbarViewModel:function(){if(ss.isValue(this.$v)){return this.$v.get_toolbarViewModel()}else{return null}},$s:function(){return tab.Logger.getLoggerWithName(ss.getTypeName(H)+tsConfig.layoutid)},$r:function(){if(ss.isValue(this.$v)&&ss.isValue(this.$v.get_dashboardViewModel())){return this.$v.get_dashboardViewModel().get_flipboardViewModel()}return null},get_workbookViewModel:function(){return(ss.isValue(this.$v)?this.$v.get_workbookViewModel():null)},$p:function(){if(ss.isValue(this.$v)){return this.$v.get_dashboardViewModel()}return null},$o:function(){if(ss.isValue(this.$v)){return this.$v.get_contentDashboardViewModel()}return null},$q:function(){return(ss.isValue(this.$v)?this.$v.get_devicePreviewViewModel():null)},get_domNode:function(){return this.$u.get_dom().domNode},get_toolbarContainer:function(){return this.$u.get_toolbarContainer()},get_vizClientContainerSize:function(){var e=document.getElementById('viz-client-container');return{w:e.clientWidth,h:e.clientHeight}},get_dashboardViewport:function(){return this.$u},startup:function(){this.$v=new I(tab.ApplicationModel.get_instance());this.$u=tab.ObjectRegistry.newView(G).call(null,[this.$v]);this.$v.add_applicationUpdate(ss.mkdel(this,this.$h));this._connections.push(new tab.CallOnDispose(ss.mkdel(this,function(){this.$v.remove_applicationUpdate(ss.mkdel(this,this.$h))})));this.setupDomAndEvents();if(this.$v.get_shouldShowRightAreaDrawer()){E.get_instance().initRightAreaDrawer()}this.resize(false)},destroyRecursive:function(){this.destroy()},destroy:function(){this.$A=tab.MiscUtil.clearTimeout(this.$A);this.$C=tab.MiscUtil.dispose$1(this.$C);for(var e=0;e<this._connections.length;e++){var fE=this._connections[e];fE.dispose()}ss.clear(this._connections);if(ss.isValue(this.$v)){this.$v.dispose();this.$v=null}$('body').off(this.createNamespacedEventName('mouseenter')).off(this.createNamespacedEventName('mouseleave'));this.$u=tab.MiscUtil.dispose$1(this.$u);this.dispose()},doResize:function(){if(!tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapCompleted()){this.$B++}this.$k(!this.$w)},$6:function(e){tab.ModuleManager.load(tab.IPdfExportDialogModule).call(null,[]).done(ss.mkdel(this,function(fE){var fF=fE.createSpiffPdfExportDialog(this.get_session(),tsConfig.is_mobile);e(fF)}))},resize:function(e){if(!e&&ss.isValue(this.$z)){var fE=this.$9();if(fE.w===this.$z.w&&fE.h===this.$z.h){this.$y=false;return}if(this.$y){this.$z=fE;this.$y=false;return}this.$y=true}else{this.$y=false}this.doResize()},$b:function(){tab.CommandController.get().resetInvalidationHandlers();tab.CommandController.get().add_onUrlActionsResponse(tab.ActionUtils.launchActionUrls);this._connections.push(new tab.CallOnDispose(function(){tab.CommandController.get().remove_onUrlActionsResponse(tab.ActionUtils.launchActionUrls)}));tab.CommandController.get().add_onInvalidation(ss.mkdel(this,this.$g));this._connections.push(new tab.CallOnDispose(ss.mkdel(this,function(){tab.CommandController.get().remove_onInvalidation(ss.mkdel(this,this.$g))})));tab.CommandController.get().add_onPrimaryBootstrapSuccess(ss.mkdel(this,this.$e));this._connections.push(new tab.CallOnDispose(ss.mkdel(this,function(){tab.CommandController.get().remove_onPrimaryBootstrapSuccess(ss.mkdel(this,this.$e))})));if(tab.FeatureFlags.isEnabled('PortableSessionsCheckpoint')){this._connections.push(new ee(tab.CommandController.get()))}},$i:function(e){if(tsConfig.is_authoring&&tsConfig.current_sheet_type!=='worksheet'){if(ss.referenceEquals(e.target,this.get_domNode().get(0))||ss.referenceEquals(e.target,this.$u.get_dashboardNode().get(0))||ss.referenceEquals(e.target,this.$u.get_containerNode().get(0))||ss.referenceEquals(e.target,fy.findDashboardContainer().get(0))){tab.SelectionClientCommands.clearActiveZone()}return}if(ss.isValue(e.target)){if(ss.referenceEquals(e.target,this.get_domNode().get(0))||ss.referenceEquals(e.target,this.$u.get_dashboardNode().get(0))||$(e.target).hasClass('wcLayoutContainer')){var fE=tab.ModelUtils.findActiveOrDefaultVisual();if(ss.isValue(fE)){tab.SelectionClientCommands.clearAllSelections(fE.get_visualId())}e.preventDefault()}}},setupDomAndEvents:function(){$('html').attr('lang',tsConfig.language).toggleClass('ie',BrowserSupport.BrowserSupport.IsIE());var e=(tab.FeatureFlags.isEnabled('IframeSizedToWindow')?$(G.applicationContainerSelector):$('#centeringContainer'));e.append(this.get_domNode());var fE=new l;this.get_domNode().on(this.createNamespacedEventName('contextmenu'),ss.mkdel(this,this.$f)).on(this.createNamespacedEventName('mousedown'),ss.mkdel(fE,fE.$0)).on(this.createNamespacedEventName('mouseup'),ss.mkdel(fE,fE.$1));this._connections.push(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_domNode().off(this.createNamespacedEventName('contextmenu')).off(this.createNamespacedEventName('mousedown')).off(this.createNamespacedEventName('mouseup'))})));fE.$6(ss.mkdel(this,this.$i));this._connections.push(new tab.CallOnDispose(ss.mkdel(this,function(){fE.$7(ss.mkdel(this,this.$i))})));this.$u.onAddedToDom();tab.BaseSession.get_waitHandler().unlock();this.get_toolbarContainer().toggle(this.get_toolbarDisplayed());this.$n();tab.BaseSession.linkTarget=tsConfig.linktarget;tab.AckbarEventsHelper.get().add_doLaunchAuthoring(ss.mkdel(this,this.$7));this._connections.push(new tab.CallOnDispose(ss.mkdel(this,function(){tab.AckbarEventsHelper.get().remove_doLaunchAuthoring(ss.mkdel(this,this.$7))})));this.$b()},$7:function(){tab.ToolbarServerCommands.launchEditing()},$a:function(){if(!ss.isNullOrEmptyString(tsConfig.primaryContentUrl)){return tsConfig.primaryContentUrl}if(ss.referenceEquals(window.self,window.top)){return null}var e=tableau.util.parseUri(document.referrer);if(!ss.isValue(e)||ss.isValue(e['hostname'])&&ss.referenceEquals(e['hostname'],window.location.hostname)){return null}return document.referrer},$h:function(){if(ss.isNullOrUndefined(this.$p())){return}tab.ModuleManager.registerModulesLoadedCallback(ss.mkdel(this,this.$n));if(!this.get_skipInit()&&!this.$x){tab.BaseSession.get_waitHandler().onNextHide(ss.mkdel(this,this.$8));this.$l()}this.$x=true;if(!this.$t()){this.layoutToolbar()}this.$u.resizeAppBanner(H.getClientBounds());this.$q().set_vizSize(this.get_vizSize());this.$u.addDevicePreviewSettings();this.resize(false)},$n:function(){},$l:function(){if(tsConfig.showLytebox){$('#primaryContent').attr('src',this.$a())}},$f:function(e){var fE=$(e.target);if(fE.filter('input[type=text]').length===0&&fE.filter('textarea').length===0){e.preventDefault();e.stopPropagation()}},$9:function(){var e=null;if(!tab.FeatureFlags.isEnabled('IframeSizedToWindow')||tsConfig.isPublic){e=tabBootstrap.ViewerBootstrap.get_instance().getWebClientDashboardContainerSize(tsConfig.current_sheet_type)}else{e={w:window.innerWidth,h:window.innerHeight}}return e},$e:function(){E.get_instance().initTabbedNavigation();this.$z=this.$9();if(this.$B>1){this.$m()}},$g:function(e){var fE=e.layoutStatus;this.set_invalid(!ss.isNullOrUndefined(fE.invalidatedLayout)&&fE.invalidatedLayout);if(ss.isValue(fE.vizStateList)&&fE.vizStateList.length>0){var fF=[];for(var fG=0;fG<fE.vizStateList.length;fG++){var fH=fE.vizStateList[fG];if(!ss.contains(fF,fH.sheet)&&fH.vizRegionRectList.length>0){fF.push(fH.sheet)}}var fI=this.get_viewControllers();for(var fJ=0;fJ<fF.length;fJ++){var fK=fF[fJ];var fL={$:fK};var fM=_.find(fI,ss.mkdel({name:fL},function(fN){return ss.referenceEquals(fN.get_sheetName(),this.name.$)}));if(ss.isValue(fM)){fM.$1(e)}}}},$k:function(e){var fE=(e?0:1000);this.$A=tab.MiscUtil.clearTimeout(this.$A);this.$A=window.setTimeout(ss.mkdel(this,this.$j),fE)},$j:function(){if(!tab.BaseSession.get_waitHandler().isBusy()&&(!this.$w||ss.isValue(tsConfig.layoutid))&&ss.isValue(this.$v)){this.$c();return}this.$A=tab.MiscUtil.clearTimeout(this.$A);this.$A=window.setTimeout(ss.mkdel(this,this.$j),100)},$c:function(){var e=tab.FeatureFlags.isEnabled('IframeSizedToWindow');this.$z=this.$9();if(tsConfig.isPublic){var fE=tabBootstrap.ViewerBootstrap.get_instance().getVizClientContainerSize(tsConfig.current_sheet_type);$(G.vizContainerSelector).css({width:fE.w+'px',height:fE.h+'px'})}this.$m();tab.CommandController.get().refreshLayout();this.layoutToolbar();var fF=E.get_instance().get_tabbedNavigation();if(this.$t()&&ss.isValue(fF)){if(tsConfig.is_mobile_app){var fG=(e?this.get_vizClientContainerSize().w:H.getClientBounds().w);fF.get_widgetDomNode().style.width=fG+'px'}fF.resizeShim()}this.$w=true},layoutToolbar:function(){var e=(tab.FeatureFlags.isEnabled('IframeSizedToWindow')?this.get_vizClientContainerSize().w:H.getClientBounds().w);if(ss.isValue(this.$D)&&this.$D===e){return}this.$D=e;{var fE=tabBootstrap.MetricsController.createContext('TBRLAY'.toString(),64,null);try{if(!tab.ApplicationModel.get_instance().get_showToolbar()){this.get_toolbarContainer().css('visibility','hidden')}else if(tsConfig.toolbarContainerVis){if(eV.get_toolbarIsBottom()&&!tab.FeatureFlags.isEnabled('IframeSizedToWindow')){this.get_domNode().after(this.get_toolbarContainer())}this.get_toolbarContainer().css('visibility','visible');if(tsConfig.is_mobile&&!tsConfig.is_authoring&&!tabBootstrap.Utility.get_isEmbedded()){this.$u.resizeToolbar()}else if(!tab.FeatureFlags.isEnabled('IframeSizedToWindow')){if(eV.get_toolbarIsBottom()||!this.$t()){this.get_toolbarContainer().css('max-width',this.$D+'px')}this.$u.resizeToolbar()}}}finally{if(ss.isValue(fE)){fE.dispose()}}}},$m:function(){if(!tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapCompleted()||this.skipInit&&!this.$w){return}this.doUpdateClientBound()},doUpdateClientBound:function(){var e=null;var fE=tsConfig.is_mobile_device&&!tsConfig.isVizPortal&&!tsConfig.isPublic;if(tab.FeatureFlags.isEnabled('IframeSizedToWindow')&&!fE){e=tab.DashboardSizeCalculator.asSizePresModel(tab.DashboardSizeCalculator.get_dashboardViewportSize())}else{var fF=H.getClientBounds();e={w:fF.w,h:fF.h}}tab.SheetClientCommands.setPortSize(e)},$d:function(){var e={};e['t']=tabBootstrap.MetricsController.getTiming();e['d']='APPINT'.toString();var fE=new tabBootstrap.MetricsEvent('gen',2,e);tabBootstrap.MetricsController.logEvent(fE);var fF=tabBootstrap.Utility.sendCommandWithContext('tableau.responsive');if(!fF){}},$8:function(){var e=(tab.ProgressiveLoader.get_progressiveLoadEnabled()?150:450);this.$d();var fE=$('#staticImage');var fF=$('#loadingGlassPane');var fG=$('#loadingSpinner');var fH=$('#svg-spinner-container');if(tsConfig.animateTransition){tab.WaitHandler.loadingElementFadeOut(fG,e,function(fI){fI.hide();fH.css('background','rgba(255,255,255,0.6)')});tab.WaitHandler.loadingElementFadeOut(fF,e,function(fI){fI.hide().css('cursor','default')});if(fE.length>0){tab.WaitHandler.loadingElementFadeOut(fE,e,function(fI){fI.hide()})}}else{fG.hide();fE.hide();fF.hide()}}},spiff.Widget,[tab.IWidget,tab.IAppendableView,ss.IDisposable,cK,cI]);ss.initClass(I,a,{add_applicationUpdate:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_applicationUpdate:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_dashboardViewModel:function(){return this.$9.get_dashboardViewModel()},get_contentDashboardViewModel:function(){return this.$9.get_contentDashboardViewModel()},get_workbookViewModel:function(){return this.$9},get_appBannerViewModel:function(){return this.$5},get_toolbarViewModel:function(){return this.$8},get_devicePreviewViewModel:function(){return this.$7},get_shouldShowCommenting:function(){var e=!tsConfig.is_authoring&&!tsConfig.is_mobile_app&&tsConfig.commentingEnabled&&tab.FeatureFlags.isEnabled('CommentingPane')&&tab.FeatureFlags.isEnabled('CommentingOnSingleVizWithContext')&&tsConfig.allow_commenting&&tsConfig.allow_view_comments;return e},get_shouldShowRightAreaDrawer:function(){return!(tsConfig.is_authoring&&tsConfig.is_mobile)&&!tsConfig.is_mobile_app},$3:function(){tab.CommandController.get().legacySession.performPostLoadOperations(tsConfig.current_sheet_name,ss.mkdel(this,this.$4))},dispose:function(){if(ss.isValue(this.$8)){this.$8.dispose()}this.$5.dispose();this.$2();this.$6.remove_newWorkbook(ss.mkdel(this,this.handleNewWorkbook));this.$7.dispose();spiff.BaseViewModel.prototype.dispose.call(this)},handleNewWorkbook:function(e){this.$2();this.$9=new fz(e)},$2:function(){if(ss.isValue(this.$9)){this.$9.dispose();this.$9=null}},handleApplicationUpdate:function(){this.raiseActionEvent(this.$2$1)},$4:function(e){var fE=e;if(ss.isValue(fE['viewCount'])){this.get_toolbarViewModel().set_viewCount(parseInt(fE['viewCount'],10))}}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(J,a,{$c:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},$d:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},$a:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},$b:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},dismiss:function(){this.element.remove()},$8:function(){this.$9.label.text(tab.Strings.AreYouSureText);var e=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$6),tab.Strings.AreYouSureCancel,null,2,null);this.disposables.add$1(e);this.$9.cancelButton.append(e.element);var fE=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$7),tab.Strings.AreYouSureDelete,null,1,null);this.disposables.add$1(fE);this.$9.confirmButton.append(fE.element)},$6:function(){this.dismiss();if(ss.isValue(this.$2$2)){this.$2$2()}},$7:function(){this.dismiss();if(ss.isValue(this.$2$1)){this.$2$1()}}},spiff.Widget,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(K,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(L,a,{});ss.initClass(O,a,{get_retryWithMessageViewName:function(){return ss.formatString('/{0}/dataSourceGenericErrorView.html',tsConfig.language)},get_submitted:function(){return this.$1$1},set_submitted:function(e){this.$1$1=e},onAuthDialogMessage:function(e,fE){if(ss.isNullOrUndefined(e)){return}var fF=e;var fG=fF.data.toString();if(ss.isNullOrEmptyString(fG)||!ss.equalsT(fG,'tableau.authCompleted')){return}if(!ss.equalsT(BrowserSupport.BrowserSupport.GetOrigin(document.location),fF.origin)){return}this.set_submitted(true);this.cleanup(fE);if(ss.isValue(this.onProceed)){this.onProceed()}},show:null,cleanup:null});ss.initClass(N,a,{cleanup:function(e){var fE=document.getElementById('auth-overlay');if(!ss.isNullOrUndefined(fE)){fE.parentElement.removeChild(fE)}if(ss.isValue(e)){if(ss.isValue(e.onTabSelectHandle)){e.onTabSelectHandle.dispose()}tab.WindowHelper.removeListener(window.self,'message',e.eventHandler);if(ss.isValue(e.zoneBecameValidHandler)){e.zoneBecameValidHandler.dispose()}}},dispose:function(){this.cleanup(null)}},O,[ss.IDisposable]);ss.initClass(M,a,{show:function(){this.createOverlay();var e=new ck;var fE=ss.mkdel(this,function(){this.cleanup(e)});fB.add_zoneBecameValid(fE);e.zoneBecameValidHandler=new tab.CallOnDispose(function(){fB.remove_zoneBecameValid(fE)});var fF=ss.mkdel(this,function(fH){this.onAuthDialogMessage(fH,e)});e.eventHandler=fF;var fG=ss.mkdel(this,function(){this.cleanup(e)});tab.CommandController.add_sheetNameChanged(fG);e.onTabSelectHandle=new tab.CallOnDispose(function(){tab.CommandController.remove_sheetNameChanged(fG)});tab.WindowHelper.addListener(window.self,'message',fF)},createOverlay:function(){var e=$('.dashboardSpacer');var fE=$("<div id='auth-overlay'></div>");if(ss.isValue(this.$4)){tab.DataConnectionUtils.isTableauServerSupportedInReconnectFlow(this.dataSourceConnectionAttemptErrorResponse.ConnectionClass).done(ss.mkdel(this,function(fF){var fG=this.$1();if(fF){ReactDOM.render(React.createElement(eC,fG),fE.get(0))}else{ReactDOM.render(React.createElement(el,fG),fE.get(0))}}))}else{this.$0(fE)}e.append(fE)},$0:function(e){var fE=document.createElement('iframe');fE.setAttribute('src',this.$2);fE.setAttribute('tb-test-id','dse-frame');e.append(fE)},$1:function(){var e=[];for(var fE=0;fE<this.$4.connectionAttrDisplayNames.length;++fE){e.push([this.$4.connectionAttrDisplayNames[fE],this.$4.connectionAttrDisplayValues[fE]])}var fF={connectionAttemptInfo:this.$3,connectionAttributes:this.$4.exceptionAttrs,connectionDisplayAttributes:Array.prototype.slice.call(e),connectionClass:this.dataSourceConnectionAttemptErrorResponse.ConnectionClass,connectionErrorStage:this.$4.connectionErrorStage,connectionName:this.dataSourceConnectionAttemptErrorResponse.ConnectionName,connectionTypeLabel:this.$4.connectionTypeLabel,dataSourceCaption:this.dataSourceConnectionAttemptErrorResponse.DataSourceCaption,errorType:this.dataSourceConnectionAttemptErrorResponse.ErrorType,onCredentialsAdded:ss.mkdel(this,function(fG){this.cleanup(null);this.onProceed()})};return fF}},N,[ss.IDisposable]);ss.initClass(P,a,{dispose:function(){if(ss.isValue(this.parentNode)){ReactDOM.unmountComponentAtNode(this.parentNode);$(this.parentNode).remove()}}},null,[ss.IDisposable]);ss.initClass(R,a,{get_dimensions:function(){return this.$0},translatePositionToViewport:function(e){var fE={x:e.x,y:e.y};R.$0(fE);fE.y-=this.$0.t;fE.x-=this.$0.l;return fE},getVisibleRoom:function(e,fE){var fF=this.translatePositionToViewport(e);var fG=function(fL){return Math.max(0,fL-fE)};var fH=fG(Math.min(this.get_dimensions().w-fF.x,window.pageXOffset+window.innerWidth-e.x));var fI=fG(Math.min(fF.x,e.x));var fJ=fG(Math.min(fF.y,e.y));var fK=fG(Math.min(this.get_dimensions().h-fF.y,window.pageYOffset+window.innerHeight-e.y));return{roomAbove:fJ,roomBelow:fK,roomLeft:fI,roomRight:fH}},getDocumentViewport:function(e){var fE=this.getVisibleRoom(e,0);return{l:ss.Int32.trunc(e.x-fE.roomLeft),t:ss.Int32.trunc(e.y-fE.roomAbove),w:ss.Int32.trunc(fE.roomLeft+fE.roomRight),h:ss.Int32.trunc(fE.roomAbove+fE.roomBelow)}}},null,[tab.IBrowserViewport]);ss.initClass(S,a,{});ss.initClass(T,a,{$6:function(){return this.props.enabledState==='enabled'},$5:function(){return this.props.enabledState==='disabled-no-permissions'},render:function(){var e=ss.mkdel(this,function(){var fE='tab-button-object';var fF='#808080';var fG='#e5e5e5';var fH;if(tab.FeatureFlags.isEnabled('BasicButtonObjectStyling')){fH={width:this.props.width,height:this.props.height,borderWidth:this.props.border.width+'px',borderStyle:tab.BorderDefinition.borderStyleToCss(this.props.border.style),borderColor:(this.$6()?this.props.border.color:fF),backgroundColor:(this.$6()?this.props.backgroundColor:fG),boxSizing:'border-box'}}else{fH={width:this.props.width,height:this.props.height}}return spiff.DOMElements.div({className:fE,title:this.props.tooltipText,'aria-label':this.props.tooltipText,style:fH,onMouseEnter:ss.mkdel(this,function(fI){this.props.hoverActivated()}),onMouseLeave:ss.mkdel(this,function(fI){this.props.hoverDeactivated()}),onDoubleClick:ss.mkdel(this,this.$2)},(!this.$6()?ss.mkdel(this,this.$9)():null),this.$7(),this.$a())});return spiff.InteractAsButtonWrapperComponent.create({handleClickOnly:ss.mkdel(this,this.$4),handleEnterSpaceOnly:ss.mkdel(this,this.$3),disabled:false,buttonContent:e})},$2:function(e){if(!this.$6()&&tsConfig.is_authoring&&e.button===0){this.props.handleAuthoringDoubleClick()}},$9:function(){return spiff.DOMElements.div({className:'tab-button-zone-disabled-overlay',key:'disabledButtonOverlay'})},$1:function(){return this.props.imageWidth-2*this.props.border.width},$0:function(){return this.props.imageHeight-2*this.props.border.width},$a:function(){if(this.props.errorDialogProps.dialogIsOpen&&this.$5()){return S.createDialog(this.props.errorDialogProps.closeDialog,tab.Strings.DashboardButtonAccessDenied,tab.Strings.DashboardButtonNoPermissions)}else{return null}},$8:function(){return spiff.DOMElements.div({className:'tab-button-zone-image-hover',style:{width:this.$1(),height:this.$0(),backgroundColor:tab.ColorModel.fromColorCode(this.props.backgroundColor).toRgb(),opacity:0.5}})},$4:function(e){var fE=e.altKey||!tsConfig.is_authoring;if(this.$6()&&fE){bo.logNavigateButtonByClickEvent(tsConfig.is_authoring,e.altKey);this.props.navigateToSheet()}else if(fE&&this.$5()){this.props.errorDialogProps.showDialog()}},$3:function(){if(this.$6()){bo.logNavigateButtonByKeyboardEvent(tsConfig.is_authoring);this.props.navigateToSheet()}else if(this.$5()){this.props.errorDialogProps.showDialog()}},$7:function(){if(tab.FeatureFlags.isEnabled('BasicButtonObjectTextSupport')&&this.props.buttonType==='text'){return this.$d()}else if(tab.FeatureFlags.isEnabled('BasicButtonObjectTextSupport')&&this.props.buttonType==='image'){return this.$c()}else{return this.$c()}},$c:function(){if(!this.$6()){return this.$b('tab-button-zone-image-disabled')}else{return spiff.DOMElements.div({className:'tab-button-object-hover'},this.$b('tab-button-zone-image'),(this.props.hoverActive?ss.mkdel(this,this.$8)():null))}},$d:function(){return spiff.DOMElements.div({className:'tab-button-zone-text'},this.props.caption.toString())},$b:function(e){var fE=this.$1();var fF=this.$0();var fG={className:'image-disabled-svg',width:fE,height:fF};var fH=spiff.DOMElements.feColorMatrix({values:'0.3333 0.3333 0.3333 0.17 0\n                           0.3333 0.3333 0.3333 0.17 0\n                           0.3333 0.3333 0.3333 0.17 0\n                           0      0      0      1    0'});var fI=spiff.DOMElements.filter({id:'grayscale'},fH);var fJ=spiff.DOMElements.defs({},fI);var fK=spiff.DOMElements.image({xlinkHref:this.props.imageUrl,className:e,width:fE,height:fF});return spiff.DOMElements.svg(fG,fJ,fK)}},React.Component);ss.initClass(U,a,{$c:function(){return this.$l.get_backgroundColor()},$d:function(){return new tab.BorderDefinition(this.$l.get_borderWidth(),this.$l.get_borderStyle(),this.$l.get_borderColor(),0)},$e:function(){return this.$l.get_buttonType()},$f:function(){return this.$l.get_caption()},$g:function(){return this.$l.get_clickActionString()},$k:function(){return this.$l.get_tooltipText()},get_imageUrl:function(){var e=tab.CommandController.get().legacySession;var fE=e.formatDashboardTempfileReference(this.$l.get_imagePathKey(),true,false);return fE},$j:function(){return this.$l.get_imageWidth()},$i:function(){return this.$l.get_imageHeight()},get_imageWidth:function(){return(this.get_isWidthConstrained()?this.$o.get_contentWidth():ss.Int32.trunc(this.get_aspectRatio()*this.$o.get_contentHeight()))},get_imageHeight:function(){return(this.get_isWidthConstrained()?ss.Int32.trunc(this.$o.get_contentWidth()/this.get_aspectRatio()):this.$o.get_contentHeight())},get_aspectRatio:function(){return this.$j()/this.$i()},get_isWidthConstrained:function(){var e=this.$j()/this.$o.get_contentWidth()>=this.$i()/this.$o.get_contentHeight();return e},$h:function(){return this.$l.get_enabledState()},createUpdatedProps:function(){return{backgroundColor:this.$c(),border:this.$d(),buttonType:this.$e(),caption:this.$f(),navigateToSheet:ss.mkdel(this,this.navigateToSheet),tooltipText:this.$k(),enabledState:this.$h(),imageUrl:this.get_imageUrl(),width:this.$o.get_contentWidth(),height:this.$o.get_contentHeight(),imageWidth:this.get_imageWidth(),imageHeight:this.get_imageHeight(),hoverActivated:ss.mkdel(this,this.$9),hoverDeactivated:ss.mkdel(this,this.$a),hoverActive:this.$n,handleAuthoringDoubleClick:ss.mkdel(this,this.$6),errorDialogProps:{dialogIsOpen:this.$m,showDialog:ss.mkdel(this,this.$b),closeDialog:ss.mkdel(this,this.$5)}}},$b:function(){this.$m=true;this.incrementProps()},$5:function(){this.$m=false;this.incrementProps()},$9:function(){this.$n=true;this.incrementProps()},$a:function(){this.$n=false;this.incrementProps()},$6:function(){var e=new tab.GetButtonConfigDialogCmd;e.c['dashboard']=this.$o.get_dashboardSheetName();e.c['dashboardObjectStateHandle']=this.$o.get_model().pm.zoneCommon.dashboardObjectCurrentStateHandle;e.c['dashboardObjectHandle']=this.$o.get_model().pm.zoneCommon.dashboardObjectHandle;e.invoke()},navigateToSheet:function(){var e=tab.CommandSerializer.deserialize(this.$g().toString());tab.ServerCommands.executeServerCommand(e,'afterDelay')},$8:function(){this.incrementProps()},$7:function(){this.incrementProps()}},ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.IDisposable,tab.IViewModel,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(V,a,{$7:function(){return this.$2$1},$8:function(e){this.$2$1=e},$5:function(){return this.$2$2},$6:function(e){this.$2$2=e},$9:function(){return this.$2$3},$a:function(e){this.$2$3=e},handleCommandCompleted:function(){if(!tab.FeatureFlags.isEnabled('CommandCancellation')){return}if(this.$1()){var e=new Date;X.$2(this.$c.get_commandName(),this.$d,e)}this.$0()},handleCommandStarted:function(e){if(!tab.FeatureFlags.isEnabled('CommandCancellation')){return}this.$c=e;this.$e=window.setTimeout(ss.mkdel(this,this.$4),this.dialogShowDelay)},$4:function(){if(!tab.FeatureFlags.isEnabled('CommandCancellation')||!this.$c.get_isCancelable()){return}if(ss.isNullOrUndefined(this.$c)||ss.isNullOrUndefined(this.$c.get_remoteCommands())){return}var e=this.$c.get_remoteCommands();if(e.length!==1){return}var fE=e[0];if(ss.isNullOrUndefined(V.$0)){this.parentNode=document.createElement('div');var fF={cancel:ss.mkdel(this,function(){this.$b=new Date;tab.CancelCommands.cancelRunningCommand(fE,ss.mkdel(this,this.$3),ss.mkdel(this,this.$2))}),title:this.$9()};V.$0=React.createElement(W,fF);ReactDOM.render(V.$0,this.parentNode);this.$d=new Date}},$1:function(){return ss.isValue(this.$c)},$0:function(){this.$e=tab.MiscUtil.clearTimeout(this.$e);V.$0=null;this.$d=null;this.$b=null;this.$c=null;_.defer(ss.mkdel(this,this.dispose))},$3:function(e){if(!ss.staticEquals(this.$7(),null)){this.$7()(e)}if(this.$1()){var fE=new Date;X.$3(this.$c.get_commandName(),e,this.$d,this.$b,fE)}this.$0()},$2:function(){if(!ss.staticEquals(this.$5(),null)){this.$5()()}if(this.$1()){var e=new Date;X.$1(this.$c.get_commandName(),this.$d,this.$b,e)}this.$0()}},P,[ss.IDisposable,tab.IWaitForCommands]);ss.initClass(W,a,{render:function(){return React.createElement(SharedWidgets.DialogWidget,{children:this.$1(),testId:'CancelDialog',isModal:true,type:2,positioningBehavior:0,dialogBodyStyle:{height:200+'px',width:375+'px',overflow:'visible',padding:0},onCloseRequest:function(){},shouldReturnFocusOnClose:false,shouldAdjustPositionOnWindowResize:true,shouldRecenterOnUpdate:true,showFooter:false,zIndex:1000})},$1:function(){return React.createElement(Cancel.WaitingComponent,{onButtonClick:ss.mkdel(this,this.$0),buttonType:3,buttonLabel:(this.state.isCanceling?tab.Strings.CancelDialogCancellingStatus:tab.Strings.DialogButtonCancel),disableButton:this.state.isCanceling,title:(ss.isNullOrEmptyString(this.props.title)?tab.Strings.CancelDialogProcessingStatus:this.props.title)})},$0:function(){this.props.cancel();this.setState({isCanceling:true})}},spiff.PureRenderComponent);ss.initClass(X,a,{});ss.initClass(Y,a,{get_renderOffset:function(){return this.$8},set_renderOffset:function(e){this.$8=e;this.get_currentContext().translate(-this.$8.x,-this.$8.y)},get_currentCanvas:function(){return(this.$7?this.$4:this.$1)},get_currentContext:function(){return(this.$7?this.$5:this.$2)},get_visibleRect:function(){if(ss.isValue(this.$0)){return this.$0}var e=Y.$5(this.get_currentCanvas(),this.get_currentCanvas().width);var fE=Y.$4(this.get_currentCanvas(),this.get_currentCanvas().height);return{x:this.$8.x,y:this.$8.y,w:e,h:fE}},clear:function(){this.clearRect(this.get_visibleRect())},reset:function(){this.$7=false;this.$5=null;this.$4=null;this.get_currentContext().reset();this.$8={x:0,y:0};this.clearPrevTextRunInfo()},setRenderOffsetNoTranslate:function(e){this.$8=e},clearRect:function(e){this.get_currentContext().clearRect(e.x,e.y,e.w,e.h)},isRectVisible:function(e){return tab.RectXYUtil.intersectsWith(e,this.get_visibleRect())},beginOffScreenRender:function(e){if(this.$7){return}if(ss.isValue(e)){this.$3=tab.RectXYUtil.intersect(e,this.get_visibleRect())}else{this.$3=this.get_visibleRect()}if(ss.isNullOrUndefined(this.$4)){this.$4=document.createElement('canvas');var fE={w:this.$1.width,h:this.$1.height};var fF={w:Y.$5(this.$1,0),h:Y.$4(this.$1,0)};Z.densifyCanvasUsingSize(this.$4,fE,fF)}if(ss.isNullOrUndefined(this.$5)){this.$5=Y.getRenderContext(this.$4,'transparent')}else{this.$5.reset()}var fG=this.$1.width/Y.$5(this.$1,this.$1.width);if(fG!==1){Z.scaleCanvasDrawing(this.$5,fG)}this.$5.setTransform(this.$2.get_transformation());this.$7=true;var fH=tab.RectXYUtil.outsetRect(this.$3,1,1);tab.RectXYUtil.intersectInPlace(fH,this.get_visibleRect());this.clearRect(fH)},endOffScreenRender:function(e){if(!this.$7){return}this.$7=false;this.$2.save();this.$2.set_alpha(e);this.$2.resetTransform();if(ss.isNullOrUndefined(this.$3)){this.$2.drawImage1(this.$4,0,0)}else if(!tab.RectXYUtil.isEmpty(this.$3)){var fE=this.$2.pixelRatio;var fF=Math.max(0,Math.floor((this.$3.x-this.$8.x)*fE));var fG=Math.max(0,Math.floor((this.$3.y-this.$8.y)*fE));var fH=Math.min(this.$1.width,Math.ceil(this.$3.w*fE));var fI=Math.min(this.$1.height,Math.ceil(this.$3.h*fE));this.$2.drawImage5(this.$4,fF,fG,fH,fI,fF,fG,fH,fI)}this.$2.restore()},renderFilledRectangle:function(e,fE,fF,fG,fH){var fI=fF/2;var fJ=fG/2;var fK=this.get_currentContext();fK.set_shapeFillStyle(fH);fK.fillRect(e-fI,fE-fJ,fF,fG)},renderFilledWedge:function(e,fE,fF,fG,fH,fI,fJ){var fK=Y.toCanvasAngle(fG);var fL=Y.toCanvasAngle(fH);if(Math.abs(fL-fK)<Y.angleEpsilon){return}if(ss.isNullOrUndefined(fJ)){fJ=false}var fM=this.get_currentContext();fM.beginPath();fM.moveTo(e,fE);fK=Y.$6(fK);fL=Y.$6(fL);fM.arc(e,fE,fF,fK,fL,fJ);fM.closePath();fM.set_shapeFillStyle(fI);fM.fill()},createStyleSettersAndSetDominantStyle:function(e){if(ss.isNullOrUndefined(e)){return function(fG){}}var fE=[];e.forEach(ss.mkdel(this,function(fG,fH){var fI=true;var fJ=fG.v[(fG.c?0:0)];for(var fK=1;fK<fG.length;++fK){if(!ss.referenceEquals(fJ,fG.v[(fG.c?0:fK)])){fI=false;break}}if(fI){this.setTextStyleProperty(fH,fJ)}else if(fH!=='text_style_color'){fE.push(fH)}}));var fF=ss.mkdel(this,function(fG){for(var fH=0;fH<fE.length;fH++){var fI=fE[fH];var fJ=e.get(fI);this.setTextStyleProperty(fI,fJ.v[(fJ.c?0:fG)])}});return fF},setTextStyleProperty:function(e,fE){switch(e){case'font':{this.get_currentContext().set_font(fE);break}case'text_orientation':{this.get_currentContext().set_textAngle(fE);break}case'text_alignment':{this.get_currentContext().set_textAlign(fE);break}case'alpha':case'text_style_color':{break}case'text_decoration':{this.get_currentContext().set_shouldUnderlineText(!!fE);break}default:{break}}},renderText:function(e,fE,fF,fG,fH,fI){if(fI&&ss.isValue(this.$6)&&this.$6.$0(fE,fF)){var fJ=this.$6.$1(fE,fF);fE=fJ.x;fF=fJ.y}else{this.clearPrevTextRunInfo()}if(ss.isValue(fH)){this.get_currentContext().set_textFillStyle(fH)}if(fG>0){if(!fI){e=ss.trimEndString(e)}this.get_currentContext().fillText2(e,fE,fF,fG)}else{this.get_currentContext().fillText1(e,fE,fF)}if(fI){var fK=this.get_currentContext().measureText(e).width;var fL=this.get_currentContext().get_textAlign()==='end';var fM=this.get_currentContext().get_textAngle();var fN;if(fM>1){fN='down'}else if(fM<-1){fN='up'}else{fN='horizontal'}this.$6=new i(fE,fF,fK,fL,fN)}else{this.clearPrevTextRunInfo()}},clearPrevTextRunInfo:function(){this.$6=null},strokeCurrentPath:function(e,fE){var fF=this.get_currentContext();fF.set_lineWidth(e);fF.set_strokeStyle(fE);fF.stroke()},fillCurrentPath:function(e){var fE=this.get_currentContext();fE.set_shapeFillStyle(e);fE.fill()},startCachingVisibleRect:function(){this.$0=null;this.$0=this.get_visibleRect()},stopCachingVisibleRect:function(){this.$0=null}});ss.initClass(Z,a,{});ss.initClass(ba,a,{},ss.EventArgs);ss.initClass(bb,a,{});ss.initClass(bc,a,{dispose:function(){this.$2.dispose()},showErrorBanner:function(e,fE,fF,fG){this.$1({testId:'banner-error',toastType:'error',message:e,actionMessage:fE},fF)},showSuccessBanner:function(e,fE,fF,fG){this.$1({testId:'banner-success',toastType:'success',message:e,actionMessage:fE,autoDismiss:fG},fF)},$1:function(e,fE){var fF=document.createElement('div');e.topLeftYPx=tabBootstrap.VizLayoutConstants.get_authoringMenuBarHeight();e.onCloseRequest=function(){ReactDOM.unmountComponentAtNode(fF)};e.onAction=function(){fE();e.onCloseRequest()};e.zIndex=1031;var fG=React.createElement(SharedWidgets.ToastWidget,e);ReactDOM.render(fG,fF);this.$2.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$0(fF)})))},$0:function(e){if(!ss.isNullOrUndefined(e)){_.defer(function(){ReactDOM.unmountComponentAtNode(e);$(e).remove()})}}},null,[tab.ICommonBannerProvider,ss.IDisposable]);ss.initClass(bd,a,{showAlertDialog:function(e,fE){var fF=bd.$0();var fG={content:e,title:fE,contentSelectable:false,onDialogCloseRequested:function(){ReactDOM.unmountComponentAtNode(fF)}};var fH=React.createElement(eo,fG);ReactDOM.render(fH,fF);this.$2.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$0(fF)})))},showConfirmationDialog:function(e,fE,fF,fG,fH){var fI=bd.$0();var fJ={content:e,title:fE,contentSelectable:fF,dialogButtons:[],onDialogCloseRequested:function(){ReactDOM.unmountComponentAtNode(fI)}};if(fF){be.$1(fE,e,null)}fJ.dialogButtons.push({buttonClickHandler:fG,buttonText:tab.Strings.DialogYesButtonText,testId:'YesBtn',buttonType:5});fJ.dialogButtons.push({buttonClickHandler:fH,buttonText:tab.Strings.DialogNoButtonText,testId:'NoBtn',buttonType:3});var fK=React.createElement(eo,fJ);ReactDOM.render(fK,fI);this.$2.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$0(fI)})))},ShowErrorDialog:function(e,fE,fF){be.$1(fE,e,fF);bQ.show(e,fE,fF)},ShowLocalErrorDialog:function(e,fE,fF){var fG=bd.$0();var fH={content:e,title:fE,contentSelectable:true,dialogButtons:[{buttonClickHandler:null,buttonText:tab.Strings.DialogButtonOK,testId:'OKBtn',buttonType:2}],onDialogCloseRequested:function(){ReactDOM.unmountComponentAtNode(fG)}};be.$1(fE,e,null);if(tab.FeatureFlags.isEnabled('WebErrorDialog')){fH.dialogWidth=500;var fI=React.createElement(dc,fH);ReactDOM.render(fI,fG)}else{fH.dialogWidth=250;var fJ=React.createElement(eo,fH);ReactDOM.render(fJ,fG)}this.$2.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$0(fG)})))},showSheetAuthenticationOverlay:function(e,fE,fF){be.$0('AuthenticationOverlay',e);var fG=new M(e,fE,fF);fG.show();this.$2.add$1(fG)},showGenericDataSourceErrorOverlay:function(e,fE,fF){be.$0('GenericErrorOverlay',e);var fG=new cA(e,fE,fF);fG.show();this.$2.add$1(fG)},showSheetAuthenticationDialog:function(e,fE,fF){be.$0('AuthenticationDialog',e);var fG=new bN(e,fE,fF);fG.show();this.$2.add$1(fG)},showGenericDataSourceErrorDialog:function(e,fE,fF){be.$0('GenericErrorDialog',e);var fG=new cz(e,fE,fF);fG.show();this.$2.add$1(fG)},showFileDownloadDialog:function(e,fE,fF,fG){var fH=new bW(e,fE,fF,fG);fH.show();this.$2.add$1(fH)},showConnectionMissingFileDialog:function(e,fE,fF){var fG=$.Deferred();var fH=new bi(e,fE,fF);fH.add_handled(function(fI){fG.resolve(fI)});fH.show();this.$2.add$1(fH);return fG.promise()},showEditConnectionInformationDialog:function(e,fE){var fF=$.Deferred();if(!tsConfig.is_authoring||!tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().get_dataSources().getDataSource(e.datasource).get_isDataTabViewSupported()){return fF.resolve(false).promise()}if(fE){this.$1(e).done(function(fH){fF.resolve(fH)})}else{var fG=new ce(e);fG.add_handled(ss.mkdel(this,function(fH){if(fH){this.$1(e).done(function(fI){fF.resolve(fI)})}else{fF.resolve(false)}}));fG.show()}return fF.promise()},$1:function(e){var fE=$.Deferred();if(e.connectionErrorStage!=='load-metadata-failed'){tab.ModuleManager.load(tab.IConnectionDialogModule).call(null,[]).done(function(fF){fF.showEditConnectionDialog(tab.DataConnectionUtils.connectionNameFromFullConnectionName(e.connectionFullName),function(fG){tab.VizClientCommands.setUIMode('data-tab','ReconnectEditConnection','');fE.resolve(true)},function(){tab.SheetClientCommands.ensureLayoutForSheet(tsConfig.current_sheet_name);fE.resolve(false)})})}else{tab.VizClientCommands.setUIMode('data-tab','ReconnectEditConnection','');fE.resolve(true)}return fE.promise()},showConnectionSignInDialog:function(e,fE){var fF=$.Deferred();var fG=e.dataSourceConnectionAttemptInfos[0];if(tab.FeatureFlags.isEnabled('DataToTheWebTabbedAuthReconnect')){tab.TabbedAuthenticationDialogCommands.showTabbedAuthenticationDialog(tab.DataConnectionUtils.getConnectionNames(e),fE,e);return fF}else{var fH=[];for(var fI=0;fI<e.dataSourceConnectionAttemptInfos[0].connectionAttrDisplayNames.length;++fI){fH.push([fG.connectionAttrDisplayNames[fI],fG.connectionAttrDisplayValues[fI]])}tab.ModuleManager.load(tab.IConnectionDialogModule).call(null,[]).done(function(fJ){fJ.showSignInDialog(fG.exceptionAttrs,Array.prototype.slice.call(fH),fG.datasourceCaption,tab.DataConnectionUtils.connectionNameFromFullConnectionName(fG.connectionFullName),fG.connectionTypeLabel,function(fK){fF.resolve()},function(){fF.reject()})});return fF.promise()}},dispose:function(){this.$2.dispose()},$0:function(e){ReactDOM.unmountComponentAtNode(e);$(e).remove()}},null,[tab.ICommonDialogProvider,ss.IDisposable]);ss.initClass(be,a,{});ss.initClass(bf,a,{reset:function(e){this.$2[e]=0;this.$1[e]=null},hold:function(e){if(!ss.keyExists(this.$2,e)){this.$2[e]=0}this.$2[e]+=1;return new bh(e,ss.mkdel(this,function(){this.$0(e)}))},$0:function(e){if(this.$2[e]<=0){return}this.$2[e]-=1;if(this.$2[e]===0&&!ss.staticEquals(this.$1[e],null)){this.$1[e]()}},addCompletedHandler:function(e,fE){var fF=null;fF=ss.mkdel(this,function(){if(!ss.staticEquals(fE,null)){fE()}this.$1[e]=ss.delegateRemove(this.$1[e],fF)});this.$1[e]=ss.delegateCombine(this.$1[e],fF)}});ss.initEnum(bg,a,{unspecified:0,twoPassRendering:1});ss.initClass(bh,a,{dispose:function(){if(!ss.staticEquals(this.$0,null)){this.$0();this.$0=null}}},null,[ss.IDisposable]);ss.initClass(bi,a,{add_handled:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_handled:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},show:function(){this.parentNode=document.createElement('div');bi.$0=false;var e={key:'ConnectionMissingFileDialog',content:(this.$4?tab.Strings.ConnectionMissingFileDialogMissingDirectoryText(this.$3):tab.Strings.ConnectionMissingFileDialogText(this.$3)),title:tab.Strings.ConnectionMissingFileDialogTitle,contentSelectable:true,dialogWidth:500,dialogButtons:[],onDialogCloseRequested:ss.mkdel(this,function(){if(!bi.$0){this.$2$1(false)}ReactDOM.unmountComponentAtNode(this.parentNode)})};e.dialogButtons.push({buttonClickHandler:this.$5,buttonText:tab.Strings.DialogYesButtonText,testId:'YesBtn',buttonType:5});e.dialogButtons.push({buttonClickHandler:null,buttonText:tab.Strings.DialogNoButtonText,testId:'NoBtn',buttonType:3});var fE=React.createElement(eo,e);ReactDOM.render(fE,this.parentNode)},$0:function(){bi.$0=true;tab.ModuleManager.load(tab.IConnectionDialogModule).call(null,[]).done(ss.mkdel(this,function(e){e.showReplaceFileDialog(this.$2,this.$1).done(ss.mkdel(this,function(fE){this.$2$1(fE)})).fail(ss.mkdel(this,function(fE){_.defer(ss.mkdel(this,function(){this.$0()}))}))}))}},P,[ss.IDisposable]);ss.initClass(bj,a,{handleWidgetPropertyChanged:function(e,fE){},updateWidgetState:function(e){}},ss.makeGenericType(spiff.ReactSpiffAdapter$3,[bm,bk,Object]));ss.initClass(bk,a,{});ss.initClass(bl,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(bm,a,{get_dom:function(){return this.get_template()},dispose:function(){this.get_viewModel().exitManageMode();this.get_viewModel().resetViewIfRequired();this.get_viewModel().remove_customViewListChanged(ss.mkdel(this,this.$P));ss.makeGenericType(spiff.BaseView$1,[bn]).prototype.dispose.call(this)},$a:function(){this.$k();this.$f();this.$g();this.$e()},$k:function(){var e=tab.DoubleUtil.parseDouble(tab.DomUtil.getComputedStyle(this.get_dom().saveViewArea[0]).height);this.get_dom().saveViewArea.empty();if(this.get_viewModel().get_mode()===bn.modeSelect){if(tsConfig.allow_custom_view_save){var fE=$('<span/>').addClass('tab-cv-viewNameInputWrapper');this.$15=this.$r();fE.append(this.$15.get_inputElement());this.$14=this.$q();fE.append(this.$14.element);this.get_dom().saveViewArea.append(fE);this.$U();if(tsConfig.allow_custom_view_default){this.$X=this.$o(tab.Strings.ToolbarCustomViewsMakeItMyDefault,this.get_viewModel().$h());this.get_dom().saveViewArea.append(this.$X.element)}if(tsConfig.allow_custom_view_share){this.$12=this.$o(tab.Strings.ToolbarCustomViewsShareItWithOthers,this.get_viewModel().$i());this.get_dom().saveViewArea.append(this.$12.element)}}else{this.get_dom().saveViewArea.remove()}}else{this.get_dom().saveViewArea.append(this.$j(tab.Strings.ToolbarCustomViewsSaveAreaFillerTextManage))}if(ss.isValue(e)){var fF=ss.coalesce(tab.DoubleUtil.parseDouble(tab.DomUtil.getComputedStyle(this.get_dom().saveViewArea[0]).height),0);this.get_dom().saveViewArea.height(Math.max(ss.unbox(e),fF)+'px')}},$f:function(){this.get_dom().myViewsTitle.text(tab.Strings.ToolbarCustomViewsMyViews);this.get_dom().myViewsListArea.empty();if(ss.count(this.get_viewModel().get_myCustomViews())>0){var e=ss.getEnumerator(this.get_viewModel().get_myCustomViews());try{while(e.moveNext()){var fE=e.current();var fF=this.$9(fE,false);this.$10[ss.unbox(fE.id)]=fF;this.$V(fE);this.get_dom().myViewsListArea.append(fF)}}finally{e.dispose()}return}if(tsConfig.allow_custom_view_save){this.$R(this.get_dom().myViewsListArea);return}this.get_dom().myViewsArea.remove()},$g:function(){if(!tsConfig.allow_custom_view_save&&ss.count(this.get_viewModel().get_myCustomViews())===0){this.get_dom().otherViewsTitle.hide()}else{this.get_dom().otherViewsTitle.text(tab.Strings.ToolbarCustomViewsOtherViews)}this.get_dom().otherViewsListArea.empty();var e=this.$9(null,true);this.$11=e;this.$V(null);this.get_dom().otherViewsListArea.append(e);var fE=ss.getEnumerator(this.get_viewModel().get_otherCustomViews());try{while(fE.moveNext()){var fF=fE.current();var fG=this.$9(fF,true);this.$10[ss.unbox(fF.id)]=fG;this.$V(fF);this.get_dom().otherViewsListArea.append(fG)}}finally{fE.dispose()}},$e:function(){if(!tsConfig.allow_custom_view_default&&!tsConfig.allow_custom_view_save&&ss.count(this.get_viewModel().get_myCustomViews())===0){this.get_dom().manageModeControlArea.remove();return}this.$Y=this.$b();this.get_dom().manageModeControlArea.append(this.$Y.element);this.$Z=this.$c();this.get_dom().manageModeControlArea.append(this.$Z.element);this.$T();this.get_viewModel().add_modeChanged(ss.mkdel(this,this.$J));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_modeChanged(ss.mkdel(this,this.$J))})))},$r:function(){var e=spiff.TextInputView.newTextInputView(this.get_viewModel().$k(),tab.Strings.ToolbarCustomViewsViewNamePlaceholder,null,false);e.get_inputElement().attr('maxlength',bn.maxCustomViewNameLength.toString());e.add_propertyChanged(ss.mkdel(this,this.$H));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$15.remove_propertyChanged(ss.mkdel(this,this.$H))})));e.add_enterKeyPressed(ss.mkdel(this,this.$D));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$15.remove_enterKeyPressed(ss.mkdel(this,this.$D))})));this.disposables.add$1(e);return e},$q:function(){var e=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$N),tab.Strings.ToolbarCustomViewsSave,null,0,null);this.disposables.add$1(e);return e},$o:function(e,fE){var fF=spiff.LabelToggleButton.newCheckbox(e,false);fF.set_selected(fE);this.disposables.add$1(fF);return fF},$R:function(e){var fE=$('<div/>').addClass('tab-cv-emptyList').text(tab.Strings.ToolbarCustomViewsEmptyPlaceholder);e.append(fE)},$j:function(e){return $('<div/>').addClass('tab-customViews-saveAreaTitle').text(e)},$9:function(e,fE){var fF=$('<div/>').addClass('tab-cv-viewListItem');if(fE){var fG=this.$h(e);fF.addClass('tab-cv-viewListItem-showOwner').append(fG)}else{var fH=this.$m(e);fF.append(fH)}var fI=this.$d(e);fF.append(fI);fF.click(ss.mkdel(this,function(fJ){this.$I(e)}));return fF},$d:function(e){var fE=this.$u(e);var fF=$('<div/>').addClass('tab-cv-viewListItem-leftSide');var fG=this.$l(e);var fH=$('<span/>').addClass('tab-cv-viewListItem-viewName').text(fE).attr('title',fE);fF.append(fG);fF.append(' ');fF.append(fH);return fF},$l:function(e){var fE=this.get_viewModel().isDefault(e);var fF=new spiff.IconButton;if(tsConfig.allow_custom_view_default){fF.addClass('tab-customViews-viewListItem-setDefaultButton');fF.onClick(ss.mkdel(this,function(fI){this.$O(e)}));var fG;var fH;if(fE){fG='tab-icons-customView-toggled';fH=tab.Strings.ToolbarCustomViewsSetDefaultButtonTooltipWhenCurrent}else{fG='tab-icons-customView-menu';fH=tab.Strings.ToolbarCustomViewsSetDefaultButtonTooltip}fF.set_disabled(fE);fF.setIcon(fG);fF.set_hoverTooltipText(fH)}this.disposables.add$1(fF);return fF.element},$h:function(e){var fE=this.$v(e);var fF=$('<span/>').addClass('tab-cv-viewListItem-ownerName').text(fE).attr('title',fE);return fF},$m:function(e){var fE=$('<div/>').addClass('tab-customViews-viewListItem-actionButtonWrapper');if(tsConfig.allow_custom_view_save){var fF=new spiff.IconButton;fF.addClass('tab-customViews-viewListItem-renameButton');fF.set_hoverTooltipText(tab.Strings.ToolbarCustomViewsRenameButtonTooltip);fF.setIcon('tab-icons-edit');fF.onClick(ss.mkdel(this,function(fI){this.$L(e)}));this.disposables.add$1(fF);fE.append(fF.element)}var fG=new spiff.IconButton;fG.addClass('tab-customViews-viewListItem-deleteButton');fG.set_hoverTooltipText(tab.Strings.ToolbarCustomViewsDeleteButtonTooltip);fG.setIcon('tab-icons-delete');fG.onClick(ss.mkdel(this,function(fI){this.$A(e)}));this.disposables.add$1(fG);fE.append(fG.element);if(tsConfig.allow_custom_view_share){var fH=new spiff.IconButton;fH.addClass('tab-customViews-viewListItem-toggleHideButton');if(e.isPublic){fH.set_hoverTooltipText(tab.Strings.ToolbarCustomViewsHideViewButtonTooltipWhenPublic);fH.setIcon('tab-icons-view-public')}else{fH.set_hoverTooltipText(tab.Strings.ToolbarCustomViewsHideViewButtonTooltipWhenPrivate);fH.setIcon('tab-icons-view-private')}if(this.get_viewModel().get_mode()===bn.modeSelect){fH.set_disabled(true)}fH.onClick(ss.mkdel(this,function(fI){this.$K(e)}));this.disposables.add$1(fH);fE.append(fH.element)}return fE},$i:function(e,fE){var fF=tab.DomUtil.getTransformScale(this.get_rootElement());var fG=$('<div/>').addClass('tab-customViews-rename-container');fG.click(ss.mkdel(this,this.$M));var fH=$('<div/>').addClass('tab-cv-viewListItem').width(fE.width()/fF);var fI=$('<div/>').addClass('tab-customViews-viewListItem-actionButtonWrapper');var fJ=new spiff.IconButton;fJ.set_hoverTooltipText(tab.Strings.ToolbarCustomViewsRenameUIClearButtonTooltip);var fK=fJ;fK.setIcon('tab-icons-canceledit');fK.onClick(ss.mkdel(this,function(fO){this.$z(fE)}));fI.append(fK.element);fH.append(fI);fH.append(this.$p(e));fG.append(fH);this.get_dom().domRoot.append(fG);this.$13.get_inputElement().focus();var fL=fE.position().top;var fM=fE.position().left;if(!tsConfig.is_mobile){tab.DomUtil.selectAllInputText(this.$13.get_inputElement())}else{fL/=fF;fM/=fF;var fN=fE[0].parentElement;while(ss.isValue(fN)&&fN.style.position!=='absolute'&&fN.style.position!=='relative'){fN=fN.parentElement}if(ss.isValue(fN)){fL+=fN.offsetTop;fM+=fN.offsetLeft}}fH.css('top',fL+'px').css('left',fM+'px')},$p:function(e){var fE=$('<div/>').addClass('tab-customViews-rename-inputWrapper');this.$13=spiff.TextInputView.newTextInputView(e,tab.Strings.ToolbarCustomViewsRenameUIPlaceholderText,null,false);this.$13.get_inputElement().attr('maxlength',bn.maxCustomViewNameLength.toString());this.$13.get_inputElement().addClass('tab-customView-rename-textInput');this.$13.add_enterKeyPressed(ss.mkdel(this,this.$C));this.$13.add_escapeKeyPressed(ss.mkdel(this,this.$F));fE.append(this.$13.get_inputElement());return fE},$s:function(e){if(this.$w()){this.$t(this.$x())}this.$W=e;var fE=this.$x();fE.children().hide();this.$i(e.name,fE)},$t:function(e){if(!this.$w()){return}this.get_dom().domRoot.children('.tab-customViews-rename-container').remove();e.children().show();this.$W=null;this.$13.remove_enterKeyPressed(ss.mkdel(this,this.$C));this.$13.remove_escapeKeyPressed(ss.mkdel(this,this.$F));this.$13.dispose();this.$13=null},$b:function(){var e=spiff.StyledTextButton.createUnificationIconTextButton(ss.mkdel(this,this.$E),tab.Strings.ToolbarCustomViewsEnterManageButtonText,'tab-customViews-enterManageModeButton');this.disposables.add$1(e);return e},$c:function(){var e=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$G),tab.Strings.ToolbarCustomViewsExitManageButtonText,'tab-customViews-exitManageModeButton',0,null);this.disposables.add$1(e);return e},$U:function(){var e=!this.get_viewModel().shouldSaveButtonBeEnabled(this.$15);if(ss.isValue(this.$14)&&this.$14.get_disabled()!==e){var fE=(e?tab.Strings.ToolbarCustomViewsSaveButtonDisabledTitle:'');this.$14.set_hoverTooltipText(fE);this.$14.set_disabled(e)}},updateViewListsState:function(){if(ss.count(this.get_viewModel().get_myCustomViews())===0&&ss.count(this.get_viewModel().get_otherCustomViews())===0&&this.get_viewModel().get_mode()===bn.modeManage){this.get_viewModel().exitManageMode()}else{this.$k();this.$f();this.$g()}},$V:function(e){var fE;if(this.get_viewModel().isOriginalView(e)){fE=this.$11}else{fE=this.$y(e)}if(this.get_viewModel().isDefault(e)){fE.addClass('tab-cv-viewListItem-defaultView')}if(this.get_viewModel().isCurrentCustomView(e)){fE.addClass('tab-cv-viewListItem-currentView')}if(ss.isValue(e)&&e.isPublic){fE.addClass('tab-cv-viewListItem-publicView')}var fF=this.$u(e);fE.children('.tab-cv-viewListItem-viewName').text(fF).attr('title',fF)},$T:function(){if(this.get_viewModel().get_mode()===bn.modeSelect){this.$Z.element.css('display','none');this.$Y.element.css('display','');if(this.get_viewModel().get_hasCustomViews()){this.$Y.set_disabled(false);this.$Y.set_hoverTooltipText(null)}else{this.$Y.set_disabled(true);this.$Y.set_hoverTooltipText(tab.Strings.ManageCustomViewsDisabledExplanation)}}else if(this.get_viewModel().get_mode()===bn.modeManage){this.$Y.element.css('display','none');this.$Z.element.css('display','');this.$Z.set_disabled(false)}},$P:function(e,fE){this.updateViewListsState()},$N:function(){this.$S()},$S:function(){var e=this.get_viewModel().cleanCustomViewName(this.$15.get_text());if(!this.get_viewModel().isValidCustomViewName(e)){return}var fE=this.get_viewModel().getMyCustomViewByName(e);if(ss.isNullOrUndefined(fE)){fE=new Object}fE.name=e;fE.isPublic=this.$n(this.$12);this.get_viewModel().save$1(fE,null,function(fF){ds.showNotification(tab.Strings.ToolbarCustomViewsErrorSavingView)},this.$n(this.$X));this.$15.get_inputElement().blur()},$H:function(e,fE){if(ss.equalsT(fE.get_propertyName(),'text')){this.$U()}},$D:function(){if(!this.$14.get_disabled()){this.$N()}},$I:function(e){if(this.get_viewModel().get_mode()===bn.modeSelect){this.get_viewModel().select(e);this.updateViewListsState()}},$O:function(e){this.get_viewModel().setDefault(e,ss.mkdel(this,function(fE){this.updateViewListsState()}),function(fE){ds.showNotification(tab.Strings.ToolbarCustomViewsErrorSettingDefault)})},$A:function(e){var fE=J.create(null,ss.mkdel(this,function(){this.$B(e)}));this.get_dom().customViewsArea.append(fE.element)},$B:function(e){this.get_viewModel().destroyCustomView(e,ss.mkdel(this,this.updateViewListsState),ss.mkdel(this,function(fE){ds.showNotification(tab.Strings.ToolbarCustomViewsErrorDeleting);this.updateViewListsState()}))},$z:function(e){this.$t(e)},$L:function(e){this.$s(e)},$C:function(){this.$Q()},$F:function(){this.$t(this.$x())},$M:function(e){var fE=$(e.target);var fF=fE.hasClass('tab-customView-rename-textInput');if(!fF){this.$Q()}},$Q:function(){var e=this.get_viewModel().cleanCustomViewName(this.$13.get_text());if(!this.get_viewModel().isValidCustomViewName(e)){ds.showNotification(tab.Strings.ToolbarCustomViewsErrorInvalidName);return}var fE=this.$x();if(ss.equalsT(e,this.$W.name)){this.$t(fE);return}this.get_viewModel().updateCustomizedViewName(this.$W,e,ss.mkdel(this,function(fF){this.$t(fE);this.updateViewListsState()}),ss.mkdel(this,function(fF){ds.showNotification(tab.Strings.ToolbarCustomViewsErrorRenaming);this.$t(fE);this.updateViewListsState()}))},$K:function(e){if(!ss.isValue(e)||this.get_viewModel().get_mode()!==bn.modeManage){return}this.get_viewModel().updateCustomizedViewPublicState(e,!e.isPublic,ss.mkdel(this,function(fE){this.updateViewListsState()}),ss.mkdel(this,function(fE){ds.showNotification(tab.Strings.ToolbarCustomViewsErrorChangingPublicPrivateState);this.updateViewListsState()}))},$E:function(){this.get_viewModel().startManage()},$G:function(){this.get_viewModel().exitManageMode()},$J:function(e,fE){var fF=this.get_viewModel().get_mode();if(fF===bn.modeManage){this.get_dom().customViewsArea.toggleClass('tab-customViews-inManageMode',true)}else if(fF===bn.modeSelect){this.get_dom().customViewsArea.toggleClass('tab-customViews-inManageMode',false)}this.$k();this.updateViewListsState();this.$T()},$w:function(){return ss.isValue(this.$W)},$y:function(e){if(ss.isNullOrUndefined(e)){return this.$11}else{return this.$10[ss.unbox(e.id)]}},$x:function(){return this.$y(this.$W)},$n:function(e){if(ss.isValue(e)){return e.get_selected()}else{return false}},$u:function(e){var fE;if(this.get_viewModel().isOriginalView(e)){fE=tab.Strings.CustomViewsOriginalView}else{fE=e.name}if(this.get_viewModel().isDefault(e)){fE=tab.Strings.ToolbarCustomViewsDefault(fE)}return fE},$v:function(e){var fE;if(this.get_viewModel().isOriginalView(e)){fE=tsConfig.workbook_owner_friendly_name}else{fE=e.owner.friendlyName}return fE}},ss.makeGenericType(spiff.BaseView$1,[bn]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[bn])]);ss.initClass(bn,a,{add_modeChanged:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_modeChanged:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_customViewListChanged:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_customViewListChanged:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_defaultCustomViewChanged:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_defaultCustomViewChanged:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_customViewDestroyed:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_customViewDestroyed:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},add_dirtyChanged:function(e){this.$2$5=ss.delegateCombine(this.$2$5,e)},remove_dirtyChanged:function(e){this.$2$5=ss.delegateRemove(this.$2$5,e)},add_hideDialogRequested:function(e){this.$2$6=ss.delegateCombine(this.$2$6,e)},remove_hideDialogRequested:function(e){this.$2$6=ss.delegateRemove(this.$2$6,e)},add_propsUpdated:function(e){},remove_propsUpdated:function(e){},get_mode:function(){return this.$p},get_myCustomViews:function(){return this.$q},get_otherCustomViews:function(){return this.$r},get_currentCustomView:function(){return this.$l},get_defaultCustomViewId:function(){return this.$n},get_currentCustomViewName:function(){return this.$m},get_hasCustomViews:function(){return this.$q.length>0||this.$r.length>0},get_dirty:function(){return tab.ApplicationModel.get_instance().get_workbook().get_isCurrentDashboardModified()},get_viewType:function(){return bm},get_viewModel:function(){return this},get_props:function(){var e=new bk;e.viewModel=this;return{children:React.createElement(bj,e),isGlassTransparent:false,isModal:true,positioningBehavior:0,shouldAdjustPositionOnWindowResize:!tsConfig.is_mobile,shouldRecenterOnUpdate:true,shouldReturnFocusOnClose:true,showCloseButton:true,showFooter:false,testId:'customViews',title:tab.Strings.CustomViewsDialogTitle,type:0}},$j:function(){return!this.isOriginalView(this.get_currentCustomView())&&this.belongsToCurrentUser(this.get_currentCustomView())},$k:function(){return(this.$j()?this.get_currentCustomView().name:'')},$h:function(){return this.$j()&&this.isDefault(this.get_currentCustomView())},$i:function(){return this.$j()&&this.get_currentCustomView().isPublic},isDefault:function(e){if(tsConfig.allow_custom_view_default){if(this.isOriginalView(e)){return ss.isNullOrUndefined(this.$n)}else{return ss.isValue(this.$n)&&ss.unbox(this.$n)===ss.unbox(e.id)}}else{return false}},isOriginalView:function(e){return ss.isNullOrUndefined(e)},belongsToCurrentUser:function(e){return ss.isValue(e.owner)&&e.owner.id===tsConfig.current_user_id},isCurrentCustomView:function(e){if(this.isOriginalView(e)){return this.isCurrentCustomViewTheOriginalView()}else{return ss.isValue(tsConfig.current_custom_view_id)&&ss.unbox(tsConfig.current_custom_view_id)===ss.unbox(e.id)}},isCurrentCustomViewTheOriginalView:function(){return ss.isValue(tsConfig.current_custom_view_id)===false},shouldSaveButtonBeEnabled:function(e){return this.isValidCustomViewName(this.cleanCustomViewName(e.get_text()))},isValidCustomViewName:function(e){var fE=this.cleanCustomViewName(e);return fE.length>0&&fE.length<=bn.maxCustomViewNameLength},cleanCustomViewName:function(e){return e.trim().substr(0,bn.maxCustomViewNameLength)},$4:function(){this.raiseActionEvent(this.hideView);this.raiseActionEvent(this.$2$6)},save:function(e,fE,fF){var fG=this.getMyCustomViewByName(e);if(ss.isNullOrUndefined(fG)){fG=new Object;fG.name=e}this.save$1(fG,fE,fF,false)},save$1:function(e,fE,fF,fG){this.$t.saveCustomizedView(e,ss.mkdel(this,function(fH){var fI=ss.mkdel(this,function(fJ){this.$c(fJ);if(ss.isValue(fE)){fE(fJ)}});if(fG){this.setDefault(fH,fI,function(fJ){fI(fH)})}else if(this.isDefault(fH)){this.setDefault(null,function(fJ){fI(fH)},function(fJ){fI(fH)})}else{fI(fH)}}),ss.mkdel(this,function(fH){this.$b(fH);if(ss.isValue(fF)){fF(fH)}}))},getMyCustomViewByName:function(e){var fE=null;for(var fF=0;fF<this.$q.length;fF++){var fG=this.$q[fF];if(ss.equalsT(fG.name,e)){fE=fG}}return fE},select:function(e){if(this.isOriginalView(e)){tab.CustomizedViewSession.navigateToOriginalView(null);tsConfig.current_custom_view_id=null}else{tab.CustomizedViewSession.navigateToCustomizedView(e);tsConfig.current_custom_view_id=e.id}},destroy:function(e,fE,fF){this.destroyCustomView(e,fE,fF)},update:function(e,fE,fF){this.$g(e,null,fE,fF)},buildUrl:function(e,fE){return tab.CustomizedViewSession.buildUrl(e,fE)},makeCurrentDefault:function(e,fE){this.setDefault(this.$l,e,fE)},setDefault:function(e,fE,fF){this.$t.setDefaultCustomizedView(e,ss.mkdel(this,function(fG){this.$e(fG);if(ss.isValue(fE)){fE(fG)}}),ss.mkdel(this,function(fG){this.$d(fG);if(ss.isValue(fF)){fF(fG)}}))},startManage:function(){if(this.$p===bn.modeSelect&&this.get_hasCustomViews()){this.$f(bn.modeManage)}},exitManageMode:function(){this.$f(bn.modeSelect)},resetViewIfRequired:function(){if(this.$s){this.select(null)}},updateCustomizedViews:function(e,fE){this.$5(e,fE)},destroyCustomView:function(e,fE,fF){this.$o=true;this.$t.destroyCustomizedView(e,ss.mkdel(this,function(){ss.remove(this.get_myCustomViews(),e);if(ss.referenceEquals(e.id,this.$n)){this.$n=null}if(ss.referenceEquals(e.id,tsConfig.current_custom_view_id)){this.$l=null;tab.CustomizedViewSession.updateTsConfig(null,true);this.$s=true}this.$5(null,null);if(ss.isValue(fE)){fE()}}),ss.mkdel(this,function(fG){this.$5(null,null);if(ss.isValue(fF)){fF(fG)}}))},updateCustomizedViewPublicState:function(e,fE,fF,fG){if(!ss.isValue(e)||fE===e.isPublic){return}var fH=new Object;fH.id=e.id;fH.isPublic=fE;fH.name=e.name;fH.owner=e.owner;fH.startViewId=e.startViewId;fH.urlId=e.urlId;this.$g(fH,e,fF,fG)},updateCustomizedViewName:function(e,fE,fF,fG){if(ss.equalsT(e.name,fE)){return}var fH=new Object;fH.id=e.id;fH.isPublic=e.isPublic;fH.name=fE;fH.owner=e.owner;fH.startViewId=e.startViewId;fH.urlId=e.urlId;this.$g(fH,e,fF,fG)},$g:function(e,fE,fF,fG){this.$t.updateCustomizedView(e,ss.mkdel(this,function(fH){if(ss.isValue(fE)){var fI=ss.indexOf(this.$q,fE);if(fI>=0){ss.removeAt(this.$q,fI);ss.insert(this.$q,fI,e)}if(ss.isValue(fE)&&ss.referenceEquals(e.id,fE.id)&&ss.referenceEquals(e.id,tsConfig.current_custom_view_id)){this.$l=e}}this.$5(null,null);if(ss.isValue(fF)){fF(fH)}}),ss.mkdel(this,function(fH){this.$5(null,null);if(ss.isValue(fG)){fG(fH)}}))},$f:function(e){this.$p=e;this.$a()},$5:function(e,fE){this.$t.getCustomizedViews(ss.mkdel(this,function(fF,fG){this.$3(fF,fG);if(ss.isValue(e)){e(fF,fG)}}),ss.mkdel(this,function(fF){this.$2(fF);if(ss.isValue(fE)){fE(fF)}}))},$c:function(e){var fE=tabBootstrap.Utility.get_isEmbedded()&&!tsConfig.reloadOnCustomViewSave;if(fE||ss.isValue(this.$l)&&ss.unbox(this.$l.id)===ss.unbox(e.id)){this.$4();if(fE){var fF;if(ss.isValue(e.owner)&&e.owner.id===tsConfig.current_user_id){for(fF=0;fF<this.$q.length;fF++){if(ss.referenceEquals(this.$q[fF].name,e.name)){this.$q[fF]=e;break}}if(fF>=this.$q.length){this.$q.push(e);this.$q.sort(bn.$0)}}else{for(fF=0;fF<this.$r.length;fF++){if(ss.referenceEquals(this.$r[fF].name,e.name)){this.$r[fF]=e;break}}if(fF>=this.$r.length){this.$r.push(e);this.$r.sort(bn.$0)}}}this.$l=e}else{tab.CustomizedViewSession.navigateToCustomizedView(e)}this.$9()},$b:function(e){this.$4()},$e:function(e){this.$n=(ss.isValue(e)?e.id:null);this.$8()},$d:function(e){},$3:function(e,fE){ss.clear(this.$q);ss.clear(this.$r);this.$l=null;this.$m=tab.Strings.ToolbarCustomViewsOriginalView;for(var fF=0;fF<e.length;fF++){var fG=e[fF];if(this.belongsToCurrentUser(fG)){this.$q.push(fG)}else{this.$r.push(fG)}if(this.isCurrentCustomView(fG)){this.$l=fG;this.$m=fG.name}}this.$q.sort(bn.$0);this.$r.sort(bn.$0);this.$n=fE;this.$7()},$2:function(e){this.$m=null;this.$o=false},$a:function(){if(ss.isValue(this.$2$1)){this.$2$1(this,ss.EventArgs.Empty)}},$7:function(){if(ss.isValue(this.$2$2)){this.$2$2(this,ss.EventArgs.Empty)}if(this.$o){this.$6();this.$o=false}},$8:function(){if(ss.isValue(this.$2$3)){this.$2$3(this,ss.EventArgs.Empty)}},$6:function(){if(ss.isValue(this.$2$4)){this.$2$4(this,ss.EventArgs.Empty)}},$9:function(){this.raiseEvent(this.$2$5)},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(e){},onDialogHidden:function(){}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel,spiff.IContent,spiff.IUberPopupContent,ss.makeGenericType(spiff.IPropsProvider$1,[Object]),spiff.IDialogContent]);ss.initClass(bo,a,{});ss.initClass(bp,a,{});ss.initClass(bq,a,{});ss.initClass(br,a,{});ss.initClass(bs,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(bt,a,{$d:function(){return this.get_template()},get_dashboardNode:function(){return this.$d().dashboardNode},get_containerNode:function(){return this.$d().domRoot},get_dashboardSize:function(){return tab.DashboardSizeCalculator.asMetric(this.$e.get_size())},$9:function(){if(ss.isValue(this.$e.get_formats())){var e=this.$e.get_formats();this.$d().dashboardNode.css(e);if(this.$e.get_hasGutter()){var fE={top:this.$e.gutter.top+'px',left:this.$e.gutter.left+'px'};this.$d().dashboardNode.css(fE)}}},$b:function(){this.$d().dashboardNode.height(this.$e.get_size().h).width(this.$e.get_size().w);if(this.$e.get_hasGutter()){$('.tab-gutter').height(this.$e.get_size().h+this.$e.gutter.top+this.$e.gutter.bottom).width(this.$e.get_size().w+this.$e.gutter.left+this.$e.gutter.right)}},$a:function(e){var fE=tab.ObjectRegistry.newView(fB).call(null,[e]);if(e.get_zoneType()==='title'){fE.prependToDom(this.$d().dashboardNode)}else{fE.addToDom(this.$d().dashboardNode)}},onAddedToDom:function(){if(!this.addedToDom){if(tsConfig.showTabs){this.$d().dashboardNode.attr('role','tabpanel')}this.$b();this.$9();var e=_.keys(this.$e.get_zoneViewModels());for(var fE=0;fE<e.length;fE++){var fF=e[fE];this.$a(this.$e.get_zoneViewModels()[fF])}if(this.$e.get_isDashboard()){this.get_containerNode().addClass('is-dashboard')}else if(this.$e.get_isStory()){this.get_containerNode().addClass('is-story')}else{this.get_containerNode().addClass('is-worksheet')}}spiff.Widget.prototype.onAddedToDom.call(this)},$c:function(){if(this.$e.get_renderMode()==='render-mode-client'){var e=this.$d().dashboardNode.find('img');var fE=e.length;for(var fF=0;fF<fE;fF++){var fG=e[fF];if(ss.isNullOrUndefined(fG)||fG.naturalHeight===0||fG.naturalWidth===0){continue}var fH=document.createElement('canvas');fH.width=fG.naturalWidth;fH.height=fG.naturalHeight;var fI=fH.getContext('2d');fI.drawImage(fG,0,0);try{var fJ=fH.toDataURL('image/png',new Object);fG.src=fJ}catch(fS){}}}var fK=this.$d().dashboardNode.clone(false,false);fK.addClass('facadedom');bt.uniquefyClonedFilterRadioElements(fK);if(this.$e.get_renderMode()==='render-mode-server'){var fL=this.$d().dashboardNode.find('canvas');var fM=fK.find('canvas');var fN=fL.length;for(var fO=0;fO<fN;fO++){var fP=fL[fO];var fQ=fM[fO];if(!ss.isValue(fQ)){continue}var fR=fQ.getContext('2d');if(ss.isValue(fP)&&fP.width>0&&fP.height>0&&ss.isValue(fR)){fR.drawImage(fP,0,0)}}}this.$d().dashboardNode.parent().append(fK)}},ss.makeGenericType(spiff.BaseView$1,[bu]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[bu])]);ss.initClass(bu,a,{add_newZone:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newZone:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_vizRebuildStart:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_vizRebuildStart:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_sizeChanged:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_sizeChanged:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_portSizeChanged:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_portSizeChanged:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},add_formatsChanged:function(e){this.$2$5=ss.delegateCombine(this.$2$5,e)},remove_formatsChanged:function(e){this.$2$5=ss.delegateRemove(this.$2$5,e)},get_isStory:function(){return this.dashboardModel.pm.isStory},get_zoneViewModels:function(){return this.$o},get_formats:function(){var e=this.dashboardModel.get_formats();if(tsConfig.current_sheet_type==='worksheet'&&tsConfig.is_authoring){e['backgroundColor']='transparent'}return e},get_backgroundColor:function(){var e='#FFFFFF';if(ss.isValue(this.get_formats())&&ss.keyExists(this.get_formats(),'backgroundColor')){e=this.get_formats()['backgroundColor']}return e},get_renderMode:function(){return this.dashboardModel.get_renderMode()},get_size:function(){return this.$n||this.dashboardModel.get_dashboardSize()},set_size:function(e){this.$n=e;this.raiseActionEvent(this.$2$3)},get_isDashboard:function(){return this.dashboardModel.get_isDashboard()},get_flipboardNavigatorViewModel:function(){if(!this.get_isStory()){return null}return this.$5('flipboard-nav')},get_flipboardViewModel:function(){return this.$5('flipboard')},get_hasGutter:function(){return tsConfig.is_authoring&&(tsConfig.current_sheet_type==='dashboard'||tsConfig.current_sheet_type==='story'&&this.get_isStory())},dispose:function(){var e=ss.getEnumerator(Object.keys(this.$o));try{while(e.moveNext()){var fE=e.current();tab.MiscUtil.dispose$1(this.$o[fE])}}finally{e.dispose()}ss.clearKeys(this.$o);tab.SheetSession.remove_sheetDataChanged(ss.mkdel(this,this.$m));for(var fF=0;fF<this.viewControllers.length;fF++){var fG=this.viewControllers[fF];tab.MiscUtil.dispose$1(fG)}ss.clear(this.viewControllers);ss.clearKeys(this.viewControllersBySheet);this.dashboardModel.zonesModel.remove_newZone(ss.mkdel(this,this.$9));this.dashboardModel.remove_newDashboard(ss.mkdel(this,this.$8));this.dashboardModel.remove_activeZoneChanged(ss.mkdel(this,this.$7));this.dashboardModel.remove_readyZoneChanged(ss.mkdel(this,this.$a));spiff.BaseViewModel.prototype.dispose.call(this)},$9:function(e){if(ss.keyExists(this.$o,e.get_zoneId())){this.$d(e.get_zoneId())}var fE=this.$4(e);if(fE.get_zoneType()==='viz'){if(ss.isValue(fE.get_zoneContentViewModel())){this.$c(fE)}else{var fF=null;fF=ss.mkdel(this,function(){fE.remove_newZoneContent(fF);this.$c(fE)});fE.add_newZoneContent(fF)}}else if(fE.get_zoneType()==='dashboard-object'&&fE.get_objectType()==='extension'){if(ss.isValue(fE.get_zoneContentViewModel())){var fG=fE.get_zoneContentViewModel();if(fG.get_isInitialized()){this.$j();return}}var fH=null;fH=ss.mkdel(this,function(fI){var fJ=fI;if(fJ.get_isEmpty()){return}this.$j();fE.remove_newZoneContent(fH)});fE.add_newZoneContent(fH)}fE.set_isActiveZone(fE.get_zoneId()===this.dashboardModel.get_activeZoneID());this.$k(fE)},$c:function(e){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.get_zoneContentViewModel())){return}var fE=this.$3(e.get_associatedSheet());e.get_zoneContentViewModel().set_viewController(fE)},$4:function(e){var fE=new fC(e);this.$o[e.get_zoneId()]=fE;return fE},$5:function(e){var fE=new ss.ObjectEnumerator(this.$o);try{while(fE.moveNext()){var fF=fE.current();if(fF.value.get_zoneType()===e){return fF.value.get_zoneContentViewModel()}}}finally{fE.dispose()}return null},$k:function(e){if(!ss.staticEquals(this.$2$1,null)){this.$2$1(e)}},$8:function(){this.$l(ss.mkdel(this,function(e){return!this.dashboardModel.hasZone(e.get_zoneId())||!this.dashboardModel.isValidSheet(e.get_model())}))},$j:function(){var e=this.$6();if(tab.MiscUtil.isNullOrEmpty(e)){return}var fE=[];for(var fF=0;fF<e.length;fF++){var fG=e[fF];if(fG.get_renderStatus()==='promptNeeded'){fE.push(fG.get_extensionKey())}}tab.ExtensionClientCommands.showPermissionsPromptDialog(fE)},$6:function(){var e=[];var fE=_.keys(this.$o);for(var fF=0;fF<fE.length;fF++){var fG=fE[fF];var fH=this.$o[fG];if(fH.get_zoneType()==='dashboard-object'&&fH.get_objectType()==='extension'){var fI=fH.get_zoneContentViewModel();if(ss.isNullOrUndefined(fI)||!fI.get_isInitialized()){return null}e.push(fH.get_zoneContentViewModel())}}return e},$h:function(){this.raiseActionEvent(this.$2$3)},$g:function(){this.raiseActionEvent(this.$2$4)},$f:function(){this.raiseActionEvent(this.$2$5)},$b:function(){if(!ss.referenceEquals(this.dashboardModel,tab.ModelUtils.findContentDashboard())){return}this.raiseActionEvent(this.$2$2);this.$l(function(e){return e.get_zoneType()==='viz'})},$l:function(e){var fE=[];var fF=_.keys(this.$o);for(var fG=0;fG<fF.length;fG++){var fH=fF[fG];var fI=this.$o[fH];if(e(fI)){fE.push(fH)}}this.$e(fE);this.$2()},$e:function(e){for(var fE=0;fE<e.length;fE++){var fF=e[fE];this.$d(fF)}},$d:function(e){var fE=this.$o[e];if(ss.isValue(fE)){if(fE.get_zoneType()==='viz'){var fF=this.viewControllersBySheet['v_'+fE.get_associatedSheet()];if(ss.isValue(fF)){delete this.viewControllersBySheet['v_'+fE.get_associatedSheet()];ss.remove(this.viewControllers,fF);fF.dispose()}}fE.dispose();delete this.$o[e]}},$2:function(){var e=this.dashboardModel.get_zoneModels();for(var fE=0;fE<e.length;fE++){var fF=e[fE];if(!ss.keyExists(this.$o,fF.get_zoneId())&&this.dashboardModel.isValidSheet(fF)){this.$9(fF)}}},$i:function(e){if(this.dashboardModel.autoUpdate){tab.CommandController.get().refreshLayout()}else{this.dashboardModel.invalid=true}},$m:function(){if(this.dashboardModel.autoUpdate){tab.CommandController.get().refreshLayout()}else{this.dashboardModel.invalid=true}},$7:function(){if(tsConfig.isPublic){return}if(!tab.ModelUtils.getSheetInfoPresModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name).isDashboard){return}var e=this.dashboardModel.get_activeZoneID();var fE=ss.getEnumerator(Object.keys(this.$o));try{while(fE.moveNext()){var fF=fE.current();var fG=this.$o[fF];fG.set_isActiveZone(fG.get_zoneId()===e)}}finally{fE.dispose()}},$a:function(){if(!tab.ModelUtils.getSheetInfoPresModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name).isDashboard){return}var e=this.dashboardModel.get_readyZoneID();var fE=ss.getEnumerator(Object.keys(this.$o));try{while(fE.moveNext()){var fF=fE.current();var fG=this.$o[fF];fG.set_isReadyZone(fG.get_zoneId()===e)}}finally{fE.dispose()}},$3:function(e){var fE=this.dashboardModel.getViewSession(e);var fF=new fk(fE);this.viewControllersBySheet['v_'+e]=fF;this.viewControllers.push(fF);return fF}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(bv,a,{render:function(){return spiff.DOMElements.div({className:'tab-dataAlertDialog tab-dataAlertCreateComponent'},this.$5(),this.$4(),this.$b(),this.$8(),this.$3(),this.$7(),this.$6(),this.$9())},$5:function(){var e;e=tab.Strings.DataAlertOnConstantThreshold2(this.props.selectionCaption);return spiff.DOMElements.div({className:'tab-dataAlertConditionMessage'},e)},$4:function(){return spiff.DOMElements.div({className:'tab-dataAlertConditionArea'},spiff.DOMElements.div({className:'tab-dataAlertOperatorArea'},React.createElement(SharedWidgets.DropdownWidget,this.props.conditionProps)),spiff.DOMElements.div({className:'tab-dataAlertThresholdArea'},spiff.DOMElements.label({className:'tab-dataAlertThresholdLabel'},spiff.DOMElements.span({className:'tab-dataAlertLabelText'},tab.Strings.DataAlertThreshold),this.$a()),spiff.DOMElements.span(this.$1(this.props.thresholdIsValid),this.props.thresholdMessage)))},$1:function(e){return{className:(e?'tab-dataAlertStandardText':'tab-dataAlertErrorText')}},$0:function(e){return{className:'tab-dataAlertErrorText',style:{visibility:(e?'hidden':'visible')}}},$a:function(){var e='tab-dataAlertThreshold tab-TextInput';if(!this.props.thresholdIsValid){e+=' error'}return spiff.DOMElements.input({type:'text',value:this.props.threshold,className:e,disabled:!this.props.readyForInteraction,onBeforeInput:tableau.util.maxLengthEnforcingBeforeInputHandler(this.props.maxThresholdLength),onChange:ss.mkdel(this,function(fE){this.props.onThresholdInputTextChanged(fE.target.value)})})},$b:function(){var e='tab-dataAlertTitleInput tab-TextInput';var fE=!tab.MiscUtil.isNullOrEmpty$3(this.props.title);if(!fE){e+=' error'}return spiff.DOMElements.div({className:'tab-dataAlertTitleInputArea'},spiff.DOMElements.label({className:'tab-dataAlertTitleInputLabel'},spiff.DOMElements.span({className:'tab-dataAlertLabelText'},tab.Strings.DataAlertSubject),spiff.DOMElements.input({type:'text',className:e,disabled:!this.props.readyForInteraction,maxLength:by.maxTitleLength,value:this.props.title,onChange:ss.mkdel(this,function(fF){this.props.onTitleInputTextChanged(fF.target.value)})})),spiff.DOMElements.span(this.$0(fE),tab.Strings.DataAlertNoSubjectErrorMessage))},$8:function(){return spiff.DOMElements.div({className:'tab-dataAlertNotificationIntervalInputArea'},React.createElement(SharedWidgets.DropdownWidget,this.props.notificationIntervalProps))},$3:function(){return spiff.DOMElements.div({className:'tab-dataAlertAddRecipients',disabled:!this.props.readyForInteraction},spiff.DOMElements.label({className:'tab-dataAlertAddRecipientsLabel'},spiff.DOMElements.span({className:'tab-dataAlertLabelText'},tab.Strings.DataAlertRecipients),React.createElement(dN,this.props.recipientSearchSelectorProps)))},$7:function(){var e='tab-dataAlertEmailInput tab-TextInput';if(!this.props.currentUserEmailIsValid){e+=' error'}return spiff.DOMElements.div({className:'tab-dataAlertEmailInputArea',disabled:!this.props.readyForInteraction,style:{visibility:(this.props.showEmailInput?'visible':'hidden'),height:(this.props.showEmailInput?'auto':'0px'),padding:(this.props.showEmailInput?'':'0px')}},spiff.DOMElements.label({className:'tab-dataAlertEmailInputLabel'},spiff.DOMElements.span({className:'tab-dataAlertLabelText'},tab.Strings.ToolbarSubscribeEmailPlaceholder)),spiff.DOMElements.input({type:'text',className:e,maxLength:cf.maxEmailLength,onChange:ss.mkdel(this,function(fE){this.props.onEmailInputTextChanged(fE.target.value)})}))},$6:function(){return spiff.DOMElements.span(this.$0(ss.isNullOrEmptyString(this.props.emailErrorText)),this.props.emailErrorText)},$9:function(){var e={clickHandler:ss.mkdel(this,this.$2),label:this.props.submitButtonText,buttonClass:'tab-dataAlertSubmitButton tab-UnifiedButton',buttonStyle:0,tabIndex:0,disabled:!this.props.enableSubmitButton};var fE=React.createElement(spiff.StyledButtonComponent,e);return spiff.DOMElements.div({className:'tab-dataAlertSubmitButtonArea'},fE)},$2:function(){this.props.onSave()}},React.Component);ss.initClass(bF,a,{add_persistSuccess:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_persistSuccess:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},add_persistFailure:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_persistFailure:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},getSubmitButtonText:function(){return''},saveDataAlert:function(e,fE){},onPersistSuccess:function(){ds.showNotification(this.successMessage);if(!ss.staticEquals(this.$1$1,null)){this.$1$1()}},onPersistFailure:function(){ds.showNotification(this.failureMessage,0);if(!ss.staticEquals(this.$1$2,null)){this.$1$2()}}});ss.initClass(bw,a,{getSubmitButtonText:function(){return tab.Strings.DataAlertCreateButton},saveDataAlert:function(e,fE){var fF=ss.mkdel(this,function(fJ){this.failureMessage=((fJ===210006)?tab.Strings.DataAlertDatasourceError:tab.Strings.DataAlertCreateFailure);this.onPersistFailure()});var fG=ss.mkdel(this,function(fJ){this.failureMessage=tab.Strings.DataAlertCreateFailure;this.onPersistFailure()});if(e.get_isViewSaveNeeded()){var fH=new tab.CustomizedViewSession(tab.CommandController.get().legacySession);var fI=new Object;fI.isHidden=true;fI.isPublic=true;fI.startViewId='DDA';fH.saveCustomizedView(fI,ss.mkdel(this,function(fJ){e.set_customizedViewId(fJ.id.toString());tab.WorkgroupServerCommands.createDataAlert(e,ss.mkdel(this,this.onPersistSuccess),fF)}),fG)}else{tab.WorkgroupServerCommands.createDataAlert(e,ss.mkdel(this,this.onPersistSuccess),fF)}}},bF);ss.initInterface(cM,a,{add_dataAlertPrepared:null,remove_dataAlertPrepared:null,add_dataAlertPrepareFailed:null,remove_dataAlertPrepareFailed:null,get_preparedDataAlert:null,prepareDataAlert:null});ss.initClass(bG,a,{add_dataAlertPrepared:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_dataAlertPrepared:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},add_dataAlertPrepareFailed:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_dataAlertPrepareFailed:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},get_preparedDataAlert:function(){return this.dataAlert},prepareDataAlert:null,raiseActionEvent:function(e){if(!ss.staticEquals(e,null)){e()}},raiseDataAlertPrepared:function(){this.raiseActionEvent(this.$1$1)},raiseDataAlertPrepareFailed:function(){this.raiseActionEvent(this.$1$2)}},null,[cM]);ss.initClass(bx,a,{prepareDataAlert:function(){this.dataAlert=new tab.DataAlert.$ctor1(this.$0);this.raiseDataAlertPrepared()}},bG,[cM]);ss.initClass(by,a,{get_emptySearch:function(){return this.$3$1},set_emptySearch:function(e){this.$3$1=e},get_noResults:function(){return this.$3$2},set_noResults:function(e){this.$3$2=e},$v:function(){return{label:tab.Strings.DataAlertCondition,testId:'data-alert-condition-operation',onSelect:ss.mkdel(this,this.$d),disabled:!this.$y(),dropdownType:1,selectedValue:(ss.isValue(this.$G)?this.$G.get_operator().toString():''),menuItemInfos:_.map(tab.DataAlertConditionOperation.supportedOperations(),function(e){return{value:e.toString(),displayValue:tab.DataAlertConditionOperation.displayString(e),isDivider:false}})}},$A:function(){var e=ss.mkdel(this,this.$h);return{label:tab.Strings.DataAlertNotificationInterval,testId:'data-alert-notification-interval',onSelect:e,disabled:!this.$y(),dropdownType:1,selectedValue:(ss.isValue(this.$G)?this.$G.get_notificationIntervalInMinutes().toString():''),menuItemInfos:_.map(tab.DataAlertNotificationInterval.supportedIntervals(),function(fE){return{value:fE.toString(),displayValue:tab.DataAlertNotificationInterval.convertToString(fE),isDivider:false}})}},$B:function(){return{users:this.users,addUser:ss.mkdel(this,this.addUser),removeUser:ss.mkdel(this,this.removeUser),isUsers:true,userValidator:ss.mkdel(this,this.$u),userErrorMessageGenerator:ss.mkdel(this,this.$t),noResults:ss.mkdel(this,this.setNoResults),emptySearch:ss.mkdel(this,this.setIsSearchEmpty),placeholderMessage:tab.Strings.DataAlertsRecipientsSearchPlaceholder,removeRecipientByIndex:ss.mkdel(this,this.removeUserByIndex)}},$D:function(){return ss.isValue(this.$G)&&this.$G.get_thresholdIsValid()&&!this.$K&&this.$w()&&!ss.isNullOrEmptyString(this.$G.get_title())&&this.get_emptySearch()&&this.$J},$w:function(){if(tab.FeatureFlags.isEnabled('AlertRecipientPermissionsErrors')){if(this.$5()){return this.$z()}return true}else{if(this.$5()){return this.$z()&&this.$C()===1}return this.$C()===0}},$C:function(){return this.users.filter(function(e){return!e.hasEmail}).length},$x:function(){var e=this.users.filter(ss.mkdel(this,function(fE){return!this.$b(fE)})).length;if(this.$6()){return e+1}return e},$z:function(){return cf.validate(this.$H)},$y:function(){return this.$J},$q:function(){this.users=[];this.set_emptySearch(true)},$n:function(){this.$G.add_titleChanged(ss.mkdel(this,this.refresh));this.$G.add_notificationIntervalChanged(ss.mkdel(this,this.refresh));this.$G.add_measureChanged(ss.mkdel(this,this.refresh));this.$G.add_conditionChanged(ss.mkdel(this,this.refresh));this.$G.add_recipientsChanged(ss.mkdel(this,this.refresh));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$G.remove_titleChanged(ss.mkdel(this,this.refresh));this.$G.remove_notificationIntervalChanged(ss.mkdel(this,this.refresh));this.$G.remove_measureChanged(ss.mkdel(this,this.refresh));this.$G.remove_conditionChanged(ss.mkdel(this,this.refresh));this.$G.remove_recipientsChanged(ss.mkdel(this,this.refresh))})))},$o:function(){this.$F.add_dataAlertPrepared(ss.mkdel(this,this.$f));this.$F.add_dataAlertPrepareFailed(ss.mkdel(this,this.onDataAlertPrepareFailed));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$F.remove_dataAlertPrepared(ss.mkdel(this,this.$f));this.$F.remove_dataAlertPrepareFailed(ss.mkdel(this,this.onDataAlertPrepareFailed))})))},$p:function(){this.$L=new tab.Debouncer(ss.mkdel(this,function(){var e=tab.DataAlertClientCommands.updateDataAlert(this.$G);e.done(ss.mkdel(this,function(fE){this.$G.set_alertConditionMet(fE);this.refresh()}))}),by.debounceTimeout);this.disposables.add$1(this.$L)},$a:function(){if(ss.isNullOrUndefined(this.$G)){return''}if(this.$G.get_thresholdIsValid()){return(this.$G.get_alertConditionMet()?tab.Strings.DataAlertThresholdConditionMet:tab.Strings.DataAlertThresholdConditionUnmet)}var e=this.$G.get_conditionPresModel().dataType;if(e==='integer'){if(ss.isNullOrUndefined(tab.ApplicationModel.get_instance().get_appPresModel())){if(tab.DoubleUtil.isValidDouble(this.$G.get_threshold())){return tab.Strings.DataAlertThresholdErrorIntegerInputDouble}}else{var fE=tab.ApplicationModel.get_instance().get_appPresModel().numberFormats;if(tab.DoubleUtil.isValidDouble(tableau.format.reformatNumberToJsFormat(this.$G.get_threshold(),fE))){return tab.Strings.DataAlertThresholdErrorIntegerInputDouble}}return tab.Strings.DataAlertThresholdErrorIntegerInputNonNumeric}if(e==='real'){return tab.Strings.DataAlertThresholdErrorDouble}throw new ss.ArgumentException('ThresholdType.DataType is not among the supported data types')},$9:function(){if(this.$K){return tab.Strings.DataAlertCreateButtonSaving}return this.$E.getSubmitButtonText()},refresh:function(){this.updateProps$1({readyForInteraction:this.$y(),onThresholdInputTextChanged:ss.mkdel(this,this.$j),maxThresholdLength:18,onTitleInputTextChanged:ss.mkdel(this,this.$k),onSave:ss.mkdel(this,this.$c),title:(ss.isValue(this.$G)?this.$G.get_title():this.$8()),selectionCaption:(ss.isValue(this.$G)?this.$G.get_selectionCaption():''),threshold:(ss.isValue(this.$G)?this.$G.get_threshold():''),thresholdIsValid:ss.isValue(this.$G)&&this.$G.get_thresholdIsValid(),alertConditionMet:ss.isValue(this.$G)&&this.$G.get_alertConditionMet(),thresholdMessage:this.$a(),onEmailInputTextChanged:ss.mkdel(this,this.$g),showEmailInput:this.$5(),recipientSearchSelectorProps:this.$B(),enableSubmitButton:this.$D(),notificationIntervalProps:this.$A(),emailErrorText:this.$7(),currentUserEmailIsValid:this.$w(),submitButtonText:this.$9(),conditionProps:this.$v()})},addUser:function(e){if(_.any(this.users,function(fF){return fF.id===e.id})){return}if(tab.FeatureFlags.isEnabled('AlertRecipientPermissionsErrors')&&e.id!==tsConfig.current_user_id){var fE=tab.WorkgroupServerCommands.checkIfUserCanReceiveDataAlert(e.id+'');if(ss.isNullOrUndefined(e.dataAlertRecipientErrorCode)){e.dataAlertRecipientErrorCode=-1}fE.done(ss.mkdel(this,function(){e.dataAlertRecipientErrorCode=0;this.refresh()}));fE.fail(ss.mkdel(this,function(fF){e.dataAlertRecipientErrorCode=fF;this.refresh()}))}this.users.push(e);this.refresh()},setUsers:function(e){this.users=e;this.refresh()},removeUser:function(e){ss.remove(this.users,e);this.refresh()},removeUserByIndex:function(e){ss.removeAt(this.users,e);this.refresh()},setIsSearchEmpty:function(e){this.set_emptySearch(e);this.refresh()},setNoResults:function(e){this.set_noResults(e);this.refresh()},buildTelemetryObject:function(e){return['SubmitButtonPressed',this.$K,'TotalRecipientCount',this.users.length,'InvalidUnlicensedRecipientCount',this.users.filter(function(fE){return fE.dataAlertRecipientErrorCode===90}).length,'InvalidViewPermissionsRecipientCount',this.users.filter(function(fE){return fE.dataAlertRecipientErrorCode===210007}).length,'InvalidDownloadPermissionRecipientCount',this.users.filter(function(fE){return fE.dataAlertRecipientErrorCode===210008}).length,'InvalidEmailRecipientCount',this.users.filter(function(fE){return fE.dataAlertRecipientErrorCode===10011}).length,'OperatorType',this.$G.get_operator(),'EmailFrequency',this.$G.get_notificationIntervalInMinutes(),'ConditionMet',this.$G.get_alertConditionMet(),'SubmitButtonEnabled',this.$D(),'CurrentUserHasEmail',!tab.MiscUtil.isNullOrEmpty$3(tsConfig.current_user_email),'EditMode',e]},$7:function(){if(tab.FeatureFlags.isEnabled('AlertRecipientPermissionsErrors')){if(this.$6()){return tab.Strings.SubscribeInvalidAddress}else if(this.$x()===1){return tab.Strings.DataAlertInvalidUser}else if(this.$x()>1){return tab.Strings.DataAlertInvalidPluralUsers(this.$x())}else if(this.get_noResults()){return tab.Strings.DataAlertNoUsersMatchSearch}return''}else{if(this.$5()){if(this.$w()){return''}return tab.Strings.SubscribeInvalidAddress}else if(this.$C()>0){return tab.Strings.DataAlertRecipientWithNoEmail}else if(this.get_noResults()){return tab.Strings.DataAlertNoUsersMatchSearch}return''}},$b:function(e){return e.id===tsConfig.current_user_id||e.dataAlertRecipientErrorCode===0||e.dataAlertRecipientErrorCode===-1},$6:function(){return this.$5()&&!this.$w()},$5:function(){return this.$4()&&tab.MiscUtil.isNullOrEmpty$3(tsConfig.current_user_email)},$4:function(){return this.users.filter(function(e){return e.id===tsConfig.current_user_id}).length===1},$g:function(e){this.$H=e;this.refresh()},$k:function(e){if(ss.isNullOrUndefined(this.$G)){return}if(ss.referenceEquals(e,this.$G.get_title())){return}this.$G.set_title(e)},$f:function(){this.$G=this.$F.get_preparedDataAlert();this.$I=ss.arrayClone(this.$G.get_recipients());this.$n();this.$p();this.$i();var e=this.$G.get_title();if(ss.isNullOrUndefined(e)){e=this.$8()}var fE=e;this.$k(fE);this.$G.set_deviceType(tabBootstrap.ViewerBootstrap.get_instance().get_deviceType());this.$J=true;this.refresh()},onDataAlertPrepareFailed:function(){this.$K=false;this.$J=false;this.refresh()},onDataAlertPreparing:function(){this.$J=false;this.refresh()},$8:function(){var e=tab.Strings.DataAlertSubjectTemplate(tsConfig.current_sheet_name);if(e.length>by.maxTitleLength){e=e.substr(0,by.maxTitleLength-3)+'...'}return e},$h:function(e){if(ss.isNullOrUndefined(e)){return}if(ss.isValue(this.$G)){this.$G.set_notificationIntervalInMinutes(e)}},$j:function(e){if(ss.referenceEquals(e,this.$G.get_threshold())){return}if(tab.MiscUtil.isNullOrEmpty$3(e)){this.$L.cancel()}else{this.$s()}this.$r(this.$G.get_operator(),e)},$d:function(e){if(ss.isNullOrUndefined(e)){return}var fE=e;this.$e(fE)},$e:function(e){if(e===this.$G.get_operator()){return}this.$s();this.$r(e,this.$G.get_threshold())},$s:function(){if(ss.isValue(this.$L)){this.$L.invokeActionDelayed()}},$c:function(){this.$K=true;this.refresh();if(tab.MiscUtil.isNullOrEmpty$3(tsConfig.current_user_email)){this.$m()}else{this.$l()}},$m:function(){var e=ss.mkdel(this,this.$l);var fE=ss.mkdel(this,function(fF){var fG=((fF===10011)?tab.Strings.SubscribeInvalidAddress:tab.Strings.DataAlertCreateFailure);ds.showNotification(fG);this.$K=false;this.refresh()});tab.WorkgroupServerCommands.setUserEmail(this.$H,e,fE)},$l:function(){if(tab.FeatureFlags.isEnabled('AlertRecipientPermissionsErrors')){var e=this.users.filter(ss.mkdel(this,function(fE){return this.$b(fE)}));this.$G.updateRecipients(e)}else{this.$G.updateRecipients(this.users)}this.$E.saveDataAlert(this.$G,this.$I)},$i:function(){this.users=this.$G.get_recipients()},$r:function(e,fE){var fF=this.$G.get_conditionPresModel().dataAlertThresholdText;if(this.$G.isValidThresholdText(fE)){fF=fE}this.$G.set_threshold(fE);this.$G.set_conditionPresModel({dataAlertConditionOp:e,dataAlertThresholdText:fF,dataType:this.$G.get_conditionPresModel().dataType})},$u:function(e){if(e.id===tsConfig.current_user_id){return((this.$z()||e.hasEmail)?0:1)}if(tab.FeatureFlags.isEnabled('AlertRecipientPermissionsErrors')){if(e.dataAlertRecipientErrorCode===-1){return 2}if(e.dataAlertRecipientErrorCode===0){return 0}return 1}else{return(e.hasEmail?0:1)}},$t:function(e){if(tab.FeatureFlags.isEnabled('AlertRecipientPermissionsErrors')){switch(e.dataAlertRecipientErrorCode){case 10011:{return tab.Strings.DataAlertRecipientPillNoEmail(e.friendlyName)}case 90:{return tab.Strings.DataAlertRecipientPillUnlicensed(e.friendlyName)}case 210007:{return tab.Strings.DataAlertRecipientPillNoViewPermissions(e.friendlyName)}case 210008:{return tab.Strings.DataAlertRecipientPillNoDownloadPermissions(e.friendlyName)}default:{return''}}}else{return''}}},ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]),[ss.IDisposable,tab.IViewModel,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(bz,a,{add_hideDialogRequested:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_hideDialogRequested:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},$i:function(){return!ss.isNullOrEmptyString(this.$n)},get_createViewModel:function(){return this.$m},get_dialogHostViewModel:function(){return this.$3$2},set_dialogHostViewModel:function(e){this.$3$2=e},$j:function(){return this.$q.pm},$f:function(){this.set_dialogHostViewModel(new bT);var e=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[bT,bS,Object])).call(null,[this.get_dialogHostViewModel()]);var fE=$(document.createElement('div'));e.addToDom(fE)},$g:function(){if(ss.isNullOrUndefined(this.$j())||!this.$j().isDataAlertDialogVisible){this.get_dialogHostViewModel().hide();this.$p=false;return}if(!this.$p){this.$h();this.get_dialogHostViewModel().show(this);this.$p=true}},$h:function(){if(!this.$j().isDataAlertDialogVisible){return}if(this.$e()){this.$6()}else{this.$7()}this.incrementProps()},$e:function(){return ss.isValue(this.$j())&&!ss.isNullOrEmptyString(this.$j().dataAlertErrorText)},$6:function(){this.$o=new bE(this.$j().dataAlertErrorText,this.$n);this.$o.add_okButtonClicked(ss.mkdel(this,this.$d));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$o.remove_okButtonClicked(ss.mkdel(this,this.$d))})));this.disposables.add$1(this.addChildViewModel(this.$o));this.disposables.add$1(this.$o);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$o=null})))},$7:function(){if(this.$i()){this.$k=bA.new$1(this.$n);this.$l=bB.new$1(this.$j(),this.$n)}else{this.$k=bw.new$1();this.$l=bx.new$1(this.$j())}this.$m=by.new$1(this.$l,this.$k);var e=ss.mkdel(this,function(){ds.showNotification(tab.Strings.DataAlertLoadForEditFailure);this.$d()});this.$k.add_persistSuccess(ss.mkdel(this,this.$d));this.$k.add_persistFailure(ss.mkdel(this,this.$d));this.$l.add_dataAlertPrepareFailed(e);this.disposables.add$1(this.$m);this.disposables.add$1(this.addChildViewModel(this.$m));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$k.remove_persistSuccess(ss.mkdel(this,this.$d));this.$k.remove_persistFailure(ss.mkdel(this,this.$d));this.$l.remove_dataAlertPrepareFailed(e);this.$k=null;this.$l=null;this.$m=null})));this.$l.prepareDataAlert()},createInitialProps:function(){return{dialogWidth:400,isModal:true,positioningBehavior:2,shouldAdjustPositionOnWindowResize:true,shouldReturnFocusOnClose:true,showCloseButton:true,testId:'dataAlertDialog',type:0}},createUpdatedProps:function(){return(this.$e()?this.$c():this.$a())},$a:function(){return{children:this.$9(),footerContent:null,shouldReturnFocusOnClose:true,showFooter:false,title:this.$b()}},$b:function(){return(this.$i()?tab.Strings.DataAlertDialogTitleEditMode:tab.Strings.DataAlertDialogTitle)},$9:function(){return React.createElement(bv,this.$m.get_props())},$c:function(){return this.$o.get_dialogProps()},$d:function(){this.raiseActionEvent(this.$3$1)},onDialogHidden:function(){this.$8();this.$p=false},$8:function(){tab.DataAlertClientCommands.closeDataAlertDialog();if(!this.$e()&&ss.isValue(this.$m)){bH.logSubmitOrCloseButtonClickedEvent(this.$m.buildTelemetryObject(this.$i()))}if(this.$i()){this.$n=null;if(ss.isValue(this.$l)&&this.$l.get_preparedDataAlert().get_viewType().toString()==='hiddenView'){var e=new tab.RepoPathObject(tsConfig.repositoryUrl);var fE=tab.VizUriModel.createForViewingSheet(e.get_originalViewURL());fE.removeQueryParam(bC.editDataAlertUrlParam);fE.removeQueryParam(bC.instanceIdUrlParam);fE.set_ignoreStickySession(true);fE.setWindowLocation(null)}else{var fF=tab.VizUriModel.createForCurrentWindowLocation();fF.removeQueryParam(bC.editDataAlertUrlParam);fF.replaceState(null)}if(ss.isValue(E.get_instance().get_apiEventHandler())){E.get_instance().get_apiEventHandler().removeEditDataAlertUrlParam(tsConfig.current_sheet_name)}}_.defer(ss.mkdel(this,this.$5))},$5:function(){this.disposables.dispose()},onCancel:function(e,fE){this.$8()},dispose:function(){this.$q.remove_showOrUpdateDialog(ss.mkdel(this,this.$g));tab.MiscUtil.dispose$1(this.get_dialogHostViewModel());spiff.BaseViewModel.prototype.dispose.call(this)}},ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.IDisposable,tab.IViewModel,ss.makeGenericType(spiff.IPropsProvider$1,[Object]),spiff.IDialogContent]);ss.initClass(bA,a,{getSubmitButtonText:function(){return tab.Strings.DataAlertUpdateButton},saveDataAlert:function(e,fE){var fF=bA.getDifferenceInUserLists(fE,e.get_recipients());var fG=bA.getDifferenceInUserLists(e.get_recipients(),fE);tab.WorkgroupServerCommands.updateDataAlert(e,this.$0,fF,fG,ss.mkdel(this,this.onPersistSuccess),ss.mkdel(this,this.onPersistFailure))}},bF);ss.initClass(bB,a,{prepareDataAlert:function(){this.$0()},$1:function(e){if(ss.isNullOrUndefined(e)||e.length===0){this.raiseDataAlertPrepareFailed();return}if(e.length>1){this.raiseDataAlertPrepareFailed();return}this.$4(e);this.$5=true;this.$3()},$4:function(e){var fE=e[0];this.dataAlert.set_title(fE.get_title());this.dataAlert.set_deviceType(fE.get_deviceType());this.dataAlert.set_notificationIntervalInMinutes(fE.get_notificationIntervalInMinutes());this.dataAlert.set_viewType(fE.get_viewType())},$3:function(){if(this.$5&&this.$6){this.raiseDataAlertPrepared()}},$2:function(e){this.$6=true;_.each(e,function(fE){fE.hasEmail=true});this.dataAlert.updateRecipients(e);this.$3()},$0:function(){this.$5=false;this.$6=false;tab.WorkgroupServerCommands.getDataAlertForDataAlertId(tsConfig.current_view_id,this.$7).done(ss.mkdel(this,this.$1)).fail(ss.mkdel(this,this.raiseDataAlertPrepareFailed));tab.WorkgroupServerCommands.getUsersForDataAlertId(this.$7).done(ss.mkdel(this,this.$2)).fail(ss.mkdel(this,this.raiseDataAlertPrepareFailed))}},bG,[cM]);ss.initClass(bC,a,{});ss.initClass(bD,a,{render:function(){return spiff.DOMElements.div({className:bD.$0},this.renderGenericMessage())},renderGenericMessage:function(){var e=(tab.MiscUtil.isNullOrEmpty$3(this.props.alertSubject)?tab.Strings.DataAlertErrorDialogViewChanged(this.props.sheetName):tab.Strings.DataAlertErrorDialogViewChangedWithSubject(this.props.sheetName,this.props.alertSubject));return spiff.DOMElements.div({className:bD.$1},e)}},spiff.PureRenderComponent);ss.initClass(bE,a,{add_okButtonClicked:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_okButtonClicked:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},get_dialogProps:function(){return{children:this.$5(),title:tab.Strings.DataAlertErrorDialogTitle,showFooter:true,footerContent:this.$6()}},$7:function(){tab.WorkgroupServerCommands.getDataAlertForDataAlertId(tsConfig.current_view_id,this.$a).done(ss.mkdel(this,this.$8))},$8:function(e){if(e.length===1){this.$9=e[0].get_title()}this.incrementProps()},$5:function(){return React.createElement(bD,this.get_props())},createUpdatedProps:function(){return{errorText:this.$b,sheetName:tsConfig.current_sheet_name,alertSubject:this.$9}},$6:function(){return React.createElement(SharedWidgets.DialogFooterButtonsWidget,{buttons:[{handleClick:ss.mkdel(this,function(e){this.raiseActionEvent(this.$3$1)}),buttonType:2,testId:'OK',label:tab.Strings.DialogButtonOK,disabled:false}]})}},ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.IDisposable,tab.IViewModel,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(bH,a,{});ss.initClass(bI,a,{});ss.initClass(bJ,a,{get_compositeSearchWidget:function(){return this.$l},$a:function(e){this.$g();this.$k();if(e.trim().length>0){this.get_viewModel().set_isActive(true);this.$j()}else{this.dataHighlighterViewModel.clearHighlighting();this.populateAndDisplayList(this.get_viewModel().get_fullDomainItemSet(),1)}this.get_viewModel().lastSatisfiedSearchTerm=null;this.get_viewModel().lastSatisfiedSearchResults=null;this.get_viewModel().set_searchText(e)},$k:function(){if(this.$l.get_textInputView().get_text().trim().length>0){this.$l.get_searchButton().element.hide();this.$l.get_clearButton().element.show()}else{this.$l.get_searchButton().element.show();this.$l.get_clearButton().element.hide()}},$j:function(){this.queryDelayTimer=window.setTimeout(ss.mkdel(this,this.$f),200)},$g:function(){this.queryDelayTimer=tab.MiscUtil.clearTimeout(this.queryDelayTimer)},$f:function(){this.dataHighlighterViewModel.sendSearchQuery(this.get_compositeSearchWidget().get_textInputView().get_text(),false);this.$g()},handleNewSearchQueryResults:function(e,fE){if(!ss.referenceEquals(e,this.$l.get_textInputView().get_text())||ss.isNullOrUndefined(fE)){return}this.populateAndDisplayList(fE,2)},populateAndDisplayList:function(e,fE){this.currentListPopulationMode=fE;this.$p=tab.MiscUtil.dispose(this.$p);this.$p=[];var fF=Math.min(e.dataHighlighterItems.length,this.get_viewModel().get_maxNumberListItems());for(var fG=0;fG<fF;fG++){var fH=e.dataHighlighterItems[fG];this.$p.push(spiff.ListItemViewModel.newListItem(fH.objectId.toString(),fH,false,false,false))}if(fF<e.totalNumberOfItemsInSet){var fI=e.totalNumberOfItemsInSet-fF;var fJ=((fI>1)?tab.Strings.SearchResultsNotShownPlural(fI.toString()):tab.Strings.SearchResultsNotShownSingular);this.$p.push(spiff.ListItemViewModel.newListItem(fJ,null,false,false,false));this.notShownResultsListItemIsVisible=true}else{this.notShownResultsListItemIsVisible=false}this.get_compositeSearchWidget().showListInsideUberPopup(this.$p,this,this.dataHighlighterViewRootElement,'tabDataHighlighterViewSearchResultList',312)},createListItemContent:function(e){var fE="<div class='{0}' title='{1}'>{1}</div>";var fF;if(ss.isValue(e.get_data())){var fG=e.get_data();fF=fG.text}else{fF=e.get_id()}var fH=ss.formatString(fE,'tab-list-item-label',tableau.format.escapeHTML(fF));return $(fH).css(this.get_viewModel().get_formatStyle())},handleListItemSelected:function(e){if(ss.isNullOrUndefined(e.get_data())){return}var fE=e.get_data();this.get_compositeSearchWidget().setSearchText(fE.text);this.get_compositeSearchWidget().get_clearButton().element.show();this.get_compositeSearchWidget().get_searchButton().element.hide();this.get_viewModel().highlightItems([fE.objectId]);this.get_compositeSearchWidget().get_textInputView().get_inputElement().blur();this.get_viewModel().lastSatisfiedSearchTerm=this.get_compositeSearchWidget().get_textInputView().get_text();this.get_viewModel().lastSatisfiedSearchResults={dataHighlighterItems:[fE]};this.get_viewModel().saveSearchTextForItem(fE.text,fE.objectId)},removeList:function(){this.currentListPopulationMode=0;this.get_compositeSearchWidget().removeList()},handleTitleChanged:function(){this.setTitleFromModel()},setTitleFromModel:function(){if(ss.isValue(this.dataHighlighterViewModel.get_zoneTitleHtml())){this.zoneTitleRegionRootElement.html(this.dataHighlighterViewModel.get_zoneTitleHtml());var e=this.dataHighlighterViewModel.get_titleAreaHeight();if(e>0){e=Math.max(e,17);this.zoneTitleRegionRootElement.height(e)}else{this.zoneTitleRegionRootElement.height('')}var fE=this.dataHighlighterViewModel.get_titleAreaWidth();if(fE>0){this.zoneTitleRegionRootElement.width(this.dataHighlighterViewModel.get_titleAreaWidth());this.$m.addClass('tab-HorizontalLayout')}else{this.$m.removeClass('tab-HorizontalLayout')}tableau.util.setupTitleEllipsis(this.zoneTitleRegionRootElement);this.zoneTitleRegionRootElement.attr('title',this.dataHighlighterViewModel.get_zoneTitleTooltip())}this.$m.toggleClass('tabBordered',this.get_viewModel().get_zoneHasBorder())},handleTextInputElementClicked:function(){var e=this.get_compositeSearchWidget().get_textInputView().get_text().trim().length;this.$n=(this.$e()?this.$h():null);if(e===0){this.populateAndDisplayList(this.dataHighlighterViewModel.get_fullDomainItemSet(),1)}else if(!this.$e()){this.$i()}},$h:function(){var e=this.get_compositeSearchWidget().get_textInputView().get_inputElement();var fE=e.prop('selectionStart');var fF=e.prop('selectionEnd');var fG=fE!==fF;if(fG){return null}return fE},$e:function(){return ss.isValue(this.get_compositeSearchWidget().get_listViewModel())},$i:function(){if(ss.referenceEquals(this.get_viewModel().lastSatisfiedSearchTerm,this.get_compositeSearchWidget().get_textInputView().get_text())&&ss.isValue(this.get_viewModel().lastSatisfiedSearchResults)){this.populateAndDisplayList(this.get_viewModel().lastSatisfiedSearchResults,2)}this.get_viewModel().sendSearchQuery(this.get_compositeSearchWidget().get_textInputView().get_text(),false)},$b:function(e){this.get_viewModel().set_isActive(true);this.$o=true},$c:function(e){tab.WindowHelper.clearSelection();this.$o=false},$d:function(e){var fE=this.$h();var fF=ss.isValue(fE);var fG=ss.isValue(this.$n);if(this.$o){if(fF&&!tsConfig.is_mobile){tab.DomUtil.selectAllInputText(this.get_compositeSearchWidget().get_textInputView().get_inputElement())}this.$o=false}else if(this.$e()&&fG&&fF){var fH=ss.unbox(this.$n);var fI=ss.unbox(fE);if(fH===fI){var fJ=this.get_compositeSearchWidget().get_textInputView().get_text().length;if(fI===fJ){this.removeList()}}}this.$n=null},handleSearchButtonClicked:function(){this.get_compositeSearchWidget().get_textInputView().get_inputElement().focus();this.$o=false;this.populateAndDisplayList(this.dataHighlighterViewModel.get_fullDomainItemSet(),1)},handleClearButtonClicked:function(){this.$o=false},handleSearchTextChanged:function(){if(ss.isValue(this.queryDelayTimer)){return}this.get_compositeSearchWidget().setSearchText(this.get_viewModel().get_searchText());this.$k()},handleIsActiveChanged:function(){this.get_compositeSearchWidget().get_textInputView().get_inputElement().toggleClass('tabDataHighlighterViewInactiveText',!this.get_viewModel().get_isActive())},$9:function(){if(!this.$e()){return}var e=this.get_compositeSearchWidget().get_textInputView().get_text().trim().length;if(e>0){this.$i()}else{this.populateAndDisplayList(this.get_viewModel().get_fullDomainItemSet(),1)}},handleEnterKeyPress:function(){this.removeList();this.get_compositeSearchWidget().get_textInputView().get_inputElement().blur()},handleEscapeKeyPress:function(){if(ss.isNullOrEmptyString(this.get_compositeSearchWidget().get_textInputView().get_text())){this.removeList();this.get_compositeSearchWidget().get_textInputView().get_inputElement().blur()}else{this.get_compositeSearchWidget().get_textInputView().set_text('')}}},ss.makeGenericType(spiff.BaseView$1,[bL]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[bL]),spiff.IListItemContentCreator]);ss.initEnum(bK,a,{none:0,fullDomain:1,searchResults:2});ss.initClass(bL,a,{add_receivedSearchQueryResults:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_receivedSearchQueryResults:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_titleChanged:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_titleChanged:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_searchTextChanged:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_searchTextChanged:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_isActiveChanged:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_isActiveChanged:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},add_domainItemsChanged:function(e){this.$2$5=ss.delegateCombine(this.$2$5,e)},remove_domainItemsChanged:function(e){this.$2$5=ss.delegateRemove(this.$2$5,e)},get_zoneTitleHtml:function(){if(ss.isValue(this.$b)){return this.$b.html}else{return''}},get_titleAreaHeight:function(){return((ss.isValue(this.$b)&&this.$8.get_titleSize().h!==0)?this.$b.h:0)},get_titleAreaWidth:function(){return((ss.isValue(this.$b)&&this.$8.get_titleSize().w!==0)?this.$b.w:0)},get_zoneHasBorder:function(){return this.$5.get_zoneHasBorder()},get_zoneWidth:function(){return this.$5.get_zoneWidth()},get_zoneTitleTooltip:function(){return(ss.isValue(this.$b)?this.$b.caption:'')},get_searchPlaceholderString:function(){return this.$5.get_searchPlaceholderString()},get_fullDomainItemSet:function(){return this.$5.get_fullDomainItemSet()},get_searchText:function(){return this.$9},set_searchText:function(e){var fE=!ss.referenceEquals(e,this.$9);this.$9=e;if(fE&&!ss.staticEquals(this.$2$3,null)){this.$2$3()}},get_numHighlighted:function(){return this.$5.get_numHighlighted()},get_isActive:function(){return this.$7},set_isActive:function(e){var fE=e!==this.$7;this.$7=e;if(fE&&!ss.staticEquals(this.$2$4,null)){this.$2$4()}},get_maxNumberListItems:function(){var e=tab.FeatureParamsLookup.getInt(44);if(ss.isNullOrUndefined(e)){e=this.$5.get_maxNumberListItems()}return e},get_formatStyle:function(){return tab.FormattingConverters.makeFormatStyleDict(this.$5.get_bodyTextStyle())},alertIfDomainItemsChanged:function(){if(bL.$0(this.$6,this.get_fullDomainItemSet().dataHighlighterItems)){this.$6=ss.arrayClone(this.get_fullDomainItemSet().dataHighlighterItems);this.raiseActionEvent(this.$2$5)}},$2:function(){return tab.ApplicationModel.get_instance().get_isLocalRenderMode()},sendSearchQuery:function(e,fE){if(tab.ApplicationModel.get_instance().get_isOffline()){var fF=e.toLowerCase();var fG=[];var fH=[];var fI=this.$5.get_fullDomainItemSet().dataHighlighterItems;for(var fJ=0;fJ<fI.length;fJ++){var fK=fI[fJ];if(fK.text.toString().toLowerCase().indexOf(fF)!==-1){fH.push(fK.objectId);fG.push(fK)}}this.lastSatisfiedSearchTerm=e;var fL={dataHighlighterItems:Array.prototype.slice.call(fG),totalNumberOfItemsInSet:fG.length};this.lastSatisfiedSearchResults=fL;if(!ss.staticEquals(this.$2$1,null)){this.$2$1(e,fL)}this.highlightItems(Array.prototype.slice.call(fH))}else{var fM=new tab.HighlightItemsByPatternMatchCmd;fM.c['fn']=this.$5.get_fieldName();fM.c['valueString']=e;fM.c['visualIdPresModel']=this.$a;fM.set_uiBlocking('none');fM.invoke().done(ss.mkdel(this,function(fN){if(fE){return}this.lastSatisfiedSearchTerm=e;this.lastSatisfiedSearchResults=fN.$$c['dataHighlighterItemSet'];if(!ss.staticEquals(this.$2$1,null)){this.$2$1(e,fN.$$c['dataHighlighterItemSet'])}}))}},saveSearchTextForItem:function(e,fE){var fF=new tab.HighlightItemsByPatternMatchCmd;fF.c['fn']=this.$5.get_fieldName();fF.c['valueString']=e;fF.c['visualIdPresModel']=this.$a;fF.c['objectIds']=[fE];fF.invoke()},highlightItems:function(e){if(e.length>0){tab.SelectionClientCommands.highlightItems(this.$5,this.$5.get_fieldName(),e,this.$a,this.$2())}},clearHighlighting:function(){tab.SelectionClientCommands.clearHighlighting(this.$5,this.$5.get_fieldName(),this.$a,this.$2())},restoreSearchResultsHighlighting:function(){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(ss.isValue(this.lastSatisfiedSearchResults)){this.highlightItems(this.lastSatisfiedSearchResults.dataHighlighterItems.map(function(e){return e.objectId}))}}else{this.sendSearchQuery(this.lastSatisfiedSearchTerm,true)}},$4:function(){var e=this.$8.get_model();var fE=ss.isValue(e.pm)&&ss.isValue(e.pm.zoneTitle);if(fE){var fF=(this.$8.get_model().get_hasTitle()?e.pm.zoneTitle:null);if(!ss.referenceEquals(fF,this.$b)){this.$b=fF;if(!ss.staticEquals(this.$2$2,null)){this.$2$2()}}}},$3:function(){this.set_isActive(this.$5.get_isActive());this.set_searchText(this.$5.get_searchText());this.alertIfDomainItemsChanged()}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(bM,a,{get_dataHighlighterContentElement:function(){return this.$1},get_dataHighlighterViewRootElement:function(){return this.$2},get_zoneTitleRegionRootElement:function(){return this.$3}},spiff.Template,[ss.IDisposable]);ss.initClass(bN,a,{show:function(){var e=new ck;var fE=ss.mkdel(this,function(fF){this.onAuthDialogMessage(fF,e)});e.eventHandler=fE;tab.WindowHelper.addListener(window.self,'message',fE);this.$1.add_closed(ss.mkdel(this,function(fF,fG){this.$0(e)}));this.$1.show()},cleanup:function(e){this.$1.close(null)},dispose:function(){this.$1.dispose()},$0:function(e){tab.WindowHelper.removeListener(window.self,'message',e.eventHandler);if(!this.get_submitted()&&!ss.staticEquals(this.onCancel,null)){this.onCancel()}}},O,[ss.IDisposable]);ss.initClass(bO,a,{setDateRange:function(e,fE){this.$u=bO.$2(e);this.$s=bO.$2(fE);this.$v=bO.$4(this.$u);this.$t=bO.$4(this.$s)},show:function(e,fE){if(ss.isValue(e)){this.$p=bO.$4(bO.$2(e));this.$B=bO.$2(fE||e)}this.$l();return this.element.show().width(tab.DoubleUtil.roundToInt(this.element.width()))},hide:function(){this.$F=false;this.element.height('auto');return this.element.hide()},positionCalendarByElement:function(e){R.getViewport(ss.mkdel(this,function(fE){var fF=e.offset();var fG=tab.DoubleUtil.roundToInt(this.element.outerWidth());var fH=this.getMaxHeight();var fI=tab.DoubleUtil.roundToInt(e.outerHeight());fF=this.$8(fE,fI,fF,fG,fH);this.element.offset(fF)}))},$8:function(e,fE,fF,fG,fH){var fI=tab.DoubleUtil.roundToInt(fF.left);var fJ=tab.DoubleUtil.roundToInt(fF.top);var fK=e.getDocumentViewport({x:fI,y:fJ});var fL=fK.l+fK.w;var fM=fK.t+fK.h;if(fJ+fE-1+fH<=fM){fJ+=fE-1;fI=bO.$1(fI,fG,fK.l,fL)}else if(fJ-(fH-1)>fK.t){this.useMaxHeight();fJ-=fH-1;fI=bO.$1(fI,fG,fK.l,fL)}else if(fI-(fG-1)>fK.l){fI-=fG-1;fJ=bO.$1(fJ,fH,fK.t,fM)}else{var fN=fI;fI=fK.l;fI=bO.$1(fI,fG,fK.l,fN);fJ=bO.$1(fJ,fH,fK.t,fM)}return{left:fI,top:fJ}},getMaxHeight:function(){var e=this.element.find('.tab-datepicker-month-table tbody tr');return tab.DoubleUtil.roundToInt(this.element.outerHeight())+Math.round(tab.DoubleUtil.roundToInt(e.outerHeight())*(6-e.length))},useMaxHeight:function(){if(!this.$F){this.$F=true;this.$l();this.element.height(tab.DoubleUtil.roundToInt(this.element.height()))}},$d:function(){var e=$('<div>').addClass('tab-datepicker-header');this.$x=$('<span>').addClass('tab-datepicker-header-text').appendTo(e);this.$A=$('<span>').addClass('tab-datepicker-header-button').addClass('tab-datepicker-prev-month-button').appendTo(e).click(ss.mkdel(this,this.$j));this.$z=$('<span>').addClass('tab-datepicker-header-button').addClass('tab-datepicker-next-month-button').appendTo(e).click(ss.mkdel(this,this.$i));return e},$c:function(){var e=$('<div>').addClass('tab-datepicker-footer');$('<span>').addClass('tab-datepicker-today-label').html(ss.formatString(this.$D,"<span class='tab-datepicker-today-date'></span>")).appendTo(e);this.$E=$('.tab-datepicker-today-date',e).click(ss.mkdel(this,this.$6));return e},$e:function(){this.$w=$('<table>').addClass('tab-datepicker-month-table');this.$w.on('click','.tab-datepicker-day-cell',ss.mkdel(this,this.$7));return this.$w},$7:function(e){var fE=$(e.target);if(!fE.hasClass('tab-disabled')){this.$h(fE)}},$h:function(e){this.$w.find('.tab-datepicker-day-cell-selected').removeClass('tab-datepicker-day-cell-selected');e.addClass('tab-datepicker-day-cell-selected');var fE=e.data();this.$B=new Date(fE['year'],fE['month'],fE['dayOfMonth']);var fF=new Date(Date.UTC(fE['year'],fE['month'],fE['dayOfMonth']));this.$k(fF)},$k:function(e){this.element.trigger('dateSelected',[e])},$j:function(e){if(this.$g()){if(this.$p.getMonth()===0){if(this.$p.getFullYear()>1){this.$p.setMonth(11);this.$p.setFullYear(this.$p.getFullYear()-1)}}else{this.$p.setMonth(this.$p.getMonth()-1)}this.$l()}},$i:function(e){if(this.$f()){if(this.$p.getMonth()===11){this.$p.setMonth(0);this.$p.setFullYear(this.$p.getFullYear()+1)}else{this.$p.setMonth(this.$p.getMonth()+1)}this.$l()}},$g:function(){return ss.isNullOrUndefined(this.$v)||this.$p>this.$v},$f:function(){return ss.isNullOrUndefined(this.$t)||this.$p<this.$t},$6:function(e){var fE=bO.$3(new Date);if(!this.$9(fE)){this.$k(fE)}},$l:function(){this.$n();this.$o();this.$m();this.element.prop('unselectable','on');this.element.find('*').prop('unselectable','on');this.element.trigger('calendarUpdated')},$n:function(){this.$x.text(this.$y(bO.$3(this.$p)));this.$A.toggleClass('tab-disabled',!this.$g());this.$z.toggleClass('tab-disabled',!this.$f())},$m:function(){this.$E.text(this.$r(bO.$3(new Date)));this.$E.toggleClass('tab-disabled',this.$a(bO.$4(new Date)))},$b:function(e){return $('<td>').addClass('tab-datepicker-day-cell').text(e.getDate().toString()).data(ss.mkdict(['year',e.getFullYear(),'month',e.getMonth(),'dayOfMonth',e.getDate()])).toggleClass('tab-datepicker-day-cell-today',bO.$5(e,new Date)).toggleClass('tab-datepicker-day-cell-selected',!!this.$B&&bO.$5(e,this.$B)).toggleClass('tab-datepicker-day-cell-othermonth',e.getMonth()!==this.$p.getMonth()).toggleClass('tab-disabled',this.$9(e))},$9:function(e){return ss.isValue(this.$u)&&e<this.$u||ss.isValue(this.$s)&&e>this.$s},$a:function(e){return ss.isValue(this.$v)&&e<this.$v||ss.isValue(this.$t)&&e>this.$t},$o:function(){var e=(new Date(this.$p.getFullYear(),this.$p.getMonth(),1)).getDay();var fE;var fF,fG;var fH,fI,fJ;this.$w.html('');fH=$('<thead>').appendTo(this.$w);fJ=$('<tr>').appendTo(fH);fE=this.$q;do{$('<th>').addClass('tab-datepicker-header-cell').text(this.$C[fE]).appendTo(fJ);fE=bO.$0(fE,1)}while(fE!==this.$q);fI=$('<tbody>').appendTo(this.$w);fJ=$('<tr>').appendTo(fI);fF=new Date(this.$p.getFullYear(),this.$p.getMonth(),1);fF.setDate(fF.getDate()-bO.$0(e,-this.$q));fG=new Date(this.$p.getFullYear(),this.$p.getMonth()+1,1);fG.setDate(fG.getDate()+bO.$0(this.$q,-fG.getDay()));while(!bO.$5(fF,fG)){this.$b(fF).appendTo(fJ);fF.setDate(fF.getDate()+1);if(fF.getDay()===this.$q&&!bO.$5(fF,fG)){fJ=$('<tr>').appendTo(fI)}}if(this.$F){var fK=fI.find('tr');if(fK.length<6){var fL=tab.DoubleUtil.roundToInt(fK.height());for(var fM=fK.length;fM<6;++fM){$("<tr><td class='tab-datepicker-day-cell'></td></tr>").height(fL).insertAfter(fK.last())}}}}},spiff.Widget,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(bP,a,{});ss.initClass(bQ,a,{});ss.initClass(bR,a,{get_vizSize:function(){return this.$2$1},set_vizSize:function(e){this.$2$1=e},$2:function(){return bR.get_isDevicePreviewMode()&&ss.isValue(this.get_vizSize())},get_shouldCutInteraction:function(){return this.$2()},get_shouldScaleDownVizContainer:function(){return this.$2()&&tsConfig.deviceTypeOverride==='phone'},get_getDevicePreviewVizContainerCss:function(){var e=this.get_vizSize().w;var fE=this.get_vizSize().h+tabBootstrap.VizLayoutConstants.get_tabsHeight();var fF=tabBootstrap.ViewerBootstrap.get_instance().getViewport().w;var fG=bR.getZoomRatio(fF,e);return{width:e+'px',height:fE+'px',transform:'scale('+fG+','+fG+')','transform-origin':'0 0'}}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(bS,a,{render:function(){return(this.props.isShown?this.$0():null)},$0:function(){return React.createElement(SharedWidgets.DialogWidget,this.props.dialogProps)}},React.Component);ss.initClass(bT,a,{$6:function(){var e={onCloseRequest:ss.mkdel(this,this.hide),handleGlassClick:ss.mkdel(this,this.$5)};if(ss.isValue(this.$7)){$.extend(e,this.$7.get_props())}return e},dispose:function(){if(ss.isValue(this.$7)){this.$7.remove_hideDialogRequested(ss.mkdel(this,this.hide))}spiff.BaseViewModel.prototype.dispose.call(this)},show:function(e){if(ss.isNullOrUndefined(e)){return}if(this.$8&&ss.isValue(this.$7)){this.$7.onDialogHidden()}spiff.GlobalUIEvents.fireDismissTemporaryElements();this.$8=true;this.$7=e;this.$7.add_hideDialogRequested(ss.mkdel(this,this.hide));this.$7.add_propsUpdated(ss.mkdel(this,this.incrementProps));this.incrementProps()},hide:function(){if(!this.$8){return}if(ss.isValue(this.$7)){this.$7.remove_hideDialogRequested(ss.mkdel(this,this.hide));this.$7.remove_propsUpdated(ss.mkdel(this,this.incrementProps));this.$7.onDialogHidden();this.$7=null}this.$8=false;this.incrementProps()},createUpdatedProps:function(){return{isShown:this.$8,dialogProps:this.$6()}},$5:function(){if(tsConfig.is_mobile){this.hide()}}},ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.IDisposable,tab.IViewModel,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initInterface(da,a,{attach:null,detach:null,disposeTooltip:null,shownTooltipIsSticky:null,isHoverAllowed:null,shouldShowCommandButtons:null,handleUbertipMenuToggle:null,handleUbertipMenuClose:null,hoverOverObject:null,hoverOverWhitespace:null,multiSelectComplete:null,singleSelectComplete:null,selectionMoved:null,repositionWithinRegion:null,onPanningOrDragging:null,onScroll:null,mouseDown:null});ss.initClass(bU,a,{attach:function(){},detach:function(){},dispose:function(){},disposeTooltip:function(){},shownTooltipIsSticky:function(){return true},isHoverAllowed:function(e){return true},shouldShowCommandButtons:function(){return true},handleUbertipMenuToggle:function(e){},handleUbertipMenuClose:function(){},hoverOverObject:function(e,fE,fF,fG){},hoverOverWhitespace:function(e){},multiSelectComplete:function(e){},singleSelectComplete:function(e){},selectionMoved:function(e){},repositionWithinRegion:function(e){},onPanningOrDragging:function(){},onScroll:function(){},mouseDown:function(e,fE){}},null,[da,ss.IDisposable]);ss.initClass(bV,a,{handleWidgetPropertyChanged:function(e,fE){},updateWidgetState:function(e){}},ss.makeGenericType(spiff.ReactSpiffAdapter$3,[bZ,bX,Object]));ss.initClass(bW,a,{show:function(){var e=document.createElement('div');this.$2=function(){_.defer(function(){ReactDOM.unmountComponentAtNode(e)})};var fE={testId:'FileDownload-Dlg',isModal:true,title:this.$4,showCloseButton:false,type:0,positioningBehavior:0,onCloseRequest:ss.mkdel(this,this.dispose),shouldAdjustPositionOnWindowResize:!tsConfig.is_mobile,children:this.$3,zIndex:1000};var fF=this.$1(ss.mkdel(this,this.dispose));fE.footerContent=fF;fE.showFooter=true;var fG=React.createElement(SharedWidgets.DialogWidget,fE);ReactDOM.render(fG,e)},dispose:function(){this.$2()},$1:function(e){var fE=bW.$0(e);var fF=this.$0(e);var fG=[];fG.push(fE);fG.push(fF);var fH=fG;var fI=spiff.DOMElements.div({style:{display:'flex',alignItems:'center',justifyContent:'flex-end',height:'100%'},children:fH});return fI},$0:function(e){var fE=spiff.DOMElements.a({href:this.$5,target:this.$6,className:'tabDownloadFileButton',style:{textDecoration:'none',wordBreak:'keep-all'},onClick:function(fG){e()},'data-test-id':'DownloadLink'},tab.Strings.DialogButtonDownload);var fF=spiff.DOMElements.div({className:spiff.ClickBuster.suppressClickBustingClass,key:'download-button-wrapper-key',style:{paddingLeft:SharedWidgets.TabStyles.Spacing.MediumSpace},children:fE});return fF}},null,[ss.IDisposable]);ss.initClass(bX,a,{});ss.initClass(bY,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(bZ,a,{get_dom:function(){return this.get_template()},$f:function(){return(tsConfig.is_mobile?tab.Strings.ToolbarPublicDownloadLabelMobile:tab.Strings.ToolbarPublicDownloadLabelWeb)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$9();window.setTimeout(ss.mkdel(this,function(){var e=this.$h.get_menu().menuItems;for(var fE=0;fE<e.length;fE++){var fF=e[fE];if(fF.enabled){this.$h.set_focusedItem(fF);break}}}),0)},$9:function(){this.get_dom().downloadArea.find('.tabDisabled .tabMenuItemName').attr('title',tab.Strings.ToolbarDisabledDownloadExplanation);if(!this.$i.get_exportCrosstabEnabled()){this.get_dom().downloadArea.find('.tabDisabled.tabDownloadCrosstab .tabMenuItemName').attr('title',tab.Strings.ToolbarDisabledCrosstabDownloadExplanation)}if(!this.$i.get_exportDataEnabled()){this.get_dom().downloadArea.find('.tabDisabled.tabDownloadData .tabMenuItemName').attr('title',tab.Strings.ToolbarDisabledDataDownloadExplanation)}if(!this.$i.get_downloadWorkbookEnabled()){this.get_dom().downloadArea.find('.tabDisabled.tabDownloadWorkbook .tabMenuItemName').attr('title',tab.Strings.ToolbarDisabledWorkbookDownloadExplanation)}},$b:function(){var e=[];if(this.$i.get_shouldShowImage()){e.push(spiff.MenuItem.newActionItemWithItemClass(tab.Strings.ToolbarExportImage,ss.mkdel(this.$i,this.$i.exportImage),'tabDownloadImage'))}var fE=(this.$i.get_exportDataEnabled()?ss.mkdel(this.$i,this.$i.exportData):null);e.push(spiff.MenuItem.newActionItemWithItemClass(tab.Strings.ToolbarExportData,fE,'tabDownloadData'));var fF=(this.$i.get_exportCrosstabEnabled()?ss.mkdel(this.$i,this.$i.exportCrosstab):null);e.push(spiff.MenuItem.newActionItemWithItemClass(tab.Strings.ToolbarExportCrosstab,fF,'tabDownloadCrosstab'));if(this.$i.get_shouldShowPdf()){e.push(spiff.MenuItem.newActionItemWithItemClass(tab.Strings.ToolbarPrintToPdf,ss.mkdel(this.$i,this.$i.exportPdf),'tabDownloadPdf'))}if(this.$i.get_shouldShowDownloadWorkbook()){var fG=(this.$i.get_downloadWorkbookEnabled()?ss.mkdel(this.$i,this.$i.downloadWorkbook):null);e.push(spiff.MenuItem.newActionItemWithItemClass(tab.Strings.ToolbarWorkbook,fG,'tabDownloadWorkbook'))}if(this.$j&&eV.$0()){e.push(spiff.MenuItem.newActionItemWithItemClass(this.$f(),ss.mkdel(this,this.$e),'tabPublicApp'))}if(eV.get_toolbarIsBottom()){e.reverse()}return e},$d:function(){if(eV.$0()){return new spiff.UnificationDarkMenuTheme}else{return new spiff.UnificationLightMenuTheme}},$e:function(){window.open(this.$i.get_downloadAppUrl())},$c:function(){this.get_dom().explanationTitle.append(tab.Strings.ToolbarPublicExplanationTitle);this.get_dom().explanationBody.append(tab.Strings.ToolbarPublicExplanationText);var e='<span class=tabWindowsLogo />';var fE='<span class=tabAppleLogo />';this.get_dom().availablePlatforms.append(tab.Strings.ToolbarPublicAvailablePlatforms(e,fE));var fF=spiff.LabelButton.newTextButton();fF.set_label(this.$f());fF.add_click(ss.mkdel(this,this.$e));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){fF.remove_click(ss.mkdel(this,this.$e))})));this.get_dom().downloadAppButton.append(fF.element)},$a:function(){var e=new spiff.Menu(this.$b());this.$h=spiff.MenuViewModel.createForMenu(e,null,this.$d(),null,null,true);this.$h.add_menuItemClicked(spiff.MenuViewModel.handleMenuActionItemClicked);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$h.remove_menuItemClicked(spiff.MenuViewModel.handleMenuActionItemClicked)})));this.$g=tab.ObjectRegistry.newView(spiff.MenuView).call(null,[this.$h]);this.get_dom().menuArea.append(this.$g.element);if(!this.$j&&eV.$0()){this.$c()}}},ss.makeGenericType(spiff.BaseView$1,[ca]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[ca])]);ss.initClass(ca,a,{add_downloadInitiated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_downloadInitiated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_hideDialogRequested:function(e){this.add_downloadInitiated(e)},remove_hideDialogRequested:function(e){this.remove_downloadInitiated(e)},add_propsUpdated:function(e){},remove_propsUpdated:function(e){},get_viewType:function(){return bZ},get_viewModel:function(){return this},get_props:function(){var e=tab.Strings.ToolbarDownload;var fE=!tsConfig.is_mobile;var fF=new bX;fF.viewModel=this;return{title:e,testId:'download',type:0,showCloseButton:true,positioningBehavior:0,isModal:true,isGlassTransparent:false,showFooter:false,shouldAdjustPositionOnWindowResize:fE,shouldRecenterOnUpdate:true,children:React.createElement(bV,fF)}},get_shouldShowDownloadWorkbook:function(){return!tsConfig.is_mobile},get_downloadWorkbookEnabled:function(){return!tsConfig.is_mobile&&(!tsConfig.previewMode&&!ss.isNullOrEmptyString(tsConfig.downloadURI)||tsConfig.is_metrics_view)},get_downloadAppUrl:function(){var e=(ss.isValue(tabBootstrap.ViewerBootstrap.get_instance().location)?tabBootstrap.ViewerBootstrap.get_instance().location.toString():'');return'http://public.tableau.com/s/download?source=viz_toolbar&ref='+e.split('?')[0]},get_shouldShowPdf:function(){return tab.ModelUtils.isLegacyMenuItemEnabled('print')},get_shouldShowImage:function(){return tab.ModelUtils.isLegacyMenuItemEnabled('exportimage')},get_exportDataEnabled:function(){return tab.ModelUtils.isLegacyMenuItemEnabled('exportdata')},get_exportCrosstabEnabled:function(){return tab.ModelUtils.isLegacyMenuItemEnabled('exportcrosstab')},disposeViewModel:function(){this.dispose()},downloadWorkbook:function(){tab.ToolbarServerCommands.downloadWorkbook();this.$2()},exportImage:function(){var e=new cl;e.setSheetScrollPositions(E.get_instance().get_client().get_viewControllers());tab.ToolbarServerCommands.exportImage(e);this.$2()},exportData:function(){tab.ToolbarServerCommands.exportData();this.$2()},exportCrosstab:function(){tab.ToolbarServerCommands.exportCrosstab();this.$2()},exportPdf:function(){tab.ToolbarServerCommands.exportPdf(new cl);this.$2()},updateUberPopupViewModel:function(e){},onDialogHidden:function(){},$2:function(){this.raiseActionEvent(this.$2$1)}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel,spiff.IContent,spiff.IUberPopupContent,ss.makeGenericType(spiff.IPropsProvider$1,[Object]),spiff.IDialogContent]);ss.initClass(cb,a,{show:function(){spiff.Dialog.prototype.show.call(this);this.showInternal()},showInternal:null},spiff.ModalDialog,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(cc,a,{showInternal:function(){this.get_body().append(this.$P)}},cb,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(cd,a,{showInternal:function(){var e=$('<iframe />');e.attr('src',this.urlToLoadDialogContent);e.attr('tb-test-id',this.$P);this.get_body().append(e)}},cb,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(ce,a,{add_handled:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_handled:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},show:function(){this.parentNode=document.createElement('div');var e={key:'EditConnectionInformationDialog',content:tab.Strings.EditConnectionInformationDialogText(this.$2.datasourceCaption),showDetailsLabel:tab.Strings.ShowDetailsLabel,hideDetailsLabel:tab.Strings.HideDetailsLabel,detailsContent:this.$2.exceptionMessage,title:tab.Strings.EditConnectionInformationDialogTitle,contentSelectable:true,dialogWidth:500,dialogButtons:[],onDialogCloseRequested:ss.mkdel(this,this.$0)};e.dialogButtons.push({buttonClickHandler:ss.mkdel(this,this.$1),buttonText:tab.Strings.DialogYesButtonText,testId:'YesBtn',buttonType:5});e.dialogButtons.push({buttonClickHandler:ss.mkdel(this,this.$0),buttonText:tab.Strings.DialogNoButtonText,testId:'NoBtn',buttonType:3});var fE=React.createElement(eo,e);ReactDOM.render(fE,this.parentNode)},$1:function(){if(!ss.staticEquals(this.$2$1,null)&&!this.$3){this.$2$1(true);this.$3=true;tab.VizClientCommands.setUIMode('data-tab','ReconnectEditConnection','')}},$0:function(){if(!ss.staticEquals(this.$2$1,null)&&!this.$3){this.$2$1(false);this.$3=true}this.dispose()}},P,[ss.IDisposable]);ss.initClass(cf,a,{});ss.initClass(cg,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(ch,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(ci,a,{},ss.makeGenericType(spiff.BaseView$1,[cj]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[cj])]);ss.initClass(cj,a,{onChildrenAdded:function(){this.dispose()}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(ck,a,{});ss.initClass(cl,a,{get_sheetScrollPositions:function(){return this.$0},setSheetScrollPositions:function(e){this.$0={};for(var fE=0;fE<e.length;fE++){var fF=e[fE];this.$0[fF.get_sheetName()]=fF.get_viewWidget().get_scrollPosition()}},triggerExportPdfUI:function(){tab.ModuleManager.load(tab.IPdfExportDialogModule).call(null,[]).done(function(e){if(tab.FeatureFlags.isEnabled('NewPdfDialog')){e.showExportPdfDialog(tab.CommandController.get().legacySession)}else{var fE=e.createSpiffPdfExportDialog(tab.CommandController.get().legacySession,tsConfig.is_mobile);fE.add_closed(function(){fE.dispose();fE=null});fE.show()}})}},null,[tab.IExportImageHelper,tab.IExportPdfHelper]);ss.initClass(cm,a,{get_container:function(){return this.domRoot},get_frame:function(){return this.get_container().children().first()},get_iFrame:function(){return this.get_container().find('#'+this.$1).get(0)},setSrc:function(e){this.get_frame().prop('src',e)}},spiff.Template,[ss.IDisposable]);ss.initClass(cn,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(co,a,{updateContentTemplate:function(e){this.domRoot.children().detach();this.domRoot.append(e.domRoot)}},spiff.Template,[ss.IDisposable]);ss.initClass(cp,a,{get_zoneViewModel:function(){return this.get_viewModel().get_zoneViewModel()},get_domRoot:function(){return this.get_template().domRoot},$j:function(){return this.get_template()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$b()},$g:function(e,fE){if(fE.get_propertyName()==='isActiveZone'){this.$h()}},$b:function(){if(this.get_viewModel().get_isEmpty()||this.get_viewModel().get_renderStatus()==='promptNeeded'||this.get_viewModel().get_renderStatus()==='initial'){this.$d()}else if(this.get_viewModel().get_renderStatus()==='load'){this.$e()}else{var e=new cn(this.get_viewModel().get_errorMessage());this.$j().updateContentTemplate(e)}},$d:function(){var e=new cg;this.$j().updateContentTemplate(e);return},$f:function(e){var fE=new cn(e);this.$j().updateContentTemplate(fE);return},$e:function(){var e=this.get_viewModel().get_url();var fE=this.$9();this.$k.then(ss.mkdel(this,function(fF){var fG=new tab.ExtensionServerContext;fG.isAuthoring=tsConfig.is_authoring;fG.isPublic=tsConfig.isPublic;fG.isSaas=tsConfig.is_saas;var fH=fG;var fI=fF.createApiDispatcher(this.get_viewModel().get_extensionInstanceInfo(),fH);this.$j().updateContentTemplate(fE);this.$l.setSrc(e);fI.setExtensionFrame(this.$l.get_iFrame());this.$h()}),ss.mkdel(this,function(fF){}));this.$h()},$9:function(){if(ss.isNullOrUndefined(this.$l)){this.$l=new cm('extension_frame_'+this.get_zoneViewModel().get_zoneId())}this.$i();return this.$l},$i:function(){tab.DomUtil.resize(this.$l.get_frame()[0],{l:0,t:0,w:this.get_zoneViewModel().get_contentWidth(),h:this.get_zoneViewModel().get_contentHeight()})},$a:function(){this.$n.setActive()},$h:function(){if(!tsConfig.is_authoring||tsConfig.is_mobile){return}if(ss.isNullOrUndefined(this.$m)){var e=new spiff.Glass(this.element[0],false);e.set_opaque(false);this.$m=e;this.$m.add_click(ss.mkdel(this,this.$a));this.disposables.add$1(this.$m)}if(this.$n.get_isActiveZone()){this.$m.hide()}else{this.$m.show()}},$c:function(){if(ss.isValue(this.$l)){this.$i()}}},ss.makeGenericType(spiff.BaseView$1,[cq]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[cq])]);ss.initClass(cq,a,{add_extensionZoneUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_extensionZoneUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_extensionZoneReady:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_extensionZoneReady:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_zoneViewModel:function(){return this.$c},get_extensionInstanceInfo:function(){return this.$9.pm.addInInstancePresModel},get_extensionKey:function(){if(this.get_isEmpty()){return null}return{addInId:this.get_extensionInstanceInfo().addInRegistrationPresModel.addInId,extensionVersion:this.get_extensionInstanceInfo().addInRegistrationPresModel.extensionVersion,extensionUrl:this.get_url()}},get_isInitialized:function(){return this.$a},get_isEmpty:function(){return this.get_extensionInstanceInfo().isEmpty},get_url:function(){return(this.get_isEmpty()?null:this.get_extensionInstanceInfo().addInRegistrationPresModel.url)},get_extensionName:function(){return(this.get_isEmpty()?null:this.get_extensionInstanceInfo().addInRegistrationPresModel.addInName)},get_renderStatus:function(){if(!tab.FeatureFlags.isEnabled('ExtensionsSettingsTab')){return'load'}return this.$b},get_errorMessage:function(){var e=(tsConfig.is_saas?tab.Strings.SiteAdmin:tab.Strings.ServerAdmin);switch(this.$b){case'extensionsDisabledOnServer':{return(tsConfig.isPublic?tab.Strings.ExtensionsDisabledOnPublic:tab.Strings.ExtensionsDisabledOnServer)}case'extensionBlockedByServer':{return tab.Strings.ExtensionBlockedByServer(this.get_extensionName(),this.get_url())}case'extensionsDisabledOnSite':{return tab.Strings.ExtensionsDisabledOnSite(e)}case'notInSafeList':{return tab.Strings.ExtensionNotFoundOnSafelist(this.get_extensionName(),this.get_url(),e)}case'safeListViolation':{return tab.Strings.ExtensionViolatesSafelistPermission(this.get_extensionName(),this.get_url(),e)}case'userDenied':{if(tsConfig.is_authoring){return tab.Strings.ExtensionDeniedByUserAuthoring}return tab.Strings.ExtensionDeniedByUser}default:{return''}}},handleExtensionZoneUpdated:function(){if(this.get_renderStatus()==='initial'){this.$6()}else{this.$8()}},$4:function(){if(this.get_isEmpty()){return}if(this.get_renderStatus()==='promptNeeded'||this.get_renderStatus()==='userDenied'||this.get_renderStatus()==='load'){var e=tab.ApplicationModel.get_instance().get_extensionPermissionsCache();if(e.hasUserResponse(this.get_extensionKey())){var fE=(e.getPermissionsApproval(this.get_extensionKey())?'load':'userDenied');if(fE!==this.$b){this.$b=fE;this.$8()}}}},$6:function(){if(this.get_isEmpty()){return}if(this.get_renderStatus()!=='initial'){this.$a=true;return}var e=ss.contains(this.get_extensionInstanceInfo().addInRegistrationPresModel.extensionPermissions,'full-data');tab.WorkgroupServerCommands.getExtensionLoadStatus(this.get_url(),e).done(ss.mkdel(this,function(fE){this.$5(fE)}))},$5:function(e){var fE;if(tsConfig.isPublic){fE=this.$3(e.status)}else{fE=this.$2(e.status)}if(fE==='promptNeeded'){var fF=tab.ApplicationModel.get_instance().get_extensionPermissionsCache();if(fF.hasUserResponse(this.get_extensionKey())){fE=(fF.getPermissionsApproval(this.get_extensionKey())?'load':'userDenied')}}this.$b=fE;this.$a=true;this.raiseActionEvent(this.$2$2);this.raiseActionEvent(this.$2$1)},$2:function(e){switch(e){case'blockedByServer':{return'extensionBlockedByServer'}case'disabledOnServer':{return'extensionsDisabledOnServer'}case'disabledOnSite':{return'extensionsDisabledOnSite'}case'notInSafeList':{return'notInSafeList'}case'safeListViolation':{return'safeListViolation'}case'promptUser':{return'promptNeeded'}case'load':{return'load'}default:{throw new ss.Exception('Extension Encountered Error While Rendering')}}},$3:function(e){switch(e){case'blockedByServer':{return'extensionBlockedByServer'}case'disabledOnServer':{return'extensionsDisabledOnServer'}default:{return'load'}}},$8:function(){if(ss.isValue(this.$2$1)){this.$2$1()}},$7:function(){if(ss.isValue(this.$2$2)){this.$2$2()}}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(cr,a,{componentDidUpdate:function(){this.$1()},render:function(){return spiff.DOMElements.input({style:{display:'none'},type:'file',multiple:this.props.allowMulti,onChange:ss.mkdel(this,this.$0),value:null,accept:this.props.allowedFileExtensions.join(','),ref:this.$3})},$1:function(){if(ss.isValue(this.$2)){this.$2.click()}},$0:function(e){e.stopPropagation();e.preventDefault();this.props.onFileBrowse(this.$2.files)}},spiff.PureRenderComponent);ss.initClass(cs,a,{});ss.initClass(ct,a,{createInitialProps:function(){return{onFileBrowse:ss.mkdel(this,this.$5)}},createUpdatedProps:function(){return{allowedFileExtensions:this.$6.allowedFileExtensions,allowMulti:this.$6.allowMulti}},$5:function(e){this.$7(e)}},ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.IDisposable,tab.IViewModel,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(el,a,{$1:function(){this.determineIfConnectionClassSupported().done(ss.mkdel(this,function(e){this.setState({isConnectionClassSupported:e})}))},componentWillMount:function(){this.$1()},componentWillReceiveProps:function(e){if(!ss.referenceEquals(e.connectionClass,this.props.connectionClass)){this.$1()}},render:function(){return spiff.DOMElements.div({className:'tab-reconnect-sheetWidget'},spiff.DOMElements.div({className:'tab-reconnect-sheetWidget-title'},tab.Strings.SheetReconnectTitle),(this.shouldRenderSubtitle()?ss.mkdel(this,this.createSubtitle)():null),(this.shouldShowErrorMessage()?ss.mkdel(this,this.createErrorMessage)():null),(this.shouldRenderEditConnectionButton()?ss.mkdel(this,this.createEditConnectionButton)():null),(this.state.isConnectionClassSupported?ss.mkdel(this,function(){return React.createElement(SharedWidgets.ButtonWidget,this.createPrimaryButtonProps())})():null),(this.shouldRenderEditingNotSupported()?ss.mkdel(this,this.$0)():null))},$0:function(){return spiff.DOMElements.div({className:'tab-reconnect-sheetWidget-editing-not-supported'},tab.Strings.SheetReconnectEditingNotSupported)},shouldRenderSubtitle:function(){return!ss.isNullOrEmptyString(this.props.connectionClass)},createSubtitle:function(){return spiff.DOMElements.div({className:'tab-reconnect-sheetWidget-subtitle'},tab.Strings.SheetReconnectSubtitle(this.props.dataSourceCaption))},determineIfConnectionClassSupported:function(){var e=$.Deferred();if(ss.contains(tab.ConnectionClass.get_getSupportedFileClasses(),this.props.connectionClass)){e.resolve(this.props.connectionErrorStage==='create-protocol-failed')}tab.DataConnectionUtils.isDatabaseClassSupportedInReconnectFlow(this.props.connectionClass).done(ss.mkdel(this,function(fE){if(fE){e.resolve(tab.DeferredConnectionsCommandHandler.isBadPasswordError(this.props.errorType))}else{e.resolve(false)}}));return e.promise()},shouldRenderEditConnectionButton:function(){return tab.MiscUtil.shouldShowDataTab()&&tsConfig.is_authoring&&(this.state.isConnectionClassSupported||this.props.connectionErrorStage==='load-metadata-failed'||ss.isNullOrEmptyString(this.props.connectionClass))},shouldRenderEditingNotSupported:function(){return tab.MiscUtil.shouldShowDataTab()&&tsConfig.is_authoring&&!this.shouldRenderEditConnectionButton()},createEditConnectionButton:function(){return React.createElement(SharedWidgets.ButtonWidget,this.createEditConnectionButtonProps())},shouldShowErrorMessage:function(){return ss.isNullOrEmptyString(this.props.connectionClass)&&!ss.isNullOrEmptyString(this.props.errorMessage)},createErrorMessage:function(){return spiff.DOMElements.div({className:'tab-reconnect-error-message'},tab.Strings.SheetReconnectErrorMessage(this.props.errorMessage.trim()))},createEditConnectionButtonProps:function(){var e=function(){tab.VizClientCommands.setUIMode('data-tab','ReconnectEditConnection','')};return{handleClick:function(fE){e()},buttonType:3,testId:'SheetReconnectEditConnection',label:tab.Strings.SheetReconnectEditConnectionLabel,style:{marginTop:'18px',marginBottom:'auto',marginLeft:'auto',marginRight:'30px'}}},createPrimaryButtonProps:function(){var e=null;if(tab.FeatureFlags.isEnabled('DataToTheWebTabbedAuthReconnect')){e=ss.mkdel(this,function(){var fE=$.Deferred();tab.TabbedAuthenticationDialogCommands.showTabbedAuthenticationDialog(tab.DataConnectionUtils.getConnectionNames(this.props.connectionAttemptInfo),false,this.props.connectionAttemptInfo);var fF=function(fH,fI){fE.resolve()};var fG=function(fH,fI){fE.reject()};tab.ApplicationModel.get_instance().registerNotificationHandler('doc:tabbed-auth-dialog-closed-event',fG);tab.ApplicationModel.get_instance().registerNotificationHandler('doc:tabbed-auth-dialog-connected-event',fF);fE.done([ss.mkdel(this,function(fH){this.props.onCredentialsAdded(null)})])})}else{e=ss.mkdel(this,function(){tab.ModuleManager.load(tab.IConnectionDialogModule).call(null,[]).done(ss.mkdel(this,function(fE){fE.showSignInDialog(this.props.connectionAttributes,this.props.connectionDisplayAttributes,this.props.dataSourceCaption,this.props.connectionName,this.props.connectionTypeLabel,this.props.onCredentialsAdded,null)}))})}return{handleClick:function(fE){e()},buttonType:1,testId:'SheetReconnectSignIn',label:tab.Strings.SheetReconnectSignInLabel,style:{marginTop:'18px',marginBottom:'auto',marginLeft:'auto',marginRight:'auto'}}}},spiff.PureRenderComponent);ss.initClass(cu,a,{createEditConnectionButtonProps:function(){var e=function(){tab.VizClientCommands.setUIMode('data-tab','FileReconnect','')};return{handleClick:function(fE){e()},buttonType:3,testId:'SheetReconnectEditConnection',label:tab.Strings.SheetReconnectEditConnectionLabel,style:{marginTop:'18px',marginBottom:'auto',marginLeft:'auto',marginRight:'auto'}}},createPrimaryButtonProps:function(){var e=null;e=ss.mkdel(this,function(){tab.ModuleManager.load(tab.IConnectionDialogModule).call(null,[]).done(ss.mkdel(this,function(fE){fE.showReplaceFileDialog(this.props.connectionName,this.props.connectionClass).done(ss.mkdel(this,function(fF){if(fF&&!ss.staticEquals(this.props.onCredentialsAdded,null)){this.props.onCredentialsAdded(null)}})).fail(function(fF){e()})}))});return{handleClick:function(fE){e()},buttonType:1,testId:'FileReconnectLocateFile',label:tab.Strings.SheetReconnectLocateFileLabel,style:{marginTop:'18px',marginBottom:'auto',marginLeft:'30px',marginRight:'auto'}}}},el);ss.initClass(cv,a,{});ss.initClass(cw,a,{});ss.initClass(cx,a,{});ss.initClass(cy,a,{},spiff.Widget,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(cz,a,{show:function(){this.$1.show()},cleanup:function(e){this.$1.closeAndDispose()},dispose:function(){this.$1.dispose()},$0:function(){if(!this.get_submitted()&&!ss.staticEquals(this.onCancel,null)){this.onCancel()}}},O,[ss.IDisposable]);ss.initClass(cA,a,{createOverlay:function(e){var fE=$('.dashboardSpacer');var fF=$("<div id='auth-overlay' tabindex='0'></div>");if(tsConfig.is_authoring&&tab.MiscUtil.shouldShowDataTab()){this.$0(fF)}else{var fG=ss.mkdel(this,function(){this.set_submitted(true);if(!ss.staticEquals(this.onProceed,null)){this.onProceed()}this.cleanup(e)});var fH=new cy(this.dataSourceConnectionAttemptErrorResponse.ErrorMessage,fG);fF.append(fH.element)}fE.append(fF)},$0:function(e){var fE=ss.mkdel(this,function(fG){if(!ss.staticEquals(this.onProceed,null)){this.onProceed()}});var fF={connectionAttributes:this.$1.exceptionAttrs,connectionClass:this.dataSourceConnectionAttemptErrorResponse.ConnectionClass,connectionErrorStage:this.$1.connectionErrorStage,connectionName:this.dataSourceConnectionAttemptErrorResponse.ConnectionName,errorMessage:this.dataSourceConnectionAttemptErrorResponse.ErrorMessage,errorType:this.dataSourceConnectionAttemptErrorResponse.ErrorType,dataSourceCaption:this.dataSourceConnectionAttemptErrorResponse.DataSourceCaption,onCredentialsAdded:fE};if(ss.contains(tab.ConnectionClass.get_getSupportedFileClasses(),this.dataSourceConnectionAttemptErrorResponse.ConnectionClass)){ReactDOM.render(React.createElement(cu,fF),e.get(0))}else{ReactDOM.render(React.createElement(el,fF),e.get(0))}},show:function(){var e=new ck;var fE=ss.mkdel(this,function(){this.cleanup(e)});fB.add_zoneBecameValid(fE);e.zoneBecameValidHandler=new tab.CallOnDispose(function(){fB.remove_zoneBecameValid(fE)});this.createOverlay(e)}},N,[ss.IDisposable]);ss.initClass(dr,a,{dispose:function(){if(this.get_viewModel().get_visible()){this.$b=true;this.get_viewModel().hide();return}this.notificationViewModel.remove_shown(ss.mkdel(this,this.shown));this.notificationViewModel.remove_hidden(ss.mkdel(this,this.hidden));ss.makeGenericType(spiff.BaseView$1,[ds]).prototype.dispose.call(this)},onViewModelPropertyChanged:function(e,fE){this.updateContent()},updateContent:function(){this.messageDom.text(this.notificationViewModel.get_message())},hidden:function(){this.element.fadeOut('slow',ss.mkdel(this,this.$a))},shown:function(){this.element.css('display','none');this.element.appendTo($('body'));this.element.fadeIn('fast');this.updateContent();if(this.adjustMargin){this.element.css('margin-left','-'+this.element.outerWidth(true)/2+'px')}},$a:function(){if(this.$b){this.dispose()}else{this.element.detach()}},$9:function(e){this.get_viewModel().hide()}},ss.makeGenericType(spiff.BaseView$1,[ds]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[ds])]);ss.initClass(cB,a,{},dr,[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[ds])]);ss.initClass(cC,a,{get_keyCombos:function(){return new tab.KeyCombos(new tab.KeyCombo.$ctor4(new tab.KeyModifiers(false,true,false,false,true,false,false,false,false),191,[]),[new tab.KeyCombo.$ctor4(new tab.KeyModifiers(false,true,false,false,true,false,true,false,false),191,[]),new tab.KeyCombo.$ctor2(112,[])])},isAllowed:function(e){return true},executeShortcut:function(e){tab.WindowHelper.open(this.$0,'_blank')}},tab.GlobalKeyboardShortcut,[tab.IKeyboardShortcut]);ss.initClass(cD,a,{});ss.initEnum(cE,a,{rectangle:0,circle:1,line:2,polygon:3});ss.initClass(cZ,a,{$1:null},spiff.Template,[ss.IDisposable]);ss.initClass(cF,a,{$1:function(){this.prevButton.addClass('tabCatLegendScrollLeft');this.nextButton.addClass('tabCatLegendScrollRight')}},cZ,[ss.IDisposable]);ss.initClass(cG,a,{$1:function(){return this.domRoot.find('.message')},$2:function(){return this.domRoot.find('.path')}},spiff.Template,[ss.IDisposable]);ss.initClass(cH,a,{$2:function(){return this.domRoot.find('.message')},$1:function(){return this.domRoot.find('a')}},spiff.Template,[ss.IDisposable]);ss.initInterface(cJ,a,{},[ss.IDisposable,tab.IAppendableView,ss.makeGenericType(tab.IView$1,[D])]);ss.initInterface(cN,a,{get_filterType:null},[ss.IDisposable]);ss.initInterface(cO,a,{get_dashboardViewModel:null,get_flipboardModel:null});ss.initInterface(cP,a,{add_fontsReady:null,remove_fontsReady:null,add_fontDownloading:null,remove_fontDownloading:null,reset:null,addFonts:null,downloadFonts:null,finishDownloadingFonts:null});ss.initClass(cQ,a,{get_container:function(){return this.domRoot},get_frame:function(){return this.get_container().children().first()},setSrc:function(e,fE){if(!ss.referenceEquals(this.get_frame().prop('original_url'),fE)){this.get_frame().prop('src',e);this.get_frame().prop('original_url',fE)}}},spiff.Template,[ss.IDisposable]);ss.initInterface(cR,a,{get_type:null});ss.initClass(cS,a,{});ss.initClass(cT,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(cU,a,{get_domRoot:function(){return this.get_template().domRoot},get_image:function(){return this.$k},$i:function(){return this.get_viewModel()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(tsConfig.is_mobile&&tsConfig.is_authoring&&tsConfig.current_sheet_type==='dashboard'){this.element.addClass(spiff.ClickBuster.suppressClickBustingClass)}this.handleNewImageZone()},handleNewImageZone:function(){this.createImageZoneView()},createImageZoneView:function(){var e=ss.mkdict(['position','absolute','overflow','hidden','top','0px','left','0px','right','0px','bottom','0px']);this.get_template().domRoot.css(e);var fE=ss.isNullOrEmptyString(this.$i().get_imageZonePresModel().imageKey)&&ss.isNullOrEmptyString(this.$i().get_imageZonePresModel().image);if(fE&&tab.FeatureFlags.isEnabled('DashboardMttwImageObject')){this.$b()}else{this.$k=this.$c()}},$b:function(){var e=this.get_template().domRoot.find('.'+cU.emptyImageClass).length===0;if(!e){return}this.get_template().domRoot.empty();var fE=((!tsConfig.is_mobile&&tsConfig.is_authoring&&tsConfig.current_sheet_type==='dashboard')?tab.Strings.EmptyImageZoneMessage:'');var fF=$('<div>'+fE+'</div>').addClass(cU.emptyImageClass);this.get_template().domRoot.append(fF)},$c:function(){var e=$('<img>');var fE=ss.mkdel(this,function(){if(ss.isNullOrUndefined(this.$k)){window.setTimeout(ss.mkdel(this,function(){this.$j=e.get(0);this.$g()}),1)}else{this.$j=e.get(0);this.$g()}e.off('load')});e.on('load',fE);var fF=this.$i().get_imageUrl();if(!ss.isNullOrEmptyString(this.$i().get_imageZonePresModel().image)){fF='data:image/jpeg;base64,'+this.$i().get_imageZonePresModel().image}var fG=this.$i().get_imageZonePresModel().altText;if(tab.FeatureFlags.isEnabled('DashboardMttwImageObject')&&!ss.isNullOrEmptyString(fG)){e.attr('alt',fG)}e.css('border','none').css('display','block').attr('src',fF);return e},$9:function(e){this.get_template().domRoot.empty();this.get_template().domRoot.append(e)},$e:function(){if(ss.isNullOrEmptyString(this.$i().get_imageZonePresModel().image)&&ss.isNullOrEmptyString(this.$i().get_imageZonePresModel().imageKey)){return}this.$g()},$g:function(){var e=this.$i().get_imageZonePresModel();if(e.isScaled){this.$f()}var fE=this.$h();this.$9(fE);if(e.isCentered){this.$a(fE)}return fE},$d:function(){var e=this.$i().get_zoneModel();var fE=this.$i().get_imageZonePresModel();var fF=ff.absolutizeURI(fE.url,false);var fG=e.get_zoneCommonModel().get_zoneType()==='bitmap'&&!tab.MiscUtil.isNullOrEmpty$3(fE.imageKey)&&!tab.MiscUtil.isNullOrEmpty$3(fF);if(fG){return $('<a/>').attr('href',fF).attr('target','_blank').css(ss.mkdict(['position','absolute','outline','none']))}else{return $('<div/>')}},$h:function(){var e=this.get_image();var fE=this.$d();fE.append(e);return fE},$f:function(){var e=this.$i().get_zoneModel();var fE=this.$j['width'];var fF=this.$j['height'];if(BrowserSupport.BrowserSupport.IsIE()){fE=this.$j['naturalWidth'];fF=this.$j['naturalHeight']}var fG=0;var fH=0;var fI;if(fE/e.get_zoneCommonModel().get_contentWidth()>=fF/e.get_zoneCommonModel().get_contentHeight()){fI={width:e.get_zoneCommonModel().get_contentWidth()+'px',height:'auto'};fG=e.get_zoneCommonModel().get_contentWidth();fH=ss.Int32.trunc(e.get_zoneCommonModel().get_contentWidth()/fE*fF)}else{fI={height:e.get_zoneCommonModel().get_contentHeight()+'px',width:'auto'};fH=e.get_zoneCommonModel().get_contentHeight();fG=ss.Int32.trunc(e.get_zoneCommonModel().get_contentHeight()/fF*fE)}if(BrowserSupport.BrowserSupport.IsIE()){var fJ=window.screen['deviceXDPI'];var fK=window.screen['systemXDPI'];var fL=fJ/fK>1;if(!fL&&fG>0&&fH>0&&fG/fE<0.75&&fE<500&&fF<500){var fM=this.$k.get(0).getAttribute('src');var fN=cS.scaleImage(this.$j,fG,fH,ss.Int32.trunc(fE),ss.Int32.trunc(fF));this.$k=$(fN);this.$k.get(0).setAttribute('src',fM);fI=ss.mkdict(['width',fG+'px','height',fH+'px'])}else{this.$k=$(this.$j)}}this.$k.css(fI)},$a:function(e){var fE=this.$i().get_zoneModel();var fF=ss.Int32.div(fE.get_zoneCommonModel().get_contentHeight()-tab.DoubleUtil.roundToInt(this.get_image().height()),2);var fG=ss.Int32.div(fE.get_zoneCommonModel().get_contentWidth()-tab.DoubleUtil.roundToInt(this.get_image().width()),2);e.css(ss.mkdict(['position','absolute','top',fF.toString()+'px','left',fG.toString()+'px']))}},ss.makeGenericType(spiff.BaseView$1,[cV]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[cV])]);ss.initClass(cV,a,{add_newImageZone:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newImageZone:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_zoneModel:function(){return this.$2.get_zoneModel()},get_imageZonePresModel:function(){return this.$2.pm},get_imageUrl:function(){var e=tab.CommandController.get().legacySession;var fE=e.formatDashboardTempfileReference(this.get_imageZonePresModel().imageKey,true,false);return fE},handleNewImageZone:function(){if(ss.isValue(this.$2$1)){this.$2$1()}}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initInterface(cW,a,{get_location:null,set_location:null});ss.initInterface(cX,a,{instantiate:null,instantiateFromDomain:null,layout:null,destroy:null,setNewState:null,updateReadout:null});ss.initClass(cY,a,{get_domRoot:function(){return this.$c.domRoot},get_scrollIncrement:function(){return this.$b},set_scrollIncrement:function(e){this.$b=e},$6:function(){return(this.$9?this.$a.scrollLeft():tab.DoubleUtil.roundToInt(this.$a.scrollTop()))},$7:function(e){if(this.$9){this.$a.scrollLeft(e)}else{this.$a.scrollTop(e)}},$5:function(){if(this.$9){return this.$a.children()[0].scrollWidth-tab.DoubleUtil.roundToInt(this.$a.width())}else{return this.$a.children()[0].scrollHeight-tab.DoubleUtil.roundToInt(this.$a.height())}},reset:function(){if(this.$9){this.$a.scrollLeft(0)}else{this.$a.scrollTop(0)}this.updateButtonState()},dispose:function(){this.$c.dispose();this.$8.dispose()},$3:function(e){this.$7(Math.max(0,this.$6()-this.$b));this.updateButtonState()},$2:function(e){this.$7(Math.min(this.$5(),this.$6()+this.$b));this.updateButtonState()},updateButtonState:function(){this.$4(this.$c.prevButton,this.$1());this.$4(this.$c.nextButton,this.$0())},$1:function(){return this.$6()>0},$0:function(){return this.$6()<this.$5()},$4:function(e,fE){e.toggleClass('tabIterButtonDisabled',!fE)}},null,[ss.IDisposable]);ss.initClass(db,a,{});ss.initClass(dc,a,{render:function(){var e=this.buildCommonDialogProps();var fE=React.createElement(SharedWidgets.DialogWidget,e);return fE},closeDialog:function(){_.defer(this.props.onDialogCloseRequested)},buildCommonDialogProps:function(){var e={testId:'Dialog-Provider',isModal:true,title:this.props.title,showCloseButton:true,type:0,positioningBehavior:0,dialogStyle:{maxWidth:600},dialogWidth:this.props.dialogWidth,onCloseRequest:ss.mkdel(this,function(){this.closeDialog()}),zIndex:1000};var fE=[];var fF=spiff.DOMElements.div({children:this.$0(this.props.content),className:spiff.Widget.selectableNodeClass});fE.push(fF);var fG=this.$0(this.props.detailsContent);if(ss.isValue(this.props.additionalLinks)){for(var fH=0;fH<this.props.additionalLinks.length;fH++){var fI=this.props.additionalLinks[fH];fG.push(spiff.DOMElements.p({},spiff.DOMElements.a({href:fI.url,target:'_blank',children:fI.displayText})))}}if(!tab.MiscUtil.isNullOrEmpty$1(fG)){var fJ=spiff.DOMElements.div({style:dc.$0,children:fG,className:spiff.Widget.selectableNodeClass});fE.push(fJ)}e.children=fE;return e},$0:function(e){var fE=[];if(ss.isNullOrEmptyString(e)){return fE}var fF='<br/>';e=ss.replaceAllString(e,'<br>',fF);e=ss.replaceAllString(e,'\n',fF);var fG=e.split(fF);var fH=dc.textArea.value();for(var fI=0;fI<fG.length;fI++){var fJ=fG[fI];fH.innerHTML=fJ;var fK=spiff.DOMElements.p({children:fH.textContent});fE.push(fK)}return fE}},React.Component);ss.initClass(dd,a,{render:function(){var e=((this.props.marginOfError>0.1)?this.props.tooltipText:'');return spiff.DOMElements.div({className:'tab-MapScale',title:e,style:this.$2()},spiff.DOMElements.div({className:'tab-MapScaleOuterHalo',style:this.$0()}),spiff.DOMElements.div({className:'tab-MapScaleInnerHalo',style:this.$0()}),spiff.DOMElements.label({className:'tab-MapScaleReadout',style:this.$1()},this.props.readoutText))},$2:function(){var e=(this.props.shouldShowMapScale?'':'none');return{width:this.props.width+'px',color:this.props.readoutColor,borderColor:this.props.readoutColor,display:e}},$1:function(){var e='1px 1px 0 '+this.props.borderColor+', 1px -1px 0 '+this.props.borderColor+', -1px 1px 0 '+this.props.borderColor+', -1px -1px 0 '+this.props.borderColor;return{textShadow:e}},$0:function(){return{borderColor:this.props.borderColor}}},React.Component);ss.initClass(de,a,{createUpdatedProps:function(){var e=this.$5;if(!e.get_hasPresModel()){return de.$0}return{width:e.get_mapScaleWidth(),readoutText:e.get_mapScaleReadoutString(),readoutColor:e.get_mapScaleColor(),borderColor:e.get_mapScaleBorderColor(),shouldShowMapScale:e.get_shouldShowMapScale(),marginOfError:e.get_mapScaleMarginOfError(),tooltipText:e.get_mapScaleTooltipString()}},handleUpdatedMapScaleInfo:function(){this.incrementProps()}},ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.IDisposable,tab.IViewModel,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(df,a,{get_commands:function(){return this.$1$1},set_commands:function(e){this.$1$1=e},get_menuItem:function(){return this.$1$2},set_menuItem:function(e){this.$1$2=e},get_menuPrefix:function(){return this.$1$3},set_menuPrefix:function(e){this.$1$3=e},get_menuTextMayBeSensitive:function(){return this.$1$4},set_menuTextMayBeSensitive:function(e){this.$1$4=e}});ss.initClass(dg,a,{get_menuItemPrefix:function(){return this.$1$1},set_menuItemPrefix:function(e){this.$1$1=e},get_commandIndexInFlattenedList:function(){return this.$1$2},set_commandIndexInFlattenedList:function(e){this.$1$2=e},get_commandReadId:function(){return this.$1$3},set_commandReadId:function(e){this.$1$3=e},get_commandName:function(){return this.$1$4},set_commandName:function(e){this.$1$4=e}});ss.initEnum(dh,a,{dragDrop:'dragDrop',doubleClick:'doubleClick'},true);ss.initClass(di,a,{});ss.initClass(dj,a,{dispose:function(){$(document).off('.ModifierKeyState')},$0:function(e){dj.fireModifierKeysChanged(e)}},null,[ss.IDisposable]);ss.initClass(dk,a,{});ss.initClass(dl,a,{add_fontsReady:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_fontsReady:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},add_fontDownloading:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_fontDownloading:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},reset:function(){},addFonts:function(e){for(var fE=0;fE<e.length;fE++){var fF=e[fE];var fG=ss.mkdict(['style',fF.get_style(),'weight',fF.get_weight()]);var fH=new FontFace(fF.get_fontFamily(),fF.get_source(),fG);if(ss.keyExists(this.$2,fF.get_hash())){continue}dl.$0().add(fH);this.$2[fF.get_hash()]=fH}},downloadFonts:function(){var e=_.values(this.$2);for(var fE=0;fE<e.length;fE++){var fF=e[fE];if(fF.status==='unloaded'){this.$3.push(fF.load());this.$0()}}},finishDownloadingFonts:function(){if(this.$3.length>0){Promise.all(this.$3).then(ss.mkdel(this,this.$1))}else{this.$1()}},$1:function(){if(!ss.staticEquals(this.$1$1,null)){this.$1$1()}},$0:function(){if(!ss.staticEquals(this.$1$2,null)){this.$1$2()}}},null,[cP]);ss.initClass(dm,a,{});ss.initClass(dn,a,{});ss.initClass(dp,a,{});ss.initEnum(dq,a,{localOnly:0,needRemote:1,needRemoteForViTOnly:2});ss.initClass(ds,a,{add_shown:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_shown:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_hidden:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_hidden:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_message:function(){return this.$6},set_message:function(e){this.$6=e},get_visible:function(){return this.$7},get_autoHideTimeout:function(){return this.$4},set_autoHideTimeout:function(e){this.$4=e},get_displayPosition:function(){return this.$5},set_displayPosition:function(e){this.$5=e},show:function(){if(this.$7){return}this.$7=true;if(this.$4>0){this.$3=window.setTimeout(ss.mkdel(this,this.hide),this.$4)}this.raiseActionEvent(this.$2$1)},disposeOnHide:function(){this.add_hidden(ss.mkdel(this,this.dispose));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_hidden(ss.mkdel(this,this.dispose))})))},hide:function(){if(this.$7===false){return}this.$7=false;window.clearTimeout(this.$3);this.raiseActionEvent(this.$2$2)},$2:function(e,fE){this.hide()}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(dt,a,{get_location:function(){return{x:ss.Int32.trunc(this.$7.x),y:ss.Int32.trunc(this.$7.y)}},set_location:function(e){this.$7={x:e.x,y:e.y};this.$6()},clone:function(){return new dt(this.$8.get(0),this.element.attr('src'))},show:function(e){this.$7=e;this.$6()},hide:function(){this.element.detach()},$6:function(){if(!ss.referenceEquals(this.element.parent()[0],this.$8[0])){this.$8.append(this.element)}if(ss.isNullOrUndefined(this.$7)){return}var e=this.$7.y;var fE=this.$7.x;this.element.css(ss.mkdict(['top',e+'px','left',fE+'px']))}},spiff.Widget,[tab.IWidget,tab.IAppendableView,ss.IDisposable,cW]);ss.initClass(du,a,{buildItem:function(e){var fE=['tabPagableUserListItem'];if(ss.referenceEquals(e,this.props.activeGroup)){fE.push('active')}return spiff.DOMElements.div({className:fE.join(' '),style:{whiteSpace:'nowrap'},title:e.name},e.name)},getUniqueKey:function(e){return e.id},getEventHandleSpecForItem:function(e){return{tap:ss.mkdel(this,function(fE){this.props.onGroupSelected(e.data)})}},onScrollStop:function(e,fE){if(e.y===fE.y){this.props.fetchNextPage()}},shouldScrollbarAlwaysBeShown:function(){return true}},ss.makeGenericType(spiff.PagableListComponent$2,[Object,Object]));ss.initClass(dv,a,{buildItem:function(e){var fE=['tabPagableUserListItem'];if(ss.referenceEquals(e,this.props.activeUser)){fE.push('active')}return spiff.DOMElements.div({className:fE.join(' '),style:{whiteSpace:'nowrap'},title:e.friendlyName},e.friendlyName)},getUniqueKey:function(e){return e.id},getEventHandleSpecForItem:function(e){return{tap:ss.mkdel(this,function(fE){this.props.onUserSelected(e.data)})}},onScrollStop:function(e,fE){if(e.y===fE.y){this.props.fetchNextPage()}},shouldScrollbarAlwaysBeShown:function(){return true}},ss.makeGenericType(spiff.PagableListComponent$2,[Object,Object]));ss.initEnum(dw,a,{valid:0,invalid:1,pending:2});ss.initClass(dx,a,{getImageFile:function(){var e=$.Deferred();var fE=new cs;fE.allowedFileExtensions=['image/*'];fE.allowMulti=false;this.$2=fE;this.$1=tab.MiscUtil.dispose$1(this.$1);this.$1=ct.createFilePickerViewModel(this.$2,function(fG){dx.$0(e,fG)});var fF=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[ct,cr,Object])).call(null,[this.$1]);fF.addToDom($(document.body));return e.promise()},dispose:function(){this.$1=tab.MiscUtil.dispose$1(this.$1);this.$0.dispose()}},null,[ss.IDisposable]);ss.initClass(dy,a,{},ss.makeGenericType(spiff.BaseView$1,[dz]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[dz])]);ss.initClass(dz,a,{activate:function(){if(!ss.staticEquals(this.$2,null)){this.$2()}}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(dA,a,{handleWidgetPropertyChanged:function(e,fE){},updateWidgetState:function(e){}},ss.makeGenericType(spiff.ReactSpiffAdapter$3,[dD,dB,Object]));ss.initClass(dB,a,{});ss.initClass(dC,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(dD,a,{get_dom:function(){return this.get_template()},$d:function(){this.get_dom().moreAboutPublicSection.empty();this.get_dom().viewAndAuthorInfoSection.empty();this.$b();if(this.$e.get_shouldShowViewCount()){this.$c();if(this.$e.get_shouldShowAuthorByLine()){this.$a()}}if(this.$e.get_shouldShowAuthorByLine()){this.$9()}},$b:function(){this.get_dom().moreAboutPublicSection.attr('href',this.$e.get_publicLogoLink());this.get_dom().moreAboutPublicSection.text(tab.Strings.ToolbarLearnMoreAboutTableau)},$c:function(){var e=$('<span>').text(tab.Strings.ToolbarViewCount(this.$e.get_localizedViewCount()));this.get_dom().viewAndAuthorInfoSection.append(e)},$a:function(){var e=$('<span>');e.addClass('tab-belowPublicDivider');e.text('|');this.get_dom().viewAndAuthorInfoSection.append(e)},$9:function(){var e=$('<span>').html(this.$e.get_authorProfileLink());this.get_dom().viewAndAuthorInfoSection.append(e)},onAddedToDom:function(){this.$d();spiff.Widget.prototype.onAddedToDom.call(this)}},ss.makeGenericType(spiff.BaseView$1,[dE]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[dE])]);ss.initClass(dE,a,{add_hideDialogRequested:function(e){},remove_hideDialogRequested:function(e){},add_propsUpdated:function(e){},remove_propsUpdated:function(e){},get_viewType:function(){return dD},get_viewModel:function(){return this},get_props:function(){var e=new dB;e.viewModel=this;return{children:React.createElement(dA,e),dialogWidth:260,isGlassTransparent:false,isModal:true,positioningBehavior:0,shouldAdjustPositionOnWindowResize:!tsConfig.is_mobile,shouldRecenterOnUpdate:true,shouldReturnFocusOnClose:true,showCloseButton:true,showFooter:false,testId:'public-info',title:tab.Strings.ToolbarMoreInfo,type:0}},get_shouldShowAuthorByLine:function(){return eV.$0()&&tsConfig.show_byline},get_shouldShowViewCount:function(){return eV.$0()&&tsConfig.showViewCount&&eV.publicViewCount>tsConfig.viewCountThreshold},get_publicLogoLink:function(){var e=(ss.isValue(tabBootstrap.ViewerBootstrap.get_instance().location)?tabBootstrap.ViewerBootstrap.get_instance().location.toString():'');return tsConfig.watermarklink+'?ref='+e.split('?')[0]},get_authorProfileLink:function(){var e=window.location;var fE=ss.formatString('{0}//{1}/profile/app/rdr/repo?workbook={2}',e.protocol,e.hostname,tsConfig.workbook_repo_url);return ss.formatString('<a class="tab-toolbarAuthorByText" target="_blank" href="{0}">{1}</a>',tableau.format.escapeHTML(fE),tableau.format.escapeHTML(tab.Strings.ToolbarMoreByAuthor))},get_localizedViewCount:function(){var e=tab.ApplicationModel.get_instance().get_appPresModel().numberFormats;var fE=e[2];var fF=e[8];var fG=e[9];return tableau.format.formatIntAuto(eV.publicViewCount,fE,fF,fG)},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(e){},onDialogHidden:function(){}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel,spiff.IContent,spiff.IUberPopupContent,ss.makeGenericType(spiff.IPropsProvider$1,[Object]),spiff.IDialogContent]);ss.initClass(dH,a,{});ss.initClass(dI,a,{render:function(){var e=['tab-legacy-dropdown-container','tab-legacy-qf-bordered'].join(' ');var fE={borderColor:this.props.borderColor};return spiff.DOMElements.div({className:e,style:fE},spiff.DOMElements.div({className:'tab-legacy-dropdown-summary'},this.props.children),(!this.props.hideIcon?ss.mkdel(this,this.renderIcon)():null))},renderIcon:function(){var e={borderColor:this.props.borderColor};return spiff.DOMElements.div({className:'tab-legacy-dropdown-icon-container',style:e},spiff.DOMElements.div({className:'tab-legacy-dropdown-icon'}))}},spiff.PureRenderComponent);ss.initClass(dJ,a,{render:function(){var e=['tab-legacy-qf-readout-container','tab-legacy-qf-bordered'].join(' ');var fE={borderColor:this.props.borderColor};return spiff.DOMElements.div({className:e,style:fE},this.$1(),(!this.props.hideIcon?ss.mkdel(this,this.$0)():null))},$1:function(){var e=(ss.isNullOrEmptyString(this.props.text)?' ':this.props.text);var fE=['tab-legacy-qf-readout-text',this.props.textClass].join(' ');var fF={textDecoration:(this.props.strikethroughText?'line-through':'none')};return spiff.DOMElements.div({className:fE,style:fF},e)},$0:function(){var e=['tab-legacy-qf-readout-icon',this.props.iconClass].join(' ');return spiff.DOMElements.div({className:e})}},spiff.PureRenderComponent);ss.initClass(dK,a,{render:function(){var e={tap:ss.mkdel(this,function(fG){this.props.removeRecipientByIndex(this.props.recipientIndex)})};var fE=spiff.EventForwarder.span(e,{className:'tabUserPillRemove'},['×']);var fF=spiff.DOMElements.span({className:'tabUserPillName'},this.props.recipientName);return spiff.DOMElements.div(this.$0(),fF,fE)},$0:function(){var e='tabUserPill';if(this.props.pillStatus===1){e+=' error'}return{className:e,title:((this.props.pillStatus===0)?this.props.recipientName:this.props.errorText)}}},React.Component);ss.initClass(dL,a,{render:function(){var e=null;if(this.props.isUsers){e=_.map(this.props.users,ss.mkdel(this,function(fF,fG){return React.createElement(dK,{removeRecipientByIndex:this.props.removeRecipientByIndex,recipientIndex:fG,recipientName:fF.friendlyName,pillStatus:(ss.staticEquals(this.props.userValidator,null)?0:this.props.userValidator(fF)),errorText:(ss.staticEquals(this.props.invalidUserTextGenerator,null)?null:this.props.invalidUserTextGenerator(fF)),key:fF.id})}))}else{e=_.map(this.props.groups,ss.mkdel(this,function(fF,fG){return React.createElement(dK,{removeRecipientByIndex:this.props.removeRecipientByIndex,recipientIndex:fG,recipientName:fF.name,pillStatus:0,errorText:(ss.staticEquals(this.props.invalidGroupTextGenerator,null)?null:this.props.invalidGroupTextGenerator(fF)),key:fF.id})}))}var fE=React.createElement(SharedWidgets.OutlineTextFieldWidget,{text:this.props.searchText,handleChange:this.props.newSearch,maxLength:50,containerStyle:{minWidth:'25px',maxWidth:'100px'},inputStyle:{border:'0px'},inputRef:function(fF){if(ss.isValue(fF)){fF.focus()}},key:'input-search',testId:'subscriber-search-input'});e.push(fE);return spiff.DOMElements.div({className:'tabUserPillsComponent',onKeyDown:this.props.handleInputKeyDown,style:{overflowY:'auto'}},e)}},React.Component);ss.initClass(dM,a,{add_disposed:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_disposed:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},add_propertyChanged:function(e){this.$3$2=ss.delegateCombine(this.$3$2,e)},remove_propertyChanged:function(e){this.$3$2=ss.delegateRemove(this.$3$2,e)},createNewDefaultState:function(){return{activeItemIndex:0,moreRecipients:false,firstVisibleIndex:0,users:[],groups:[],activeUser:null,activeGroup:null}},dispose:function(){if(ss.isValue(this.$3$1)){this.$3$1(this);this.$3$1=null}this.$3$2=null;this.disposables.dispose();this.$8.dispose()},notifyPropertyChanged:function(e){if(!ss.staticEquals(this.$3$2,null)){this.$3$2(this,new tab.PropertyChangedEventArgs(e))}},$4:function(e){this.$3()},$2:function(e){this.$3()},$3:function(){var e=ReactDOM.findDOMNode(this.refs['tabUserSearchInputRef']);if(ss.isValue(e)){e.value=null}this.setState(this.createNewDefaultState());this.props.emptySearch(true)},handleInputKeyUp:function(e){var fE=e.keyCode;if(fE===40||fE===38||fE===13){return}this.$a=e.target.value;this.$8.invokeActionDelayed();if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')&&!this.props.isUsers){this.searchGroups()}else{this.searchUsers()}},handleInputKeyDown:function(e){var fE=this.state.activeItemIndex;switch(e.keyCode){case 40:{this.state.activeItemIndex=this.$5(1);if(fE!==this.state.activeItemIndex){this.updateActiveRecipient(this.state.activeItemIndex)}e.preventDefault();break}case 38:{this.state.activeItemIndex=this.$5(-1);if(fE!==this.state.activeItemIndex){this.updateActiveRecipient(this.state.activeItemIndex)}e.preventDefault();break}case 13:{if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')&&!this.props.isUsers){var fF=this.state.groups[this.state.activeItemIndex];if(ss.isValue(fF)){this.props.onGroupSelected(fF.data);this.$2(fF.data)}}else{var fG=this.state.users[this.state.activeItemIndex];if(ss.isValue(fG)){this.props.onUserSelected(fG.data);this.$4(fG.data)}}e.preventDefault();break}}},updateActiveRecipient:function(e){if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')&&!this.props.isUsers){var fE=this.state.groups[e];if(ss.isNullOrUndefined(fE)||ss.referenceEquals(this.state.activeGroup,fE.data)){this.setState(this.state);return}this.state.activeGroup=fE.data}else{var fF=this.state.users[e];if(ss.isNullOrUndefined(fF)||ss.referenceEquals(this.state.activeUser,fF.data)){this.setState(this.state);return}this.state.activeUser=fF.data}if(ss.Nullable$1.lt(e,this.state.firstVisibleIndex)){this.state.firstVisibleIndex=ss.Nullable$1.sub(this.state.firstVisibleIndex,1)}else if(ss.Nullable$1.ge(e,ss.Nullable$1.add(this.state.firstVisibleIndex,6))){this.state.firstVisibleIndex=ss.Nullable$1.add(this.state.firstVisibleIndex,1)}this.setState(this.state)},$5:function(e){var fE=this.state.activeItemIndex+e;var fF=((tab.FeatureFlags.isEnabled('BulkSubscribeOthers')&&!this.props.isUsers)?this.state.groups.length:this.state.users.length);if(fE<0||fE>=fF){return this.state.activeItemIndex}return fE},resultsAvailable:function(){this.$9=false},checkCurrentSearchHasNoResults:function(){var e=this.searchFieldIsEmpty();var fE=((tab.FeatureFlags.isEnabled('BulkSubscribeOthers')&&!this.props.isUsers)?this.state.groups.length:this.state.users.length);this.props.noResults(fE===0&&!e&&!this.$9)},searchFieldIsEmpty:function(){var e=ss.isNullOrEmptyString(ReactDOM.findDOMNode(this.refs['tabUserSearchInputRef']).value);this.props.emptySearch(e);return e},searchUsers:function(){var e=tab.WorkgroupServerCommands.fetchPageOfSiteUsers(this.$a,0);e.done(ss.mkdel(this,function(fE){this.state.users=[];this.state.firstVisibleIndex=0;this.state.activeItemIndex=0;this.$1(fE)}))},searchMoreUsers:function(){if(!this.state.moreRecipients){return}var e=tab.WorkgroupServerCommands.fetchPageOfSiteUsers(this.$a,this.state.users.length);e.done(ss.mkdel(this,this.$1))},$1:function(e){this.state.moreRecipients=e.moreItems;_.map(e.items,ss.mkdel(this,function(fE){return this.state.users.push({data:fE})}));this.updateActiveRecipient(this.state.activeItemIndex);this.resultsAvailable();this.checkCurrentSearchHasNoResults()},searchGroups:function(){var e=tab.WorkgroupServerCommands.fetchPageOfGroups(this.$a,0);e.done(ss.mkdel(this,function(fE){this.state.groups=[];this.state.firstVisibleIndex=0;this.state.activeItemIndex=0;this.$0(fE)}))},searchMoreGroups:function(){if(!this.state.moreRecipients){return}var e=tab.WorkgroupServerCommands.fetchPageOfGroups(this.$a,this.state.groups.length);e.done(ss.mkdel(this,this.$0))},$0:function(e){this.state.moreRecipients=e.moreItems;_.map(e.items,ss.mkdel(this,function(fE){return this.state.groups.push({data:fE})}));this.updateActiveRecipient(this.state.activeItemIndex);this.resultsAvailable();this.checkCurrentSearchHasNoResults()},render:function(){return spiff.DOMElements.div({className:'tabUserSearchComponent'},this.$7(),this.$6())},$7:function(){return spiff.DOMElements.input({type:'text',className:'tabUserSearchInput',placeholder:this.props.placeholderMessage,onKeyUp:ss.mkdel(this,this.handleInputKeyUp),onKeyDown:ss.mkdel(this,this.handleInputKeyDown),tabIndex:0,autoFocus:true,ref:'tabUserSearchInputRef'})},$6:function(){if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')&&!this.props.isUsers){return React.createElement(du,{startingY:ss.Nullable$1.mul(this.state.firstVisibleIndex,26),onGroupSelected:ss.delegateCombine(this.props.onGroupSelected,ss.mkdel(this,this.$2)),fetchNextPage:ss.mkdel(this,this.searchMoreUsers),items:this.state.groups,activeGroup:this.state.activeGroup})}else{return React.createElement(dv,{startingY:ss.Nullable$1.mul(this.state.firstVisibleIndex,26),onUserSelected:ss.delegateCombine(this.props.onUserSelected,ss.mkdel(this,this.$4)),fetchNextPage:ss.mkdel(this,this.searchMoreUsers),items:this.state.users,activeUser:this.state.activeUser})}}},React.Component,[ss.IDisposable]);ss.initClass(dN,a,{createNewDefaultState:function(){this.$b='';return{activeItemIndex:0,moreRecipients:false,firstVisibleIndex:0,users:[],groups:[],activeUser:null,activeGroup:null,searchText:''}},$4:function(e){this.$3()},$2:function(e){this.$3()},$3:function(){if(!this.props.isBulkSubscribe){var e=ReactDOM.findDOMNode(this.refs['tabUserSearchInputRef']);if(ss.isValue(e)){e.value=null}}this.setState(this.createNewDefaultState());this.props.emptySearch(true)},newSearch:function(e){this.setState(function(fE,fF){return{searchText:e}});this.$b=e;if(this.props.isUsers){this.searchUsers()}else{this.searchGroups()}},handleInputKeyUp:function(e){var fE=e.keyCode;if(fE===40||fE===38||fE===13||fE===27){return}this.$b=e.target.value;if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')&&!this.props.isUsers){this.searchGroups()}else{this.searchUsers()}},handleInputKeyDown:function(e){var fE=this.state.activeItemIndex;switch(e.keyCode){case 40:{this.state.activeItemIndex=this.$5(1);if(fE!==this.state.activeItemIndex){this.updateActiveRecipient(this.state.activeItemIndex)}e.preventDefault();break}case 38:{this.state.activeItemIndex=this.$5(-1);if(fE!==this.state.activeItemIndex){this.updateActiveRecipient(this.state.activeItemIndex)}e.preventDefault();break}case 13:{if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')&&!this.props.isUsers){var fF=this.state.groups[this.state.activeItemIndex];if(ss.isValue(fF)){this.props.addGroup(fF.data);this.$2(fF.data)}}else{var fG=this.state.users[this.state.activeItemIndex];if(ss.isValue(fG)){this.props.addUser(fG.data);this.$4(fG.data)}}e.preventDefault();break}}},updateActiveRecipient:function(e){if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')&&!this.props.isUsers){var fE=this.state.groups[e];if(ss.isNullOrUndefined(fE)||ss.referenceEquals(this.state.activeGroup,fE.data)){this.setState(this.state);return}this.state.activeGroup=fE.data}else{var fF=this.state.users[e];if(ss.isNullOrUndefined(fF)||ss.referenceEquals(this.state.activeUser,fF.data)){this.setState(this.state);return}this.state.activeUser=fF.data}if(ss.Nullable$1.lt(e,this.state.firstVisibleIndex)){this.state.firstVisibleIndex=ss.Nullable$1.sub(this.state.firstVisibleIndex,1)}else if(ss.Nullable$1.ge(e,ss.Nullable$1.add(this.state.firstVisibleIndex,this.numberOfRowsInViewport))){this.state.firstVisibleIndex=ss.Nullable$1.add(this.state.firstVisibleIndex,1)}this.setState(this.state)},$5:function(e){var fE=this.state.activeItemIndex+e;var fF=((tab.FeatureFlags.isEnabled('BulkSubscribeOthers')&&!this.props.isUsers)?this.state.groups.length:this.state.users.length);if(fE<0||fE>=fF){return this.state.activeItemIndex}return fE},resultsAvailable:function(){this.$a=false},checkCurrentSearchHasNoResults:function(){var e=this.searchFieldIsEmpty();var fE=((tab.FeatureFlags.isEnabled('BulkSubscribeOthers')&&!this.props.isUsers)?this.state.groups.length:this.state.users.length);this.props.noResults(fE===0&&!e&&!this.$a)},searchFieldIsEmpty:function(){var e=ss.isNullOrEmptyString(ReactDOM.findDOMNode(this.refs['tabUserSearchInputRef']).value);this.props.emptySearch(e);return e},searchUsers:function(){var e=tab.WorkgroupServerCommands.fetchPageOfSiteUsers(this.$b,0);this.$a=true;e.done(ss.mkdel(this,function(fE){this.state.users=[];this.state.firstVisibleIndex=0;this.state.activeItemIndex=0;this.$1(fE)}))},searchMoreUsers:function(){if(!this.state.moreRecipients){return}var e=tab.WorkgroupServerCommands.fetchPageOfSiteUsers(this.$b,this.state.users.length);e.done(ss.mkdel(this,this.$1))},$1:function(e){this.state.moreRecipients=e.moreItems;_.map(e.items,ss.mkdel(this,function(fE){return this.state.users.push({data:fE})}));this.updateActiveRecipient(this.state.activeItemIndex);this.resultsAvailable();if(!this.props.isBulkSubscribe){this.checkCurrentSearchHasNoResults()}},searchGroups:function(){var e=tab.WorkgroupServerCommands.fetchPageOfGroups(this.$b,0);this.$a=true;e.done(ss.mkdel(this,function(fE){this.state.groups=[];this.state.firstVisibleIndex=0;this.state.activeItemIndex=0;this.$0(fE)}))},searchMoreGroups:function(){if(!this.state.moreRecipients){return}var e=tab.WorkgroupServerCommands.fetchPageOfGroups(this.$b,this.state.groups.length);e.done(ss.mkdel(this,this.$0))},$0:function(e){this.state.moreRecipients=e.moreItems;_.map(e.items,ss.mkdel(this,function(fE){return this.state.groups.push({data:fE})}));this.updateActiveRecipient(this.state.activeItemIndex);this.resultsAvailable();if(!this.props.isBulkSubscribe){this.checkCurrentSearchHasNoResults()}},render:function(){return spiff.DOMElements.div({className:'tab-UserSearchSelectorComponent'},this.$7(),this.$8())},$7:function(){if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')&&this.props.isBulkSubscribe){return React.createElement(dL,{groups:this.props.groups,users:this.props.users,isUsers:this.props.isUsers,removeRecipientByIndex:this.props.removeRecipientByIndex,userValidator:this.props.userValidator,invalidGroupTextGenerator:this.props.groupErrorMessageGenerator,invalidUserTextGenerator:this.props.userErrorMessageGenerator,searchText:this.state.searchText,handleInputKeyDown:ss.mkdel(this,this.handleInputKeyDown),newSearch:ss.mkdel(this,this.newSearch)})}else{return React.createElement(fh,{users:this.props.users,addUser:this.props.addUser,removeUser:this.props.removeUser,userValidator:this.props.userValidator,invalidUserTextGenerator:this.props.userErrorMessageGenerator})}},$8:function(){if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')&&this.props.isBulkSubscribe){var e=spiff.DOMElements.div({className:((this.state.users.length!==0||this.state.groups.length!==0)?'has-items':'')},this.$6());return spiff.DOMElements.div({className:'results-area'},e)}else{return this.renderRecipientSearch()}},renderRecipientSearch:function(){return spiff.DOMElements.div({className:'tabUserSearchComponent'},this.$9(),this.$6())},$9:function(){return spiff.DOMElements.input({type:'text',className:'tabUserSearchInput',placeholder:this.props.placeholderMessage,onKeyUp:ss.mkdel(this,this.handleInputKeyUp),onKeyDown:ss.mkdel(this,this.handleInputKeyDown),tabIndex:0,autoFocus:true,ref:'tabUserSearchInputRef'})},$6:function(){if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')&&!this.props.isUsers){return React.createElement(du,{startingY:ss.Nullable$1.mul(this.state.firstVisibleIndex,26),onGroupSelected:ss.delegateCombine(this.props.addGroup,ss.mkdel(this,this.$2)),fetchNextPage:ss.mkdel(this,this.searchMoreUsers),items:this.state.groups,activeGroup:this.state.activeGroup})}else{return React.createElement(dv,{startingY:ss.Nullable$1.mul(this.state.firstVisibleIndex,26),onUserSelected:ss.delegateCombine(this.props.addUser,ss.mkdel(this,this.$4)),fetchNextPage:ss.mkdel(this,this.searchMoreUsers),items:this.state.users,activeUser:this.state.activeUser})}}},React.Component);ss.initClass(dO,a,{get_type:function(){return 0},get_geom:function(){return this.$0}},null,[cR]);ss.initClass(fe,a,{onValidKeyCombo:function(e){if(!tab.KeyboardShortcutManager.isTargetTextInput(e)){tab.KeyboardShortcutManager.stopPropagationAndDefault(e)}}},tab.CommandKeyboardShortcut,[tab.IKeyboardShortcut]);ss.initClass(dP,a,{get_keyCombos:function(){var e=new tab.KeyCombo.$ctor3(new tab.KeyModifiers(false,false,false,true,false,false,false,false,false),89,[]);var fE=new tab.KeyModifiers(false,false,false,true,false,false,true,false,false);var fF=new tab.KeyCombo.$ctor3(fE,90,[]);return new tab.KeyCombos(e,[fF])},get_commandId:function(){return{ns:'tabdoc',cmd:'redo'}}},fe,[tab.IKeyboardShortcut]);ss.initClass(dQ,a,{add_fontsReady:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_fontsReady:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},add_fontDownloading:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_fontDownloading:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},reset:function(){this.$2()},addFonts:function(e){for(var fE=0;fE<e.length;fE++){var fF=e[fE];if(!ss.keyExists(this.$b,fF.woffLocation)){var fG=this.$1(fF);this.$b[fF.woffLocation]=new h(fG)}var fH=this.$b[fF.woffLocation];if(!_.contains(fH.$2,fF)&&!_.contains(fH.$1,fF)){this.$b[fF.woffLocation].$2.push(fF)}}},downloadFonts:function(){this.updateMeasurementDivs()},finishDownloadingFonts:function(){this.updateMeasurementDivs();this.$7()},updateMeasurementDivs:function(){if(ss.isNullOrUndefined(this.$8)){this.$8=dQ.$0('tab-baselineFontMeasurer',["'Courier New', Monaco, monospace"]);this.$8.appendTo(document.body)}if(ss.isNullOrUndefined(this.$a)){this.$a=$('<canvas/>').css(dQ.$4).appendTo(document.body)[0];this.$9=this.$a.getContext('2d')}var e=_.values(this.$b);for(var fE=0;fE<e.length;fE++){var fF=e[fE];if(ss.isValue(fF.$3)&&!ss.referenceEquals(fF.$3[0].parentElement,document.body)){fF.$3.appendTo(document.body)}}},updateFontState:function(){var e=_.values(this.$b);for(var fE=0;fE<e.length;fE++){var fF=e[fE];if(ss.isNullOrUndefined(fF.$3)){continue}this.$9.font='100% '+fF.$0;var fG=tab.DoubleUtil.roundToInt(this.$9.measureText('The quick brown fox jumps over the lazy dog iiilllest').width);if(!dQ.$3(fF.$3,this.$8)&&fG===tab.DoubleUtil.roundToInt(fF.$3.width())){fF.$3=null}else{this.$4()}}},isDownloadingDone:function(){var e=_.values(this.$b);for(var fE=0;fE<e.length;fE++){var fF=e[fE];if(ss.isValue(fF.$3)){return false}}return true},$1:function(e){var fE="'"+e.woffLocation.substr(e.woffLocation.lastIndexOf('/')+1)+"'";var fF=new tab.DownloadableFontProperties;fF.set_fontFamily(fE);fF.woffLocation=e.woffLocation;var fG=fF;tab.StyleUtil.appendCSSRuleToStyleSheet$1('tab-renderAndCheckFontLoader','@font-face',fG.toCSSRules());var fH=dQ.$0('tab-hiddenFontMeasurer',[fG.get_fontFamily(),"'Courier New', Monaco, monospace"]);return fH},$7:function(){this.$2();var e=this.$3();if(e){return}this.$c=window.setInterval(ss.mkdel(this,function(){this.$3()}),100)},$3:function(){this.$d++;this.updateFontState();var e=this.isDownloadingDone();if(e||this.$d>1200){this.$2();this.$6();if(e){this.$0()}return true}return false},$2:function(){window.clearInterval(this.$c);this.$c=0;this.$d=0},$6:function(){if(ss.isValue(this.$8)){this.$8.remove();this.$8=null}if(ss.isValue(this.$a)){this.$9=null;this.$a.parentNode.removeChild(this.$a);this.$a=null}$('body > .tab-hiddenFontMeasurer').remove()},$4:function(){if(!ss.staticEquals(this.$1$2,null)){this.$1$2()}},$5:function(){if(!ss.staticEquals(this.$1$1,null)){this.$1$1()}},$0:function(){var e=_.values(this.$b);for(var fE=0;fE<e.length;fE++){var fF=e[fE];while(fF.$2.length>0){var fG=fF.$2.pop();fF.$1.push(fG);tab.StyleUtil.appendCSSRuleToStyleSheet$1('tab-renderAndCheckFontLoader','@font-face',fG.toCSSRules())}}this.$5()}},null,[cP]);ss.initClass(dR,a,{});ss.initClass(dS,a,{loadCommentingModule:function(){if(ss.isValue(this.$1)){return this.$1}var e=$.Deferred();this.$1=e;tab.ModuleManager.load(tab.ICommentingFactory).call(null,[]).done(ss.mkdel(this,function(fE){var fF=fE.createCommentingModuleViewModel();fF.updateForSheet(tsConfig.current_sheet_name);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){fF.disposeViewModel();this.$1=null})));e.resolve(fF)}));return this.$1},loadDataAlertsPanelModule:function(){if(ss.isValue(this.$2)){return this.$2}var e=$.Deferred();this.$2=e;tab.ModuleManager.load(tab.IDataAlertsPanelFactory).call(null,[]).done(ss.mkdel(this,function(fE){var fF=E.get_instance().get_rightAreaDrawerViewModel();var fG=fE.createDataAlertsPanelModuleViewModel(ss.mkdel(fF,fF.closeDrawer));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){fG.disposeViewModel();this.$2=null})));e.resolve(fG)}));return this.$2},loadAutomatedInsightsPanelModule:function(){if(ss.isValue(this.$0)){return this.$0}var e=$.Deferred();this.$0=e;tab.ModuleManager.load(tab.IAutomatedInsightsPanelFactory).call(null,[]).done(ss.mkdel(this,function(fE){var fF=fE.createAutomatedInsightsPanelModuleViewModel();this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){fF.disposeViewModel();this.$0=null})));e.resolve(fF)}));return this.$0},dispose:function(){this.disposables.dispose()}},null,[ss.IDisposable]);ss.initClass(dT,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(dU,a,{get_dom:function(){return this.get_template()}},ss.makeGenericType(spiff.BaseView$1,[dV]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[dV])]);ss.initClass(dV,a,{$3:function(){if(ss.isNullOrUndefined(this.$4)){this.$4=new dS;this.disposables.add$1(this.$4)}return this.$4},get_viewModel:function(){return this},get_viewType:function(){return dU},disposeViewModel:function(){this.dispose()},get_typeOfContentBeingLoaded:function(){return this.$5},loadDataAlertsModule:function(){return this.$2(tab.IDataAlertsPanelModuleViewModel).call(this,1,this.$3().loadDataAlertsPanelModule())},loadCommentingModule:function(){return this.$2(tab.ICommentingModuleViewModel).call(this,0,this.$3().loadCommentingModule())},loadAutomatedInsightsModule:function(){return this.$2(tab.IAutomatedInsightsPanelModuleViewModel).call(this,2,this.$3().loadAutomatedInsightsPanelModule())},$2:function(e){return function(fE,fF){this.$5=fE;fF.then(function(fG){E.get_instance().get_rightAreaDrawerViewModel().set_content(fG)},null);return this}}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel,spiff.IContent]);ss.initEnum(dW,a,{commenting:0,DDA:1,automatedInsights:2});ss.initClass(dX,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(dY,a,{get_dom:function(){return this.get_template()},$a:function(){this.$c();this.$b()},$9:function(){this.$b()},$d:function(){this.$c();this.$b()},$b:function(){if(tsConfig.is_authoring){this.get_dom().drawerContainer.css({position:'absolute',top:this.get_viewModel().get_drawerTopOffset()+'px',right:this.get_viewModel().get_drawerRightOffset()+'px',width:this.get_viewModel().get_drawerWidth()+'px',bottom:this.get_viewModel().get_drawerBottomOffset()+'px'})}else if(tab.FeatureFlags.isEnabled('IframeSizedToWindow')){this.get_dom().drawerContainer.css({'flex-grow':'0','flex-shrink':'0','flex-basis':this.get_viewModel().get_drawerWidth()+'px',order:'2',position:'relative'})}else{this.get_dom().drawerContainer.css({position:'absolute',top:this.get_viewModel().get_drawerTopOffset()+'px',right:this.get_viewModel().get_drawerRightOffset()+'px',width:this.get_viewModel().get_drawerWidth()+'px',height:this.get_viewModel().get_drawerHeight()+'px',visibility:'visible'})}},$c:function(){if(ss.isValue(this.get_viewModel().get_content())){this.get_dom().drawerContainer.empty();var e=tab.ObjectRegistry.newView$1(ss.makeGenericType(tab.IView$1,[tab.IViewModel])).call(null,this.get_viewModel().get_content().get_viewType(),[this.get_viewModel().get_content().get_viewModel()]);e.addToDom(this.get_dom().drawerContainer)}}},ss.makeGenericType(spiff.BaseView$1,[dZ]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[dZ])]);ss.initClass(dZ,a,{add_open:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_open:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_close:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_close:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_update:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_update:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},get_content:function(){return this.$6},set_content:function(e){this.$6=e;this.$4()},get_drawerWidth:function(){return tabBootstrap.ViewerBootstrap.get_instance().get_rightAreaDrawerWidth()},get_drawerHeight:function(){return(tab.FeatureFlags.isEnabled('IframeSizedToWindow')?H.calculateDashboardViewportBounds().h:(H.getClientBounds().h+this.$5()))},get_drawerTopOffset:function(){return(tab.FeatureFlags.isEnabled('IframeSizedToWindow')?H.calculateDashboardViewportBounds().t:(H.getClientBounds().t-this.$5()))},get_drawerRightOffset:function(){return 0},get_drawerBottomOffset:function(){return(tsConfig.is_authoring?tabBootstrap.VizLayoutConstants.get_authoringTabsHeight():0)},$5:function(){var e=0;if(tabBootstrap.VizLayoutConstants.get_shouldShowTabs()&&ss.isValue(E.get_instance().get_tabbedNavigation())){e=E.get_instance().get_tabHeight()}return e},get_isOpen:function(){return this.$2$4},set_isOpen:function(e){this.$2$4=e},openDrawer:function(){tabBootstrap.ViewerBootstrap.get_instance().set_rightAreaDrawerWidth(dZ.drawerWidthOpen);this.raiseActionEvent(this.$2$1);this.set_isOpen(true)},closeDrawer:function(){tabBootstrap.ViewerBootstrap.get_instance().set_rightAreaDrawerWidth(dZ.drawerWidthClosed);if(ss.isValue(this.get_content())){this.get_content().disposeViewModel();this.set_content(null)}this.raiseActionEvent(this.$2$2);this.set_isOpen(false)},$3:function(e){return function(){return ss.isValue(this.get_content())&&ss.isInstanceOfType(this.get_content().get_viewModel(),e)}},$2:function(e){return function(fE){if(!this.get_isOpen()){return 0}if(this.$3(e).call(this)){return 1}if(this.$3(dV).call(this)&&this.get_content().get_viewModel().get_typeOfContentBeingLoaded()===fE){return 1}return 2}},$4:function(){if(this.get_isOpen()){this.raiseActionEvent(this.$2$3)}},toggleCommenting:function(){this.togglePanel(tab.ICommentingModuleViewModel).call(this,0,function(){return(new dV).loadCommentingModule()})},toggleDataAlertsPanel:function(){this.togglePanel(tab.IDataAlertsPanelModuleViewModel).call(this,1,function(){return(new dV).loadDataAlertsModule()})},toggleInsightsPanel:function(){this.togglePanel(tab.IAutomatedInsightsPanelModuleViewModel).call(this,2,function(){return(new dV).loadAutomatedInsightsModule()})},togglePanel:function(e){return function(fE,fF){switch(this.$2(e).call(this,fE)){case 0:{this.openDrawer();this.set_content(fF());break}case 1:{this.closeDrawer();break}case 2:{this.get_content().disposeViewModel();this.set_content(fF());break}default:{return}}}}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initEnum(ea,a,{OPEN:0,CLOSE:1,REPLACE:2});ss.initClass(eb,a,{});ss.initEnum(ec,a,{dragEnd:0,markTap:1,other:2});ss.initClass(ed,a,{add_fontPreparationComplete:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_fontPreparationComplete:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},get_fontsLoadedPromise:function(){return this.$4},initialize:function(e){this.$5.reset();this.$8=false;this.$4=$.Deferred();if(e){this.$3=bf.get_instance().hold(1)}},registerServerLoadedFonts:function(e){for(var fE=0;fE<e.length;fE++){var fF=e[fE];var fG=fF.get_hash();if(!ss.keyExists(this.$6,fG)){this.$6[fG]=fF}}},notifyDownloadableFont:function(e){if(this.$8){return}var fE=[];for(var fF=0;fF<e.length;fF++){var fG=e[fF];var fH=fG.get_hash();if(ss.keyExists(this.$6,fH)){fE.push(this.$6[fH])}}if(ss.isValue(fE)&&fE.length>0){this.$5.addFonts(fE)}},downloadFonts:function(){var e=tabBootstrap.MetricsController.createContext('DownloadFonts',128,null);try{this.$5.downloadFonts()}finally{if(ss.isValue(e)){e.dispose()}}},allFontsFound:function(){this.$8=true;this.$5.finishDownloadingFonts()},$0:function(){this.$7=true},$1:function(){cv.logFontsLoaded();if(this.$7){this.$2();this.$7=false}if(ss.isValue(this.$3)){this.$3.dispose()}this.$4.resolve()},$2:function(){tab.WindowHelper.requestAnimationFrame(ss.mkdel(this,function(){tab.WindowHelper.setTimeout(ss.mkdel(this,function(){if(!ss.staticEquals(this.$1$1,null)){this.$1$1()}}),200)}))}});ss.initClass(ee,a,{$2:function(e){switch(e){case'NOT_ATTEMPTED':case'FULL':case'PARTIAL':case'ORIGINAL':case'UNKNOWN_ERROR':{ds.showNotification(tab.Strings.SessionRecoveryWarning);break}default:{break}}}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(ef,a,{handleWidgetPropertyChanged:function(e,fE){},updateWidgetState:function(e){}},ss.makeGenericType(spiff.ReactSpiffAdapter$3,[ej,eg,Object]));ss.initClass(eg,a,{});ss.initClass(eh,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(ei,a,{add_originalViewSelected:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_originalViewSelected:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},createUpdatedProps:function(){return{selectedToggle:this.$6,leftToggleText:tab.Strings.ToolbarCurrentView,rightToggleText:tab.Strings.ToolbarOriginalView,handleLeftToggleSelected:ss.mkdel(this,function(){this.$5(false)}),handleRightToggleSelected:ss.mkdel(this,function(){this.$5(true)}),testId:'ShareToggleButton',ariaLabel:tab.Strings.ShareViewOptions}},$5:function(e){this.$6=(e?1:0);this.incrementProps();this.raiseActionEvent$1(Boolean).call(this,this.$3$1,e)}},ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.IDisposable,tab.IViewModel,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ej,a,{get_dom:function(){return this.get_template()},$a:function(){var e=$("\n            <div class='tab-shareLinkSection'>\n                <label>\n                    <span class='tab-shareLinkTitle tab-shareTitle'/>\n                    <span class='tab-shareLinkInput'/>\n                </label>\n                <div class='tab-shareLinkButtons'/>\n            </div>");var fE=$("\n            <div class='tab-shareEmbedSection'>\n                <label>\n                    <span class='tab-shareEmbedTitle tab-shareTitle'/>\n                    <span class='tab-shareEmbedInput'/>\n                </label>\n            </div>");if(this.$j.get_allowSharingDifferentViews()){if(tab.FeatureFlags.isEnabled('AccessibilityViewingToolbar')){this.get_dom().shareArea.append($("\n            <div class='tab-shareViewStateSection'>\n            </div>"))}else{this.get_dom().shareArea.append($("\n            <div class='tab-shareViewStateSection ff-AccessibilityViewingToolbarOff'>\n                <span class='tab-shareCurrentView tab-shareViewToggle'/><span class='tab-shareOriginalView tab-shareViewToggle'/>\n            </div>"))}this.get_dom().shareStateArea=this.get_dom().getElementBySelector('.tab-shareViewStateSection');if(!tab.FeatureFlags.isEnabled('AccessibilityViewingToolbar')){this.get_dom().shareCurrentView=this.get_dom().getElementBySelector('.tab-shareCurrentView');this.get_dom().shareOriginalView=this.get_dom().getElementBySelector('.tab-shareOriginalView')}}this.get_dom().shareArea.append(fE);this.get_dom().shareArea.append(e);this.get_dom().shareLinkSection=this.get_dom().getElementBySelector('.tab-shareLinkSection');this.get_dom().shareLinkTitle=this.get_dom().getElementBySelector('.tab-shareLinkTitle');this.get_dom().shareLinkButtons=this.get_dom().getElementBySelector('.tab-shareLinkButtons');this.get_dom().shareLinkInput=this.$c().get_inputElement();this.get_dom().getElementBySelector('.tab-shareLinkInput').replaceWith(this.get_dom().shareLinkInput);this.get_dom().shareEmbedTitle=this.get_dom().getElementBySelector('.tab-shareEmbedTitle');this.get_dom().shareEmbedInput=this.$c().get_inputElement();this.get_dom().getElementBySelector('.tab-shareEmbedInput').replaceWith(this.get_dom().shareEmbedInput);if(!tsConfig.is_mobile){this.get_dom().shareLinkInput.click(ss.mkdel(this,function(fK){this.get_dom().shareLinkInput.focus();this.get_dom().shareLinkInput.select()}));this.get_dom().shareEmbedInput.click(ss.mkdel(this,function(fK){this.get_dom().shareEmbedInput.focus();this.get_dom().shareEmbedInput.select()}))}this.get_dom().shareLinkButtons.empty();if(this.$j.get_shouldShowSocialShareOptions()){var fF=new spiff.IconButton;fF.addClass('tab-shareIconButton');fF.addClass('tab-shareSocialMail');this.$9(fF.element,tab.Strings.ShareDialogEmailLink);fF.setIcon('tab-shareMailIcon');fF.onClick(ss.mkdel(this,function(fK){this.$j.doSendEmailAction()}));this.get_dom().shareLinkButtons.append(fF.element);var fG=new spiff.IconButton;fG.addClass('tab-shareIconButton');fG.addClass('tab-shareSocialTwitter');this.$9(fG.element,tab.Strings.ShareDialogTwitterLink);fG.onClick(ss.mkdel(this,function(fK){this.$j.doTwitterShareAction()}));this.get_dom().shareLinkButtons.append(fG.element);var fH=new spiff.IconButton;fH.addClass('tab-shareIconButton');fH.addClass('tab-shareSocialFacebook');this.$9(fH.element,tab.Strings.ShareDialogFacebookLink);fH.onClick(ss.mkdel(this,function(fK){this.$j.doFacebookShareAction()}));this.get_dom().shareLinkButtons.append(fH.element)}else if(tab.FeatureFlags.isEnabled('AccessibilityViewingToolbar')){var fI=$('<span/>').appendTo(this.get_dom().shareLinkButtons);this.$h=this.$b();ReactDOM.render(this.$h,fI.get(0))}else{var fJ=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this.$j,this.$j.doSendEmailAction),tab.Strings.ShareDialogEmailLink,null,0,null);this.get_dom().shareLinkButtons.append(fJ.element)}},$9:function(e,fE){if(tab.FeatureFlags.isEnabled('AccessibilityViewingToolbar')){e.attr('tabindex','0');e.attr('title',fE);e.attr('role','link')}},$b:function(){var e=React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(fF){this.$j.doSendEmailAction()}),buttonType:5,testId:'EmailButton',label:tab.Strings.ShareDialogEmailLink});var fE=React.createElement(SharedWidgets.InlineBlock,{children:e});return fE},$f:function(){this.get_dom().shareLinkTitle.html(this.$j.get_linkLabel());this.get_dom().shareEmbedTitle.html(this.$j.get_embedLabel());if(tab.FeatureFlags.isEnabled('AccessibilityViewingToolbar')){if(this.$j.get_allowSharingDifferentViews()){this.$l=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[ei,SharedWidgets.ToggleTextWidget,Object])).call(null,[this.$j.shareToggleButtonViewModel]);this.$l.addToDom(this.get_dom().shareStateArea)}this.$j.set_shouldShareOriginalView(false)}else{this.$d()}this.$g()},$d:function(){if(!this.$j.get_allowSharingDifferentViews()){return}var e;var fE;if(this.$i){var fF=$("<input type='radio' name='state' checked>"+this.$j.get_currentViewLabel()+'</input>');this.get_dom().shareCurrentView.append(fF);this.get_dom().shareCurrentView.addClass('narrow');var fG=$("<input type='radio' name='state'>"+this.$j.get_originalViewLabel()+'</input>');this.get_dom().shareOriginalView.append(fG);this.get_dom().shareOriginalView.addClass('narrow');this.get_dom().shareStateArea.height(tab.DoubleUtil.roundToInt(this.get_dom().shareStateArea.height())+15);e=new spiff.ToggleButton(fF);fE=new spiff.ToggleButton(fG);this.get_dom().shareStateArea.addClass('narrow')}else{this.get_dom().shareCurrentView.html(this.$j.get_currentViewLabel());this.get_dom().shareOriginalView.html(this.$j.get_originalViewLabel());e=new spiff.ToggleButton(this.get_dom().shareCurrentView);fE=new spiff.ToggleButton(this.get_dom().shareOriginalView)}var fH=new spiff.SelectableGroup;fH.addItem(e);fH.addItem(fE);fH.selectItem(e);this.$j.set_shouldShareOriginalView(false);fE.add_propertyChanged(ss.mkdel(this,this.$e));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){fE.remove_propertyChanged(ss.mkdel(this,this.$e))})));this.disposables.add$1(fH)},$e:function(e,fE){if(fE.get_propertyName()==='selected'){this.$j.set_shouldShareOriginalView(e.get_selected());this.$g()}},$g:function(){var e=this.$j.generateShareBaseUrl();if(ss.isNullOrEmptyString(e)){this.get_dom().shareLinkSection.hide()}else{var fE=this.$j.generateShareUrl();this.get_dom().shareLinkInput.val(fE);this.get_dom().shareLinkSection.show()}this.$j.generateEmbedCode().always(ss.mkdel(this,function(fF){this.get_dom().shareEmbedInput.val(fF)}))},onAddedToDom:function(){this.$f();spiff.Widget.prototype.onAddedToDom.call(this)},$c:function(){var e=spiff.TextInputView.newTextInputView('','',null,!tsConfig.is_mobile);e.get_inputElement().addClass('tab-shareInput');return e}},ss.makeGenericType(spiff.BaseView$1,[ek]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[ek])]);ss.initClass(ek,a,{add_hideDialogRequested:function(e){},remove_hideDialogRequested:function(e){},add_propsUpdated:function(e){},remove_propsUpdated:function(e){},add_selectedViewChanged:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_selectedViewChanged:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_viewType:function(){return ej},get_viewModel:function(){return this},get_props:function(){var e=new eg;e.viewModel=this;return{children:React.createElement(ef,e),dialogWidth:260,isGlassTransparent:false,isModal:true,positioningBehavior:0,shouldAdjustPositionOnWindowResize:!tsConfig.is_mobile,shouldRecenterOnUpdate:true,shouldReturnFocusOnClose:true,showCloseButton:true,showFooter:false,testId:'share',title:tab.Strings.ToolbarShare,type:0}},get_allowSharingDifferentViews:function(){if(!eV.$0()||!tsConfig.statefulURL){return false}if(this.$a()){return true}return tab.ApplicationModel.get_instance().get_workbook().get_isCurrentDashboardModified()},get_shouldShareOriginalView:function(){return this.$b},set_shouldShareOriginalView:function(e){this.$b=e},get_shouldShowSocialShareOptions:function(){return eV.$0()},get_linkLabel:function(){return tab.Strings.ToolbarSendTitle},get_embedLabel:function(){return tab.Strings.ToolbarEmbedTitle},get_currentViewLabel:function(){return tab.Strings.ToolbarCurrentView},get_originalViewLabel:function(){return tab.Strings.ToolbarOriginalView},$a:function(){return!tab.MiscUtil.isNullOrEmpty$3(tsConfig.guid)},disposeViewModel:function(){this.dispose()},saveSharedView:function(){if(!this.get_allowSharingDifferentViews()){return}tab.XhrUtil.guid=null;if(tsConfig.statefulURL){var e=this.$6();if(e==='null'||ss.isNullOrUndefined(e)){e=''}tab.CommandController.get().legacySession.saveSharedView('',e,function(){})}},$9:function(e){this.set_shouldShareOriginalView(e);this.raiseActionEvent(this.$2$1)},generateShareUrl:function(){var e=this.generateShareBaseUrl();e=ek.$3(e,tsConfig.toolbarvis,tsConfig.toolbarvisDefault,'toolbar');e=ek.$3(e,tabBootstrap.VizLayoutConstants.get_shouldShowTabs(),tsConfig.showTabsDefault,'tabs');e=ek.$3(e,eV.$0()&&tsConfig.showViewCount,tsConfig.showViewCountDefault,'display_count');e=ek.$3(e,false,false,'size');e=ek.$3(e,false,false,'commentingEnabled');e=ek.$3(e,false,false,'isVizPortal');e=ek.$3(e,tab.MiscUtil.sanatizeBoolean(tsConfig.showVizHome),true,'showVizHome');return e},generateShareBaseUrl:function(){var e=tsConfig.requestURI;if(!this.get_shouldShareOriginalView()&&this.get_allowSharingDifferentViews()){var fE=tab.XhrUtil.guid;var fF=window.location;var fG=(tsConfig.forceHttpsForPublicEmbed?'https:':fF.protocol);var fH=fG+'//'+fF.hostname+ek.currentViewPath;if(!tab.MiscUtil.isNullOrEmpty$3(fE)){e=fH+fE}else if(!tab.MiscUtil.isNullOrEmpty$3(tsConfig.guid)){e=fH+tsConfig.guid}}return e},generateApiBasedEmbedCode:function(){var e=tab.VizUriModel.createForCurrentWindowLocation();var fE=tableau.util.parseUri(e.get_absoluteUri());var fF=ek.$6(fE);var fG=this.$3(this.$7());var fH=tableau.format.escapeHTML(ek.$4());var fI;var fJ=tab.ModelUtils.findContentDashboard();if(fJ.get_isDashboard()&&fJ.get_deviceLayouts().length>0){fI=ek.$0()}else{var fK=tab.DashboardClientCommands.getCurrentSheetSizeConstraints().pipe(function(fL){return ek.$1(fL,0.75)},function(fL){return''});fI=fK}return fI.pipe(ss.mkdel(this,function(fL){return this.$2(fF,fG,fH,fL)}),function(fL){return''})},$3:function(e){var fE='';if(!tab.MiscUtil.isNullOrEmpty$3(e)){var fF=tableau.format.escapeHTML;var fG=ss.coalesce(this.$6(),'#');fE="<noscript><a href='"+fF(fG)+"'>"+"<img alt='"+fF(tsConfig.embeddedTitle)+" ' src='"+fF(e)+"' style='border: none' /></a></noscript>"}return fE},$2:function(e,fE,fF,fG){var fH="\n                <script type='text/javascript'>\n                    var divElement = document.getElementById('{0}');\n                    var vizElement = divElement.getElementsByTagName('object')[0];\n                    {1}\n                    var scriptElement = document.createElement('script');\n                    scriptElement.src = '{2}';\n                    vizElement.parentNode.insertBefore(scriptElement, vizElement);\n                </script>";var fI=ss.formatString(fH,fF,fG,e);var fJ=window.location;var fK=this.$8(fJ,this.$7(),'');var fL=ss.formatString("<div class='tableauPlaceholder' id='{0}' style='position: relative'>{1}{2}</div>",fF,fE,fK);return fL+fI},generateEmbedCode:function(){if(tab.FeatureFlags.isEnabled('APIBasedEmbedCode')){return this.generateApiBasedEmbedCode()}var e=$.Deferred();var fE=window.location;var fF=tableau.format.escapeHTML;var fG=this.$6();var fH=tsConfig.embeddedTitle;var fI=this.$7();var fJ=this.$4();var fK=ek.$8(fE);var fL="width='"+fJ.w+"' height='"+fJ.h+"'";var fM=this.$8(fE,fI,fL);var fN=ss.coalesce(fG,'#');var fO='';if(!tab.MiscUtil.isNullOrEmpty$3(fI)){fO="<noscript><a href='"+fF(fN)+"'>"+"<img alt='"+fF(fH)+" ' src='"+fF(fI)+"' style='border: none' /></a></noscript>"}var fP=ss.formatString("<div class='tableauPlaceholder' style='width: {0}px; height: {1}px;'>{2}{3}</div>",fJ.w,fJ.h,fO,fM);var fQ=fK+fP;return e.resolve(fQ).promise()},$8:function(e,fE,fF){var fG=tabBootstrap.ViewerBootstrap.get_instance().location.search;var fH=tsConfig.repositoryUrl;var fI=tsConfig.site_root;var fJ=tableau.format.escapeHTML;var fK="<object class='tableauViz' "+fF+" style='display:none;'>";var fL=ss.arrayClone(ek.$d);fL.push('embed');fL.push('show_tabs');fL.push('loadOrderID');var fM=(tsConfig.forceHttpsForPublicEmbed?'https:':e.protocol);fK+="<param name='host_url' value='"+fJ(encodeURIComponent(fM+'//'+e.host+'/'))+"' /> ";fL.push('host_url');fK+="<param name='embed_code_version' value='"+this.embedCodeVersion+"' /> ";fL.push('embed_code_version');if(!this.get_allowSharingDifferentViews()){fK+="<param name='site_root' value='"+fJ(fI)+"' />";fK+="<param name='name' value='"+fJ(fH)+"' />";fL.push('site_root');fL.push('name');fK+="<param name='tabs' value='"+(tabBootstrap.VizLayoutConstants.get_shouldShowTabs()?'yes':'no')+"' />";fL.push('tabs')}else{var fN=this.generateShareBaseUrl();fK+="<param name='path' value='"+fJ(ss.replaceAllString(fN,fM+'//'+e.hostname+'/',''))+"' /> ";fL.push('path')}fK+="<param name='toolbar' value='"+(tsConfig.toolbarvis?'yes':'no')+"' />";fL.push('toolbar');if(eV.$0()){if(!tab.MiscUtil.isNullOrEmpty$3(fE)){var fO=ss.replaceAllString(fE,'_rss.png','.png');fK+="<param name='static_image' value='"+fJ(fO)+"' /> "}fK+="<param name='animate_transition' value='yes' />";fK+="<param name='display_static_image' value='yes' />";fK+="<param name='display_spinner' value='yes' />";fK+="<param name='display_overlay' value='yes' />";fK+="<param name='display_count' value='yes' />";fL.push('animate_transition');fL.push('display_static_image');fL.push('display_spinner');fL.push('display_overlay');fL.push('display_count')}if(fG.length>0){var fP=fG.substr(1).split('&');for(var fQ=0;fQ<fP.length;fQ++){var fR=fP[fQ].match(new RegExp('^(:|%3A)([^=]+)=(.+)'));var fS;var fT;if(ss.isValue(fR)&&fR.length===4){fS=fR[2];fT=fR[3]}else{fS='filter';fT=fP[fQ]}if(!tab.MiscUtil.isNullOrEmpty$3(fS)&&!ss.contains(fL,fS)){fK+="<param name='"+fJ(fS)+"' value='"+fJ(fT)+"' />"}}}fK+='</object>';return fK},updateUberPopupViewModel:function(e){},onDialogHidden:function(){},doSendEmailAction:function(){er.mailTo(this.generateShareUrl(),tsConfig.shareDescription)},doFacebookShareAction:function(){er.facebookPopup(tsConfig.facebookAppID,this.generateShareUrl(),this.$5(),tsConfig.shareDescription,tsConfig.facebookDescription,ek.$7())},doTwitterShareAction:function(){er.twitterPopup(this.generateShareUrl(),tsConfig.shareDescription)},$7:function(){var e=tab.XhrUtil.guid;var fE=tsConfig.staticImage;if(!ss.isValue(fE)){return''}if(!this.get_shouldShareOriginalView()&&this.get_allowSharingDifferentViews()&&ss.isValue(e)){var fF=fE.indexOf('/images/')+8;var fG=fE.substr(0,fF);fE=fG+e.substr(0,2)+'/'+e+'/1_rss.png'}if(tsConfig.forceHttpsForPublicEmbed&&!ss.startsWithString(fE,'https')){fE.replace('http','https')}return fE},$6:function(){if(!ss.isNullOrEmptyString(tsConfig.primaryContentUrl)){return tsConfig.primaryContentUrl}if(ss.referenceEquals(window.self,window.top)){return null}var e=tableau.util.parseUri(document.referrer);if(!ss.isValue(e)||ss.isValue(e['hostname'])&&ss.referenceEquals(e['hostname'],window.location.hostname)){return null}return document.referrer},$4:function(){var e=tab.ApplicationModel.get_instance().get_workbook().get_outerDashboardSize().w;var fE=tab.ApplicationModel.get_instance().get_workbook().get_outerDashboardSize().h;fE+=ek.$5();return{w:e,h:fE}},$5:function(){var e=tab.XhrUtil.guid;if(!this.get_shouldShareOriginalView()&&this.get_allowSharingDifferentViews()&&ss.isValue(e)){var fE=this.$7();var fF=fE.split(String.fromCharCode(47));fF[fF.length-1]='thumb.png';var fG=fF.join('/');fG+='?vizqlid='+tab.CommandController.get().legacySession.get_id();return fG}return tsConfig.baseViewThumbLink}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel,spiff.IContent,spiff.IUberPopupContent,ss.makeGenericType(spiff.IPropsProvider$1,[Object]),spiff.IDialogContent]);ss.initClass(em,a,{},ss.EventArgs);ss.initClass(en,a,{},em);ss.initClass(eo,a,{render:function(){var e=this.buildCommonDialogProps();var fE=React.createElement(SharedWidgets.DialogWidget,e);return fE},closeDialog:function(){_.defer(this.props.onDialogCloseRequested)},buildCommonDialogProps:function(){var e={testId:'Dialog-Provider',isModal:true,title:this.props.title,showCloseButton:true,type:0,positioningBehavior:0,dialogStyle:{maxWidth:600},dialogWidth:this.props.dialogWidth,onCloseRequest:ss.mkdel(this,function(){this.closeDialog()}),zIndex:1000};var fE=[];var fF=spiff.DOMElements.div({children:this.$2(this.props.content),className:spiff.Widget.selectableNodeClass});fE.push(fF);if(!ss.isNullOrEmptyString(this.props.detailsContent)){var fG={isExpanded:this.state.detailsAreExpanded,onExpand:ss.mkdel(this,function(){var fL=new ep;fL.detailsAreExpanded=true;this.setState(fL)}),onCollapse:ss.mkdel(this,function(){var fL=new ep;fL.detailsAreExpanded=false;this.setState(fL)}),direction:1,testId:'Dialog-Provider-Details'};var fH=(this.state.detailsAreExpanded?this.props.hideDetailsLabel:this.props.showDetailsLabel);fG.label=(ss.isValue(fH)?fH:'');var fI=React.createElement(SharedWidgets.ExpandoWidget,fG,[spiff.DOMElements.div({children:this.$2(this.props.detailsContent),className:spiff.Widget.selectableNodeClass})]);fE.push(fI)}if(ss.isValue(this.props.additionalLinks)){for(var fJ=0;fJ<this.props.additionalLinks.length;fJ++){var fK=this.props.additionalLinks[fJ];fE.push(spiff.DOMElements.p({},spiff.DOMElements.a({href:fK.url,target:'_blank',children:fK.displayText})))}}e.children=fE;this.$1(e);return e},$2:function(e){if(ss.isNullOrEmptyString(e)){return null}var fE='<br/>';e=ss.replaceAllString(e,'<br>',fE);e=ss.replaceAllString(e,'\n',fE);var fF=e.split(fE);var fG=[];var fH=eo.textArea.value();for(var fI=0;fI<fF.length;fI++){var fJ=fF[fI];fH.innerHTML=fJ;var fK=spiff.DOMElements.p({children:fH.textContent});fG.push(fK)}return fG},$1:function(e){var fE={buttons:[],testId:'DialogButtons'};if(ss.isValue(this.props.dialogButtons)){for(var fF=0;fF<this.props.dialogButtons.length;fF++){var fG=this.props.dialogButtons[fF];this.$0(fG,fE)}}if(fE.buttons.length>0){var fH=React.createElement(SharedWidgets.DialogFooterButtonsWidget,fE);e.footerContent=fH;e.showFooter=true}},$0:function(e,fE){var fF={handleClick:ss.mkdel(this,function(fG){if(!ss.staticEquals(e.buttonClickHandler,null)){e.buttonClickHandler()}this.closeDialog()}),buttonType:e.buttonType,testId:e.testId,label:e.buttonText};fE.buttons.push(fF)}},React.Component);ss.initClass(ep,a,{});ss.initClass(eq,a,{add_onMouseStop:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_onMouseStop:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},attach:function(){this.$9.add_showed(ss.mkdel(this,this.$3));this.$9.add_closed(ss.mkdel(this,this.$2));this.$9.add_disposed(ss.mkdel(this,this.$4))},detach:function(){this.$5.dispose();if(ss.isValue(this.$9)){this.$9.remove_showed(ss.mkdel(this,this.$3));this.$9.remove_closed(ss.mkdel(this,this.$2));this.$9.remove_disposed(ss.mkdel(this,this.$4))}},dispose:function(){this.detach()},disposeTooltip:function(){this.dispose()},shownTooltipIsSticky:function(){return false},isHoverAllowed:function(e){return true},shouldShowCommandButtons:function(){return false},handleUbertipMenuToggle:function(e){},handleUbertipMenuClose:function(){},hoverOverObject:function(e,fE,fF,fG){if(fF){this.$9.close()}else if(ss.isValue(fG)&&fG&&this.$9.get_isShown()){this.$9.move(e)}else{this.showTooltip(e)}},hoverOverWhitespace:function(e){if(this.$9.get_isShown()){this.$9.close()}},multiSelectComplete:function(e){this.showTooltip(e)},singleSelectComplete:function(e){this.showTooltip(e)},selectionMoved:function(e){},repositionWithinRegion:function(e){},onPanningOrDragging:function(){if(this.$9.get_isShown()){this.$9.close()}},onScroll:function(){if(this.$9.get_isShown()){this.$9.close()}},mouseDown:function(e,fE){},showTooltip:function(e){if(spiff.DragDropManager.get_isDragging()){return}if(this.$9.get_isShown()&&tab.PointUtil.equals(this.$9.get_location(),e)){return}this.$9.show(this.$9.get_body().children()[0],e)},$3:function(){this.$0();this.$1({x:this.$9.get_calculatedShownArgs().origX,y:this.$9.get_calculatedShownArgs().origY});this.$8=new Date},$2:function(){this.$9.element.off('.SmoothTooltipBehavior');this.$8=null;this.$0()},onMouseMove:function(e){var fE=$.fn.getTouchEvent(e);var fF=spiff.NormalizedEvent.create(fE,e.target,null);var fG=fF.touches[0];var fH=this.$9.get_lastLocation()||{x:0,y:0};var fI={x:fG.pageX,y:fG.pageY};this.$9.set_lastLocation(fI);this.$9.move(fI);var fJ=tab.PointUtil.distance(fH,this.$9.get_lastLocation());if(fJ>0){this.$7=tab.MiscUtil.clearTimeout(this.$7);this.$1(fI);if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var fK=ss.Int32.trunc(tab.DomUtil.getPageOffset$1($(e.target)).left);var fL=ss.Int32.trunc(tab.DomUtil.getPageOffset$1($(e.target)).top);if(!ss.isValue(this.serverMarkBounds)||!tab.RectXYUtil.inRect(this.serverMarkBounds,{x:fG.pageX-fK,y:fG.pageY-fL})){this.$9.close()}}}},$1:function(e){this.$7=tab.MiscUtil.clearTimeout(this.$7);this.$7=window.setTimeout(ss.mkdel(this,function(){if(ss.isValue(this.$1$1)){this.$1$1(e)}}),this.$6)},$4:function(e,fE){this.dispose()},$0:function(){this.$7=tab.MiscUtil.clearTimeout(this.$7)}},null,[da,ss.IDisposable]);ss.initClass(er,a,{});ss.initClass(es,a,{componentWillReceiveProps:function(e){if(ss.isValue(e.selfServiceSchedulesModule)&&ss.isNullOrUndefined(this.state.recurrenceModel)){this.setState({recurrenceModel:e.selfServiceSchedulesModule.get_defaultRecurrence()})}},handleIncludeSelection:function(e){this.setState(function(fE,fF){return _.extend({},fE,{includeValue:e})})},handleScheduleSelection:function(e){this.setState(function(fE,fF){return _.extend({},fE,{scheduleValue:e})})},$3:function(e){var fE=((e.length===0)?'':e[0].friendlyName);this.setState(ss.mkdel(this,function(fF,fG){return _.extend({},fF,{mode:0,users:e,usersText:this.$0(e.length,fE,tab.Strings.ToolbarSubscribeAddUsersPlaceholder)})}))},$1:function(e){var fE=((e.length===0)?'':e[0].name);this.setState(ss.mkdel(this,function(fF,fG){return _.extend({},fF,{mode:0,groups:e,groupsText:this.$0(e.length,fE,tab.Strings.ToolbarSubscribeAddGroupsPlaceholder)})}))},$0:function(e,fE,fF){var fG=new ss.StringBuilder;if(e>0){fG.append(fE);if(e>1){fG.append(' + ');fG.append(e-1)}}else{fG.append(fF)}return fG.toString()},$2:function(e){this.setState(function(fE,fF){return _.extend({},fE,{sendOnlyWhenDataPresent:e})})},isSubscribeEnabled:function(){if(!this.props.isSelfServiceSchedulesEnabled&&(ss.isNullOrUndefined(this.props.schedules)||this.props.schedules.length===0)){return false}if(ss.isNullOrUndefined(this.state.subject)||this.state.subject.trim().length===0){return false}if(ss.isNullOrEmptyString(this.state.email)||!this.props.emailIsValid(this.state.email)){return false}if(tsConfig.allow_subscribe_others){return this.state.users.length>0||this.state.groups.length>0||this.state.selfSubscribe}else{return true}},$4:function(){if(ss.isNullOrEmptyString(this.props.email)){var e=function(fF){};var fE=ss.mkdel(this,function(){this.props.setEmail(this.state.email);this.$k()});tab.WorkgroupServerCommands.setUserEmail(this.state.email,fE,e)}else{this.$k()}},$k:function(){var e=(!tab.MiscUtil.isNullOrEmpty$3(this.state.message)?this.state.message:null);var fE=this.state.selfSubscribe;if(this.props.isSelfServiceSchedulesEnabled){this.props.createSubscriptionsWithSelfServiceSchedule(this.state.subject,this.state.includeValue==='1',this.state.recurrenceModel,fE,e,this.state.users,this.state.groups,this.state.sendOnlyWhenDataPresent)}else{this.props.createSubscriptions(this.state.subject,this.state.includeValue==='1',parseInt(this.state.scheduleValue),fE,e,this.state.users,this.state.groups,this.state.sendOnlyWhenDataPresent)}},render:function(){return spiff.DOMElements.div({className:'tab-subscribeView',style:{padding:'0px'}},this.$8())},$8:function(){switch(this.state.mode){case 0:{return this.$c()}case 1:{return this.$e()}case 2:{return this.$5(true)}case 3:{return this.$5(false)}default:{return this.$c()}}},$c:function(){return spiff.DOMElements.div({className:''},(tsConfig.allow_subscribe_others?this.$j():null),(tsConfig.allow_subscribe_others?this.$a():null),this.$b(),this.$g(),(ss.isNullOrEmptyString(this.props.email)?this.renderEmail():null),this.$i(),this.$f(),(this.props.sendOnlyWhenDataPresentCheckboxVisible?this.$9():null),(this.props.isSelfSubscribeCheckboxEnabled?this.$h():null),(tsConfig.is_mobile?null:this.$d()),this.$6())},$h:function(){return React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{checked:this.state.selfSubscribe,label:tab.Strings.SubscribeSelf,handleChange:ss.mkdel(this,function(e){this.setState({selfSubscribe:e})}),testId:'self-subscribe-checkbox',removeLeftMargin:true,containerStyle:{marginTop:SharedWidgets.TabStyles.Spacing.DefaultSpace,marginBottom:SharedWidgets.TabStyles.Spacing.MediumSpace}})},$g:function(){if(this.props.isSelfServiceSchedulesEnabled){if(ss.isNullOrUndefined(this.props.selfServiceSchedulesModule)||ss.isNullOrUndefined(this.state.recurrenceModel)){return null}var e={testId:'subscription-schedule-label',style:{fontSize:SharedWidgets.TabStyles.Typography.Sizing.Small,lineHeight:'19px'}};var fE=React.createElement(SharedWidgets.InputLabelWidget,e,tab.Strings.ToolbarSubscribeSchedule);var fF={};fF.recurrenceModel=this.state.recurrenceModel;var fG={};fG.timeZonesEnabled=tab.FeatureFlags.isEnabled('UserTimeZone');fG.timeZoneDisplayName=tsConfig.userTimeZoneDisplayName;fG.linkToUserSettings=this.props.userSettingsPageUrl;fF.timeZoneDetails=fG;fF.recurrenceModelChangedCallback=ss.mkdel(this,function(fL){this.setState({recurrenceModel:fL})});var fH=React.createElement(this.props.selfServiceSchedulesModule.get_selfServiceSchedulePaneComponent(),fF);return spiff.DOMElements.div({className:'tab-subscribeSchedule dropdown',style:{marginTop:SharedWidgets.TabStyles.Spacing.MediumSpace,marginBottom:SharedWidgets.TabStyles.Spacing.DefaultSpace}},fE,fH)}else{var fI=ss.mkdel(this,function(fL){this.handleScheduleSelection(fL)});var fJ=2;var fK=React.createElement(SharedWidgets.DropdownWidget,{dropdownType:1,containerStyle:{color:SharedWidgets.TabStyles.Typography.Color.PrimaryLight},label:tab.Strings.ToolbarSubscribeSchedule,menuItemInfos:this.props.schedules,onSelect:fI,selectedValue:this.state.scheduleValue,testId:'subscribe-schedule-dropdown',maxHeight:10*SharedWidgets.TabStyles.Sizing.ListRowHeight+2*SharedWidgets.TabStyles.Spacing.DefaultSpace+fJ});return spiff.DOMElements.div({className:'tab-subscribeSchedule ff-BulkSubscribeOthers dropdown',style:{marginTop:SharedWidgets.TabStyles.Spacing.MediumSpace,marginBottom:SharedWidgets.TabStyles.Spacing.DefaultSpace}},fK)}},$j:function(){var e=ss.mkdel(this,function(){this.setState(function(fF,fG){return _.extend({},fF,{mode:2})})});var fE=this.$7(e,tab.Strings.ToolbarSubscribeAddUsersLabel,this.state.usersText,'subscribe-users-input');return spiff.DOMElements.div({className:'tab-subscribeUsers',onClick:function(fF){e()}},fE)},$a:function(){var e=ss.mkdel(this,function(){this.setState(function(fF,fG){return _.extend({},fF,{mode:3})})});var fE=this.$7(e,tab.Strings.ToolbarSubscribeAddGroupsLabel,this.state.groupsText,'subscribe-groups-input');return spiff.DOMElements.div({className:'tab-subscribeGroups',onClick:function(fF){e()}},fE)},$b:function(){var e=[{value:'0',displayValue:tab.Strings.ToolbarSubscribeThisView},{value:'1',displayValue:tab.Strings.ToolbarSubscribeAllView}];var fE=ss.mkdel(this,function(fG){this.handleIncludeSelection(fG)});var fF=React.createElement(SharedWidgets.DropdownWidget,{dropdownType:1,label:tab.Strings.ToolbarSubscribeInclude,menuItemInfos:ss.arrayClone(e),onSelect:fE,selectedValue:this.state.includeValue,testId:'subscribe-include-dropdown'});return spiff.DOMElements.div({className:'tab-subscribeViews ff-BulkSubscribeOthers dropdown',style:{marginTop:SharedWidgets.TabStyles.Spacing.DefaultSpace,marginBottom:SharedWidgets.TabStyles.Spacing.MediumSpace}},fF)},renderEmail:function(){var e=React.createElement(SharedWidgets.LineTextFieldWidget,{handleChange:ss.mkdel(this,function(fE){this.setState({email:fE})}),text:this.state.email,maxLength:ey.maxSubscriptionEmailLength,floatingLabel:tab.Strings.ToolbarSubscribeEmailPlaceholder,floatingLabelStyle:{color:SharedWidgets.TabStyles.Typography.Color.Primary,display:'inline'},inputStyle:{color:SharedWidgets.TabStyles.Typography.Color.PrimaryLight},testId:'subscribe-email-input',handleEnter:function(){}});return spiff.DOMElements.div({className:'tab-subscribeEmail ff-BulkSubscribeOthersTextField'},e)},$i:function(){var e=React.createElement(SharedWidgets.LineTextFieldWidget,{handleChange:ss.mkdel(this,function(fE){this.setState(function(fF,fG){return _.extend({},fF,{subject:fE})})}),text:this.state.subject,floatingLabel:tab.Strings.ToolbarSubscribeSubjectPlaceholder,floatingLabelStyle:{color:SharedWidgets.TabStyles.Typography.Color.Primary,display:'inline'},inputStyle:{color:SharedWidgets.TabStyles.Typography.Color.PrimaryLight},testId:'subscribe-subject-text',handleEnter:function(){}});return spiff.DOMElements.div({className:'tab-subscribeSubject ff-BulkSubscribeOthersTextField'},e)},$f:function(){var e=ss.mkdel(this,function(){this.setState(function(fG,fH){return _.extend({},fG,{mode:1})})});var fE=(tab.MiscUtil.isNullOrEmpty$3(this.state.message)?tab.Strings.ToolbarSubscribeMessagePlaceholder:this.state.message);fE=ss.replaceAllString(fE,'\n',' ');var fF=this.$7(e,tab.Strings.ToolbarSubscribeMessageLabel,fE,'subscribe-message-input');return spiff.DOMElements.div({className:'tab-subscribeMessage',onClick:function(fG){e()}},fF)},$7:function(e,fE,fF,fG){return spiff.DOMElements.div({className:'ff-BulkSubscribeOthersTextField'},React.createElement(SharedWidgets.LineTextFieldWidget,{handleChange:function(fH){},text:fF,floatingLabel:fE,testId:fG,readOnly:true,hideErrorDiv:true,handleEnter:e,shouldSelectTextOnFocus:false,floatingLabelStyle:{color:SharedWidgets.TabStyles.Typography.Color.Primary,display:'inline'},inputStyle:{color:SharedWidgets.TabStyles.Typography.Color.Disabled,fontStyle:'italic',textOverflow:'ellipsis'}}))},$5:function(e){var fE=r.$ctor();fE.users=ss.arrayClone(this.state.users);fE.groups=ss.arrayClone(this.state.groups);fE.isUsers=e;fE.cancelSelection=ss.mkdel(this,function(){this.setState(function(fF,fG){return _.extend({},fF,{mode:0})})});fE.confirmSelection=function(){};fE.confirmUsersSelection=ss.mkdel(this,function(fF){this.$3(fF)});fE.confirmGroupsSelection=ss.mkdel(this,function(fF){this.$1(fF)});return React.createElement(p,fE)},$e:function(){return React.createElement(eA,{message:this.state.message,onCancelButtonClick:ss.mkdel(this,function(){this.setState(function(e,fE){return _.extend({},e,{mode:0})})}),onDoneButtonClick:ss.mkdel(this,function(e){this.setState(function(fE,fF){return _.extend({},fE,{mode:0,message:e})})})})},$9:function(){return React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{checked:this.state.sendOnlyWhenDataPresent,label:tab.Strings.ToolbarSubscribeDataPresentCheckbox,handleChange:ss.mkdel(this,function(e){this.$2(e)}),testId:'send-when-data-checkbox',disabled:this.state.includeValue==='1',removeLeftMargin:true,containerStyle:{marginTop:SharedWidgets.TabStyles.Spacing.DefaultSpace,marginBottom:SharedWidgets.TabStyles.Spacing.MediumSpace}})},$d:function(){return spiff.DOMElements.a({className:'tab-manageSubscribers',href:this.props.subscriptionsPageUrl,target:'_tab',style:{color:SharedWidgets.TabStyles.Colors.ServerBlue,textDecoration:'none',marginTop:SharedWidgets.TabStyles.Spacing.DefaultSpace,marginBottom:SharedWidgets.TabStyles.Spacing.MediumSpace}},tab.Strings.ManageSubscriptions)},$6:function(){var e=!this.isSubscribeEnabled();return spiff.DOMElements.div({className:'tabSubscribeButtonContainer'},React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(fE){this.props.onCancel()}),buttonType:3,testId:'subscription-dialog-cancel',label:tab.Strings.SubscribeCancel,style:{marginRight:12}}),React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(fE){this.$4()}),buttonType:2,testId:'subscription-dialog-subscribe',label:tab.Strings.ToolbarSubscribeSubmitButton,disabled:e}))}},React.Component);ss.initClass(et,a,{fetchAsyncDependencies:function(){return(this.props.isSelfServiceSchedulesEnabled?tab.ModuleManager.load(tab.ISelfServiceSchedulesModule).call(null,[]):$.when.apply(null,null))},renderWhileWaiting:function(){return this.$3(this.props)},renderWithDependencies:function(e){var fE=this.props;if(ss.isValue(e)){fE=_.clone(this.props);fE.selfServiceSchedulesModule=e}return this.$3(fE)},$3:function(e){return React.createElement(es,e)}},ss.makeGenericType(dF,[tab.ISelfServiceSchedulesModule,ev,Object]));ss.initClass(eu,a,{handleWidgetPropertyChanged:function(e,fE){},updateWidgetState:function(e){}},ss.makeGenericType(spiff.ReactSpiffAdapter$3,[ex,ew,Object]));ss.initClass(ev,a,{});ss.initClass(ew,a,{});ss.initClass(ex,a,{get_dom:function(){return this.get_template()},dispose:function(){this.$E.remove_schedulesChanged(ss.mkdel(this,this.handleSchedulesUpdated));this.$E.remove_usersChanged(ss.mkdel(this,this.$m));this.$E.remove_groupsChanged(ss.mkdel(this,this.$k));this.$E.remove_addSubscribersPopupStateChanged(ss.mkdel(this,this.$w));ss.makeGenericType(spiff.BaseView$1,[ey]).prototype.dispose.call(this)},handleSchedulesUpdated:function(){this.$c();this.$w()},$j:function(){var e=new spiff.ToggleButton(this.get_dom().subscribeThisView);var fE=new spiff.ToggleButton(this.get_dom().subscribeAllViews);this.get_dom().subscribeThisView[0].tabIndex=0;this.get_dom().subscribeAllViews[0].tabIndex=0;this.get_dom().subscribeViewsToggleLabel.text(tab.Strings.SubscribeViewsToggleLabel);this.get_dom().subscribeThisView.text(tab.Strings.ToolbarSubscribeThisView);this.get_dom().subscribeAllViews.text(tab.Strings.ToolbarSubscribeAllView);var fF=new spiff.SelectableGroup;fF.addItem(e);fF.addItem(fE);fF.selectItem(e);this.$E.set_shouldSubscribeAllViews(false);fE.add_propertyChanged(ss.mkdel(this,this.$v));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){fE.remove_propertyChanged(ss.mkdel(this,this.$v))})));this.disposables.add$1(fF)},$c:function(){this.get_dom().subscribeScheduleDropdown.empty();if(tab.FeatureFlags.isEnabled('SelfServiceSchedules')&&tsConfig.self_service_schedules_enabled){tab.ModuleManager.load(tab.ISelfServiceSchedulesModule).call(null,[]).done(ss.mkdel(this,function(fE){this.$q(fE.get_defaultRecurrence())}))}else{this.$z=this.get_viewModel().generateScheduleViewModel();this.$z.set_theme(3);this.$z.set_menuTheme(this.menuTheme);var e=tab.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.$z]);e.element[0].tabIndex=0;this.get_dom().subscribeScheduleDropdown.append($('<label>').text(tab.Strings.ToolbarSubscribeSchedule));this.get_dom().subscribeScheduleDropdown.append(e.element);this.disposables.add$1(this.$z)}},$q:function(e){var fE={};this.$y=fE.recurrenceModel=e;var fF={};fF.timeZonesEnabled=tab.FeatureFlags.isEnabled('UserTimeZone');fF.timeZoneDisplayName=tsConfig.userTimeZoneDisplayName;fF.linkToUserSettings=this.get_viewModel().get_userSettingsPageUrl();fE.timeZoneDetails=fF;fE.recurrenceModelChangedCallback=ss.mkdel(this,this.$q);ReactDOM.render(React.createElement(SelfServiceSchedules.SelfServiceSchedulePane,fE),this.get_dom().subscribeScheduleDropdown.get(0))},$b:function(){this.get_viewModel().set_sendOnlyWhenDataPresentCheckboxSelected(false);this.$A=spiff.LabelToggleButton.newCheckbox(tab.Strings.ToolbarSubscribeDataPresentCheckbox,false);this.$A.addClass(ex.get_sendOnlyWhenDataPresentCheckboxClass());this.$A.add_click(ss.mkdel(this,this.$s));this.$A.element.insertAfter(this.get_dom().subscribeScheduleDropdown);this.get_viewModel().add_sendOnlyWhenDataPresentCheckboxStateChanged(ss.mkdel(this,this.$t));this.disposables.add$1(this.$A)},$s:function(){this.get_viewModel().set_sendOnlyWhenDataPresentCheckboxSelected(this.$A.get_selected())},$t:function(){this.$A.set_disabled(!this.get_viewModel().get_sendOnlyWhenDataPresentCheckboxEnabled());this.$A.set_selected(this.get_viewModel().get_sendOnlyWhenDataPresent())},$d:function(){if(!ss.isNullOrEmptyString(this.get_viewModel().get_email())){this.get_dom().subscribeEmail.hide()}else{if(ss.isValue(this.$x)){this.$x.remove_propertyChanged(ss.mkdel(this,this.$n));this.$x.remove_enterKeyPressed(ss.mkdel(this,this.$o))}this.$x=spiff.TextInputView.newTextInputView('',null,tab.Strings.ToolbarSubscribeEmailPlaceholder,false);this.$x.get_inputElement().attr('maxlength',ey.maxSubscriptionEmailLength.toString());this.$x.add_propertyChanged(ss.mkdel(this,this.$n));this.$x.add_enterKeyPressed(ss.mkdel(this,this.$o));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$x.remove_propertyChanged(ss.mkdel(this,this.$n))})));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$x.remove_enterKeyPressed(ss.mkdel(this,this.$o))})));this.get_dom().subscribeEmail.append(this.$x.element)}},$f:function(){if(ss.isValue(this.$B)){this.$B.remove_propertyChanged(ss.mkdel(this,this.$n));this.$B.remove_enterKeyPressed(ss.mkdel(this,this.$o))}this.$B=spiff.TextInputView.newTextInputView(this.get_viewModel().get_defaultSubject(),null,tab.Strings.ToolbarSubscribeSubjectPlaceholder,false);this.$B.get_inputElement().attr('maxlength',ey.maxSubscriptionSubjectLength.toString());this.$B.add_propertyChanged(ss.mkdel(this,this.$n));this.$B.add_enterKeyPressed(ss.mkdel(this,this.$o));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$B.remove_propertyChanged(ss.mkdel(this,this.$n))})));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$B.remove_enterKeyPressed(ss.mkdel(this,this.$o))})));this.get_dom().subscribeSubject.append(this.$B.element)},$e:function(){var e=(tab.MiscUtil.isNullOrEmpty$3(this.get_viewModel().get_message())?tab.Strings.ToolbarSubscribeMessagePlaceholder:this.get_viewModel().get_message());this.$a(ss.mkdel(this,function(fE){this.get_viewModel().showMessageEditor()}),this.get_dom().subscribeMessage.get(0),tab.Strings.ToolbarSubscribeMessageLabel,e,'subscribe-message-input')},$o:function(){if(!this.$C.get_disabled()){this.$r()}},$n:function(e,fE){if(ss.equalsT(fE.get_propertyName(),'text')){this.$w()}},$g:function(){this.$C=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$r),tab.Strings.ToolbarSubscribeSubmitButton,null,0,0);this.get_dom().subscribeButton.append(this.$C.element)},isSubscribingSelf:function(){var e=true;if(tsConfig.allow_subscribe_others){if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')){e=false}else{e=ss.isNullOrUndefined(this.$D)||this.$D.get_selected()}}return e},$w:function(){var e=!this.get_viewModel().shouldSubscribeButtonBeEnabled((ss.isValue(this.$x)?this.$x.get_text():null),this.$B.get_text(),this.isSubscribingSelf());if(this.$C.get_disabled()!==e){var fE=(e?tab.Strings.ToolbarSubscribeSubmitDisabledTitle:'');this.$C.set_hoverTooltipText(fE);this.$C.set_disabled(e)}},$h:function(){if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')){this.$m();this.$k()}else{this.$D=spiff.LabelToggleButton.newCheckbox(tab.Strings.SubscribeSelf,true);this.$D.addClass('tab-subscribeSelf');this.$D.add_click(ss.mkdel(this,this.$w));this.$D.element[0].tabIndex=0;this.get_dom().subscribeSelfArea.append(this.$D.element);this.disposables.add$1(this.$D);var e=spiff.LabelButton.newAnchorButton();e.set_label(tab.Strings.AddSubscribers);e.add_click(ss.mkdel(this,function(){this.get_viewModel().createAddSubscribersPopup(this.get_dom().subscribeSelfArea,true)}));e.addClass('tab-addSubscribers');this.get_dom().addSubscribersLabel.text(tab.Strings.SubscribeOthers);e.element.insertAfter(this.get_dom().addSubscribersLabel);this.disposables.add$1(e);this.$m()}if(!tsConfig.is_mobile){var fE=spiff.LabelButton.newAnchorButton$1(this.get_viewModel().get_subscriptionsPageUrl(),null);fE.set_label(tab.Strings.ManageSubscriptions);fE.addClass('tab-manageSubscribers');this.get_dom().manageSubscribersLabel.text(tab.Strings.CurrentSubscribers);fE.element.insertAfter(this.get_dom().manageSubscribersLabel);this.disposables.add$1(fE)}},$a:function(e,fE,fF,fG,fH){ReactDOM.render(React.createElement(SharedWidgets.LineTextFieldWidget,{handleChange:function(fI){},text:fG,floatingLabel:fF,testId:fH,readOnly:true,hideErrorDiv:true,shouldSelectTextOnFocus:false,floatingLabelStyle:{color:SharedWidgets.TabStyles.Typography.Color.Primary},inputStyle:{color:SharedWidgets.TabStyles.Typography.Color.Disabled,fontStyle:'italic'}}),fE);fE.onclick=e},$m:function(){var e=this.get_viewModel().get_users();var fE=((e.length===0)?'':e[0].friendlyName);this.$l(true,e.length,fE,tab.Strings.ToolbarSubscribeAddUsersPlaceholder,tab.Strings.ToolbarSubscribeAddUsersLabel,'addUsersLineTextField')},$k:function(){var e=this.get_viewModel().get_groups();var fE=((e.length===0)?'':e[0].name);this.$l(false,e.length,fE,tab.Strings.ToolbarSubscribeAddGroupsPlaceholder,tab.Strings.ToolbarSubscribeAddGroupsLabel,'addGroupsLineTextField')},$l:function(e,fE,fF,fG,fH,fI){var fJ=new ss.StringBuilder;if(fE>0){fJ.append(fF);if(fE>1){fJ.append(' + ');fJ.append(fE-1)}fJ.append(', ')}if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')){var fK;if(e){fJ.append(fG);fK=this.get_dom().addUsersPlaceholder}else{fJ.append(fG);fK=this.get_dom().addGroupsPlaceholder}this.$a(ss.mkdel(this,function(fL){this.get_viewModel().createAddSubscribersPopup(this.get_dom().subscribeSelfArea,e)}),fK.get(0),fH,fJ.toString(),fI)}else{fJ.append(tab.Strings.AddSubscribers);this.get_dom().getElementBySelector('.tab-addSubscribers').text(fJ.toString())}},$u:function(){var e=this.isSubscribingSelf();var fE=(!tab.MiscUtil.isNullOrEmpty$3(this.get_viewModel().get_message())?this.get_viewModel().get_message():null);if(tab.FeatureFlags.isEnabled('SelfServiceSchedules')&&tsConfig.self_service_schedules_enabled){this.get_viewModel().createSubscriptionsWithSelfServiceSchedule(this.$B.get_text(),this.$y,e,fE)}else{this.get_viewModel().createSubscriptions(this.$B.get_text(),this.$z.get_selectedItem().get_data(),e,fE)}},$r:function(){if(ss.isNullOrEmptyString(this.get_viewModel().get_email())){var e=this.$x.get_text();var fE=ss.mkdel(this,function(fG){var fH=((fG===10011)?tab.Strings.SubscribeInvalidAddress:tab.Strings.SubscribeFailure);this.get_dom().subscribeEmail.append($('<div>').addClass('tab-SubscribeError').text(fH))});var fF=ss.mkdel(this,function(){this.get_viewModel().set_email(e);this.$u()});tab.WorkgroupServerCommands.setUserEmail(e,fF,fE)}else{this.$u()}},$v:function(e,fE){if(fE.get_propertyName()==='selected'){this.$E.set_shouldSubscribeAllViews(e.get_selected())}},$9:function(){this.get_dom().addMainDialogContent();this.$f();this.$e();this.$c();if(this.get_viewModel().get_sendOnlyWhenDataPresentCheckboxVisible()){this.$b()}this.$j();this.$d();this.$g();if(tsConfig.allow_subscribe_others){this.$h()}this.$w();this.$B.get_inputElement().attr('autofocus','true');this.get_viewModel().add_modeChanged(ss.mkdel(this,this.$p));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_modeChanged(ss.mkdel(this,this.$p))})))},$p:function(e,fE){switch(this.get_viewModel().get_mode()){case 0:{this.get_dom().subscribeViewArea.empty();this.$9();break}case 1:{this.get_dom().subscribeViewArea.empty();var fF=React.createElement(eA,this.$i());ReactDOM.render(fF,this.get_dom().subscribeViewArea.get(0));break}}},$i:function(){return{message:this.get_viewModel().get_message(),onCancelButtonClick:ss.mkdel(this,function(){this.get_viewModel().showMainDialog()}),onDoneButtonClick:ss.mkdel(this,function(e){this.get_viewModel().set_message(e);this.get_viewModel().showMainDialog()})}}},ss.makeGenericType(spiff.BaseView$1,[ey]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[ey])]);ss.initClass(ey,a,{add_schedulesChanged:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_schedulesChanged:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},add_subscribeSuccess:function(e){this.$3$2=ss.delegateCombine(this.$3$2,e)},remove_subscribeSuccess:function(e){this.$3$2=ss.delegateRemove(this.$3$2,e)},add_subscribeCancel:function(e){this.$3$3=ss.delegateCombine(this.$3$3,e)},remove_subscribeCancel:function(e){this.$3$3=ss.delegateRemove(this.$3$3,e)},add_usersChanged:function(e){this.$3$4=ss.delegateCombine(this.$3$4,e)},remove_usersChanged:function(e){this.$3$4=ss.delegateRemove(this.$3$4,e)},add_groupsChanged:function(e){this.$3$5=ss.delegateCombine(this.$3$5,e)},remove_groupsChanged:function(e){this.$3$5=ss.delegateRemove(this.$3$5,e)},add_sendOnlyWhenDataPresentCheckboxStateChanged:function(e){this.$3$6=ss.delegateCombine(this.$3$6,e)},remove_sendOnlyWhenDataPresentCheckboxStateChanged:function(e){this.$3$6=ss.delegateRemove(this.$3$6,e)},add_addSubscribersPopupStateChanged:function(e){this.$3$7=ss.delegateCombine(this.$3$7,e)},remove_addSubscribersPopupStateChanged:function(e){this.$3$7=ss.delegateRemove(this.$3$7,e)},add_hideDialogRequested:function(e){this.add_subscribeSuccess(e);this.add_subscribeCancel(e)},remove_hideDialogRequested:function(e){this.remove_subscribeSuccess(e);this.remove_subscribeCancel(e)},add_dialogHidden:function(e){this.$3$8=ss.delegateCombine(this.$3$8,e)},remove_dialogHidden:function(e){this.$3$8=ss.delegateRemove(this.$3$8,e)},add_modeChanged:function(e){this.$3$9=ss.delegateCombine(this.$3$9,e)},remove_modeChanged:function(e){this.$3$9=ss.delegateRemove(this.$3$9,e)},get_shouldShowReactDialog:function(){return tab.FeatureFlags.isEnabled('BulkSubscribeOthers')},get_mode:function(){return this.$c},get_schedules:function(){return this.$d},get_viewType:function(){return ex},get_viewModel:function(){return this},get_subscribeProps:function(){this.createAddSubscribersViewModel(true);var e=new ev;e.addSubscribersComponentProps=this.addSubscribersViewModel.get_props();e.users=this.get_users();e.groups=this.get_groups();e.email=this.get_email();e.emailIsValid=ss.mkdel(this,this.$7);e.schedules=this.generateSchedules();e.defaultSubject=this.get_defaultSubject();e.onCancel=this.$3$3;e.createSubscriptions=ss.mkdel(this,function(fE,fF,fG,fH,fI,fJ,fK,fL){this.setDataAndCreateSubscriptions(fE,fF,fG,fH,fI,fJ,fK,fL)});e.createSubscriptionsWithSelfServiceSchedule=ss.mkdel(this,function(fE,fF,fG,fH,fI,fJ,fK,fL){this.setDataAndCreateSubscriptionsSelfService(fE,fF,fG,fH,fI,fJ,fK,fL)});e.setEmail=ss.mkdel(this,function(fE){this.set_email(fE)});e.subscriptionsPageUrl=this.get_subscriptionsPageUrl();e.userSettingsPageUrl=this.get_userSettingsPageUrl();e.sendOnlyWhenDataPresentCheckboxVisible=this.get_sendOnlyWhenDataPresentCheckboxVisible();e.isSelfSubscribeCheckboxEnabled=tsConfig.allow_subscribe_others;e.isSelfServiceSchedulesEnabled=ey.isSelfServiceSchedulesEnabled();return e},get_shouldSubscribeAllViews:function(){return this.$e},set_shouldSubscribeAllViews:function(e){this.$e=e;if(ss.staticEquals(this.$3$6,null)){return}this.$3$6()},get_sendOnlyWhenDataPresentCheckboxEnabled:function(){return!this.$e},get_sendOnlyWhenDataPresentCheckboxSelected:function(){return this.$3$10},set_sendOnlyWhenDataPresentCheckboxSelected:function(e){this.$3$10=e},get_sendOnlyWhenDataPresentCheckboxVisible:function(){if(!tsConfig.allow_subscribe_on_data_present){return false}return tsConfig.current_sheet_type==='dashboard'||tsConfig.current_sheet_type==='worksheet'},get_defaultSubject:function(){return tsConfig.current_sheet_name},get_email:function(){return this.$3$11},set_email:function(e){this.$3$11=e},get_message:function(){return this.$3$12},set_message:function(e){this.$3$12=e},get_subscriptionsPageUrl:function(){return this.$3$13},set_subscriptionsPageUrl:function(e){this.$3$13=e},get_userSettingsPageUrl:function(){return this.$3$14},set_userSettingsPageUrl:function(e){this.$3$14=e},get_users:function(){return this.$f},set_users:function(e){this.$f=e;this.raiseActionEvent(this.$3$4)},get_groups:function(){return this.$b},set_groups:function(e){this.$b=e;this.raiseActionEvent(this.$3$5)},get_sendOnlyWhenDataPresent:function(){return this.get_sendOnlyWhenDataPresentCheckboxSelected()&&!this.get_shouldSubscribeAllViews()},$a:function(){return(this.get_sendOnlyWhenDataPresent()?'DataPresent':'Always')},createUpdatedProps:function(){var e;if(this.get_shouldShowReactDialog()){this.createAddSubscribersViewModel(true);e=React.createElement(et,this.get_subscribeProps())}else{var fE=new ew;fE.viewModel=this;e=React.createElement(eu,fE)}return{children:e,dialogWidth:400,isGlassTransparent:false,isModal:true,positioningBehavior:0,shouldAdjustPositionOnWindowResize:!tsConfig.is_mobile,shouldRecenterOnUpdate:true,shouldReturnFocusOnClose:true,showCloseButton:!this.get_shouldShowReactDialog(),showFooter:false,testId:'subscribe',title:tab.Strings.SubscribeTitle,type:0}},disposeViewModel:function(){this.set_users([]);this.set_groups([]);this.dispose()},updateUberPopupViewModel:function(e){},onDialogHidden:function(){this.set_users([]);this.set_groups([]);this.raiseActionEvent(this.$3$8);this.set_message(null)},createAddSubscribersViewModel:function(e){if(ss.isValue(this.addSubscribersViewModel)){this.addSubscribersViewModel.originalGroups=this.get_groups();this.addSubscribersViewModel.originalUsers=this.get_users();this.addSubscribersViewModel.groups=this.get_groups();this.addSubscribersViewModel.users=this.get_users();this.addSubscribersViewModel.isUsers=e;this.addSubscribersViewModel.updateProps();return}var fE=new s(this.get_users(),this.get_groups(),e);this.addSubscribersViewModel=fE},createAddSubscribersPopup:function(e,fE){if(ss.isValue(this.addSubscribersViewModel)){this.addSubscribersViewModel.originalGroups=this.get_groups();this.addSubscribersViewModel.originalUsers=this.get_users();this.addSubscribersViewModel.groups=this.get_groups();this.addSubscribersViewModel.users=this.get_users();this.addSubscribersViewModel.isUsers=fE;this.addSubscribersViewModel.updateProps();return}var fF=new s(this.get_users(),this.get_groups(),fE);this.addSubscribersViewModel=fF;var fG=spiff.UberPopupViewModel.createForContent$1(this.addSubscribersViewModel,e,ss.mkdel(this,this.$6),true);if(tab.FeatureFlags.isEnabled('ViewingToolbarModalDialog')||tsConfig.is_mobile_app){fG.options.horizontalAlign=1;fG.options.isToolbarFlyout=false;fG.options.isBeingPositionedRelativeToASharedDialogWidget=true}else{fG.options.isToolbarFlyout=true}fG.options.preferUp=eV.get_toolbarIsBottom();fG.options.horizontalAttach=1;fG.options.coverRelativeElement=true;var fH=function(){fG.hide(false)};fF.add_selectionCanceled(fH);var fI=ss.mkdel(this,function(fL){this.set_users(fL);fG.hide(false)});var fJ=ss.mkdel(this,function(fL){this.set_groups(fL);fG.hide(false)});fF.add_selectionConfirmedUser(fI);fF.add_selectionConfirmedGroup(fJ);fG.addDisposables(new tab.CallOnDispose(ss.mkdel(this,function(){fF.remove_selectionCanceled(fH);fF.remove_selectionConfirmedUser(fI);fF.remove_selectionConfirmedGroup(fJ);this.raiseActionEvent(this.$3$7)})));if(tab.FeatureFlags.isEnabled('ViewingToolbarModalDialog')||tsConfig.is_mobile_app){var fK=function(){fG.hide(false)};this.add_dialogHidden(fK);fG.addDisposables(new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_dialogHidden(fK)})))}fG.show();this.raiseActionEvent(this.$3$7);$('.tabUserSearchInput').focus()},shouldSubscribeButtonBeEnabled:function(e,fE,fF){if(ss.isNullOrUndefined(this.get_schedules())||this.get_schedules().length===0){return false}if(ss.isNullOrUndefined(fE)||fE.trim().length===0){return false}if(ss.isNullOrEmptyString(this.get_email())&&!this.$7(e)){return false}if(ss.isValue(this.addSubscribersViewModel)){return false}if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')){return fF||this.get_users().length>0||this.get_groups().length>0}return fF||this.get_users().length>0},generateScheduleViewModel:function(){var e=new spiff.ComboBoxViewModel;e.set_additionalMenuClass('tabSubscriptionScheduleDropdown');var fE=e;var fF=this.get_schedules();for(var fG=0;fG<fF.length;fG++){var fH=fF[fG];var fI=fH.get_schedulePresModel().name;if(tsConfig.display_schedule_description_as_name){fI=fH.get_scheduleFrequencyDescription()}fE.addItem(new spiff.ComboBoxItem(null,fI,fH,null,null))}if(fE.get_items().length>0){fE.set_selectedItem(fE.get_items()[0])}return fE},generateSchedules:function(){if(ey.isSelfServiceSchedulesEnabled()){return null}var e=this.get_schedules().length;var fE=new Array(e);for(var fF=0;fF<this.get_schedules().length;fF++){var fG=this.get_schedules()[fF];var fH=fG.get_schedulePresModel().name;if(tsConfig.display_schedule_description_as_name){fH=fG.get_scheduleFrequencyDescription()}fE[fF]={value:fF.toString(),displayValue:fH}}return ss.arrayClone(fE)},setDataAndCreateSubscriptions:function(e,fE,fF,fG,fH,fI,fJ,fK){this.set_shouldSubscribeAllViews(fE);this.set_sendOnlyWhenDataPresentCheckboxSelected(fK);this.set_users(fI);this.set_groups(fJ);this.createSubscriptions(e,this.get_schedules()[fF],fG,fH)},setDataAndCreateSubscriptionsSelfService:function(e,fE,fF,fG,fH,fI,fJ,fK){this.set_shouldSubscribeAllViews(fE);this.set_sendOnlyWhenDataPresentCheckboxSelected(fK);this.set_users(fI);this.set_groups(fJ);this.createSubscriptionsWithSelfServiceSchedule(e,fF,fG,fH)},createSubscription:function(e,fE){var fF=ss.mkdel(this,function(){this.raiseActionEvent(this.$3$2);ds.showNotification(tab.Strings.SubscribeSuccess)});var fG=function(){ds.showNotification(tab.Strings.SubscribeFailure)};tab.WorkgroupServerCommands.createSubscription(e,this.get_shouldSubscribeAllViews(),fE,this.$a(),fF,fG)},createSubscriptionWithSelfServiceSchedule:function(e,fE){tab.ModuleManager.load(tab.ISelfServiceSchedulesModule).call(null,[]).done(ss.mkdel(this,function(fF){fF.createSubscriptionWithSelfServiceSchedule(e,this.get_shouldSubscribeAllViews(),fE,this.$a(),this.$3$2)}))},createSubscriptions:function(e,fE,fF,fG){this.$5(e,fF,fE,false,fG)},createSubscriptionsWithSelfServiceSchedule:function(e,fE,fF,fG){this.$5(e,fF,fE,true,fG)},showMessageEditor:function(){this.$9(1)},showMainDialog:function(){this.$9(0)},$5:function(e,fE,fF,fG,fH){var fI=ss.mkdel(this,function(fN){var fO=(ss.keyExists(fN,'results')?fN['results'].length:0);ds.showNotification(tab.Strings.SubscribeOthersSuccess(fO));this.raiseActionEvent(this.$3$2)});var fJ=ss.mkdel(this,function(fN){var fO=fN['errors'];if(fO.length===1&&ss.isNullOrUndefined(fO[0]['id'])){ds.showNotification(tab.Strings.SubscribeFailure)}else{ds.showNotification(tab.Strings.SubscribeOthersFailed(fO.length));this.raiseActionEvent(this.$3$2)}});var fK=function(fN){ds.showNotification(tab.Strings.SubscribeFailure)};var fL=_.map(this.get_users(),function(fN){return fN.id.toString()});var fM=_.map(this.get_groups(),function(fN){return fN.id.toString()});if(fM.length===0){fM=null}if(fE&&!_.contains(fL,tsConfig.current_user_id.toString())){fL.push(tsConfig.current_user_id.toString())}if(fG){tab.ModuleManager.load(tab.ISelfServiceSchedulesModule).call(null,[]).done(ss.mkdel(this,function(fN){fN.createSubscriptionsWithSelfServiceSchedule(e,this.get_shouldSubscribeAllViews(),fF,this.$a(),fL,fM,fI,fJ,fK,fH)}))}else{this.set_users([]);this.set_groups([]);tab.WorkgroupServerCommands.createSubscriptions(e,this.get_shouldSubscribeAllViews(),fL,fF,this.$a(),fI,fJ,fK,fH,fM)}},$6:function(){this.addSubscribersViewModel=tab.MiscUtil.dispose$1(this.addSubscribersViewModel)},$7:function(e){return cf.validate(e)},$9:function(e){this.$c=e;this.$8()},$8:function(){if(ss.isValue(this.$3$9)){this.$3$9(this,ss.EventArgs.Empty)}}},ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.IDisposable,tab.IViewModel,ss.makeGenericType(spiff.IPropsProvider$1,[Object]),spiff.IContent,spiff.IUberPopupContent,spiff.IDialogContent]);ss.initClass(ez,a,{addMainDialogContent:function(){$("\n                <div class='tab-subscribeToggleSection'>\n                    <label class='tab-subscribeViewsToggleLabel'/>\n                    <div class='tab-subscribeToggleContainer'>\n                        <span class='tab-subscribeThisView tab-subscribeToggle'/><span class='tab-subscribeAllViews tab-subscribeToggle'/>\n                    </div>\n                </div>\n                <div class='tab-subscribeSchedule'/>\n                <div class='tab-subscribeSubject'/>\n                <div class='tab-subscribeEmail'/>\n                <div class='tab-manageSubscribersArea tab-subscribeOthersSection'>\n                    <label class='tab-manageSubscribersLabel'/>\n                </div>\n                <div class='tab-subscribeSubmit'/>").appendTo(this.subscribeViewArea);if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')){this.domRoot.addClass('ff-BulkSubscribeOthers')}this.subscribeViewsToggleLabel=this.getElementBySelector('.tab-subscribeViewsToggleLabel');this.subscribeThisView=this.getElementBySelector('.tab-subscribeThisView');this.subscribeAllViews=this.getElementBySelector('.tab-subscribeAllViews');this.subscribeScheduleDropdown=this.getElementBySelector('.tab-subscribeSchedule');this.subscribeEmail=this.getElementBySelector('.tab-subscribeEmail');if(tab.FeatureFlags.isEnabled('BulkSubscribeOthers')){this.subscribeViewsToggleLabel.before("<div class='tab-addUsers'/>");this.addUsersPlaceholder=this.getElementBySelector('.tab-addUsers');this.addUsersPlaceholder.after("<div class='tab-addGroups'/>");this.addGroupsPlaceholder=this.getElementBySelector('.tab-addGroups');this.addUsersPlaceholder.before("<div class='tab-subscribeSelfArea tab-subscribeOthersSection'/>");this.subscribeSelfArea=this.getElementBySelector('.tab-subscribeSelfArea')}else{this.subscribeEmail.before("<div class='tab-subscribeSelfArea tab-subscribeOthersSection'/>");this.subscribeSelfArea=this.getElementBySelector('.tab-subscribeSelfArea');this.subscribeEmail.after("\n                    <div class='tab-addSubscribersArea tab-subscribeOthersSection'>\n                        <label class='tab-addSubscribersLabel'/>\n                    </div>");this.addSubscribersLabel=this.getElementBySelector('.tab-addSubscribersLabel')}this.manageSubscribersLabel=this.getElementBySelector('.tab-manageSubscribersLabel');this.subscribeSubject=this.getElementBySelector('.tab-subscribeSubject');this.subscribeButton=this.getElementBySelector('.tab-subscribeSubmit');this.subscribeMessage=$("<div class='tab-subscribeMessage'/>");this.subscribeMessage.insertAfter(this.subscribeSubject)}},spiff.Template,[ss.IDisposable]);ss.initClass(eA,a,{render:function(){return spiff.DOMElements.div({},spiff.DOMElements.textarea(this.$2()),this.$3(),spiff.DOMElements.div({className:'tabSubscribeMessageEditorButtonContainer'},React.createElement(SharedWidgets.ButtonWidget,this.$0()),React.createElement(SharedWidgets.ButtonWidget,this.$1())))},$3:function(){return(this.state.isWarning?spiff.DOMElements.div({className:eA.errorMessageClass+' '+(this.state.isError?'error':'warning')},this.state.warningMessage):null)},$2:function(){return{rows:this.$6,placeholder:tab.Strings.ToolbarSubscribeMessageEditorPlaceholder,className:eA.messageEditorClass,ref:this.$5,defaultValue:this.props.message,autoFocus:true,onChange:ss.mkdel(this,this.onChangeMessageHandler)}},onChangeMessageHandler:function(e){if(this.textAreaElement.value.length>=eA.characterWarningLimit){this.setState({isError:this.textAreaElement.value.length>eA.characterLimit,isWarning:true,warningMessage:tab.Strings.MessageCharacterLimit(this.textAreaElement.value.length,eA.characterLimit)})}else if(this.state.isError||this.state.isWarning){this.setState({isError:false,isWarning:false,warningMessage:null})}},$0:function(){return{handleClick:ss.mkdel(this,function(e){this.props.onCancelButtonClick()}),buttonType:3,testId:'subscription-message-editor-cancel',key:'messageEditorCancel',label:tab.Strings.SubscribeCancel,style:{marginRight:12}}},$1:function(){return{handleClick:ss.mkdel(this,function(e){this.$4(e)}),buttonType:2,testId:'subscription-message-editor-done',key:'messageEditorDone',label:tab.Strings.SubscribeDone,disabled:this.state.isError}}},React.Component);ss.initClass(eB,a,{},ss.EventArgs);ss.initClass(eC,a,{createEditConnectionButtonProps:function(){var e=function(){tab.VizClientCommands.setUIMode('data-tab','ReconnectEditConnection','')};return{handleClick:function(fE){e()},buttonType:3,testId:'SheetReconnectEditConnection',label:tab.Strings.SheetReconnectEditConnectionLabel,style:{marginTop:18+'px',marginBottom:'auto',marginLeft:'auto',marginRight:30+'px'}}},determineIfConnectionClassSupported:function(){var e=$.Deferred();tab.DataConnectionUtils.isTableauServerSupportedInReconnectFlow(this.props.connectionClass).done(function(fE){e.resolve(fE)});return e.promise()}},el);ss.initClass(eD,a,{get_textAngle:function(){return this.$k},set_textAngle:function(e){this.$k=e},get_isTextAngleHorizontal:function(){return Math.abs(this.get_textAngle())<0.01},get_numberSavedStates:function(){return this.$g},get_alpha:function(){return this.$6.globalAlpha},set_alpha:function(e){if(e!==this.$6.globalAlpha){this.$6.globalAlpha=e}},get_globalCompositeOperation:function(){return this.$6.globalCompositeOperation},set_globalCompositeOperation:function(e){this.$6.globalCompositeOperation=e},get_font:function(){return this.$6.font},set_font:function(e){var fE=this.$d.normalizeFont(e);if(!ss.referenceEquals(fE,this.$6.font)){this.$6.font=fE}this.$e=eD.$0(fE)},get_lineCap:function(){return this.$8},set_lineCap:function(e){if(e!==this.$8){this.$6.lineCap=e;this.$8=e}},get_lineJoin:function(){return this.$9},set_lineJoin:function(e){if(e!==this.$9){this.$6.lineJoin=e;this.$9=e}},get_lineWidth:function(){return this.$6.lineWidth},set_lineWidth:function(e){if(e!==this.$6.lineWidth){this.$6.lineWidth=e;if(this.$f!=='solid'){this.$5()}}},get_linePattern:function(){return this.$f},set_linePattern:function(e){if(e!==this.$f){this.$f=e;this.$5()}},get_transformation:function(){return this.$m},set_transformation:function(e){this.$m.setTransform(e)},get_strokeStyle:function(){return this.$a},set_strokeStyle:function(e){if(!ss.referenceEquals(e,this.$a)){this.$6.strokeStyle=e;this.$a=e}},get_shapeFillStyle:function(){return this.$h},set_shapeFillStyle:function(e){this.$h=e;this.$3(e)},get_shouldAntialias:function(){return this.$i},set_shouldAntialias:function(e){this.$i=e},get_shouldUnderlineText:function(){return this.$j},set_shouldUnderlineText:function(e){this.$j=e},get_textFillStyle:function(){return this.$l},set_textFillStyle:function(e){this.$l=e},get_textAlign:function(){return this.$6.textAlign},set_textAlign:function(e){this.$6.textAlign=e},get_textBaseline:function(){return this.$6.textBaseline},set_textBaseline:function(e){this.$6.textBaseline=e},get_currentClipRect:function(){return this.$b},clearDirtyRect:function(){this.dirtyRect={x:0,y:0,w:0,h:0}},setDefaultPropertyValues:function(){this.set_alpha(1);this.set_strokeStyle('rgb(0,0,0)');this.set_linePattern(eD.defaultLinePattern);this.set_lineWidth(1);this.set_lineJoin(eD.defaultLineJoin);this.set_lineCap(eD.defaultLineCap);this.set_shapeFillStyle('rgb(0,0,0)');this.set_textFillStyle('rgb(0,0,0)');this.set_textBaseline(eD.defaultTextBaseline);this.set_textAlign(eD.defaultTextAlign);this.set_textAngle(0);this.set_font(8+'pt '+'Arial');this.$i=true;this.$j=false},setClip:function(e){this.beginPath();this.$b=e;this.rect(e.x,e.y,e.w,e.h);this.$1()},arc:function(e,fE,fF,fG,fH,fI){this.$6.arc(e,fE,fF,fG,fH,fI)},beginPath:function(){this.$6.beginPath()},bezierCurveTo:function(e,fE,fF,fG,fH,fI){this.$6.bezierCurveTo(e,fE,fF,fG,fH,fI)},clearRect:function(e,fE,fF,fG){this.$6.clearRect(e,fE,fF,fG)},closePath:function(){this.$6.closePath()},createLinearGradient:function(e,fE,fF,fG){return this.$6.createLinearGradient(e,fE,fF,fG)},drawImage1:function(e,fE,fF){this.$6.drawImage(e,fE,fF)},drawImage3:function(e,fE,fF,fG,fH){this.$6.drawImage(e,fE,fF,fG,fH)},drawImage4:function(e,fE,fF,fG,fH){this.$6.drawImage(e,fE,fF,fG,fH)},drawImage5:function(e,fE,fF,fG,fH,fI,fJ,fK,fL){this.$6.drawImage(e,fE,fF,fG,fH,fI,fJ,fK,fL)},fill:function(){this.$6.fill()},fillRect:function(e,fE,fF,fG){this.$6.fillRect(e,fE,fF,fG)},fillText1:function(e,fE,fF){if(this.$4()){var fG=ss.mkdel(this,function(fH){this.$6.fillText(fH,0,0)});this.$2(fG,e,fE,fF)}else{this.$6.fillText(e,fE,fF)}},fillText2:function(e,fE,fF,fG){if(this.$4()){var fH=ss.mkdel(this,function(fI){this.$6.fillText(fI,0,0,fG)});this.$2(fH,e,fE,fF)}else{this.$6.fillText(e,fE,fF,fG)}},lineTo:function(e,fE){this.$6.lineTo(e,fE)},measureText:function(e){return this.$6.measureText(e)},moveTo:function(e,fE){this.$6.moveTo(e,fE)},rect:function(e,fE,fF,fG){this.$6.rect(e,fE,fF,fG)},reset:function(){while(this.$g>0){this.restore()}this.setDefaultPropertyValues();this.resetTransform();this.pixelRatio=1;this.save()},restore:function(){this.$6.restore();this.$8=this.$6.lineCap;this.$9=this.$6.lineJoin;this.$a=this.$6.strokeStyle;this.$7=this.$6.fillStyle;var e=this.$c.pop();e.$0(this);--this.$g},rotate:function(e){this.$m.rotate(e);this.$0()},save:function(){var e=new j(this.$f,this.$k,this.$h,this.$l,this.$i,this.$j,this.$m);this.$c.push(e);this.$6.save();++this.$g},scale:function(e,fE){if(e===1&&fE===1){return}this.$m.scale(e,fE);this.$0()},setTransform:function(e){this.$m.setTransform(e);this.$0()},resetTransform:function(){this.$m.reset();this.$0()},stroke:function(){this.$6.stroke()},strokeRect:function(e,fE,fF,fG){this.$6.strokeRect(e,fE,fF,fG)},strokeText1:function(e,fE,fF){},strokeText2:function(e,fE,fF,fG){},translate:function(e,fE){if(e===0&&fE===0){return}this.$m.translate(e,fE);this.$0()},$0:function(){var e=this.$m.get_matrix();this.$6.setTransform(e[0],e[1],e[2],e[3],e[4],e[5])},$1:function(){this.$6.clip()},$4:function(){return!this.get_isTextAngleHorizontal()||ss.isNullOrUndefined(this.$h)||!ss.referenceEquals(this.$h,this.$l)||this.$j},$2:function(e,fE,fF,fG){this.$6.save();var fH=this.$m.clone();this.translate(fF,fG);if(!this.get_isTextAngleHorizontal()){this.rotate(this.get_textAngle())}this.$3(this.$l);e(fE);if(this.$j){var fI=this.measureText(fE).width;var fJ=Math.round(Math.max(1,(this.$e-5)/10));var fK=Math.round((this.$e-5)/10);var fL=0;if(this.get_textAlign()==='center'){fL-=fI/2}else if(this.get_textAlign()==='end'){fL-=fI}this.$6.fillRect(fL,fK,fI,fJ)}this.$6.restore();this.$m.setTransform(fH);this.$7=null},$3:function(e){if(!ss.referenceEquals(e,this.$7)){this.$6.fillStyle=e;this.$7=e}},$5:function(){var e=null;var fE=0;switch(this.$f){case'solid':{e=[];break}case'dashed':{fE=this.$6.lineWidth;e=[eD.defaultLineDashDashed[0]*fE,eD.defaultLineDashDashed[1]*fE];break}case'dotted':{fE=this.$6.lineWidth;e=[eD.defaultLineDashDotted[0]*fE,eD.defaultLineDashDotted[1]*fE];break}}if(typeof(this.$6['setLineDash'])==='function'){this.$6.setLineDash(e)}else if('mozDash'in this.$6){this.$6['mozDash']=e}else if('webkitLineDash'in this.$6){this.$6['webkitLineDash']=e}}});ss.initClass(eE,a,{});ss.initClass(eF,a,{showFormatIndicator:function(){this.formatIndicatorElem.show()},hideFormatIndicator:function(){this.formatIndicatorElem.hide();if(ss.isValue(this.chevron)&&this.chevron.get_selected()){this.chevron.set_selected(false)}},minSizeHint:function(){if(ss.isValue(this.chevron)){var e=parseInt(this.chevron.element.css('top'));var fE=parseInt(this.chevron.element.css('right'));var fF=parseInt(this.chevron.element.css('height'));var fG=parseInt(this.chevron.element.css('width'));return{w:fG+2*fE,h:fF+2*e}}return{w:0,h:0}},addChevron:function(e){if(ss.isNullOrUndefined(this.chevron)){this.chevron=new spiff.ToggleButton($("<span class='tabAuthoringTitleEditArrow'/>"));this.chevron.add_click(e);this.formatIndicatorElem.append(this.chevron.element)}}},spiff.Template,[ss.IDisposable]);ss.initClass(eG,a,{$i:function(){return this.get_viewModel()},$h:function(){return this.get_template()},minSizeHint:function(){return this.$h().minSizeHint()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(tsConfig.is_mobile&&tsConfig.current_sheet_type==='dashboard'){this.element.addClass(spiff.ClickBuster.suppressClickBustingClass)}if(this.$i().options.textSelectable){this.$h().contentElem.addClass('tab-selectable')}this.handleNewTextRegion();ed.get_instance().add_fontPreparationComplete(ss.mkdel(this,this.handleNewTextRegion));this.disposables.add(ss.mkdel(this,function(){ed.get_instance().remove_fontPreparationComplete(ss.mkdel(this,this.handleNewTextRegion))}))},handleNewTextRegion:function(){if(!this.$i().hasPresModel()){return}this.$a(this.$h().textRegionBoundaryElem);this.$b(this.$h().contentElem)},$c:function(){var e=new spiff.ShowMenuOptions(this.$h().chevron.element,false);e.activatedBy='Chevron';e.openedFrom=this.$e();var fE=e;this.$f(fE)},handleRightClick:function(e){var fE=new spiff.ShowMenuOptions(this.element,false);fE.cursorPosition={left:e.clientX,top:e.clientY};fE.activatedBy='ContextMenu';fE.openedFrom=this.$e();var fF=fE;this.$f(fF)},$f:function(e){var fE=ss.mkdel(this,function(fG){this.$g=true;this.$h().showFormatIndicator()});var fF=ss.mkdel(this,function(){this.$g=false;this.$h().hideFormatIndicator()});this.get_viewModel().showContextMenu(e,fE,fF)},handleDoubleClick:function(e){this.get_viewModel().openRichTextEditorDialogForTitle();cx.logRichTextEditorEvent(['RichTextEditorOpenedBy','DoubleClick','RichTextEditorOpenedFrom',this.$e()])},$e:function(){return((tsConfig.current_sheet_type==='worksheet')?'WorksheetTitle':'WorksheetTitleOnDashboard')},handleHover:function(){this.$h().showFormatIndicator()},handleMouseLeave:function(){if(!this.$g){this.$h().hideFormatIndicator()}},$b:function(e){var fE={};e.removeAttr('style');e.html(this.$i().get_html());tab.FormattingConverters.cleanUpFontFamilyStyles(e);if(!tsConfig.is_mobile_device){var fF=function(fN){fN.stopPropagation()};e.on(this.createNamespacedEventName('touchstart'),fF).on(this.createNamespacedEventName('touchend'),fF)}var fG=this.$i().get_orientation();var fH=eG.$3(fG);var fI=eG.$2(fG);if(fH||fI){var fJ=tab.DoubleUtil.roundToInt(e.parent().width());var fK=tab.DoubleUtil.roundToInt(e.parent().height());fE['width']=fK+'px';var fL='0%';if(fH){fE['bottom']='100%';fL='100%'}else if(fI){fE['top']='100%';fL='0%'}e.css(fE);fE['left']=eG.$1(fJ,tab.DoubleUtil.roundToInt(e.height()),this.$i().get_hAlign(),fG);eG.$0(e,'0% '+fL,fG.toString())}else{e.width('100%');var fM=tab.DoubleUtil.roundToInt(this.$h().domRoot.height());if(fM<=tab.DoubleUtil.roundToInt(e.height())&&!this.$d(e,fM)){fE['top']='0%'}else{switch(this.$i().get_vAlign()){case'v-align-center':{fE['top']='50%';fE['margin-top']=ss.Int32.div(-tab.DoubleUtil.roundToInt(e.height()),2)+'px';break}case'v-align-bottom':{fE['bottom']='0%';break}case'v-align-top':{fE['top']='0%';break}default:{break}}}}e.css(fE)},$d:function(e,fE){var fF=false;e.find('span').each(function(fG,fH){if(!fF&&ss.isValue(fH.style.lineHeight)){fF=parseInt(fH.style.lineHeight)>=fE}});return fF},$a:function(e){var fE=this.$i().get_styledBox();var fF=tab.FormattingConverters.getCSSBorderStyle(fE.borderStyle);var fG=ss.mkdict(['border-width',fE.uw+'px','border-color',fE.borderColor,'border-style',fF]);if(this.$i().get_styledBox().hasFill){this.$9(fG)}e.css(fG)},$9:function(e){var fE=tab.ColorModel.fromColorCode(this.$i().get_styledBox().fillColor);if(fE.get_a()<1){e['background-color']=fE.toString()}else{e['background-color']=fE.toString()}}},ss.makeGenericType(spiff.BaseView$1,[eH]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[eH])]);eG.$ctor1.prototype=eG.prototype;ss.initClass(eH,a,{add_newTextRegion:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newTextRegion:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_hAlign:function(){return this.$5.get_hAlign()},get_html:function(){return this.$5.get_html()},get_orientation:function(){return this.$5.get_orientation()},get_vAlign:function(){return this.$5.get_vAlign()},get_styledBox:function(){return this.$5.get_styledBox()},get_presModelKey:function(){return this.$5.presModelKey},handleNewTextRegion:function(){this.$4()},hasPresModel:function(){return!ss.isNullOrUndefined(this.$5.pm)},isTitle:function(){var e=tab.FeatureFlags.isEnabled('RichTextEditingWorksheetTitleInDashboard')&&tsConfig.current_sheet_type==='dashboard';return ss.referenceEquals(this.get_presModelKey().name,'visualTitle'.toString())&&(tsConfig.current_sheet_type==='worksheet'||e)},openRichTextEditorDialogForTitle:function(){tab.RichTextClientCommands.createWorksheetTitleRichTextEditor(this.$5.get_sheetName())},showContextMenu:function(e,fE,fF){if(!tsConfig.is_authoring){return}if(this.isTitle()){var fG=ss.mkdel(this,function(fJ){var fK=fJ.$$c['commands'];var fL=this.$3(e,fK,fE,fF);fL.show(e)});var fH=((tsConfig.current_sheet_type==='dashboard')?tsConfig.current_sheet_name:null);tab.SheetClientCommands.getTitleContextMenu(this.$5.get_sheetName(),fH,fG)}if(ss.referenceEquals(this.get_presModelKey().name,'visualCaption'.toString())&&tsConfig.current_sheet_type==='worksheet'){var fI=ss.mkdel(this,function(fJ){var fK=fJ.$$c['commands'];var fL=this.$3(e,fK,fE,fF);fL.show(e)});tab.SheetClientCommands.getCaptionContextMenu(tsConfig.current_sheet_name,fI)}},$3:function(e,fE,fF,fG){tab.Param.verifyValue(fE,'commands');var fH=tab.CommandsPresModelWrapper.create(fE);if(tab.MiscUtil.isNullOrEmpty$1(fH.get_commandItems())){if(ss.isValue(fG)){fG()}return null}var fI=[];fw.newMenuItemsFromCommands(fI,fE,ss.mkdel(this,function(fJ){return this.$2(e,fJ)}));return spiff.MenuViewModel.createForMenu(new spiff.Menu(fI),fw.commandMenuItemClicked,null,fG,fF,true)},$2:function(e,fE){var fF=fw.createDropdownMenuCommandHandler(fE);return function(){var fG=tab.CommandSerializer.deserialize(tab.CommandItemWrapper.create(fE).get_command());if(tab.RichTextClientCommands.isRichTextEditingCommand(fG)){cx.logRichTextEditorEvent(['RichTextEditorOpenedBy',e.activatedBy,'RichTextEditorOpenedFrom',e.openedFrom])}fF()}},$4:function(){if(ss.isValue(this.$2$1)){this.$2$1()}}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(eI,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(eJ,a,{get_canScrollX:function(){return this.get_docSize().w-this.get_actualViewSize().w>0},get_canScrollY:function(){return this.get_docSize().h-this.get_actualViewSize().h>0},get_docSize:function(){return{w:tab.DoubleUtil.roundToInt(this.element.width()),h:tab.DoubleUtil.roundToInt(this.element.height())}},get_actualViewSize:function(){return{w:0,h:0}},set_actualViewSize:function(e){throw new ss.NotSupportedException('Setting ActualViewSize is not supported.')},get_effectiveViewSize:function(){return this.get_actualViewSize()},get_scrollPos:function(){return{x:this.element.scrollLeft(),y:tab.DoubleUtil.roundToInt(this.element.scrollTop())}},set_scrollPos:function(e){this.setXPos(e.x);this.setYPos(e.y)},setXPos:function(e){this.element.scrollLeft(e)},setYPos:function(e){this.element.scrollTop(e)}},ss.makeGenericType(spiff.BaseView$1,[eK]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[eK]),spiff.IScrollable]);ss.initClass(eK,a,{},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(eL,a,{get_keyCombos:function(){return tab.KeyCombos.op_Implicit((BrowserSupport.BrowserSupport.IsMac()?new tab.KeyCombo.$ctor3(new tab.KeyModifiers(false,true,false,false,true,false,false,false,false),70,[]):new tab.KeyCombo.$ctor2(122,[])))},isAllowed:function(e){return eU.shouldAllowFullScreen()&&tab.GlobalKeyboardShortcut.prototype.isAllowed.call(this,e)},executeShortcut:function(e){if(spiff.FullscreenUtil.get_inFullscreenMode()){spiff.FullscreenUtil.exitFullscreen()}else{spiff.FullscreenUtil.requestFullscreen(document.documentElement)}}},tab.GlobalKeyboardShortcut,[tab.IKeyboardShortcut]);ss.initClass(eN,a,{get_image:function(){return this.$2$1},set_image:function(e){this.$2$1=e},get_text:function(){return this.$2$2},set_text:function(e){this.$2$2=e}},spiff.Template,[ss.IDisposable]);ss.initClass(eO,a,{get_dom:function(){return this.get_template()},get_toolbarButton:function(){return this.$3$1},set_toolbarButton:function(e){this.$3$1=e},$c:function(){this.set_toolbarButton(new spiff.LabelButton(this.get_dom().domRoot,'.tabToolbarButtonText'));this.disposables.add$1(this.get_toolbarButton());this.get_toolbarButton().add_click(ss.mkdel(this,this.onClicked));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_toolbarButton().remove_click(ss.mkdel(this,this.onClicked))})));this.element.attr('aria-label',this.get_viewModel().get_text());this.element.addClass(this.get_viewModel().get_iconClass().substring(this.get_viewModel().get_iconClass().lastIndexOf('-')+1));this.onViewModelPropertyChanged(this,new tab.PropertyChangedEventArgs('isActive'));this.onViewModelPropertyChanged(this,new tab.PropertyChangedEventArgs('enabled'));this.onViewModelPropertyChanged(this,new tab.PropertyChangedEventArgs('text'));this.onViewModelPropertyChanged(this,new tab.PropertyChangedEventArgs('tooltipText'));this.onViewModelPropertyChanged(this,new tab.PropertyChangedEventArgs('iconClass'))},onViewModelPropertyChanged:function(e,fE){switch(fE.get_propertyName()){case'isActive':{this.get_toolbarButton().element.toggleClass('tabActive',this.get_viewModel().get_isActive());this.get_dom().get_image().toggleClass(this.get_viewModel().get_iconClass()+'-active',this.get_viewModel().get_isActive());this.get_dom().get_image().toggleClass(this.get_viewModel().get_iconClass(),!this.get_viewModel().get_isActive());break}case'enabled':{var fF=this.get_viewModel().get_enabled();this.get_toolbarButton().set_disabled(!fF);if(tab.FeatureFlags.isEnabled('AccessibilityViewingToolbar')){if(!fF){this.element.attr('aria-disabled','true')}else{this.element.removeAttr('aria-disabled')}this.element.attr('tabindex','-1')}if(!tab.FeatureFlags.isEnabled('AccessibilityViewingToolbar')||tsConfig.is_authoring){this.element.attr('tabindex',(fF?'0':'-1'))}break}case'text':{this.get_dom().get_text().text(ss.coalesce(this.get_viewModel().get_text(),''));break}case'tooltipText':{this.get_toolbarButton().set_hoverTooltipText(ss.coalesce(this.get_viewModel().get_tooltipText(),''));break}case'iconClass':{if(ss.isValue(this.$e)){this.get_dom().get_image().removeClass(this.$e)}this.get_dom().get_image().addClass(this.get_viewModel().get_iconClass());this.$e=this.get_viewModel().get_iconClass();break}}},onClicked:function(){if(ss.isValue(this.get_toolbarButton())&&!ss.staticEquals(this.get_viewModel().get_buttonAction(),null)){this.get_viewModel().execute()}if(tab.FeatureFlags.isEnabled('ViewingToolbarModalDialog')||tsConfig.is_mobile_app){this.get_viewModel().showDialog()}else if(this.get_toolbarButton().element.hasClass('tabToolbarButtonFlyoverShown')){this.get_viewModel().popupViewModel.hide(false)}else{this.get_viewModel().showUberPopup(this.get_toolbarButton().element)}},$d:function(){this.get_dom().domRoot.show();this.get_viewModel().set_isHidden(false)},$9:function(){this.get_dom().domRoot.hide();this.get_viewModel().set_isHidden(true)},$b:function(){this.get_toolbarButton().element.addClass('tabToolbarButtonFlyoverShown')},$a:function(){this.get_toolbarButton().element.removeClass('tabToolbarButtonFlyoverShown')}},ss.makeGenericType(spiff.BaseView$1,[eP]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[eP])]);ss.initClass(eP,a,{add_showDialogRequested:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_showDialogRequested:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_flyoverShown:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_flyoverShown:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_flyoverHidden:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_flyoverHidden:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_clickButtonRequested:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_clickButtonRequested:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},add_showButtonRequested:function(e){this.$2$5=ss.delegateCombine(this.$2$5,e)},remove_showButtonRequested:function(e){this.$2$5=ss.delegateRemove(this.$2$5,e)},add_hideButtonRequested:function(e){this.$2$6=ss.delegateCombine(this.$2$6,e)},remove_hideButtonRequested:function(e){this.$2$6=ss.delegateRemove(this.$2$6,e)},get_buttonAction:function(){return this.action},get_itemWrapper:function(){return this.$2$7},set_itemWrapper:function(e){this.$2$7=e},get_hintText:function(){if(!tab.FeatureFlags.isEnabled('WebKeyboardShortcutHintText')){return null}var e=tab.KeyboardShortcutManager.findAssociatedShortcut(this.get_itemWrapper());return(ss.isNullOrUndefined(e)?null:e.get_hintText())},get_enabled:function(){return this.$7},set_enabled:function(e){if(!this.get_isSeparator()&&this.$7!==e){this.$7=e;this.notifyPropertyChanged('enabled')}},get_iconClass:function(){return this.$9},set_iconClass:function(e){if(!this.get_isSeparator()&&!(ss.compareStrings(this.$9,e,false)===0)){this.$9=e;this.notifyPropertyChanged('iconClass')}},get_iconType:function(){return this.$2$8},set_iconType:function(e){this.$2$8=e},get_isActive:function(){return this.$a},set_isActive:function(e){if(!this.get_isSeparator()&&this.$a!==e){this.$a=e;this.notifyPropertyChanged('isActive')}},get_text:function(){return this.$c},set_text:function(e){if(!this.get_isSeparator()&&!(ss.compareStrings(this.$c,e,false)===0)){this.$c=e;this.notifyPropertyChanged('text')}},get_tooltipText:function(){return this.$d},set_tooltipText:function(e){if(!this.get_isSeparator()&&!ss.referenceEquals(this.$d,e)){this.$d=e;this.notifyPropertyChanged('tooltipText')}},get_description:function(){return this.$6},set_description:function(e){if(!this.get_isSeparator()&&!ss.referenceEquals(this.$6,e)){this.$6=e;this.notifyPropertyChanged('description')}},get_isSeparator:function(){return this.$2$9},set_isSeparator:function(e){this.$2$9=e},get_isHidden:function(){return this.$2$10},set_isHidden:function(e){this.$2$10=e},dispose:function(){this.$2();spiff.BaseViewModel.prototype.dispose.call(this)},execute:function(){if(!ss.staticEquals(this.action,null)){this.action()}},showUberPopup:function(e){if(ss.isValue(this.popupContent)){this.$2();this.popupViewModel=spiff.UberPopupViewModel.createForContent$1(this.popupContent,e,null,true);this.popupViewModel.options=this.$b;if(ss.isValue(this.$2$2)){this.popupViewModel.add_shown(this.$2$2)}if(ss.isValue(this.$2$3)){this.popupViewModel.add_hidden(ss.mkdel(this,this.$4))}this.popupViewModel.show()}},showDialog:function(){if(ss.staticEquals(this.$2$1,null)){return}this.$8().done(ss.mkdel(this,function(e){if(!ss.staticEquals(this.$2$1,null)&&ss.isValue(e)){this.$2$1(e)}}))},clickButton:function(){this.raiseActionEvent(this.$2$4)},showButton:function(){if(this.get_isHidden()){this.raiseActionEvent(this.$2$5)}},hideButton:function(){this.raiseActionEvent(this.$2$6)},$3:function(){if(ss.isValue(this.popupViewModel)){this.popupViewModel.hide(false)}},$5:function(){this.raiseActionEvent(this.$2$2)},$4:function(){this.raiseActionEvent(this.$2$3);this.$2()},$2:function(){if(ss.isValue(this.popupViewModel)){this.popupViewModel.remove_shown(this.$2$2);this.popupViewModel.remove_hidden(ss.mkdel(this,this.$4));this.popupViewModel.dispose();this.popupViewModel=null}}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(eQ,a,{createMenu:function(){return this.$e(null)},execute:function(){},dropdownClicked:function(e,fE){var fF=this.createMenu();if(!fF.menuItems.some(function(fJ){return fJ.enabled})){return null}var fG=spiff.MenuViewModel.createForMenu(fF,ss.mkdel(this,function(fJ){this.raiseActionEvent$1(spiff.MenuItem).call(this,fE,fJ);fw.commandMenuItemClicked(fJ)}),null,ss.mkdel(this,function(){this.set_isActive(false)}),null,true);var fH=new spiff.ShowMenuOptions(e,true);fH.additionalMenuClass='tabToolbarDropdownMenu '+this.get_iconClass()+'ContextMenu';var fI=fH;fG.show(fI);this.set_isActive(true);return fG}},eP,[ss.IDisposable,tab.IViewModel]);ss.initClass(eR,a,{add_propsUpdated:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_propsUpdated:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},get_props:function(){return this.$3$2},set_props:function(e){this.$3$2=e},createMenu:function(){return this.$g(null)},$e:function(e){if(ss.compare(e,this.get_props().selectedValue)!==0){this.get_props().selectedValue=e;this.raiseActionEvent(this.$3$1);var fE=parseInt(e);var fF=this.$f.menuItems[fE];spiff.MenuViewModel.handleMenuActionItemClicked(fF)}}},eP,[ss.IDisposable,tab.IViewModel,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(eS,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(eT,a,{get_toggleToText:function(){return this.$e},set_toggleToText:function(e){this.$e=e}},eP,[ss.IDisposable,tab.IViewModel]);ss.initClass(eU,a,{get_dom:function(){return this.get_template()},$s:function(){return this.$3$1},$t:function(e){this.$3$1=e},$z:function(){return this.$3$2},$A:function(e){this.$3$2=e},$v:function(){return this.$3$3},$w:function(e){this.$3$3=e},$B:function(){return this.$3$4},$C:function(e){this.$3$4=e},$q:function(){return this.$3$5},$r:function(e){this.$3$5=e},$D:function(){return this.$3$6},$E:function(e){this.$3$6=e},$x:function(){return this.$3$7},$y:function(e){this.$3$7=e},$u:function(){return this.$L.get_customViewsViewModel()},$F:function(e){this.get_dom().toolbar.toggleClass('horizontalLabels',e);this.get_dom().toolbar.toggleClass('stackedLabels',!e)},$G:function(e){this.get_dom().leftItems.toggleClass('narrow',e)},$p:function(){var e=this.$L.get_shouldForceLabelsBelowIcons();var fE=this.$L.get_canPutLabelsUnderneath();var fF=this.get_dom().toolbar.width();var fG=this.get_dom().leftItems;var fH=this.get_dom().rightItems;this.$F(!e);this.$G(false);eU.$3(this.$s());eU.$3(this.$v());eU.$3(this.$z());eU.$3(this.$q());eU.$3(this.$B());eU.$3(this.$D());eU.$3(this.$x());if(spiff.FullscreenUtil.get_inFullscreenMode()||eV.$0()){eU.$1(fG);eU.$1(fH);var fI=this.$M;var fJ=this.$I;if(!this.$c(fF,fI,fJ)){this.$G(true)}if(ss.isValue(this.$z())){if(!this.$c(fF,fI,fJ)){this.$z().element.hide();fI-=this.$H}}if(ss.isValue(this.$x())){if(!this.$c(fF,fI,fJ)){this.$x().element.hide()}}return}if(e){if(this.$c(fF,this.$N,this.$J)){eU.$4(fG);eU.$4(fH)}else{eU.$1(fG);eU.$1(fH)}return}if(this.$c(fF,this.$O,this.$K)){eU.$4(fG);eU.$4(fH)}else if(this.$c(fF,this.$N,this.$J)&&fE){this.$F(false);eU.$4(fG);eU.$4(fH)}else if(this.$c(fF,this.$M,this.$K)){eU.$1(fG);eU.$4(fH)}else if(this.$c(fF,this.$O,this.$I)){eU.$4(fG);eU.$1(fH)}else{eU.$1(fG);eU.$1(fH);var fK=this.$M;var fL=this.$I;if(ss.isValue(this.$z())){if(!this.$c(fF,fK,fL)){this.$z().element.hide();fK-=this.$H}}if(ss.isValue(this.$s())){if(!this.$c(fF,fK,fL)){this.$s().element.hide();fL-=this.$H}}if(ss.isValue(this.$v())){if(!this.$c(fF,fK,fL)){this.$v().element.hide();fL-=this.$H}}if(ss.isValue(this.$q())){if(!this.$c(fF,fK,fL)){this.$q().element.hide();fL-=this.$H}}if(ss.isValue(this.$D())){if(!this.$c(fF,fK,fL)){this.$D().element.hide();fL-=this.$H}}if(ss.isValue(this.$B())){if(!this.$c(fF,fK,fL)){this.$B().element.hide()}}}},$l:function(){var e=eV.get_toolbarHeight();if(this.get_viewModel().get_shouldShowCommenting()){e-=1}this.get_dom().toolbar.height(e);this.$m();this.rebuildNonVizItems();if(tab.FeatureFlags.isEnabled('AccessibilityViewingToolbar')){this.element.find('.tabToolbarButton:not(.disabled)').first().attr('tabindex','0')}this.$i()},$m:function(){this.get_dom().leftItems.empty();if(eV.$0()){this.$a(this.get_dom().leftItems)}else{this.$b(this.get_dom().leftItems)}},$a:function(e){var fE=ss.getEnumerator(this.$L.get_nonVizItems());try{while(fE.moveNext()){var fF=fE.current();if(ss.equalsT('public-logo',fF.get_iconType())){var fG=eO.create(fF);e.append(fG.element)}}}finally{fE.dispose()}},$b:function(e){this.$A(null);var fE=ss.getEnumerator(this.$L.get_vizItems());try{while(fE.moveNext()){var fF=fE.current();var fG=eO.create(fF);e.append(fG.element);if(ss.equalsT('redo',fF.get_iconType())){this.$A(fG)}}}finally{fE.dispose()}if(tsConfig.is_metrics_enabled){var fH=new eP(tab.Strings.ToolbarShowPerformanceRecording,'tab-icon-performance',ss.mkdel(this.$L,this.$L.showPerformanceMetrics));var fI=eO.create(fH);e.append(fI.element)}},rebuildNonVizItems:function(){this.get_dom().rightItems.empty();if(eV.$0()){this.$b(this.get_dom().rightItems);this.$9(this.get_dom().rightItems)}else{this.$9(this.get_dom().rightItems)}},$9:function(e){if(!spiff.FullscreenUtil.get_inFullscreenMode()){this.$t(null);this.$w(null);var fE=ss.getEnumerator(this.$L.get_nonVizItems());try{while(fE.moveNext()){var fF=fE.current();var fG=eO.create(fF);if(!ss.equalsT('public-logo',fF.get_iconType())){e.append(fG.element)}if(ss.equalsT('customviews',fF.get_iconType())){fG.get_dom().get_text().css('max-width','160px');this.$t(fG)}else if(ss.equalsT('edit',fF.get_iconType())){this.$w(fG)}else if(ss.equalsT('share',fF.get_iconType())){this.$C(fG)}else if(ss.equalsT('alert',fF.get_iconType())){this.$r(fG);if(tab.FeatureFlags.isEnabled('AlertSidePanel')){this.$d(e)}}else if(ss.equalsT('subscribe',fF.get_iconType())){this.$E(fG)}}}finally{fE.dispose()}}if(this.get_viewModel().get_shouldShowCommenting()){this.$e(e)}if(tab.FeatureFlags.isEnabled('AutomatedInsightsPanel')){this.$f(e)}if(eU.shouldAllowFullScreen()){var fH=(spiff.FullscreenUtil.get_inFullscreenMode()?new eP(tab.Strings.ToolbarExitFullscreen,'tab-icon-exitFullscreen',spiff.FullscreenUtil.exitFullscreen):new eP(tab.Strings.ToolbarEnterFullscreen,'tab-icon-enterFullscreen',function(){spiff.FullscreenUtil.requestFullscreen(document.documentElement)}));this.$y(eO.create(fH));e.append(this.$x().element)}this.updateCustomViewsButton()},$g:function(){this.$o();this.$l()},$f:function(e){var fE=function(){var fH=E.get_instance().get_rightAreaDrawerViewModel();fH.toggleInsightsPanel()};var fF=new eP(tab.Strings.Insights_ToolbarButtonLabel,'tab-icon-insights',fE);var fG=eO.create(fF);e.append(fG.element);this.disposables.add$1(new tab.CallOnDispose(function(){tab.MiscUtil.dispose$1(fG)}))},$e:function(e){var fE=function(){var fH=E.get_instance().get_rightAreaDrawerViewModel();fH.toggleCommenting()};var fF=new eP(tab.Strings.CommentingToolbarButtonLabel,'tab-icon-commenting',fE);var fG=eO.create(fF);e.append(fG.element);this.disposables.add$1(new tab.CallOnDispose(function(){tab.MiscUtil.dispose$1(fG)}))},$d:function(e){var fE=function(){var fH=E.get_instance().get_rightAreaDrawerViewModel();fH.toggleDataAlertsPanel()};var fF=new eP('Alert 2.0','tab-icon-alert',fE);var fG=eO.create(fF);e.append(fG.element);this.disposables.add$1(new tab.CallOnDispose(function(){tab.MiscUtil.dispose$1(fG)}))},updateCustomViewsButton:function(){if(ss.isNullOrUndefined(this.$s())){return}var e=this.$u().get_currentCustomViewName();if(ss.isNullOrUndefined(e)){this.$s().element.css('visibility','hidden')}else{this.$s().element.css('visibility','');this.$s().element.toggleClass('tab-customviews-modified',this.$u().get_dirty());var fE=tab.Strings.ToolbarCustomViewsTemplate(e);if(!ss.equalsT(this.$s().get_toolbarButton().get_label(),fE)){this.$s().get_toolbarButton().set_label(fE)}}},$i:function(){if(tsConfig.is_mobile){this.get_dom().toolbar.css('left','-10000px')}this.get_dom().toolbar.width('10000px');eU.$2(this.get_dom().rightItems);eU.$3(this.$s());eU.$3(this.$v());eU.$3(this.$z());eU.$3(this.$q());eU.$3(this.$B());eU.$3(this.$D());if(this.$H===0){this.$F(!this.$L.get_shouldForceLabelsBelowIcons());eU.$1(this.get_dom().leftItems);eU.$1(this.get_dom().rightItems);this.$M=this.get_dom().leftItems.outerWidth(true);this.$I=this.get_dom().rightItems.outerWidth(true);this.$H=ss.coalesce(ss.Int32.trunc(this.get_dom().leftItems.children().first().outerWidth(true)),0)}eU.$4(this.get_dom().leftItems);eU.$4(this.get_dom().rightItems);if(this.$L.get_canPutLabelsUnderneath()){this.$F(false);this.$N=this.get_dom().leftItems.outerWidth(true);this.$J=this.get_dom().rightItems.outerWidth(true)}if(!this.$L.get_shouldForceLabelsBelowIcons()){this.$F(true);this.$O=this.get_dom().leftItems.outerWidth(true);this.$K=this.get_dom().rightItems.outerWidth(true)}this.get_dom().toolbar.width('');if(tsConfig.is_mobile){this.get_dom().toolbar.css('left','')}this.$h()},$o:function(){this.$O=0;this.$N=0;this.$M=0;this.$K=0;this.$J=0;this.$I=0;this.$H=0},forceResizeToolbar:function(){this.$h()},$h:function(){var e=tabBootstrap.MetricsController.createContext('TBRHRE'.toString(),64,null);try{var fE=this.get_dom().leftItems;var fF=this.get_dom().rightItems;if(fE.children().length===0&&fF.children().length===0){return}eU.$2(fF);this.$p();eU.$0(fF);this.$n()}finally{if(ss.isValue(e)){e.dispose()}}},$k:function(e){switch(e.which){case 37:{this.$j(-1);break}case 39:{this.$j(1);break}default:{return}}e.preventDefault();e.stopPropagation()},$j:function(e){var fE=this.element.find('.tabToolbarButton:not(.disabled):focusable');var fF=this.element.find('.tabToolbarButton:focus');if(ss.isValue(fF[0])){var fG=fE.index(fF[0]);fE.eq((fG+e)%fE.length).focus()}},$n:function(){var e=ss.getEnumerator(this.$L.get_nonVizItems());try{while(e.moveNext()){var fE=e.current();if(ss.isValue(fE.popupViewModel)){fE.popupViewModel.updatePosition()}}}finally{e.dispose()}},$c:function(e,fE,fF){return!(fE+fF>=e)}},ss.makeGenericType(spiff.BaseView$1,[eV]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[eV])]);ss.initClass(eV,a,{add_newToolbar:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newToolbar:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_viewCountLoaded:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_viewCountLoaded:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_shouldShowViewCount:function(){return eV.$0()&&tsConfig.showViewCount&&eV.publicViewCount>tsConfig.viewCountThreshold},get_shouldForceLabelsBelowIcons:function(){return this.get_canPutLabelsUnderneath()&&tsConfig.is_mobile},get_shouldShowCommenting:function(){return this.$2$3},set_shouldShowCommenting:function(e){this.$2$3=e},get_canPutLabelsUnderneath:function(){return eV.get_toolbarHeight()>40},get_viewCount:function(){return eV.publicViewCount},set_viewCount:function(e){eV.publicViewCount=e;if(this.get_shouldShowViewCount()){this.raiseActionEvent(this.$2$2)}},get_vizCommandItems:function(){return this.$b.get_vizCommandItems()},get_nonVizCommandItems:function(){return this.$b.get_nonVizCommandItems()},get_vizItems:function(){return this.$c},get_nonVizItems:function(){return this.$a},get_customViewsViewModel:function(){return this.$8},get_dialogHostViewModel:function(){return this.$2$4},set_dialogHostViewModel:function(e){this.$2$4=e},get_forceHideCustomViewsButton:function(){return this.$9},get_useSmallScreenToolbar:function(){var e=window.screen;return e.width<430||e.height<430},dispose:function(){this.$8.dispose();this.get_dialogHostViewModel().dispose();this.$5();spiff.BaseViewModel.prototype.dispose.call(this)},$4:function(e,fE){for(var fF=0;fF<e.length;fF++){var fG=e[fF];var fH=tab.CommandItemWrapper.create(fG);tab.Param.verifyValue(fG,'commandItem');switch(fH.get_commandsType()){case'separator':{fE.push(eP.createSeparator());break}case'item':{if(eP.shouldShowButton(fH,this)){this.$2(fG,fE)}break}case'subcommands':{if(fH.get_iconRes()==='toggle-updates'){var fI={$:this.$3(tab.CommandsPresModelWrapper.create(fH.get_commands()).get_commandItems(),fE)};var fJ={$:tab.ApplicationModel.get_instance().get_workbook()};fJ.$.withDashboard(ss.mkdel({workbook:fJ,button:fI},function(){if(this.workbook.$.get_isCurrentSheetStoryboard()){this.button.$.set_enabled(false)}}))}break}}}},$5:function(){for(var e=0;e<this.$c.length;e++){var fE=this.$c[e];fE.dispose()}ss.clear(this.$c);for(var fF=0;fF<this.$a.length;fF++){var fG=this.$a[fF];fG.dispose()}ss.clear(this.$a)},$7:function(e,fE){if(this.$9&&this.$8.get_hasCustomViews()){this.$9=false;this.$6(null)}},$2:function(e,fE){var fF=eP.createFromCommandItem(e,'tab-icon-',this);var fG=this.get_dialogHostViewModel();fF.add_showDialogRequested(ss.mkdel(fG,fG.show));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){var fH=this.get_dialogHostViewModel();fF.remove_showDialogRequested(ss.mkdel(fH,fH.show))})));fE.push(fF)},$3:function(e,fE){if(e.length!==2){return null}var fF=eT.createFromCommandItems(e[0],e[1],'tab-icon-');if(ss.isValue(fF)){fE.push(fF)}return fF},$6:function(e){var fE=tabBootstrap.MetricsController.createContext('TBRHNT'.toString(),64,null);try{this.$5();if(tsConfig.toolbarvis){this.$4(this.$b.get_vizCommandItems(),this.$c)}this.$4(this.$b.get_nonVizCommandItems(),this.$a);this.raiseActionEvent(this.$2$1)}finally{if(ss.isValue(fE)){fE.dispose()}}},isLegacyMenuItemEnabled:function(e){return this.$b.isLegacyMenuItemEnabled(e)},showPerformanceMetrics:function(){tab.CommandController.get().legacySession.saveAndOpenMetricsView()},showDialog:function(e){var fE=ss.getEnumerator(this.get_nonVizItems());try{while(fE.moveNext()){var fF=fE.current();if(ss.equalsT(e,fF.get_iconType())){if(e==='alert'){fF.execute()}else if(tab.FeatureFlags.isEnabled('ViewingToolbarModalDialog')||tsConfig.is_mobile_app){fF.showDialog()}else{fF.showUberPopup($('.tabToolbarButton.'+e));$('.tab-glass').css('opacity','0.5').css('background-color','black')}return}}}finally{fE.dispose()}}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(eW,a,{add_closed:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_closed:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_prePosition:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_prePosition:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_positionCalculated:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_positionCalculated:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_showed:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_showed:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},add_positioned:function(e){this.$2$5=ss.delegateCombine(this.$2$5,e)},remove_positioned:function(e){this.$2$5=ss.delegateRemove(this.$2$5,e)},get_isShown:function(){return this.$k},get_body:function(){return this.$i.get_body()},get_location:function(){return this.$o},set_location:function(e){this.move(e)},get_horizontalOffset:function(){return this.$j},set_horizontalOffset:function(e){this.$j=e},get_verticalOffset:function(){return this.$s},set_verticalOffset:function(e){this.$s=e},get_lastLocation:function(){return this.$l},set_lastLocation:function(e){this.$l=e},get_calculatedShownArgs:function(){return this.$h},get_showAbove:function(){return this.$n},set_showAbove:function(e){this.$n=e},get_freezePositionWhileOpen:function(){return this.$2$6},set_freezePositionWhileOpen:function(e){this.$2$6=e},setTooltipBodyAndReposition:function(e,fE){this.requestLayout(ss.mkdel(this,function(){if(ss.isValue(fE)){fE()}this.get_body().empty().append(e)}))},allowMouseEventPassthrough:function(e){this.element.toggleClass('tab-allowMouseEventPassthrough',e)},isInSafeZone:function(e,fE){var fF=this.element.position();var fG=tab.DoubleUtil.roundToInt(this.element.outerWidth());var fH=tab.DoubleUtil.roundToInt(this.element.outerHeight());var fI=10;var fJ=10;if(fE){fI+=this.get_horizontalOffset();fJ+=this.get_verticalOffset()}return e.x>=fF.left-fI&&e.x<=fF.left+fG+fI&&e.y>=fF.top-fJ&&e.y<=fF.top+fH+fJ},show:function(e,fE){if(ss.isNullOrUndefined(fE)||this.$q){this.close();return}this.set_lastLocation(fE);this.ensureAttachedAndSized();this.$p=true;if(this.get_isShown()){this.setTooltipBodyAndReposition(e)}else{this.get_body().empty().append(e);this.requestLayout()}},move:function(e){if(!this.$k||ss.isNullOrUndefined(e)||ss.isValue(this.$o)&&this.$o.x===e.x&&this.$o.y===e.y){return}this.$l=e;this.requestLayout()},close:function(){this.set_freezePositionWhileOpen(false);this.$p=false;if(!this.$k){return}this.detach();this.$k=false;this.onClosed()},hideUntilReposition:function(){this.element.hide();this.$p=true},dispose:function(){this.close();if(!tsConfig.is_mobile){$(window).off(this.createNamespacedEventName('resize'))}spiff.Widget.prototype.dispose.call(this)},forceLayout:function(){this.$h=null;this.set_freezePositionWhileOpen(false);this.requestLayout()},requestLayout:function(e,fE){if(ss.isValue(e)){this.$m.push(e)}if(ss.isValue(fE)){R.getViewport(ss.mkdel(this,function(fF){this.layoutTooltip(fF,fE)}))}else{R.getViewport(ss.mkdel(this,this.layoutTooltip))}},onShowed:function(){if(!ss.staticEquals(this.$2$4,null)){this.$2$4()}},onPrePosition:function(){if(!ss.staticEquals(this.$2$2,null)){this.$2$2()}},onPositionCalculated:function(){if(!ss.staticEquals(this.$2$3,null)){this.$2$3()}},onPositioned:function(){if(!ss.staticEquals(this.$2$5,null)){this.$2$5()}},onClosed:function(){if(!ss.staticEquals(this.$2$1,null)){this.$2$1()}},ensureAttachedAndSized:function(){if(!this.element.parent().is(document.body)){this.element.appendTo(document.body)}},$d:function(){if(tab.DomUtil.nodeHasTextSelection(this.element.get(0))){window.getSelection().removeAllRanges()}},detach:function(){this.$d();this.element.hide();this.element.detach();this.element.off(this.get_eventNamespace());this.element.find('*').off(this.get_eventNamespace()).removeClass('hover')},$6:function(e,fE){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(fE)){return null}this.$o=e;var fF=ss.isValue(this.$r)&&e.y>=ss.unbox(this.$r)-16;var fG=tab.DoubleUtil.roundToInt(this.element.height());var fH=tab.DoubleUtil.roundToInt(this.element.width());var fI=fE.getVisibleRoom(e,1);var fJ=fG+this.get_verticalOffset();var fK=fH+this.get_horizontalOffset();var fL;var fM;if(fI.roomRight>=fK){fL=true;fM=e.x+this.get_horizontalOffset()}else if(fI.roomLeft>=fK){fL=false;if(fI.roomAbove>=fJ||fI.roomBelow>=fJ){fM=e.x+ss.Int32.trunc(fI.roomRight)-fH}else{fM=e.x-fK}}else{fL=true;fM=Math.max(0,e.x-fH+ss.Int32.trunc(fI.roomRight))}var fN=(this.get_showAbove()?this.$7(e,fI,fJ,fK):this.$8(e,fI,fJ,fK,fF));var fO=fN<=e.y;var fP=new en;if(fO){if(fL){fP.position='AR'}else{fP.position='AL'}}else if(fL){fP.position='BR'}else{fP.position='BL'}fP.shownX=fM;fP.shownY=fN;fP.tooltipAnchorY=fN;fP.origX=e.x;fP.origY=e.y;fP.viewport=fE;return fP},$g:function(e){if(ss.isValue(e)){var fE=this.$b(e.position);if(!this.element.hasClass(fE)){this.element.removeClass('tab-tooltipAR tab-tooltipAL tab-tooltipBL tab-tooltipBR');this.element.addClass(fE)}this.$h=e}},$c:function(){if(ss.isValue(this.$h)){this.element.css(ss.mkdict(['left',this.$h.shownX+'px','top',this.$h.shownY+'px']))}},$b:function(e){var fE;switch(e){case'AR':{fE='tab-tooltipAR';break}case'AL':{fE='tab-tooltipAL';break}case'BL':{fE='tab-tooltipBL';break}case'BR':default:{fE='tab-tooltipBR';break}}return fE},layoutTooltip:function(e,fE){this.element.css(ss.mkdict(['top','0','left','0']));if(this.get_freezePositionWhileOpen()){this.$a()}else if(fE){var fF=this.$6(this.get_lastLocation(),e);if(ss.isNullOrUndefined(fF)){return}this.$g(fF);this.$c()}else{this.$9();this.onPrePosition();var fG=this.$6(this.get_lastLocation(),e);if(ss.isNullOrUndefined(fG)){}if(!this.$e(fG)){this.$c();return}this.$g(fG);this.onPositionCalculated();if(this.$p){this.$p=false;this.$f()}this.$c();this.onPositioned()}},$a:function(){this.$9();this.$f();this.$c();this.onPositioned()},$f:function(){this.element.show();this.$k=true;this.onShowed()},$9:function(){for(var e=0;e<this.$m.length;e++){var fE=this.$m[e];fE()}ss.clear(this.$m)},$e:function(e){if(ss.isNullOrUndefined(e)){return false}if(this.$p){return true}if(en.areShownArgsSame(e,this.$h)){return false}return true},$8:function(e,fE,fF,fG,fH){var fI;if(!fH&&fE.roomBelow>=fF){fI=e.y+this.get_verticalOffset();this.$r=null}else if(!fH&&fE.roomAbove>=fF&&fE.roomRight>=fG){fI=e.y+(ss.Int32.trunc(fE.roomBelow)-fF+this.get_verticalOffset())}else if(fE.roomAbove>=fF){fI=e.y-fF;if(!ss.isValue(this.$r)){this.$r=e.y}}else{fI=Math.max(0,e.y-ss.Int32.trunc(fE.roomAbove))}return fI},$7:function(e,fE,fF,fG){var fH;if(fE.roomAbove>=fF){fH=e.y-fF;if(!ss.isValue(this.$r)){this.$r=e.y}}else if(fE.roomBelow>=fF){fH=e.y+this.get_verticalOffset();this.$r=null}else if(fE.roomAbove>=fF&&fE.roomRight>=fG){fH=e.y+(ss.Int32.trunc(fE.roomBelow)-fF+this.get_verticalOffset())}else{fH=Math.max(0,e.y-ss.Int32.trunc(fE.roomAbove))}return fH},setSuppressTooltip:function(e){this.$q=e;if(this.$q&&this.$k&&!this.isInSafeZone(this.get_lastLocation(),false)){this.close()}}},spiff.Widget,[tab.IWidget,tab.IAppendableView,ss.IDisposable,cW]);ss.initClass(eY,a,{add_tooltipClosed:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_tooltipClosed:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},add_mouseExitedTooltip:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_mouseExitedTooltip:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},add_ubertipUpdated:function(e){this.$1$3=ss.delegateCombine(this.$1$3,e)},remove_ubertipUpdated:function(e){this.$1$3=ss.delegateRemove(this.$1$3,e)},add_ubertipActionExecuted:function(e){this.$1$4=ss.delegateCombine(this.$1$4,e)},remove_ubertipActionExecuted:function(e){this.$1$4=ss.delegateRemove(this.$1$4,e)},add_ubertipCommandExecuted:function(e){this.$1$5=ss.delegateCombine(this.$1$5,e)},remove_ubertipCommandExecuted:function(e){this.$1$5=ss.delegateRemove(this.$1$5,e)},get_isTooltipShown:function(){return this.get_tooltip().get_isShown()},get_visualIDPresModel:function(){return this.$1$6},set_visualIDPresModel:function(e){this.$1$6=e},get_tooltip:function(){return this.$1$7},set_tooltip:function(e){this.$1$7=e},get_ubertip:function(){return this.$1$8},set_ubertip:function(e){this.$1$8=e},get_currentBehavior:function(){return this.$2(this.get_currentBehaviorType())},get_currentBehaviorType:function(){return this.$1$9},set_currentBehaviorType:function(e){this.$1$9=e},get_defaultBehaviorType:function(){return this.$1$10},set_defaultBehaviorType:function(e){this.$1$10=e},get_ubertipShouldEnforceButtonOrdering:function(){return false},get_currentTooltipMode:null,get_multiSelectCompleteBehavior:function(){return'sticky'},get_hasContextProvider:function(){return ss.isValue(this.$k)},$j:function(){return ss.mkdel(this,this.$4)},get_testUseOnlyLastHoveredObjectID:function(){return eY.$1},set_testUseOnlyLastHoveredObjectID:function(e){eY.$1=e},close:function(){this.get_tooltip().close()},hoverOverObject:function(e,fE,fF,fG,fH,fI,fJ,fK){if(!this.readyForHover){return}if(ss.isNullOrUndefined(fG)){return}var fL=this.getHoverBehavior(fJ);this.switchTooltipMode(fL);var fM=ss.referenceEquals(fG.toString(),eY.$1);var fN=ss.mkdel(this,function(fP){var fQ=fK==='viz'&&eY.isUbertipHtmlEmpty(fP);this.get_currentBehavior().hoverOverObject(e,fH,fQ,fM)});if(fJ==='mark'&&tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&ss.isValue(fI)&&!this.shouldForceRemoteTooltipForObject(fJ,fG)){if(fM){fN(this.get_ubertip().get_model())}else{var fO=this.getAffectedObjects('mark',fG);this.runBehaviorWithLocalUbertip(fN,fG,fO,fE,fF,fI,fK,fJ,'on-hover')}}else{this.runBehaviorWithRemoteUbertip(fN,{x:fF.x,y:fF.y,w:0,h:0},fK,'on-hover',fJ,null,null,false,null)}},hoverOverWhitespace:function(e,fE){if(!this.readyForHover){return}var fF='W'===eY.$1;this.get_currentBehavior().hoverOverWhitespace(e);if(this.get_currentBehavior().isHoverAllowed(e)){if(!fF){var fG=this.needRemoteCommand(fE,'whitespace','on-hover',0,null);if(fG===1||fG===2){eY.$1='W';this.runBehaviorWithRemoteUbertip(null,{x:-1,y:-1,w:0,h:0},fE,'on-hover','whitespace',null,null,false,null)}}}else if(this.get_tooltip().get_isShown()){eY.$1='W';this.get_tooltip().close()}},hoverOverHeader:function(e,fE,fF,fG,fH){if(!this.readyForHover){return}var fI=fH.length>0&&tab.ActionUtils.getApplicableActions(this.get_visualIDPresModel().worksheet,'on-hover','url').length>0;if(fI){var fJ=!ss.referenceEquals(fH.toString(),eY.$1);this.hoverOverCoordinates(e,fE,fF,fG,null,fH,fJ)}else{this.hoverOverCoordinates(e,fE,fF,fG,null,null,false)}},hoverOverCoordinates:function(e,fE,fF,fG,fH,fI,fJ){if(!this.readyForHover){return}eY.$1=(ss.isValue(fI)?fI.toString():'U');var fK=this.getHoverBehavior(fF);this.switchTooltipMode(fK);var fL=ss.mkdel(this,function(fM){var fN=fG==='viz'&&eY.isUbertipHtmlEmpty(fM);this.get_currentBehavior().hoverOverObject(e,false,fN,false)});this.runBehaviorWithRemoteUbertip(fL,{x:fE.x,y:fE.y,w:0,h:0},fG,'on-hover',fF,fH,fI,fJ,null)},singleSelectComplete:function(e,fE,fF,fG,fH,fI,fJ){var fK=this.getSingleSelectBehavior(fI);this.switchTooltipMode(fK);this.suppressHoverIfNecesary();var fL=this.getSingleSelectBehaviorCallback(e);if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&fI==='mark'){var fM=this.getAffectedObjects(fI,fG);this.runBehaviorWithLocalUbertip(fL,fG,fM,fE,fF,fH,fJ,fI,'on-select')}else{var fN={x:fF.x,y:fF.y,w:0,h:0};this.runBehaviorWithRemoteUbertip(fL,fN,fJ,'on-select',fI,null,null,false,null)}},singleSelectCoordinates:function(e,fE,fF,fG,fH){var fI=this.getSingleSelectBehavior(fG);this.switchTooltipMode(fI);var fJ=ss.mkdel(this,function(fK){this.$h(e)});this.runBehaviorWithRemoteUbertip(fJ,{x:fE.x,y:fE.y,w:0,h:0},fF,'on-select',fG,fH,null,false,null)},$h:function(e){this.get_currentBehavior().singleSelectComplete(e);if(this.get_tooltip().get_isShown()){this.triggerUbertipButtonUpdate()}},multiSelectComplete:function(e,fE,fF){this.switchTooltipMode(this.get_multiSelectCompleteBehavior());this.suppressHoverIfNecesary();var fG=ss.mkdel(this,function(){this.get_currentBehavior().multiSelectComplete(e);eY.$1='U';if(this.get_tooltip().get_isShown()){this.triggerUbertipButtonUpdate()}});this.runBehaviorWithRemoteUbertip(fG,fE,fF,'on-select','unspecified',null,null,false,null)},selectionMoved:function(e){this.get_currentBehavior().selectionMoved(e)},repositionWithinRegion:function(e){this.get_currentBehavior().repositionWithinRegion(e)},onTap:function(){},onScroll:function(){this.get_currentBehavior().onScroll()},onMoving:function(){},onDragEnd:function(e){},onPanOrDragStart:function(e){this.get_currentBehavior().onPanningOrDragging()},onPinchEnd:function(e){},onPress:function(){},onMouseLeaveTheView:function(){eY.$1='U'},dispose:function(){if(ss.keyExists(this.tooltipBehaviors,this.get_currentBehaviorType())){this.tooltipBehaviors[this.get_currentBehaviorType()].detach()}this.disposables.dispose();this.get_tooltip().get_body().off('mouseleave.basemode');this.get_tooltip().dispose();this.get_tooltip().remove_closed(ss.mkdel(this,this.$7));this.get_tooltip().remove_prePosition(ss.mkdel(this,this.$0));this.get_tooltip().remove_showed(ss.mkdel(this,this.$0));this.get_ubertip().remove_commandExecuted(ss.mkdel(this,this.$b));this.get_ubertip().remove_actionExecuted(ss.mkdel(this,this.$a));this.get_ubertip().remove_ubertipMenuToggled(ss.mkdel(this,this.$d));this.get_ubertip().remove_ubertipMenuClosed(ss.mkdel(this,this.$c));this.get_ubertip().dispose()},shownTooltipIsStatic:function(){return this.get_currentBehavior().shownTooltipIsSticky()},isHoverAllowed:function(e){return this.get_currentBehavior().isHoverAllowed(e)},clearTooltipWithFakeHover:function(){if(!this.get_tooltip().get_isShown()||ss.isNullOrUndefined(this.get_tooltip().get_lastLocation())||!this.get_tooltip().isInSafeZone(this.get_tooltip().get_lastLocation(),false)){this.hoverOverWhitespace({x:-1,y:-1},'viz')}},suppress:function(e){this.get_tooltip().setSuppressTooltip(e);this.readyForHover=!e},buildBehaviorsDictionary:null,getSingleSelectBehaviorCallback:null,getSingleSelectBehavior:function(e){return this.get_defaultBehaviorType()},getHoverBehavior:function(e){return this.get_defaultBehaviorType()},shouldForceRemoteTooltipForObject:function(e,fE){return false},suppressHoverIfNecesary:function(){this.readyForHover=false},onBehaviorSwitch:function(){},modelUpdateCallback:function(e){eY.$2=e.tupleId;if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&this.get_currentBehaviorType()==='smooth'&&ss.isValue(e.markBounds)){this.get_currentBehavior().serverMarkBounds=e.markBounds}this.get_tooltip().setTooltipBodyAndReposition(this.get_ubertip().element,ss.mkdel(this,function(){this.$6(e)}))},$6:function(e){var fE=ss.isValue(e)&&e.tupleId===0;if(!fE&&!ss.referenceEquals(e.tupleId,eY.$2)){return}var fF=this.get_ubertip().get_model();this.updateTooltipFromModel(e);this.updateUbertipFromModel(e);if(!ss.staticEquals(this.$1$3,null)){this.$1$3(e)}if(ss.isValue(fF)&&fF.requestId===e.requestId){this.get_ubertip().updatePartiallyFromRemote(fF)}},updateModelFromServerResponse:function(e){this.get_ubertip().updatePartiallyFromRemote(e)},updateUbertipFromModel:function(e){e.tooltipOffset=(ss.isValue(this.get_ubertip().get_model())?this.get_ubertip().get_model().tooltipOffset:null);if(!_.isEqual(e,this.get_ubertip().get_model())){this.get_ubertip().set_model(e)}},updateTooltipFromModel:function(e){this.get_tooltip().tupleId=e.tupleId;if(ss.isValue(e.tooltipOffset)){if(ss.isValue(e.tooltipOffset.x)){this.get_tooltip().set_horizontalOffset(16+e.tooltipOffset.x)}if(ss.isValue(e.tooltipOffset.y)){this.get_tooltip().set_verticalOffset(16+e.tooltipOffset.y)}}else{this.get_tooltip().set_horizontalOffset(16);this.get_tooltip().set_verticalOffset(16)}},switchTooltipMode:function(e){if(this.get_currentBehaviorType()===e){return false}var fE=this.get_currentBehavior();fE.detach();var fF=this.$2(e);fF.attach();this.set_currentBehaviorType(e);this.onBehaviorSwitch();return true},prepareForPositioning:function(){this.get_ubertip().prepareForPositioning(this.shouldShowCommandButtons()&&this.get_ubertip().hasActionsOrSummaryOrCommands())},triggerUbertipButtonUpdate:function(){if(this.shouldShowCommandButtons()&&this.get_ubertip().hasActionsOrSummaryOrCommands()&&this.get_ubertip().get_isShowingFullUbertip()){return}this.get_tooltip().forceLayout()},handleUbertipButtons:function(){if(this.shouldShowCommandButtons()&&this.get_ubertip().hasActionsOrSummaryOrCommands()){this.get_ubertip().showCommandAreaAndActions()}else{this.get_ubertip().hideMenuActionsAndCommandButtons(true)}},shouldShowCommandButtons:function(){return this.get_currentBehavior().shouldShowCommandButtons()},shouldAddCommandButtonsAndActions:function(){return true},getAffectedObjects:function(e,fE){var fF=null;if(this.get_hasContextProvider()){if(ss.contains(this.$k.getSelectedObjects(e),fE)){fF=this.$k.getSelectedObjects(e)}else{fF=[fE]}}return fF},isUbertipObjectSelected:function(e){if(ss.isNullOrUndefined(e)){return false}var fE=((this.get_hasContextProvider()&&e.interactedTupleId!==0)?this.$k.isMarkSelected(e.interactedTupleId):e.tupleSelected);if(fE){return true}var fF=e.refLineSelected||e.trendLineSelected;if(fF){return true}var fG=e.imageRegion;var fH=fG==='bottomaxis'||fG==='leftaxis'||fG==='rightaxis'||fG==='topaxis';if(fH){return true}var fI=fG==='xheader'||fG==='yheader';return fI},runBehaviorWithLocalUbertip:function(e,fE,fF,fG,fH,fI,fJ,fK,fL){var fM=fE.toString();if(!ss.referenceEquals(eY.$1,fM)){this.$n=tab.MiscUtil.clearTimeout(this.$n)}eY.$4+=1;eY.$3=this.get_visualIDPresModel();var fN=eY.$4;var fO=ss.mkdel(this,function(fS){this.$e(e,fE,fJ,fN,fS,fM)});var fP=ss.mkdel(this,function(fS){this.$f(fN,fS)});var fQ=new tab.LocalUbertipInfo(fE,fF,fI,false);var fR=this.needRemoteCommand(fJ,fK,fL,fE,fI);if(fR===1){tab.UberTipClientCommands.localAndRemoteUberTipCommand(fG,fJ,this.get_visualIDPresModel(),{x:fH.x,y:fH.y,w:0,h:0},fE,fQ,fO,fP,this.$j(),fL)}else{tab.UberTipClientCommands.localOnlyUbertipCommand(fG,this.get_visualIDPresModel(),fQ,fO)}if(fR===2){this.$n=window.setTimeout(ss.mkdel(this,function(){tab.UberTipClientCommands.remoteOnlyUbertipCommand(fJ,this.get_visualIDPresModel(),{x:fH.x,y:fH.y,w:0,h:0},fP,this.$j(),fL,null,null,false,eY.$2)}),200)}},$f:function(e,fE){if(!this.$5(e.toString())||!ss.isValue(fE)){return}fE.requestId=e;this.updateModelFromServerResponse(fE)},$e:function(e,fE,fF,fG,fH,fI){if(!this.$5(fG.toString())){if(!ss.referenceEquals(this.get_visualIDPresModel(),eY.$3)){this.readyForHover=true}return}if(!ss.isValue(fH)){return}this.$3(fH,e,fG,fF,function(){eY.$1=fI;eY.$2=fE})},runBehaviorWithRemoteUbertip:function(e,fE,fF,fG,fH,fI,fJ,fK,fL){var fM=(ss.isValue(fJ)?fJ.toString():((fH==='whitespace')?'W':'U'));if(!ss.referenceEquals(eY.$1,fM)){this.$n=tab.MiscUtil.clearTimeout(this.$n)}eY.$4+=1;eY.$3=this.get_visualIDPresModel();var fN=eY.$4;var fO=ss.mkdel(this,function(fP){this.$g(e,fF,fN,fP,fM)});tab.UberTipClientCommands.remoteOnlyUbertipCommand(fF,this.get_visualIDPresModel(),fE,fO,this.$j(),fG,fI,fJ,fK,fL)},$g:function(e,fE,fF,fG,fH){if(!this.$5(fF.toString())){if(!ss.referenceEquals(this.get_visualIDPresModel(),eY.$3)){this.readyForHover=true}return}if(ss.isValue(fG)){this.$3(fG,e,fF,fE,null)}else{this.$1();eY.$1=fH}},needRemoteCommand:function(e,fE,fF,fG,fH){if(tsConfig.is_authoring&&this.get_currentBehaviorType()==='sticky'||!tab.ApplicationModel.get_instance().get_isLocalRenderMode()||e!=='viz'||fE!=='mark'&&fE!=='whitespace'||fF!=='on-hover'||this.$l||ss.isNullOrUndefined(this.$k)||this.$k.isMarkSelected(fG)){return 1}return(this.hasViT(fH)?2:0)},hasViT:function(e){return tab.FeatureFlags.isEnabled('VizInTooltip')&&tab.UbertipSerializer.paneContainsViT(tab.ModelUtils.getVisualModelFromVisualId(this.get_visualIDPresModel()),e)},$4:function(){this.get_ubertip().handleRemoteFailure();this.readyForHover=true},$3:function(e,fE,fF,fG,fH){e.requestId=fF;this.modelUpdateCallback(e);if(!ss.staticEquals(fH,null)){fH()}if(fG==='viz'&&e.isExplicitlyEmpty){var fI=tab.MiscUtil.isNullOrEmpty(e.buttonModels)&&tab.MiscUtil.isNullOrEmpty$1(e.actions)&&tab.MiscUtil.isNullOrEmpty$1(e.actionPMs);var fJ=this.$k.getSelectedObjects('mark');var fK=ss.isValue(fJ)&&ss.isValue(this.get_tooltip().tupleId)&&ss.contains(fJ,this.get_tooltip().tupleId);if(!fK||fI){this.$1();return}}if(ss.isValue(fE)){fE(e)}},$1:function(){this.get_tooltip().close();this.readyForHover=true},$0:function(){if(this.get_isTooltipShown()){this.readyForHover=true}},$2:function(e){return this.tooltipBehaviors[e]},$7:function(){this.readyForHover=true;if(!ss.staticEquals(this.$1$1,null)){this.$1$1()}},$a:function(e,fE){this.get_tooltip().close();if(!ss.staticEquals(this.$1$4,null)){this.$1$4(e,fE)}},$b:function(e,fE){var fF=ss.isValue(fE.command)&&fE.command.get_commandType()===23;if(!fF){this.get_tooltip().close()}if(!ss.staticEquals(this.$1$5,null)){this.$1$5(e,fE)}if(fF){this.$i()}},$i:function(){this.get_tooltip().set_freezePositionWhileOpen(true);var e=null;var fE=ss.isValue(eY.$2)&&ss.unbox(eY.$2)!==0;if(!fE){return}e=eY.$2;this.runBehaviorWithRemoteUbertip(null,{x:-1,y:-1,w:0,h:0},'viz','on-select','mark',null,null,false,e)},$d:function(e){this.$m=e;this.get_currentBehavior().handleUbertipMenuToggle(e)},$c:function(){this.$m=false;this.get_currentBehavior().handleUbertipMenuClose()},$8:function(){this.get_tooltip().close()},$5:function(e){if(ss.isValue(e)&&!ss.referenceEquals(eY.$4.toString(),e)){return false}return true},$9:function(e){if(!this.get_tooltip().get_isShown()||ss.staticEquals(this.$1$2,null)||this.$m){return}var fE=tab.DomUtil.getRectXY(this.get_tooltip().get_body());if(fE.x>e.pageX||fE.x+fE.w<=e.pageX||fE.y>e.pageY||fE.y+fE.h<=e.pageY){this.$1$2({x:e.pageX,y:e.pageY})}}});ss.initClass(eX,a,{get_currentTooltipMode:function(){return'sticky'},onTap:function(){this.get_tooltip().close()},onPress:function(){this.get_tooltip().close()},getSingleSelectBehaviorCallback:function(e){return ss.mkdel(this,function(){this.get_currentBehavior().singleSelectComplete(e)})},shouldForceRemoteTooltipForObject:function(e,fE){var fF=this.getAffectedObjects(e,fE);return e==='mark'&&ss.isValue(fF)&&fF.length>1},showCommandAreaAndActions:function(){this.get_ubertip().showCommandAreaAndActions()}},eY);ss.initEnum(eZ,a,{unspecified:'unspecified',sticky:'sticky',smooth:'smooth',disabled:'disabled'},true);ss.initClass(fa,a,{getSelectedObjects:function(e){if(e==='mark'){return this.$0.tupleSelection.get_ids()}else{return null}},isMarkSelected:function(e){return this.$0.tupleSelection.isObjectSelected(e)}});ss.initClass(fb,a,{get_body:function(){return this.getElementBySelector('.tab-tooltipContent')}},spiff.Template,[ss.IDisposable]);ss.initClass(fc,a,{add_commandExecuted:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_commandExecuted:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_actionExecuted:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_actionExecuted:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_ubertipMenuToggled:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_ubertipMenuToggled:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_ubertipMenuClosed:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_ubertipMenuClosed:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},get_model:function(){return this.$19},set_model:function(e){this.$19=e;this.$y()},get_isShowingFullUbertip:function(){return this.$13.is(':visible')||this.$10.is(':visible')},$Y:function(){return this.$17&&this.hasSummary()},dispose:function(){this.element.detach();this.$1e.remove_showed(ss.mkdel(this,this.handleTooltipShowed));this.$1e.remove_positionCalculated(ss.mkdel(this,this.handleTooltipPositionCalculated));tab.MiscUtil.dispose(this.$1c);this.$d();this.$e();spiff.Widget.prototype.dispose.call(this)},$d:function(){if(!ss.staticEquals(this.$12,null)){this.$1e.remove_positioned(this.$12);this.$12=null}},hasActions:function(){if(ss.isNullOrUndefined(this.$19)){return false}var e=ss.isValue(this.$19.actionPMs)&&this.$19.actionPMs.length>0;var fE=ss.isValue(this.$19.actions)&&this.$19.actions.length>0;return e||fE},hasCommands:function(){if(ss.isNullOrUndefined(this.$19)){return false}return ss.isValue(this.$19.buttonModels)&&this.$19.buttonModels.length>0},hasSummary:function(){if(ss.isNullOrUndefined(this.$19)){return false}return ss.isValue(this.$19.selectionHtml)},hasActionsOrSummaryOrCommands:function(){return this.hasActions()||this.hasSummary()||this.hasCommands()},hideMenuActionsAndCommandButtons:function(e){if(this.get_isShowingFullUbertip()&&e){this.$1e.requestLayout(ss.mkdel(this,function(){this.$I();this.$14.css('min-width','')}))}else{this.$I();this.$14.css('min-width','')}},prepareForPositioning:function(e){if(e){if(!this.$1e.get_isShown()){this.element.css('width','');this.$E(false)}}else{this.hideMenuActionsAndCommandButtons(false);this.$x()}},showCommandAreaAndActions:function(){if(ss.isNullOrUndefined(this.$1e.get_calculatedShownArgs())){return}if(this.$z()){this.updateTooltipAnchor()}else{this.$F()}},$z:function(){return this.get_isShowingFullUbertip()&&!this.$1e.get_freezePositionWhileOpen()},updateTooltipAnchor:function(){if(!this.$b()){return}var e=this.$1e.get_calculatedShownArgs();if(e.shownY===e.tooltipAnchorY){var fE=tab.DoubleUtil.roundToInt(this.$13.outerHeight());e.tooltipAnchorY=e.shownY+fE}},$F:function(){this.$f();var e=this.get_isShowingFullUbertip();this.$I();var fE=!this.$1e.get_isShown()||tab.DoubleUtil.roundToInt(this.element.outerHeight())===0;if(fE){this.$E(false)}else{this.$G(e)}},$G:function(e){var fE=this.$1e.get_calculatedShownArgs();var fF={x:fE.shownX,y:fE.tooltipAnchorY};var fG=fE.viewport.getVisibleRoom(fF,1);var fH=ss.Int32.trunc(fG.roomBelow);var fI=ss.Int32.trunc(fG.roomRight);this.$E(false);this.$14.css('min-width',this.$g()+'px');var fJ=this.$o();if(fJ>this.$1b){this.$1b=fJ}this.$D(this.$1b);var fK=tab.DoubleUtil.roundToInt(this.element.outerHeight());var fL=tab.DoubleUtil.roundToInt(this.$13.outerHeight());var fM=this.$p(fK,fL);if(!e){if(fM>fH||fJ>fI){this.$B(fL);fM=this.$p(fK,fL)}}else if(fJ>fI){this.$C(fJ,fI)}if(fM>fH&&this.$10.outerHeight()>0){this.$S(fH,fM,fF.y)}else{this.$l(fL,fH,fM,fF.y,!e)}},$p:function(e,fE){return 2+(this.$b()?(e-fE):e)},$B:function(e){this.$1e.layoutTooltip(this.$1e.get_calculatedShownArgs().viewport,true);this.handleTooltipPositionCalculated();if(this.$1a==='AL'||this.$J()){this.$1e.get_calculatedShownArgs().shownY=this.$1e.get_calculatedShownArgs().shownY+e;this.$1e.get_calculatedShownArgs().tooltipAnchorY=this.$1e.get_calculatedShownArgs().shownY}},$C:function(e,fE){var fF=this.$1e.get_calculatedShownArgs().shownX;var fG=2+e-fE;this.$1e.get_calculatedShownArgs().shownX=Math.max(0,fF-fG)},$S:function(e,fE,fF){var fG=2+fE-e;var fH=fF-fG;this.$1e.get_calculatedShownArgs().shownY=fH;if(!this.$b()){this.$1e.get_calculatedShownArgs().tooltipAnchorY=fH}},$l:function(e,fE,fF,fG,fH){var fI=this.$1e.get_calculatedShownArgs().tooltipAnchorY;if(this.$b()){fI-=e}var fJ=fG+fE;var fK=Math.min(fI,fJ-fF);this.$I();this.$d();this.$12=ss.mkdel(this,function(){this.$H(fE,fF,fK,fG,fH)});this.$1e.add_positioned(this.$12)},$H:function(e,fE,fF,fG,fH){this.$d();this.$E(fH);switch(this.$1a){case'BR':{if(fH){this.$X(fG-tab.DoubleUtil.roundToInt(this.$13.height()),false)}this.$X(fF,fH);break}case'AR':{if(e<fE||!this.$J()){this.$X(fF,fH)}break}case'BL':case'AL':{this.$X(fF,fH);break}default:{break}}},$X:function(e,fE){if(fE){this.$1e.element.animate(ss.mkdict(['top',e+'px']),'fast')}else{this.$1e.element.css('top',e+'px')}},$b:function(){return this.$1a==='BL'||this.$1a==='BR'},$J:function(){return(this.$1a==='AR'||this.$1a==='BR')&&this.$1e.get_calculatedShownArgs().shownX>this.$1e.get_calculatedShownArgs().origX},handleRemoteFailure:function(){if(this.$18){this.$18=false;if(tab.BaseSession.get_waitHandler().isBusy()){tab.BaseSession.get_waitHandler().reset()}}},hideSpinner:function(){if(tab.BaseSession.get_waitHandler().isBusy()){tab.BaseSession.get_waitHandler().reset()}},handleTooltipPositionCalculated:function(){if(ss.isValue(this.$1a)&&this.$1a===this.$1e.get_calculatedShownArgs().position){return}switch(this.$1e.get_calculatedShownArgs().position){case'AL':case'AR':{this.$15.after(this.$13);this.$14.before(this.element.find('.tab-ubertipSelected'));break}case'BL':case'BR':{this.$15.before(this.$13);this.element.find('.tab-clear').after(this.element.find('.tab-ubertipSelected'));break}}this.$1a=this.$1e.get_calculatedShownArgs().position},handleTooltipShowed:function(){this.$8()},$8:function(){if(this.element.width()===0){return}var e=this.$o();this.$D(e)},$o:function(){return Math.ceil(Math.min(this.element.width(),$(document.body).width()-2))},updatePartiallyFromRemote:function(e){if(ss.isNullOrUndefined(e)){return}if(ss.isNullOrUndefined(this.$19)){this.set_model(e);return}this.$19.requestId=e.requestId;this.$T(e);this.$L(e);this.$P(e);if(tab.VizDataUtils.objectContainsVizInTooltip(this.element)){this.$V(e)}},$P:function(e){var fE=[];var fF=null;var fG=null;if(ss.isValue(this.$19)){fF=fc.$8(e)||fc.$9(e);fG=fc.$5(this.$19,10)}if(ss.isValue(fF)){if(!this.$Y()){e.buttonModels=_.without(e.buttonModels,fF);e.buttonModels.push(fF);fE.push(e.buttonModels.length-1)}}else if(ss.isValue(fG)){e.buttonModels.push(fG)}this.$19.buttonModels=e.buttonModels;this.$O(fE)},$T:function(e){this.$19.selectionHtml=e.selectionHtml;this.$R();if(ss.isValue(this.$19.selectionHtml)&&this.get_isShowingFullUbertip()){this.$x();this.$8()}},$L:function(e){this.$19.actionPMs=e.actionPMs;this.$19.actions=e.actions;this.$K();this.$w()},$V:function(e){if(ss.referenceEquals(this.$19.tooltipHtml,e.tooltipHtml)){return}this.$v(e.tooltipHtml);this.$19.tooltipHtml=e.tooltipHtml;this.$U();this.$Q();this.$1e.requestLayout()},$w:function(){if(this.$18){this.$18=false;if(ss.isValue(this.$19)){for(var e=0;e<this.$19.actions.length;e++){var fE=this.$19.actions[e];if(ss.referenceEquals(fE.get_name(),this.$Z)){var fF=new o;fF.action=fE;this.onActionExecuted(fF)}}}}},onCommandExecuted:function(e){if(!ss.staticEquals(this.$2$1,null)){this.$2$1(this,e)}},onActionExecuted:function(e){if(!ss.staticEquals(this.$2$2,null)){this.$2$2(this,e)}},$e:function(){this.$16.dispose()},$D:function(e){this.element.css('min-width',e+'px');this.$1b=e},$f:function(){this.element.css('min-width','')},$y:function(){this.$e();this.element.show();this.$U();this.$K();this.$O(null);this.$Q();this.$R();this.$x();var e=tab.MiscUtil.isNullOrEmpty$1(this.$19.actions);var fE=tab.MiscUtil.isNullOrEmpty$1(this.$19.actionPMs);var fF=ss.isNullOrEmptyString(this.$19.tooltipHtml);var fG=e&&fE&&fF;if(fG){this.$15.addClass('hide')}else{this.$15.removeClass('hide')}},$x:function(){this.$f();this.$15.css('height','');this.$13.css('height','');var e=this.computeAdjustedTooltipWidth();if(e>0){this.$D(e)}else if(this.element.width()>0){this.$1b=tab.DoubleUtil.roundToInt(this.element.width())}else{this.$1b=0}},computeAdjustedTooltipWidth:function(){var e=tab.DoubleUtil.roundToInt(this.element.width());var fE=-1;var fF=tab.FeatureParamsLookup.getInt(18);if(!ss.isValue(fF)){fF=70}if(e>0&&this.$1b>0&&this.$1b>=e&&this.$1b-e<=ss.unbox(fF)){fE=this.$1b}return fE},$g:function(){var e=0;this.$14.find('li').each(function(fE,fF){e+=fF.firstChild.offsetWidth});return e},$I:function(){this.$1e.element.stop();this.$10.stop();this.$13.stop();this.$10.hide();this.$13.hide()},$E:function(e){if(ss.isNullOrUndefined(this.get_model())){return}if(this.hasActions()){if(e){this.$10.show()}else{this.$10.show()}}if(this.hasCommands()||this.hasSummary()){if(e){this.$13.slideDown('fast')}else{this.$13.show()}}},$U:function(){var e=$(this.$19.tooltipHtml);var fE=this.element.find('.tab-ubertipTooltip');var fF=fc.$6(fE);this.$c(e,fF);fE.html('').append(e);this.$W()},$v:function(e){var fE=tab.DomUtil.roomAroundPosition(this.$1e.element.position());var fF=$(e);var fG=fF.find('span[data-tableau="VizInTooltip"] img');var fH=fG.length;var fI=2+SharedWidgets.TabStyles.Spacing.MediumSpace*2;for(var fJ=0;fJ<fH;fJ++){var fK=parseInt(fG[fJ].getAttribute('width'))+2+SharedWidgets.TabStyles.Spacing.MediumSpace*2;fI+=parseInt(fG[fJ].getAttribute('height'));if(fK>=fE.roomRight||fI>=fE.roomBelow){this.$1e.hideUntilReposition();return}}var fL=$(this.$19.tooltipHtml);var fM=fL.find('span[data-tableau="VizInTooltip"]');var fN=2+SharedWidgets.TabStyles.Spacing.MediumSpace*2;for(var fO=0;fO<fM.length;fO++){var fP=fM[fO];fN+=parseInt(fP.style.height)}if(tab.DoubleUtil.roundToInt(this.$1e.element.outerHeight())-fN+fI>=fE.roomBelow){this.$1e.hideUntilReposition()}},$W:function(){this.$1e.get_body().css('max-width','');this.$1e.element.css('max-width','');tab.VizDataUtils.updateLastVizInTooltipSizes(this.$19.tooltipHtml);var e=SharedWidgets.TabStyles.Spacing.MediumSpace*2;var fE=tab.VizDataUtils.widestVizInTooltip+e;if(fE>740){this.$1e.get_body().css('max-width',(fE+'px').toString());this.$1e.element.css('max-width',(fE+2+'px').toString())}},$c:function(e,fE){ss.clear(this.$1d);var fF=e.find('a.relax-selection');for(var fG=0;fG<fF.length;fG++){this.$A(fF,fG,fE)}},$A:function(e,fE,fF){var fG=e.eq(fE);var fH=fG.children().eq(0);fH.unwrap().unwrap();if(tab.MiscUtil.isNullOrEmpty$3(fH.eq(0).html())){fH.remove();return}if(tsConfig.allow_select){if(fH.css('text-decoration')==='underline'){fH.addClass('tab-selection-relaxation-underlined')}fH.addClass('tab-selection-relaxation');fH.css('text-decoration','');if(fE===fF){fH.addClass('tab-selection-relaxation-selected')}var fI=fG.attr('href');this.$1d.push(new m(fI,fH))}},$R:function(){if(ss.isNullOrUndefined(this.$19.selectionHtml)){this.element.find('.tab-ubertipSelected').html('').addClass('hide')}else{this.element.find('.tab-ubertipSelected').html('').append(this.$19.selectionHtml).removeClass('hide')}},$a:function(e,fE,fF,fG){if(!e.get_hasItems()){return false}var fH=[];fw.newMenuItemsFromCommands(fH,e.get_wrappedCommandItemPresModel().get_commands(),fw.createDropdownMenuCommandHandler,tab.PermissionManager.buildCommandPermission());if(fH.length===0){return false}var fI=this.$j(e);var fJ=new spiff.MenuViewModel(true);fJ.set_menu(new spiff.Menu(fH));var fK=fJ;var fL=ss.mkdel(this,function(){this.$t(fK,fI)});fI.add_click(fL);fK.add_menuItemClicked(spiff.MenuViewModel.handleMenuActionItemClicked);var fM=function(){fK.hide()};this.$1e.add_closed(fM);this.$16.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){fI.remove_click(fL);fK.remove_menuItemClicked(spiff.MenuViewModel.handleMenuActionItemClicked);fK.remove_hidden(ss.mkdel(this,this.$u));this.$1e.remove_closed(fM)})));if(fG){fI.element.fadeIn()}if(fF){fE.append($("<li><div class='tab-separator'>&nbsp;</div></li>"))}var fN=$('<li></li>');fN.append(fI.element);fE.append(fN);this.$16.add$1(fK);tab.ObjectRegistry.newView(spiff.MenuView).call(null,[fK]);return true},$u:function(){if(!ss.staticEquals(this.$2$4,null)){this.$2$4()}},$t:function(e,fE){if(e.get_visible()){e.remove_hidden(ss.mkdel(this,this.$u));e.hide();if(!ss.staticEquals(this.$2$3,null)){this.$2$3(false)}}else{e.add_hidden(ss.mkdel(this,this.$u));var fF=new spiff.ShowMenuOptions(fE.element,true);e.show(fF);if(!ss.staticEquals(this.$2$3,null)){this.$2$3(true)}}},$O:function(e){if(!this.$11){return}var fE=false;var fF=$('<ul></ul>');if(ss.isValue(this.$19.buttonModels)){for(var fG=0;fG<this.$19.buttonModels.length;++fG){var fH=this.$19.buttonModels[fG];if(fH.get_isPlaceholder()){continue}if(fH.get_isMenuButton()){var fI=ss.isValue(e)&&ss.contains(e,fG);fE=this.$a(fH.get_asMenuButton(),fF,fE,fI)||fE}else if(fH.get_status()!=='hidden'){var fJ=ss.isValue(e)&&ss.contains(e,fG);this.$9(fH,fF,fE,fJ);fE=true}}}this.$7(fF,fE);if(fE){this.$14.html('').append(fF).removeClass('hide')}else{this.$14.html('').addClass('hide')}},$9:function(e,fE,fF,fG){var fH=this.$i(e);fH.set_context(e.get_legacyCommandModel());this.$6(fH,ss.mkdel(this,this.$s));if(ss.keyExists(fc.$o,e.get_commandType())){fH.element.width(fc.$o[e.get_commandType()])}if(fG){fH.element.fadeIn()}if(fF){fE.append($("<li><div class='tab-separator'>&nbsp;</div></li>"))}var fI=$('<li></li>');fI.append(fH.element);fE.append(fI)},$i:function(e){var fE=spiff.LabelButton.newNativeButton();if(tsConfig.is_mobile){var fF=fc.$b(fc.$7(e),e.get_name());var fG=$('<div>'+fF+'</div>');fE.setLabelContents(fG)}else{fE.set_label(e.get_name());fE.set_hoverTooltipText(e.get_description())}var fH=new ss.StringBuilder('tab-command');if(ss.isNullOrEmptyString(e.get_imageRes())){fH.append(e.get_commandType())}else{fH.append(fc.$7(e))}fH.append(' ').append(e.get_status());fE.element.addClass(fH.toString());if(e.get_status()==='disabled'){fE.set_disabled(true)}this.$16.add$1(fE);return fE},$j:function(e){var fE=(ss.isValue(e.get_imageRes())?this.$k(e):fc.$3(e));fc.$4(fE);this.$16.add$1(fE);return fE},$k:function(e){var fE=spiff.LabelButton.newMenuButton();fE.set_hoverTooltipText(e.get_description());var fF=fc.$a(e.get_wrappedCommandItemPresModel().get_iconRes());fc.$1(fE,fF);fc.$e(fE,e,fF);return fE},$7:function(e,fE){if(ss.isValue(this.get_model().buttonModels)){var fF=this.get_model().buttonModels;for(var fG=0;fG<fF.length;fG++){var fH=fF[fG];if(!fH.get_isPlaceholder()){continue}var fI=$("<li><div class='tab-separator'>&nbsp;</div></li>");var fJ=fc.$2(fH);this.$16.add$1(fJ);var fK=$('<li></li>');fK.append(fJ.element);if(fH.get_commandType()===10&&this.$Y()&&fE){var fL=_.filter(this.$19.buttonModels,function(fO){return fO.get_commandType()===2});if(ss.isValue(fL)){var fM=e.children().get(2);fI.insertAfter(fM);fK.insertAfter(fI)}else{var fN=e.children().get(0);fK.insertBefore(fN);fI.insertBefore(fN)}}else{if(fE){e.append(fI)}e.append(fK)}document.documentElement.appendChild(e.first().get(0));fc.$o[fH.get_commandType()]=tab.DoubleUtil.roundToInt(fJ.element.innerWidth());fJ.element.width(fc.$o[fH.get_commandType()]);document.documentElement.removeChild(e.first().get(0))}}},$6:function(e,fE){var fF=function(){fE(e)};e.add_click(fF);this.$16.add$1(new tab.CallOnDispose(function(){e.remove_click(fF)}))},$s:function(e){var fE=new ba;fE.command=e.get_context();var fF=fE;this.onCommandExecuted(fF)},$q:function(e){var fE=new o;fE.action=e.get_context();var fF=fE;this.onActionExecuted(fF)},$r:function(e){var fE=e.get_context();if(fc.$0(fE)){tab.BaseSession.get_waitHandler().showAndLock();this.$18=true;this.$Z=e.get_labelElement().text()}else{var fF=tab.ModelUtils.getVisualModelFromVisualId(this.$19.visualId);var fG=[this.$19.tupleId];tab.UberTipClientCommands.executeUbertipAction(fE,fG,fF)}},$K:function(){if(tab.MiscUtil.isNullOrEmpty$1(this.$19.actions)&&tab.MiscUtil.isNullOrEmpty$1(this.$19.actionPMs)){this.$10.html('').removeClass('invisible').addClass('hide')}else if(ss.isValue(this.$19.actions)){this.$N()}else{this.$M()}},$N:function(){var e=$('<ul></ul>');for(var fE=0;fE<this.$19.actions.length;fE++){var fF=this.$19.actions[fE];this.$h(e,fF.get_name(),fF,ss.mkdel(this,this.$q))}var fG=tab.DoubleUtil.roundToInt(this.element.height());this.$10.html('').append(e).removeClass('hide invisible');var fH=tab.DoubleUtil.roundToInt(this.element.height());if(fH!==fG){this.$1e.requestLayout(null,true)}},$M:function(){var e=$('<ul></ul>');var fE=tab.ModelUtils.getVisualModelFromVisualId(this.$19.visualId);if(!ss.isValue(fE)){return}var fF=false;var fG=true;for(var fH=0;fH<this.$19.actionPMs.length;fH++){var fI=this.$19.actionPMs[fH];var fJ=tab.ActionUtils.getActionType(fI);if(!this.$11&&fJ!=='highlight'){continue}var fK=fE.get_vizDataModel();var fL=[this.$19.tupleId];var fM=tab.ApplicationModel.get_instance().get_dataDictionary();var fN=(ss.isValue(fI.linkSpec)?fI.linkSpec.delimiter:null);var fO=tab.VizDataUtils.constructUrlFromString(fM,fI.name,fK,fL,fE.get_worksheetName(),fN);var fP=false;if(fJ==='url'){var fQ=tab.ActionUtils.getUrlActionPm(fI,fE,fL);fP=fQ.item2==='urlConstructionFail';if(ss.isNullOrUndefined(fQ.item1)||ss.isNullOrEmptyString(fO)){fG=false}}if(!fP){this.$h(e,fO,fI,ss.mkdel(this,this.$r))}if(fJ==='filter'||fJ==='url'){fF=true}}if(e.find('li').length>0){var fR=-1;if(ss.isValue(fE.get_sceneModel())){fR=fE.get_sceneModel().get_paneDescriptorCount()}else{}if(fR>1&&fF||!fG){this.$10.html('').append(e).removeClass('hide').addClass('invisible')}else{this.$10.html('').append(e).removeClass('hide invisible')}}},$h:function(e,fE,fF,fG){var fH=spiff.LabelButton.newAnchorButton();fH.set_label(fE);fH.element.addClass('tab-action');fH.set_context(fF);this.$6(fH,fG);this.$16.add$1(fH);var fI=$('<li></li>');fI.append(fH.element);e.append(fI)},$Q:function(){tab.MiscUtil.dispose(this.$1c);if(ss.isNullOrUndefined(this.$19.contentCommands)){return}var e={};for(var fE=0;fE<this.$19.contentCommands.length;fE++){var fF=this.$19.contentCommands[fE];e[fF.get_name()]=fF}for(var fG=0;fG<this.$1d.length;fG++){var fH=this.$1d[fG];if(ss.keyExists(e,fH.$0())){this.$m(fH,e)}}},$m:function(e,fE){var fF=e.$2();var fG={tap:ss.mkdel(this,function(){if(!fF.hasClass('tab-selection-relaxation-selected')){var fH=fE[e.$0()];this.$n(fF,fH)}})};this.$1c.push(new spiff.TableauEventHandler.$ctor1(fF.get(0),fG))},$n:function(e,fE){var fF=ss.mkdict(['isSelected',true]);e.data(fF);e.addClass('tab-selection-relaxation-selected');var fG=new ba;fG.command=fE;this.onCommandExecuted(fG)}},spiff.Widget,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(fd,a,{get_keyCombos:function(){return tab.KeyCombos.op_Implicit(new tab.KeyCombo.$ctor3(new tab.KeyModifiers(false,false,false,true,false,false,false,false,false),90,[]))},get_commandId:function(){return{ns:'tabdoc',cmd:'undo'}}},fe,[tab.IKeyboardShortcut]);ss.initClass(ff,a,{});ss.initClass(fg,a,{render:function(){var e={tap:ss.mkdel(this,function(fH){this.props.removeUser(this.props.user)})};var fE=spiff.EventForwarder.span(e,{className:'tabUserPillRemove'},['×']);var fF=spiff.DOMElements.span({className:'tabUserPillName'},this.props.user.friendlyName);var fG=spiff.DOMElements.div(this.$1(),fF,fE);if(this.props.pillStatus===1){return React.createElement(SharedWidgets.ChromeTooltipWidget,{getContent:ss.mkdel(this,this.$0),defaultSide:'Bottom',width:232},[fG])}else{return fG}},$1:function(){var e='tabUserPill';var fE=this.props.user.friendlyName;var fF=this.props.pillStatus;if(fF===1){e+=' error';fE=null}else if(fF===2){e+=' pending'}return{className:e,title:fE}},$0:function(){var e=$.Deferred();var fE=spiff.DOMElements.div({className:'userPillErrorTooltip'},this.props.errorText);e.resolve(fE);return e}},React.Component);ss.initClass(fh,a,{render:function(){var e=_.map(this.props.users,ss.mkdel(this,function(fH){return React.createElement(fg,{removeUser:this.props.removeUser,addUser:this.props.addUser,user:fH,pillStatus:(ss.staticEquals(this.props.userValidator,null)?0:this.props.userValidator(fH)),errorText:(!ss.staticEquals(this.props.invalidUserTextGenerator,null)?this.props.invalidUserTextGenerator(fH):'')})}));var fE=new spiff.ScrollingProps;fE.scrollY=true;fE.scrollbars=true;fE.alwaysShowScrollbarsIfScrollable=true;var fF=fE;var fG=spiff.ScrollingComponent.createScroller(fF,e);return spiff.DOMElements.div({className:'tabUserPillsComponent'},fG)}},React.Component);ss.initClass(fi,a,{add_propsUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_propsUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_props:function(){return this.$2$2},set_props:function(e){this.$2$2=e},addUser:function(e){if(_.any(this.get_props().users,function(fE){return fE.id===e.id})){return}this.get_props().users.push(e);this.raiseActionEvent(this.$2$1)},removeUser:function(e){var fE=ss.remove(this.get_props().users,e);if(fE){this.raiseActionEvent(this.$2$1)}},setUsers:function(e){_.each(this.get_props().users,ss.mkdel(this,function(fE){this.removeUser(fE)}));_.each(e,ss.mkdel(this,function(fE){this.addUser(fE)}))}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(fj,a,{$1:function(){this.prevButton.addClass('tabCatLegendScrollUp');this.nextButton.addClass('tabCatLegendScrollDown')}},cZ,[ss.IDisposable]);ss.initClass(fk,a,{add_refreshLegacyLegendImages:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_refreshLegacyLegendImages:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},get_cacheVersion:function(){return this.$3},get_viewWidget:function(){return this.$5},get_viewSession:function(){return this.$4},get_sheetName:function(){return this.$4.sheetId},dispose:function(){this.$5=null;this.$2.dispose()},setTiledViewer:function(e){this.$5=e},$0:function(e){if(ss.isNullOrUndefined(e)){return}var fE=e.layoutStatus;if(ss.isNullOrUndefined(fE)){return}if(!tab.CommandController.get().processingRenderModeChange&&!tab.CommandController.get().processingStoryPointChange){this.incrementCacheVersion();var fF=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),this.get_sheetName());if(fF.get_isVisualValid()){this.$5.doTiledViewerRefreshImages(fF.get_tileCacheUrl());if(!ss.staticEquals(this.$1$2,null)){this.$1$2()}}}},$1:function(e){if(!ss.staticEquals(fk.$1$1,null)){fk.$1$1(this.get_sheetName(),e)}this.$0(e)},incrementCacheVersion:function(){this.$3+=1}},null,[ss.IDisposable,tab.IViewController]);ss.initClass(fl,a,{get_toolbarViewModel:function(){return this.$g.get_toolbarViewModel()},dispose:function(){if(ss.isValue(this.$h)){this.$h.dispose();this.$h=null}},exportImage:function(){var e=tab.ApplicationModel.get_instance().get_workbook().get_currentSheetStoryPointId();var fE=tableau.types.ExportDialogType['ExportImage'];var fF=[];var fG=[];if(this.$g.get_isDashboard()){var fH={};var fI=this.$g.get_viewControllers();if(ss.isValue(fI)){$.each(fI,function(fJ,fK){var fL=fK.get_viewWidget().get_scrollPosition();var fM=fL.x;var fN=fL.y;if(fM!==0||fN!==0){fH[fK.get_sheetName()+'-x']=fM;fH[fK.get_sheetName()+'-y']=fN;fG.push({x:fM,y:fN});fF.push(fK.get_sheetName())}})}}tab.ExportServerCommands.exportImage(tsConfig.current_sheet_name,e,fE,fF,fG)},exportData:function(e){if(ss.isNullOrUndefined(e)){e=tab.ModelUtils.findActiveOrDefaultVisual().get_worksheetName()}var fE=tab.ModelUtils.findContentDashboard().getViewSession(e);if(ss.isValue(fE)){var fF=tab.ModelUtils.findActiveOrDefaultVisual().get_visualId();window.open(fE.formatUnderlyingDataURL(null,fF),fE.getWindow('vud'),'scrollbars,resizable')}},exportCrosstab:function(e){if(ss.isNullOrUndefined(e)){e=tab.ModelUtils.findActiveOrDefaultVisual().get_worksheetName()}var fE=tab.ModelUtils.findContentDashboard().getViewSession(e);if(ss.isValue(fE)){var fF=tableau.types.ExportDialogType['ExportCrosstab'];fE.fileDownloadHelper.openDownload(fE.formatExportCrossTabURL('utf16'),fF)}},exportPdf:function(){if(tab.FeatureFlags.isEnabled('NewPdfDialog')){var e=new cl;e.triggerExportPdfUI()}else{if(ss.isValue(this.$h)){this.$h.dispose()}this.$g.$6(ss.mkdel(this,function(fE){this.$h=fE;this.$h.add_closed(ss.mkdel(this,function(){this.$h.dispose();this.$h=null}));this.$h.show()}))}},$3:function(){if(this.$g.get_autoUpdate()){this.$f()}},$5:function(){if(!this.$g.get_autoUpdate()){this.$f()}},$1:function(){return this.$g.get_autoUpdate()},$f:function(){this.$g.set_autoUpdate(!this.$g.get_autoUpdate());tab.ToolbarServerCommands.setAutoUpdate(this.$g.get_autoUpdate());tab.BaseSession.autoUpdate=this.$g.get_autoUpdate();if(this.$g.get_autoUpdate()&&this.$g.get_invalid()){tab.CommandController.get().refreshLayout()}},$2:function(){return!tsConfig.previewMode&&!ss.isNullOrEmptyString(tsConfig.downloadURI)||tsConfig.is_metrics_view},$0:function(e){var fE;if(tsConfig.is_metrics_view){fE=this.$g.get_session().metricsViewDownloadUrl()}else{fE=this.$6(e)}window.open(fE)},$4:function(){tab.ToolbarServerCommands.refreshData()},$d:function(){if(ss.isValue(this.$g.get_toolbarViewModel())){this.$g.get_toolbarViewModel().showDialog('share')}},$9:function(){if(ss.isValue(this.$g.get_toolbarViewModel())){this.$g.get_toolbarViewModel().showDialog('customviews')}},$a:function(){if(ss.isValue(this.$g.get_toolbarViewModel())){this.$g.get_toolbarViewModel().showDialog('alert')}},$e:function(){if(ss.isValue(this.$g.get_toolbarViewModel())){this.$g.get_toolbarViewModel().showDialog('subscribe')}},$c:function(){if(ss.isValue(this.$g.get_toolbarViewModel())){this.$g.get_toolbarViewModel().showPerformanceMetrics()}},$b:function(){if(ss.isValue(this.$g.get_toolbarViewModel())){this.$g.get_toolbarViewModel().showDialog('download')}},$8:function(){},$7:function(){},$6:function(e){if(ss.isValue(e)){var fE=e.match(fl.$0);if(ss.isValue(fE)&&fE.length>=2){return tabBootstrap.ViewerBootstrap.get_instance().location.protocol+'//'+tabBootstrap.ViewerBootstrap.get_instance().location.host+fE[1]}}return e}},null,[ss.IDisposable]);ss.initClass(fm,a,{add_viewportChanged:function(e){var fE=ss.staticEquals(this.$1$1,null);this.$9(e);if(fE){this.$3()}},remove_viewportChanged:function(e){this.$a(e);if(ss.staticEquals(this.$1$1,null)){this.$4()}},$9:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},$a:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},get_lastViewportRect:function(){return this.$1$2},set_lastViewportRect:function(e){this.$1$2=e},$5:function(){return(ss.isValue(tab.WindowHelper.get_windowParent().visualViewport)?tab.WindowHelper.get_windowParent().visualViewport:tab.WindowHelper.get_windowParent())},$3:function(){if(tabBootstrap.Utility.get_embedMode()!=='crossDomainEmbedded'){try{this.$5().addEventListener('scroll',ss.mkdel(this,this.$0));this.$0();return}catch(e){}}this.$8=tab.WindowHelper.requestAnimationFrame(ss.mkdel(this,this.$2))},$4:function(){if(tabBootstrap.Utility.get_embedMode()!=='crossDomainEmbedded'){try{this.$5().removeEventListener('scroll',ss.mkdel(this,this.$0));return}catch(e){}}tab.WindowHelper.cancelAnimationFrame(this.$8)},$0:function(){if(this.$7){this.$6=true;return}this.$7=true;R.getViewport(ss.mkdel(this,this.$1))},$1:function(e){var fE=e.get_dimensions();var fF=ss.isNullOrUndefined(this.get_lastViewportRect())||!tab.RectUtil.isEqual(this.get_lastViewportRect(),fE);if(fF){this.set_lastViewportRect(fE);if(!ss.staticEquals(this.$1$1,null)){this.$1$1()}}this.$7=false;if(this.$6){this.$6=false;this.$0()}},$2:function(){this.$0();this.$8=tab.WindowHelper.requestAnimationFrame(ss.mkdel(this,this.$2))}});ss.initClass(fn,a,{});ss.initClass(fo,a,{handleCommandCompleted:function(){this.$0()},handleCommandStarted:function(e){this.$2=e;this.$1()},$1:function(){if(ss.isNullOrUndefined(this.$2)||ss.isNullOrUndefined(this.$2.get_remoteCommands())){return}var e=this.$2.get_remoteCommands();if(e.length!==1){return}if(ss.isNullOrUndefined(fo.$0)){this.parentNode=document.createElement('div');var fE=this.$3||{waitingTitle:tab.Strings.WaitDialogDefaultTitleStatus};fo.$0=React.createElement(fp,fE);ReactDOM.render(fo.$0,this.parentNode)}},$0:function(){if(!ss.staticEquals(this.$4,null)){this.$4()}fo.$0=null;this.$2=null;_.defer(ss.mkdel(this,this.dispose))}},P,[ss.IDisposable,tab.IWaitForCommands]);ss.initClass(fp,a,{render:function(){return React.createElement(SharedWidgets.DialogWidget,{children:this.$0(),isModal:true,dialogBodyStyle:{height:200+'px',width:375+'px',overflow:'visible',padding:0},disableAutoFocus:true,onCloseRequest:function(){},positioningBehavior:0,shouldAdjustPositionOnWindowResize:true,shouldRecenterOnUpdate:true,shouldReturnFocusOnClose:false,showFooter:false,testId:'WaitingDialog',type:2,zIndex:1000})},$0:function(){return React.createElement(Cancel.WaitingComponent,{message:this.props.waitingMessage,showButton:false,title:this.props.waitingTitle})}},spiff.PureRenderComponent);ss.initClass(fq,a,{updateContentTemplate:function(e){this.domRoot.children().detach();this.domRoot.append(e.domRoot)}},spiff.Template,[ss.IDisposable]);ss.initClass(fr,a,{get_zoneModel:function(){return this.$k.get_webZoneModel().get_zoneModel()},get_webZonePresModel:function(){return this.$k.get_webZoneModel().pm},get_domRoot:function(){return this.get_template().domRoot},$g:function(){return this.get_template()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$a()},$c:function(e,fE){if(fE.get_propertyName()==='isActiveZone'){this.$f()}},$a:function(){var e=ff.absolutizeURI(this.get_webZonePresModel().url,true);var fE=tab.WindowHelper.getLocation(window.window).protocol;if(fE==='https:'&&ss.startsWithString(e,'http:')){this.$d(e)}else{this.$e(this.get_webZonePresModel().url)}this.$f()},$d:function(e){var fE=(tsConfig.is_authoring?new cG(e):new cH(e));this.$g().updateContentTemplate(fE)},$e:function(e){if(ss.isNullOrUndefined(this.$h)){this.$h=new cQ('frame_'+this.get_zoneModel().get_zoneId(),this.$j)}tab.DomUtil.resize(this.$h.get_frame()[0],{l:0,t:0,w:this.get_zoneModel().get_contentWidth(),h:this.get_zoneModel().get_contentHeight()});var fE=ff.absolutizeURI(e,true);this.$h.setSrc(fE,e);if(this.$h.domRoot.parent().length===0){this.$g().updateContentTemplate(this.$h)}},$9:function(){this.$j.setActive()},$f:function(){if(!tsConfig.is_authoring||tsConfig.is_mobile){return}if(ss.isNullOrUndefined(this.$i)){var e=new spiff.Glass(this.element[0],false);e.set_opaque(false);this.$i=e;this.$i.add_click(ss.mkdel(this,this.$9));this.disposables.add$1(this.$i)}if(this.$j.get_isActiveZone()){this.$i.hide()}else{this.$i.show()}},$b:function(){this.$a()}},ss.makeGenericType(spiff.BaseView$1,[fs]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[fs])]);ss.initClass(fs,a,{add_newWebZone:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newWebZone:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_webZoneModel:function(){return this.$3},get_url:function(){return this.get_webZoneModel().get_url()},handleNewWebZone:function(){this.$2()},$2:function(){if(ss.isValue(this.$2$1)){this.$2$1()}}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(ft,a,{componentDidMount:function(){this.$0.done(ss.mkdel(this,function(e){var fE=new fv;fE.componentType=e;this.setState(fE)}))},render:function(){if(ss.isNullOrUndefined(this.state.componentType)){return null}return React.createElement(this.state.componentType,this.props.initialProps)}},React.PureComponent);ss.initClass(fu,a,{});ss.initClass(fv,a,{});ss.initClass(fw,a,{});ss.initClass(fx,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(fy,a,{get_dom:function(){return this.get_template()},get_dashboardNode:function(){return this.$h.get_dashboardNode()},get_containerNode:function(){return this.$h.get_containerNode()},get_dashboardView:function(){return this.$h},get_dashboardSpacerSize:function(){return(ss.isNullOrUndefined(this.get_dashboardView())?null:tab.DashboardSizeCalculator.calculateContainerSize(this.get_dashboardView().get_dashboardSize()))},dispose:function(){this.$e();this.$h=tab.MiscUtil.dispose$1(this.$h);this.$g=tab.MiscUtil.dispose$1(this.$g);if(ss.isValue(this.$i)){ReactDOM.unmountComponentAtNode(this.$i)}ss.makeGenericType(spiff.BaseView$1,[fz]).prototype.dispose.call(this)},$e:function(){var e=$(G.tabContainerSelector);e.appendTo(this.get_dom().centeringContainer)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$9();this.$a();this.get_dom().dashboardSpacer.scroll(ss.mkdel(this,function(e){this.$d()}));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_dom().dashboardSpacer.off('scroll')})))},$9:function(){var e=$(G.tabContainerSelector);e.appendTo(this.get_dom().dashboardSpacer)},$a:function(){if(ss.isValue(this.$j.get_dashboardViewModel())){if(tab.NaturalLanguageUtil.isNlpView()){tab.ModuleManager.load$1('natural-language-layout',[]).done(ss.mkdel(this,function(e){this.$i=dp.createNaturalLanguageLayoutParentElement();dp.whenNaturalLanguageLayoutModuleLoaded(e,this.$i)}))}this.$j.get_dashboardViewModel().add_sizeChanged(ss.mkdel(this,this.$c));this.$j.get_dashboardViewModel().add_portSizeChanged(ss.mkdel(this,this.$c));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$j.get_dashboardViewModel().remove_sizeChanged(ss.mkdel(this,this.$c));this.$j.get_dashboardViewModel().remove_portSizeChanged(ss.mkdel(this,this.$c))})));this.$h=tab.ObjectRegistry.newView(bt).call(null,[this.$j.get_dashboardViewModel()]);this.$h.addToDom(this.get_dom().dashboardSpacer);this.colorDashboardSpacer();this.get_dom().dashboardSpacer.css('visibility',(tab.NaturalLanguageUtil.isNlpView()?'hidden':'visible'))}this.resizeDashboardSpacer()},$c:function(){this.resizeDashboardSpacer();this.get_viewModel().raiseWorkbookResized()},resizeDashboardSpacer:function(){if(tab.FeatureFlags.isEnabled('IframeSizedToWindow')){var e=this.get_dashboardSpacerSize();if(ss.isValue(e)){var fE=null;fE=(tsConfig.is_authoring?{overflow:(this.get_viewModel().get_scrollDashboardArea()?'auto':'')}:{margin:'auto'});this.get_dom().dashboardSpacer.css(fE);var fF=(tsConfig.is_authoring?this.$j.get_dashboardContainerBounds():tab.DashboardSizeCalculator.asRect(e));tab.DomUtil.setContentBox(this.get_dom().dashboardSpacer.get(0),fF);var fG=tab.FeatureParamsLookup.getBool(57);if(fG){var fH={overflow:'hidden'};$(G.dashboardViewportSelector).css(fH)}else if(BrowserSupport.BrowserSupport.IsIE()){var fI=tab.DashboardSizeCalculator.get_dashboardViewportSizeWithTabs();var fJ={overflow:'hidden'};if(fI.w<e.w||fI.h<e.h){fJ.overflow='auto'}$(G.dashboardViewportSelector).css(fJ)}}else{var fK=this.$j.get_dashboardContainerBounds();var fL={overflow:''};if(this.get_viewModel().get_scrollDashboardArea()){fL.overflow='auto'}this.get_dom().dashboardSpacer.css(fL);tab.DomUtil.setContentBox(this.get_dom().dashboardSpacer.get(0),fK);this.$f()}if(tsConfig.is_authoring){this.$d()}}},$d:function(){if(ss.isValue(this.get_viewModel().get_dashboardViewModel())&&this.get_viewModel().get_dashboardViewModel().get_isStory()){tab.ModuleManager.load(tab.IStoryModule).call(null,[]).done(function(e){e.fireCloseStoryUberMenu()})}},handleFullScreenChanged:function(){if(tab.FeatureFlags.isEnabled('IframeSizedToWindow')){if(tsConfig.isPublic){spiff.FullscreenUtil.add_fullscreenStateChanged(ss.mkdel(this,this.$c));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){spiff.FullscreenUtil.remove_fullscreenStateChanged(ss.mkdel(this,this.$c))})))}}else{spiff.FullscreenUtil.add_fullscreenStateChanged(ss.mkdel(this,this.$f));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){spiff.FullscreenUtil.remove_fullscreenStateChanged(ss.mkdel(this,this.$f))})))}},$f:function(){if(BrowserSupport.BrowserSupport.IsIE()&&BrowserSupport.BrowserSupport.BrowserVersion()<=11){this.get_dom().centeringContainer.css('height','');if(spiff.FullscreenUtil.get_inFullscreenMode()){var e=this.$j.get_dashboardContainerBounds().h;e+=tabBootstrap.VizLayoutConstants.get_tabsHeight();e+=(tsConfig.toolbarContainerVis?tabBootstrap.VizLayoutConstants.get_vizToolbarHeight():0);this.get_dom().centeringContainer.css('height',e+'px')}}},colorDashboardSpacer:function(){var e=this.$j.get_dashboardBackgroundColor();if(ss.isValue(this.$j.get_dashboardViewModel())&&this.$j.get_dashboardViewModel().get_hasGutter()){e=''}this.get_dom().dashboardSpacer.css('background-color',e)},$b:function(){tab.ModuleManager.load(tab.IDataConnectionModule).call(null,[]).done(ss.mkdel(this,function(e){this.$g=e.createDataConnectionPromptView(this.$j.get_connectionPromptViewModel())}))}},ss.makeGenericType(spiff.BaseView$1,[fz]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[fz])]);ss.initClass(fz,a,{add_newDashboard:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newDashboard:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_newDataConnectionPrompt:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_newDataConnectionPrompt:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_hasPrompt:function(){return this.$7.get_hasPrompt()},get_dashboardViewModel:function(){return this.$6},get_connectionPromptViewModel:function(){return this.$5},get_scrollDashboardArea:function(){if(!tsConfig.is_authoring||this.$7.get_sheetType()==='worksheet'){return false}var e=false;if(ss.isValue(this.get_dashboardViewModel())){var fE=this.get_dashboardViewModel().get_size();var fF=this.get_dashboardPortSizeContainer();e=fE.w===fF.w&&fE.h===fF.h}return!e},get_contentDashboardViewModel:function(){if(!this.$7.get_isCurrentSheetStoryboard()){return this.$6}var e=this.$6.get_zoneViewModels();var fE=_.keys(e);for(var fF=0;fF<fE.length;fF++){var fG=fE[fF];var fH=e[fG];if(fH.get_zoneType()==='flipboard'){if(ss.isNullOrUndefined(fH.get_zoneContentViewModel())){return null}return fH.get_zoneContentViewModel().get_dashboardViewModel()}}return null},get_dashboardPortSizeContainer:function(){var e=tabBootstrap.ViewerBootstrap.get_instance().getWebClientPortSize(tsConfig.current_sheet_type);var fE={l:0,t:0,w:e.w,h:e.h};return fE},get_dashboardContainerBounds:function(){var e=H.getClientBounds();return{l:0,t:0,w:e.w,h:e.h}},get_dashboardBackgroundColor:function(){return this.get_dashboardViewModel().get_backgroundColor()},dispose:function(){if(ss.isValue(this.$6)){this.$6.dispose()}if(ss.isValue(this.$5)){this.$5.dispose()}this.$7.remove_newDashboard(ss.mkdel(this,this.$2));spiff.BaseViewModel.prototype.dispose.call(this)},$2:function(e){if(ss.isValue(this.$6)){this.$6.dispose()}this.$6=bu.new$1(e);this.raiseActionEvent(this.$2$1)},$3:function(e){if(ss.isNullOrUndefined(this.get_connectionPromptViewModel())){tab.ModuleManager.load(tab.IDataConnectionModule).call(null,[]).done(ss.mkdel(this,function(fE){this.$5=fE.createDataConnectionPromptViewModel(e);this.raiseActionEvent(this.$2$2)}))}else{this.get_connectionPromptViewModel().get_promptUpdated()(e)}},$4:function(){this.$5=tab.MiscUtil.dispose$1(this.get_connectionPromptViewModel())},raiseWorkbookResized:function(){this.raiseActionEvent(fz.$2$3)}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(fA,a,{get_zoneExtension:function(){return this.domRoot.children('.tab-zoneExtension')},get_zoneMargin:function(){return this.domRoot.children('.tab-zone-margin')},get_zonePadding:function(){return this.get_zoneMargin().children('.tab-zone-padding')},get_contentHolder:function(){return this.get_zonePadding()}},spiff.Template,[ss.IDisposable]);ss.initClass(fB,a,{$t:function(){return this.$B},$u:function(e){this.$B=e;this.$b(ss.mkdel(this,function(){this.$B.addToDom(this.get_dom().get_contentHolder())}))},$v:function(){return this.get_viewModel()},get_parameterControlView:function(){return this.$t()},get_dom:function(){return this.get_template()},dispose:function(){this.$v().remove_updateZone(ss.mkdel(this,this.$l));this.$v().remove_resizeZone(ss.mkdel(this,this.$j));this.$v().remove_updateZIndex(ss.mkdel(this,this.$k));this.$v().remove_newZoneContent(ss.mkdel(this,this.$d));this.$v().remove_validStateChanged(ss.mkdel(this,this.$o));if(ss.isValue(this.$B)){this.$B.dispose();this.$B=null}this.$p();ss.makeGenericType(spiff.BaseView$1,[fC]).prototype.dispose.call(this)},$p:function(){if(ss.isValue(this.$z)){this.$z.dispose();this.$z=null}},onViewModelPropertyChanged:function(e,fE){ss.makeGenericType(spiff.BaseView$1,[fC]).prototype.onViewModelPropertyChanged.call(this,e,fE);if(fE.get_propertyName()==='isActiveZone'){this.$q()}if(fE.get_propertyName()==='isReadyZone'){this.$r()}},$a:function(){if(this.get_template().domRoot.get(0).offsetHeight===0||this.get_template().domRoot.get(0).offsetWidth===0){return}if(ss.isNullOrUndefined(this.$z)){this.$z=new spiff.Glass(this.get_template().domRoot.get(0),true);this.$z.setColor(this.$v().get_model().get_dashboardModel().get_backgroundColor());this.$z.set_opaque(true);this.$z.set_preventWebPageScroll(true)}this.$z.show()},$s:function(){if(ss.isValue(this.$z)&&tab.ApplicationModel.get_instance().get_autoUpdate()){this.$z.element.css('cursor','progress')}},$c:function(){this.$p()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(ss.isNullOrUndefined(this.$t())){this.$l();this.$j();if(ss.isValue(this.$v().get_zoneContentViewModel())){this.$d(this.$v().get_zoneContentViewModel())}this.$b(ss.mkdel(this,this.$o))}this.$b(ss.mkdel(this,function(){if(ss.contains(fB.$3,this.$v().get_zoneType())){this.element.addClass('tabSuppressVizTooltipsAndOverlays')}this.element.addClass('tabZone-'+this.$v().get_zoneType());if(tab.ProgressiveLoader.get_progressiveLoadEnabled()&&!BrowserSupport.BrowserSupport.IsIE()){this.get_template().domRoot.addClass('fade-bg')}if(this.get_viewModel().get_isSetActiveZoneSupported()){var e=spiff.TableauClickHandler.targetAndClick(this.element[0],ss.mkdel(this,function(fE){this.get_viewModel().setActive()}));e.set_stopPropagationOnEvent(false);this.disposables.add$1(e)}}))},$q:function(){this.get_template().domRoot.toggleClass('tabZoneSelected',this.get_viewModel().get_isActiveZone())},$r:function(){this.get_template().domRoot.toggleClass('tabZoneReady',this.get_viewModel().get_isReadyZone())},$l:function(){this.$k();this.get_template().domRoot.attr('id',fB.$0(this.get_viewModel().get_zoneId()));this.$q();var e=this.$v().get_zoneType();var fE=e==='layout-flow'||e==='layout-free-form'||e==='empty';this.get_template().domRoot.toggleClass('wcLayoutContainer',fE);this.get_dom().get_zoneMargin().css(this.$v().get_marginCss());this.get_dom().get_zoneMargin().css(this.$v().get_borderCss());this.get_dom().get_zonePadding().css(this.$v().get_paddingCss());if(ss.contains(fB.zonesThatUseStyledBox,e)){this.get_dom().get_contentHolder().css(this.$v().get_contentContainerCss())}else{var fF=this.$v().get_backgroundColor();if(!ss.referenceEquals(fF,this.$w)){this.get_dom().get_contentHolder().css('background-color',fF);this.$w=fF}}this.get_dom().get_contentHolder().toggleClass('tab-darkBackground',this.$v().get_contentHasDarkBackground());if(ss.isValue(this.$t())&&e==='paramctrl'){this.get_parameterControlView().updateViewProperties()}this.$o()},$k:function(){var e=this.$v().get_zoneZIndex();if(e!==this.$A){this.$A=e;this.get_template().domRoot.css('z-index',e.toString())}},$j:function(){var e=this.$v();var fE={width:e.get_width()+'px',height:e.get_height()+'px',top:e.get_y()+'px',left:e.get_x()+'px'};this.get_template().domRoot.css(fE)},$o:function(){if(!this.$v().get_valid()){this.$a();if(tab.ApplicationModel.get_instance().get_isOffline()){return}if(this.$v().get_isVisualValid()){this.$s()}}else{if(ss.isValue(this.$z)){if(!ss.staticEquals(fB.$3$1,null)){fB.$3$1()}}this.$c()}},$i:function(e,fE){var fF=tsConfig.current_sheet_type==='dashboard';var fG=tsConfig.current_sheet_type==='story'&&this.$n();if(e&&(fF||fG)){var fH=this.disposables;var fI=this.get_dom().domRoot[0];var fJ=this.get_viewModel();fH.add$1(spiff.TableauClickHandler.targetAndDoubleClick(fI,ss.mkdel(fJ,fJ.openRichTextEditorDialog)))}var fK=new eG.$ctor1(fE,1);this.$u(fK)},$h:function(e,fE){var fF=tsConfig.current_sheet_type==='dashboard';var fG=tsConfig.current_sheet_type==='story'&&this.$v().get_model().get_isStorySpecific();var fH=tsConfig.current_sheet_type==='story'&&!this.$v().get_model().get_isStorySpecific()&&tab.FeatureFlags.isEnabled('RichTextEditingTextZoneDelta');if(e&&(fF||fG||fH)){var fI=this.disposables;var fJ=this.get_dom().domRoot[0];var fK=this.get_viewModel();fI.add$1(spiff.TableauClickHandler.targetAndDoubleClick(fJ,ss.mkdel(fK,fK.openRichTextEditorDialog)))}var fL=new eG.$ctor1(fE,-1);this.$u(fL)},$g:function(e){if(tab.FeatureFlags.isEnabled('WebDropServerRenderedLegends')||tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(ss.isInstanceOfType(e,tab.ICategoricalLegendViewModel)){this.$u(tab.ObjectRegistry.resolve(ss.makeGenericType(tab.ICategoricalLegendView$1,[tab.ICategoricalLegendViewModel])).call(null,[e]))}else if(ss.isInstanceOfType(e,tab.IQuantitativeColorLegendViewModel)){tab.ModuleManager.load(tab.ILegacyDojoUIModule).call(null,[]).done(ss.mkdel(this,function(fE){this.$u(fE.createQuantitativeColorLegendView(e))}))}}else{tab.ModuleManager.load(tab.ILegacyDojoUIModule).call(null,[]).done(ss.mkdel(this,function(fE){var fF=fE.createLegacyLegendView(e);this.$u(fF)}))}},$f:function(e){tab.ModuleManager.load(tab.IStoryModule).call(null,[]).done(ss.mkdel(this,function(fE){this.$x=fE.newFlipboardNavigatorView(e).pipe(function(fF){return fF});this.$y.resolve(this.$v().get_zoneType());this.$x.done(ss.mkdel(this,function(fF){var fG=fF;this.$u(fG);this.$9()}))}))},$e:function(e){if(this.$v().get_objectType()==='button'){this.$u(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[U,T,Object])).call(null,[e]))}else if(this.$v().get_objectType()==='extension'){this.$u(new cp(e,this.$v()))}},$d:function(e){var fE=this.$v().get_zoneType();var fF=tsConfig.is_authoring&&!tsConfig.is_mobile;switch(fE){case'title':{this.$i(fF,e);break}case'text':{this.$h(fF,e);break}case'size':case'shape':case'color':case'map':{this.$g(e);break}case'current-page':{tab.ModuleManager.load(tab.ILegacyDojoUIModule).call(null,[]).done(ss.mkdel(this,function(fG){this.$u(fG.createPageView(e))}));break}case'filter':{tab.ModuleManager.load(tab.ILegacyDojoUIModule).call(null,[]).done(ss.mkdel(this,function(fG){this.$u(fG.createLegacyQuickFilterDisplayView(e))}));break}case'highlighter':{this.$u(tab.ObjectRegistry.newView(bJ).call(null,[e]));break}case'paramctrl':{tab.ModuleManager.load(tab.ILegacyDojoUIModule).call(null,[]).done(ss.mkdel(this,function(fG){this.$u(fG.createParameterControlView(e))}));break}case'flipboard-nav':{this.$f(e);break}case'flipboard':{tab.ModuleManager.load(tab.IStoryModule).call(null,[]).done(ss.mkdel(this,function(fG){this.$u(fG.newFlipboardView(e))}));break}case'web':{this.$u(new fr(e,this.$v()));break}case'dashboard-object':{this.$e(e);break}case'bitmap':{this.$u(new cU(e,this.$v()));break}case'viz':{tab.ModuleManager.load(tab.IVizZoneModule).call(null,[]).done(ss.mkdel(this,function(fG){this.$u(fG.createPaneTableView(e))}));break}case'layout-flow':{this.$u(tab.ObjectRegistry.newView(ci).call(null,[e]));break}default:{break}}this.$9()},$n:function(){return ss.referenceEquals(this.$v().get_dashboardSheetName(),tsConfig.current_sheet_name)},$9:function(){if(tab.ProgressiveLoader.get_progressiveLoadEnabled()&&!BrowserSupport.BrowserSupport.IsIE()){if(ss.isValue(this.$t())){this.$t().get_rootElement().addClass('fade-in')}}},$m:function(e){this.$v().zoneEntered(true)},$b:function(e){if(ss.contains(fB.$2,this.$v().get_zoneType())){this.$y.done(ss.mkdel(this,function(){this.$x.done(e)}))}else{e()}}},ss.makeGenericType(spiff.BaseView$1,[fC]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[fC])]);ss.initClass(fC,a,{add_updateZone:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_updateZone:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_updateZIndex:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_updateZIndex:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_resizeZone:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_resizeZone:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_zoneResized:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_zoneResized:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},add_newZoneContent:function(e){this.$2$5=ss.delegateCombine(this.$2$5,e)},remove_newZoneContent:function(e){this.$2$5=ss.delegateRemove(this.$2$5,e)},add_validStateChanged:function(e){this.$2$6=ss.delegateCombine(this.$2$6,e)},remove_validStateChanged:function(e){this.$2$6=ss.delegateRemove(this.$2$6,e)},get_zoneContentViewModel:function(){return this.zoneContentViewModel},get_zoneType:function(){return this.$n.get_zoneType()},get_objectType:function(){return this.$n.get_objectType()},get_x:function(){return this.$n.get_x()},get_y:function(){return this.$n.get_y()},get_width:function(){return this.$n.get_width()},get_height:function(){return this.$n.get_height()},get_contentHeight:function(){return this.$n.get_contentHeight()},get_contentWidth:function(){return this.$n.get_contentWidth()},get_contentX:function(){return this.$n.get_contentX()},get_contentY:function(){return this.$n.get_contentY()},get_model:function(){return this.$n},get_styledBoxModel:function(){return this.get_model().get_styledBoxModel()},get_isInDashboard:function(){return this.$n.get_dashboardModel().get_isDashboard()},get_contentContainerStyle:function(){return this.$n.get_zoneCommonModel().get_contentStyle()},get_titleSize:function(){if(this.$n.get_hasTitle()){return{w:this.$n.pm.titleWidth,h:this.$n.pm.titleHeight}}return{w:0,h:0}},get_valid:function(){if(tab.ApplicationModel.get_instance().get_isOffline()&&!ss.contains(fC.$0,this.get_zoneType())){return false}return this.$l},get_isVisualValid:function(){return(ss.isValue(this.$m)?this.$m.get_isVisualValid():false)},get_zoneZIndex:function(){return fC.calculateZoneZIndex(this.$n)},get_zoneId:function(){return this.$n.get_zoneId()},get_associatedSheet:function(){return this.$n.get_associatedSheet()},get_backgroundColor:function(){var e='';if(this.$c()){e=this.$n.get_dashboardModel().get_zonePlaceholderColor()}return e},get_isActiveZone:function(){return this.$j},set_isActiveZone:function(e){if(this.$j!==e){this.$j=e;this.notifyPropertyChanged('isActiveZone')}},get_isReadyZone:function(){return this.$k},set_isReadyZone:function(e){if(this.$k!==e){this.$k=e;this.notifyPropertyChanged('isReadyZone')}},get_isSetActiveZoneSupported:function(){if(!tsConfig.is_authoring||tsConfig.current_sheet_type==='worksheet'){return false}return this.get_zoneType()==='viz'||!tsConfig.is_mobile},get_containsNewStyleQuickFilter:function(){return this.$i},$g:function(){var e=this.$n.get_isFloating()&&this.$n.get_zoneType()==='layout-flow';var fE=ss.isNullOrUndefined(this.get_styledBoxModel())||!this.get_styledBoxModel().get_hasFill()&&this.get_styledBoxModel().get_borderStyle()==='bs-none';return e&&fE&&this.$n.get_dashboardModel().zonesModel.getChildren(this.get_zoneId()).length===0},get_containsNewStyleParameterFilter:function(){return this.$h},get_hasTitle:function(){return this.$n.get_hasTitle()},get_marginCss:function(){var e={top:this.get_styledBoxModel().get_marginTop()+'px',left:this.get_styledBoxModel().get_marginLeft()+'px',bottom:this.get_styledBoxModel().get_marginBottom()+'px',right:this.get_styledBoxModel().get_marginRight()+'px',position:'absolute','background-color':'rgba(0, 0, 0, 0)'};if(ss.isValue(this.get_model().get_drawnZoneColor())){e['background-color']=this.get_model().get_drawnZoneColor()}return e},get_paddingCss:function(){return{top:this.get_styledBoxModel().get_paddingTop()+'px',left:this.get_styledBoxModel().get_paddingLeft()+'px',bottom:this.get_styledBoxModel().get_paddingBottom()+'px',right:this.get_styledBoxModel().get_paddingRight()+'px',position:'absolute'}},get_borderCss:function(){return $.extend({},this.get_styledBoxModel().get_borderTop().get_cssDictionary(),this.get_styledBoxModel().get_borderLeft().get_cssDictionary(),this.get_styledBoxModel().get_borderBottom().get_cssDictionary(),this.get_styledBoxModel().get_borderRight().get_cssDictionary())},get_contentContainerCss:function(){var e=tab.FormattingConverters.makeStyledBoxCssDict(this.get_contentContainerStyle().get_styledBoxPresModel(),true);if(!this.get_contentContainerStyle().get_hasFill()){e['background-color']=''}if(this.$c()){var fE=tab.ColorModel.fromColorCode(this.$n.get_dashboardModel().get_zonePlaceholderColor());e['background-color']=fE.toString()}return e},get_contentHasDarkBackground:function(){if(ss.contains(fB.zonesThatUseStyledBox,this.get_zoneType())){return this.get_contentContainerStyle().get_hasFill()&&!tab.ColorModel.fromColorCode(this.get_contentContainerStyle().get_fillColor()).isLuminanceAboveThreshold(0.314999997615814)}else{return!ss.isNullOrEmptyString(this.$n.get_drawnZoneColor())&&!tab.ColorModel.fromColorCode(this.$n.get_drawnZoneColor()).isLuminanceAboveThreshold(0.314999997615814)}},get_dashboardSheetName:function(){return this.get_model().get_dashboardModel().pm.sheetPath.sheetName},setActive:function(){tab.SelectionClientCommands.setActiveZone(this.get_zoneId(),this.$n.get_dashboardModel().get_sheetPath())},zoneEntered:function(e){this.$n.get_dashboardModel().set_readyZoneID((e?this.get_zoneId():0))},dispose:function(){if(ss.isValue(this.zoneContentViewModel)){this.zoneContentViewModel.dispose();this.zoneContentViewModel=null}if(ss.isValue(this.$m)){this.$m.remove_visualValidStateChanged(ss.mkdel(this,this.$f))}this.$n.remove_updateZone(ss.mkdel(this,this.$b));this.$n.get_zoneCommonModel().remove_resizeZone(ss.mkdel(this,this.$8));this.$n.remove_newZoneContent(ss.mkdel(this,this.$3));this.$n.remove_removeZoneContent(ss.mkdel(this,this.$7));this.$n.get_zoneCommonModel().remove_changeZoneTitleVisibility(ss.mkdel(this,this.$9));spiff.BaseViewModel.prototype.dispose.call(this)},openRichTextEditorDialog:function(e){switch(this.get_zoneType()){case'title':case'text':{tab.RichTextClientCommands.createTextObjectRichTextEditor(this.get_zoneId(),false);break}default:{break}}cx.logRichTextEditorEvent(['RichTextEditorOpenedBy','DoubleClick','RichTextEditorOpenedFrom',this.get_zoneType()+'-zone'])},$e:function(){var e=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),this.$n.get_associatedSheet());if(!ss.referenceEquals(this.$m,e)){if(ss.isValue(this.$m)){this.$m.remove_visualValidStateChanged(ss.mkdel(this,this.$f))}this.$m=e;if(ss.isValue(this.$m)){this.$m.add_visualValidStateChanged(ss.mkdel(this,this.$f))}}},$b:function(){tab.ModuleManager.registerModulesLoadedCallback(ss.mkdel(this,function(){this.$e();this.$f();this.raiseActionEvent(this.$2$1);if(this.get_zoneType()==='filter'&&ss.isNullOrUndefined(this.zoneContentViewModel)&&ss.isValue(this.get_model().get_model())){this.$3(this.get_model().get_model())}}))},$8:function(){this.raiseActionEvent(this.$2$3);this.raiseActionEvent(this.$2$4)},$a:function(){this.raiseActionEvent(this.$2$2)},$f:function(){var e=true;if(this.$n.get_isDependentOnViz()&&ss.isValue(this.$m)){e=this.$m.get_isVisualValidAndUpToDate()}if(e!==this.$l){this.$l=e;this.raiseActionEvent(this.$2$6)}},forceZoneValidState:function(e){if(e!==this.$l){this.$l=e;this.raiseActionEvent(this.$2$6)}},$2:function(){if(this.$g()){this.zoneContentViewModel=new cj(this.$n);this.$d(this.zoneContentViewModel)}},$6:function(e,fE){var fF=ss.mkdel(this,function(){this.$d(this.zoneContentViewModel);this.raiseActionEvent(this.$2$1)});var fG=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),e);var fH=fE;if(!ss.isValue(fH.get_quickFilterDisplayPresModel().quickFilter)){return}var fI=tab.ModelUtils.findMatchingFilterModel(fG,fH);if(ss.isValue(fI)){tab.ModuleManager.load(tab.ILegacyDojoUIModule).call(null,[]).done(ss.mkdel(this,function(fJ){this.zoneContentViewModel=fJ.createLegacyQuickFilterDisplayViewModel(fH,fI);fF()}))}else{}},$5:function(e){var fE=ss.mkdel(this,function(){this.$d(this.zoneContentViewModel);this.raiseActionEvent(this.$2$1)});if(this.$n.get_objectType()==='button'){this.zoneContentViewModel=new U(e,this);fE()}else if(this.$n.get_objectType()==='extension'){var fF=new cq(e,this);if(fF.get_isInitialized()){this.zoneContentViewModel=fF;fE();return}var fG=null;fG=ss.mkdel(this,function(){this.zoneContentViewModel=fF;fE();fF.remove_extensionZoneReady(fG)});fF.add_extensionZoneReady(fG)}},$4:function(e){var fE=ss.mkdel(this,function(){this.$d(this.zoneContentViewModel);this.raiseActionEvent(this.$2$1)});if(tsConfig.allow_filter){tab.ModuleManager.load(tab.ILegacyDojoUIModule).call(null,[]).done(ss.mkdel(this,function(fF){this.zoneContentViewModel=fF.createPageViewModel(e);fE()}))}},$3:function(e){this.$i=false;this.$h=false;var fE=this.$n.get_zoneType();var fF=ss.mkdel(this,function(){this.$d(this.zoneContentViewModel);this.raiseActionEvent(this.$2$1)});var fG=this.$n.get_worksheetName();switch(fE){case'title':{this.zoneContentViewModel=new eH(e);break}case'text':{var fH=new eH(e);fH.options=new eE(false);this.zoneContentViewModel=fH;break}case'color':case'size':case'shape':case'map':{tab.ModuleManager.load(tab.ILegacyDojoUIModule).call(null,[]).done(ss.mkdel(this,function(fI){if(tab.FeatureFlags.isEnabled('WebDropServerRenderedLegends')||tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(ss.isInstanceOfType(e,tab.CategoricalLegendModel)){this.zoneContentViewModel=fI.createCategoricalLegendViewModel(e,fE,fG,this)}else if(ss.isInstanceOfType(e,tab.QuantitativeColorLegendModel)){this.zoneContentViewModel=fI.createQuantitativeColorLegendViewModel(e,fG,this)}}else{this.zoneContentViewModel=fI.createLegacyLegendViewModel(e,fG,this)}fF()}));return}case'current-page':{this.$4(e);return}case'web':{this.zoneContentViewModel=new fs(e);break}case'dashboard-object':{this.$5(e);return}case'bitmap':{this.zoneContentViewModel=new cV(e);break}case'flipboard-nav':{tab.ModuleManager.load(tab.IStoryModule).call(null,[]).done(ss.mkdel(this,function(fI){this.zoneContentViewModel=fI.newFlipboardNavigatorViewModel(e);fF()}));return}case'flipboard':{tab.ModuleManager.load(tab.IStoryModule).call(null,[]).done(ss.mkdel(this,function(fI){this.zoneContentViewModel=fI.newFlipboardViewModel(e,this);fF()}));return}case'filter':{this.$6(fG,e);return}case'highlighter':{this.zoneContentViewModel=new bL(e,tab.ModelUtils.getVisualId(fG),this);break}case'paramctrl':{tab.ModuleManager.load(tab.ILegacyDojoUIModule).call(null,[]).done(ss.mkdel(this,function(fI){this.zoneContentViewModel=fI.createParameterControlViewModel(e);fF()}));return}case'viz':{tab.ModuleManager.load(tab.IVizZoneModule).call(null,[]).done(ss.mkdel(this,function(fI){this.zoneContentViewModel=fI.createPaneTableViewModel(e)}));break}case'layout-basic':{return}default:{return}}fF()},$9:function(){this.notifyPropertyChanged('titleVisible')},$7:function(){this.dispose()},$d:function(e){if(!ss.staticEquals(this.$2$5,null)){this.$2$5(e)}},$c:function(){var e=tab.ProgressiveLoader.get_progressiveLoadEnabled()&&ss.contains(tab.ProgressiveLoader.zonesThatDeferContentCreation,this.get_zoneType())&&ss.isNullOrUndefined(this.zoneContentViewModel);e=e&&this.$n.get_hasContent();return e}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel,tab.IZoneViewModel]);ss.initClass(fD,a,{});(function(){bf.$0=null})();(function(){cv.fontsReadyMetricName='AllFontsDownloaded';cv.uiStabilizedMetricName='UI Stabilized'})();(function(){dQ.stylesheetId='tab-renderAndCheckFontLoader';dQ.hiddenDivClass='tab-hiddenFontMeasurer';dQ.baselineFontClass='tab-baselineFontMeasurer';dQ.baselineFontName="'Courier New', Monaco, monospace";dQ.measurementElementText='The quick brown fox jumps over the lazy dog iiilllest';dQ.$4=ss.mkdict(['z-index','-1','position','absolute','top','0','right','0','visibility','hidden']);dQ.maxLengthToWaitForFontsToDownloadMilliseconds=120000;dQ.fontLoadedCheckDelayPerTryMilliseconds=100;dQ.ensureFirstRenderPassCompletedDelayMilliseconds=5;dQ.maxNumberOfTriesToDownloadFont=1200})();(function(){ed.raiseFontPreparationCompleteDelay=200;var e=new tab.DownloadableFontProperties;e.set_fontFamily('Benton Sans');e.set_weight('100');e.woffLocation=tab.ServerFonts.bentonSansWoffPaths['Benton Sans Light'];var fE=new tab.DownloadableFontProperties;fE.set_fontFamily('Benton Sans');fE.set_weight('bold');fE.woffLocation=tab.ServerFonts.bentonSansWoffPaths['Benton Sans Medium'];ed.drawerFontNames=[e,fE];var e=new tab.DownloadableFontProperties;e.set_fontFamily('Benton Sans Low-DPI');e.set_weight('100');e.woffLocation=tab.ServerFonts.bentonSansWoffPaths['Benton Sans Book'];var fE=new tab.DownloadableFontProperties;fE.set_fontFamily('Benton Sans Low-DPI');fE.set_weight('bold');fE.woffLocation=tab.ServerFonts.bentonSansWoffPaths['Benton Sans Medium'];ed.drawerLowDpiFontNames=[e,fE];ed.$1=null})();(function(){cx.richTextEditingEventType='Formatting.RichTextEditing';cx.richTextEditorOpenedBy='RichTextEditorOpenedBy';cx.richTextEditorOpenedByDoubleClick='DoubleClick';cx.richTextEditorOpenedByContextMenu='ContextMenu';cx.richTextEditorOpenedByChevron='Chevron';cx.richTextEditorOpenedFrom='RichTextEditorOpenedFrom';cx.dashboard='Dashboard';cx.annotation='Annotation';cx.worksheetTitle='WorksheetTitle';cx.worksheetTitleOnDashboard='WorksheetTitleOnDashboard';cx.richTextEditorControl='EditorControl';cx.performanceEventType='Formatting_Performance';cx.performanceKeyMetric='PerformanceMetric';cx.performanceKeyIsInitial='IsInitial';cx.performanceKeyItemCount='ItemCount';cx.performanceKeyWidgetIdentifiers='WidgetIdentifiers';cx.performanceKeyElapsedTime='ElapsedTime'})();(function(){fw.$2=['format-workbook']})();(function(){eF.contentElemClassName='tab-textRegion-content';eF.formatIndicatorElemClassName='tab-formatThisZone';eF.$2='tabAuthoringTitleEditArrow';eF.$1="<div {0} class='tab-textRegion'>\n            <div class='tab-textRegion-boundary'>\n                <div class='tab-textRegion-content'></div>\n            </div>\n            <div class='tab-formatThisZone'></div>\n        </div>"})();(function(){eG.formatIndicatorClass='tab-formatThisZone'})();(function(){S.$8={marginTop:SharedWidgets.TabStyles.Spacing.MediumSpace,marginBottom:SharedWidgets.TabStyles.Spacing.MediumSpace,color:SharedWidgets.TabStyles.Typography.Color.Secondary,float:'right'};S.$4={paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0};S.$5={padding:'30px 18px 0 18px'};S.$6={fontSize:16,marginBottom:SharedWidgets.TabStyles.Spacing.LargeSpace,color:SharedWidgets.TabStyles.Typography.Color.Primary};S.$7={fontSize:SharedWidgets.TabStyles.Typography.Sizing.Default,color:SharedWidgets.TabStyles.Typography.Color.Primary}})();(function(){bo.$3='Authoring';bo.$7='View';bo.$2='AltClick';bo.$6='SingleClick';bo.$4='DashboardAuthoring_ButtonNav';bo.$5='EnterSpaceKey'})();(function(){cn.$0="<div class='tab-extension-error'>{0}</div>"})();(function(){cg.$0="<div class='tab-extension-empty'></div>"})();(function(){cm.$0='<div><iframe></iframe></div>'})();(function(){co.$0="<div class='tab-extension'></div>"})();(function(){bJ.$0=312;bJ.widgetClassName='tabDataHighlighterView';bJ.searchResultsListClassName='tabDataHighlighterViewSearchResultList';bJ.searchResultsListItemClassName='tab-list-item';bJ.searchResultsListItemLabelClassName='tab-list-item-label';bJ.inactiveTextClassName='tabDataHighlighterViewInactiveText';bJ.queryDelayTimerMs=200;tab.ObjectRegistry.registerType(bJ,bJ).call(null)})();(function(){cG.$0="<div class='webZoneHttpsEmbedHttpAuthoring'><div class='message'></div><div class='url'><span>(</span><span class='scheme'>http://</span><span class='path'></span><span>)</span></div></div>"})();(function(){cH.$0="<div class='webZoneHttpsEmbedHttpView'><div class='message'></div><a target='_blank'></a></div>"})();(function(){cQ.$0='<div><iframe></iframe></div>'})();(function(){fq.$0="<div class='tab-web'></div>"})();(function(){cS.$0=Math.pow(2,-23)})();(function(){cT.$0="<div class='tab-image'></div>"})();(function(){cU.emptyImageClass='tab-emptyImagePlaceholder'})();(function(){ch.$0="<div class='tab-EmptyFloatingLayout'></div>"})();(function(){tab.ObjectRegistry.registerType(ci,ci).call(null)})();(function(){fA.$0="<div class='tab-zone'><div class='tab-zone-margin'><div class='tab-zone-padding'></div></div></div>"})();(function(){fB.$1='tabZoneReady';fB.zonesThatUseStyledBox=['layout-flow','map','color','size','shape','filter','highlighter','paramctrl'];fB.$3=['bitmap','color','shape','size','map','text','web','dashboard-object','paramctrl','filter','highlighter','empty','current-page'];fB.$2=['flipboard-nav'];fB.$3$1=null;tab.ObjectRegistry.registerType(fB,fB).call(null)})();(function(){fC.isActiveZonePropertyName='isActiveZone';fC.isReadyZonePropertyName='isReadyZone';fC.titleVisiblePropertyName='titleVisible';fC.$0=['viz','color','shape','size','map','text','title','bitmap','highlighter','empty','flipboard']})();(function(){fk.$1$1=null})();(function(){D.hideAppBannerCookie='hideAppBanner';D.redirectToAppStoreDelayInMS=1000;D.playStoreUrl='https://play.google.com/store/apps/details?id=com.Tableau.TableauApp';D.appStoreUrl='https://itunes.apple.com/app/tableau-mobile/id434633927'})();(function(){bD.$1='tab-dataAlertGenericErrorMessage';bD.$0='tab-dataAlertErrorDialogContent'})();(function(){tab.ObjectRegistry.registerType(dr,dr).call(null)})();(function(){tab.ObjectRegistry.registerType(cB,cB).call(null)})();(function(){cf.maxEmailLength=100})();(function(){by.debounceTimeout=300;by.maxTitleLength=256;by.$0=18})();(function(){dN.autoCompleteDebounceTime=200;dN.rowHeight=26;dN.numberOfRowsInViewportIfBulkSubscribe=11})();(function(){bC.editDataAlertUrlParam=':editDataAlert';bC.instanceIdUrlParam=':iid'})();(function(){bY.$0="<div class='tab-downloadView tab-toolbarFlyout'><div class='tab-downloadApplication'><div class='tab-explanationTitle' /><div class='tab-explanationBody' /><div class='tab-downloadAction'><div class='tab-availablePlatforms' /><div class='tab-downloadAppButton' /></div></div><div class='tab-downloadButtons'></div></div>"})();(function(){eh.linkTemplate="\n            <div class='tab-shareLinkSection'>\n                <label>\n                    <span class='tab-shareLinkTitle tab-shareTitle'/>\n                    <span class='tab-shareLinkInput'/>\n                </label>\n                <div class='tab-shareLinkButtons'/>\n            </div>";eh.embedTemplate="\n            <div class='tab-shareEmbedSection'>\n                <label>\n                    <span class='tab-shareEmbedTitle tab-shareTitle'/>\n                    <span class='tab-shareEmbedInput'/>\n                </label>\n            </div>";eh.viewStateTemplateOld="\n            <div class='tab-shareViewStateSection ff-AccessibilityViewingToolbarOff'>\n                <span class='tab-shareCurrentView tab-shareViewToggle'/><span class='tab-shareOriginalView tab-shareViewToggle'/>\n            </div>";eh.viewStateTemplate="\n            <div class='tab-shareViewStateSection'>\n            </div>";eh.$0="\n            <div class='tab-shareView tab-toolbarFlyout'>\n            </div>"})();(function(){eA.characterLimit=2000;eA.characterWarningLimit=1800;eA.messageEditorClass='tabSubscribeMessageEditor';eA.errorMessageClass='tabSubscribeMessageEditorErrorMessage'})();(function(){ez.$1="<div class='tab-subscribeView tab-toolbarFlyout'></div>";ez.$0="\n                <div class='tab-subscribeToggleSection'>\n                    <label class='tab-subscribeViewsToggleLabel'/>\n                    <div class='tab-subscribeToggleContainer'>\n                        <span class='tab-subscribeThisView tab-subscribeToggle'/><span class='tab-subscribeAllViews tab-subscribeToggle'/>\n                    </div>\n                </div>\n                <div class='tab-subscribeSchedule'/>\n                <div class='tab-subscribeSubject'/>\n                <div class='tab-subscribeEmail'/>\n                <div class='tab-manageSubscribersArea tab-subscribeOthersSection'>\n                    <label class='tab-manageSubscribersLabel'/>\n                </div>\n                <div class='tab-subscribeSubmit'/>"})();(function(){dC.$0="<div class='tab-publicInfoView tab-toolbarFlyout'><a class='tab-moreAboutPublicSection' target='_blank' /></a><div class='tab-viewAndAuthorInfoSection'></div></div>"})();(function(){K.$0="<div class='tab-areYouSure-container'><div class='tab-areYouSure-outer'><div class='tab-areYouSure-inner'><span class='tab-areYouSure-label'></span><div class='tab-areYouSure-no tab-areYouSure-button'></div><div class='tab-areYouSure-yes tab-areYouSure-button'></div></div></div></div>"})();(function(){bl.$0="\n<div class='tab-customViewsView tab-toolbarFlyout'>\n    <div class='tab-cv-flyoutSection tab-customViews-saveView' />\n    <div class='tab-cv-flyoutSection tab-cv-myViews'>\n        <div class='tab-toolbarFlyoutTitle'/>\n        <div class='tab-cv-listWrapper'>\n            <div class='tab-cv-viewsList'/>\n        </div>\n    </div>\n    <div class='tab-cv-flyoutSection tab-cv-otherViews'>\n        <div class='tab-toolbarFlyoutTitle'/>\n        <div class='tab-cv-listWrapper'>\n            <div class='tab-cv-viewsList'/>\n        </div>\n    </div>\n    <div class='tab-cv-flyoutSection tab-cv-manageModeControls' />\n</div>"})();(function(){bm.$0='tab-customViews-rename-container';tab.ObjectRegistry.registerType(bm,bm).call(null)})();(function(){bn.maxCustomViewNameLength=255;bn.modeSelect=0;bn.modeManage=1;bn.$1=tab.Logger.getLogger(bn)})();(function(){bs.$0="<div class='tab-gutter'><div id='tab-dashboard-region' class='tab-dashboard'/></div>";bs.$1="<div id='tab-dashboard-region' class='tab-dashboard'/>"})();(function(){bt.dashboardRegionId='tab-dashboard-region';bt.dashboardGutterCssSelector='.tab-gutter';tab.ObjectRegistry.registerType(bt,bt).call(null)})();(function(){fx.centeringContainerSelector='#centeringContainer';fx.$1="<div class='tab-workbook' role='application'><div class='dashboardSpacer'/></div>";fx.$2="<div id='dashboard-spacer' class='dashboardSpacer' role='application'></div>"})();(function(){eN.$1='tabToolbarButtonImg';eN.$2='tabToolbarButtonText';eN.$0="<div class='tabToolbarButton' role='button'><span class='tabToolbarButtonImg' /><span class='tabToolbarButtonText' /></div>"})();(function(){l.$0=10;l.$1=600})();(function(){fl.$0=new RegExp('^https?://[^/]+(.*)$')})();(function(){dT.$1="<div class='tab-right-area-drawer-module-loader'></div>"})();(function(){dX.$2="<div class='tab-right-area-drawer'></div>";dX.$1="<div id='right-panel'></div>"})();(function(){X.$7='Cancel_Dialog';X.$5='ElapsedTimeBeforeCancelledMS';X.$6='ElapsedTotalTimeShownMS';X.$4='CommandName';X.$8='CancelStatus';X.$a='Failure';X.$9='CompletedBeforeCancel'})();(function(){V.$0=null})();(function(){R.$b=new Array;R.$a=false;R.$c=null;R.$9=false;if(tabBootstrap.Utility.get_isEmbedded()){var e=window.addEventListener;if(ss.isValue(e)){e('message',R.$3,false)}else{var fE=R.$3;window.self.attachEvent('onmessage',fE)}R.$9=true}R.$a=tabBootstrap.ViewerBootstrap.get_instance().isVisibleRectCommunicationEnabled;if(BrowserSupport.BrowserSupport.IsIE()){R.$1()}})();(function(){dj.$1$1=null})();(function(){eo.maxDialogWidth=600;eo.textArea=new ss.Lazy(function(){return document.createElement('textarea')})})();(function(){dc.maxDialogWidth=600;dc.$0={position:'relative',borderColor:SharedWidgets.TabStyles.Colors.F6,borderWidth:SharedWidgets.TabStyles.Sizing.BorderWidth,borderStyle:'solid',padding:SharedWidgets.TabStyles.Spacing.DefaultSpace,maxHeight:'500px',overflowY:'auto',wordWrap:'break-word'};dc.textArea=new ss.Lazy(function(){return document.createElement('textarea')})})();(function(){el.editConnectionTestID='SheetReconnectEditConnection';el.$0='SheetReconnectSignIn'})();(function(){O.dashboardContainerSelector='.dashboardSpacer';O.overlayId='auth-overlay';O.messageEventName='message';O.frameTestHook='dse-frame'})();(function(){cy.genericErrorTemplateHtml='<div class="auth-box ocontent tb-data-source-error-container" role="alert"> \n                                                              <div class="tb-data-source-error"></div>\n                                                              <div class="tb-data-source-error-sub"></div>\n                                                              <div class="tab-UnifiedButton bordered tb-data-source-btn tb-data-source-button-retry" tabindex="0" role="button"></div>\n                                                              <div class="tab-data-source-msg"><textarea readonly class="tb-data-source-error-message"></textarea></div>\n                                                            </div>'})();(function(){cu.$0='FileReconnectLocateFile'})();(function(){cb.bodyContainer='<span></span>'})();(function(){bi.$0=false})();(function(){tab.ObjectRegistry.registerType(dY,dY).call(null)})();(function(){tab.ObjectRegistry.registerType(dU,dU).call(null)})();(function(){F.$2="<div id='tabViewer' class='wcBody' style='visibility: hidden;'></div>";F.$1="<div id='dashboard-viewport'></div>"})();(function(){eS.$0="\n            <div class='tab-toolbar tab-fill'>\n                <div class='tab-vizItems tab-fill-left' />\n                <div class='tab-nonVizItems tab-fill-right' />\n            <div/>";eS.$1="\n            <div class='tab-toolbar public tab-fill'>\n                <div class='tab-vizItems tab-fill-left' />\n                <div class='tab-nonVizItems tab-fill-right' />\n            <div/>"})();(function(){eO.$0='tabToolbarButtonFlyoverShown'})();(function(){eU.$7='hideLabels';eU.$a='showLabels';eU.$8='horizontalLabels';eU.$b='stackedLabels';eU.$9='narrow';eU.$6='tab-customviews-modified';eU.$c='.tabToolbarButton';eU.$5='160px';eU.$d=50;tab.ObjectRegistry.registerType(eU,eU).call(null);if(tab.FeatureFlags.isEnabled('WebGeneralKeyboardShortcuts')){tab.KeyboardShortcutManager.registerShortcut(new fd);tab.KeyboardShortcutManager.registerShortcut(new dP);tab.KeyboardShortcutManager.registerShortcut(new eL)}})();(function(){fy.dashboardSpacerSelector=tab.DomUtil.asClassSelector('dashboardSpacer');tab.ObjectRegistry.registerType(fy,fy).call(null)})();(function(){E.suppressVizTooltipsAndOverlays='tabSuppressVizTooltipsAndOverlays';E.$4=null;E.$3=null;E.$5=null;E.$6=false;E.$1$1=null;E.$1$2=null;E.$1$3=null;g.$0()})();(function(){G.vizContainerSelector=tab.DomUtil.asIDSelector('viz-client-container');G.toolbarContainerSelector=tab.DomUtil.asIDSelector('toolbar-container');G.tabContainerSelector=tab.DomUtil.asIDSelector('tab-container');G.applicationContainerSelector=tab.DomUtil.asIDSelector('main-content');G.dashboardViewportSelector=tab.DomUtil.asIDSelector('dashboard-viewport');tab.ObjectRegistry.registerType(G,G).call(null)})();(function(){dp.$9=null})();(function(){eV.$1='tab-icon-';eV.$3='toggle-updates';eV.$2=430;eV.publicViewCount=0})();(function(){bz.$0=null;tab.StartupUtils.callOnceAfterInitialBootstrap(ss.mkdel(this,function(){var e=tab.DataAlertDialogModel.instance();bz.$0=bz.new$1(e,bC.editDataAlertId());tab.StartupUtils.callEachTimeModelsInitialized(bz.reinitDialogModelNotification,new tab.DisposableHolder)}))})();(function(){ca.$0='http://public.tableau.com/s/download'})();(function(){ek.currentViewPath='/shared/';ek.$c='http://facebook.com';ek.$9=0.75;ek.$b=0.75;ek.$a=1.77;var e=[];e.push('from_wg');e.push('host_url');e.push('debug');e.push('wb');e.push('vw');e.push('prefix');e.push('cvu');e.push('cvn');e.push('delay');e.push('preview');e.push('site');e.push('ds');e.push('project');e.push('aux');e.push('guid');e.push('mobile');e.push('app');e.push('showVizHome');e.push('showShareOptions');e.push('record_client_performance');e.push('bootstrapWhenNotified');e.push('apiID');e.push('reloadOnCustomViewSave');e.push('openAuthoringInTopWindow');e.push('browserBackButtonUndo');e.push('commentingEnabled');e.push('size');e.push('isVizPortal');ek.$d=e})();(function(){ey.maxSubscriptionSubjectLength=256;ey.maxSubscriptionEmailLength=100;ey.$0='tabSubscriptionScheduleDropdown';ey.modeMainDialog=0;ey.modeMessage=1;ey.modeSubscribeUsers=2;ey.modeSubscribeGroups=3})();(function(){eP.iconTypeDownload='download';eP.iconTypeShare='share';eP.iconTypeCustomViews='customviews';eP.iconTypeSubscribe='subscribe';eP.iconTypeEdit='edit';eP.iconTypeRedo='redo';eP.iconTypeUndo='undo';eP.iconTypeRevert='revert';eP.iconTypeToggleDataUpdates='toggle-updates';eP.iconTypeRefreshData='refresh';eP.iconTypePublicLogo='public-logo';eP.pauseButton='Pause'})();(function(){tab.ObjectRegistry.registerType(dD,dD).call(null)})();(function(){ex.$0=0;tab.ObjectRegistry.registerType(ex,ex).call(null)})();(function(){tab.ObjectRegistry.registerType(ej,ej).call(null)})();(function(){bZ.$1='tabDownloadData';bZ.$0='tabDownloadCrosstab';bZ.$2='tabDownloadImage';bZ.$3='tabDownloadPdf';bZ.$4='tabDownloadWorkbook';bZ.$5='tabPublicApp';bZ.$6=715;tab.ObjectRegistry.registerType(bZ,bZ).call(null)})();(function(){fz.$2$3=null})();(function(){H.vizClientContainerSelector='.tab-viz-client-container'})();(function(){dZ.drawerWidthOpen=320;dZ.drawerWidthClosed=0})();(function(){L.$2='AxisAuthoringInteractions';L.$8='RenderingMode';L.$4='AxisInteraction';L.$3='CaretIcon';L.$7='DoubleTap';L.$9='RightClick';L.$6='ContextMenuShown';L.$5='Browser';L.$a='Server'})();(function(){cw.$4=null;cw.$3=null})();(function(){eD.defaultLinePattern='solid';eD.defaultLineJoin='bevel';eD.defaultLineCap='butt';eD.defaultTextBaseline='alphabetic';eD.defaultTextAlign='start';eD.defaultLineDashDashed=[3,1];eD.defaultLineDashDotted=[1,1];eD.defaultLineWidth=1;eD.defaultColor='rgb(0,0,0)';eD.defaultTextColor='rgb(0,0,0)';eD.defaultTextAngle=0;eD.defaultFontName='Arial';eD.defaultFontSize=8;eD.defaultTextUnderline=false;eD.$1=0.01})();(function(){Y.halfPI=0.5*Math.PI;Y.onePI=Math.PI;Y.oneAndHalfPI=1.5*Math.PI;Y.twoPI=2*Math.PI;Y.angleEpsilon=0.000174000000697561})();(function(){bb.$1=':'})();(function(){bp.$3='DashboardAuthoring_AddNewObjectToDashboard';bp.$2='MethodAdded';bp.$1='IsTiled';bp.$0='AddedObjectType'})();(function(){bq.type='Dashboard_LoadComplete';bq.dashboardWidth='DashboardWidth';bq.dashboardHeight='DashboardHeight';bq.bothScrollableVizCount='BothScrollableVizCount';bq.xScrollableVizCount='XScrollableVizCount';bq.yScrollableVizCount='YScrollableVizCount';bq.pannableMapCount='PannableMapCount';bq.vizCount='VizCount'})();(function(){if(tsConfig.isUnitTestRun){return}tab.WorldUpdateInterceptor.get().add_onDashboardLoadComplete(function(){br.track(tab.ModelUtils.findContentDashboard())})})();(function(){bI.warningToastTelemetryEventName='DataAlert_CreateAlertButtonClicked';bI.closeOrSubmitButtonClickedEventName='DataAlert_CloseOrSubmitButtonClicked';bI.errorMessageTypeProperty='ErrorMessageType';bI.errorMessageStringProperty='ErrorMessageString';bI.alertButtonClickedType='createAlertButtonClicked';bI.datasourceNoPasswordErrorType='datasourceNoEmbeddedPasswordError';bI.platformPropagatedErrorType='platformPropagatedError';bI.genericDataAlertInitErrorType='genericDataAlertInitError';bI.getDataSourcesApiFailedErrorType='getDataSourcesApiFailedError';bI.submitButtonPressedProperty='SubmitButtonPressed';bI.totalRecipientCountProperty='TotalRecipientCount';bI.invalidUnlicensedRecipientCountProperty='InvalidUnlicensedRecipientCount';bI.invalidViewPermissionsRecipientCountProperty='InvalidViewPermissionsRecipientCount';bI.invalidDownloadPermissionRecipientCountProperty='InvalidDownloadPermissionRecipientCount';bI.invalidEmailRecipientCountProperty='InvalidEmailRecipientCount';bI.operatorTypeProperty='OperatorType';bI.conditionMetProperty='ConditionMet';bI.emailFrequencyProperty='EmailFrequency';bI.submitButtonEnabledProperty='SubmitButtonEnabled';bI.currentUserHasEmailProperty='CurrentUserHasEmail';bI.editModeProperty='EditMode'})();(function(){bM.$0="\n            <div class='tabDataHighlighterContainer'>\n                <div class='tab-zone-titleregion' />\n                <div class='tabDataHighlighterContent'>\n                    <div class='tabDataHighlighterView'/>\n                </div>\n            </div>"})();(function(){bO.$6=6})();(function(){cD.simpleRectangleCollider=null;cD.simpleRectangleCollider=function(e,fE){var fF=e.get_geom().x;var fG=e.get_geom().x+e.get_geom().w;var fH=e.get_geom().y;var fI=e.get_geom().y+e.get_geom().h;var fJ=fE.x;var fK=fE.x+fE.w;var fL=fE.y;var fM=fE.y+fE.h;if(fI<fL){return false}if(fH>fM){return false}if(fG<fJ){return false}if(fF>fK){return false}return true}})();(function(){cF.$0="<div class='tabCatLegendScrollButtonHolder'><span class='tabCatLegendScrollPrev'/><span class='tabCatLegendScrollNext'/></div>"})();(function(){fj.$0="<div class='tabCatLegendScrollButtonHolder'><span class='tabCatLegendScrollPrev'/><br><span class='tabCatLegendScrollNext'/></div>"})();(function(){cY.$2=0;cY.$1='tabIterButtonDisabled';cY.$0=100})();(function(){de.$0={width:0,readoutText:'',readoutColor:'',borderColor:'',shouldShowMapScale:false,marginOfError:0,tooltipText:''}})();(function(){dx.$1=null})();(function(){dk.automatedInsightsClientLibFileName='automated-insights-client';dk.leafletLibFileName='leaflet';dk.mapboxGLLibFileName='mapbox-gl';dk.nestedProjectExplorerLibFileName='nested-project-explorer';dk.rsaLibFilename='rsa';dk.naturalLanguageLayoutLibFileName='natural-language-layout';dk.naturalLanguageInputBoxLibFileName='natural-language-input-box';dk.naturalLanguageFieldsPanelLibFileName='natural-language-fields-panel';dk.extensionBootstrapLibFileName='api-platform-js';dk.dataAlertsPanelLibFileName='data-alerts-panel';dk.minSuffix='.min';dk.dataGridModuleDependency=new tab.JsModuleInfo(ss.getTypeFullName(tab.ISharedWidgetsDataGrid),null);dk.storyAuthoringDependency=new tab.JsModuleInfo(ss.getTypeFullName(tab.IStoryModule),null);dk.fileUploadDependency=new tab.JsModuleInfo(ss.getTypeFullName(tab.IFileUploadModule),null);var e=!tsConfig.isUnitTestRun;tab.ModuleManager.register(tab.IFileUploadModule).call(null,'FileUploadModule',null).andLoadOnDemandIf(e);var fE=tab.ModuleManager.register(tab.IConnectionDialogModule).call(null,'ConnectionDialogModule',null).andLoadOnDemandIf(e).moduleBeingConfigured;fE.addDependency(dk.dataGridModuleDependency);fE.addDependency(dk.fileUploadDependency);tab.ModuleManager.register(tab.IPdfExportDialogModule).call(null,'PdfExportDialog',null).andLoadOnDemandIf(e);if(tsConfig.is_authoring){tab.ModuleManager.register(tab.IStoryModule).call(null,'Story',null).andLoadOnDemandIf(e);tab.ModuleManager.register(tab.IStoryAuthoringModule).call(null,'StoryAuthoring','StoryAuthoring').andLoadOnDemandIf(e).moduleBeingConfigured.addDependency(dk.storyAuthoringDependency);tab.ModuleManager.register(tab.IResizeHeadersModule).call(null,'ResizeHeadersModule',null).andLoadOnDemandIf(false);dk.$9()}else{tab.ModuleManager.register(tab.IStoryModule).call(null,'Story',null).andLoadOnDemandIf(e)}dk.$4(e);tab.ModuleManager.register(tab.IGroupDialogModule).call(null,'GroupDialog',null).andLoadOnDemandIf(true).moduleBeingConfigured.addDependency(dk.dataGridModuleDependency);tab.ModuleManager.register(tab.IBinDialogModule).call(null,'BinDialog',null).andLoadOnDemandIf(e);tab.ModuleManager.register(tab.IAliasDialogModule).call(null,'AliasDialog',null).andLoadOnDemandIf(true).moduleBeingConfigured.addDependency(dk.dataGridModuleDependency);tab.ModuleManager.register(tab.ITrendLineDialogModule).call(null,'TrendLineDialog',null).andLoadOnDemandIf(e);dk.$3(e);tab.ModuleManager.registerTypicalRawJsModule('rsa').andLoadOnDemandIf(e);tab.ModuleManager.register(tab.IDataConnectionModule).call(null,'DataConnection',null).andLoadOnDemandIf(e);tab.ModuleManager.register(tab.ISelfServiceSchedulesModule).call(null,'SelfServiceSchedulesModule',null).andLoadOnDemandIf(e);tab.ModuleManager.register(tab.ISharedWidgetsDataGrid).call(null,'SharedWidgetsDataGridModule',null).andLoadOnDemandIf(true);tab.ModuleManager.register(tab.ISharedWidgetsPlayground).call(null,'SharedWidgetsPlayground',null).andLoadOnDemandIf(e);tab.ModuleManager.register(tab.IDownloadDialogModule).call(null,'DownloadDialog',null).andLoadOnDemandIf(e);tab.ModuleManager.register(tab.IDownloadAsVersionDialogModule).call(null,'DownloadAsVersionDialog',null).andLoadOnDemandIf(true);if(tab.NaturalLanguageUtil.isNlpView()){dk.$8(e)}tab.ModuleManager.registerTypicalRawJsModule('nested-project-explorer').andLoadOnDemandIf(e).moduleBeingConfigured.addDependency(dk.dataGridModuleDependency);tab.ModuleManager.registerRawJsModule('@tableau/api-platform-js','api-platform-js','api-platform-js').andLoadOnDemandIf(e).andExportResultAs('ExtensionsApi');dk.$7(e);if(tsConfig.is_mobile){tab.ModuleManager.register(tab.IVizZoneModule).call(null,'VizZoneMobile',null).andLoadOnDemandIf(false)}else{tab.ModuleManager.register(tab.IVizZoneModule).call(null,'VizZoneWeb',null).andLoadOnDemandIf(false)}tab.ModuleManager.register(tab.ISavingModule).call(null,'Saving',null).andLoadOnDemandIf(e);if(tab.FeatureFlags.isEnabled('RuntimeWebIncrementalUpdate')&&tab.RuntimeUtil.isRuntimeSupported()){tab.ModuleManager.registerRawJsModule('runtimeweb','runtimeweb','runtimeweb.pretty').andLoadOnDemandIf(true)}dk.$5(e);dk.$2();$(function(){define('$',function(){return $});define('React',function(){return React});define('ReactDOM',function(){return ReactDOM});define('react',function(){return React});define('react-dom',function(){return ReactDOM});define('SharedWidgets',function(){return SharedWidgets});define('@tableau/preslayer-api-contract',function(){var fF=new Object;fF.Instance=tab.PluginPresentationLayer.get_instance();return fF});define('@tableau/file-picker-api-contract',function(){var fF=new Object;fF.Instance=dx.get_instance();return fF});define('@tableau/telemetry-api-contract',function(){var fF=new Object;fF.Instance=tab.PluginTelemetry.get_instance();return fF});define('@tableau/shared-widgets',function(){return SharedWidgets});define('@tableau/widgets',function(){return SharedWidgets});define('@tableau/natural-language-input-box',function(){return NaturalLanguageInputBox});define('@tableau/natural-language-fields-panel',function(){return NaturalLanguageFieldsPanel})})})();(function(){dt.$0="<img class='tab-overlayImage'/>"})();(function(){dH.minTitleHeight=17;dH.titlePadding=3;dH.fiItem='FIItem';dH.fiItemSelector='.FIItem';dH.cfInnerContainer='CFInnerContainer';dH.cfInnerContainerSelector='.CFInnerContainer'})();(function(){dI.containerClass='tab-legacy-dropdown-container';dI.containerBorderClass='tab-legacy-qf-bordered';dI.summaryClass='tab-legacy-dropdown-summary';dI.iconContainerClass='tab-legacy-dropdown-icon-container';dI.iconClass='tab-legacy-dropdown-icon'})();(function(){dJ.containerClass='tab-legacy-qf-readout-container';dJ.containerBorderClass='tab-legacy-qf-bordered';dJ.textClass='tab-legacy-qf-readout-text';dJ.iconClass='tab-legacy-qf-readout-icon'})();(function(){dM.autoCompleteDebounceTime=200;dM.rowHeight=26;dM.numberOfRowsInViewport=6})();(function(){eq.$0='.SmoothTooltipBehavior'})();(function(){eI.$0="<div class='tvimagesContainer'></div>"})();(function(){fb.$0='.tab-tooltipContent';fb.$1="\n<div class='tab-tooltip'>\n  <div class='tab-tooltipContainer'>\n    <div class='tab-tooltipContent' waiRole='alert'></div>\n  </div>\n  <div class='tab-tooltipConnector'></div>\n</div>"})();(function(){eW.defaultVerticalOffset=16;eW.defaultHorizonalOffset=16;eW.$4=16;eW.$2=10;eW.belowRightClass='tab-tooltipBR';eW.belowLeftClass='tab-tooltipBL';eW.aboveRightClass='tab-tooltipAR';eW.aboveLeftClass='tab-tooltipAL';eW.$1='tab-tooltipAR tab-tooltipAL tab-tooltipBL tab-tooltipBR';eW.$5=null;eW.$3='Tooltip layout was requested, but tooltip position cannot be calulated (shownArgs is null).'})();(function(){fc.$n="\n<div class='tab-ubertip'>\n  <div class='tab-ubertipContent'>\n    <div class='tab-ubertipTooltip'></div>\n    <div class='tab-ubertipActions'></div>\n  </div>\n  <div class='tab-ubertipCommandArea'>\n    <div class='tab-ubertipSelected'></div>\n    <div class='tab-ubertipCommands'></div>\n    <div class='tab-clear'></div>\n  </div>\n</div>";fc.$s='.tab-ubertipTooltip';fc.$t='.tab-ubertipTooltip span[data-tableau="VizInTooltip"]';fc.$k='.tab-ubertipContent';fc.$f='.tab-ubertipActions';fc.$h='.tab-ubertipCommandArea';fc.$j='.tab-ubertipCommands';fc.$i='.tab-clear';fc.$q='.tab-ubertipSelected';fc.$p='tab-selection-relaxation-selected';fc.$g="<li><div class='tab-separator'>&nbsp;</div></li>";fc.$l=70;fc.$m=2;fc.$r=740;fc.$o=null;fc.$o={}})();(function(){fn.$1$1=null;fn.$1$2=null})();(function(){eY.whitespaceObjectId='W';eY.unknownObjectId='U';eY.$0='mouseleave.basemode';eY.$4=0;eY.$3=null;eY.$2=null;eY.$1='U';eY.vizInTooltipDelayTimerMs=200})();(function(){fm.$0=null})();(function(){fo.$0=null})()})();;
/*! BEGIN RuntimeUI */
(function(){'dont use strict';var a={};ss.initAssembly(a,'vqlruntimeui')})();;
/*! BEGIN VizZone */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqlvizzone');var b=function(){};b.__typeName='tab.$0';var c=function(){};c.__typeName='tab.$1';var d=function(){this.$6=null;this.$7=null;this.$8=null;spiff.Template.call(this,$("<div><div class='tabLeafletMapHolder' /><div class='tabLeftBarnDoor' /><div class='tabRightBarnDoor' /></div>"));this.$6=this.getElementBySelector('.tabLeftBarnDoor');this.$7=this.getElementBySelector('.tabRightBarnDoor');this.$8=this.getElementBySelector('.tabLeafletMapHolder');var L=ss.mkdict(['position','absolute','top','0px','bottom','0px']);this.$6.css(L);this.$7.css(L);this.$6.css('left','0px');this.$7.css('right','0px');if(BrowserSupport.BrowserSupport.IsIE()){this.$6.css('z-index','10');this.$7.css('z-index','10')}};d.__typeName='tab.$10';var e=function(L,cC){this.$1$1=null;this.$1$2=0;this.$1(L);this.$3(cC)};e.__typeName='tab.$11';var f=function(){this.$3=[]};f.__typeName='tab.$12';f.$1=function(L,cC,cD){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return}var cE=cC.get_vizRegionMap()['background'];if(ss.isNullOrUndefined(cE)||ss.isNullOrUndefined(cE.get_visualListPM().drawItems)){return}var cF=cE.get_visualListPM().drawItems;var cG={};var cH=L.ri.length;for(var cI=0;cI<cH;cI++){var cJ=L.ri[cI];cG[cJ.r]=cJ}var cK=null;if(ss.isValue(cC)&&ss.isValue(cC.get_scene())){cK=cC.get_scene().get_imageDictionary()}var cL=tab.RenderUtil.calculatePixelRatio();var cM=cC.get_visualModel().get_backgroundColor();var cN=[{name:'uleft'.toString(),node:cD.topLeftSpacer},{name:'uright'.toString(),node:cD.topRightSpacer},{name:'lleft'.toString(),node:cD.bottomLeftSpacer},{name:'lright'.toString(),node:cD.bottomRightSpacer}];for(var cO=0;cO<cN.length;cO++){var cP=cN[cO];var cQ=cG[cP.name];if(ss.isNullOrUndefined(cQ)){continue}var cR=cP.node;var cS=cR.get(0).firstChild;var cT=ss.safeCast(cS,ss.isValue(cS)&&(ss.isInstanceOfType(cS,Element)&&cS.tagName==='CANVAS'));if(ss.isNullOrUndefined(cT)){continue}f.$2(cT,cM,cL,cQ,cF,cK)}};f.$2=function(L,cC,cD,cE,cF,cG){var cH=(cC.get_isOpaque()?'opaque':'transparent');var cI=tab.CanvasRenderer.getRenderContext(L,cH);cI.clearRect(0,0,L.width,L.height);cI.set_shapeFillStyle(cC.toString());cI.fillRect(0,0,L.width,L.height);cI.setDefaultPropertyValues();if(!tab.DoubleUtil.isApproximatelyEqual(cD,1)){tab.CanvasUtil.scaleCanvasDrawing(cI,cD)}var cJ=new z(L,cI,bg.defaultColors);cJ.set_renderOffset({x:cE.x,y:cE.y});var cK=cJ;cK.renderDrawItems(cF,null,cG,null)};f.$0=function(L,cC){var cD=L.get(0).firstChild;if(!(ss.compareStrings(cD.tagName,cC,true)===0)){cD=document.createElement(cC);L.children().first().replaceWith(cD)}return cD};var g=function(){this.$4=null;this.$1=0;this.$1=-1};g.__typeName='tab.$13';var h=function(){};h.__typeName='tab.$2';var i=function(L){this.$2=null;this.$3=null;this.$5=null;this.$4=false;this.$5=L;this.$4=this.$5==='selected'||this.$5==='highlighted'||this.$5==='hover'};i.__typeName='tab.$3';var j=function(L){this.$1=0;this.$6=0;this.$5=null;this.$4=null;this.$3=null;this.$8=null;this.$7=null;this.$b=null;this.$a=0;this.$2=null;this.$9=null;this.$1=L.get_alpha();this.$4=L.get_lineJoin();this.$3=L.get_lineCap();this.$5=L.get_linePattern();this.$8=L.get_strokeStyle();this.$6=L.get_lineWidth();this.$a=L.get_textAngle();this.$2=L.get_font();this.$7=L.get_shapeFillStyle();this.$b=L.get_textFillStyle();this.$9=L.get_textAlign()};j.__typeName='tab.$4';var k=function(L,cC){this.$1=null;this.$0=null;this.$1=L;this.$0=cC};k.__typeName='tab.$5';var l=function(){this.$1=null;spiff.Template.call(this,$("<div class='tabMapsSearchContainer'><div class='tabMapsSearchView'></div></div>"));this.$1=this.getElementBySelector('.tabMapsSearchView')};l.__typeName='tab.$6';var m=function(L){this.$8=null;this.$c=null;this.$9=false;this.$a=0;this.$b=null;this.$c=L;this.$9=false;this.$a=0};m.__typeName='tab.$7';var n=function(L){this.$a=0;this.$c=-1;this.$b=null;this.$9=true;this.$1$1=null;this.$1$2=null;this.$a=L;this.$c=-1;this.$9=true};n.__typeName='tab.$8';var o=function(L,cC){this.$1$1=null;this.$1$2=0;this.$1(L);this.$3(cC)};o.__typeName='tab.$9';var p=function(L){this.$2=null;this.dragType=0;this.visualId=null;this.dragDictionary=null;this.dragOffset=null;this.vizRegion=null;this.scrollOffset=null;this.$2=null;this.dragType=0;this.visualId=L.visualId;this.dragDictionary=null;this.dragOffset={x:0,y:0};this.vizRegion={x:0,y:0,w:0,h:0};this.scrollOffset={x:0,y:0}};p.__typeName='tab.AnnotationDragHandler';global.tab.AnnotationDragHandler=p;var q=function(){};q.__typeName='tab.AnnotationDragType';global.tab.AnnotationDragType=q;var r=function(L){this.$0=null;X.call(this,L)};r.__typeName='tab.AnnotationHitTestLink';r.getHitTestResult=function(L,cC){var cD=(ss.isValue(L)?{x:L.x,y:L.y,w:1,h:1}:null);for(var cE=cC.length-1;cE>=0;cE--){if(tab.RectXYUtil.intersectsWith(cD,cC[cE].get_boundingBox())){return[new Z.$ctor1(cC[cE].get_objectId(),2,3)]}}return[Z.createEmptyHitTestResult()]};global.tab.AnnotationHitTestLink=r;var s=function(L,cC){this.visible=false;this.selectedAnnotations=null;this.hoverAnnotation=null;this.visualId=null;this.getAnnotationDictionary=null;this.$d=null;this.$c=null;this.dragHandler=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.visible=false;this.visualId=L;this.getAnnotationDictionary=cC;this.selectedAnnotations={};this.hoverAnnotation=null;this.dragHandler=new p(this);this.$c={x:0,y:0}};s.__typeName='tab.AnnotationSelectionChromeViewModel';global.tab.AnnotationSelectionChromeViewModel=s;var t=function(){};t.__typeName='tab.AnnotationsUtils';t.reportCreatedAnnotationTelemetry=function(L){t.reportAnnotationTelemetry(L,'Create','Context Menu')};t.reportAnnotationTelemetry=function(L,cC,cD){if(tab.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry')){tab.OnlineAnalyticsClient.logEvent('Annotations',['AnnotationType',L,'Action',cC,'ActionFrom',cD])}};global.tab.AnnotationsUtils=t;var u=function(L,cC,cD,cE){this.$1=null;this.$0=null;this.$3=null;this.$2=null;this.$0=cE;this.$3=L;this.$1=_.keys(cC);this.$2=cD};u.__typeName='tab.AnnotationsVizContextMenuItemsHandler';global.tab.AnnotationsVizContextMenuItemsHandler=u;var v=function(){this.canvasElt=null;spiff.Template.call(this,$("<canvas class='tabCanvas'></canvas>"));this.canvasElt=this.domRoot;this.canvasElt.css('display','block')};v.__typeName='tab.CanvasTemplate';global.tab.CanvasTemplate=v;var w=function(L){var cC=function(cD,cE){this.canvasElt=null;this.context=null;this.scrollOffset=null;this.$c=null;this.$g=null;this.$h=0;this.$i=null;this.$e=null;this.$j=null;this.$f=false;this.$d=null;this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[L]).call(this,cD,new v);this.canvasElt=this.get_template().canvasElt.get(0);this.scrollOffset={x:0,y:0};this.$g={x:0,y:0};this.$f=false;this.$c=cE;this.context=tab.CanvasRenderer.getRenderContext(this.canvasElt,cE);this.$h=tab.RenderUtil.calculatePixelRatio();tab.CommandController.get().add_modelsUpdated(ss.mkdel(this,this.$b))};ss.registerGenericClassInstance(cC,w,[L],{add_sizeChange:function(cD){this.$3$1=ss.delegateCombine(this.$3$1,cD)},remove_sizeChange:function(cD){this.$3$1=ss.delegateRemove(this.$3$1,cD)},get_canScrollX:function(){return this.get_docSize().w-this.get_effectiveViewSize().w>0},get_canScrollY:function(){return this.get_docSize().h-this.get_effectiveViewSize().h>0},get_docSize:null,get_actualViewSize:function(){if(!ss.isValue(this.canvasElt)){return{w:0,h:0}}return{w:this.canvasElt.width,h:this.canvasElt.height}},set_actualViewSize:function(cD){if(!ss.isValue(this.canvasElt)){return}if(tab.CanvasUtil.isOverCanvasSizeLimit(cD.w,cD.h,this.get_pixelRatio())){this.$h=1}if(this.get_effectiveViewSize().w!==cD.w||this.get_effectiveViewSize().h!==cD.h){this.$e={w:cD.w,h:cD.h};tab.CanvasUtil.setCanvasSizeAndDensify(this.canvasElt,this.get_pixelRatio(),this.$e);if(this.$c==='opaque'){this.context.set_shapeFillStyle(this.get_backgroundFillColor().toString());this.context.fillRect(0,0,this.canvasElt.width,this.canvasElt.height)}this.invalidate(false);if(!ss.staticEquals(this.$3$1,null)){this.$3$1()}}},get_effectiveViewSize:function(){if(ss.isValue(this.$e)){return this.$e}else{return this.get_actualViewSize()}},get_pixelRatio:function(){return this.$h},get_isContentOpaque:function(){return true},get_needsRedraw:function(){return!tab.RectXYUtil.isEmpty(this.get_dirtyRect())},get_scrollPos:function(){return this.scrollOffset},set_scrollPos:function(cD){if(!tab.PointUtil.equals(this.scrollOffset,cD)){var cE=tab.PointDUtil.timesScalar(cD,this.$h);var cF=tab.PointDUtil.round(cE);var cG=tab.PointUtil.subtract(cF,this.$g);var cH=tab.PointUtil.subtract(cD,this.scrollOffset);this.$g=cF;this.scrollOffset=cD;if(this.get_backgroundFillColor().get_isOpaque()){if(!tab.RectXYUtil.isEmpty(this.get_dirtyRect())){var cI={x:-cH.x,y:-cH.y};var cJ=tab.RectXYUtil.offsetRect(this.get_dirtyRect(),cI);this.set_dirtyRect(cJ)}if(cH.x!==0&&cH.y!==0||!this.get_isContentOpaque()){this.invalidate(true)}else{var cK=cG.x;var cL=cG.y;var cM=this.get_actualViewSize().w-Math.abs(cK);var cN=((cK>0)?cK:0);var cO=((cK>0)?0:-cK);var cP=this.get_actualViewSize().h-Math.abs(cL);var cQ=((cL>0)?cL:0);var cR=((cL>0)?0:-cL);if(cM<=0||cP<=0){this.invalidate(true)}else{this.context.reset();this.context.drawImage5(this.canvasElt,cN,cQ,cM,cP,cO,cR,cM,cP);var cS={x:0,y:0,w:this.get_effectiveViewSize().w,h:this.get_effectiveViewSize().h};if(cH.x>0){cS.x=cS.w-cH.x}else if(cH.x<0){cS.w=-cH.x}if(cH.y>0){cS.y=cS.h-cH.y}else if(cH.y<0){cS.h=-cH.y}if(cH.x===0){cS.h=Math.abs(cH.y)}if(cH.y===0){cS.w=Math.abs(cH.x)}cS=tab.RectXYUtil.dialate(cS,3);this.invalidateRect(cS,true)}}}else{this.invalidate(true)}}},get_dirtyRect:function(){return(ss.isValue(this.context)?this.context.dirtyRect:{x:0,y:0,w:0,h:0})},set_dirtyRect:function(cD){if(ss.isValue(this.context)){this.context.dirtyRect=cD}},get_backgroundFillColor:null,dispose:function(){if(ss.isValue(this.$i)){tab.WindowHelper.cancelAnimationFrame(ss.unbox(this.$i));this.$i=null}this.$9();tab.CommandController.get().remove_modelsUpdated(ss.mkdel(this,this.$b));ss.makeGenericType(spiff.BaseView$1,[L]).prototype.dispose.call(this)},clearDirty:function(){this.set_dirtyRect({x:0,y:0,w:0,h:0})},invalidate:function(cD){this.set_dirtyRect({x:0,y:0,w:this.get_effectiveViewSize().w,h:this.get_effectiveViewSize().h});this.triggerRedraw(cD)},invalidateRect:function(cD,cE){var cF;if(tab.RectXYUtil.isEmpty(this.get_dirtyRect())){cF=tab.RectXYUtil.clone(cD)}else{cF=tab.RectXYUtil.union(this.get_dirtyRect(),cD)}if(cF.x<0){cF.x=0}if(cF.x+cF.w>this.get_effectiveViewSize().w){cF.w=this.get_effectiveViewSize().w-cF.x}if(cF.y<0){cF.y=0}if(cF.y+cF.h>this.get_effectiveViewSize().h){cF.h=this.get_effectiveViewSize().h-cF.y}this.set_dirtyRect(cF);this.triggerRedraw(cE)},setXPos:function(cD){this.set_scrollPos({x:cD,y:this.get_scrollPos().y})},setYPos:function(cD){this.set_scrollPos({x:this.get_scrollPos().x,y:cD})},redraw:null,redrawFinished:null,triggerRedraw:function(cD){var cE=ss.isValue(this.$i);cD=cD||false;if(cD){this.$a();this.redraw();this.$9();if(cE){tab.WindowHelper.cancelAnimationFrame(ss.unbox(this.$i));this.$i=null}this.redrawFinished()}else if(!cE){this.$a();this.$i=tab.WindowHelper.requestAnimationFrame(ss.mkdel(this,function(){this.$b()}))}},$b:function(){if(ss.isValue(this.$i)){this.triggerRedraw(true)}},$a:function(){this.$j=this.$j||tab.BaseSession.get_waitHandler();var cD=!this.$f&&this.$j.isBusy();if(cD){this.$j.addref(false,true);this.$f=true;return true}if(ss.isNullOrUndefined(this.$d)){this.$d=tab.CompletionMonitor.get_instance().hold(1)}return false},$9:function(){if(this.$f){this.$j=this.$j||tab.BaseSession.get_waitHandler();this.$j.release();this.$f=false}if(ss.isValue(this.$d)){this.$d.dispose();this.$d=null}}},function(){return ss.makeGenericType(spiff.BaseView$1,[L])},function(){return[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[L]),spiff.IScrollable]});return cC};w.__typeName='tab.CanvasView$1';ss.initGenericClass(w,a,1);global.tab.CanvasView$1=w;var x=function(L,cC){this.$i=null;this.$j=null;this.$k=null;cb.call(this,L,"<div>\n                                                <svg class='selectionShape'>\n                                                    <circle class='tvdrag_svg_marquee'></circle><line class='circle_crosshair' x1='0' y1='0' x2='0' y2='0'></line><line class='circle_crosshair' x1='0' y1='0' x2='0' y2='0'></line><line class='circle_radius'x1='0' y1='0' x2='0' y2='0'></line></svg><div class='tabDistanceReadout'></div></div>",'tvdrag_svg_div');this.$i={center:{x:0,y:0},radius:0};this.$j={center:{x:0,y:0},radius:0};this.$k=cC};x.__typeName='tab.CircleShapeSelector';global.tab.CircleShapeSelector=x;var y=function(){this.$0=null;this.$1=null;cc.call(this);this.$0={center:{x:0,y:0},radius:0};this.$1={center:{x:0,y:0},radius:0}};y.__typeName='tab.CircleShapeState';global.tab.CircleShapeState=y;var z=function(L,cC,cD){this.$c=null;tab.CanvasRenderer.call(this,L,cC);this.$c=cD||bg.defaultColors};z.__typeName='tab.DisplayList2DRenderer';z.setTextProperties=function(L,cC,cD){L.set_textFillStyle(cC.color);var cE=new ss.StringBuilder;if(cC.fontStyle==='font-style-italic'){cE.append('italic ')}if(cC.fontWeight==='font-weight-bold'){cE.append('bold ')}if(ss.isValue(cC.textDecoration)&&cC.textDecoration==='text-decoration-underline'){L.set_shouldUnderlineText(true)}if(ss.isNullOrUndefined(cD)||cD<=0){cD=cC.fontSize}var cF=z.$1(cC.fontName);cE.append(cD+'pt '+cF);L.set_font(cE.toString());L.set_textBaseline(tab.FormattingConverters.getTextBaseline(cC.valign))};z.resolveLineCap=function(L,cC){var cD='butt';if(L!=='dashed'&&L!=='dotted'){cD=(ss.isValue(cC)?tab.CanvasRenderer.toCanvasLineCap(cC):tab.TabRenderContext2D.defaultLineCap)}return cD};z.$1=function(L){var cC=z.$a.cl[L];if(ss.isValue(cC)){return cC}var cD=ss.trimString(L,[39,34]);var cE=cD.split(' ');var cF=[];for(var cG=cE.length;cG>0;--cG){cF.push(tab.FormattingConverters.addQuotationMarks(cE.join(' '),true));cE.pop()}tab.FormattingConverters.addDefaultFontForTableau(cF);var cH=cF.join(', ');z.$a.add(L,cH);return cH};z.$0=function(L,cC){var cD=cC;L.set_textFillStyle(tab.ColorModel.convertColorForCanvas(cD.color));if(ss.isValue(cD.angle)){var cE=cD.angle*Math.PI/180;L.set_textAngle(cE)}else{L.set_textAngle(0)}var cF=new ss.StringBuilder;if(cD.isItalics){cF.append('italic ')}if(cD.isBold){cF.append('bold ')}if(cD.isStrikeThrough){}var cG=tab.TabRenderContext2D.defaultTextAlign;if(L.get_isTextAngleHorizontal()){var cH=cD.horizontalLabelAlignment||'h-align-left';if(cH==='h-align-right'){cG='end'}}else{var cI=cD.verticalLabelAlignment||'v-align-top';if(L.get_textAngle()<0&&cI==='v-align-top'||L.get_textAngle()>0&&cI==='v-align-bottom'){cG='end'}}L.set_textAlign(cG);L.set_shouldUnderlineText(cD.isUnderlined||false);var cJ=cD.fontName||'Arial';cJ=z.$1(cJ);var cK=cD.pointSize||8;cF.append(cK+'pt '+cJ);L.set_font(cF.toString())};z.$2=function(L,cC,cD){var cE=cC;if(cE.points.length!==4){return}var cF=cE.points[2]-cE.points[0];var cG=cE.points[3]-cE.points[1];var cH=cE.points[0]+cF/2;var cI=cE.points[1]+cG/2;var cJ=((cF<cG)?cF:cG)/2;var cK=((cF<cG)?1:(cF/cG));var cL=((cG<cF)?1:(cG/cF));L.save();L.beginPath();L.translate(cH,cI);L.scale(cK,cL);L.arc(0,0,cJ,0,tab.CanvasRenderer.twoPI,false);L.closePath();if(cD){L.fill()}else{L.stroke()}L.restore()};z.$3=function(L,cC,cD){var cE=cC.pointsF;if(!cD&&Math.round(L.get_lineWidth())%2===1){cE=ss.arrayClone(cE);for(var cF=0,cG=cE.length;cF<cG;++cF){cE[cF]+=0.5}}var cH=cC.pathElements;var cI=Math.floor(cE.length/2);if(cI<2){return}L.beginPath();var cJ=0;for(var cK=0;cK<cH.length;cK++){var cL=cH[cK];switch(cL){case'moveto':{{L.moveTo(cE[cJ],cE[cJ+1]);cJ+=2}break}case'lineto':{{L.lineTo(cE[cJ],cE[cJ+1]);cJ+=2}break}case'curveto':{{L.bezierCurveTo(cE[cJ],cE[cJ+1],cE[cJ+2],cE[cJ+3],cE[cJ+4],cE[cJ+5]);cJ+=6}break}default:{{}break}}}if(cD){L.fill()}else{L.stroke()}};z.$5=function(L){switch(L.type){case'draw-pen':case'draw-solid-brush':case'draw-gradient-brush':case'clip-rect':case'draw-text-props':case'transform':case'transform-pop':case'transform-push':case'draw-antialias':{return true}}return false};z.$6=function(L,cC){if(!cC){return L}var cD=z.$4(L);if(cD.length===0){return L}var cE=ss.arrayClone(L);var cF=function(cK,cL){var cM=cE[cK];cE[cK]=cE[cL];cE[cL]=cM};for(var cG=0;cG<cD.length;cG++){var cH=cD[cG];for(var cI=0;cI<ss.Int32.div(cH.length,2);++cI){var cJ=cH.length-1-cI;cF(cH[cI].item1,cH[cJ].item1);cF(cH[cI].item2,cH[cJ].item2)}}return cE};z.$4=function(L){var cC=[];var cD=-99999999;var cE=false;var cF=-1;var cG=[];for(var cH=0;cH<L.length;cH++){var cI=L[cH];if(cI.type==='draw-text-props'){var cJ=cI;cE=ss.isValue(cJ.horizontalLabelAlignment)&&cJ.horizontalLabelAlignment==='h-align-right';cF=cH}else if(cE&&cI.type==='draw-text'){var cK=cI;var cL=cK.points[1];if(cL!==cD){if(cG.length>=2){cC.push(cG)}cG=[]}cG.push({item1:cF,item2:cH});cD=cL}}if(cG.length>=2){cC.push(cG)}return cC};global.tab.DisplayList2DRenderer=z;var A=function(){};A.__typeName='tab.DisplayList2DUtils';A.rectXYFromDrawRect=function(L){return{x:L[0],y:L[1],w:L[2]-L[0],h:L[3]-L[1]}};A.rectXYFromRoundedRect=function(L,cC){if(!(L.length===26&&cC.length===5)||L.length===30&&cC.length===7||L.length===34&&cC.length===9){return null}var cD=2147483647;var cE=-2147483648;var cF=2147483647;var cG=-2147483648;var cH=0;for(var cI=0;cI<cC.length;cI++){var cJ=cC[cI];switch(cJ){case'lineto':case'moveto':{cH+=2;break}case'curveto':{cH+=4;cD=Math.min(cD,ss.Int32.trunc(L[cH]));cE=Math.max(cE,ss.Int32.trunc(L[cH]));cF=Math.min(cF,ss.Int32.trunc(L[cH+1]));cG=Math.max(cG,ss.Int32.trunc(L[cH+1]));cH+=2;break}default:{break}}}var cK=[cD,cF,cE,cG];return A.rectXYFromDrawRect(cK)};global.tab.DisplayList2DUtils=A;var B=function(){this.$3=null;this.$2=0;this.$1=null;this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$3=[];this.$1=new Array};B.__typeName='tab.DownloadQueue';global.tab.DownloadQueue=B;var C=function(){};C.__typeName='tab.EmptyContentProvider';global.tab.EmptyContentProvider=C;var D=function(L,cC){React.Component.call(this,L,cC)};D.__typeName='tab.FloatingMenuFlyoutButtonComponent';global.tab.FloatingMenuFlyoutButtonComponent=D;var E=function(){};E.__typeName='tab.FloatingToolbarButton';global.tab.FloatingToolbarButton=E;var F=function(){};F.__typeName='tab.FloatingToolbarButtonPressEventProperties';global.tab.FloatingToolbarButtonPressEventProperties=F;var G=function(L,cC){React.Component.call(this,L,cC)};G.__typeName='tab.FloatingToolbarContainerComponent';global.tab.FloatingToolbarContainerComponent=G;var H=function(L){this.$w=false;this.$x=false;this.$u=false;this.$v=false;this.$q=true;this.$r=true;this.$p=null;this.$n='rectangleSelect';this.$o=null;this.$t=null;this.$s=null;this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$o={};this.$o['radialSelect']={iconClassName:'tab-radial-select-tool',buttonTooltip:tab.Strings.PanZoomSelectToolsRadialSelectionTooltipMobile,onTap:ss.mkdel(this,this.$b)};this.$o['lassoSelect']={iconClassName:'tab-lasso-select-tool',buttonTooltip:tab.Strings.PanZoomSelectToolsLassoSelectionTooltipMobile,onTap:ss.mkdel(this,this.$9)};this.$o['rectangleSelect']={iconClassName:'tab-rectangle-select-tool',buttonTooltip:tab.Strings.PanZoomSelectToolsRectangularSelectionTooltipMobile,isSelected:true,onTap:ss.mkdel(this,this.$c)};this.$o['appendSelect']={iconClassName:'tab-append-select-tool',buttonTooltip:tab.Strings.PanZoomSelectToolsAppendTooltip,onTap:ss.mkdel(this,this.$6)};this.$t={iconClassName:'tab-rectangle-select-tool',buttonTooltip:tab.Strings.PanZoomSelectToolsRectangularSelectionTooltipMobile,isSelected:true,onTap:ss.mkdel(this,this.$d),shouldShowFlyoutCaret:true};this.$s={iconClassName:'tab-pan-tool',buttonTooltip:tab.Strings.PanZoomSelectToolsPanTooltipMobile,onTap:ss.mkdel(this,this.$a)};L.add_toolbarToolModeUpdated(ss.mkdel(this,this.$f));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){L.remove_toolbarToolModeUpdated(ss.mkdel(this,this.$f))})));this.$f(L.get_currentPointerToolMode());L.add_appendModeUpdated(ss.mkdel(this,this.$7));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){L.remove_appendModeUpdated(ss.mkdel(this,this.$7))})));this.$7(L.get_isAppendMode())};H.__typeName='tab.FloatingToolbarContainerViewModel';H.$0=function(L){switch(L){case'pan-map':{return'pan'}case'radial-selection':{return'radialSelect'}case'lasso-selection':{return'lassoSelect'}case'rectangular-selection':default:{return'rectangleSelect'}}};H.$1=function(L){switch(L){case'pan':{return'pan-map'}case'radialSelect':{return'radial-selection'}case'lassoSelect':{return'lasso-selection'}case'rectangleSelect':{return'rectangular-selection'}default:{return'no-tools'}}};global.tab.FloatingToolbarContainerViewModel=H;var I=function(L,cC){this.$7=null;this.$8=null;this.$9=0;this.$a=0;React.Component.call(this,L,cC);this.$7=ss.mkdel(this,function(cD){this.$8=cD})};I.__typeName='tab.FloatingToolbarPositioningComponent';global.tab.FloatingToolbarPositioningComponent=I;var J=function(){};J.__typeName='tab.FloatingToolbarShowEventProperties';global.tab.FloatingToolbarShowEventProperties=J;var K=function(){};K.__typeName='tab.FloatingToolbarTelemetry';K.$0=function(){return tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tab.FeatureFlags.isEnabled('GestureModelTelemetry')&&tab.GestureModelSettings.get_newModelEnabled()};K.trackButtonPress=function(L){if(K.$0()){tab.OnlineAnalyticsClient.logEvent('Viz_FloatingToolbar_ButtonPress',['ButtonName',L])}};K.trackShow=function(L,cC,cD,cE){if(K.$0()){tab.OnlineAnalyticsClient.logEvent('Viz_FloatingToolbar_Show',['MapsSearchShown',L,'ToolsShown',cC,'PanAvailable',cD,'HomeShown',cE])}};global.tab.FloatingToolbarTelemetry=K;var M=function(L,cC,cD,cE,cF){this.parent=null;this.buttonContainer=null;this.flyOutContainer=null;this.flyOutButtons=null;this.zoomInButton=null;this.zoomOutButton=null;this.zoomHomeButton=null;this.flyOutButton=null;this.zoomAreaButton=null;this.rectSelectButton=null;this.radialSelectButton=null;this.lassoSelectButton=null;this.panButton=null;this.api=null;this.canZoomHome=false;this.geoSearchEnabled=false;this.$8=null;this.toolbarType=null;this.$7=true;spiff.Widget.call(this,$("<div class='FloatingZoomToolbar'></div>"));this.parent=$(L);this.api=cC;this.toolbarType=cD;this.canZoomHome=false;this.geoSearchEnabled=cF;this.element.css({top:cE+'px'})};M.__typeName='tab.FloatingZoomToolbar';global.tab.FloatingZoomToolbar=M;var N=function(L){this.zoomToolbar=null;this.$1=null;this.$0=null;this.$0=L};N.__typeName='tab.FloatingZoomToolbarView';global.tab.FloatingZoomToolbarView=N;var O=function(){};O.__typeName='tab.GeometryUtil';O.domainToPixelGeometry=function(L,cC,cD,cE){switch(L.geometryType){case'multiPolygon':{O.domainToPixelMultipolygon(L.multiPolygon,cC,cD,cE);break}case'multiPoint':{var cF=0;var cG=L.multiPoint;O.domainToPixelCoordinateArray(cG.pointsF,cC,cD,cE,cF);break}case'multiLineString':{var cH=L.multiLine;O.domainToPixelMultiline(cH,cC,cD,cE);break}default:{break}}};O.domainToPixelMultipolygon=function(L,cC,cD,cE){var cF=L.polygonList;var cG=cF.length;var cH=6;for(var cI=0;cI<cG;cI++){var cJ=cF[cI].lineList;var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL].pointsF;O.domainToPixelCoordinateArray(cM,cC,cD,cE,cH)}}};O.domainToPixelMultiline=function(L,cC,cD,cE){var cF=L.lineList.length;var cG=4;for(var cH=0;cH<cF;cH++){var cI=L.lineList[cH].pointsF;O.domainToPixelCoordinateArray(cI,cC,cD,cE,cG)}};O.domainToPixelCoordinateArray=function(L,cC,cD,cE,cF){var cG=3;var cH=cD.w/cC.w;var cI=cD.h/cC.h;var cJ=L.length;if(cJ<2){return}var cK=null;var cL=null;var cM=0;for(var cN=0;cN<cJ;cN+=2){var cO=O.$5(L[cN],cC.x,cD.x,cH);var cP=O.$5(L[cN+1],cC.y,cD.y,cI);var cQ=cM+cJ-cN;if(cE&&cQ>cF){var cR=cO*3<<0;var cS=cP*3<<0;if(cR===cK&&cS===cL){continue}cK=cR;cL=cS}L[cM]=cO;L[cM+1]=cP;cM+=2}L.length=cM};O.isGeometryPresModelFeatureEmpty=function(L){switch(L.geometryType){case'multiPoint':{return L.multiPoint.pointsF.length===0}case'multiPolygon':{return L.multiPolygon.polygonList.length===0}case'multiLineString':{return L.multiLine.lineList.length===0}default:{return false}}};O.$5=function(L,cC,cD,cE){return(L-cC)*cE+cD};O.isPointInPoly=function(L,cC,cD){if(ss.isValue(cD)&&cD!==0){return O.polygonIntersectsDoubleRect(L,{x:cC.x-cD,y:cC.y-cD,w:cD*2,h:cD*2})}var cE=0;var cF=L.length;for(var cG=0;cG<cF;cG+=2){var cH=L[cG];var cI=L[cG+1];var cJ=(cG+2)%cF;var cK=L[cJ];var cL=L[cJ+1];if(cI<=cC.y){if(cL>cC.y){if(O.$6(cH,cI,cK,cL,cC.x,cC.y)>0){++cE}}}else if(cL<=cC.y){if(O.$6(cH,cI,cK,cL,cC.x,cC.y)<0){--cE}}}return cE!==0};O.isPointInPolygon=function(L,cC){var cD=false;var cE=0;for(var cF=0;cF<L.lineList.length;cF++){var cG=L.lineList[cF];var cH=O.isPointInPoly(cG.pointsF,cC);if(cE===0){if(cH){cD=true}else{break}}else if(cH){cD=false;break}cE++}return cD};O.isPointInMultipolygon=function(L,cC){var cD=false;for(var cE=0;cE<L.polygonList.length;cE++){var cF=L.polygonList[cE];cD=O.isPointInPolygon(cF,cC);if(cD){break}}return cD};O.lineToQuad=function(L,cC){var cD=cC/2;var cE={x:L[0],y:L[1]};var cF={x:L[2],y:L[3]};var cG=cF.x-cE.x;var cH=cF.y-cE.y;var cI=Math.sqrt(cG*cG+cH*cH);if(cI===0){return O.makeQuadFromPoints(cE,cE,cE,cE)}var cJ={x:cD*(cG/cI),y:cD*(cH/cI)};var cK={x:-cJ.y,y:cJ.x};var cL={x:cE.x+cK.x,y:cE.y+cK.y};var cM={x:cE.x-cK.x,y:cE.y-cK.y};var cN={x:cF.x+cK.x,y:cF.y+cK.y};var cO={x:cF.x-cK.x,y:cF.y-cK.y};return O.makeQuadFromPoints(cL,cM,cO,cN)};O.makeQuadFromPoints=function(L,cC,cD,cE){var cF=new Array(8);cF[0]=L.x;cF[1]=L.y;cF[2]=cC.x;cF[3]=cC.y;cF[4]=cD.x;cF[5]=cD.y;cF[6]=cE.x;cF[7]=cE.y;return cF};O.isPointInMultiLineString=function(L,cC,cD){var cE=L.lineList;var cF=cE.length;for(var cG=0;cG<cF;cG++){var cH=cE[cG].pointsF;var cI=cH.length;if(cI<4||cI%2===1){continue}for(var cJ=0;cJ<cI-2;cJ+=2){var cK=new Array(4);cK[0]=cH[cJ];cK[1]=cH[cJ+1];cK[2]=cH[cJ+2];cK[3]=cH[cJ+3];if(O.isPointInPoly(O.lineToQuad(cK,cD),cC)){return true}if(cJ>=2){var cL={x:cH[cJ],y:cH[cJ+1]};var cM={center:cL,radius:cD/2};if(O.isPointInCircle(cC,cM)){return true}}}}return false};O.isPointInMultipoint=function(L,cC,cD){var cE=L.pointsF;var cF={center:cC,radius:cD};for(var cG=0;cG<cE.length;cG=cG+2){var cH=cE[cG];var cI=cE[cG+1];var cJ={x:cH,y:cI};if(O.isPointInCircle(cJ,cF)){return true}}return false};O.getGeometrySelectionTransform=function(L,cC,cD,cE){if(!L){return tab.Transform.pixelToDomain(cC,cD,cE)}return tab.Transform.none()};O.multipolygonIntersectsDoubleRect=function(L,cC){for(var cD=0;cD<L.polygonList.length;cD++){var cE=L.polygonList[cD];for(var cF=0;cF<cE.lineList.length;cF++){var cG=cE.lineList[cF];if(O.polygonIntersectsDoubleRect(cG.pointsF,cC)){return true}}}return false};O.multiLineStringIntersectsDoubleRect=function(L,cC,cD){for(var cE=0;cE<L.lineList.length;cE++){var cF=L.lineList[cE];var cG=cF.pointsF;var cH=cG.length;if(cH<4||cH%2===1){continue}for(var cI=0;cI<cH-2;cI+=2){var cJ=new Array(4);cJ[0]=cG[cI];cJ[1]=cG[cI+1];cJ[2]=cG[cI+2];cJ[3]=cG[cI+3];if(O.polygonIntersectsDoubleRect(O.lineToQuad(cJ,cD),cC)){return true}if(cI>=2){var cK={x:cG[cI],y:cG[cI+1]};var cL={center:cK,radius:cD/2};var cM=O.$1(cC);if(O.polygonIntersectsCircle(cM,cL)){return true}}}}return false};O.multipointIntersectsDoubleRect=function(L,cC,cD){return O.multipointIntersectsPolygon(L,O.$1(cC),cD)};O.multipolygonIntersectsPolygon=function(L,cC,cD){for(var cE=0;cE<L.polygonList.length;cE++){var cF=L.polygonList[cE];for(var cG=0;cG<cF.lineList.length;cG++){var cH=cF.lineList[cG];if(O.$7(cH.pointsF,cC,cD)){return true}}}return false};O.multiLineStringIntersectsPolygon=function(L,cC,cD){for(var cE=0;cE<L.lineList.length;cE++){var cF=L.lineList[cE];var cG=cF.pointsF;var cH=cG.length;if(cH<4||cH%2===1){continue}for(var cI=0;cI<cH-2;cI+=2){var cJ=new Array(4);cJ[0]=cG[cI];cJ[1]=cG[cI+1];cJ[2]=cG[cI+2];cJ[3]=cG[cI+3];if(O.$7(O.lineToQuad(cJ,cD),cC)){return true}if(cI>=2){var cK={x:cG[cI],y:cG[cI+1]};var cL={center:cK,radius:cD/2};if(O.polygonIntersectsCircle(cC,cL)){return true}}}}return false};O.multipointIntersectsPolygon=function(L,cC,cD){var cE=L.pointsF;var cF={center:{x:0,y:0},radius:cD};for(var cG=0;cG<cE.length;cG=cG+2){var cH=cE[cG];var cI=cE[cG+1];var cJ={x:cH,y:cI};cF.center=cJ;if(O.polygonIntersectsCircle(cC,cF)){return true}}return false};O.polygonIntersectsRect=function(L,cC){return O.$7(L,O.$2(cC))};O.polygonIntersectsDoubleRect=function(L,cC){return O.$7(L,O.$1(cC))};O.$7=function(L,cC,cD){if(L.length===0||cC.length===0){return false}if(O.isPointInPoly(cC,{x:L[0],y:L[1]})){return true}if(O.isPointInPoly(L,{x:cC[0],y:cC[1]})){return true}if(L.length>cC.length||ss.isValue(cD)){var cE=L;L=cC;cC=cE}var cF=cD;var cG=ss.isValue(cF);for(var cH=0,cI=L.length;cH<cI;cH+=2){var cJ=(cH+2)%cI;if(cG&&!O.$9(cF,L[cH],L[cH+1],L[cJ],L[cJ+1])){continue}if(O.$8(cC,L[cH],L[cH+1],L[cJ],L[cJ+1])){return true}}return false};O.$9=function(L,cC,cD,cE,cF){if(cC>cE){var cG=cC;cC=cE;cE=cG}if(cE<L.x||cC>L.x+L.w){return false}if(cD>cF){var cH=cD;cD=cF;cF=cH}return!(cF<L.y||cD>L.y+L.h)};O.$8=function(L,cC,cD,cE,cF){var cG=cE-cC;var cH=cF-cD;var cI=L.length;for(var cJ=0;cJ<cI;cJ+=2){var cK=(cJ+2)%cI;var cL=L[cJ];var cM=L[cJ+1];var cN=L[cK];var cO=L[cK+1];var cP=cG*(cM-cF)-cH*(cL-cE);var cQ=cG*(cO-cF)-cH*(cN-cE);if(cP<0&&cQ<0||cP>0&&cQ>0){continue}var cR=cN-cL;var cS=cO-cM;var cT=cR*(cD-cO)-cS*(cC-cN);var cU=cR*(cF-cO)-cS*(cE-cN);if(cP!==0&&cQ!==0){if(cT<0&&cU>0||cT>0&&cU<0){return true}else if(cT!==0&&cU!==0){continue}}var cV=[cT,cU,cP,cQ];var cW=[cC,cD,cE,cF,cL,cM,cN,cO];if(O.$4(cV,cW)){return true}}return false};O.$4=function(L,cC){var cD=[4,4,0,0];var cE=[6,6,2,2];for(var cF=0,cG=0,cH=4;cF<cH;cF++,cG+=2){if(L[cF]===0){var cI=cC[cG];var cJ=cC[cG+1];var cK=cC[cD[cF]];var cL=cC[cD[cF]+1];var cM=cC[cE[cF]];var cN=cC[cE[cF]+1];if(cI>=Math.min(cK,cM)&&cI<=Math.max(cK,cM)&&cJ>=Math.min(cL,cN)&&cJ<=Math.max(cL,cN)){return true}}}return false};O.multipolygonIntersectsCircle=function(L,cC){for(var cD=0;cD<L.polygonList.length;cD++){var cE=L.polygonList[cD];for(var cF=0;cF<cE.lineList.length;cF++){var cG=cE.lineList[cF];if(O.polygonIntersectsCircle(cG.pointsF,cC)){return true}}}return false};O.multiLineStringIntersectsCircle=function(L,cC,cD){for(var cE=0;cE<L.lineList.length;cE++){var cF=L.lineList[cE];var cG=cF.pointsF;var cH=cG.length;if(cH<4||cH%2===1){continue}for(var cI=0;cI<cH-2;cI+=2){var cJ=new Array(4);cJ[0]=cG[cI];cJ[1]=cG[cI+1];cJ[2]=cG[cI+2];cJ[3]=cG[cI+3];if(O.polygonIntersectsCircle(O.lineToQuad(cJ,cD),cC)){return true}if(cI>=2){var cK={x:cG[cI],y:cG[cI+1]};var cL={center:cK,radius:cD/2};if(O.circleIntersectsCircle(cC,cL)){return true}}}}return false};O.multipointIntersectsCircle=function(L,cC,cD){var cE=L.pointsF;var cF={center:{x:0,y:0},radius:cD};for(var cG=0;cG<cE.length;cG=cG+2){var cH=cE[cG];var cI=cE[cG+1];var cJ={x:cH,y:cI};cF.center=cJ;if(O.circleIntersectsCircle(cC,cF)){return true}}return false};O.circleIntersectsCircle=function(L,cC){var cD=Math.pow(L.center.x-cC.center.x,2)+Math.pow(L.center.y-cC.center.y,2);return Math.pow(L.radius+cC.radius,2)>=cD};O.polygonIntersectsCircle=function(L,cC){if(L.length===0||cC.radius===0){return false}if(O.isPointInPoly(L,cC.center)){return true}if(O.isPointInCircle({x:L[0],y:L[1]},cC)){return true}var cD=cC.radius*cC.radius;for(var cE=0,cF=L.length;cE<cF;cE+=2){var cG=L[cE];var cH=L[cE+1];var cI=(cE+2)%cF;var cJ=L[cI];var cK=L[cI+1];var cL=cK-cH;var cM=cJ-cG;var cN=cM*cM+cL*cL;var cO=((cC.center.x-cG)*cM+(cC.center.y-cH)*cL)/cN;cO=Math.min(1,Math.max(0,cO));var cP=cG+cO*cM;var cQ=cH+cO*cL;cM=cP-cC.center.x;cL=cQ-cC.center.y;cN=cM*cM+cL*cL;if(cD>cN){return true}}return false};O.circleIntersectsRect=function(L,cC){if(L.radius<=0){return false}var cD=O.$0(cC);for(var cE=0;cE<cD.length;cE++){var cF=cD[cE];if(O.isPointInCircle(cF,L)){return true}}if(tab.RectXYUtil.inRectPointF(cC,L.center)){return true}var cG=cC.w/2;var cH=cC.h/2;var cI={x:cC.x+cG,y:cC.y+cH};if(L.center.y<cC.y||L.center.y>=cC.y+cC.h){return L.center.x>cC.x&&L.center.x<cC.x+cC.w&&Math.abs(cI.y-L.center.y)<cH+L.radius}if(L.center.x<cC.x||L.center.x>=cC.x+cC.w){return L.center.y>cC.y&&L.center.y<cC.y+cC.h&&Math.abs(cI.x-L.center.x)<cG+L.radius}return false};O.normalizeAngle=function(L){var cC=L%O.twoPI;if(cC<0){cC+=O.twoPI}return cC};O.isInBetweenAngles=function(L,cC,cD){var cE=false;if(cC>cD){var cF=cC;cC=cD;cD=cF;cE=true}if(cC<=L&&cD>=L){return!cE}return cE};O.isPointInCircle=function(L,cC){var cD=Math.pow(L.x-cC.center.x,2)+Math.pow(L.y-cC.center.y,2);var cE=cC.radius*cC.radius;var cF=cD<cE;return cF};O.isPointInWedge=function(L,cC,cD,cE){if(!O.isPointInCircle(L,cC)){return false}var cF=L.x-cC.center.x;var cG=L.y-cC.center.y;var cH=Math.atan2(cG,cF);cH=O.normalizeAngle(cH);return O.isInBetweenAngles(cH,cD,cE)};O.rectIntersectsWedge=function(L,cC,cD,cE){var cF=O.$0(L);for(var cG=0;cG<cF.length;cG++){var cH=cF[cG];if(O.isPointInWedge(cH,cC,cD,cE)){return true}}if(tab.RectXYUtil.inRectPointF(L,cC.center)){return true}var cI=O.$3(cC,cD,cE);return O.polygonIntersectsRect(cI,L)};O.polygonIntersectsWedge=function(L,cC,cD,cE){if(L.length===0){return false}if(O.isPointInWedge({x:L[0],y:L[1]},cC,cD,cE)){return true}if(O.isPointInPoly(L,cC.center)){return true}var cF=O.$3(cC,cD,cE);return O.$7(cF,L)};O.circleIntersectsWedge=function(L,cC,cD,cE){if(L.radius<=0){return false}if(O.isPointInWedge(L.center,cC,cD,cE)){return true}if(O.isPointInCircle(cC.center,L)){return true}var cF=O.$3(cC,cD,cE);return O.polygonIntersectsCircle(cF,L)};O.$3=function(L,cC,cD){while(cC>cD){cD+=O.twoPI}var cE=cC;var cF=new Array(4);cF[0]=L.center.x;cF[1]=L.center.y;cF[2]=L.center.x+Math.cos(cE)*L.radius;cF[3]=L.center.y+Math.sin(cE)*L.radius;while(cE<cD){var cG=Math.min(cE+O.$a,cD);cF.push(L.center.x+Math.cos(cG)*L.radius);cF.push(L.center.y+Math.sin(cG)*L.radius);cE=cG}return cF};O.areRectanglesIntersecting=function(L,cC){return tab.RectXYUtil.intersectsWith(L,cC)};O.getSquaredDistanceToCenter=function(L,cC){var cD=L.x+L.w/2;var cE=L.y+L.h/2;var cF=cD-cC.x;var cG=cE-cC.y;return cF*cF+cG*cG};O.getSquaredDistanceToNearestSide=function(L,cC){var cD=L.y;var cE=L.y+L.h;var cF=L.x;var cG=L.x+L.w;var cH,cI;if(cC.x<cF){cH=cF-cC.x}else if(cC.x>cG){cH=cC.x-cG}else{cH=0}if(cC.y<cD){cI=cD-cC.y}else if(cC.y>cE){cI=cC.y-cE}else{cI=0}return cH*cH+cI*cI};O.getSquaredDistanceToCircumference=function(L,cC){var cD=Math.sqrt(O.getSquaredDistanceToCenter(L,cC))-Math.min(L.w,L.h)/2;cD=Math.max(cD,0);return cD*cD};O.getSquaredDistanceToLineSegment=function(L,cC,cD){var cE,cF;if(cD.x<cC.x){var cG=cC;cC=cD;cD=cG}var cH=cD.x-cC.x;var cI=cD.y-cC.y;var cJ=cH*cH+cI*cI;if(cJ===0){cE=L.x-cC.x;cF=L.y-cC.y;return cE*cE+cF*cF}var cK=((L.x-cC.x)*cH+(L.y-cC.y)*cI)/cJ;var cL;var cM;if(cK<0){cL=cC.x;cM=cC.y}else if(cK>1){cL=cD.x;cM=cD.y}else{cL=cC.x+cK*cH;cM=cC.y+cK*cI}cE=L.x-cL;cF=L.y-cM;return cE*cE+cF*cF};O.degreeToRad=function(L){return L*(Math.PI/180)};O.radToDegree=function(L){return L*(180/Math.PI)};O.haversineDistance=function(L,cC,cD){var cE=O.degreeToRad(cC.item1-L.item1);var cF=O.degreeToRad(L.item2);var cG=O.degreeToRad(cC.item2);var cH=cG-cF;var cI=Math.pow(Math.sin(cH/2),2)+Math.cos(cF)*Math.cos(cG)*Math.pow(Math.sin(cE/2),2);var cJ=2*Math.atan2(Math.sqrt(cI),Math.sqrt(1-cI));return cJ*cD};O.$6=function(L,cC,cD,cE,cF,cG){return(cD-L)*(cG-cC)-(cF-L)*(cE-cC)};O.$0=function(L){var cC=new Array(4);cC[0]={x:L.x,y:L.y};cC[1]={x:L.x+L.w,y:L.y};cC[2]={x:L.x+L.w,y:L.y+L.h};cC[3]={x:L.x,y:L.y+L.h};return cC};O.$2=function(L){var cC=new Array(8);cC[0]=L.x;cC[1]=L.y;cC[2]=L.x+L.w;cC[3]=L.y;cC[4]=cC[2];cC[5]=L.y+L.h;cC[6]=L.x;cC[7]=cC[5];return cC};O.$1=function(L){var cC=new Array(8);cC[0]=L.x;cC[1]=L.y;cC[2]=L.x+L.w;cC[3]=L.y;cC[4]=cC[2];cC[5]=L.y+L.h;cC[6]=L.x;cC[7]=cC[5];return cC};global.tab.GeometryUtil=O;var P=function(L){this.$b=null;this.$a=null;spiff.Widget.call(this,$("<div class='tabGotoMyLocationButtonContainer'></div>"));if(!BrowserSupport.BrowserSupport.IsGeolocationSupported()||tab.ApplicationModel.get_instance().get_isOffline()){return}this.$b=L;this.$a=spiff.LabelButton.newNativeButton();this.get_button().addClass('tabGotoMyLocationButton');this.get_button().element.attr('title',tab.Strings.GotoMyLocationTooltip);this.get_button().add_click(ss.mkdel(this,this.$9));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_button().remove_click(ss.mkdel(this,this.$9))})));this.get_button().addToDom(this.element)};P.__typeName='tab.GotoMyLocationButton';P.$0=function(){if(BrowserSupport.BrowserSupport.IsChrome()&&BrowserSupport.BrowserSupport.GoogleChromeVersion()>=50){return true}if(BrowserSupport.BrowserSupport.IsIos()&&BrowserSupport.BrowserSupport.IosVersion()>=10){return true}if(BrowserSupport.BrowserSupport.IsSafari()&&BrowserSupport.BrowserSupport.SafariVersion()>=10){return true}return false};global.tab.GotoMyLocationButton=P;var Q=function(L,cC){tab.CanvasRenderer.call(this,L,cC)};Q.__typeName='tab.GridLinesRenderer';Q.$9=function(L,cC,cD,cE){return Q.$a(cC)&&(Q.$5(L)||Q.$6(L))||Q.$b(L,cD)||Q.$c(L,cE)};Q.$a=function(L){return!ss.isNullOrUndefined(L)};Q.$5=function(L){return!ss.isNullOrUndefined(L.X)&&!ss.isNullOrUndefined(L.X.LineWidth)};Q.$6=function(L){return!ss.isNullOrUndefined(L.Y)&&!ss.isNullOrUndefined(L.Y.LineWidth)};Q.$7=function(L,cC){var cD=L.XAxisTable.IsReversed;return cD.length>=cC+1&&cD[cC]};Q.$8=function(L,cC){var cD=L.YAxisTable.IsReversed;return cD.length>=cC+1&&cD[cC]};Q.$b=function(L,cC){return L.IsQuantitativeTickType[cC]&&!ss.isNullOrUndefined(L.X)&&!ss.isNullOrUndefined(L.X.ZeroLineWidth)};Q.$c=function(L,cC){return L.IsQuantitativeTickType[cC]&&!ss.isNullOrUndefined(L.Y)&&!ss.isNullOrUndefined(L.Y.ZeroLineWidth)};Q.$2=function(L,cC){return(cC?(1-L):L)};Q.$3=function(L,cC,cD){return Q.$2(cC,cD)*L.w};Q.$4=function(L,cC,cD){return Q.$2(cC,cD)*L.h};Q.$0=function(L,cC,cD){return ss.round(L.x+Q.$3(L,cC,cD))};Q.$1=function(L,cC,cD){return ss.round(L.y+L.h-Q.$4(L,cC,cD))};global.tab.GridLinesRenderer=Q;var R=function(L,cC,cD,cE,cF,cG,cH){this.$D=null;this.$E=null;this.$C=null;bC.call(this,L,cC);this.$E={};var cI=tab.ApplicationModel.get_instance().get_shapeManager().get_imageKeys();var cJ=ss.getKeyCount(tab.SceneDataUtil.shapeMapping)+cI.length;var cK=2;var cL=cF-4;var cM=cG-4;var cN=cD-cL/2;var cO=cE-cM/2;var cP=cF-1;var cQ=cG-1;var cR=cD-cP/2;var cS=cE-cQ/2;var cT=this.$B(cJ);var cU=this.$B(cJ);var cV=this.$B(cJ);var cW=this.$B(cJ);var cX=this.$B(cJ);var cY=this.$B(cJ);for(var cZ=0;cZ<cJ;cZ++){var da;if(cZ<ss.getKeyCount(tab.SceneDataUtil.shapeMapping)){da=_.keys(tab.SceneDataUtil.shapeMapping)[cZ];cV.dataValues[cZ]=cL;cW.dataValues[cZ]=cM;cX.dataValues[cZ]=cN;cY.dataValues[cZ]=cO}else{da=cI[cZ-ss.getKeyCount(tab.SceneDataUtil.shapeMapping)];cV.dataValues[cZ]=cP;cW.dataValues[cZ]=cQ;cX.dataValues[cZ]=cR;cY.dataValues[cZ]=cS}this.$E[da]=cZ;cU.dataValues[cZ]=da;cT.dataValues[cZ]=cZ.toString()}var db={};var dc='pdKey';db.PDMarks={};db.PDMarks[dc]={};var dd=db.PDMarks[dc];var de={};de.shape_id=cU.dataValues;de.tuple_id=cT.dataValues;de.size=cV.dataValues;de.width=cV.dataValues;de.height=cW.dataValues;var df=de;df['left']=cX.dataValues;df['top']=cY.dataValues;dd.Encodings=de;dd.color=(new tab.ColorModel(0,0,0,1)).toArgbInt();var dg={};dg.Parameters={};var dh=dg.Parameters;dh.background_color=cH.toArgbInt();dh.PrimitiveType=4;dd.MarkLayoutData=dg;de.x=new Array(de.width.length);de.y=new Array(de.width.length);for(var di=0;di<de.x.length;++di){de.x[di]=cD;de.y[di]=cE}var dj={};dj.Rect=[0,0,cF,cG];var dk=new tab.PaneMarksInfo(0,cJ);var dl=new bX;db.PDMarks={};db.PDMarks['pdKey']=dd;this.$D=new bE.$ctor1('pdKey',dl,dj,dk,null,'pdKey',db,0)};R.__typeName='tab.HackyShapeSwatchRenderer';global.tab.HackyShapeSwatchRenderer=R;var S=function(){};S.__typeName='tab.HitResultHitType';global.tab.HitResultHitType=S;var T=function(L,cC,cD,cE,cF){this.$1=null;this.$0=null;this.$3=0;this.$4=0;this.$2=null;this.$9=0;this.$8=null;this.$6=null;this.$5=0;this.$7=0;this.$0=L;if(ss.isNullOrUndefined(cE)||tab.RectXYUtil.isEmpty(cE)){this.$2=null}else{this.$2=cE}if(ss.isNullOrUndefined(cD)){this.$4=-1}else{this.$4=cD}if(ss.isNullOrUndefined(cF)){this.$9=0}else{this.$9=cF}this.$3=cC;this.$1=[]};T.__typeName='tab.HitTargetNode';T.findPaneNode=function(L){if(ss.isNullOrUndefined(L)){return null}while(L.$3!==0){if(L.get_nodeType()===1){return L}L=L.get_parent()}return null};T.createRootNode=function(){return new T({x:0,y:0,w:9999999,h:9999999},0)};global.tab.HitTargetNode=T;var U=function(L,cC,cD){this.$1=null;this.$2=null;this.$3=null;this.$1=cD;this.$2=cC;this.$3=L};U.__typeName='tab.HitTestChain';U.$0=function(L,cC,cD){var cE={};for(var cF=0;cF<L.length;cF++){var cG=L[cF];if(ss.keyExists(cE,cG)){continue}switch(cG){case 0:{if(tab.FeatureFlags.isEnabled('RichTextEditingAnnotation')){cE[cG]=new r(cC)}break}case 1:{cE[cG]=new bU(cC,cD);break}case 2:{cE[cG]=new cn(cC);break}case 3:{cE[cG]=new bB(cC,cD);break}}}return cE};U.$4=function(L,cC,cD,cE){if(!ss.isValue(L)||!ss.isValue(cC)){return null}var cF=U.$0(L.concat(cC),cD,cE);return new U(L,cC,cF)};U.$3=function(L,cC,cD){if(!ss.isValue(L)){return null}var cE=U.$0(L,cC,cD);return new U(L,L,cE)};U.createHitTestChain=function(L,cC){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return U.$1(L,cC)}else{return U.$2(L)}};U.$2=function(L){return U.$3(U.$8,L,null)};U.$1=function(L,cC){return((tsConfig.current_sheet_type==='story')?U.$3(U.$6,L,cC):U.$4(U.$7,U.$5,L,cC))};global.tab.HitTestChain=U;var V=function(){this.$3=null;this.$4=null;this.$2=null;this.$1=null;var L=$('.tab-tvView .tabCanvas');this.$4=L.get(0);this.$3=this.$4.style.position;this.$4.style.position='absolute';this.$2=document.createElement('canvas');this.$2.width=this.$4.width;this.$2.height=this.$4.height;this.$2.style.position='absolute';this.$1=this.$4.parentNode;this.$1.appendChild(this.$2)};V.__typeName='tab.HitTestDebugger';V.get_instance=function(){if(ss.isNullOrUndefined(V.$1)){V.$1=new V}return V.$1};global.tab.HitTestDebugger=V;var W=function(L){this.$5=null;this.$5=L};W.__typeName='tab.HitTester';W.$0=function(L,cC,cD,cE,cF){switch(cF){case'area':{return bC.areaMarkExactHitTest(L,cC.x-cE,cC.y,cD)}case'line':{return bC.lineMarkExactHitTest(L,cC.x-cE,cC.y,cD)}case'multipolygon':{return bC.multipolygonMarkExactHitTest(L,cC.x-cE,cC.y,cD)}case'pie':{return bC.pieMarkExactHitTest(L,cC.x-cE,cC.y,cD)}case'shape':{return bC.shapeMarkExactHitTest(L,cC.x-cE,cC.y,cD)}case'bar':case'square':{return bC.barMarkExactHitTest(L,cC.x-cE,cC.y,cD)}case'text':{return bC.textMarkExactHitTest(L,cC.x-cE,cC.y,cD)}default:{var cG={x:cC.x-Math.round(cE),y:cC.y,w:cC.w,h:cC.h};return tab.RectXYUtil.intersectsWith(cG,L.getMarkBounds(cD))}}};W.$1=function(L,cC,cD,cE,cF){switch(cF){case'line':{return bC.lineMarkNearHitTest(L,cC.x-cE,cC.y,cD)}case'multipolygon':{return bC.multipolygonMarkNearHitTest(L,cC.x-cE,cC.y,cD)}case'shape':{return bC.shapeMarkNearHitTest(L,cC.x-cE,cC.y,cD)}case'bar':case'square':{return bC.barMarkNearHitTest(L,cC.x-cE,cC.y,cD)}case'text':{return bC.textMarkNearHitTest(L,cC.x-cE,cC.y,cD)}case'area':{return bC.areaMarkNearHitTest(L,cC.x-cE,cC.y,cD)}default:{return false}}};W.rectangleAreaHit=function(L,cC,cD,cE,cF,cG){var cH=(cF.get_isNull()?cD:tab.RectXYUtil.offsetRectF(cD,{x:-cF.get_translateX(),y:-cF.get_translateY()}));switch(cG){case'area':{return bC.areaMarkRectangleAreaHitTest(L,cH,cE)}case'line':{return bC.lineMarkRectangleAreaHitTest(L,cH,cE)}case'multipolygon':{return bC.multipolygonMarkRectangleAreaHitTest(L,cH,cE)}case'pie':{return bC.pieMarkRectangleAreaHitTest(L,cH,cE)}case'shape':{return bC.shapeMarkRectangleAreaHitTest(L,cH,cE)}case'text':{return bC.textMarkRectangleAreaHitTest(L,cH,cE)}case'bar':case'square':{return bC.barMarkRectangleAreaHitTest(L,cH,cE)}default:{return tab.RectXYUtil.intersectsWith(cD,cC)}}};W.circleAreaHit=function(L,cC,cD,cE,cF,cG,cH){var cI=(cF.get_isNull()?cD:tab.CircleUtil.offsetCircle(cD,{x:-cF.get_translateX(),y:-cF.get_translateY()}));var cJ=(cF.get_isNull()?cC:tab.RectXYUtil.offsetRectF(cC,{x:-cF.get_translateX(),y:-cF.get_translateY()}));switch(cG){case'area':{return bC.areaMarkCircleAreaHitTest(L,cI,cE,cJ,cH)}case'line':{return bC.lineMarkCircleAreaHitTest(L,cI,cE,cJ,cH)}case'multipolygon':{return bC.multipolygonMarkCircleAreaHitTest(L,cI,cE,cJ,cH)}case'pie':{return bC.pieMarkCircleAreaHitTest(L,cI,cE,cH)}case'shape':{return bC.shapeMarkCircleAreaHitTest(L,cI,cE,cH)}case'text':{return bC.textMarkCircleAreaHitTest(L,cI,cE,cJ,cH)}case'bar':case'square':{return bC.barMarkCircleAreaHitTest(L,cI,cE,cJ,cH)}default:{return O.circleIntersectsRect(cD,cC)}}};W.polyAreaHit=function(L,cC,cD,cE,cF,cG){var cH=(cF.get_isNull()?cC:tab.RectXYUtil.offsetRectF(cC,{x:-cF.get_translateX(),y:-cF.get_translateY()}));switch(cG){case'area':{return bC.areaMarkPolygonAreaHitTest(L,cD,cE,cH)}case'line':{return bC.lineMarkPolygonAreaHitTest(L,cD,cE,cH)}case'multipolygon':{return bC.multipolygonMarkPolygonAreaHitTest(L,cD,cE,cH)}case'pie':{return bC.pieMarkPolygonAreaHitTest(L,cD,cE)}case'shape':{return bC.shapeMarkPolygonAreaHitTest(L,cD,cE)}case'text':{return bC.textMarkPolygonAreaHitTest(L,cD,cE,cH)}case'bar':case'square':{return bC.barMarkPolygonAreaHitTest(L,cD,cE,cH)}default:{return O.polygonIntersectsRect(cD,cH)}}};W.getTransformInfo=function(L,cC){var cD=L.paneRect;var cE=cC.get_worldOffset();return tab.Transform.offset(cD.x+cE,cD.y)};global.tab.HitTester=W;var X=function(L){this.paneTableVM=null;this.paneTableVM=L};X.__typeName='tab.HitTestLink';global.tab.HitTestLink=X;var Y=function(){};Y.__typeName='tab.HitTestLinkType';global.tab.HitTestLinkType=Y;var Z=function(L){Z.$ctor1.call(this,((L.get_visualPart()==='marks')?L.get_tupleId():L.get_index()),(ss.keyExists(Z.$1,L.get_visualPart())?Z.$1[L.get_visualPart()]:1),(ss.keyExists(Z.$0,L.get_hitType())?Z.$0[L.get_hitType()]:0))};Z.__typeName='tab.HitTestResult';Z.$ctor1=function(L,cC,cD){this.$2=0;this.$0=0;this.$1=0;this.$3=false;this.$2=L;this.$0=cC;this.$1=cD;this.$3=cD!==0};Z.createEmptyHitTestResult=function(){return new Z.$ctor1(0,0,0)};Z.tieBreak=function(L,cC){if(L.get_hitType()>cC.get_hitType()||L.get_hitType()===cC.get_hitType()&&(L.get_hitObjectType()>cC.get_hitObjectType()||L.get_hitObjectType()===cC.get_hitObjectType()&&L.get_id()>cC.get_id())){return L}return cC};Z.getIdsFromHitTestResults=function(L,cC){var cD=new Set;for(var cE=0;cE<L.length;cE++){var cF=L[cE];cD.add(cF.get_id())}var cG=tab.SetUtilities.getValues(ss.Int32).call(null,cD);if(cC){cG.sort(function(cH,cI){return cH-cI})}return cG};Z.hasExactHit=function(L){for(var cC=0;cC<L.length;cC++){var cD=L[cC];if(cD.get_hitType()===3){return true}}return false};Z.tieBreakHits=function(L,cC){var cD=Z.createEmptyHitTestResult();var cE=Z.createEmptyHitTestResult();for(var cF=0;cF<L.length;cF++){var cG=L[cF];if(cG.get_hitType()===3){return cG}if(cG.get_hitType()!==0&&cD.get_hitType()===0){cD=cG}}for(var cH=0;cH<cC.length;cH++){var cI=cC[cH];if(cI.get_hitType()===3){return cI}if(cI.get_hitType()!==0&&cE.get_hitType()===0){cE=cI}}if(cD.get_hitType()!==0){return cD}if(cE.get_hitType()!==0){return cE}return Z.createEmptyHitTestResult()};global.tab.HitTestResult=Z;var ba=function(){};ba.__typeName='tab.HitTestStructureBuilder';ba.buildBinnedHitTestStructure=function(L,cC){var cD=T.createRootNode();var cE=0;var cF=L.get_runtimeData().get_annexedData().Panes;for(var cG=0;cG<cF.length;cG++){var cH=cF[cG];var cI=ba.$2(L,cH);for(var cJ=0;cJ<cI.length;cJ++){var cK=cI[cJ];var cL=L.getPaneDrawInfo(cK);var cM=cL.get_mapExtentOrPaneRect();var cN=new T(cM,1);var cO=bX.getPaneMarksKey(cK);cN.set_paneKey(cO);cN.set_paneIndex(cK.get_paneIndex());cN.set_paneOrderIndex(cE++);cD.addNode(cN);var cP=Math.ceil(cM.w/cC);for(var cQ=0;cQ<cC;++cQ){var cR=cQ*cP+cM.x;var cS=cM.y;var cT=cP;var cU=cM.h;var cV=new T({x:cR,y:cS,w:cT,h:cU},2);cN.addNode(cV)}var cW=ba.buildMarkBounds(cL,0,cL.markCount-1,cL.getAllMarkBounds());for(var cX=0;cX<cW.length;cX++){var cY=cW[cX];var cZ=cN.get_children();for(var da=0;da<cZ.length;da++){var db=cZ[da];if(tab.RectXYUtil.intersectsWith(cY.get_boundingBox(),db.get_boundingBox())){db.addNode(cY)}}}}}return cD};ba.buildLinearHitTestStructure=function(L){var cC=T.createRootNode();var cD=0;var cE=L.get_runtimeData().safeFetchMarkPanes();for(var cF=0;cF<cE.length;cF++){var cG=cE[cF];var cH=ba.$2(L,cG);for(var cI=0;cI<cH.length;cI++){var cJ=cH[cI];var cK=L.getPaneDrawInfo(cJ);if(!ss.isValue(cK)){continue}var cL=ba.$0(cJ,cK,cD);cC.addNode(cL);cD++}}return cC};ba.buildTrendLineHitTestStructure=function(L,cC,cD){var cE=L.pointsF;var cF=L.pathElements;var cG=Math.floor(cE.length/2);if(cG<2){return new T({x:0,y:0,w:0,h:0},0)}var cH=[];var cI=0;for(var cJ=0;cJ<cF.length;cJ++){var cK=cF[cJ];switch(cK){case'moveto':{{cI+=2}break}case'lineto':{{if(ss.isValue(cE[cI+3])){var cL=[cE[cI],cE[cI+1],cE[cI+2],cE[cI+3]];var cM=ss.Int32.trunc(Math.min(cL[0],cL[2]));var cN=ss.Int32.trunc(Math.min(cL[1],cL[3]));var cO=ss.Int32.trunc(Math.max(cL[0],cL[2]))-cM;var cP=ss.Int32.trunc(Math.max(cL[1],cL[3]))-cN;var cQ={x:cM,y:cN,w:cO,h:cP};cQ=tab.RectXYUtil.dialate(cQ,ss.Int32.trunc(cC));var cR=new T(cQ,5,cD);cH.push(cR)}cI+=2}break}case'curveto':{{cI+=6}break}default:{{}break}}}var cS=ba.$1(cH,4);return cS};ba.buildMarkBounds=function(L,cC,cD,cE){var cF=cD-cC+1;var cG=[];var cH=0;for(var cI=cC;cI<=cD;++cI){var cJ=cE[cI].item1;var cK=cE[cI].item2;var cL=L.getMarkInstanceOffsets(cI);var cM=cL.length;for(var cN=0;cN<cM;cN++){var cO=cJ;var cP=cK;var cQ=cL[cN];if(cQ!==0){var cR=ss.Int32.trunc(cQ);cO=tab.RectXYUtil.offsetRectXY(cJ,cR,0);cP=(ss.isValue(cK)?tab.RectXYUtil.offsetRectXY(cK,cR,0):null)}cG[cH]=new T(cO,3,cI,cP,cQ);++cH}}return cG};ba.print=function(L,cC){var cD='';var cE=cC;while(cE>0){cD+=' ';--cE}console.log(cD+L.get_objectId());if(L.get_nodeType()!==3){L.get_children().forEach(function(cF){ba.print(cF,cC+1)})}};ba.$2=function(L,cC){var cD=[];var cE=cC.DrawPanes;for(var cF=0;cF<cE.length;cF++){var cG=cE[cF];var cH=cG;var cI=tab.EnumConversions.visualPartFromInt(cH[0]);if(cI==='marks'){var cJ=cH[1];var cK=new tab.PaneMarksInfo.$ctor1(L.get_runtimeData().get_finalDataStore().Viewpoint.PerPaneExtents,L.get_runtimeData().get_paneStoreTable(),cJ,L.$g,cC.Row,cC.Column);cD.push(cK)}}return cD};ba.$1=function(L,cC){var cD=L;while(cD.length>1){var cE=[];for(var cF=0;cF<cD.length;cF+=cC){var cG=cC;var cH=cD.length-cF;if(cH<cC){cG=cH}var cI=[];var cJ=null;for(var cK=0;cK<cG;++cK){var cL=cD[cF+cK];cI.push(cL);if(cK===0){cJ={x:cL.get_boundingBox().x,y:cL.get_boundingBox().y,w:cL.get_boundingBox().w,h:cL.get_boundingBox().h}}else{cJ=tab.RectXYUtil.union(cJ,cI[cK].get_boundingBox())}}var cM=new T(cJ,4);cM.addNodes(cI);cE.push(cM)}cD=cE}if(cD.length!==1){}var cN=T.createRootNode();cN.addNodes(cD);return cN};ba.$0=function(L,cC,cD){var cE=cC.get_mapExtentOrPaneRect();var cF=new T(cE,1);var cG=bX.getPaneMarksKey(L);cF.set_paneKey(cG);cF.set_paneIndex(L.get_paneIndex());cF.set_paneOrderIndex(cD);var cH=(cC.hasUserPanes?cC.userPaneCount:1);var cI=cC.paneRect.x;var cJ=cC.paneRect.y;var cK=cC.getAllMarkBounds();for(var cL=0;cL<cH;++cL){var cM=tab.RectXYUtil.offsetRectXY(cC.getUserPaneRectByIndex(cL),cI,cJ);var cN=new T(cM,6);var cO=cC.getUserPaneMarkRange(cL);var cP=ba.buildMarkBounds(cC,cO.firstMark,cO.lastMark,cK);cN.addNodes(cP);cF.addNode(cN)}return cF};global.tab.HitTestStructureBuilder=ba;var bb=function(){};bb.__typeName='tab.IHitTestLink';global.tab.IHitTestLink=bb;var bc=function(L,cC,cD,cE,cF){this.$2=null;this.$1=0;this.$3=null;this.$0=null;this.$4=0;this.$2=L;this.$1=cC;this.$3=cD;this.$0=cE;this.$4=cF};bc.__typeName='tab.ImageDownloaderImageData';global.tab.ImageDownloaderImageData=bc;var bd=function(L){this.$0=null;ss.EventArgs.call(this);this.$0=L};bd.__typeName='tab.ImageLoadedEventArgs';global.tab.ImageLoadedEventArgs=bd;var be=function(){};be.__typeName='tab.IMapControl';global.tab.IMapControl=be;var bf=function(){};bf.__typeName='tab.IMapsSearchViewTemplate';global.tab.IMapsSearchViewTemplate=bf;var bg=function(){this.highlightBgColor=null;this.selectionBgColor=null;this.highlightTextColor=null;this.selectionTextColor=null;this.highlightBgColor=bg.defaultHighlightBgColor;this.selectionBgColor=bg.defaultSelectionBgColor;this.highlightTextColor=bg.defaultHighlightTextColor;this.selectionTextColor=bg.defaultSelectionTextColor};bg.__typeName='tab.InteractionColorModel';bg.extractInteractionColors=function(L){var cC=ss.isValue(L)&&!ss.isNullOrEmptyString(L.highlightBgColor);var cD=ss.isValue(L)&&!ss.isNullOrEmptyString(L.highlightTextColor);var cE=ss.isValue(L)&&!ss.isNullOrEmptyString(L.selectBgColor);var cF=ss.isValue(L)&&!ss.isNullOrEmptyString(L.selectionTextColor);if(!cC&&!cE&&!cF&&!cD){return bg.defaultColors}var cG=new bg;cG.highlightBgColor=(cC?tab.ColorModel.fromColorCode(L.highlightBgColor):cG.highlightBgColor);cG.selectionBgColor=(cE?tab.ColorModel.fromColorCode(L.selectBgColor):cG.selectionBgColor);cG.highlightTextColor=(cD?tab.ColorModel.fromColorCode(L.highlightTextColor):cG.highlightTextColor);cG.selectionTextColor=(cF?tab.ColorModel.fromColorCode(L.selectionTextColor):cG.selectionTextColor);return cG};global.tab.InteractionColorModel=bg;var bh=function(){};bh.__typeName='tab.IRegionContentProvider';global.tab.IRegionContentProvider=bh;var bi=function(){};bi.__typeName='tab.IRuntimeUIModule';global.tab.IRuntimeUIModule=bi;var bj=function(){};bj.__typeName='tab.IVizContextMenuItemsHandler';global.tab.IVizContextMenuItemsHandler=bj;var bk=function(){};bk.__typeName='tab.IZoomToolbarContainer';global.tab.IZoomToolbarContainer=bk;var bl=function(){this.$h=null;this.$n=null;this.$k=null;this.$j=null;this.$l=null;this.$m=null;this.$p=null;this.$q=0;this.$g=0;this.$o=false;this.$i=null};bl.__typeName='tab.LeafletMapControl';bl.$0=function(L){var cC=256;var cD=document.createElement('canvas');cD.width=cC;cD.height=cC;var cE=tab.CanvasRenderer.getRenderContext(cD,'transparent');cE.set_shapeFillStyle(L);cE.fillRect(0,0,256,256);var cF=cD.toDataURL('png',null);return cF};bl.$1=function(cC){return new L.LatLng(cC.item1,cC.item2)};global.tab.LeafletMapControl=bl;var bm=function(L){this.startIndex=0;this.endIndex=0;this.selectedCount=0;this.highlightedCount=0;this.marksNeedingDraw=[];this.worldOffsets=null;this.boundingBox={x:0,y:0,w:0,h:0};this.sloppyBoundingBox={x:0,y:0,w:0,h:0};this.startIndex=L;this.endIndex=-1;this.selectedCount=0;this.highlightedCount=0};bm.__typeName='tab.LineAttribute';global.tab.LineAttribute=bm;var bn=function(L){this.$1=null;this.$1=[];this.$0(L)};bn.__typeName='tab.LineMarkDrawState';global.tab.LineMarkDrawState=bn;var bo=function(L,cC,cD){this.$2=null;cx.call(this,L,cC);this.$2=cD};bo.__typeName='tab.LocalRenderVizHitTestDebouncer';global.tab.LocalRenderVizHitTestDebouncer=bo;var bp=function(L,cC){this.$1=null;this.$2=null;this.$1=L;this.$2=cC};bp.__typeName='tab.LocalRenderVizHitTester';global.tab.LocalRenderVizHitTester=bp;var bq=function(){};bq.__typeName='tab.LocalRenderVizSelectionDispatcher';bq.doSingleSelect=function(L,cC,cD,cE,cF,cG){switch(L.get_tooltipTargetType()){case'mark':{tab.SelectionClientCommands.selectMarksLocal([L.get_id()],cG,cD,false,function(){cE(L)});if(tab.ApplicationModel.get_instance().get_isOffline()){tabBootstrap.ViewerBootstrap.get_instance().apiResponder.sendEventNotification('api.MarksSelectionChangedEvent',cG.worksheet,null)}break}case'refline':{tab.SelectionClientCommands.selectRefLinesLocal([L.get_id()],cG,cD,function(){cE(L)});break}case'visualparts':{var cH={x:cC.x,y:cC.y,w:1,h:1};tab.SelectionClientCommands.selectRectRegionAndDoUbertip('viz',cH,cD,cG,function(){cE(L)},cF,null);break}default:{if(L.get_hitType()!==0){cE(L)}var cI=cF==='always-clear'||cF==='default'&&cD==='simple';if(cI){tab.SelectionClientCommands.clearAllSelections(cG)}break}}};bq.doMultiSelect=function(L,cC,cD,cE){var cF=Z.getIdsFromHitTestResults(L,false);if(tab.MiscUtil.isNullOrEmpty$2(cF)){if(cC==='simple'){tab.SelectionClientCommands.clearAllSelections(cE)}return false}else{tab.SelectionClientCommands.selectMarksLocal(cF,cE,cC,true,cD);return true}};global.tab.LocalRenderVizSelectionDispatcher=bq;var br=function(){this.attributionBackground=null;this.attributionLink=null;spiff.Template.call(this,$(br.$0));this.attributionBackground=this.getElementBySelector('.tabMapAttributionBackground');this.attributionLink=this.getElementBySelector('.tabMapAttributionLink')};br.__typeName='tab.MapAttributionTemplate';global.tab.MapAttributionTemplate=br;var bs=function(){};bs.__typeName='tab.MapboxExpression';bs.replaceString=function(L,cC,cD){var cE=ss.safeCast(L,String);if(ss.isValue(cE)){if(ss.referenceEquals(cE,cC)){return cD}else{return cE}}var cF=ss.safeCast(L,Array);if(ss.isNullOrUndefined(cF)){return L}var cG=ss.arrayClone(cF);for(var cH=0;cH<cG.length;++cH){cG[cH]=bs.replaceString(cG[cH],cC,cD)}return cG};global.tab.MapboxExpression=bs;var bt=function(){this.$v=null;this.$y=null;this.$x=null;this.$z=null;this.$u=null;this.$w=null;this.$A=0;this.$1$1=false};bt.__typeName='tab.MapboxMapControl';bt.$0=function(){return{version:8,sources:{},layers:[]}};global.tab.MapboxMapControl=bt;var bu=function(){this.$1$1=0;this.$1$2=0;this.$1$3=0};bu.__typeName='tab.MapboxMapState';global.tab.MapboxMapState=bu;var bv=function(){};bv.__typeName='tab.MapControlTelemetry';bv.logMapCreateStart=function(L){tab.OnlineAnalyticsClient.logEvent('MapControl_CreateMap_Start',['MapControlType',L])};bv.logMapCreateDone=function(L){tab.OnlineAnalyticsClient.logEvent('MapControl_CreateMap_Done',['MapControlType',L])};bv.logInitialRenderComplete=function(L,cC){tab.OnlineAnalyticsClient.logEvent('MapControl_InitialRenderComplete',['MapControlType',L,'ElapsedTime',cC])};global.tab.MapControlTelemetry=bv;var bw=function(){};bw.__typeName='tab.MapControlType';global.tab.MapControlType=bw;var bx=function(L,cC){ss.makeGenericType(spiff.ReactSpiffAdapter$3,[by,Object,Object]).call(this,tab.ObjectRegistry.newView(by).call(null,[L.viewModel]),L,cC);this.get_widget().set_isVisible(true);this.get_widget().set_isCollapsed(true)};bx.__typeName='tab.MapsSearchComponent';global.tab.MapsSearchComponent=bx;var by=function(L,cC){this.mapsSearchViewModel=null;this.mapsSearchViewTemplate=null;this.$l=null;this.mapsSearchView=null;this.gotoMyLocationButton=null;this.$o=null;this.$m=false;this.$n=true;this.queryDelayTimer=null;ss.makeGenericType(spiff.BaseView$1,[bz]).call(this,L,cC.get_template());this.mapsSearchViewModel=L;this.mapsSearchViewTemplate=cC;this.mapsSearchView=cC.get_template().domRoot.find('.tabMapsSearchView');this.set_isVisible(false);this.$l=tab.ObjectRegistry.newWidget(spiff.CompositeSearchWidget).call(null);this.mapsSearchViewTemplate.get_mapsSearchViewRootElement().append(this.$l.get_domRoot());this.$l.addClass('tabMapsSearchView-searchControlsContainer');this.get_compositeSearchWidget().setPlaceholderText(tab.Strings.MapsSearchViewInitialText);this.mapsSearchView.addClass('tabMapsSearchViewTranslucent');this.get_compositeSearchWidget().get_textInputView().add_enterKeyPressed(ss.mkdel(this,this.handleEnterKeyPress));this.get_compositeSearchWidget().get_searchButton().add_click(ss.mkdel(this,this.handleSearchButtonClick));this.get_compositeSearchWidget().add_listItemClicked(ss.mkdel(this,this.handleListItemClick));this.get_compositeSearchWidget().add_inputTextChanged(ss.mkdel(this,this.$b));this.mapsSearchViewModel.add_receivedNewSuggestions(ss.mkdel(this,this.showNewSuggestions));this.mapsSearchViewModel.add_updateTextInputValue(ss.mkdel(this,this.updateSearchTextValue));this.mapsSearchViewModel.add_searchWidgetCollapsed(ss.mkdel(this,this.handleCollapseSearchWidget));this.mapsSearchViewModel.add_visibilityChanged(ss.mkdel(this,this.$d));this.mapsSearchViewModel.add_userInteractionEnabled(ss.mkdel(this,this.handleEnableUserInteraction));this.mapsSearchViewModel.add_initialTextInputValueRestored(ss.mkdel(this,this.$c));this.mapsSearchViewModel.add_suggestionListRemoved(ss.mkdel(this,this.handleRemoveSuggestionList));this.mapsSearchViewModel.add_blurInputElementCalled(ss.mkdel(this,this.$a));this.$i();this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_compositeSearchWidget().get_textInputView().remove_enterKeyPressed(ss.mkdel(this,this.handleEnterKeyPress));this.get_compositeSearchWidget().get_searchButton().remove_click(ss.mkdel(this,this.handleSearchButtonClick));this.get_compositeSearchWidget().remove_listItemClicked(ss.mkdel(this,this.handleListItemClick));this.get_compositeSearchWidget().remove_inputTextChanged(ss.mkdel(this,this.$b));this.mapsSearchViewModel.remove_receivedNewSuggestions(ss.mkdel(this,this.showNewSuggestions));this.mapsSearchViewModel.remove_updateTextInputValue(ss.mkdel(this,this.updateSearchTextValue));this.mapsSearchViewModel.remove_searchWidgetCollapsed(ss.mkdel(this,this.handleCollapseSearchWidget));this.mapsSearchViewModel.remove_visibilityChanged(ss.mkdel(this,this.$d));this.mapsSearchViewModel.remove_userInteractionEnabled(ss.mkdel(this,this.handleEnableUserInteraction));this.mapsSearchViewModel.remove_initialTextInputValueRestored(ss.mkdel(this,this.$c));this.mapsSearchViewModel.remove_suggestionListRemoved(ss.mkdel(this,this.handleRemoveSuggestionList));this.mapsSearchViewModel.remove_blurInputElementCalled(ss.mkdel(this,this.$a));this.$h()})));this.disposables.add$1(spiff.EventUtil.bindWithDispose(this.get_compositeSearchWidget().get_textInputView().get_inputElement(),'focus',ss.mkdel(this,this.$e)));this.disposables.add$1(spiff.EventUtil.bindWithDispose(this.get_compositeSearchWidget().get_textInputView().get_inputElement(),'focusout',ss.mkdel(this,this.$f)));if(this.mapsSearchViewModel.get_gotoMyLocationButtonEnabled()){this.gotoMyLocationButton=new P(this.get_viewModel().get_visualID());this.gotoMyLocationButton.addClass('tabSuppressVizTooltipsAndOverlays');this.gotoMyLocationButton.addToDom(this.element)}};by.__typeName='tab.MapsSearchView';by.newMapsSearchViewTemplate=function(){return new l};global.tab.MapsSearchView=by;var bz=function(L){this.$2=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;this.$2$9=null;this.$2$10=null;this.$2$11=null;this.$2$12=null;spiff.BaseViewModel.call(this);this.$2=L};bz.__typeName='tab.MapsSearchViewModel';global.tab.MapsSearchViewModel=bz;var bA=function(){};bA.__typeName='tab.MarkRange';bA.isInstanceOfType=function(){return true};global.tab.MarkRange=bA;var bB=function(L,cC){this.$1=null;this.$2=null;X.call(this,L);this.$2=cC};bB.__typeName='tab.MarksHitTestLink';bB.hitTestMarks=function(L,cC,cD,cE,cF){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return[]}var cG;{var cH=tabBootstrap.MetricsController.createContext('HitTestMarks',16,null);try{var cI=(ss.isValue(cD)?cD:bB.buildHitTester(cE));cG=(ss.isValue(cF)?cF.hitTest(cI,cC,cE):cI.hitTest(L,cC,cE))}finally{if(ss.isValue(cH)){cH.dispose()}}}if(cG.length>0){return cG}else{return[]}};bB.buildHitTester=function(L){var cC=ba.buildLinearHitTestStructure(L);return new W(cC)};bB.getPaneKeysByHitTesting=function(L,cC){var cD=bB.buildHitTester(cC);var cE={x:L.x,y:L.y,w:1,h:1};var cF=cD.hitTestPanes(cE);return cF};global.tab.MarksHitTestLink=bB;var bC=function(L,cC){tab.CanvasRenderer.call(this,L,cC)};bC.__typeName='tab.MarksRenderer';bC.multipolygonMarkBuildMarkBound=function(L,cC){var cD='empty';var cE=L.getMarkGeometry(L.c.get('geometry').gv(cC));if(ss.isValue(cE)){cD=cE.geometryType}switch(cD){case'multiPolygon':{var cF={x:0,y:0,w:0,h:0};{var cG=(L.hasPixelGeometry?tab.Transform.none():tab.Transform.domainToPixel(L.c.get('x').gv(cC),L.c.get('y').gv(cC),L.c.get('size').gv(cC)));bC.bBoxGeometry(cF,cG,0,L.getMarkGeometry(L.c.get('geometry').gv(cC)))}return cF;break}case'multiLineString':{var cH={x:0,y:0,w:0,h:0};{var cI=(L.hasPixelGeometry?tab.Transform.none():tab.Transform.domainToPixel(L.c.get('x').gv(cC),L.c.get('y').gv(cC),L.c.get('size').gv(cC)));bC.bBoxGeometry(cH,cI,L.c.get('size').gv(cC)/2,L.getMarkGeometry(L.c.get('geometry').gv(cC)))}return cH;break}case'multiPoint':{var cJ={x:0,y:0,w:0,h:0};{var cK=(L.hasPixelGeometry?tab.Transform.none():tab.Transform.domainToPixel(L.c.get('x').gv(cC),L.c.get('y').gv(cC),L.c.get('size').gv(cC)));bC.bBoxGeometry(cJ,cK,3.5,L.getMarkGeometry(L.c.get('geometry').gv(cC)))}return cJ;break}case'empty':{var cL={x:0,y:0,w:0,h:0};{tab.RectXYUtil.encompassCircleInPlace(cL,L.c.get('x').gv(cC),L.c.get('y').gv(cC),3.5)}return cL;break}default:{break}}return{x:0,y:0,w:0,h:0}};bC.multipolygonMarkExactHitTest=function(L,cC,cD,cE){var cF=O.getGeometrySelectionTransform(L.hasPixelGeometry,L.c.get('x').gv(cE),L.c.get('y').gv(cE),L.c.get('size').gv(cE));var cG='empty';var cH=L.getMarkGeometry(L.c.get('geometry').gv(cE));if(ss.isValue(cH)){cG=cH.geometryType}switch(cG){case'multiPolygon':{{if(O.isPointInMultipolygon(cH.multiPolygon,cF.transformPoint({x:cC,y:cD}))){return true}}return false;break}case'multiLineString':{{if(O.isPointInMultiLineString(cH.multiLine,cF.transformPoint({x:cC,y:cD}),L.c.get('size').gv(cE))){return true}}return false;break}case'multiPoint':{{if(O.isPointInMultipoint(cH.multiPoint,cF.transformPoint({x:cC,y:cD}),3.5)){return true}}return false;break}case'empty':{{if(O.isPointInCircle({x:cC,y:cD},{center:{x:L.c.get('x').gv(cE),y:L.c.get('y').gv(cE)},radius:3})){return true}}return false;break}default:{break}}return true};bC.multipolygonMarkNearHitTest=function(L,cC,cD,cE){var cF=O.getGeometrySelectionTransform(L.hasPixelGeometry,L.c.get('x').gv(cE),L.c.get('y').gv(cE),L.c.get('size').gv(cE));var cG='empty';var cH=L.getMarkGeometry(L.c.get('geometry').gv(cE));if(ss.isValue(cH)){cG=cH.geometryType}switch(cG){case'multiPolygon':{return false;break}case'multiLineString':{{if(O.isPointInMultiLineString(cH.multiLine,cF.transformPoint({x:cC,y:cD}),L.c.get('size').gv(cE)+20)){return true}}return false;break}case'multiPoint':{return false;break}case'empty':{return false;break}default:{break}}return false};bC.multipolygonMarkGetHitTestExpansion=function(L,cC){var cD=null;{cD={w:10,h:10}}return cD;return{w:0,h:0}};bC.multipolygonMarkGetDistanceToMark=function(L,cC,cD,cE){var cF='empty';var cG=L.getMarkGeometry(L.c.get('geometry').gv(cE));if(ss.isValue(cG)){cF=cG.geometryType}switch(cF){case'multiPolygon':{return O.getSquaredDistanceToCenter(L.getMarkBounds(cE),{x:cC,y:cD});break}case'multiLineString':{return O.getSquaredDistanceToCenter(L.getMarkBounds(cE),{x:cC,y:cD});break}case'multiPoint':{return O.getSquaredDistanceToCenter(L.getMarkBounds(cE),{x:cC,y:cD});break}case'empty':{return O.getSquaredDistanceToCenter(L.getMarkBounds(cE),{x:cC,y:cD});break}default:{break}}return O.getSquaredDistanceToCenter(L.getMarkBounds(cE),{x:cC,y:cD})};bC.multipolygonMarkRectangleAreaHitTest=function(L,cC,cD){var cE=O.getGeometrySelectionTransform(L.hasPixelGeometry,L.c.get('x').gv(cD),L.c.get('y').gv(cD),L.c.get('size').gv(cD));var cF='empty';var cG=L.getMarkGeometry(L.c.get('geometry').gv(cD));if(ss.isValue(cG)){cF=cG.geometryType}switch(cF){case'multiPolygon':{{if(O.multipolygonIntersectsDoubleRect(cG.multiPolygon,cE.transformRect(cC))){return true}}return false;break}case'multiLineString':{{if(O.multiLineStringIntersectsDoubleRect(cG.multiLine,cE.transformRect(cC),L.c.get('size').gv(cD))){return true}}return false;break}case'multiPoint':{{if(O.multipointIntersectsDoubleRect(cG.multiPoint,cE.transformRect(cC),3.5)){return true}}return false;break}case'empty':{{if(O.circleIntersectsRect({center:{x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},radius:3},cC)){return true}}return false;break}default:{break}}return true};bC.multipolygonMarkCircleAreaHitTest=function(L,cC,cD,cE,cF){var cG=O.getGeometrySelectionTransform(L.hasPixelGeometry,L.c.get('x').gv(cD),L.c.get('y').gv(cD),L.c.get('size').gv(cD));if(cF){var cH='empty';var cI=L.getMarkGeometry(L.c.get('geometry').gv(cD));if(ss.isValue(cI)){cH=cI.geometryType}switch(cH){case'multiPolygon':{break}case'multiLineString':{{{if(O.multiLineStringIntersectsCircle(cI.multiLine,cG.transformCircle(cC),0)){return true}}return false}break}case'multiPoint':{{{if(O.multipointIntersectsCircle(cI.multiPoint,cG.transformCircle(cC),0)){return true}}return false}break}case'empty':{{{return O.isPointInCircle({x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},cC)}}break}default:{break}}}{var cJ='empty';var cK=L.getMarkGeometry(L.c.get('geometry').gv(cD));if(ss.isValue(cK)){cJ=cK.geometryType}switch(cJ){case'multiPolygon':{{if(O.multipolygonIntersectsCircle(cK.multiPolygon,cG.transformCircle(cC))){return true}}return false;break}case'multiLineString':{{if(O.multiLineStringIntersectsCircle(cK.multiLine,cG.transformCircle(cC),L.c.get('size').gv(cD))){return true}}return false;break}case'multiPoint':{{if(O.multipointIntersectsCircle(cK.multiPoint,cG.transformCircle(cC),3.5)){return true}}return false;break}case'empty':{{if(O.circleIntersectsCircle(cC,{center:{x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},radius:3})){return true}}return false;break}default:{break}}}return O.circleIntersectsRect(cC,cE)};bC.multipolygonMarkPolygonAreaHitTest=function(L,cC,cD,cE){var cF=O.getGeometrySelectionTransform(L.hasPixelGeometry,L.c.get('x').gv(cD),L.c.get('y').gv(cD),L.c.get('size').gv(cD));var cG='empty';var cH=L.getMarkGeometry(L.c.get('geometry').gv(cD));if(ss.isValue(cH)){cG=cH.geometryType}switch(cG){case'multiPolygon':{{if(O.multipolygonIntersectsPolygon(cH.multiPolygon,cF.transformPolygon(cC))){return true}}return false;break}case'multiLineString':{{if(O.multiLineStringIntersectsPolygon(cH.multiLine,cF.transformPolygon(cC),L.c.get('size').gv(cD))){return true}}return false;break}case'multiPoint':{{if(O.multipointIntersectsPolygon(cH.multiPoint,cF.transformPolygon(cC),3.5)){return true}}return false;break}case'empty':{{if(O.polygonIntersectsCircle(cC,{center:{x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},radius:3})){return true}}return false;break}default:{break}}return O.polygonIntersectsRect(cC,cE)};bC.areaMarkBuildMarkBound=function(L,cC){var cD=L.c.get('l_neighbor').gv(cC);var cE=L.c.get('r_neighbor').gv(cC);var cF=L.lineInterpolation;var cG={x:0,y:0,w:0,h:0};if(cD!==-1){var cH=tab.RectXYUtil.rectXYFromCorners$2(L.c.get('x1').gv(cC),L.c.get('y1').gv(cC),(L.c.get('x_next').gv(cD)+L.c.get('x_prev').gv(cC))/2,(L.c.get('y_next').gv(cD)+L.c.get('y_prev').gv(cC))/2);tab.RectXYUtil.unionInPlace(cG,cH);var cI=tab.RectXYUtil.rectXYFromCorners$2((L.c.get('x1').gv(cD)+L.c.get('x1').gv(cC))/2,(L.c.get('y1').gv(cD)+L.c.get('y1').gv(cC))/2,L.c.get('x_prev').gv(cC),L.c.get('y_prev').gv(cC));tab.RectXYUtil.unionInPlace(cG,cI);tab.RectXYUtil.outsetRectInPlace(cG,10,10)}if(cE!==-1){var cJ=tab.RectXYUtil.rectXYFromCorners$2(L.c.get('x1').gv(cC),L.c.get('y1').gv(cC),(L.c.get('x_prev').gv(cE)+L.c.get('x_next').gv(cC))/2,(L.c.get('y_prev').gv(cE)+L.c.get('y_next').gv(cC))/2);tab.RectXYUtil.unionInPlace(cG,cJ);var cK=tab.RectXYUtil.rectXYFromCorners$2((L.c.get('x1').gv(cE)+L.c.get('x1').gv(cC))/2,(L.c.get('y1').gv(cE)+L.c.get('y1').gv(cC))/2,L.c.get('x_next').gv(cC),L.c.get('y_next').gv(cC));tab.RectXYUtil.unionInPlace(cG,cK);tab.RectXYUtil.outsetRectInPlace(cG,10,10)}if(cD===-1&&cE===-1){var cL=tab.RectXYUtil.rectXYFromCorners$2(L.c.get('x1').gv(cC),L.c.get('y1').gv(cC),L.c.get('x').gv(cC),L.c.get('y').gv(cC));{var cM=20-cL.w;var cN=20-cL.h;if(cM>0||cN>0){cL=tab.RectXYUtil.outsetRect(cL,Math.max(0,Math.ceil(cM/2)),Math.max(0,Math.ceil(cN/2)))}}tab.RectXYUtil.unionInPlace(cG,cL)}return cG};bC.areaMarkExactHitTest=function(L,cC,cD,cE){var cF=L.c.get('l_neighbor').gv(cE);var cG=L.c.get('r_neighbor').gv(cE);var cH=L.lineInterpolation;if(cF!==-1){var cI=new Array(8);cI[0]=L.c.get('x1').gv(cE);cI[1]=L.c.get('y1').gv(cE);cI[2]=(L.c.get('x1').gv(cF)+L.c.get('x1').gv(cE))/2;cI[3]=(L.c.get('y1').gv(cF)+L.c.get('y1').gv(cE))/2;cI[4]=(L.c.get('x_next').gv(cF)+L.c.get('x_prev').gv(cE))/2;cI[5]=(L.c.get('y_next').gv(cF)+L.c.get('y_prev').gv(cE))/2;cI[6]=L.c.get('x_prev').gv(cE);cI[7]=L.c.get('y_prev').gv(cE);if(O.isPointInPoly(cI,{x:cC,y:cD},0)){return true}}if(cG!==-1){var cJ=new Array(8);cJ[0]=L.c.get('x1').gv(cE);cJ[1]=L.c.get('y1').gv(cE);cJ[2]=(L.c.get('x1').gv(cG)+L.c.get('x1').gv(cE))/2;cJ[3]=(L.c.get('y1').gv(cG)+L.c.get('y1').gv(cE))/2;cJ[4]=(L.c.get('x_prev').gv(cG)+L.c.get('x_next').gv(cE))/2;cJ[5]=(L.c.get('y_prev').gv(cG)+L.c.get('y_next').gv(cE))/2;cJ[6]=L.c.get('x_next').gv(cE);cJ[7]=L.c.get('y_next').gv(cE);if(O.isPointInPoly(cJ,{x:cC,y:cD},0)){return true}}if(cF===-1&&cG===-1){return true}return false};bC.areaMarkNearHitTest=function(L,cC,cD,cE){var cF=L.c.get('l_neighbor').gv(cE);var cG=L.c.get('r_neighbor').gv(cE);var cH=L.lineInterpolation;if(cF!==-1){var cI=new Array(8);cI[0]=L.c.get('x1').gv(cE);cI[1]=L.c.get('y1').gv(cE);cI[2]=(L.c.get('x1').gv(cF)+L.c.get('x1').gv(cE))/2;cI[3]=(L.c.get('y1').gv(cF)+L.c.get('y1').gv(cE))/2;cI[4]=(L.c.get('x_next').gv(cF)+L.c.get('x_prev').gv(cE))/2;cI[5]=(L.c.get('y_next').gv(cF)+L.c.get('y_prev').gv(cE))/2;cI[6]=L.c.get('x_prev').gv(cE);cI[7]=L.c.get('y_prev').gv(cE);if(O.isPointInPoly(cI,{x:cC,y:cD},10)){return true}}if(cG!==-1){var cJ=new Array(8);cJ[0]=L.c.get('x1').gv(cE);cJ[1]=L.c.get('y1').gv(cE);cJ[2]=(L.c.get('x1').gv(cG)+L.c.get('x1').gv(cE))/2;cJ[3]=(L.c.get('y1').gv(cG)+L.c.get('y1').gv(cE))/2;cJ[4]=(L.c.get('x_prev').gv(cG)+L.c.get('x_next').gv(cE))/2;cJ[5]=(L.c.get('y_prev').gv(cG)+L.c.get('y_next').gv(cE))/2;cJ[6]=L.c.get('x_next').gv(cE);cJ[7]=L.c.get('y_next').gv(cE);if(O.isPointInPoly(cJ,{x:cC,y:cD},10)){return true}}if(cF===-1&&cG===-1){return true}return false};bC.areaMarkGetHitTestExpansion=function(L,cC){return{w:0,h:0}};bC.areaMarkGetDistanceToMark=function(L,cC,cD,cE){var cF=L.c.get('l_neighbor').gv(cE);var cG=L.c.get('r_neighbor').gv(cE);var cH=L.c.get('x1').gv(cE);var cI=L.c.get('y1').gv(cE);var cJ=L.c.get('x_prev').gv(cE);var cK=L.c.get('y_prev').gv(cE);var cL=L.c.get('x_next').gv(cE);var cM=L.c.get('y_next').gv(cE);var cN;{var cO=cC-cH;var cP=cD-cI;var cQ=cO*cO+cP*cP;cN=cQ}if(cF!==-1){var cR=(L.c.get('x1').gv(cF)+cH)/2;var cS=(L.c.get('y1').gv(cF)+cI)/2;var cT=(L.c.get('x_next').gv(cF)+cH)/2;var cU=(L.c.get('y_next').gv(cF)+cI)/2;var cV={x:(cH+cJ)/2,y:(cI+cK)/2};var cW={x:(cR+cT)/2,y:(cS+cU)/2};var cX=O.getSquaredDistanceToLineSegment({x:cC,y:cD},cV,cW);cN=Math.min(cN,cX)}else{var cY={x:cH,y:cI};var cZ={x:cL,y:cM};var da=O.getSquaredDistanceToLineSegment({x:cC,y:cD},cY,cZ);cN=Math.min(cN,da)}if(cG!==-1){var db=(L.c.get('x1').gv(cG)+cH)/2;var dc=(L.c.get('y1').gv(cG)+cI)/2;var dd=(L.c.get('x_prev').gv(cG)+cH)/2;var de=(L.c.get('y_prev').gv(cG)+cI)/2;var df={x:(cH+cL)/2,y:(cI+cM)/2};var dg={x:(db+dd)/2,y:(dc+de)/2};var dh=O.getSquaredDistanceToLineSegment({x:cC,y:cD},df,dg);cN=Math.min(cN,dh)}else if(cF!==-1){var di={x:cH,y:cI};var dj={x:cJ,y:cK};var dk=O.getSquaredDistanceToLineSegment({x:cC,y:cD},di,dj);cN=Math.min(cN,dk)}return cN};bC.areaMarkRectangleAreaHitTest=function(L,cC,cD){{if(O.circleIntersectsRect({center:{x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},radius:2.5},cC)){return true}}{if(O.circleIntersectsRect({center:{x:L.c.get('x1').gv(cD),y:L.c.get('y1').gv(cD)},radius:2.5},cC)){return true}}return false};bC.areaMarkCircleAreaHitTest=function(L,cC,cD,cE,cF){if(cF){}{if(O.circleIntersectsCircle(cC,{center:{x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},radius:2.5})){return true}}{if(O.circleIntersectsCircle(cC,{center:{x:L.c.get('x1').gv(cD),y:L.c.get('y1').gv(cD)},radius:2.5})){return true}}return false};bC.areaMarkPolygonAreaHitTest=function(L,cC,cD,cE){{if(O.polygonIntersectsCircle(cC,{center:{x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},radius:2.5})){return true}}{if(O.polygonIntersectsCircle(cC,{center:{x:L.c.get('x1').gv(cD),y:L.c.get('y1').gv(cD)},radius:2.5})){return true}}return false};bC.getMarkLabelBoundingBox=function(L,cC){var cD={x:0,y:0,w:0,h:0};{var cE=L.getMarkLabelProperty('x',cC);var cF=L.getMarkLabelProperty('y',cC);var cG=L.getMarkLabelProperty('width',cC);var cH=-L.getMarkLabelProperty('height',cC);cE+=0;cF+=0;if(cH<0){cF+=cH;cH=Math.abs(cH)}tab.RectXYUtil.set$1(cD,Math.floor(cE),Math.floor(cF),Math.floor(cG),Math.floor(cH))}return cD};bC.pieMarkExactHitTest=function(L,cC,cD,cE){var cF=L.c.get('size').gv(cE)/2;var cG=L.c.get('theta').gv(cE);var cH=L.c.get('theta1').gv(cE);if(cG>cH){var cI=cG;cG=cH;cH=cI}var cJ={x:L.c.get('x').gv(cE),y:L.c.get('y').gv(cE)};var cK={center:cJ,radius:cF};if(cH-cG>=1){return O.isPointInCircle({x:cC,y:cD},cK)}cG=tab.CanvasRenderer.toCanvasAngle(cG);cH=tab.CanvasRenderer.toCanvasAngle(cH);cG=O.normalizeAngle(cG);cH=O.normalizeAngle(cH);return O.isPointInWedge({x:cC,y:cD},cK,cG,cH)};bC.pieMarkRectangleAreaHitTest=function(L,cC,cD){var cE=L.c.get('size').gv(cD)/2;var cF=L.c.get('theta').gv(cD);var cG=L.c.get('theta1').gv(cD);if(cF>cG){var cH=cF;cF=cG;cG=cH}var cI={x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)};var cJ={center:cI,radius:cE};if(cG-cF>=1){return O.circleIntersectsRect(cJ,cC)}cF=tab.CanvasRenderer.toCanvasAngle(cF);cG=tab.CanvasRenderer.toCanvasAngle(cG);cF=O.normalizeAngle(cF);cG=O.normalizeAngle(cG);return O.rectIntersectsWedge(cC,{center:cI,radius:cE},cF,cG)};bC.pieMarkPolygonAreaHitTest=function(L,cC,cD){var cE=L.c.get('size').gv(cD)/2;var cF=L.c.get('theta').gv(cD);var cG=L.c.get('theta1').gv(cD);if(cF>cG){var cH=cF;cF=cG;cG=cH}var cI={x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)};var cJ={center:cI,radius:cE};if(cG-cF>=1){return O.polygonIntersectsCircle(cC,cJ)}cF=tab.CanvasRenderer.toCanvasAngle(cF);cG=tab.CanvasRenderer.toCanvasAngle(cG);cF=O.normalizeAngle(cF);cG=O.normalizeAngle(cG);return O.polygonIntersectsWedge(cC,{center:cI,radius:cE},cF,cG)};bC.pieMarkCircleAreaHitTest=function(L,cC,cD,cE){if(cE){{{return O.isPointInCircle({x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},cC)}}}var cF=L.c.get('size').gv(cD)/2;var cG=L.c.get('theta').gv(cD);var cH=L.c.get('theta1').gv(cD);if(cG>cH){var cI=cG;cG=cH;cH=cI}var cJ={x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)};var cK={center:cJ,radius:cF};if(cH-cG>=1){return O.circleIntersectsCircle(cK,cC)}cG=tab.CanvasRenderer.toCanvasAngle(cG);cH=tab.CanvasRenderer.toCanvasAngle(cH);cG=O.normalizeAngle(cG);cH=O.normalizeAngle(cH);return O.circleIntersectsWedge(cC,{center:cJ,radius:cF},cG,cH)};bC.getPieBoundingBox=function(L,cC){var cD={x:0,y:0,w:0,h:0};var cE=L.c.get('size').gv(cC)/2;{tab.RectXYUtil.unionInPlace(cD,bC.$1(L.c.get('x').gv(cC),L.c.get('y').gv(cC),cE,L.c.get('theta').gv(cC),L.c.get('theta1').gv(cC)))}if(L.c.get('draw_border').gv(cC)){tab.RectXYUtil.unionInPlace(cD,bC.$1(L.c.get('x').gv(cC),L.c.get('y').gv(cC),cE,L.c.get('theta').gv(cC),L.c.get('theta1').gv(cC)))}return cD};bC.textMarkBuildMarkBound=function(L,cC){var cD={x:0,y:0,w:0,h:0};if(!(L.clipCase!==0&&L.useCellClipForSelection)){var cE=L.c.get('x').gv(cC);var cF=L.c.get('y').gv(cC);var cG=L.c.get('width').gv(cC);var cH=-L.c.get('height').gv(cC);cE+=-L.c.get('width').gv(cC)/2;cF+=L.c.get('height').gv(cC)/2;if(cH<0){cF+=cH;cH=Math.abs(cH)}tab.RectXYUtil.set$1(cD,Math.floor(cE),Math.floor(cF),Math.floor(cG),Math.floor(cH))}if(L.clipCase!==0&&L.useCellClipForSelection){var cI=L.c.get('x').gv(cC);var cJ=L.c.get('y').gv(cC);var cK=L.c.get('clip_width').gv(cC);var cL=-L.c.get('clip_height').gv(cC);cI+=-L.c.get('clip_width').gv(cC)/2;cJ+=L.c.get('clip_height').gv(cC)/2;if(cL<0){cJ+=cL;cL=Math.abs(cL)}tab.RectXYUtil.set$1(cD,Math.floor(cI),Math.floor(cJ),Math.floor(cK),Math.floor(cL))}return cD};bC.textMarkExactHitTest=function(L,cC,cD,cE){if(!(L.clipCase!==0&&L.useCellClipForSelection)){return bC.$8(L.c.get('y').gv(cE)+L.c.get('height').gv(cE)/2,L.c.get('x').gv(cE)+-L.c.get('width').gv(cE)/2,-L.c.get('height').gv(cE),L.c.get('width').gv(cE),0,0,L.minBarHeight,L.minBarWidth,cC,cD)}if(L.clipCase!==0&&L.useCellClipForSelection){return bC.$8(L.c.get('y').gv(cE)+L.c.get('clip_height').gv(cE)/2,L.c.get('x').gv(cE)+-L.c.get('clip_width').gv(cE)/2,-L.c.get('clip_height').gv(cE),L.c.get('clip_width').gv(cE),0,0,L.minBarHeight,L.minBarWidth,cC,cD)}return false};bC.textMarkNearHitTest=function(L,cC,cD,cE){if(!(L.clipCase!==0&&L.useCellClipForSelection)){return bC.$8(L.c.get('y').gv(cE)+(L.c.get('height').gv(cE)/2+10),L.c.get('x').gv(cE)+(-L.c.get('width').gv(cE)/2-10),-L.c.get('height').gv(cE)-20,L.c.get('width').gv(cE)+20,0,0,L.minBarHeight,L.minBarWidth,cC,cD)}if(L.clipCase!==0&&L.useCellClipForSelection){return bC.$8(L.c.get('y').gv(cE)+L.c.get('clip_height').gv(cE)/2,L.c.get('x').gv(cE)+-L.c.get('clip_width').gv(cE)/2,-L.c.get('clip_height').gv(cE),L.c.get('clip_width').gv(cE),0,0,L.minBarHeight,L.minBarWidth,cC,cD)}return false};bC.textMarkGetHitTestExpansion=function(L,cC){var cD=null;if(!(L.clipCase!==0&&L.useCellClipForSelection)){cD={w:10,h:10}}if(L.clipCase!==0&&L.useCellClipForSelection){cD={w:L.c.get('clip_width').gv(cC)/2,h:L.c.get('clip_height').gv(cC)/2}}return cD};bC.textMarkGetDistanceToMark=function(L,cC,cD,cE){var cF=L.getMarkBounds(cE);return O.getSquaredDistanceToNearestSide(cF,{x:cC,y:cD})};bC.textMarkRectangleAreaHitTest=function(L,cC,cD){return true};bC.textMarkCircleAreaHitTest=function(L,cC,cD,cE,cF){if(cF){{{return O.isPointInCircle({x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},cC)}}}return O.circleIntersectsRect(cC,cE)};bC.textMarkPolygonAreaHitTest=function(L,cC,cD,cE){return O.polygonIntersectsRect(cC,cE)};bC.barMarkBuildMarkBound=function(L,cC){var cD={x:0,y:0,w:0,h:0};var cE=ss.Int32.trunc(L.c.get('size').gv(cC)+0.5)/2;if(L.scaleMarksInX&&L.scaleMarksInY){var cF=L.c.get('y').gv(cC);var cG=L.c.get('y1').gv(cC);var cH=L.c.get('x').gv(cC);var cI=L.c.get('x1').gv(cC);bC.$2(L,cD,cF,cH,cG,cI)}if(!L.scaleMarksInX&&L.scaleMarksInY){var cJ=L.c.get('y').gv(cC);var cK=L.c.get('y1').gv(cC);var cL=L.c.get('x').gv(cC)-cE;var cM=L.c.get('x').gv(cC)+cE;bC.$2(L,cD,cJ,cL,cK,cM)}if(L.scaleMarksInX&&!L.scaleMarksInY){var cN=L.c.get('y').gv(cC)-cE;var cO=L.c.get('y').gv(cC)+cE;var cP=L.c.get('x').gv(cC);var cQ=L.c.get('x1').gv(cC);bC.$2(L,cD,cN,cP,cO,cQ)}if(!L.scaleMarksInX&&!L.scaleMarksInY){var cR=L.c.get('y').gv(cC)-cE;var cS=L.c.get('y').gv(cC)+cE;var cT=L.c.get('x').gv(cC)-cE;var cU=L.c.get('x').gv(cC)+cE;bC.$2(L,cD,cR,cT,cS,cU)}return cD};bC.barMarkExactHitTest=function(L,cC,cD,cE){var cF=L.c.get('size').gv(cE)/2;var cG=L.c.get('size').gv(cE)/2;if(L.scaleMarksInX&&L.scaleMarksInY){var cH=Math.floor(Math.min(L.c.get('y').gv(cE),L.c.get('y1').gv(cE)));var cI=Math.ceil(Math.max(L.c.get('y').gv(cE),L.c.get('y1').gv(cE)));var cJ=Math.floor(Math.min(L.c.get('x').gv(cE),L.c.get('x1').gv(cE)));var cK=Math.ceil(Math.max(L.c.get('x').gv(cE),L.c.get('x1').gv(cE)));var cL={x:cJ,y:cH,w:cK-cJ,h:cI-cH};tab.RectXYUtil.outsetRectInPlace(cL,Math.ceil(0),Math.ceil(0));if(tab.RectXYUtil.inRectPointF$1(cL,cC,cD)){return true}}if(!L.scaleMarksInX&&L.scaleMarksInY){var cM=Math.floor(Math.min(L.c.get('y').gv(cE),L.c.get('y1').gv(cE)));var cN=Math.ceil(Math.max(L.c.get('y').gv(cE),L.c.get('y1').gv(cE)));var cO=Math.floor(Math.min(L.c.get('x').gv(cE)-cF,L.c.get('x').gv(cE)+cF));var cP=Math.ceil(Math.max(L.c.get('x').gv(cE)-cF,L.c.get('x').gv(cE)+cF));var cQ={x:cO,y:cM,w:cP-cO,h:cN-cM};tab.RectXYUtil.outsetRectInPlace(cQ,Math.ceil(0),Math.ceil(0));if(tab.RectXYUtil.inRectPointF$1(cQ,cC,cD)){return true}}if(L.scaleMarksInX&&!L.scaleMarksInY){var cR=Math.floor(Math.min(L.c.get('y').gv(cE)-cG,L.c.get('y').gv(cE)+cG));var cS=Math.ceil(Math.max(L.c.get('y').gv(cE)-cG,L.c.get('y').gv(cE)+cG));var cT=Math.floor(Math.min(L.c.get('x').gv(cE),L.c.get('x1').gv(cE)));var cU=Math.ceil(Math.max(L.c.get('x').gv(cE),L.c.get('x1').gv(cE)));var cV={x:cT,y:cR,w:cU-cT,h:cS-cR};tab.RectXYUtil.outsetRectInPlace(cV,Math.ceil(0),Math.ceil(0));if(tab.RectXYUtil.inRectPointF$1(cV,cC,cD)){return true}}if(!L.scaleMarksInX&&!L.scaleMarksInY){var cW=Math.floor(Math.min(L.c.get('y').gv(cE)-cG,L.c.get('y').gv(cE)+cG));var cX=Math.ceil(Math.max(L.c.get('y').gv(cE)-cG,L.c.get('y').gv(cE)+cG));var cY=Math.floor(Math.min(L.c.get('x').gv(cE)-cF,L.c.get('x').gv(cE)+cF));var cZ=Math.ceil(Math.max(L.c.get('x').gv(cE)-cF,L.c.get('x').gv(cE)+cF));var da={x:cY,y:cW,w:cZ-cY,h:cX-cW};tab.RectXYUtil.outsetRectInPlace(da,Math.ceil(0),Math.ceil(0));if(tab.RectXYUtil.inRectPointF$1(da,cC,cD)){return true}}return false};bC.barMarkNearHitTest=function(L,cC,cD,cE){var cF=L.c.get('clip_width').gv(cE)/2;var cG=L.c.get('clip_height').gv(cE)/2;var cH=L.c.get('size').gv(cE)/2;var cI=L.c.get('size').gv(cE)/2;if(L.scaleMarksInX&&L.scaleMarksInY&&!L.paneHasCellsX&&!L.paneHasCellsY){var cJ=Math.floor(Math.min(L.c.get('y').gv(cE),L.c.get('y1').gv(cE)));var cK=Math.ceil(Math.max(L.c.get('y').gv(cE),L.c.get('y1').gv(cE)));var cL=Math.floor(Math.min(L.c.get('x').gv(cE),L.c.get('x1').gv(cE)));var cM=Math.ceil(Math.max(L.c.get('x').gv(cE),L.c.get('x1').gv(cE)));var cN={x:cL,y:cJ,w:cM-cL,h:cK-cJ};tab.RectXYUtil.outsetRectInPlace(cN,Math.ceil(10),Math.ceil(10));if(tab.RectXYUtil.inRectPointF$1(cN,cC,cD)){return true}}if(!L.scaleMarksInX&&L.scaleMarksInY&&!L.paneHasCellsX&&!L.paneHasCellsY){var cO=Math.floor(Math.min(L.c.get('y').gv(cE),L.c.get('y1').gv(cE)));var cP=Math.ceil(Math.max(L.c.get('y').gv(cE),L.c.get('y1').gv(cE)));var cQ=Math.floor(Math.min(L.c.get('x').gv(cE)-cH,L.c.get('x').gv(cE)+cH));var cR=Math.ceil(Math.max(L.c.get('x').gv(cE)-cH,L.c.get('x').gv(cE)+cH));var cS={x:cQ,y:cO,w:cR-cQ,h:cP-cO};tab.RectXYUtil.outsetRectInPlace(cS,Math.ceil(10),Math.ceil(10));if(tab.RectXYUtil.inRectPointF$1(cS,cC,cD)){return true}}if(L.scaleMarksInX&&!L.scaleMarksInY&&!L.paneHasCellsX&&!L.paneHasCellsY){var cT=Math.floor(Math.min(L.c.get('y').gv(cE)-cI,L.c.get('y').gv(cE)+cI));var cU=Math.ceil(Math.max(L.c.get('y').gv(cE)-cI,L.c.get('y').gv(cE)+cI));var cV=Math.floor(Math.min(L.c.get('x').gv(cE),L.c.get('x1').gv(cE)));var cW=Math.ceil(Math.max(L.c.get('x').gv(cE),L.c.get('x1').gv(cE)));var cX={x:cV,y:cT,w:cW-cV,h:cU-cT};tab.RectXYUtil.outsetRectInPlace(cX,Math.ceil(10),Math.ceil(10));if(tab.RectXYUtil.inRectPointF$1(cX,cC,cD)){return true}}if(!L.scaleMarksInX&&L.scaleMarksInY&&L.paneHasCellsX&&!L.paneHasCellsY){var cY=Math.floor(Math.min(L.c.get('y').gv(cE),L.c.get('y1').gv(cE)));var cZ=Math.ceil(Math.max(L.c.get('y').gv(cE),L.c.get('y1').gv(cE)));var da=Math.floor(Math.min(L.c.get('x').gv(cE)-cF,L.c.get('x').gv(cE)+cF));var db=Math.ceil(Math.max(L.c.get('x').gv(cE)-cF,L.c.get('x').gv(cE)+cF));var dc={x:da,y:cY,w:db-da,h:cZ-cY};tab.RectXYUtil.outsetRectInPlace(dc,Math.ceil(0),Math.ceil(10));if(tab.RectXYUtil.inRectPointF$1(dc,cC,cD)){return true}}if(L.scaleMarksInX&&!L.scaleMarksInY&&!L.paneHasCellsX&&L.paneHasCellsY){var dd=Math.floor(Math.min(L.c.get('y').gv(cE)-cG,L.c.get('y').gv(cE)+cG));var de=Math.ceil(Math.max(L.c.get('y').gv(cE)-cG,L.c.get('y').gv(cE)+cG));var df=Math.floor(Math.min(L.c.get('x').gv(cE),L.c.get('x1').gv(cE)));var dg=Math.ceil(Math.max(L.c.get('x').gv(cE),L.c.get('x1').gv(cE)));var dh={x:df,y:dd,w:dg-df,h:de-dd};tab.RectXYUtil.outsetRectInPlace(dh,Math.ceil(10),Math.ceil(0));if(tab.RectXYUtil.inRectPointF$1(dh,cC,cD)){return true}}if(!L.scaleMarksInX&&!L.scaleMarksInY&&!L.paneHasCellsX&&!L.paneHasCellsY){var di=Math.floor(Math.min(L.c.get('y').gv(cE)-cI,L.c.get('y').gv(cE)+cI));var dj=Math.ceil(Math.max(L.c.get('y').gv(cE)-cI,L.c.get('y').gv(cE)+cI));var dk=Math.floor(Math.min(L.c.get('x').gv(cE)-cH,L.c.get('x').gv(cE)+cH));var dl=Math.ceil(Math.max(L.c.get('x').gv(cE)-cH,L.c.get('x').gv(cE)+cH));var dm={x:dk,y:di,w:dl-dk,h:dj-di};tab.RectXYUtil.outsetRectInPlace(dm,Math.ceil(10),Math.ceil(10));if(tab.RectXYUtil.inRectPointF$1(dm,cC,cD)){return true}}if(!L.scaleMarksInX&&!L.scaleMarksInY&&L.paneHasCellsX&&!L.paneHasCellsY){var dn=Math.floor(Math.min(L.c.get('y').gv(cE)-cI,L.c.get('y').gv(cE)+cI));var dp=Math.ceil(Math.max(L.c.get('y').gv(cE)-cI,L.c.get('y').gv(cE)+cI));var dq=Math.floor(Math.min(L.c.get('x').gv(cE)-cF,L.c.get('x').gv(cE)+cF));var dr=Math.ceil(Math.max(L.c.get('x').gv(cE)-cF,L.c.get('x').gv(cE)+cF));var ds={x:dq,y:dn,w:dr-dq,h:dp-dn};tab.RectXYUtil.outsetRectInPlace(ds,Math.ceil(0),Math.ceil(10));if(tab.RectXYUtil.inRectPointF$1(ds,cC,cD)){return true}}if(!L.scaleMarksInX&&!L.scaleMarksInY&&!L.paneHasCellsX&&L.paneHasCellsY){var dt=Math.floor(Math.min(L.c.get('y').gv(cE)-cG,L.c.get('y').gv(cE)+cG));var du=Math.ceil(Math.max(L.c.get('y').gv(cE)-cG,L.c.get('y').gv(cE)+cG));var dv=Math.floor(Math.min(L.c.get('x').gv(cE)-cH,L.c.get('x').gv(cE)+cH));var dw=Math.ceil(Math.max(L.c.get('x').gv(cE)-cH,L.c.get('x').gv(cE)+cH));var dx={x:dv,y:dt,w:dw-dv,h:du-dt};tab.RectXYUtil.outsetRectInPlace(dx,Math.ceil(10),Math.ceil(0));if(tab.RectXYUtil.inRectPointF$1(dx,cC,cD)){return true}}if(!L.scaleMarksInX&&!L.scaleMarksInY&&L.paneHasCellsX&&L.paneHasCellsY){var dy=Math.floor(Math.min(L.c.get('y').gv(cE)-cG,L.c.get('y').gv(cE)+cG));var dz=Math.ceil(Math.max(L.c.get('y').gv(cE)-cG,L.c.get('y').gv(cE)+cG));var dA=Math.floor(Math.min(L.c.get('x').gv(cE)-cF,L.c.get('x').gv(cE)+cF));var dB=Math.ceil(Math.max(L.c.get('x').gv(cE)-cF,L.c.get('x').gv(cE)+cF));var dC={x:dA,y:dy,w:dB-dA,h:dz-dy};tab.RectXYUtil.outsetRectInPlace(dC,Math.ceil(0),Math.ceil(0));if(tab.RectXYUtil.inRectPointF$1(dC,cC,cD)){return true}}if(L.scaleMarksInX&&!L.scaleMarksInY&&L.paneHasCellsX&&L.paneHasCellsY){var dD=Math.floor(Math.min(L.c.get('y').gv(cE)-cG,L.c.get('y').gv(cE)+cG));var dE=Math.ceil(Math.max(L.c.get('y').gv(cE)-cG,L.c.get('y').gv(cE)+cG));var dF=Math.floor(Math.min(L.c.get('x').gv(cE),L.c.get('x1').gv(cE)));var dG=Math.ceil(Math.max(L.c.get('x').gv(cE),L.c.get('x1').gv(cE)));var dH={x:dF,y:dD,w:dG-dF,h:dE-dD};tab.RectXYUtil.outsetRectInPlace(dH,Math.ceil(0),Math.ceil(0));if(tab.RectXYUtil.inRectPointF$1(dH,cC,cD)){return true}}if(!L.scaleMarksInX&&L.scaleMarksInY&&L.paneHasCellsX&&L.paneHasCellsY){var dI=Math.floor(Math.min(L.c.get('y').gv(cE),L.c.get('y1').gv(cE)));var dJ=Math.ceil(Math.max(L.c.get('y').gv(cE),L.c.get('y1').gv(cE)));var dK=Math.floor(Math.min(L.c.get('x').gv(cE)-cF,L.c.get('x').gv(cE)+cF));var dL=Math.ceil(Math.max(L.c.get('x').gv(cE)-cF,L.c.get('x').gv(cE)+cF));var dM={x:dK,y:dI,w:dL-dK,h:dJ-dI};tab.RectXYUtil.outsetRectInPlace(dM,Math.ceil(0),Math.ceil(0));if(tab.RectXYUtil.inRectPointF$1(dM,cC,cD)){return true}}if(L.scaleMarksInX&&L.scaleMarksInY&&L.paneHasCellsX&&L.paneHasCellsY){var dN=Math.floor(Math.min(L.c.get('y').gv(cE),L.c.get('y1').gv(cE)));var dO=Math.ceil(Math.max(L.c.get('y').gv(cE),L.c.get('y1').gv(cE)));var dP=Math.floor(Math.min(L.c.get('x').gv(cE),L.c.get('x1').gv(cE)));var dQ=Math.ceil(Math.max(L.c.get('x').gv(cE),L.c.get('x1').gv(cE)));var dR={x:dP,y:dN,w:dQ-dP,h:dO-dN};tab.RectXYUtil.outsetRectInPlace(dR,Math.ceil(0),Math.ceil(0));if(tab.RectXYUtil.inRectPointF$1(dR,cC,cD)){return true}}return false};bC.barMarkGetHitTestExpansion=function(L,cC){var cD=null;if(L.scaleMarksInX&&L.scaleMarksInY&&!L.paneHasCellsX&&!L.paneHasCellsY){cD={w:10,h:10}}if(!L.scaleMarksInX&&L.scaleMarksInY&&!L.paneHasCellsX&&!L.paneHasCellsY){cD={w:5,h:10}}if(L.scaleMarksInX&&!L.scaleMarksInY&&!L.paneHasCellsX&&!L.paneHasCellsY){cD={w:10,h:5}}if(!L.scaleMarksInX&&L.scaleMarksInY&&L.paneHasCellsX&&!L.paneHasCellsY){cD={w:L.c.get('clip_width').gv(cC)/2,h:10}}if(L.scaleMarksInX&&!L.scaleMarksInY&&!L.paneHasCellsX&&L.paneHasCellsY){cD={w:10,h:L.c.get('clip_height').gv(cC)/2}}if(!L.scaleMarksInX&&!L.scaleMarksInY&&!L.paneHasCellsX&&!L.paneHasCellsY){cD={w:5,h:5}}if(!L.scaleMarksInX&&!L.scaleMarksInY&&!L.paneHasCellsX&&L.paneHasCellsY){cD={w:5,h:L.c.get('clip_height').gv(cC)}}if(!L.scaleMarksInX&&!L.scaleMarksInY&&L.paneHasCellsX&&!L.paneHasCellsY){cD={w:L.c.get('clip_width').gv(cC)/2,h:10}}if(!L.scaleMarksInX&&!L.scaleMarksInY&&L.paneHasCellsX&&L.paneHasCellsY){cD={w:L.c.get('clip_width').gv(cC)/2,h:L.c.get('clip_height').gv(cC)/2}}if(L.scaleMarksInX&&!L.scaleMarksInY&&L.paneHasCellsX&&L.paneHasCellsY){cD={w:L.c.get('clip_width').gv(cC)/2,h:L.c.get('clip_height').gv(cC)/2}}if(!L.scaleMarksInX&&L.scaleMarksInY&&L.paneHasCellsX&&L.paneHasCellsY){cD={w:L.c.get('clip_width').gv(cC)/2,h:L.c.get('clip_height').gv(cC)/2}}if(L.scaleMarksInX&&L.scaleMarksInY&&L.paneHasCellsX&&L.paneHasCellsY){cD={w:L.c.get('clip_width').gv(cC)/2,h:L.c.get('clip_height').gv(cC)/2}}return cD};bC.barMarkGetDistanceToMark=function(L,cC,cD,cE){var cF=L.getMarkBounds(cE);return O.getSquaredDistanceToNearestSide(cF,{x:cC,y:cD})};bC.barMarkRectangleAreaHitTest=function(L,cC,cD){return true};bC.barMarkCircleAreaHitTest=function(L,cC,cD,cE,cF){if(cF){if(!L.scaleMarksInX&&!L.scaleMarksInY&&!L.paneHasCellsX&&!L.paneHasCellsY){{return O.isPointInCircle({x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},cC)}}}return O.circleIntersectsRect(cC,cE)};bC.barMarkPolygonAreaHitTest=function(L,cC,cD,cE){return O.polygonIntersectsRect(cC,cE)};bC.lineMarkBuildMarkBound=function(L,cC){var cD=L.c.get('l_neighbor').gv(cC);var cE=L.c.get('r_neighbor').gv(cC);var cF=L.lineInterpolation;var cG={x:0,y:0,w:0,h:0};{tab.RectXYUtil.encompassCircleInPlace(cG,L.c.get('x').gv(cC),L.c.get('y').gv(cC),(L.c.get('size').gv(cC)+20)/2)}if(cD!==-1&&cF==='lim-linear'){bC.$0(cG,(L.c.get('x').gv(cD)+L.c.get('x').gv(cC))/2,(L.c.get('y').gv(cD)+L.c.get('y').gv(cC))/2,(L.c.get('size').gv(cD)+L.c.get('size').gv(cC))/2+20,L.c.get('x').gv(cC),L.c.get('y').gv(cC),L.c.get('size').gv(cC)+20)}if(cE!==-1&&cF==='lim-linear'){bC.$0(cG,L.c.get('x').gv(cC),L.c.get('y').gv(cC),L.c.get('size').gv(cC)+20,(L.c.get('x').gv(cC)+L.c.get('x').gv(cE))/2,(L.c.get('y').gv(cC)+L.c.get('y').gv(cE))/2,(L.c.get('size').gv(cC)+L.c.get('size').gv(cE))/2+20)}if(cE!==-1&&(cF==='lim-step'||cF==='lim-jump')){tab.RectXYUtil.encompassCircleInPlace(cG,L.c.get('x').gv(cE),L.c.get('y').gv(cC),(L.c.get('size').gv(cC)+20)/2)}if(cD!==-1&&cF==='lim-step'){bC.$0(cG,L.c.get('x').gv(cC),L.c.get('y').gv(cD),L.c.get('size').gv(cD)+20,L.c.get('x').gv(cC),L.c.get('y').gv(cC),L.c.get('size').gv(cC)+20)}if(cE!==-1&&(cF==='lim-step'||cF==='lim-jump')){bC.$0(cG,L.c.get('x').gv(cC),L.c.get('y').gv(cC),L.c.get('size').gv(cC)+20,L.c.get('x').gv(cE),L.c.get('y').gv(cC),L.c.get('size').gv(cC)+20)}return cG};bC.lineMarkExactHitTest=function(L,cC,cD,cE){var cF=L.c.get('l_neighbor').gv(cE);var cG=L.c.get('r_neighbor').gv(cE);var cH=L.lineInterpolation;{if(O.isPointInCircle({x:cC,y:cD},{center:{x:L.c.get('x').gv(cE),y:L.c.get('y').gv(cE)},radius:L.c.get('size').gv(cE)/2})){return true}}if(cF!==-1&&cH==='lim-linear'){if(bC.$9(cC,cD,(L.c.get('x').gv(cF)+L.c.get('x').gv(cE))/2,(L.c.get('y').gv(cF)+L.c.get('y').gv(cE))/2,(L.c.get('size').gv(cF)+L.c.get('size').gv(cE))/2,L.c.get('x').gv(cE),L.c.get('y').gv(cE),L.c.get('size').gv(cE))){return true}}if(cG!==-1&&cH==='lim-linear'){if(bC.$9(cC,cD,L.c.get('x').gv(cE),L.c.get('y').gv(cE),L.c.get('size').gv(cE),(L.c.get('x').gv(cE)+L.c.get('x').gv(cG))/2,(L.c.get('y').gv(cE)+L.c.get('y').gv(cG))/2,(L.c.get('size').gv(cE)+L.c.get('size').gv(cG))/2)){return true}}if(cG!==-1&&(cH==='lim-step'||cH==='lim-jump')){if(O.isPointInCircle({x:cC,y:cD},{center:{x:L.c.get('x').gv(cG),y:L.c.get('y').gv(cE)},radius:L.c.get('size').gv(cE)/2})){return true}}if(cF!==-1&&cH==='lim-step'){if(bC.$9(cC,cD,L.c.get('x').gv(cE),L.c.get('y').gv(cF),L.c.get('size').gv(cF),L.c.get('x').gv(cE),L.c.get('y').gv(cE),L.c.get('size').gv(cE))){return true}}if(cG!==-1&&(cH==='lim-step'||cH==='lim-jump')){if(bC.$9(cC,cD,L.c.get('x').gv(cE),L.c.get('y').gv(cE),L.c.get('size').gv(cE),L.c.get('x').gv(cG),L.c.get('y').gv(cE),L.c.get('size').gv(cE))){return true}}return false};bC.lineMarkNearHitTest=function(L,cC,cD,cE){var cF=L.c.get('l_neighbor').gv(cE);var cG=L.c.get('r_neighbor').gv(cE);var cH=L.lineInterpolation;{if(O.isPointInCircle({x:cC,y:cD},{center:{x:L.c.get('x').gv(cE),y:L.c.get('y').gv(cE)},radius:(L.c.get('size').gv(cE)+20)/2})){return true}}if(cF!==-1&&cH==='lim-linear'){if(bC.$9(cC,cD,(L.c.get('x').gv(cF)+L.c.get('x').gv(cE))/2,(L.c.get('y').gv(cF)+L.c.get('y').gv(cE))/2,(L.c.get('size').gv(cF)+L.c.get('size').gv(cE))/2+20,L.c.get('x').gv(cE),L.c.get('y').gv(cE),L.c.get('size').gv(cE)+20)){return true}}if(cG!==-1&&cH==='lim-linear'){if(bC.$9(cC,cD,L.c.get('x').gv(cE),L.c.get('y').gv(cE),L.c.get('size').gv(cE)+20,(L.c.get('x').gv(cE)+L.c.get('x').gv(cG))/2,(L.c.get('y').gv(cE)+L.c.get('y').gv(cG))/2,(L.c.get('size').gv(cE)+L.c.get('size').gv(cG))/2+20)){return true}}if(cG!==-1&&(cH==='lim-step'||cH==='lim-jump')){if(O.isPointInCircle({x:cC,y:cD},{center:{x:L.c.get('x').gv(cG),y:L.c.get('y').gv(cE)},radius:(L.c.get('size').gv(cE)+20)/2})){return true}}if(cF!==-1&&cH==='lim-step'){if(bC.$9(cC,cD,L.c.get('x').gv(cE),L.c.get('y').gv(cF),L.c.get('size').gv(cF)+20,L.c.get('x').gv(cE),L.c.get('y').gv(cE),L.c.get('size').gv(cE)+20)){return true}}if(cG!==-1&&(cH==='lim-step'||cH==='lim-jump')){if(bC.$9(cC,cD,L.c.get('x').gv(cE),L.c.get('y').gv(cE),L.c.get('size').gv(cE)+20,L.c.get('x').gv(cG),L.c.get('y').gv(cE),L.c.get('size').gv(cE)+20)){return true}}return false};bC.lineMarkGetHitTestExpansion=function(L,cC){return{w:0,h:0}};bC.lineMarkGetDistanceToMark=function(L,cC,cD,cE){var cF=L.c.get('l_neighbor').gv(cE);var cG=L.c.get('r_neighbor').gv(cE);var cH=L.c.get('x1').gv(cE);var cI=L.c.get('y1').gv(cE);var cJ;{var cK=cC-cH;var cL=cD-cI;var cM=cK*cK+cL*cL;cJ=cM}if(cF!==-1){var cN={x:(L.c.get('x').gv(cF)+cH)/2,y:(L.c.get('y').gv(cF)+cI)/2};var cO={x:cH,y:cI};var cP=O.getSquaredDistanceToLineSegment({x:cC,y:cD},cN,cO);cJ=Math.min(cJ,cP)}if(cG!==-1){var cQ={x:cH,y:cI};var cR={x:(L.c.get('x').gv(cG)+cH)/2,y:(L.c.get('y').gv(cG)+cI)/2};var cS=O.getSquaredDistanceToLineSegment({x:cC,y:cD},cQ,cR);cJ=Math.min(cJ,cS)}return cJ};bC.lineMarkRectangleAreaHitTest=function(L,cC,cD){{if(O.circleIntersectsRect({center:{x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},radius:L.c.get('size').gv(cD)/2},cC)){return true}}return false};bC.lineMarkCircleAreaHitTest=function(L,cC,cD,cE,cF){if(cF){{{return O.isPointInCircle({x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},cC)}}}{if(O.circleIntersectsCircle(cC,{center:{x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},radius:L.c.get('size').gv(cD)/2})){return true}}return false};bC.lineMarkPolygonAreaHitTest=function(L,cC,cD,cE){{if(O.polygonIntersectsCircle(cC,{center:{x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},radius:L.c.get('size').gv(cD)/2})){return true}}return false};bC.shapeMarkBuildMarkBound=function(L,cC){var cD=L.c.get('shape_id').gv(cC);switch(cD){case'shapeIDCircle':{var cE={x:0,y:0,w:0,h:0};{var cF=Math.round(L.c.get('x').gv(cC));var cG=Math.round(L.c.get('y').gv(cC));var cH=Math.ceil(L.c.get('size').gv(cC)*0.958333333333333/2);var cI=2*cH;tab.RectXYUtil.unionInPlace$1(cE,cF-cH,cG-cH,cI,cI)}return cE}case'shapeIDFilledCircle':{var cJ={x:0,y:0,w:0,h:0};{var cK=Math.round(L.c.get('x').gv(cC));var cL=Math.round(L.c.get('y').gv(cC));var cM=Math.ceil(L.c.get('size').gv(cC)*0.979166666666667/2);var cN=2*cM;tab.RectXYUtil.unionInPlace$1(cJ,cK-cM,cL-cM,cN,cN)}return cJ}case'shapeIDUnscaledFilledCircle':{var cO={x:0,y:0,w:0,h:0};{var cP=Math.round(L.c.get('x').gv(cC));var cQ=Math.round(L.c.get('y').gv(cC));var cR=Math.ceil(L.c.get('size').gv(cC)/2);var cS=2*cR;tab.RectXYUtil.unionInPlace$1(cO,cP-cR,cQ-cR,cS,cS)}return cO}case'shapeIDSquare':{var cT={x:0,y:0,w:0,h:0};{var cU=Math.round(L.c.get('x').gv(cC));var cV=Math.round(L.c.get('y').gv(cC));var cW=Math.ceil(L.c.get('size').gv(cC)*0.895833333333333/2);var cX=2*cW;tab.RectXYUtil.unionInPlace$1(cT,cU-cW,cV-cW,cX,cX)}return cT}case'shapeIDFilledSquare':{var cY={x:0,y:0,w:0,h:0};{var cZ=Math.round(L.c.get('x').gv(cC));var da=Math.round(L.c.get('y').gv(cC));var db=Math.ceil(L.c.get('size').gv(cC)*0.9375/2);var dc=2*db;tab.RectXYUtil.unionInPlace$1(cY,cZ-db,da-db,dc,dc)}return cY}case'shapeIDAsterisk':{var dd={x:0,y:0,w:0,h:0};{var de=Math.round(L.c.get('x').gv(cC));var df=Math.round(L.c.get('y').gv(cC));var dg=Math.ceil(L.c.get('size').gv(cC)*0.958333333333333/2);var dh=2*dg;tab.RectXYUtil.unionInPlace$1(dd,de-dg,df-dg,dh,dh)}return dd}case'shapeIDPlus':{var di={x:0,y:0,w:0,h:0};{var dj=Math.round(L.c.get('x').gv(cC));var dk=Math.round(L.c.get('y').gv(cC));var dl=Math.ceil(L.c.get('size').gv(cC)*0.916666666666667/2);var dm=2*dl;tab.RectXYUtil.unionInPlace$1(di,dj-dl,dk-dl,dm,dm)}return di}case'shapeIDFilledPlus':{var dn={x:0,y:0,w:0,h:0};{var dp=Math.round(L.c.get('x').gv(cC));var dq=Math.round(L.c.get('y').gv(cC));var dr=Math.ceil(L.c.get('size').gv(cC)*0.9375/2);var ds=2*dr;tab.RectXYUtil.unionInPlace$1(dn,dp-dr,dq-dr,ds,ds)}return dn}case'shapeIDTimes':{var dt={x:0,y:0,w:0,h:0};{var du=Math.round(L.c.get('x').gv(cC));var dv=Math.round(L.c.get('y').gv(cC));var dw=Math.ceil(L.c.get('size').gv(cC)*0.875/2);var dx=2*dw;tab.RectXYUtil.unionInPlace$1(dt,du-dw,dv-dw,dx,dx)}return dt}case'shapeIDFilledTimes':{var dy={x:0,y:0,w:0,h:0};{var dz=Math.round(L.c.get('x').gv(cC));var dA=Math.round(L.c.get('y').gv(cC));var dB=Math.ceil(L.c.get('size').gv(cC)*0.9375/2);var dC=2*dB;tab.RectXYUtil.unionInPlace$1(dy,dz-dB,dA-dB,dC,dC)}return dy}case'shapeIDDiamond':{var dD={x:0,y:0,w:0,h:0};{var dE=Math.round(L.c.get('x').gv(cC));var dF=Math.round(L.c.get('y').gv(cC));var dG=Math.ceil(L.c.get('size').gv(cC)*1.04166666666667/2);var dH=2*dG;tab.RectXYUtil.unionInPlace$1(dD,dE-dG,dF-dG,dH,dH)}return dD}case'shapeIDFilledDiamond':{var dI={x:0,y:0,w:0,h:0};{var dJ=Math.round(L.c.get('x').gv(cC));var dK=Math.round(L.c.get('y').gv(cC));var dL=Math.ceil(L.c.get('size').gv(cC)*1.04166666666667/2);var dM=2*dL;tab.RectXYUtil.unionInPlace$1(dI,dJ-dL,dK-dL,dM,dM)}return dI}case'shapeIDTriangle':{var dN={x:0,y:0,w:0,h:0};{var dO=Math.round(L.c.get('x').gv(cC));var dP=Math.round(L.c.get('y').gv(cC));var dQ=Math.ceil(L.c.get('size').gv(cC)*0.895833333333333/2);var dR=2*dQ;tab.RectXYUtil.unionInPlace$1(dN,dO-dQ,dP-dQ,dR,dR)}return dN}case'shapeIDFilledTriangle':{var dS={x:0,y:0,w:0,h:0};{var dT=Math.round(L.c.get('x').gv(cC));var dU=Math.round(L.c.get('y').gv(cC));var dV=Math.ceil(L.c.get('size').gv(cC)*0.916666666666667/2);var dW=2*dV;tab.RectXYUtil.unionInPlace$1(dS,dT-dV,dU-dV,dW,dW)}return dS}case'shapeIDDownTriangle':{var dX={x:0,y:0,w:0,h:0};{var dY=Math.round(L.c.get('x').gv(cC));var dZ=Math.round(L.c.get('y').gv(cC));var ea=Math.ceil(L.c.get('size').gv(cC)*0.895833333333333/2);var eb=2*ea;tab.RectXYUtil.unionInPlace$1(dX,dY-ea,dZ-ea,eb,eb)}return dX}case'shapeIDFilledDownTriangle':{var ec={x:0,y:0,w:0,h:0};{var ed=Math.round(L.c.get('x').gv(cC));var ee=Math.round(L.c.get('y').gv(cC));var ef=Math.ceil(L.c.get('size').gv(cC)*0.916666666666667/2);var eg=2*ef;tab.RectXYUtil.unionInPlace$1(ec,ed-ef,ee-ef,eg,eg)}return ec}case'shapeIDLeftTriangle':{var eh={x:0,y:0,w:0,h:0};{var ei=Math.round(L.c.get('x').gv(cC));var ej=Math.round(L.c.get('y').gv(cC));var ek=Math.ceil(L.c.get('size').gv(cC)*0.895833333333333/2);var el=2*ek;tab.RectXYUtil.unionInPlace$1(eh,ei-ek,ej-ek,el,el)}return eh}case'shapeIDFilledLeftTriangle':{var em={x:0,y:0,w:0,h:0};{var en=Math.round(L.c.get('x').gv(cC));var eo=Math.round(L.c.get('y').gv(cC));var ep=Math.ceil(L.c.get('size').gv(cC)*0.916666666666667/2);var eq=2*ep;tab.RectXYUtil.unionInPlace$1(em,en-ep,eo-ep,eq,eq)}return em}case'shapeIDRightTriangle':{var er={x:0,y:0,w:0,h:0};{var es=Math.round(L.c.get('x').gv(cC));var et=Math.round(L.c.get('y').gv(cC));var eu=Math.ceil(L.c.get('size').gv(cC)*0.895833333333333/2);var ev=2*eu;tab.RectXYUtil.unionInPlace$1(er,es-eu,et-eu,ev,ev)}return er}case'shapeIDFilledRightTriangle':{var ew={x:0,y:0,w:0,h:0};{var ex=Math.round(L.c.get('x').gv(cC));var ey=Math.round(L.c.get('y').gv(cC));var ez=Math.ceil(L.c.get('size').gv(cC)*0.916666666666667/2);var eA=2*ez;tab.RectXYUtil.unionInPlace$1(ew,ex-ez,ey-ez,eA,eA)}return ew}case'shapeIDFilledStar':{var eB={x:0,y:0,w:0,h:0};{var eC=Math.round(L.c.get('x').gv(cC));var eD=Math.round(L.c.get('y').gv(cC));var eE=Math.ceil(L.c.get('size').gv(cC)*1.09166666666667/2);var eF=2*eE;tab.RectXYUtil.unionInPlace$1(eB,eC-eE,eD-eE,eF,eF)}return eB}default:{if(cD>null){var eG=Math.round(L.c.get('x').gv(cC));var eH=Math.round(L.c.get('y').gv(cC));var eI=Math.ceil(L.c.get('size').gv(cC));var eJ=Math.ceil(eI/2);var eK={x:eG-eJ,y:eH-eJ,w:eI,h:eI};return eK}break}}return{x:0,y:0,w:0,h:0}};bC.shapeMarkExactHitTest=function(L,cC,cD,cE){var cF=L.c.get('shape_id').gv(cE);switch(cF){case'shapeIDCircle':{{if(O.isPointInCircle({x:cC,y:cD},{center:{x:L.c.get('x').gv(cE),y:L.c.get('y').gv(cE)},radius:L.c.get('size').gv(cE)*0.958333333333333/2})){return true}}return false}case'shapeIDFilledCircle':{{if(O.isPointInCircle({x:cC,y:cD},{center:{x:L.c.get('x').gv(cE),y:L.c.get('y').gv(cE)},radius:L.c.get('size').gv(cE)*0.979166666666667/2})){return true}}return false}case'shapeIDUnscaledFilledCircle':{{if(O.isPointInCircle({x:cC,y:cD},{center:{x:L.c.get('x').gv(cE),y:L.c.get('y').gv(cE)},radius:L.c.get('size').gv(cE)/2})){return true}}return false}case'shapeIDSquare':{{var cG=L.c.get('size').gv(cE)*0.895833333333333/2;if(tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cG,L.c.get('y').gv(cE)-cG,L.c.get('size').gv(cE)*0.895833333333333,L.c.get('size').gv(cE)*0.895833333333333,cC,cD)){return true}}return false}case'shapeIDFilledSquare':{{var cH=L.c.get('size').gv(cE)*0.9375/2;if(tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cH,L.c.get('y').gv(cE)-cH,L.c.get('size').gv(cE)*0.9375,L.c.get('size').gv(cE)*0.9375,cC,cD)){return true}}return false}case'shapeIDAsterisk':{{var cI=L.c.get('size').gv(cE)*0.958333333333333/2;if(tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cI,L.c.get('y').gv(cE)-cI,L.c.get('size').gv(cE)*0.958333333333333,L.c.get('size').gv(cE)*0.958333333333333,cC,cD)){return true}}return false}case'shapeIDPlus':{{var cJ=L.c.get('size').gv(cE)*0.916666666666667/2;if(tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cJ,L.c.get('y').gv(cE)-cJ,L.c.get('size').gv(cE)*0.916666666666667,L.c.get('size').gv(cE)*0.916666666666667,cC,cD)){return true}}return false}case'shapeIDFilledPlus':{{var cK=L.c.get('size').gv(cE)*0.9375/2;if(tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cK,L.c.get('y').gv(cE)-cK,L.c.get('size').gv(cE)*0.9375,L.c.get('size').gv(cE)*0.9375,cC,cD)){return true}}return false}case'shapeIDTimes':{{var cL=L.c.get('size').gv(cE)*0.875/2;if(tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cL,L.c.get('y').gv(cE)-cL,L.c.get('size').gv(cE)*0.875,L.c.get('size').gv(cE)*0.875,cC,cD)){return true}}return false}case'shapeIDFilledTimes':{{var cM=L.c.get('size').gv(cE)*0.9375/2;if(tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cM,L.c.get('y').gv(cE)-cM,L.c.get('size').gv(cE)*0.9375,L.c.get('size').gv(cE)*0.9375,cC,cD)){return true}}return false}case'shapeIDDiamond':{{var cN=L.c.get('size').gv(cE)*1.04166666666667/2;if(tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cN,L.c.get('y').gv(cE)-cN,L.c.get('size').gv(cE)*1.04166666666667,L.c.get('size').gv(cE)*1.04166666666667,cC,cD)){return true}}return false}case'shapeIDFilledDiamond':{{var cO=L.c.get('size').gv(cE)*1.04166666666667/2;if(tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cO,L.c.get('y').gv(cE)-cO,L.c.get('size').gv(cE)*1.04166666666667,L.c.get('size').gv(cE)*1.04166666666667,cC,cD)){return true}}return false}case'shapeIDTriangle':{{var cP=L.c.get('size').gv(cE)*0.895833333333333/2;if(tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cP,L.c.get('y').gv(cE)-cP,L.c.get('size').gv(cE)*0.895833333333333,L.c.get('size').gv(cE)*0.895833333333333,cC,cD)){return true}}return false}case'shapeIDFilledTriangle':{{var cQ=L.c.get('size').gv(cE)*0.916666666666667/2;if(tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cQ,L.c.get('y').gv(cE)-cQ,L.c.get('size').gv(cE)*0.916666666666667,L.c.get('size').gv(cE)*0.916666666666667,cC,cD)){return true}}return false}case'shapeIDDownTriangle':{{var cR=L.c.get('size').gv(cE)*0.895833333333333/2;if(tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cR,L.c.get('y').gv(cE)-cR,L.c.get('size').gv(cE)*0.895833333333333,L.c.get('size').gv(cE)*0.895833333333333,cC,cD)){return true}}return false}case'shapeIDFilledDownTriangle':{{var cS=L.c.get('size').gv(cE)*0.916666666666667/2;if(tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cS,L.c.get('y').gv(cE)-cS,L.c.get('size').gv(cE)*0.916666666666667,L.c.get('size').gv(cE)*0.916666666666667,cC,cD)){return true}}return false}case'shapeIDLeftTriangle':{{var cT=L.c.get('size').gv(cE)*0.895833333333333/2;if(tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cT,L.c.get('y').gv(cE)-cT,L.c.get('size').gv(cE)*0.895833333333333,L.c.get('size').gv(cE)*0.895833333333333,cC,cD)){return true}}return false}case'shapeIDFilledLeftTriangle':{{var cU=L.c.get('size').gv(cE)*0.916666666666667/2;if(tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cU,L.c.get('y').gv(cE)-cU,L.c.get('size').gv(cE)*0.916666666666667,L.c.get('size').gv(cE)*0.916666666666667,cC,cD)){return true}}return false}case'shapeIDRightTriangle':{{var cV=L.c.get('size').gv(cE)*0.895833333333333/2;if(tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cV,L.c.get('y').gv(cE)-cV,L.c.get('size').gv(cE)*0.895833333333333,L.c.get('size').gv(cE)*0.895833333333333,cC,cD)){return true}}return false}case'shapeIDFilledRightTriangle':{{var cW=L.c.get('size').gv(cE)*0.916666666666667/2;if(tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cW,L.c.get('y').gv(cE)-cW,L.c.get('size').gv(cE)*0.916666666666667,L.c.get('size').gv(cE)*0.916666666666667,cC,cD)){return true}}return false}case'shapeIDFilledStar':{{var cX=L.c.get('size').gv(cE)*1.09166666666667/2;if(tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cX,L.c.get('y').gv(cE)-cX,L.c.get('size').gv(cE)*1.09166666666667,L.c.get('size').gv(cE)*1.09166666666667,cC,cD)){return true}}return false}default:{if(cF>null){var cY=L.c.get('size').gv(cE);var cZ=cY/2;return tab.DoubleRectXYUtil.inRect$1(L.c.get('x').gv(cE)-cZ,L.c.get('y').gv(cE)-cZ,cY,cY,cC,cD)}break}}return true};bC.shapeMarkNearHitTest=function(L,cC,cD,cE){var cF=L.c.get('shape_id').gv(cE);switch(cF){case'shapeIDCircle':{return true}case'shapeIDFilledCircle':{return true}case'shapeIDUnscaledFilledCircle':{return true}case'shapeIDSquare':{return true}case'shapeIDFilledSquare':{return true}case'shapeIDAsterisk':{return true}case'shapeIDPlus':{return true}case'shapeIDFilledPlus':{return true}case'shapeIDTimes':{return true}case'shapeIDFilledTimes':{return true}case'shapeIDDiamond':{return true}case'shapeIDFilledDiamond':{return true}case'shapeIDTriangle':{return true}case'shapeIDFilledTriangle':{return true}case'shapeIDDownTriangle':{return true}case'shapeIDFilledDownTriangle':{return true}case'shapeIDLeftTriangle':{return true}case'shapeIDFilledLeftTriangle':{return true}case'shapeIDRightTriangle':{return true}case'shapeIDFilledRightTriangle':{return true}case'shapeIDFilledStar':{return true}default:{break}}return false};bC.shapeMarkGetHitTestExpansion=function(L,cC){var cD=null;{cD={w:10,h:10}}return cD};bC.shapeMarkGetDistanceToMark=function(L,cC,cD,cE){var cF=L.c.get('shape_id').gv(cE);switch(cF){case'shapeIDCircle':{var cG=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cG,{x:cC,y:cD})}case'shapeIDFilledCircle':{var cH=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cH,{x:cC,y:cD})}case'shapeIDUnscaledFilledCircle':{var cI=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cI,{x:cC,y:cD})}case'shapeIDSquare':{var cJ=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cJ,{x:cC,y:cD})}case'shapeIDFilledSquare':{var cK=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cK,{x:cC,y:cD})}case'shapeIDAsterisk':{var cL=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cL,{x:cC,y:cD})}case'shapeIDPlus':{var cM=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cM,{x:cC,y:cD})}case'shapeIDFilledPlus':{var cN=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cN,{x:cC,y:cD})}case'shapeIDTimes':{var cO=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cO,{x:cC,y:cD})}case'shapeIDFilledTimes':{var cP=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cP,{x:cC,y:cD})}case'shapeIDDiamond':{var cQ=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cQ,{x:cC,y:cD})}case'shapeIDFilledDiamond':{var cR=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cR,{x:cC,y:cD})}case'shapeIDTriangle':{var cS=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cS,{x:cC,y:cD})}case'shapeIDFilledTriangle':{var cT=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cT,{x:cC,y:cD})}case'shapeIDDownTriangle':{var cU=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cU,{x:cC,y:cD})}case'shapeIDFilledDownTriangle':{var cV=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cV,{x:cC,y:cD})}case'shapeIDLeftTriangle':{var cW=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cW,{x:cC,y:cD})}case'shapeIDFilledLeftTriangle':{var cX=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cX,{x:cC,y:cD})}case'shapeIDRightTriangle':{var cY=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cY,{x:cC,y:cD})}case'shapeIDFilledRightTriangle':{var cZ=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(cZ,{x:cC,y:cD})}case'shapeIDFilledStar':{var da=L.getMarkBounds(cE);return O.getSquaredDistanceToCircumference(da,{x:cC,y:cD})}default:{break}}return O.getSquaredDistanceToCenter(L.getMarkBounds(cE),{x:cC,y:cD})};bC.shapeMarkRectangleAreaHitTest=function(L,cC,cD){var cE=L.c.get('shape_id').gv(cD);switch(cE){case'shapeIDCircle':{return O.circleIntersectsRect({center:{x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},radius:L.c.get('size').gv(cD)*0.958333333333333/2},cC)}case'shapeIDFilledCircle':{return O.circleIntersectsRect({center:{x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},radius:L.c.get('size').gv(cD)*0.979166666666667/2},cC)}case'shapeIDUnscaledFilledCircle':{return O.circleIntersectsRect({center:{x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},radius:L.c.get('size').gv(cD)/2},cC)}case'shapeIDSquare':{return true}case'shapeIDFilledSquare':{return true}case'shapeIDAsterisk':{return true}case'shapeIDPlus':{return true}case'shapeIDFilledPlus':{return true}case'shapeIDTimes':{return true}case'shapeIDFilledTimes':{return true}case'shapeIDDiamond':{return true}case'shapeIDFilledDiamond':{return true}case'shapeIDTriangle':{return true}case'shapeIDFilledTriangle':{return true}case'shapeIDDownTriangle':{return true}case'shapeIDFilledDownTriangle':{return true}case'shapeIDLeftTriangle':{return true}case'shapeIDFilledLeftTriangle':{return true}case'shapeIDRightTriangle':{return true}case'shapeIDFilledRightTriangle':{return true}case'shapeIDFilledStar':{return true}default:{break}}return true};bC.shapeMarkCircleAreaHitTest=function(L,cC,cD,cE){if(cE){{{return O.isPointInCircle({x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},cC)}}}var cF=L.c.get('shape_id').gv(cD);switch(cF){case'shapeIDCircle':{return O.circleIntersectsCircle({center:{x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},radius:L.c.get('size').gv(cD)*0.958333333333333/2},cC)}case'shapeIDFilledCircle':{return O.circleIntersectsCircle({center:{x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},radius:L.c.get('size').gv(cD)*0.979166666666667/2},cC)}case'shapeIDUnscaledFilledCircle':{return O.circleIntersectsCircle({center:{x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},radius:L.c.get('size').gv(cD)/2},cC)}case'shapeIDSquare':{var cG={x:0,y:0,w:0,h:0};{var cH=Math.round(L.c.get('x').gv(cD));var cI=Math.round(L.c.get('y').gv(cD));var cJ=Math.ceil(L.c.get('size').gv(cD)*0.895833333333333/2);var cK=2*cJ;tab.RectXYUtil.unionInPlace$1(cG,cH-cJ,cI-cJ,cK,cK)}return O.circleIntersectsRect(cC,cG)}case'shapeIDFilledSquare':{var cL={x:0,y:0,w:0,h:0};{var cM=Math.round(L.c.get('x').gv(cD));var cN=Math.round(L.c.get('y').gv(cD));var cO=Math.ceil(L.c.get('size').gv(cD)*0.9375/2);var cP=2*cO;tab.RectXYUtil.unionInPlace$1(cL,cM-cO,cN-cO,cP,cP)}return O.circleIntersectsRect(cC,cL)}case'shapeIDAsterisk':{var cQ={x:0,y:0,w:0,h:0};{var cR=Math.round(L.c.get('x').gv(cD));var cS=Math.round(L.c.get('y').gv(cD));var cT=Math.ceil(L.c.get('size').gv(cD)*0.958333333333333/2);var cU=2*cT;tab.RectXYUtil.unionInPlace$1(cQ,cR-cT,cS-cT,cU,cU)}return O.circleIntersectsRect(cC,cQ)}case'shapeIDPlus':{var cV={x:0,y:0,w:0,h:0};{var cW=Math.round(L.c.get('x').gv(cD));var cX=Math.round(L.c.get('y').gv(cD));var cY=Math.ceil(L.c.get('size').gv(cD)*0.916666666666667/2);var cZ=2*cY;tab.RectXYUtil.unionInPlace$1(cV,cW-cY,cX-cY,cZ,cZ)}return O.circleIntersectsRect(cC,cV)}case'shapeIDFilledPlus':{var da={x:0,y:0,w:0,h:0};{var db=Math.round(L.c.get('x').gv(cD));var dc=Math.round(L.c.get('y').gv(cD));var dd=Math.ceil(L.c.get('size').gv(cD)*0.9375/2);var de=2*dd;tab.RectXYUtil.unionInPlace$1(da,db-dd,dc-dd,de,de)}return O.circleIntersectsRect(cC,da)}case'shapeIDTimes':{var df={x:0,y:0,w:0,h:0};{var dg=Math.round(L.c.get('x').gv(cD));var dh=Math.round(L.c.get('y').gv(cD));var di=Math.ceil(L.c.get('size').gv(cD)*0.875/2);var dj=2*di;tab.RectXYUtil.unionInPlace$1(df,dg-di,dh-di,dj,dj)}return O.circleIntersectsRect(cC,df)}case'shapeIDFilledTimes':{var dk={x:0,y:0,w:0,h:0};{var dl=Math.round(L.c.get('x').gv(cD));var dm=Math.round(L.c.get('y').gv(cD));var dn=Math.ceil(L.c.get('size').gv(cD)*0.9375/2);var dp=2*dn;tab.RectXYUtil.unionInPlace$1(dk,dl-dn,dm-dn,dp,dp)}return O.circleIntersectsRect(cC,dk)}case'shapeIDDiamond':{var dq={x:0,y:0,w:0,h:0};{var dr=Math.round(L.c.get('x').gv(cD));var ds=Math.round(L.c.get('y').gv(cD));var dt=Math.ceil(L.c.get('size').gv(cD)*1.04166666666667/2);var du=2*dt;tab.RectXYUtil.unionInPlace$1(dq,dr-dt,ds-dt,du,du)}return O.circleIntersectsRect(cC,dq)}case'shapeIDFilledDiamond':{var dv={x:0,y:0,w:0,h:0};{var dw=Math.round(L.c.get('x').gv(cD));var dx=Math.round(L.c.get('y').gv(cD));var dy=Math.ceil(L.c.get('size').gv(cD)*1.04166666666667/2);var dz=2*dy;tab.RectXYUtil.unionInPlace$1(dv,dw-dy,dx-dy,dz,dz)}return O.circleIntersectsRect(cC,dv)}case'shapeIDTriangle':{var dA={x:0,y:0,w:0,h:0};{var dB=Math.round(L.c.get('x').gv(cD));var dC=Math.round(L.c.get('y').gv(cD));var dD=Math.ceil(L.c.get('size').gv(cD)*0.895833333333333/2);var dE=2*dD;tab.RectXYUtil.unionInPlace$1(dA,dB-dD,dC-dD,dE,dE)}return O.circleIntersectsRect(cC,dA)}case'shapeIDFilledTriangle':{var dF={x:0,y:0,w:0,h:0};{var dG=Math.round(L.c.get('x').gv(cD));var dH=Math.round(L.c.get('y').gv(cD));var dI=Math.ceil(L.c.get('size').gv(cD)*0.916666666666667/2);var dJ=2*dI;tab.RectXYUtil.unionInPlace$1(dF,dG-dI,dH-dI,dJ,dJ)}return O.circleIntersectsRect(cC,dF)}case'shapeIDDownTriangle':{var dK={x:0,y:0,w:0,h:0};{var dL=Math.round(L.c.get('x').gv(cD));var dM=Math.round(L.c.get('y').gv(cD));var dN=Math.ceil(L.c.get('size').gv(cD)*0.895833333333333/2);var dO=2*dN;tab.RectXYUtil.unionInPlace$1(dK,dL-dN,dM-dN,dO,dO)}return O.circleIntersectsRect(cC,dK)}case'shapeIDFilledDownTriangle':{var dP={x:0,y:0,w:0,h:0};{var dQ=Math.round(L.c.get('x').gv(cD));var dR=Math.round(L.c.get('y').gv(cD));var dS=Math.ceil(L.c.get('size').gv(cD)*0.916666666666667/2);var dT=2*dS;tab.RectXYUtil.unionInPlace$1(dP,dQ-dS,dR-dS,dT,dT)}return O.circleIntersectsRect(cC,dP)}case'shapeIDLeftTriangle':{var dU={x:0,y:0,w:0,h:0};{var dV=Math.round(L.c.get('x').gv(cD));var dW=Math.round(L.c.get('y').gv(cD));var dX=Math.ceil(L.c.get('size').gv(cD)*0.895833333333333/2);var dY=2*dX;tab.RectXYUtil.unionInPlace$1(dU,dV-dX,dW-dX,dY,dY)}return O.circleIntersectsRect(cC,dU)}case'shapeIDFilledLeftTriangle':{var dZ={x:0,y:0,w:0,h:0};{var ea=Math.round(L.c.get('x').gv(cD));var eb=Math.round(L.c.get('y').gv(cD));var ec=Math.ceil(L.c.get('size').gv(cD)*0.916666666666667/2);var ed=2*ec;tab.RectXYUtil.unionInPlace$1(dZ,ea-ec,eb-ec,ed,ed)}return O.circleIntersectsRect(cC,dZ)}case'shapeIDRightTriangle':{var ee={x:0,y:0,w:0,h:0};{var ef=Math.round(L.c.get('x').gv(cD));var eg=Math.round(L.c.get('y').gv(cD));var eh=Math.ceil(L.c.get('size').gv(cD)*0.895833333333333/2);var ei=2*eh;tab.RectXYUtil.unionInPlace$1(ee,ef-eh,eg-eh,ei,ei)}return O.circleIntersectsRect(cC,ee)}case'shapeIDFilledRightTriangle':{var ej={x:0,y:0,w:0,h:0};{var ek=Math.round(L.c.get('x').gv(cD));var el=Math.round(L.c.get('y').gv(cD));var em=Math.ceil(L.c.get('size').gv(cD)*0.916666666666667/2);var en=2*em;tab.RectXYUtil.unionInPlace$1(ej,ek-em,el-em,en,en)}return O.circleIntersectsRect(cC,ej)}case'shapeIDFilledStar':{var eo={x:0,y:0,w:0,h:0};{var ep=Math.round(L.c.get('x').gv(cD));var eq=Math.round(L.c.get('y').gv(cD));var er=Math.ceil(L.c.get('size').gv(cD)*1.09166666666667/2);var es=2*er;tab.RectXYUtil.unionInPlace$1(eo,ep-er,eq-er,es,es)}return O.circleIntersectsRect(cC,eo)}default:{var et=Math.round(L.c.get('x').gv(cD));var eu=Math.round(L.c.get('y').gv(cD));var ev=Math.ceil(L.c.get('size').gv(cD));var ew=Math.ceil(ev/2);var ex={x:et-ew,y:eu-ew,w:ev,h:ev};return O.circleIntersectsRect(cC,ex)}}};bC.shapeMarkPolygonAreaHitTest=function(L,cC,cD){var cE=L.c.get('shape_id').gv(cD);switch(cE){case'shapeIDCircle':{return O.polygonIntersectsCircle(cC,{center:{x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},radius:L.c.get('size').gv(cD)*0.958333333333333/2})}case'shapeIDFilledCircle':{return O.polygonIntersectsCircle(cC,{center:{x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},radius:L.c.get('size').gv(cD)*0.979166666666667/2})}case'shapeIDUnscaledFilledCircle':{return O.polygonIntersectsCircle(cC,{center:{x:L.c.get('x').gv(cD),y:L.c.get('y').gv(cD)},radius:L.c.get('size').gv(cD)/2})}case'shapeIDSquare':{var cF={x:0,y:0,w:0,h:0};{var cG=Math.round(L.c.get('x').gv(cD));var cH=Math.round(L.c.get('y').gv(cD));var cI=Math.ceil(L.c.get('size').gv(cD)*0.895833333333333/2);var cJ=2*cI;tab.RectXYUtil.unionInPlace$1(cF,cG-cI,cH-cI,cJ,cJ)}return O.polygonIntersectsRect(cC,cF)}case'shapeIDFilledSquare':{var cK={x:0,y:0,w:0,h:0};{var cL=Math.round(L.c.get('x').gv(cD));var cM=Math.round(L.c.get('y').gv(cD));var cN=Math.ceil(L.c.get('size').gv(cD)*0.9375/2);var cO=2*cN;tab.RectXYUtil.unionInPlace$1(cK,cL-cN,cM-cN,cO,cO)}return O.polygonIntersectsRect(cC,cK)}case'shapeIDAsterisk':{var cP={x:0,y:0,w:0,h:0};{var cQ=Math.round(L.c.get('x').gv(cD));var cR=Math.round(L.c.get('y').gv(cD));var cS=Math.ceil(L.c.get('size').gv(cD)*0.958333333333333/2);var cT=2*cS;tab.RectXYUtil.unionInPlace$1(cP,cQ-cS,cR-cS,cT,cT)}return O.polygonIntersectsRect(cC,cP)}case'shapeIDPlus':{var cU={x:0,y:0,w:0,h:0};{var cV=Math.round(L.c.get('x').gv(cD));var cW=Math.round(L.c.get('y').gv(cD));var cX=Math.ceil(L.c.get('size').gv(cD)*0.916666666666667/2);var cY=2*cX;tab.RectXYUtil.unionInPlace$1(cU,cV-cX,cW-cX,cY,cY)}return O.polygonIntersectsRect(cC,cU)}case'shapeIDFilledPlus':{var cZ={x:0,y:0,w:0,h:0};{var da=Math.round(L.c.get('x').gv(cD));var db=Math.round(L.c.get('y').gv(cD));var dc=Math.ceil(L.c.get('size').gv(cD)*0.9375/2);var dd=2*dc;tab.RectXYUtil.unionInPlace$1(cZ,da-dc,db-dc,dd,dd)}return O.polygonIntersectsRect(cC,cZ)}case'shapeIDTimes':{var de={x:0,y:0,w:0,h:0};{var df=Math.round(L.c.get('x').gv(cD));var dg=Math.round(L.c.get('y').gv(cD));var dh=Math.ceil(L.c.get('size').gv(cD)*0.875/2);var di=2*dh;tab.RectXYUtil.unionInPlace$1(de,df-dh,dg-dh,di,di)}return O.polygonIntersectsRect(cC,de)}case'shapeIDFilledTimes':{var dj={x:0,y:0,w:0,h:0};{var dk=Math.round(L.c.get('x').gv(cD));var dl=Math.round(L.c.get('y').gv(cD));var dm=Math.ceil(L.c.get('size').gv(cD)*0.9375/2);var dn=2*dm;tab.RectXYUtil.unionInPlace$1(dj,dk-dm,dl-dm,dn,dn)}return O.polygonIntersectsRect(cC,dj)}case'shapeIDDiamond':{var dp={x:0,y:0,w:0,h:0};{var dq=Math.round(L.c.get('x').gv(cD));var dr=Math.round(L.c.get('y').gv(cD));var ds=Math.ceil(L.c.get('size').gv(cD)*1.04166666666667/2);var dt=2*ds;tab.RectXYUtil.unionInPlace$1(dp,dq-ds,dr-ds,dt,dt)}return O.polygonIntersectsRect(cC,dp)}case'shapeIDFilledDiamond':{var du={x:0,y:0,w:0,h:0};{var dv=Math.round(L.c.get('x').gv(cD));var dw=Math.round(L.c.get('y').gv(cD));var dx=Math.ceil(L.c.get('size').gv(cD)*1.04166666666667/2);var dy=2*dx;tab.RectXYUtil.unionInPlace$1(du,dv-dx,dw-dx,dy,dy)}return O.polygonIntersectsRect(cC,du)}case'shapeIDTriangle':{var dz={x:0,y:0,w:0,h:0};{var dA=Math.round(L.c.get('x').gv(cD));var dB=Math.round(L.c.get('y').gv(cD));var dC=Math.ceil(L.c.get('size').gv(cD)*0.895833333333333/2);var dD=2*dC;tab.RectXYUtil.unionInPlace$1(dz,dA-dC,dB-dC,dD,dD)}return O.polygonIntersectsRect(cC,dz)}case'shapeIDFilledTriangle':{var dE={x:0,y:0,w:0,h:0};{var dF=Math.round(L.c.get('x').gv(cD));var dG=Math.round(L.c.get('y').gv(cD));var dH=Math.ceil(L.c.get('size').gv(cD)*0.916666666666667/2);var dI=2*dH;tab.RectXYUtil.unionInPlace$1(dE,dF-dH,dG-dH,dI,dI)}return O.polygonIntersectsRect(cC,dE)}case'shapeIDDownTriangle':{var dJ={x:0,y:0,w:0,h:0};{var dK=Math.round(L.c.get('x').gv(cD));var dL=Math.round(L.c.get('y').gv(cD));var dM=Math.ceil(L.c.get('size').gv(cD)*0.895833333333333/2);var dN=2*dM;tab.RectXYUtil.unionInPlace$1(dJ,dK-dM,dL-dM,dN,dN)}return O.polygonIntersectsRect(cC,dJ)}case'shapeIDFilledDownTriangle':{var dO={x:0,y:0,w:0,h:0};{var dP=Math.round(L.c.get('x').gv(cD));var dQ=Math.round(L.c.get('y').gv(cD));var dR=Math.ceil(L.c.get('size').gv(cD)*0.916666666666667/2);var dS=2*dR;tab.RectXYUtil.unionInPlace$1(dO,dP-dR,dQ-dR,dS,dS)}return O.polygonIntersectsRect(cC,dO)}case'shapeIDLeftTriangle':{var dT={x:0,y:0,w:0,h:0};{var dU=Math.round(L.c.get('x').gv(cD));var dV=Math.round(L.c.get('y').gv(cD));var dW=Math.ceil(L.c.get('size').gv(cD)*0.895833333333333/2);var dX=2*dW;tab.RectXYUtil.unionInPlace$1(dT,dU-dW,dV-dW,dX,dX)}return O.polygonIntersectsRect(cC,dT)}case'shapeIDFilledLeftTriangle':{var dY={x:0,y:0,w:0,h:0};{var dZ=Math.round(L.c.get('x').gv(cD));var ea=Math.round(L.c.get('y').gv(cD));var eb=Math.ceil(L.c.get('size').gv(cD)*0.916666666666667/2);var ec=2*eb;tab.RectXYUtil.unionInPlace$1(dY,dZ-eb,ea-eb,ec,ec)}return O.polygonIntersectsRect(cC,dY)}case'shapeIDRightTriangle':{var ed={x:0,y:0,w:0,h:0};{var ee=Math.round(L.c.get('x').gv(cD));var ef=Math.round(L.c.get('y').gv(cD));var eg=Math.ceil(L.c.get('size').gv(cD)*0.895833333333333/2);var eh=2*eg;tab.RectXYUtil.unionInPlace$1(ed,ee-eg,ef-eg,eh,eh)}return O.polygonIntersectsRect(cC,ed)}case'shapeIDFilledRightTriangle':{var ei={x:0,y:0,w:0,h:0};{var ej=Math.round(L.c.get('x').gv(cD));var ek=Math.round(L.c.get('y').gv(cD));var el=Math.ceil(L.c.get('size').gv(cD)*0.916666666666667/2);var em=2*el;tab.RectXYUtil.unionInPlace$1(ei,ej-el,ek-el,em,em)}return O.polygonIntersectsRect(cC,ei)}case'shapeIDFilledStar':{var en={x:0,y:0,w:0,h:0};{var eo=Math.round(L.c.get('x').gv(cD));var ep=Math.round(L.c.get('y').gv(cD));var eq=Math.ceil(L.c.get('size').gv(cD)*1.09166666666667/2);var er=2*eq;tab.RectXYUtil.unionInPlace$1(en,eo-eq,ep-eq,er,er)}return O.polygonIntersectsRect(cC,en)}default:{var es=Math.round(L.c.get('x').gv(cD));var et=Math.round(L.c.get('y').gv(cD));var eu=Math.ceil(L.c.get('size').gv(cD));var ev=Math.ceil(eu/2);var ew={x:es-ev,y:et-ev,w:eu,h:eu};return O.polygonIntersectsRect(cC,ew)}}};bC.renderMultipolygonMarkHoverOverlayImage=function(L,cC,cD){var cE='empty';var cF=cC.getMarkGeometry(cC.c.get('geometry').gv(cD));if(ss.isValue(cF)){cE=cF.geometryType}switch(cE){case'multiPolygon':{{var cG=cC.getMarkInstanceOffsets(cD);var cH=cG.length;for(var cI=0;cI<cH;cI++){var cJ=cG[cI];bC.$d(L,cJ);{var cK=bC.$e();if(!cC.hasPixelGeometry){L.save();L.translate(cC.c.get('x').gv(cD),cC.c.get('y').gv(cD));L.scale(cC.c.get('size').gv(cD),cC.c.get('size').gv(cD))}tab.CanvasRenderer.createMultipolygonPath(L,cF);if(!cC.hasPixelGeometry){L.restore()}L.set_lineWidth(1.75-cK);L.set_strokeStyle(cC.c.get('selected_halo_color').gv(cD)['colorOverrideNone']);L.stroke()}if(cJ!==0){L.restore()}}}break}case'multiLineString':{{var cL=cC.getMarkInstanceOffsets(cD);var cM=cL.length;for(var cN=0;cN<cM;cN++){var cO=cL[cN];bC.$d(L,cO);var cP='colorOverrideNone';if(!cC.hasPixelGeometry){L.save();L.translate(cC.c.get('x').gv(cD),cC.c.get('y').gv(cD));L.scale(cC.c.get('size').gv(cD),cC.c.get('size').gv(cD))}tab.CanvasRenderer.createMultiLinePath(L,cF);if(!cC.hasPixelGeometry){L.restore()}{tab.CanvasRenderer.fillMultiLineStringPath(L,cC.c.get('size').gv(cD)+3.5,cC.c.get('selected_halo_color').gv(cD)[cP]);tab.CanvasRenderer.fillMultiLineStringEndCaps(L,cF.multiLine,cC.c.get('size').gv(cD)+3.5,1.75,cC.c.get('selected_halo_color').gv(cD)[cP]);tab.CanvasRenderer.fillClearMultiLineStringPath(L,cC.c.get('size').gv(cD),cC.c.get('selected_halo_color').gv(cD)[cP])}if(cO!==0){L.restore()}}}break}case'multiPoint':{{var cQ=cC.getMarkInstanceOffsets(cD);var cR=cQ.length;for(var cS=0;cS<cR;cS++){var cT=cQ[cS];bC.$d(L,cT);{var cU=bC.$e();if(!cC.hasPixelGeometry){L.save();L.translate(cC.c.get('x').gv(cD),cC.c.get('y').gv(cD));L.scale(cC.c.get('size').gv(cD),cC.c.get('size').gv(cD))}tab.CanvasRenderer.createMultipointPath(L,7,cF);if(!cC.hasPixelGeometry){L.restore()}L.set_lineWidth(1.75-cU);L.set_strokeStyle(cC.c.get('selected_halo_color').gv(cD)['colorOverrideNone']);L.stroke()}if(cT!==0){L.restore()}}}break}case'empty':{{var cV=cC.getMarkInstanceOffsets(cD);var cW=cV.length;for(var cX=0;cX<cW;cX++){var cY=cV[cX];bC.$d(L,cY);{var cZ=bC.$e();tab.CanvasRenderer.createPlaceholderPath(L,cC.c.get('x').gv(cD),cC.c.get('y').gv(cD),7);L.set_lineWidth(1.75-cZ);L.set_strokeStyle(cC.c.get('selected_halo_color').gv(cD)['colorOverrideNone']);L.stroke()}if(cY!==0){L.restore()}}}break}default:{break}}};bC.renderMultipolygonMarkPressedOverlayImage=function(L,cC,cD){var cE='empty';var cF=cC.getMarkGeometry(cC.c.get('geometry').gv(cD));if(ss.isValue(cF)){cE=cF.geometryType}switch(cE){case'multiPolygon':{{var cG=cC.getMarkInstanceOffsets(cD);var cH=cG.length;for(var cI=0;cI<cH;cI++){var cJ=cG[cI];bC.$d(L,cJ);{var cK=bC.$e();if(!cC.hasPixelGeometry){L.save();L.translate(cC.c.get('x').gv(cD),cC.c.get('y').gv(cD));L.scale(cC.c.get('size').gv(cD),cC.c.get('size').gv(cD))}tab.CanvasRenderer.createMultipolygonPath(L,cF);if(!cC.hasPixelGeometry){L.restore()}L.set_lineWidth(2.5-cK);L.set_strokeStyle(cC.c.get('selected_halo_color').gv(cD)['colorOverrideNone']);L.stroke()}if(cJ!==0){L.restore()}}}break}case'multiLineString':{{var cL=cC.getMarkInstanceOffsets(cD);var cM=cL.length;for(var cN=0;cN<cM;cN++){var cO=cL[cN];bC.$d(L,cO);var cP='colorOverrideNone';if(!cC.hasPixelGeometry){L.save();L.translate(cC.c.get('x').gv(cD),cC.c.get('y').gv(cD));L.scale(cC.c.get('size').gv(cD),cC.c.get('size').gv(cD))}tab.CanvasRenderer.createMultiLinePath(L,cF);if(!cC.hasPixelGeometry){L.restore()}{tab.CanvasRenderer.fillMultiLineStringPath(L,cC.c.get('size').gv(cD)+5,cC.c.get('selected_halo_color').gv(cD)[cP]);tab.CanvasRenderer.fillMultiLineStringEndCaps(L,cF.multiLine,cC.c.get('size').gv(cD)+5,2.5,cC.c.get('selected_halo_color').gv(cD)[cP]);tab.CanvasRenderer.fillClearMultiLineStringPath(L,cC.c.get('size').gv(cD),cC.c.get('selected_halo_color').gv(cD)[cP])}if(cO!==0){L.restore()}}}break}case'multiPoint':{{var cQ=cC.getMarkInstanceOffsets(cD);var cR=cQ.length;for(var cS=0;cS<cR;cS++){var cT=cQ[cS];bC.$d(L,cT);{var cU=bC.$e();if(!cC.hasPixelGeometry){L.save();L.translate(cC.c.get('x').gv(cD),cC.c.get('y').gv(cD));L.scale(cC.c.get('size').gv(cD),cC.c.get('size').gv(cD))}tab.CanvasRenderer.createMultipointPath(L,7,cF);if(!cC.hasPixelGeometry){L.restore()}L.set_lineWidth(2.5-cU);L.set_strokeStyle(cC.c.get('selected_halo_color').gv(cD)['colorOverrideNone']);L.stroke()}if(cT!==0){L.restore()}}}break}case'empty':{{var cV=cC.getMarkInstanceOffsets(cD);var cW=cV.length;for(var cX=0;cX<cW;cX++){var cY=cV[cX];bC.$d(L,cY);{var cZ=bC.$e();tab.CanvasRenderer.createPlaceholderPath(L,cC.c.get('x').gv(cD),cC.c.get('y').gv(cD),7);L.set_lineWidth(2.5-cZ);L.set_strokeStyle(cC.c.get('selected_halo_color').gv(cD)['colorOverrideNone']);L.stroke()}if(cY!==0){L.restore()}}}break}default:{break}}};bC.renderAreaMarkHoverOverlayImage=function(L,cC,cD){var cE=false;if(cD-1>0&&!cC.isMarkEndPrimitive(cD-1)){cE=cE||cC.isMarkHighlighted(cD-1)}if(cD+1<cC.markCount&&!cC.isMarkEndPrimitive(cD)){cE=cE||cC.isMarkHighlighted(cD+1)}var cF;var cG=cC.c.get('x').gv(cD);var cH=cC.c.get('y').gv(cD);if(cC.isMarkSelected(cD)){cF=cC.c.get('selected_halo_color').gv(cD)['colorOverrideOpaque'];{var cI=cC.c.get('draw_border').gv(cD);var cJ=7+(cI?2:0);tab.CanvasRenderer.renderCircle(L,0+cG,0+cH,cJ,cF,4)}cF=cC.getMarkColors(cD)['colorOverrideOpaque'];{var cK=cC.getMarkInstanceOffsets(cD);var cL=cK.length;for(var cM=0;cM<cL;cM++){var cN=cK[cM];bC.$d(L,cN);tab.CanvasRenderer.renderFilledCircle(L,0+cG,0+cH,7,cF);if(cN!==0){L.restore()}}}cG=cC.c.get('x1').gv(cD);cH=cC.c.get('y1').gv(cD);cF=cC.c.get('selected_halo_color').gv(cD)['colorOverrideOpaque'];{var cO=cC.c.get('draw_border').gv(cD);var cP=7+(cO?2:0);tab.CanvasRenderer.renderCircle(L,0+cG,0+cH,cP,cF,4)}cF=cC.getMarkColors(cD)['colorOverrideOpaque'];{var cQ=cC.getMarkInstanceOffsets(cD);var cR=cQ.length;for(var cS=0;cS<cR;cS++){var cT=cQ[cS];bC.$d(L,cT);tab.CanvasRenderer.renderFilledCircle(L,0+cG,0+cH,7,cF);if(cT!==0){L.restore()}}}}else if(cC.isMarkHighlighted(cD)&&!cE){cF=cC.c.get('selected_multi_prim_halo_color').gv(cD)['colorOverrideNone'];{var cU=cC.getMarkInstanceOffsets(cD);var cV=cU.length;for(var cW=0;cW<cV;cW++){var cX=cU[cW];bC.$d(L,cX);{var cY=cC.c.get('draw_border').gv(cD);var cZ=7+(cY?2:0);tab.CanvasRenderer.renderCircle(L,0+cG,0+cH,cZ,cF,4)}if(cX!==0){L.restore()}}}cF=cC.getMarkColors(cD)['colorOverrideNone'];{var da=cC.getMarkInstanceOffsets(cD);var db=da.length;for(var dc=0;dc<db;dc++){var dd=da[dc];bC.$d(L,dd);tab.CanvasRenderer.renderFilledCircle(L,0+cG,0+cH,7,cF);if(dd!==0){L.restore()}}}cG=cC.c.get('x1').gv(cD);cH=cC.c.get('y1').gv(cD);cF=cC.c.get('selected_multi_prim_halo_color').gv(cD)['colorOverrideNone'];{var de=cC.getMarkInstanceOffsets(cD);var df=de.length;for(var dg=0;dg<df;dg++){var dh=de[dg];bC.$d(L,dh);{var di=cC.c.get('draw_border').gv(cD);var dj=7+(di?2:0);tab.CanvasRenderer.renderCircle(L,0+cG,0+cH,dj,cF,4)}if(dh!==0){L.restore()}}}cF=cC.getMarkColors(cD)['colorOverrideNone'];{var dk=cC.getMarkInstanceOffsets(cD);var dl=dk.length;for(var dm=0;dm<dl;dm++){var dn=dk[dm];bC.$d(L,dn);tab.CanvasRenderer.renderFilledCircle(L,0+cG,0+cH,7,cF);if(dn!==0){L.restore()}}}}else{cF=(cC.drawBorder?cC.get_borderColor():tab.SceneUtils.blackColor)['colorOverrideNone'];{var dp=cC.getMarkInstanceOffsets(cD);var dq=dp.length;for(var dr=0;dr<dq;dr++){var ds=dp[dr];bC.$d(L,ds);tab.CanvasRenderer.renderFilledCircle(L,0+cG,0+cH,5,cF);if(ds!==0){L.restore()}}}cG=cC.c.get('x1').gv(cD);cH=cC.c.get('y1').gv(cD);cF=(cC.drawBorder?cC.get_borderColor():tab.SceneUtils.blackColor)['colorOverrideNone'];{var dt=cC.getMarkInstanceOffsets(cD);var du=dt.length;for(var dv=0;dv<du;dv++){var dw=dt[dv];bC.$d(L,dw);tab.CanvasRenderer.renderFilledCircle(L,0+cG,0+cH,5,cF);if(dw!==0){L.restore()}}}}};bC.renderAreaMarkPressedOverlayImage=function(L,cC,cD){var cE=(cC.drawBorder?cC.get_borderColor():tab.SceneUtils.blackColor)['colorOverrideNone'];var cF=cC.c.get('x').gv(cD);var cG=cC.c.get('y').gv(cD);{var cH=cC.getMarkInstanceOffsets(cD);var cI=cH.length;for(var cJ=0;cJ<cI;cJ++){var cK=cH[cJ];bC.$d(L,cK);tab.CanvasRenderer.renderFilledCircle(L,0+cF,0+cG,7,cE);if(cK!==0){L.restore()}}}cF=cC.c.get('x1').gv(cD);cG=cC.c.get('y1').gv(cD);{var cL=cC.getMarkInstanceOffsets(cD);var cM=cL.length;for(var cN=0;cN<cM;cN++){var cO=cL[cN];bC.$d(L,cO);tab.CanvasRenderer.renderFilledCircle(L,0+cF,0+cG,7,cE);if(cO!==0){L.restore()}}}};bC.renderPieHoverOverlayImage=function(L,cC,cD){var cE=cC.getMarkInstanceOffsets(cD);var cF=cE.length;for(var cG=0;cG<cF;cG++){var cH=cE[cG];bC.$d(L,cH);var cI=cC.c.get('size').gv(cD)/2;var cJ=cC.c.get('draw_border').gv(cD);var cK=(!!cJ?1:0);var cL=cC.c.get('selected_halo_color').gv(cD)['colorOverrideNone'];var cM=cC.c.get('theta').gv(cD);var cN=cC.c.get('theta1').gv(cD);var cO=cM>cN;if(Math.abs(cM-cN)>=1){tab.CanvasRenderer.renderCircle(L,cC.c.get('x').gv(cD),cC.c.get('y').gv(cD),(cI+cK)*2,cL,1)}else{tab.CanvasRenderer.renderWedge(L,cC.c.get('x').gv(cD),cC.c.get('y').gv(cD),cI,cM,cN,cL,1+cK,cO)}if(cH!==0){L.restore()}}};bC.renderPiePressedOverlayImage=function(L,cC,cD){var cE=cC.getMarkInstanceOffsets(cD);var cF=cE.length;for(var cG=0;cG<cF;cG++){var cH=cE[cG];bC.$d(L,cH);var cI=cC.c.get('size').gv(cD)/2;var cJ=cC.c.get('draw_border').gv(cD);var cK=(!!cJ?1:0);var cL=cC.c.get('selected_halo_color').gv(cD)['colorOverrideNone'];var cM=cC.c.get('theta').gv(cD);var cN=cC.c.get('theta1').gv(cD);var cO=cM>cN;if(Math.abs(cM-cN)>=1){tab.CanvasRenderer.renderCircle(L,cC.c.get('x').gv(cD),cC.c.get('y').gv(cD),(cI+cK)*2,cL,2)}else{tab.CanvasRenderer.renderWedge(L,cC.c.get('x').gv(cD),cC.c.get('y').gv(cD),cI,cM,cN,cL,2+cK,cO)}if(cH!==0){L.restore()}}};bC.renderTextHoverOverlayImage=function(L,cC,cD){if(!(cC.clipCase!==0&&cC.useCellClipForSelection)){{var cE=cC.getMarkInstanceOffsets(cD);var cF=cE.length;for(var cG=0;cG<cF;cG++){var cH=cE[cG];bC.$d(L,cH);var cI=-cC.c.get('width').gv(cD)/2;var cJ=cC.c.get('height').gv(cD)/2-1;var cK=cC.c.get('x').gv(cD)+cI;var cL=cC.c.get('y').gv(cD)+cJ;var cM=cC.c.get('x').gv(cD)+cC.c.get('width').gv(cD)+cI;var cN=cC.c.get('y').gv(cD)+cJ;var cO=1;var cP=cM-cK;var cQ=[cK,cL+cO-1,cK+cP,cL+cO-1];L.set_lineCap('square');L.set_lineWidth(cO);L.set_strokeStyle(cC.getMarkColors(cD)['colorOverrideOpaque']);tab.CanvasRenderer.strokePath(L,cQ,false,true);if(cH!==0){L.restore()}}}}if(cC.clipCase!==0&&cC.useCellClipForSelection){{var cR=cC.getMarkInstanceOffsets(cD);var cS=cR.length;for(var cT=0;cT<cS;cT++){var cU=cR[cT];bC.$d(L,cU);{var cV=2;var cW=cC.c.get('x').gv(cD)-cC.c.get('clip_width').gv(cD)/2+cV;var cX=cC.c.get('x').gv(cD)+cC.c.get('clip_width').gv(cD)/2-cV;var cY=cC.c.get('y').gv(cD)-cC.c.get('clip_height').gv(cD)/2+cV;var cZ=cC.c.get('y').gv(cD)+cC.c.get('clip_height').gv(cD)/2-cV;bC.$3(L,cC,cD,cW,cX,cY,cZ,cC.getMarkColors(cD),!!false,Math.floor(1))}if(cU!==0){L.restore()}}}}};bC.renderTextPressedOverlayImage=function(L,cC,cD){if(!(cC.clipCase!==0&&cC.useCellClipForSelection)){{var cE=cC.getMarkInstanceOffsets(cD);var cF=cE.length;for(var cG=0;cG<cF;cG++){var cH=cE[cG];bC.$d(L,cH);var cI=-cC.c.get('width').gv(cD)/2;var cJ=cC.c.get('height').gv(cD)/2-1;var cK=cC.c.get('x').gv(cD)+cI;var cL=cC.c.get('y').gv(cD)+cJ;var cM=cC.c.get('x').gv(cD)+cC.c.get('width').gv(cD)+cI;var cN=cC.c.get('y').gv(cD)+cJ;var cO=2;var cP=cM-cK;var cQ=[cK,cL+cO-1,cK+cP,cL+cO-1];L.set_lineCap('square');L.set_lineWidth(cO);L.set_strokeStyle(cC.getMarkColors(cD)['colorOverrideOpaque']);tab.CanvasRenderer.strokePath(L,cQ,false,true);if(cH!==0){L.restore()}}}}if(cC.clipCase!==0&&cC.useCellClipForSelection){{var cR=cC.getMarkInstanceOffsets(cD);var cS=cR.length;for(var cT=0;cT<cS;cT++){var cU=cR[cT];bC.$d(L,cU);{var cV=2;var cW=cC.c.get('x').gv(cD)-cC.c.get('clip_width').gv(cD)/2+cV;var cX=cC.c.get('x').gv(cD)+cC.c.get('clip_width').gv(cD)/2-cV;var cY=cC.c.get('y').gv(cD)-cC.c.get('clip_height').gv(cD)/2+cV;var cZ=cC.c.get('y').gv(cD)+cC.c.get('clip_height').gv(cD)/2-cV;bC.$3(L,cC,cD,cW,cX,cY,cZ,cC.getMarkColors(cD),!!false,Math.floor(2))}if(cU!==0){L.restore()}}}}};bC.renderBarHoverOverlayImage=function(L,cC,cD){var cE=ss.Int32.trunc(cC.c.get('size').gv(cD)+0.5)/2;var cF=1;if(cC.scaleMarksInX&&cC.scaleMarksInY){{var cG=cC.getMarkInstanceOffsets(cD);var cH=cG.length;for(var cI=0;cI<cH;cI++){var cJ=cG[cI];bC.$d(L,cJ);{var cK=0;var cL=cC.c.get('x').gv(cD)+cK;var cM=cC.c.get('x1').gv(cD)-cK;var cN=cC.c.get('y').gv(cD)+cK;var cO=cC.c.get('y1').gv(cD)-cK;bC.$3(L,cC,cD,cL,cM,cN,cO,cC.c.get('selected_halo_color').gv(cD),!!false,Math.floor(cF))}if(cJ!==0){L.restore()}}}}if(!cC.scaleMarksInX&&cC.scaleMarksInY){{var cP=cC.getMarkInstanceOffsets(cD);var cQ=cP.length;for(var cR=0;cR<cQ;cR++){var cS=cP[cR];bC.$d(L,cS);{var cT=0;var cU=cC.c.get('x').gv(cD)-cE+cT;var cV=cC.c.get('x').gv(cD)+cE-cT;var cW=cC.c.get('y').gv(cD)+cT;var cX=cC.c.get('y1').gv(cD)-cT;bC.$3(L,cC,cD,cU,cV,cW,cX,cC.c.get('selected_halo_color').gv(cD),!!false,Math.floor(cF))}if(cS!==0){L.restore()}}}}if(cC.scaleMarksInX&&!cC.scaleMarksInY){{var cY=cC.getMarkInstanceOffsets(cD);var cZ=cY.length;for(var da=0;da<cZ;da++){var db=cY[da];bC.$d(L,db);{var dc=0;var dd=cC.c.get('x').gv(cD)+dc;var de=cC.c.get('x1').gv(cD)-dc;var df=cC.c.get('y').gv(cD)-cE+dc;var dg=cC.c.get('y').gv(cD)+cE-dc;bC.$3(L,cC,cD,dd,de,df,dg,cC.c.get('selected_halo_color').gv(cD),!!false,Math.floor(cF))}if(db!==0){L.restore()}}}}if(!cC.scaleMarksInX&&!cC.scaleMarksInY){{var dh=cC.getMarkInstanceOffsets(cD);var di=dh.length;for(var dj=0;dj<di;dj++){var dk=dh[dj];bC.$d(L,dk);{var dl=0;var dm=cC.c.get('x').gv(cD)-cE+dl;var dn=cC.c.get('x').gv(cD)+cE-dl;var dp=cC.c.get('y').gv(cD)-cE+dl;var dq=cC.c.get('y').gv(cD)+cE-dl;bC.$3(L,cC,cD,dm,dn,dp,dq,cC.c.get('selected_halo_color').gv(cD),!!true,Math.floor(cF))}if(dk!==0){L.restore()}}}}};bC.renderBarPressedOverlayImage=function(L,cC,cD){var cE=ss.Int32.trunc(cC.c.get('size').gv(cD)+0.5)/2;var cF=2;if(cC.scaleMarksInX&&cC.scaleMarksInY){{var cG=cC.getMarkInstanceOffsets(cD);var cH=cG.length;for(var cI=0;cI<cH;cI++){var cJ=cG[cI];bC.$d(L,cJ);{var cK=0;var cL=cC.c.get('x').gv(cD)+cK;var cM=cC.c.get('x1').gv(cD)-cK;var cN=cC.c.get('y').gv(cD)+cK;var cO=cC.c.get('y1').gv(cD)-cK;bC.$3(L,cC,cD,cL,cM,cN,cO,cC.c.get('selected_halo_color').gv(cD),!!false,Math.floor(cF))}if(cJ!==0){L.restore()}}}}if(!cC.scaleMarksInX&&cC.scaleMarksInY){{var cP=cC.getMarkInstanceOffsets(cD);var cQ=cP.length;for(var cR=0;cR<cQ;cR++){var cS=cP[cR];bC.$d(L,cS);{var cT=0;var cU=cC.c.get('x').gv(cD)-cE+cT;var cV=cC.c.get('x').gv(cD)+cE-cT;var cW=cC.c.get('y').gv(cD)+cT;var cX=cC.c.get('y1').gv(cD)-cT;bC.$3(L,cC,cD,cU,cV,cW,cX,cC.c.get('selected_halo_color').gv(cD),!!false,Math.floor(cF))}if(cS!==0){L.restore()}}}}if(cC.scaleMarksInX&&!cC.scaleMarksInY){{var cY=cC.getMarkInstanceOffsets(cD);var cZ=cY.length;for(var da=0;da<cZ;da++){var db=cY[da];bC.$d(L,db);{var dc=0;var dd=cC.c.get('x').gv(cD)+dc;var de=cC.c.get('x1').gv(cD)-dc;var df=cC.c.get('y').gv(cD)-cE+dc;var dg=cC.c.get('y').gv(cD)+cE-dc;bC.$3(L,cC,cD,dd,de,df,dg,cC.c.get('selected_halo_color').gv(cD),!!false,Math.floor(cF))}if(db!==0){L.restore()}}}}if(!cC.scaleMarksInX&&!cC.scaleMarksInY){{var dh=cC.getMarkInstanceOffsets(cD);var di=dh.length;for(var dj=0;dj<di;dj++){var dk=dh[dj];bC.$d(L,dk);{var dl=0;var dm=cC.c.get('x').gv(cD)-cE+dl;var dn=cC.c.get('x').gv(cD)+cE-dl;var dp=cC.c.get('y').gv(cD)-cE+dl;var dq=cC.c.get('y').gv(cD)+cE-dl;bC.$3(L,cC,cD,dm,dn,dp,dq,cC.c.get('selected_halo_color').gv(cD),!!true,Math.floor(cF))}if(dk!==0){L.restore()}}}}};bC.renderLineMarkHoverOverlayImage=function(L,cC,cD){var cE=false;if(cD-1>0&&!cC.isMarkEndPrimitive(cD-1)){cE=cE||cC.isMarkHighlighted(cD-1)}if(cD+1<cC.markCount&&!cC.isMarkEndPrimitive(cD)){cE=cE||cC.isMarkHighlighted(cD+1)}var cF;var cG=cC.c.get('x').gv(cD);var cH=cC.c.get('y').gv(cD);if(cC.isMarkSelected(cD)){cF=cC.c.get('selected_halo_color').gv(cD)['colorOverrideOpaque'];{var cI=cC.c.get('draw_border').gv(cD);var cJ=cC.c.get('size').gv(cD)+4+4+(cI?2:0);tab.CanvasRenderer.renderCircle(L,0+cG,0+cH,cJ,cF,4)}cF=cC.getMarkColors(cD)['colorOverrideOpaque'];{var cK=cC.getMarkInstanceOffsets(cD);var cL=cK.length;for(var cM=0;cM<cL;cM++){var cN=cK[cM];bC.$d(L,cN);tab.CanvasRenderer.renderFilledCircle(L,0+cG,0+cH,cC.c.get('size').gv(cD)+4+4,cF);if(cN!==0){L.restore()}}}}else if(cC.isMarkHighlighted(cD)&&!cE){cF=cC.c.get('selected_multi_prim_halo_color').gv(cD)['colorOverrideNone'];{var cO=cC.getMarkInstanceOffsets(cD);var cP=cO.length;for(var cQ=0;cQ<cP;cQ++){var cR=cO[cQ];bC.$d(L,cR);{var cS=cC.c.get('draw_border').gv(cD);var cT=cC.c.get('size').gv(cD)+4+4+(cS?2:0);tab.CanvasRenderer.renderCircle(L,0+cG,0+cH,cT,cF,4)}if(cR!==0){L.restore()}}}cF=cC.getMarkColors(cD)['colorOverrideNone'];{var cU=cC.getMarkInstanceOffsets(cD);var cV=cU.length;for(var cW=0;cW<cV;cW++){var cX=cU[cW];bC.$d(L,cX);tab.CanvasRenderer.renderFilledCircle(L,0+cG,0+cH,cC.c.get('size').gv(cD)+4+4,cF);if(cX!==0){L.restore()}}}}else{cF=cC.getMarkColors(cD)['colorOverrideNone'];{var cY=cC.getMarkInstanceOffsets(cD);var cZ=cY.length;for(var da=0;da<cZ;da++){var db=cY[da];bC.$d(L,db);tab.CanvasRenderer.renderFilledCircle(L,0+cG,0+cH,cC.c.get('size').gv(cD)+4,cF);if(db!==0){L.restore()}}}}};bC.renderLineMarkPressedOverlayImage=function(L,cC,cD){var cE=cC.getMarkColors(cD)['colorOverrideNone'];var cF=cC.c.get('x').gv(cD);var cG=cC.c.get('y').gv(cD);{var cH=cC.getMarkInstanceOffsets(cD);var cI=cH.length;for(var cJ=0;cJ<cI;cJ++){var cK=cH[cJ];bC.$d(L,cK);tab.CanvasRenderer.renderFilledCircle(L,0+cF,0+cG,cC.c.get('size').gv(cD)+8,cE);if(cK!==0){L.restore()}}}};bC.shapeHasLayerContent=function(L,cC){var cD=false;switch(L){case'shapeIDCircle':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDFilledCircle':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'border':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDUnscaledFilledCircle':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'border':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDSquare':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDFilledSquare':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'border':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDAsterisk':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDPlus':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDFilledPlus':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDTimes':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDFilledTimes':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDDiamond':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDFilledDiamond':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDTriangle':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDFilledTriangle':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDDownTriangle':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDFilledDownTriangle':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDLeftTriangle':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDFilledLeftTriangle':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDRightTriangle':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDFilledRightTriangle':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}case'shapeIDFilledStar':{switch(cC){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{cD=true;break}default:{break}}break}default:{cD=true;break}}return cD};bC.getShapeMarkSpriteSize=function(L,cC,cD){var cE=0;switch(L){case'shapeIDCircle':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'hoverOverlay':{cE=Math.ceil(cD+6);break}case'pressedOverlay':{cE=Math.ceil(cD+8);break}default:{break}}break}case'shapeIDFilledCircle':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'border':{cE=Math.ceil(cD+2);break}case'hoverOverlay':{cE=Math.ceil(cD+2);break}case'pressedOverlay':{cE=Math.ceil(cD+6);break}default:{break}}break}case'shapeIDUnscaledFilledCircle':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'border':{cE=Math.ceil(cD+2);break}case'hoverOverlay':{cE=Math.ceil(cD+4);break}case'pressedOverlay':{cE=Math.ceil(cD+6);break}default:{break}}break}case'shapeIDSquare':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'hoverOverlay':{cE=Math.ceil(cD+4);break}case'pressedOverlay':{cE=Math.ceil(cD+6);break}default:{break}}break}case'shapeIDFilledSquare':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'border':{cE=Math.ceil(cD+2);break}case'hoverOverlay':{cE=Math.ceil(cD+2);break}case'pressedOverlay':{cE=Math.ceil(cD+4);break}default:{break}}break}case'shapeIDAsterisk':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'hoverOverlay':{cE=Math.ceil(cD+6);break}case'pressedOverlay':{cE=Math.ceil(cD+8);break}default:{break}}break}case'shapeIDPlus':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'hoverOverlay':{cE=Math.ceil(cD+4);break}case'pressedOverlay':{cE=Math.ceil(cD+6);break}default:{break}}break}case'shapeIDFilledPlus':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'hoverOverlay':{cE=Math.ceil(cD+3);break}case'pressedOverlay':{cE=Math.ceil(cD+5);break}default:{break}}break}case'shapeIDTimes':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'hoverOverlay':{cE=Math.ceil(cD+4);break}case'pressedOverlay':{cE=Math.ceil(cD+6);break}default:{break}}break}case'shapeIDFilledTimes':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'hoverOverlay':{cE=Math.ceil(cD+4);break}case'pressedOverlay':{cE=Math.ceil(cD+6);break}default:{break}}break}case'shapeIDDiamond':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'hoverOverlay':{cE=Math.ceil(cD+6);break}case'pressedOverlay':{cE=Math.ceil(cD+8);break}default:{break}}break}case'shapeIDFilledDiamond':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'hoverOverlay':{cE=Math.ceil(cD+5);break}case'pressedOverlay':{cE=Math.ceil(cD+7);break}default:{break}}break}case'shapeIDTriangle':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'hoverOverlay':{cE=Math.ceil(cD+6);break}case'pressedOverlay':{cE=Math.ceil(cD+8);break}default:{break}}break}case'shapeIDFilledTriangle':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'hoverOverlay':{cE=Math.ceil(cD+2);break}case'pressedOverlay':{cE=Math.ceil(cD+4);break}default:{break}}break}case'shapeIDDownTriangle':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'hoverOverlay':{cE=Math.ceil(cD+4);break}case'pressedOverlay':{cE=Math.ceil(cD+4);break}default:{break}}break}case'shapeIDFilledDownTriangle':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'hoverOverlay':{cE=Math.ceil(cD+2);break}case'pressedOverlay':{cE=Math.ceil(cD+4);break}default:{break}}break}case'shapeIDLeftTriangle':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'hoverOverlay':{cE=Math.ceil(cD+4);break}case'pressedOverlay':{cE=Math.ceil(cD+4);break}default:{break}}break}case'shapeIDFilledLeftTriangle':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'hoverOverlay':{cE=Math.ceil(cD+2);break}case'pressedOverlay':{cE=Math.ceil(cD+4);break}default:{break}}break}case'shapeIDRightTriangle':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'hoverOverlay':{cE=Math.ceil(cD+4);break}case'pressedOverlay':{cE=Math.ceil(cD+6);break}default:{break}}break}case'shapeIDFilledRightTriangle':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+4);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+4);break}case'hoverOverlay':{cE=Math.ceil(cD+2);break}case'pressedOverlay':{cE=Math.ceil(cD+4);break}default:{break}}break}case'shapeIDFilledStar':{switch(cC){case'normalUnder':{cE=Math.ceil(cD+6);break}case'normalOn':{cE=Math.ceil(cD+2);break}case'selectedUnder':{cE=Math.ceil(cD+6);break}case'hoverOverlay':{cE=Math.ceil(cD+10);break}case'pressedOverlay':{cE=Math.ceil(cD+14);break}default:{break}}break}default:{break}}return cE};bC.renderShapeHoverOverlayImage=function(L,cC,cD){var cE=cC.c.get('shape_id').gv(cD);var cF=cC.c.get('x').gv(cD);var cG=cC.c.get('y').gv(cD);if(cC.shouldStampThisShapeMark(cD)){var cH=cC.c.get('size').gv(cD);var cI=bC.getShapeMarkSpriteSize(cE,'normalOn',cH)+2;var cJ=cI/2;cF=(cF-cJ+0.5<<0)+cJ;cG=(cG-cJ+0.5<<0)+cJ}switch(cE){case'shapeIDCircle':{bC.renderShapeIDCircleHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDFilledCircle':{bC.renderShapeIDFilledCircleHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDUnscaledFilledCircle':{bC.renderShapeIDUnscaledFilledCircleHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDSquare':{bC.renderShapeIDSquareHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDFilledSquare':{bC.renderShapeIDFilledSquareHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDAsterisk':{bC.renderShapeIDAsteriskHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDPlus':{bC.renderShapeIDPlusHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDFilledPlus':{bC.renderShapeIDFilledPlusHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDTimes':{bC.renderShapeIDTimesHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDFilledTimes':{bC.renderShapeIDFilledTimesHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDDiamond':{bC.renderShapeIDDiamondHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDFilledDiamond':{bC.renderShapeIDFilledDiamondHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDTriangle':{bC.renderShapeIDTriangleHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDFilledTriangle':{bC.renderShapeIDFilledTriangleHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDDownTriangle':{bC.renderShapeIDDownTriangleHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDFilledDownTriangle':{bC.renderShapeIDFilledDownTriangleHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDLeftTriangle':{bC.renderShapeIDLeftTriangleHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDFilledLeftTriangle':{bC.renderShapeIDFilledLeftTriangleHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDRightTriangle':{bC.renderShapeIDRightTriangleHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDFilledRightTriangle':{bC.renderShapeIDFilledRightTriangleHoverOverlayImage(L,cC,cF,cG,cD);break}case'shapeIDFilledStar':{bC.renderShapeIDFilledStarHoverOverlayImage(L,cC,cF,cG,cD);break}default:{if(ss.isValue(tab.ApplicationModel.get_instance().get_shapeManager().getImageElement(cE))){var cK=cC.getMarkInstanceOffsets(cD);var cL=cK.length;for(var cM=0;cM<cL;cM++){var cN=cK[cM];if(cN!==0){L.save();L.translate(cN,0)}bC.$b(L,cC,cD,'hoverOverlay','colorOverrideNone');if(cN!==0){L.restore()}}}else{bC.renderShapeIDCircleHoverOverlayImage(L,cC,cF,cG,cD)}break}}};bC.renderShapePressedOverlayImage=function(L,cC,cD){var cE=cC.getMarkIndexFromTupleId(cD);var cF=cC.c.get('shape_id').gv(cE);var cG=cC.c.get('x').gv(cE);var cH=cC.c.get('y').gv(cE);if(cC.shouldStampThisShapeMark(cE)){var cI=cC.c.get('size').gv(cE);var cJ=bC.getShapeMarkSpriteSize(cF,'normalOn',cI)+2;var cK=cJ/2;cG=(cG-cK+0.5<<0)+cK;cH=(cH-cK+0.5<<0)+cK}switch(cF){case'shapeIDCircle':{bC.renderShapeIDCirclePressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDFilledCircle':{bC.renderShapeIDFilledCirclePressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDUnscaledFilledCircle':{bC.renderShapeIDUnscaledFilledCirclePressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDSquare':{bC.renderShapeIDSquarePressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDFilledSquare':{bC.renderShapeIDFilledSquarePressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDAsterisk':{bC.renderShapeIDAsteriskPressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDPlus':{bC.renderShapeIDPlusPressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDFilledPlus':{bC.renderShapeIDFilledPlusPressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDTimes':{bC.renderShapeIDTimesPressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDFilledTimes':{bC.renderShapeIDFilledTimesPressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDDiamond':{bC.renderShapeIDDiamondPressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDFilledDiamond':{bC.renderShapeIDFilledDiamondPressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDTriangle':{bC.renderShapeIDTrianglePressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDFilledTriangle':{bC.renderShapeIDFilledTrianglePressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDDownTriangle':{bC.renderShapeIDDownTrianglePressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDFilledDownTriangle':{bC.renderShapeIDFilledDownTrianglePressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDLeftTriangle':{bC.renderShapeIDLeftTrianglePressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDFilledLeftTriangle':{bC.renderShapeIDFilledLeftTrianglePressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDRightTriangle':{bC.renderShapeIDRightTrianglePressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDFilledRightTriangle':{bC.renderShapeIDFilledRightTrianglePressedOverlayImage(L,cC,cG,cH,cE);break}case'shapeIDFilledStar':{bC.renderShapeIDFilledStarPressedOverlayImage(L,cC,cG,cH,cE);break}default:{if(ss.isValue(tab.ApplicationModel.get_instance().get_shapeManager().getImageElement(cF))){var cL=cC.getMarkInstanceOffsets(cE);var cM=cL.length;for(var cN=0;cN<cM;cN++){var cO=cL[cN];if(cO!==0){L.save();L.translate(cO,0)}bC.$b(L,cC,cE,'pressedOverlay','colorOverrideNone');if(cO!==0){L.restore()}}}else{bC.renderShapeIDCirclePressedOverlayImage(L,cC,cG,cH,cE)}break}}};bC.renderShapeIDCircleHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=cC.c.get('draw_border').gv(cF);var cO=cC.c.get('size').gv(cF)*0.958333333333333+2+(cN?2:0);tab.CanvasRenderer.renderCircle(L,0+cH,0+cI,cO,cG,1)}if(cM!==0){L.restore()}}}};bC.renderShapeIDCirclePressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=cC.c.get('draw_border').gv(cF);var cO=cC.c.get('size').gv(cF)*0.958333333333333+3+(cN?2:0);tab.CanvasRenderer.renderCircle(L,0+cH,0+cI,cO,cG,2)}if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledCircleHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=cC.c.get('draw_border').gv(cF);var cO=cC.c.get('size').gv(cF)*0.979166666666667+(cN?2:0);tab.CanvasRenderer.renderCircle(L,0+cH,0+cI,cO,cG,1)}if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledCirclePressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=cC.c.get('draw_border').gv(cF);var cO=cC.c.get('size').gv(cF)*0.979166666666667+1+(cN?2:0);tab.CanvasRenderer.renderCircle(L,0+cH,0+cI,cO,cG,2)}if(cM!==0){L.restore()}}}};bC.renderShapeIDUnscaledFilledCircleHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=cC.c.get('draw_border').gv(cF);var cO=cC.c.get('size').gv(cF)+(cN?2:0);tab.CanvasRenderer.renderCircle(L,0+cH,0+cI,cO,cG,1)}if(cM!==0){L.restore()}}}};bC.renderShapeIDUnscaledFilledCirclePressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=cC.c.get('draw_border').gv(cF);var cO=cC.c.get('size').gv(cF)+1+(cN?2:0);tab.CanvasRenderer.renderCircle(L,0+cH,0+cI,cO,cG,2)}if(cM!==0){L.restore()}}}};bC.renderShapeIDSquareHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);tab.CanvasRenderer.renderRectangle(L,cH+0,cI+0,cC.c.get('size').gv(cF)*0.895833333333333+3,cC.c.get('size').gv(cF)*0.895833333333333+3,cG,1);if(cM!==0){L.restore()}}}};bC.renderShapeIDSquarePressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);tab.CanvasRenderer.renderRectangle(L,cH+0,cI+0,cC.c.get('size').gv(cF)*0.895833333333333+4,cC.c.get('size').gv(cF)*0.895833333333333+4,cG,2);if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledSquareHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);tab.CanvasRenderer.renderRectangle(L,cH+0,cI+0,cC.c.get('size').gv(cF)*0.9375+1,cC.c.get('size').gv(cF)*0.9375+1,cG,1);if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledSquarePressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);tab.CanvasRenderer.renderRectangle(L,cH+0,cI+0,cC.c.get('size').gv(cF)*0.9375+2,cC.c.get('size').gv(cF)*0.9375+2,cG,2);if(cM!==0){L.restore()}}}};bC.renderShapeIDAsteriskHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(36);var cO=(cC.c.get('size').gv(cF)*0.958333333333333+2)/2;var cP=0.899999976158142*cO;var cQ=(cC.c.get('size').gv(cF)*0.958333333333333+6)/4;var cR=2.5;var cS=1.5;cN[0]=-cR+cH;cN[1]=0+cI;cN[2]=-cP+cH;cN[3]=cQ-cR+cI;cN[4]=cS-cP+cH;cN[5]=cQ+cI;cN[6]=-cS+cH;cN[7]=cR+cI;cN[8]=-cS+cH;cN[9]=cO+cI;cN[10]=cS+cH;cN[11]=cO+cI;cN[12]=cS+cH;cN[13]=cR+cI;cN[14]=cP-cS+cH;cN[15]=cQ+cI;cN[16]=cP+cH;cN[17]=cQ-cR+cI;cN[18]=cR+cH;cN[19]=0+cI;cN[20]=cP+cH;cN[21]=cR-cQ+cI;cN[22]=cP-cS+cH;cN[23]=-cQ+cI;cN[24]=cS+cH;cN[25]=-cR+cI;cN[26]=cS+cH;cN[27]=-cO+cI;cN[28]=-cS+cH;cN[29]=-cO+cI;cN[30]=-cS+cH;cN[31]=-cR+cI;cN[32]=cS-cP+cH;cN[33]=-cQ+cI;cN[34]=-cP+cH;cN[35]=cR-cQ+cI;L.set_lineWidth(1);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDAsteriskPressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(36);var cO=(cC.c.get('size').gv(cF)*0.958333333333333+4)/2;var cP=0.899999976158142*cO;var cQ=(cC.c.get('size').gv(cF)*0.958333333333333+8)/4;var cR=3;var cS=2;cN[0]=-cR+cH;cN[1]=0+cI;cN[2]=-cP+cH;cN[3]=cQ-cR+cI;cN[4]=cS-cP+cH;cN[5]=cQ+cI;cN[6]=-cS+cH;cN[7]=cR+cI;cN[8]=-cS+cH;cN[9]=cO+cI;cN[10]=cS+cH;cN[11]=cO+cI;cN[12]=cS+cH;cN[13]=cR+cI;cN[14]=cP-cS+cH;cN[15]=cQ+cI;cN[16]=cP+cH;cN[17]=cQ-cR+cI;cN[18]=cR+cH;cN[19]=0+cI;cN[20]=cP+cH;cN[21]=cR-cQ+cI;cN[22]=cP-cS+cH;cN[23]=-cQ+cI;cN[24]=cS+cH;cN[25]=-cR+cI;cN[26]=cS+cH;cN[27]=-cO+cI;cN[28]=-cS+cH;cN[29]=-cO+cI;cN[30]=-cS+cH;cN[31]=-cR+cI;cN[32]=cS-cP+cH;cN[33]=-cQ+cI;cN[34]=-cP+cH;cN[35]=cR-cQ+cI;L.set_lineWidth(2);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDPlusHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(24);var cO=(cC.c.get('size').gv(cF)*0.916666666666667+2)/2;var cP=1.5;cN[0]=-cP+cH;cN[1]=-cO+cI;cN[2]=-cP+cH;cN[3]=-cP+cI;cN[4]=-cO+cH;cN[5]=-cP+cI;cN[6]=-cO+cH;cN[7]=cP+cI;cN[8]=-cP+cH;cN[9]=cP+cI;cN[10]=-cP+cH;cN[11]=cO+cI;cN[12]=cP+cH;cN[13]=cO+cI;cN[14]=cP+cH;cN[15]=cP+cI;cN[16]=cO+cH;cN[17]=cP+cI;cN[18]=cO+cH;cN[19]=-cP+cI;cN[20]=cP+cH;cN[21]=-cP+cI;cN[22]=cP+cH;cN[23]=-cO+cI;L.set_lineWidth(1);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDPlusPressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(24);var cO=(cC.c.get('size').gv(cF)*0.916666666666667+3)/2;var cP=2;cN[0]=-cP+cH;cN[1]=-cO+cI;cN[2]=-cP+cH;cN[3]=-cP+cI;cN[4]=-cO+cH;cN[5]=-cP+cI;cN[6]=-cO+cH;cN[7]=cP+cI;cN[8]=-cP+cH;cN[9]=cP+cI;cN[10]=-cP+cH;cN[11]=cO+cI;cN[12]=cP+cH;cN[13]=cO+cI;cN[14]=cP+cH;cN[15]=cP+cI;cN[16]=cO+cH;cN[17]=cP+cI;cN[18]=cO+cH;cN[19]=-cP+cI;cN[20]=cP+cH;cN[21]=-cP+cI;cN[22]=cP+cH;cN[23]=-cO+cI;L.set_lineWidth(2);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledPlusHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(24);var cO=cC.c.get('size').gv(cF)*0.9375/2;var cP=cO/3;cN[0]=-cP+cH;cN[1]=-cO+cI;cN[2]=-cP+cH;cN[3]=-cP+cI;cN[4]=-cO+cH;cN[5]=-cP+cI;cN[6]=-cO+cH;cN[7]=cP+cI;cN[8]=-cP+cH;cN[9]=cP+cI;cN[10]=-cP+cH;cN[11]=cO+cI;cN[12]=cP+cH;cN[13]=cO+cI;cN[14]=cP+cH;cN[15]=cP+cI;cN[16]=cO+cH;cN[17]=cP+cI;cN[18]=cO+cH;cN[19]=-cP+cI;cN[20]=cP+cH;cN[21]=-cP+cI;cN[22]=cP+cH;cN[23]=-cO+cI;L.set_lineWidth(1);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledPlusPressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(24);var cO=(cC.c.get('size').gv(cF)*0.9375+1)/2;var cP=(cC.c.get('size').gv(cF)*0.9375+3)/6;cN[0]=-cP+cH;cN[1]=-cO+cI;cN[2]=-cP+cH;cN[3]=-cP+cI;cN[4]=-cO+cH;cN[5]=-cP+cI;cN[6]=-cO+cH;cN[7]=cP+cI;cN[8]=-cP+cH;cN[9]=cP+cI;cN[10]=-cP+cH;cN[11]=cO+cI;cN[12]=cP+cH;cN[13]=cO+cI;cN[14]=cP+cH;cN[15]=cP+cI;cN[16]=cO+cH;cN[17]=cP+cI;cN[18]=cO+cH;cN[19]=-cP+cI;cN[20]=cP+cH;cN[21]=-cP+cI;cN[22]=cP+cH;cN[23]=-cO+cI;L.set_lineWidth(2);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDTimesHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(24);var cO=(cC.c.get('size').gv(cF)*0.875+4)/2;var cP=2;cN[0]=-cO+cP+cH;cN[1]=-cO+cI;cN[2]=-cO+cH;cN[3]=-cO+cP+cI;cN[4]=-cP+cH;cN[5]=0+cI;cN[6]=-cO+cH;cN[7]=cO-cP+cI;cN[8]=-cO+cP+cH;cN[9]=cO+cI;cN[10]=0+cH;cN[11]=cP+cI;cN[12]=cO-cP+cH;cN[13]=cO+cI;cN[14]=cO+cH;cN[15]=cO-cP+cI;cN[16]=cP+cH;cN[17]=0+cI;cN[18]=cO+cH;cN[19]=-cO+cP+cI;cN[20]=cO-cP+cH;cN[21]=-cO+cI;cN[22]=0+cH;cN[23]=-cP+cI;L.set_lineWidth(1);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDTimesPressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(24);var cO=(cC.c.get('size').gv(cF)*0.875+4)/2;var cP=3;cN[0]=-cO+cP+cH;cN[1]=-cO+cI;cN[2]=-cO+cH;cN[3]=-cO+cP+cI;cN[4]=-cP+cH;cN[5]=0+cI;cN[6]=-cO+cH;cN[7]=cO-cP+cI;cN[8]=-cO+cP+cH;cN[9]=cO+cI;cN[10]=0+cH;cN[11]=cP+cI;cN[12]=cO-cP+cH;cN[13]=cO+cI;cN[14]=cO+cH;cN[15]=cO-cP+cI;cN[16]=cP+cH;cN[17]=0+cI;cN[18]=cO+cH;cN[19]=-cO+cP+cI;cN[20]=cO-cP+cH;cN[21]=-cO+cI;cN[22]=0+cH;cN[23]=-cP+cI;L.set_lineWidth(2);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledTimesHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(24);var cO=cC.c.get('size').gv(cF)*0.9375/2;var cP=cC.c.get('size').gv(cF)*0.9375/4;cN[0]=-cP+cH;cN[1]=-cO+cI;cN[2]=-cO+cH;cN[3]=-cP+cI;cN[4]=-cP+cH;cN[5]=0+cI;cN[6]=-cO+cH;cN[7]=cP+cI;cN[8]=-cP+cH;cN[9]=cO+cI;cN[10]=0+cH;cN[11]=cP+cI;cN[12]=cP+cH;cN[13]=cO+cI;cN[14]=cO+cH;cN[15]=cP+cI;cN[16]=cP+cH;cN[17]=0+cI;cN[18]=cO+cH;cN[19]=-cP+cI;cN[20]=cP+cH;cN[21]=-cO+cI;cN[22]=0+cH;cN[23]=-cP+cI;L.set_lineWidth(1);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledTimesPressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(24);var cO=cC.c.get('size').gv(cF)*0.9375/2;var cP=cC.c.get('size').gv(cF)*0.9375/4;cN[0]=-cP+cH;cN[1]=-cO+cI;cN[2]=-cO+cH;cN[3]=-cP+cI;cN[4]=-cP+cH;cN[5]=0+cI;cN[6]=-cO+cH;cN[7]=cP+cI;cN[8]=-cP+cH;cN[9]=cO+cI;cN[10]=0+cH;cN[11]=cP+cI;cN[12]=cP+cH;cN[13]=cO+cI;cN[14]=cO+cH;cN[15]=cP+cI;cN[16]=cP+cH;cN[17]=0+cI;cN[18]=cO+cH;cN[19]=-cP+cI;cN[20]=cP+cH;cN[21]=-cO+cI;cN[22]=0+cH;cN[23]=-cP+cI;L.set_lineWidth(2);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDDiamondHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(8);var cO=(cC.c.get('size').gv(cF)*1.04166666666667+3)/2;cN[0]=0+cH;cN[1]=-cO+cI;cN[2]=-cO+cH;cN[3]=0+cI;cN[4]=0+cH;cN[5]=cO+cI;cN[6]=cO+cH;cN[7]=0+cI;L.set_lineWidth(1);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDDiamondPressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(8);var cO=(cC.c.get('size').gv(cF)*1.04166666666667+4)/2;cN[0]=0+cH;cN[1]=-cO+cI;cN[2]=-cO+cH;cN[3]=0+cI;cN[4]=0+cH;cN[5]=cO+cI;cN[6]=cO+cH;cN[7]=0+cI;L.set_lineWidth(2);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledDiamondHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(8);var cO=cC.c.get('size').gv(cF)*1.04166666666667/2;cN[0]=0+cH;cN[1]=-cO+cI;cN[2]=-cO+cH;cN[3]=0+cI;cN[4]=0+cH;cN[5]=cO+cI;cN[6]=cO+cH;cN[7]=0+cI;L.set_lineWidth(1);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledDiamondPressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(8);var cO=(cC.c.get('size').gv(cF)*1.04166666666667+2)/2;cN[0]=0+cH;cN[1]=-cO+cI;cN[2]=-cO+cH;cN[3]=0+cI;cN[4]=0+cH;cN[5]=cO+cI;cN[6]=cO+cH;cN[7]=0+cI;L.set_lineWidth(2);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDTriangleHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(6);var cO=(cC.c.get('size').gv(cF)*0.895833333333333+3)/2;var cP=(cC.c.get('size').gv(cF)*0.895833333333333+6)/2;cN[0]=0+cH;cN[1]=-cP+cI;cN[2]=-cO+cH;cN[3]=cO+cI;cN[4]=cO+cH;cN[5]=cO+cI;L.set_lineWidth(1);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDTrianglePressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(6);var cO=(cC.c.get('size').gv(cF)*0.895833333333333+4)/2;var cP=(cC.c.get('size').gv(cF)*0.895833333333333+8)/2;cN[0]=0+cH;cN[1]=-cP+cI;cN[2]=-cO+cH;cN[3]=cO+cI;cN[4]=cO+cH;cN[5]=cO+cI;L.set_lineWidth(2);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledTriangleHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(6);var cO=cC.c.get('size').gv(cF)*0.916666666666667/2;cN[0]=0+cH;cN[1]=-cO+cI;cN[2]=-cO+cH;cN[3]=cO+cI;cN[4]=cO+cH;cN[5]=cO+cI;L.set_lineWidth(1);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledTrianglePressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(6);var cO=(cC.c.get('size').gv(cF)*0.916666666666667+1)/2;cN[0]=0+cH;cN[1]=-cO+cI;cN[2]=-cO+cH;cN[3]=cO+cI;cN[4]=cO+cH;cN[5]=cO+cI;L.set_lineWidth(2);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDDownTriangleHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(6);var cO=(cC.c.get('size').gv(cF)*0.895833333333333+2.5)/2;var cP=(cC.c.get('size').gv(cF)*0.895833333333333+6)/2;cN[0]=0+cH;cN[1]=cP+cI;cN[2]=-cO+cH;cN[3]=-cO+cI;cN[4]=cO+cH;cN[5]=-cO+cI;L.set_lineWidth(1);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDDownTrianglePressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(6);var cO=(cC.c.get('size').gv(cF)*0.895833333333333+4)/2;var cP=(cC.c.get('size').gv(cF)*0.895833333333333+8)/2;cN[0]=0+cH;cN[1]=cP+cI;cN[2]=-cO+cH;cN[3]=-cO+cI;cN[4]=cO+cH;cN[5]=-cO+cI;L.set_lineWidth(2);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledDownTriangleHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(6);var cO=cC.c.get('size').gv(cF)*0.916666666666667/2;cN[0]=0+cH;cN[1]=cO+cI;cN[2]=-cO+cH;cN[3]=-cO+cI;cN[4]=cO+cH;cN[5]=-cO+cI;L.set_lineWidth(1);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledDownTrianglePressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(6);var cO=(cC.c.get('size').gv(cF)*0.916666666666667+1)/2;cN[0]=0+cH;cN[1]=cO+cI;cN[2]=-cO+cH;cN[3]=-cO+cI;cN[4]=cO+cH;cN[5]=-cO+cI;L.set_lineWidth(2);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDLeftTriangleHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(6);var cO=(cC.c.get('size').gv(cF)*0.895833333333333+3)/2;var cP=(cC.c.get('size').gv(cF)*0.895833333333333+6)/2;cN[0]=-cP+cH;cN[1]=0+cI;cN[2]=cO+cH;cN[3]=-cO+cI;cN[4]=cO+cH;cN[5]=cO+cI;L.set_lineWidth(1);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDLeftTrianglePressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(6);var cO=(cC.c.get('size').gv(cF)*0.895833333333333+4)/2;var cP=(cC.c.get('size').gv(cF)*0.895833333333333+8)/2;cN[0]=-cP+cH;cN[1]=0+cI;cN[2]=cO+cH;cN[3]=-cO+cI;cN[4]=cO+cH;cN[5]=cO+cI;L.set_lineWidth(2);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledLeftTriangleHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(6);var cO=cC.c.get('size').gv(cF)*0.916666666666667/2;cN[0]=-cO+cH;cN[1]=0+cI;cN[2]=cO+cH;cN[3]=-cO+cI;cN[4]=cO+cH;cN[5]=cO+cI;L.set_lineWidth(1);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledLeftTrianglePressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(6);var cO=(cC.c.get('size').gv(cF)*0.916666666666667+1)/2;cN[0]=-cO+cH;cN[1]=0+cI;cN[2]=cO+cH;cN[3]=-cO+cI;cN[4]=cO+cH;cN[5]=cO+cI;L.set_lineWidth(2);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDRightTriangleHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(6);var cO=(cC.c.get('size').gv(cF)*0.895833333333333+3)/2;var cP=(cC.c.get('size').gv(cF)*0.895833333333333+6)/2;cN[0]=-cO+cH;cN[1]=-cO+cI;cN[2]=-cO+cH;cN[3]=cO+cI;cN[4]=cP+cH;cN[5]=0+cI;L.set_lineWidth(1);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDRightTrianglePressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(6);var cO=(cC.c.get('size').gv(cF)*0.895833333333333+4)/2;var cP=(cC.c.get('size').gv(cF)*0.895833333333333+8)/2;cN[0]=-cO+cH;cN[1]=-cO+cI;cN[2]=-cO+cH;cN[3]=cO+cI;cN[4]=cP+cH;cN[5]=0+cI;L.set_lineWidth(2);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledRightTriangleHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(6);var cO=cC.c.get('size').gv(cF)*0.916666666666667/2;cN[0]=-cO+cH;cN[1]=-cO+cI;cN[2]=-cO+cH;cN[3]=cO+cI;cN[4]=cO+cH;cN[5]=0+cI;L.set_lineWidth(1);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledRightTrianglePressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(6);var cO=(cC.c.get('size').gv(cF)*0.916666666666667+1)/2;cN[0]=-cO+cH;cN[1]=-cO+cI;cN[2]=-cO+cH;cN[3]=cO+cI;cN[4]=cO+cH;cN[5]=0+cI;L.set_lineWidth(2);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledStarHoverOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(20);var cO=cC.c.get('size').gv(cF)*1.09166666666667+2;var cP=cO*0.3877;var cQ=cO/2;cN[0]=0+cH;cN[1]=-cQ+cO*0.0246+cI;cN[2]=-cQ+cO*0.3817+cH;cN[3]=-cQ+cP+cI;cN[4]=-cQ+cH;cN[5]=-cQ+cP+cI;cN[6]=-cQ+cO*0.3088+cH;cN[7]=-cQ+cO*0.612+cI;cN[8]=-cQ+cO*0.1909+cH;cN[9]=-cQ+cO*0.9751+cI;cN[10]=0+cH;cN[11]=-cQ+cO*0.7507+cI;cN[12]=-cQ+cO*0.8085+cH;cN[13]=-cQ+cO*0.9751+cI;cN[14]=-cQ+cO*0.6905+cH;cN[15]=-cQ+cO*0.612+cI;cN[16]=cQ+cH;cN[17]=-cQ+cP+cI;cN[18]=-cQ+cO*0.6176+cH;cN[19]=-cQ+cP+cI;L.set_lineWidth(1);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.renderShapeIDFilledStarPressedOverlayImage=function(L,cC,cD,cE,cF){var cG=cC.c.get('selected_halo_color').gv(cF)['colorOverrideNone'];var cH=cD;var cI=cE;{var cJ=cC.getMarkInstanceOffsets(cF);var cK=cJ.length;for(var cL=0;cL<cK;cL++){var cM=cJ[cL];bC.$d(L,cM);{var cN=new Array(20);var cO=cC.c.get('size').gv(cF)*1.09166666666667+4;var cP=cO*0.3877;var cQ=cO/2;cN[0]=0+cH;cN[1]=-cQ+cO*0.0246+cI;cN[2]=-cQ+cO*0.3817+cH;cN[3]=-cQ+cP+cI;cN[4]=-cQ+cH;cN[5]=-cQ+cP+cI;cN[6]=-cQ+cO*0.3088+cH;cN[7]=-cQ+cO*0.612+cI;cN[8]=-cQ+cO*0.1909+cH;cN[9]=-cQ+cO*0.9751+cI;cN[10]=0+cH;cN[11]=-cQ+cO*0.7507+cI;cN[12]=-cQ+cO*0.8085+cH;cN[13]=-cQ+cO*0.9751+cI;cN[14]=-cQ+cO*0.6905+cH;cN[15]=-cQ+cO*0.612+cI;cN[16]=cQ+cH;cN[17]=-cQ+cP+cI;cN[18]=-cQ+cO*0.6176+cH;cN[19]=-cQ+cP+cI;L.set_lineWidth(2);L.set_strokeStyle(cG);L.set_lineJoin('miter');tab.CanvasRenderer.strokePath(L,cN,true,true)}if(cM!==0){L.restore()}}}};bC.$e=function(){return(BrowserSupport.BrowserSupport.IsChrome()?0.400000005960464:0)};bC.$d=function(L,cC){if(!tab.DoubleUtil.isApproximatelyEqual(cC,0)){L.save();L.translate(cC,0)}};bC.$2=function(L,cC,cD,cE,cF,cG){var cH=Math.min(cD,cF);var cI=Math.max(cD,cF);var cJ=Math.min(cE,cG);var cK=Math.max(cE,cG);var cL=bC.roundStartAndExtent(cH,cI-cH,L.minBarHeight);var cM=bC.roundStartAndExtent(cJ,cK-cJ,L.minBarWidth);tab.RectXYUtil.unionInPlace$1(cC,cM.item1,cL.item1,Math.floor(cM.item2),Math.floor(cL.item2))};bC.$3=function(L,cC,cD,cE,cF,cG,cH,cI,cJ,cK){var cL=cC.c.get('draw_border').gv(cD);var cM=(cL?1:0);var cN=((cC.markType==='text')?0:1);var cO=Math.min(cE,cF);var cP=Math.min(cG,cH);var cQ=Math.abs(cF-cE);var cR=Math.abs(cH-cG);var cS=bC.roundStartAndExtent(cP,cR,cC.minBarHeight);var cT=bC.roundStartAndExtent(cO,cQ,cC.minBarWidth);cO=cT.item1-cN;cP=cS.item1-cN;cQ=cT.item2+cK+cM+cN-1;cR=cS.item2+cK+cM+cN-1;if(cJ){cQ=cR=Math.min(cQ,cR)}if(!cC.isWrappedDomain){var cU=cC.getUserPaneRectByMark(cD);if(!tab.RectXYUtil.intersectsWith$1(cU,Math.floor(cO),Math.floor(cP),Math.floor(cQ),Math.floor(cR))){return}if(cU.x>=cO){var cV=cU.x+cK-1;cQ-=cV-cO;cO=cV}if(cU.x+cU.w<=cO+cQ){cQ=cU.x+cU.w-cO-1}if(cU.y>=cP){var cW=cU.y+cK-1;cR-=cW-cP;cP=cW}if(cU.y+cU.h<=cP+cR){cR=cU.y+cU.h-cP-1}}L.set_lineJoin('miter');bC.$a(L,cO,cP,cQ,cR,cI['colorOverrideNone'],cK,cC.minBarWidth,cC.minBarHeight,false)};bC.bBoxGeometry=function(L,cC,cD,cE){var cF={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY};switch(cE.geometryType){case'multiPolygon':{tab.CanvasRenderer.boundsMultipolygon(cE.multiPolygon,cF);break}case'multiLineString':{tab.CanvasRenderer.boundsMultilineString(cE.multiLine,cF);break}case'multiPoint':{tab.CanvasRenderer.boundsCoordinateArray(cE.multiPoint.pointsF,cF);break}default:{return}}var cG=cC.transformBounds(cF);tab.DoubleRectXYUtil.outsetRectInPlace(cG,cD,cD);tab.RectXYUtil.unionInPlace(L,tab.DoubleRectXYUtil.toEncompassingRectXY(cG))};bC.$7=function(L,cC,cD,cE){switch(cD){case'highlightedUnder':case'normalUnder':{return L.c.get('halo_color').gv(cC)[cE]}case'selectedOn':case'highlightedOn':case'normalOn':{return L.getMarkColors(cC)[cE]}case'border':{return L.getBorderColors(cC)[cE]}case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{return L.c.get('selected_halo_color').gv(cC)[cE]}}return bC.$g};bC.$4=function(L,cC,cD,cE,cF){var cG=100000;switch(L){case 0:{return{x:ss.Int32.trunc(cC),y:ss.Int32.trunc(cD),w:ss.Int32.trunc(cE),h:ss.Int32.trunc(cF)}}case 1:{cD=-100000;cF=200000;break}case 2:{cC=-100000;cE=200000;break}}var cH=bC.roundStartAndExtent(cD,cF,0);var cI=bC.roundStartAndExtent(cC,cE,0);return{x:ss.Int32.trunc(cI.item1),y:ss.Int32.trunc(cH.item1),w:ss.Int32.trunc(cI.item2),h:ss.Int32.trunc(cH.item2)}};bC.$6=function(L,cC,cD,cE,cF,cG){var cH=Math.atan2(cF-cC,cE-L);var cI=Math.cos(cH);var cJ=Math.sin(cH);cD/=2;cG/=2;var cK=cD*cJ;var cL=cG*cJ;var cM=cD*cI;var cN=cG*cI;var cO=new Array(8);cO[0]=L+cK;cO[1]=cC-cM;cO[2]=cE+cL;cO[3]=cF-cN;cO[4]=cE-cL;cO[5]=cF+cN;cO[6]=L-cK;cO[7]=cC+cM;return cO};bC.$9=function(L,cC,cD,cE,cF,cG,cH,cI){var cJ=bC.$6(cD,cE,cF,cG,cH,cI);return O.isPointInPoly(cJ,{x:L,y:cC})};bC.$0=function(L,cC,cD,cE,cF,cG,cH){var cI=bC.$6(cC,cD,cE,cF,cG,cH);var cJ=cI[0];var cK=cJ;var cL=cI[1];var cM=cL;var cN=cI.length;for(var cO=0;cO<cN;cO=cO+2){cJ=Math.min(cJ,cI[cO]);cK=Math.max(cK,cI[cO]);cL=Math.min(cL,cI[cO+1]);cM=Math.max(cM,cI[cO+1])}tab.RectXYUtil.unionInPlace(L,{x:cJ<<0,y:cL<<0,w:(cK-cJ<<0)+1,h:(cM-cL<<0)+1})};bC.$1=function(L,cC,cD,cE,cF){if(cE>cF){var cG=cE;cE=cF;cF=cG}if(cF-cE>=1){var cH=Math.ceil(2*cD);return{x:Math.floor(L-cD),y:Math.floor(cC-cD),w:cH,h:cH}}var cI=tab.CanvasRenderer.toCanvasAngle(cE);var cJ=tab.CanvasRenderer.toCanvasAngle(cF);var cK=[];cK.push({x:L,y:cC});cK.push({x:L+cD*Math.cos(cI),y:cC+cD*Math.sin(cI)});cK.push({x:L+cD*Math.cos(cJ),y:cC+cD*Math.sin(cJ)});var cL=cK;cI=O.normalizeAngle(cI);cJ=O.normalizeAngle(cJ);if(O.isInBetweenAngles(0,cI,cJ)){cL.push({x:L+cD,y:cC})}if(O.isInBetweenAngles(tab.CanvasRenderer.halfPI,cI,cJ)){cL.push({x:L,y:cC+cD})}if(O.isInBetweenAngles(tab.CanvasRenderer.onePI,cI,cJ)){cL.push({x:L-cD,y:cC})}if(O.isInBetweenAngles(tab.CanvasRenderer.oneAndHalfPI,cI,cJ)){cL.push({x:L,y:cC-cD})}var cM=Number.POSITIVE_INFINITY;var cN=Number.POSITIVE_INFINITY;var cO=Number.NEGATIVE_INFINITY;var cP=Number.NEGATIVE_INFINITY;for(var cQ=0;cQ<cL.length;cQ++){var cR=cL[cQ];cM=Math.min(cM,cR.x);cN=Math.min(cN,cR.y);cO=Math.max(cO,cR.x);cP=Math.max(cP,cR.y)}return tab.RectXYUtil.rectXYFromMinAndMax(cM,cN,cO,cP)};bC.roundStartAndExtent=function(L,cC,cD){var cE=Math.round(L+cC);L=Math.round(L);cC=Math.max(Math.abs(cE-L),cD);return{item1:L,item2:cC}};bC.$8=function(L,cC,cD,cE,cF,cG,cH,cI,cJ,cK){if(cD<0){L+=cD;cD=Math.abs(cD)}if(cE<0){cC+=cE;cE=Math.abs(cE)}var cL=bC.roundStartAndExtent(L-cF,cD+cF+cF,cH+cF+cF);var cM=bC.roundStartAndExtent(cC-cG,cE+cG+cG,cI+cG+cG);var cN={x:ss.Int32.trunc(cM.item1),y:ss.Int32.trunc(cL.item1),w:ss.Int32.trunc(cM.item2),h:ss.Int32.trunc(cL.item2)};if(tab.RectXYUtil.inRectPointF(cN,{x:cJ,y:cK})){return true}return false};bC.$b=function(L,cC,cD,cE,cF){var cG=cC.c.get('shape_id').gv(cD);if(ss.isValue(cG)){var cH=tab.ApplicationModel.get_instance().get_shapeManager();var cI=cH.getImageElement(cG);if(!ss.isValue(cI)){tab.CanvasRenderer.renderCircle(L,cC.c.get('x').gv(cD),cC.c.get('y').gv(cD),cC.c.get('size').gv(cD),bC.$7(cC,cD,cE,cF),2);return}if(!cI.complete){return}var cJ=cC.hasConstantColor;var cK=cC.c.get('size').gv(cD);var cL=cC.c.get('left').gv(cD);var cM=cC.c.get('top').gv(cD);var cN;var cO;if(cI.naturalWidth>cI.naturalHeight){var cP=cI.naturalWidth/cI.naturalHeight;cN=cK;cO=cK/cP;cM+=Math.round((cK-cO)/2)}else{var cQ=cI.naturalHeight/cI.naturalWidth;cN=cK/cQ;cO=cK;cL+=Math.round((cK-cN)/2)}cN=Math.round(cN);cO=Math.round(cO);var cR=bC.$5(cC,cD,cE,cF);cE=((cE==='normalOn'&&cF==='colorOverrideOpaque')?'selectedOn':cE);var cS=tab.ShapeManager.getCacheKey$1(cG,cE,cF,cR.toString(),cN,cO);var cT=cH.getCachedCanvas(cS);if(ss.isNullOrUndefined(cT)){var cU=null;switch(cE){case'normalUnder':case'highlightedUnder':case'selectedUnder':{cU=function(){return cd.generateSelectedUnderCustomShape(cI,cR,tab.ShapeManager.selectionBorderSize,cN,cO)};break}case'normalOn':{if(cJ){if(cF==='colorOverrideFog'){cU=function(){return cd.applyFoggingToImage(cI,cC.foggedBackgroundColor,cC.fogBlendFactor,cN,cO)}}}else{cU=function(){return cd.colorTransformImage(cI,cR,cN,cO)}}break}case'highlightedOn':{if(!cJ){cU=function(){return cd.colorTransformImage(cI,cR,cN,cO)}}break}case'selectedOn':{if(!cJ){cU=function(){cR=tab.ColorModel.fromColorModelPlusAlpha(cR,255);return cd.colorTransformImage(cI,cR,cN,cO)}}break}case'hoverOverlay':{cU=function(){return cd.generateOverlayForShape(cI,cR,tab.ShapeManager.selectionBorderSize,cN,cO)};break}case'pressedOverlay':{cU=function(){return cd.generateOverlayForShape(cI,cR,tab.ShapeManager.selectionBorderSize*2,cN,cO)};break}}if(!ss.isValue(cU)){cU=function(){return cd.generateCanvasAndPrescaleAsNeeded(cI,cN,cO)}}cT=cH.generateCachedCanvas(cS,cU)}if(ss.isValue(cT)){switch(cE){case'normalUnder':case'highlightedUnder':case'selectedUnder':case'hoverOverlay':{L.drawImage3(cT,cL-tab.ShapeManager.selectionBorderSize,cM-tab.ShapeManager.selectionBorderSize,cT.width,cT.height);break}case'pressedOverlay':{L.drawImage3(cT,cL-tab.ShapeManager.selectionBorderSize*2,cM-tab.ShapeManager.selectionBorderSize*2,cT.width,cT.height);break}case'normalOn':{L.set_alpha(cR.get_a());L.drawImage3(cT,cL,cM,cN,cO);break}default:{L.drawImage3(cT,cL,cM,cN,cO);break}}}else{}}};bC.$5=function(L,cC,cD,cE){var cF=bC.$7(L,cC,cD,cE);return tab.ColorModel.fromColorCode(cF)};bC.$a=function(L,cC,cD,cE,cF,cG,cH,cI,cJ,cK){L.set_lineWidth(cH);L.set_strokeStyle(cG);var cL=((Math.round(cH)%2===0)?0:0.5);var cM=bC.roundStartAndExtent(cD,cF,cJ);var cN=bC.roundStartAndExtent(cC,cE,cI);if(cK){var cO=Math.min(cN.item2,cM.item2);cN={item1:cN.item1,item2:cO};cM={item1:cM.item1,item2:cO}}L.strokeRect(cN.item1+cL,cM.item1+cL,cN.item2,cM.item2)};bC.$c=function(L,cC,cD,cE,cF,cG,cH,cI,cJ){L.set_shapeFillStyle(cG);{var cK=bC.roundStartAndExtent(cD,cF,cI);cD=cK.item1;cF=cK.item2;var cL=bC.roundStartAndExtent(cC,cE,cH);cC=cL.item1;cE=cL.item2}if(cJ){cE=cF=Math.min(cE,cF)}L.fillRect(cC,cD,cE,cF)};global.tab.MarksRenderer=bC;var bD=function(){};bD.__typeName='tab.NodeType';global.tab.NodeType=bD;var bE=function(){this.hasPixelGeometry=false;this.worldWidth=0;this.sceneInfo=null;this.c=new Map;this.$j=null;this.$p=null;this.$q=null;this.domainExtents=null;this.$n=0;this.paneMarks=null;this.pdMarksKey=null;this.tupleToIndexMap=new Map;this.$g=null;this.$l=null;this.markInstanceOffsets=null;this.markLabelInstanceOffsets=null;this.$m=null;this.$i=new Set;this.$o=false;this.shapeMarkStampingDecision=null;this.$h=null;this.$k=null;this.truncateLabelToCell=false;this.markCount=0;this.markType=null;this.showLabels=false;this.labelMode=null;this.fogBlendFactor=0;this.foggedBackgroundColor=null;this.forceOpaqueColors=false;this.drawBorder=false;this.isWrappedDomain=false;this.paneColumn=0;this.paneRow=0;this.$1$1=0;this.paneRect=null;this.clipCase=0;this.globalAlpha=0;this.paneDrawInfoKey=null;this.userPaneCount=0;this.hasUserPanes=false;this.customShapes=null;this.geometries=null;this.scaleMarksInX=false;this.scaleMarksInY=false;this.useCellClipForSelection=false;this.paneHasCellsX=false;this.paneHasCellsY=false;this.mapExtents=null;this.hasConstantColor=false;this.skipClipping=false;this.markWorldOffsets=null;this.markLabelWorldOffsets=null;this.$f=null;this.minBarHeight=0;this.lineInterpolation=null;this.minBarWidth=0;if(ss.isNullOrUndefined(bE.textAngleInRad)){bE.textAngleInRad=new Map;bE.textAngleInRad.set(1,0);bE.textAngleInRad.set(2,-Math.PI*0.5);bE.textAngleInRad.set(3,Math.PI*0.5)}if(ss.isNullOrUndefined(bE.$d)){bE.$d=new Map;bE.$d.set('theta',{x:0,y:1});bE.$d.set('theta1',{x:0,y:1});bE.$d.set('size',{x:0,y:4096});bE.$d.set('text_run_x',{x:0,y:4096});bE.$d.set('text_run_direction_x',{x:0,y:4096});bE.$d.set('text_run_y',{x:0,y:4096});bE.$d.set('text_run_direction_y',{x:0,y:4096});for(var L=0;L<bE.$7.length;L++){var cC=bE.$7[L];bE.$d.set(cC,{x:0,y:0})}for(var cD=0;cD<bE.$8.length;cD++){var cE=bE.$8[cD];bE.$d.set(cE,{x:0,y:0})}}if(ss.isNullOrUndefined(bE.$e)){bE.$e=[];bE.$e.push(0)}this.setDefaultLabelLookupValues()};bE.__typeName='tab.PaneDrawInfo';bE.$ctor1=function(L,cC,cD,cE,cF,cG,cH,cI){bE.call(this);if(ss.isNullOrUndefined(cD)){throw new ss.ArgumentNullException('pane')}if(ss.isNullOrUndefined(cE)){throw new ss.ArgumentNullException('paneMarks')}this.skipClipping=false;this.paneDrawInfoKey=cG;this.sceneInfo=cC;this.paneMarks=cE;this.forceOpaqueColors=false;this.pdMarksKey=L;this.paneColumn=cD.Column;this.paneRow=cD.Row;this.paneRect={x:cD.Rect[0],y:cD.Rect[1],w:cD.Rect[2],h:cD.Rect[3]};this.set_paneIndex(cI);this.domainExtents=null;var cJ=ss.isValue(cH.Viewpoint)&&ss.isValue(cH.Viewpoint.PerPaneExtents);if(cJ){this.domainExtents=bE.getPaneDomainExtents(cH.Viewpoint.PerPaneExtents,cI)}this.markCount=bE.getNumPaneItems(this.paneMarks);var cK=cH.PDMarks[L];var cL=cK.MarkLayoutData;var cM=cL.Parameters;this.markType=tab.EnumConversions.primitiveFromInt(cM.PrimitiveType);this.showLabels=ss.isValue(cK.ShowLabels)&&cK.ShowLabels;this.labelMode=(ss.isValue(cK.LabelMode)?cK.LabelMode:'mlm-default');this.set_paneFlags(cM.pane_flags);this.hasPixelGeometry=this.scaleMarksInX&&this.scaleMarksInY;this.c=bE.$3(cH.PDMarks[L],cE.get_startIndex(),this.markCount);this.hasConstantColor=!cK.has_per_mark_color_encoding;var cN=tab.ColorModel.white;if(this.c.has('background_color')){var cO=this.c.get('background_color');cN=tab.ColorModel.fromArgbInt(cO.v[(cO.c?0:0)])}this.fogBlendFactor=tab.SceneDataUtil.getFogBlendFactor(cN);this.foggedBackgroundColor=tab.SceneDataUtil.applyFogToBackgroundColor(cN,this.fogBlendFactor);this.transformColumnData(this.c);this.setUserPaneInfo(cC.sceneUserPaneInfo);this.processColors(cF);this.initStaticProperties();this.setDefaultLabelLookupValues();if(this.markType==='line'||this.markType==='area'){this.prepareLeftRight()}var cP=ss.isValue(cL.TextCompositionInputKeys)&&cL.TextCompositionInputKeys.is_text_table===true;this.parseTextInfo(cK.TextRunTable,cK.TextStyleTable,false,cP);if(ss.isValue(this.paneRect)&&ss.isValue(this.paneRect.w)&&ss.isValue(this.domainExtents)&&ss.isValue(this.domainExtents.w)&&this.domainExtents.w!==0){this.worldWidth=this.paneRect.w/this.domainExtents.w}this.clipCase=tab.SceneDataUtil.calcCellClip(this.get_paneFlags());this.mapExtents=null;if(cJ){this.mapExtents=bE.buildMapExtentsRect(cH.Viewpoint.PerPaneExtents,cI,this.domainExtents,this.paneRect)}this.setupBoundingBoxes();if(this.markType==='shape'){this.setupCustomShapePositions();this.setupShapeMarkStampingMap()}this.buildTupleLookup()};bE.getNumPaneItems=function(L){return L.get_endIndex()-L.get_startIndex()};bE.getPaneDomainExtents=function(L,cC){return tab.DoubleRectXYUtil.constructDoubleRectXY(L.DomainLeft[cC],L.DomainTop[cC],L.DomainRight[cC],L.DomainBottom[cC])};bE.buildMapExtentsRect=function(L,cC,cD,cE){if(ss.isNullOrUndefined(L.MapDomainBottom)||ss.isNullOrUndefined(L.MapDomainTop)||ss.isNullOrUndefined(L.MapDomainLeft)||ss.isNullOrUndefined(L.MapDomainRight)||L.MapDomainLeft[cC]===L.MapDomainRight[cC]||L.MapDomainBottom[cC]===L.MapDomainTop[cC]){return null}return{x:ss.Int32.trunc(bE.domainToPixelX(L.MapDomainLeft[cC],cD,cE)),y:ss.Int32.trunc(bE.domainToPixelY(L.MapDomainTop[cC],cD,cE)),w:ss.Int32.trunc(bE.domainToPixelWidth(L.MapDomainRight[cC]-L.MapDomainLeft[cC],cD,cE)),h:ss.Int32.trunc(bE.domainToPixelHeight(L.MapDomainBottom[cC]-L.MapDomainTop[cC],cD,cE))}};bE.$3=function(L,cC,cD){var cE=new Map;var cF=L;var cG=new ss.ObjectEnumerator(cF);try{while(cG.moveNext()){var cH=cG.current();if(!ss.referenceEquals(cH.value,L.Encodings)&&!ss.referenceEquals(cH.value,L.MarkLayoutData)){var cI=[cH.value];cE.set(cH.key,tab.VisualColumnIterator.create(cI))}}}finally{cG.dispose()}var cJ=L.MarkLayoutData.Parameters;var cK=new ss.ObjectEnumerator(cJ);try{while(cK.moveNext()){var cL=cK.current();var cM=[cL.value];cE.set(cL.key,tab.VisualColumnIterator.create(cM))}}finally{cK.dispose()}var cN=L.Encodings;var cO=new ss.ObjectEnumerator(cN);try{while(cO.moveNext()){var cP=cO.current();var cQ=cP.value;cE.set(cP.key,tab.VisualColumnIterator.create(Array.prototype.slice.call(cQ,cC,cC+cD)))}}finally{cO.dispose()}return cE};bE.domainToPixelX=function(L,cC,cD){return O.$5(L,cC.x,cD.x,cD.w/cC.w)};bE.domainToPixelY=function(L,cC,cD){return O.$5(L,cC.y,cD.y,cD.h/cC.h)};bE.domainToPixelWidth=function(L,cC,cD){return L/cC.w*cD.w};bE.domainToPixelHeight=function(L,cC,cD){return L/cC.h*cD.h};bE.$0=function(L,cC){var cD=new ss.StringBuilder;if(ss.keyExists(L,'font_style')&&parseInt(L['font_style'].dataValues[cC].toString())===1){cD.append('italic ')}if(ss.keyExists(L,'font_weight')&&parseInt(L['font_weight'].dataValues[cC].toString())===1){cD.append('bold ')}var cE=parseInt(L['font_size'].dataValues[cC].toString());cE=Math.max(6,cE);var cF=L['font'].dataValues[cC];cF=z.$1(cF);cD.append(cE+'pt '+cF);return cD.toString()};bE.$1=function(L,cC){var cD=new ss.StringBuilder;if(!ss.isNullOrUndefined(L.font_style)&&parseInt(L.font_style[cC].toString())===1){cD.append('italic ')}if(!ss.isNullOrUndefined(L.font_weight)&&parseInt(L.font_weight[cC].toString())===1){cD.append('bold ')}var cE=parseInt(L.font_size[cC].toString());cE=Math.max(6,cE);var cF=L.font[cC];cF=z.$1(cF);cD.append(cE+'pt '+cF);return cD.toString()};bE.getTextAngleInRad=function(L){return bE.textAngleInRad.get(L)};bE.getMarkBoundingBox=function(L,cC,cD,cE){var cF;switch(L){case'shape':{cF=bC.shapeMarkBuildMarkBound(cD,cC);break}case'bar':case'square':{cF=bC.barMarkBuildMarkBound(cD,cC);break}case'pie':{cF=bC.getPieBoundingBox(cD,cC);break}case'text':{cF=bC.textMarkBuildMarkBound(cD,cC);break}case'label':{cF=bC.getMarkLabelBoundingBox(cD,cC);break}case'line':{cF=bC.lineMarkBuildMarkBound(cD,cC);break}case'area':{cF=bC.areaMarkBuildMarkBound(cD,cC);break}case'multipolygon':{cF=bC.multipolygonMarkBuildMarkBound(cD,cC);break}default:{cF=bE.$2(cD,cC);break}}if(cD.hasUserPanes){tab.RectXYUtil.intersectInPlace(cF,cE)}return cF};bE.$2=function(L,cC){var cD=L.c.get('x').gv(cC);var cE=L.c.get('y').gv(cC);var cF=L.c.get('size').gv(cC);var cG=Math.ceil(cF);return{x:Math.floor(cD-cF/2+0.5),y:Math.floor(cE-cF/2+0.5),w:cG,h:cG}};global.tab.PaneDrawInfo=bE;var bF=function(L,cC){this.$u=null;this.$v=null;this.$w=null;tab.CanvasRenderer.call(this,L,cC);var cD=(ss.isValue(this.$w)?this.$w.colorModel:bg.defaultColors);this.$u=new z(L,cC,cD);this.$v=new bT(L,cC)};bF.__typeName='tab.PaneTable2DRenderer';bF.renderHoverOverlay=function(L,cC,cD){if(ss.isNullOrUndefined(cD)||ss.isNullOrUndefined(cC)){return}{var cE=tabBootstrap.MetricsController.createContext('RenderHoverOverlay',32,null);try{var cF=cC.getMarkIndexFromTupleId(L);switch(cC.markType){case'area':{bC.renderAreaMarkHoverOverlayImage(cD,cC,cF);break}case'bar':case'square':{bC.renderBarHoverOverlayImage(cD,cC,cF);break}case'line':{bC.renderLineMarkHoverOverlayImage(cD,cC,cF);break}case'multipolygon':{bC.renderMultipolygonMarkHoverOverlayImage(cD,cC,cF);break}case'pie':{bC.renderPieHoverOverlayImage(cD,cC,cF);break}case'shape':{bC.renderShapeHoverOverlayImage(cD,cC,cF);break}case'text':{bC.renderTextHoverOverlayImage(cD,cC,cF);break}}}finally{if(ss.isValue(cE)){cE.dispose()}}}};bF.renderPressedOverlay=function(L,cC,cD){if(ss.isNullOrUndefined(cD)||ss.isNullOrUndefined(cC)){return}{var cE=tabBootstrap.MetricsController.createContext('RenderPressedOverlay',32,null);try{var cF=cC.getMarkIndexFromTupleId(L);switch(cC.markType){case'area':{bC.renderAreaMarkPressedOverlayImage(cD,cC,cF);break}case'bar':case'square':{bC.renderBarPressedOverlayImage(cD,cC,cF);break}case'line':{bC.renderLineMarkPressedOverlayImage(cD,cC,cF);break}case'multipolygon':{bC.renderMultipolygonMarkPressedOverlayImage(cD,cC,cF);break}case'pie':{bC.renderPiePressedOverlayImage(cD,cC,cF);break}case'shape':{bC.renderShapePressedOverlayImage(cD,cC,L);break}case'text':{bC.renderTextPressedOverlayImage(cD,cC,cF);break}}}finally{if(ss.isValue(cE)){cE.dispose()}}}};bF.$1=function(L,cC,cD){L[0]=cC.x;L[1]=cC.y;L[2]=cD.x;L[3]=cD.y};bF.$0=function(L,cC,cD,cE){var cF=cD==='draw-polyline'||cD==='draw-path'||cD==='draw-rect'||cD==='draw-fill-rect';if(cC==='selected'&&cF){if(tab.ColorModel.isFullyTransparent(L)){return'rgba(0,0,0,1)'}return L.toString()}if(cC==='hover'&&cF){return L.toHoverColor().toString()}if(cC==='normal'&&ss.isValue(cE)){return tab.SceneDataUtil.fogColorTransform(L,cE.item2,cE.item1).toString()}return L.toString()};global.tab.PaneTable2DRenderer=bF;var bG=function(L,cC,cD){ss.makeGenericType(ct,[bN]).call(this,L,cC,cD);this.renderer=new bF(this.canvasElt,this.context);var cE=_.keys(L.get_vizRegionMap());for(var cF=0;cF<cE.length;cF++){var cG=cE[cF];if(!ss.contains(bN.blackListVisualParts,cG)){L.get_vizRegionMap()[cG].add_propertyChanged(ss.mkdel(this,this.onViewModelPropertyChanged))}}};bG.__typeName='tab.PaneTableCanvasView';global.tab.PaneTableCanvasView=bG;var bH=function(){this.$0=null};bH.__typeName='tab.PaneTableGeometryArgCache';global.tab.PaneTableGeometryArgCache=bH;var bI=function(L,cC,cD){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.set_regionGeometry(L);this.set_visibleGeometry(cC);this.set_geometryWithRegions(cD)};bI.__typeName='tab.PaneTableGeometryBundle';global.tab.PaneTableGeometryBundle=bI;var bJ=function(){};bJ.__typeName='tab.PaneTableGeometryComputer';bJ.computeGeometry=function(L){var cC=bJ.$5(L.geometry);var cD=new bV(cC,L.containerBox.w,L.containerBox.h);var cE=cD.getVisibleGeometry(cC,L.containerBox.w);if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){bJ.$4(cC,cE)}return new bI(cD,cE,cC)};bJ.$5=function(L){var cC={};$.extend(true,cC,L);var cD=cC.ri.length;for(var cE=0;cE<cD;cE++){cC[cC.ri[cE].r]=cC.ri[cE]}return cC};bJ.$4=function(L,cC){if(ss.isValue(L.bottomaxis)){bJ.$0(L);bJ.$2(cC)}if(ss.isValue(L.rightaxis)){bJ.$1(L);bJ.$3(cC)}};bJ.$1=function(L){var cC=[L.xheader,L.bottomaxis,L.topaxis,L.viz];for(var cD=0;cD<cC.length;cD++){var cE=cC[cD];if(ss.isValue(cE)){cE.w+=1}}};bJ.$0=function(L){var cC=[L.yheader,L.rightaxis,L.leftaxis,L.viz];for(var cD=0;cD<cC.length;cD++){var cE=cC[cD];if(ss.isValue(cE)){cE.h+=1}}};bJ.$3=function(L){var cC=[L.xheaderArea,L.bottomaxisArea,L.topaxisArea,L.vizArea];for(var cD=0;cD<cC.length;cD++){var cE=cC[cD];if(ss.isValue(cE)){cE.w+=1}}};bJ.$2=function(L){var cC=[L.yheaderArea,L.rightaxisArea,L.leftaxisArea,L.vizArea];for(var cD=0;cD<cC.length;cD++){var cE=cC[cD];if(ss.isValue(cE)){cE.h+=1}}};bJ.computeVizScrollCapabilities=function(L){var cC={containerBox:L.get_containerGeometry(),geometry:L.get_geometryModel().pm};var cD=bJ.computeGeometry(cC);var cE=cD.get_geometryWithRegions().viz;var cF=cD.get_visibleGeometry().vizArea;if(ss.isNullOrUndefined(cE)||ss.isNullOrUndefined(cF)){return 0}var cG=0;if(cE.w>cF.w){cG|=1}if(cE.h>cF.h){cG|=2}return cG};global.tab.PaneTableGeometryComputer=bJ;var bK=function(L,cC,cD){this.$W=null;this.$P=[];this.$O=new m('hover');this.$S=new m('press');this.$M=false;this.$U=null;this.$N=false;this.$K=[];this.$R=null;this.$L=null;this.$Q='normal';this.$V=false;this.$T=null;ss.makeGenericType(ct,[bN]).call(this,L,cC,'transparent');this.renderer=new bF(this.canvasElt,this.context);this.$T=new bT(this.canvasElt,this.context);this.$W=cD;var cE=$(this.canvasElt);cE.css('position','absolute');cE.css('left','0px');cE.css('top','0px')};bK.__typeName='tab.PaneTableOverlayView';bK.$0=function(L,cC){var cD=new Set;if(ss.isValue(L)&&L.length>0){tab.SetUtilities.addAll(ss.Int32).call(null,cD,L)}if(ss.isValue(cC)&&cC.length>0){var cE=new Set;tab.SetUtilities.addAll(ss.Int32).call(null,cE,cC);cD=tab.SetUtilities.symmetricDifferenceWith(ss.Int32).call(null,cD,cE)}return tab.SetUtilities.getValues(ss.Int32).call(null,cD)};global.tab.PaneTableOverlayView=bK;var bL=function(L){this.enclosingDiv=null;this.yLabel=null;this.leftAxis=null;this.rightAxis=null;this.xLabel=null;this.bottomAxis=null;this.topAxis=null;this.view=null;this.title=null;this.caption=null;this.topLeftSpacer=null;this.topRightSpacer=null;this.bottomLeftSpacer=null;this.bottomRightSpacer=null;this.borders=null;spiff.Template.call(this,L);var cC=ss.mkdel(this,this.getElementBySelector);this.enclosingDiv=cC('.tab-clip');this.yLabel=cC('.tab-tvYLabel');this.leftAxis=cC('.tab-tvLeftAxis');this.rightAxis=cC('.tab-tvRightAxis');this.xLabel=cC('.tab-tvXLabel');this.bottomAxis=cC('.tab-tvBottomAxis');this.topAxis=cC('.tab-tvTopAxis');this.view=cC('.tab-tvView');this.title=cC('.tab-tvTitle');this.caption=cC('.tab-tvCaption');this.topLeftSpacer=cC('.tab-tvTLSpacer');this.topRightSpacer=cC('.tab-tvTRSpacer');this.bottomLeftSpacer=cC('.tab-tvBLSpacer');this.bottomRightSpacer=cC('.tab-tvBRSpacer');this.borders=cC('.tvViewportBorders');this.borders.append($(bL.$0))};bL.__typeName='tab.PaneTableTemplate';global.tab.PaneTableTemplate=bL;var bM=function(L,cC){this.regions={};this.floatingZoomToolbarView=null;this.isPointerToolLocked=false;this.mapsSearchView=null;this.wasPressOverlayJustUpdated=false;this.lastVizHoverPoint=null;this.$W=[];this.$11=0;this.$10={x:0,y:0};this.$Z=0;this.$14=null;this.isAnimationOccurring=false;this.vizTooltip=null;this.$13=null;this.$N=null;this.$Q=false;this.$X=null;this.$T=0;this.$Y=null;this.$U=null;this.$V=null;this.$L=null;this.$S=false;this.$12=null;this.$M=null;this.$R=null;this.$O=new f;this.regionParts=null;this.$P=null;this.$3$1=null;this.dom=null;this.tlspacerAreaX=null;this.tlspacerAreaY=null;this.blspacerArea=null;this.titleHeight=0;this.$3$2=null;ss.makeGenericType(spiff.BaseView$1,[tab.IPaneTableViewModel]).call(this,L,cC);this.dom=cC;this.regionParts=new bO(cC);this.get_controller().setTiledViewer(this);this.$11=(new Date).getTime();this.dom.view.attr('id','view'+this.$f());this.dom.domRoot.attr('tb-test-id',tableau.format.escapeHTML(this.get_paneTableVM().get_visualId().worksheet));this.floatingZoomToolbarView=new N(this);var cD=L.get_visualModel();this.$J(cD);this.$C(cD);this.$A();this.$z();this.$x();this.$E(cD);this.get_paneTableVM().add_newPaneTable(ss.mkdel(this,this.handleNewVisual));this.get_paneTableVM().add_propertyChanged(ss.mkdel(this,this.handlePropertyChanged));this.get_paneTableVM().add_textUpdated(ss.mkdel(this,this.$i));if(ss.isValue(this.get_paneTableVM().get_mapServerModel())){this.get_paneTableVM().get_mapServerModel().add_tileSourceChanged(ss.mkdel(this,this.$h))}this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_paneTableVM().remove_newPaneTable(ss.mkdel(this,this.handleNewVisual));this.get_paneTableVM().remove_propertyChanged(ss.mkdel(this,this.handlePropertyChanged));this.get_paneTableVM().remove_textUpdated(ss.mkdel(this,this.$i));if(ss.isValue(this.get_paneTableVM().get_mapServerModel())){this.get_paneTableVM().get_mapServerModel().remove_tileSourceChanged(ss.mkdel(this,this.$h))}})));this.set_geometryBundle(new bI(null,null,null));this.$P=new bH};bM.__typeName='tab.PaneTableView';bM.addVizDragApprover=function(L){bM.removeVizDragApprover(L);bM.$7.push(L)};bM.removeVizDragApprover=function(L){ss.remove(bM.$7,L)};bM.addVizDragHandler=function(L){bM.removeVizDragHandler(L);bM.$8.push(L)};bM.addAsyncVizDragHandler=function(L){bM.removeAsyncVizDragHandler(L);bM.$4.push(L)};bM.removeVizDragHandler=function(L){ss.remove(bM.$8,L)};bM.removeAsyncVizDragHandler=function(L){ss.remove(bM.$4,L)};bM.$1=function(L,cC){if(cC==='viz'){return L[1]}return(ss.contains(bO.headerRegions,cC)?L[2]:L[0])};bM.$2=function(L,cC,cD){var cE=cC.length;for(var cF=0;cF<cE;cF++){var cG=cC[cF];if(cD.x+cG<=L){cD.x+=cG}else{cD.w=cG;return}}};bM.$3=function(L,cC,cD){var cE=cC.length;for(var cF=0;cF<cE;cF++){var cG=cC[cF];if(cD.y+cG<=L){cD.y+=cG}else{cD.h=cG;return}}};bM.findTitles=function(){return $('.tab-tvTitle')};bM.$0=function(L,cC){var cD=2;var cE={x:L.x,y:L.y};if(cC.w>4){cE=tab.RectXYUtil.horizontalShiftCoordsTowardsCenter(cE,cC,cD)}else{cE={x:cC.x+ss.Int32.div(cC.w,2),y:cE.y}}if(cC.h>4){cE=tab.RectXYUtil.verticalShiftCoordsTowardsCenter(cE,cC,cD)}else{cE={x:cE.x,y:cC.y+ss.Int32.div(cC.h,2)}}return cE};bM.guessTooltipTargetTypeFromRegion=function(L){switch(L){case'bottomaxis':case'topaxis':case'leftaxis':case'rightaxis':case'xheader':case'yheader':{return'header'}case'color':{return'legenditem'}default:{return'unspecified'}}};bM.isViewDataAccessEnabled=function(){return tab.ApplicationModel.get_instance().get_toolbar().isLegacyMenuItemEnabled('exportdata')};global.tab.PaneTableView=bM;var bN=function(L){this.$G={};this.$D=null;this.$B=null;this.$x=null;this.$z=null;this.$y=null;this.$u=null;this.$F=null;this.$w=null;this.$E=null;this.$s=null;this.$A=false;this.$C=null;this.$v=null;this.$t=null;this.borderHighlighted=false;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.deferredResizerFactory=null;this.deferredHeaderResizerManagerViewModel=null;this.deferredCellResizerManagerViewModel=null;this.$2$7=null;this.$2$8=null;spiff.BaseViewModel.call(this);this.$D=L;this.$w=[];this.$B=new bX;var cC=new ss.Lazy(ss.mkdel(this,function(){return U.createHitTestChain(this,this.$B)}));this.$x=new bp(cC,this.$B);if(ss.isValue(this.$D)){if(ss.isValue(this.$D.get_selectionsModel())){this.$C=this.$D.get_selectionsModel().createSelectionsToken()}if(ss.isValue(this.$D.get_selectionsModel().tupleSelection)){this.$D.get_selectionsModel().add_newSelections(ss.mkdel(this,this.$c))}this.$D.get_impliedSelectionModel().add_newSelection(ss.mkdel(this,this.$c));if(ss.isValue(this.$D.get_brushingsModel().tupleSelection)){this.$D.get_brushingsModel().add_newSelections(ss.mkdel(this,this.$3))}if(ss.isValue(this.$D.get_sceneModel())){this.$D.get_sceneModel().add_newSceneModel(ss.mkdel(this,this.$b));this.$b();this.$A=false}this.$D.add_newHiddenTuples(ss.mkdel(this,this.$8));this.$D.add_newFilteredTuples(ss.mkdel(this,this.$7));this.$D.add_brushingFromActionChanged(ss.mkdel(this,this.$4));this.$D.add_colorDictionaryChanged(ss.mkdel(this,this.$5));this.$D.add_vizNavigationSettingChanged(ss.mkdel(this,this.$g));this.$D.add_newVisual(ss.mkdel(this,this.$f));this.$D.add_newVisual(ss.mkdel(this,this.$a));this.$D.add_emptyHighlightFogAllChanged(ss.mkdel(this,this.$6));if(tab.FeatureFlags.isEnabled('RichTextEditingAnnotation')){this.$D.add_annotationHitBoxesChanged(ss.mkdel(this,this.$d));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$D.remove_annotationHitBoxesChanged(ss.mkdel(this,this.$d))})))}}var cD=ss.mkdel(this,function(){this.notifyPropertyChanged('font');this.$n()});this.$F=new ck('viz',(ss.isValue(this.$D)?this.$D.get_defaultMapTool():'no-tools'));this.set_floatingToolbarContainerVM(new H(this.$F));this.set_smoothTooltipsOnboardingVM(new cg);this.$l();this.$j();this.$i();this.$k();this.$h();tab.ServerFontLoader.get_instance().add_fontPreparationComplete(cD);this.disposables.add$1(new tab.CallOnDispose(function(){tab.ServerFontLoader.get_instance().remove_fontPreparationComplete(cD)}));this.$q()};bN.__typeName='tab.PaneTableViewModel';bN.updateSceneInfoFromVisualModel=function(L,cC){if(ss.isNullOrUndefined(L)||ss.isNullOrUndefined(cC)){return}var cD=cC.pm.colorDictionary;var cE=cC.pm.scene;var cF=(ss.isValue(cC.get_selectionsModel().tupleSelection)?cC.get_selectionsModel():null);var cG=(ss.isValue(cC.get_impliedSelectionModel())?cC.get_impliedSelectionModel():null);var cH=(ss.isValue(cC.get_brushingsModel().tupleSelection)?cC.get_brushingsModel():null);var cI=((ss.isValue(cC.get_sceneModel())&&ss.isValue(cC.get_sceneModel().get_referenceLines()))?cC.get_sceneModel().get_referenceLines():null);var cJ=cC.get_hiddenTuples();var cK=cC.get_filteredTuples();var cL=bN.$0(cC);L.setSceneData(cE,cF,cG,cH,cD,cJ,cK,cC.get_runtimeData(),cI,cL);if(ss.isValue(cC.get_runtimeData())){L.setLabelInfo(cC.get_runtimeData(),cE.currentPage)}L.setIsTargetOfBrushingAction(cC.get_isBrushedFromAction());L.setEmptyHighlightFogAll(cC.get_emptyHighlightFogAll())};bN.$1=function(L,cC,cD){switch(L.get_reason()){case 1:{if(cC.hasTupleSelection()){return true}return ss.isValue(cD)&&cD.get_selectionType()==='tuples'&&cD.get_ids().length>0}case 2:{return L.get_invalidateViz()||L.get_objectIds().length>0}default:{return false}}};bN.$0=function(L){var cC=L.get_geometryModel().pm;var cD=null;if(ss.isValue(cC)&&ss.isValue(cC.ri)){var cE=cC.ri;for(var cF=0;cF<cE.length;cF++){if(cE[cF].r==='viz'){cD={x:0,y:0,w:cE[cF].w,h:cE[cF].h};break}}}return cD};global.tab.PaneTableViewModel=bN;var bO=function(L){this.$1=null;this.$2=null;this.$1=L;this.$2=this.$0()};bO.__typeName='tab.PaneTableViewRegionParts';global.tab.PaneTableViewRegionParts=bO;var bP=function(L,cC){this.$k=null;this.$l=null;this.$j=null;this.$m=false;this.$p='';this.$i=null;this.$n=null;this.$o=null;cb.call(this,L,"<div><svg class='selectionShape'><path class='tvdrag_svg_marquee'></path></svg></div>",'tvdrag_svg_div');this.$k=[];this.$l=[];this.$j={};this.$m=cC||false;this.$n=null;this.$o=null};bP.__typeName='tab.PolyShapeSelector';bP.$0=function(L,cC,cD){return L>=cC&&cC>=cD||L<=cC&&cC<=cD};global.tab.PolyShapeSelector=bP;var bQ=function(){this.$0=null;this.$1=0;cc.call(this);this.$0=[];this.$1=0};bQ.__typeName='tab.PolyShapeState';global.tab.PolyShapeState=bQ;var bR=function(){this.$d=null;this.$e=null;cb.call(this,{x:0,y:0,w:0,h:0},'<div></div>','tvdrag');this.$d={x:0,y:0,w:0,h:0};this.$e={x:0,y:0,w:0,h:0}};bR.__typeName='tab.RectShapeSelector';global.tab.RectShapeSelector=bR;var bS=function(){this.$0=null;this.$1=null;cc.call(this);this.$0={x:0,y:0,w:0,h:0};this.$1={x:0,y:0,w:0,h:0}};bS.__typeName='tab.RectShapeState';global.tab.RectShapeState=bS;var bT=function(L,cC){bC.call(this,L,cC)};bT.__typeName='tab.ReferenceLinesRenderer';global.tab.ReferenceLinesRenderer=bT;var bU=function(L,cC){this.$6=null;this.$5=null;X.call(this,L);this.$6=cC};bU.__typeName='tab.RefLineHitTestLink';bU.hitTestRefLines=function(L,cC,cD){var cE=Z.createEmptyHitTestResult();var cF=[];for(var cG=0;cG<L.length;cG++){var cH=L[cG];var cI=bU.hitTestRefLine(cH.drawItems,cC,cD);if(cI.get_hitType()!==0){if(cD){cE=Z.tieBreak(cI,cE)}else{cF.push(cI)}}}return bU.$5(cD,cE,cF)};bU.$2=function(L,cC){var cD=[];for(var cE=0;cE<L.length;cE++){var cF=L[cE];if(cF.type==='clip-rect'&&cC==='refpart-clip-rect'){cD.push(cF)}else if(cF.type==='draw-group'){var cG=cF;var cH=_.find(cG.drawItems,function(cI){return cI.type==='draw-text'});if(cC==='refpart-text'&&ss.isValue(cH)){cD.push(cF)}else if(cC==='refpart-geom'&&ss.isNullOrUndefined(cH)){cD.push(cF)}}}return cD};bU.$4=function(L,cC,cD,cE,cF){var cG=tab.RectXYUtil.dialate(cD,cr.visualPartNearHitTestExpansionPixels);var cH=1;var cI=new Z.$ctor1(cF,cC,0);for(var cJ=0;cJ<L.length;cJ++){var cK=L[cJ];switch(cK.type){case'draw-pen':{var cL=cK;if(ss.isValue(cL.strokeWidth)){cH=cL.strokeWidth}break}case'draw-polyline':case'draw-fill-rect':{var cM=cK;var cN=ss.isValue(cM.useForOverlayHitTest)&&!cM.useForOverlayHitTest;var cO={x:cM.points[0],y:cM.points[1]};var cP={x:cM.points[2],y:cM.points[3]};var cQ=tab.RectXYUtil.rectXYFromCorners$1(cO,cP);if(cK.type==='draw-polyline'){if(cH<3){cQ=tab.RectXYUtil.dialate(cQ,1)}}var cR=cE&&tab.RectXYUtil.intersectsWith(cG,cQ);var cS=(!cE||cR)&&tab.RectXYUtil.intersectsWith(cD,cQ);if(cS){cI=new Z.$ctor1(cF,cC,3);if(cN){cI.doNotRenderOverlay()}return cI}if(cR){cI=new Z.$ctor1(cF,cC,2);if(cN){cI.doNotRenderOverlay()}}break}default:{break}}}return cI};bU.hitTestRefLine=function(L,cC,cD){var cE=Z.createEmptyHitTestResult();var cF=bU.$2(L,'refpart-text');cE=bU.$3(cF,6,cC,cD,cE);if(cE.get_hitType()===3){return cE}var cG=bU.$2(L,'refpart-geom');cE=bU.$3(cG,5,cC,cD,cE);return cE};bU.$3=function(L,cC,cD,cE,cF){for(var cG=L.length-1;cG>=0;cG--){var cH=L[cG];var cI=bU.$4(cH.drawItems,cC,cD,cE,cH.objectId);if(cI.get_hitType()===3){return cI}if(cI.get_hitType()===2&&cF.get_hitType()===0){cF=cI}}return cF};bU.$7=function(L,cC){if(cC.get_hitType()===3){return cC}if(cC.get_hitType()===2&&L.get_hitType()===0){return cC}return L};bU.$6=function(L,cC){var cD=Z.createEmptyHitTestResult();if(L.get_nodeType()===8){cD=bU.$1(L,cC)}if(cD.get_hitType()===2||L.get_nodeType()===9){var cE=bU.$0(L,cC);if(cE.get_hitType()===3){cD=cE}}return cD};bU.$1=function(L,cC){var cD=Z.createEmptyHitTestResult();var cE=tab.RectXYUtil.dialate({x:cC.x,y:cC.y,w:0,h:0},7);var cF=tab.RectXYUtil.intersectsWithMoreThanSharedEdge(L.get_boundingBox(),cE);if(cF){cD=new Z.$ctor1(L.get_objectId(),4,2)}return cD};bU.$0=function(L,cC){var cD=Z.createEmptyHitTestResult();var cE=tab.RectXYUtil.dialate({x:cC.x,y:cC.y,w:0,h:0},1);var cF=tab.RectXYUtil.intersectsWithMoreThanSharedEdge(L.get_boundingBox(),cE);if(cF){cD=new Z.$ctor1(L.get_objectId(),4,3)}return cD};bU.$5=function(L,cC,cD){if(L){if(cC.get_hitType()===0){return[Z.createEmptyHitTestResult()]}return[cC]}return cD};global.tab.RefLineHitTestLink=bU;var bV=function(L,cC,cD){this.$2=0;this.$1=0;this.$a=0;this.$9=0;this.$7=0;this.$8=0;this.$d=0;this.$0=0;this.$c=0;this.$b=0;this.$6=0;this.$5=0;this.$4=0;this.$3=0;if(ss.isValue(L.title)){this.$1=bV.$0(this.$1,L.title)}if(ss.isValue(L.xheader)){this.$7=L.xheader.x;this.$a=L.xheader.w;this.$1=bV.$0(this.$1,L.xheader)}if(ss.isValue(L.bottomaxis)){this.$7=L.bottomaxis.x;this.$a=L.bottomaxis.w;this.$1=bV.$0(this.$1,L.bottomaxis)}if(ss.isValue(L.topaxis)){this.$1=bV.$0(this.$1,L.topaxis)}if(ss.isValue(L.viz)){this.$7=L.viz.x;this.$a=L.viz.w;this.$1=bV.$0(this.$1,L.viz)}if(ss.isValue(L.caption)){this.$1=bV.$0(this.$1,L.caption)}if(ss.isValue(L.yheader)){this.$8=L.yheader.y;this.$9=L.yheader.h;this.$2=bV.$1(this.$2,L.yheader)}if(ss.isValue(L.leftaxis)){this.$8=L.leftaxis.y;this.$9=L.leftaxis.h;this.$2=bV.$1(this.$2,L.leftaxis)}if(ss.isValue(L.rightaxis)){this.$2=bV.$1(this.$2,L.rightaxis)}if(ss.isValue(L.viz)){this.$8=L.viz.y;this.$9=L.viz.h;this.$2=bV.$1(this.$2,L.viz)}if(this.$9>0){var cE=this.$1;if(this.$2>cC){cE+=tab.Metrics.get_scrollH()}if(cE>cD){this.$6=tab.Metrics.get_scrollW()}}if(this.$a>0&&this.$2>cC){this.$5=tab.Metrics.get_scrollH()}if(BrowserSupport.BrowserSupport.IsIE()&&this.$6>0){this.$6+=1}if(BrowserSupport.BrowserSupport.IsIE()&&this.$5>0){this.$5+=1}if(this.$9>0){var cF=this.$1-this.$9;this.$b=cD-cF-this.$5;this.$b=Math.min(this.$9,this.$b);this.$0=this.$9-this.$b}if(this.$a>0){var cG=this.$2-this.$a;this.$c=cC-cG-this.$6;this.$c=Math.min(this.$a,this.$c);this.$d=this.$a-this.$c}this.$3=Math.min(this.$1-this.$0,cD);this.$4=Math.min(this.$2-this.$d,cC);if(this.$b<0){this.$b=0}if(this.$c<0){this.$c=0}};bV.__typeName='tab.RegionGeometry';bV.$1=function(L,cC){var cD=cC.x+cC.w;return Math.max(L,cD)};bV.$0=function(L,cC){var cD=cC.y+cC.h;return Math.max(L,cD)};global.tab.RegionGeometry=bV;var bW=function(){};bW.__typeName='tab.RuntimeUIModule';bW.get_instance=function(){if(ss.isNullOrUndefined(bW.$0)){tab.ModuleManager.load(bi).call(null,[]).done(function(L){bW.$0=L})}return bW.$0};global.tab.RuntimeUIModule=bW;var bX=function(){this.$n=new Map;this.$u=new Map;this.$s=new Map;this.$r=new Map;this.$m=new Map;this.$q=false;this.$k=false;this.$p=null;this.$o=new Map;this.$l=new Map;this.$t=new Map;this.$v=null;this.scene=null;this.customShapes=null;this.brushings=null;this.selections=null;this.sceneUserPaneInfo=null;this.colorModel=null;this.$1$1=null;this.$g=0;this.$h=0;this.$1$2=null;this.customShapes=[];this.$g=0;this.$h=0};bX.__typeName='tab.SceneInfo';bX.getPaneMarksKey$1=function(L,cC,cD){return L+'_'+cC['columnIndex'.toString()]+'_'+cC['rowIndex'.toString()]+'_'+cD};bX.getPaneMarksKey=function(L){return bX.getPaneMarksKey$1(L.get_paneKey(),L.get_paneId(),L.get_paneIndex())};bX.extractCustomShapes=function(L){var cC=[];if(!ss.isValue(L)){return cC}var cD=L.get_finalDataStore();var cE=cD.PDMarks;var cF=_.keys(cE);for(var cG=0;cG<cF.length;cG++){var cH=cF[cG];var cI=cE[cH];var cJ=cI.Encodings;if(ss.isValue(cJ.shape_id)){var cK=cJ.shape_id;for(var cL=0;cL<cK.length;cL++){var cM=cK[cL];if(ss.isValue(cM)&&tab.SceneDataUtil.isCustomShape(cM)){cC.push(cM)}}}var cN=cI.MarkLayoutData;var cO=cN.Parameters;if(ss.isValue(cO.shape_id)){var cP=cO.shape_id;if(tab.SceneDataUtil.isCustomShape(cP)){cC.push(cP)}}}return cC};bX.$0=function(L,cC,cD){var cE=L.paneRect.x;var cF=L.paneRect.y;cC.forEach(function(cG,cH){tab.RectXYUtil.offsetRectXYInPlace(cG,cE,cF);cD.set(cH,cG)})};global.tab.SceneInfo=bX;var bY=function(L){bY.$0.call(this,L.xPixelOffsets,L.yPixelOffsets)};bY.__typeName='tab.SceneUserPaneInfo';bY.$0=function(L,cC){this.$3=null;this.$4=null;this.$1=false;this.$2=false;this.$0=0;this.$5=0;this.$3=L;this.$4=cC;this.$1=ss.isValue(L)&&L.length>0;this.$2=ss.isValue(cC)&&cC.length>0;this.$0=(this.$1?(L.length-1):1);this.$5=(this.$2?(cC.length-1):1)};global.tab.SceneUserPaneInfo=bY;var bZ=function(L,cC){cx.call(this,L,cC)};bZ.__typeName='tab.ServerRenderVizHitTestDebouncer';global.tab.ServerRenderVizHitTestDebouncer=bZ;var ca=function(L){this.$3=new Set;this.$2=null;this.$2=L;tab.ApplicationModel.get_instance().get_shapeManager().add_shapeLoaded(ss.mkdel(this,this.onShapeLoaded))};ca.__typeName='tab.ShapeDependencyManager';global.tab.ShapeDependencyManager=ca;var cb=function(L,cC,cD){this.$b=null;this.$a=null;this.$7=null;this.$4=null;this.$5=null;this.$9=null;this.$8={x:0,y:0};this.$6={x:0,y:0};this.$3={x:0,y:0,w:0,h:0};this.$c={x:0,y:0};this.$2={x:0,y:0};this.$b=(ss.isNullOrUndefined(L)?'0':L.w.toString());this.$a=(ss.isNullOrUndefined(L)?'0':L.h.toString());this.$7=cC;this.$4=cD};cb.__typeName='tab.ShapeSelectorBase';global.tab.ShapeSelectorBase=cb;var cc=function(){};cc.__typeName='tab.ShapeStateBase';global.tab.ShapeStateBase=cc;var cd=function(){};cd.__typeName='tab.ShapeUtil';cd.generateSelectedUnderCustomShape=function(L,cC,cD,cE,cF){var cG=cd.colorTransformImage(L,cC,cE,cF);var cH=document.createElement('canvas');var cI=cD*2;cH.width=Math.ceil(cE+cI);cH.height=Math.ceil(cF+cI);var cJ=cH.getContext('2d');cJ.drawImage(cG,0,0,cE,cF);cJ.drawImage(cG,cD,0,cE,cF);cJ.drawImage(cG,cI,0,cE,cF);cJ.drawImage(cG,cI,cD,cE,cF);cJ.drawImage(cG,cI,cI,cE,cF);cJ.drawImage(cG,cD,cI,cE,cF);cJ.drawImage(cG,0,cI,cE,cF);cJ.drawImage(cG,0,cD,cE,cF);return cH};cd.generateOverlayForShape=function(L,cC,cD,cE,cF){var cG=cd.generateSelectedUnderCustomShape(L,cC,cD,cE,cF);var cH=cG.getContext('2d');cH.globalCompositeOperation='destination-out';cH.drawImage(L,cD,cD,cE,cF);return cG};cd.colorTransformImage=function(L,cC,cD,cE){var cF=cd.generateCanvasAndPrescaleAsNeeded(L,cD,cE);var cG=cF.getContext('2d');var cH=cG.getImageData(0,0,cF.width,cF.height);var cI=cH.data.length;for(var cJ=0;cJ<cI;cJ+=4){if(cH.data[cJ+3]>0){cH.data[cJ]=cC.get_r();cH.data[cJ+1]=cC.get_g();cH.data[cJ+2]=cC.get_b()}}cG.putImageData(cH,0,0);return cF};cd.applyFoggingToImage=function(L,cC,cD,cE,cF){var cG=cd.generateCanvasAndPrescaleAsNeeded(L,cE,cF);var cH=cG.getContext('2d');var cI=cH.getImageData(0,0,cG.width,cG.height);for(var cJ=0;cJ<cI.data.length;cJ+=4){if(cI.data[cJ+3]>0){cI.data[cJ]=Math.round(cC.get_r()+cI.data[cJ]*cD);cI.data[cJ+1]=Math.round(cC.get_g()+cI.data[cJ+1]*cD);cI.data[cJ+2]=Math.round(cC.get_b()+cI.data[cJ+2]*cD)}}cH.putImageData(cI,0,0);return cG};cd.generateCanvasAndPrescaleAsNeeded=function(L,cC,cD){var cE=document.createElement('canvas');if(!ss.isValue(L)){return cE}if(L.width>cC*2&&L.height>cD*2){cE.width=Math.max(ss.Int32.div(L.naturalWidth,2),1);cE.height=Math.max(ss.Int32.div(L.naturalHeight,2),1)}else{cE.width=L.naturalWidth;cE.height=L.naturalHeight}var cF=cE.getContext('2d');cF.drawImage(L,0,0,cE.width,cE.height);return cE};global.tab.ShapeUtil=cd;var ce=function(L,cC,cD){this.$p=null;ss.makeGenericType(ct,[cp]).call(this,L,cC,(cD.get_visualModel().get_backgroundColor().get_isOpaque()?'opaque':'transparent'));var cE=(ss.isValue(cD.get_scene())?cD.get_scene().colorModel:bg.defaultColors);this.renderer=new z(this.canvasElt,this.context,cE);this.$p=cD;this.$p.add_propertyChanged(ss.mkdel(this,this.$o))};ce.__typeName='tab.SimpleRegionCanvasView';global.tab.SimpleRegionCanvasView=ce;var cf=function(L,cC){this.$3=null;this.$5=null;this.$2=false;this.$4=0;React.Component.call(this,L,cC);this.$3=ss.mkdel(this,function(cD){this.$0()});this.state={visible:L.visible,transitionDurationMs:L.transitionDurationMs,transitionDelayMs:L.transitionDelayMs,animationId:0}};cf.__typeName='tab.SmoothTooltipsOnboardingComponent';global.tab.SmoothTooltipsOnboardingComponent=cf;var cg=function(){this.$a=false;this.$9=0;this.$8=0;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this)};cg.__typeName='tab.SmoothTooltipsOnboardingViewModel';global.tab.SmoothTooltipsOnboardingViewModel=cg;var ch=function(){};ch.__typeName='tab.TickPlacement';ch.getTickPlacement=function(L,cC,cD,cE,cF){var cG=L.PerHeaderMajorTickPlacement;var cH=ch.$a(L,cD);var cI=ch.$e(cG,cD);var cJ=[];switch(cH){case 3:{var cK=ch.$8(cG,cD);var cL=ch.$9(L,cK);cJ=(cF?ch.$j(cC,cL,cE,cI):ch.$k(cC,cL,cE,cI));break}case 2:{cJ=ch.$2(cC,cG,cD,cE,cF,cI);break}case 1:{if(cF){var cM=ch.$5(cC,cG.Spacing[cD],false);var cN=ch.$5(cC,cG.Origin[cD],cE);cJ=ch.$h(cC,cM,cN,cI)}else{var cO=ch.$6(cC,cG.Spacing[cD],false);var cP=ch.$6(cC,cG.Origin[cD],cE);cJ=ch.$i(cC,cO,cP,cI)}break}default:{break}}return cJ};ch.$c=function(L){return!ss.isNullOrUndefined(L.EncodedTickPositions)&&!ss.isNullOrUndefined(L.PerHeaderMajorTickPlacement.EncodedTickPositionsIndex)};ch.$b=function(L){return!ss.isNullOrUndefined(L.DateTimeOrigin)&&!ss.isNullOrUndefined(L.DateTimeSpacing)&&!ss.isNullOrUndefined(L.DateTimeSpacingUnit)&&!ss.isNullOrUndefined(L.EncodingMin)&&!ss.isNullOrUndefined(L.EncodingMax)};ch.$d=function(L){return!ss.isNullOrUndefined(L.Spacing)&&!ss.isNullOrUndefined(L.Origin)};ch.$f=function(L,cC,cD){return!cD&&(Math.floor(cC)===L.x||Math.floor(cC)===L.x+L.w)};ch.$g=function(L,cC,cD){return!cD&&(Math.floor(cC)===L.y||Math.floor(cC)===L.y+L.h)};ch.$e=function(L,cC){return(!ss.isNullOrUndefined(L.IncludeViewEdges)?L.IncludeViewEdges[cC]:true)};ch.$8=function(L,cC){return L.EncodedTickPositionsIndex[cC]};ch.$9=function(L,cC){return L.EncodedTickPositions[cC]};ch.$4=function(L,cC){return(cC?(1-L):L)};ch.$5=function(L,cC,cD){return ch.$4(cC,cD)*L.w};ch.$6=function(L,cC,cD){return ch.$4(cC,cD)*L.h};ch.$0=function(L,cC,cD){return Math.floor(L.x+ch.$5(L,cC,cD))};ch.$1=function(L,cC,cD){return Math.floor(L.y+L.h-ch.$6(L,cC,cD))};ch.$7=function(L){return L+'Z'};ch.$3=function(L,cC,cD){var cE=tab.DateUtil.dateTimeAsOleDate(cD)-tab.DateUtil.dateTimeAsOleDate(cC);return(tab.DateUtil.dateTimeAsOleDate(L)-tab.DateUtil.dateTimeAsOleDate(cC))/cE};ch.$a=function(L,cC){var cD=L.PerHeaderMajorTickPlacement;if(ch.$c(L)){var cE=ch.$8(cD,cC);if(cE>=0&&cE<=2147483647){return 3}}if(ch.$b(cD)){var cF=cD.DateTimeSpacing[cC];if(cF>0){return 2}}if(ch.$d(cD)){var cG=cD.Spacing[cC];if(cG>1.40129846432482E-45){return 1}}return 0};ch.$h=function(L,cC,cD,cE){cC=((cC<2)?2:cC);var cF=cD%cC;var cG=L.x+cF;var cH=L.x+L.w;var cI=[];do{if(!ch.$f(L,cG,cE)){cI.push(ss.round(cG))}cG+=cC}while(ss.round(cG)<cH);return cI};ch.$i=function(L,cC,cD,cE){cC=((cC<2)?2:cC);var cF=cD%cC;var cG=L.y+L.h-cF;var cH=[];do{if(!ch.$g(L,cG,cE)){cH.push(ss.round(cG))}cG-=cC}while(ss.round(cG)>=L.y);return cH};ch.$j=function(L,cC,cD,cE){var cF=[];for(var cG=0;cG<cC.length;cG++){var cH=cC[cG];var cI=ch.$0(L,cH,cD);if(L.x<=cI&&L.x+L.w>=cI&&!ch.$f(L,cI,cE)){cF.push(cI)}}return cF};ch.$k=function(L,cC,cD,cE){var cF=[];for(var cG=0;cG<cC.length;cG++){var cH=cC[cG];var cI=ch.$1(L,cH,cD);if(L.y<=cI&&L.y+L.h>=cI&&!ch.$g(L,cI,cE)){cF.push(cI)}}return cF};ch.$2=function(L,cC,cD,cE,cF,cG){var cH=new Date(ch.$7(cC.DateTimeOrigin[cD]));var cI=new Date(ch.$7(cC.EncodingMin[cD]));var cJ=new Date(ch.$7(cC.EncodingMax[cD]));var cK=tab.EnumConversions.datePeriodTypeFromInt(cC.DateTimeSpacingUnit[cD]);var cL=cC.DateTimeSpacing[cD];var cM=cH;var cN=[];do{if(cI<=cM&&cJ>cM){var cO=ch.$3(cM,cI,cJ);if(cF){var cP=ch.$0(L,cO,cE);if(!ch.$f(L,cP,cG)){cN.push(cP)}}else{var cQ=ch.$1(L,cO,cE);if(!ch.$g(L,cQ,cG)){cN.push(cQ)}}}cM=tab.DateUtil.adjustDateByPeriodInUTC(cM,cK,cL)}while(cM<cJ);return cN};global.tab.TickPlacement=ch;var ci=function(L,cC,cD,cE,cF,cG){this.$7=null;this.backgroundMap=ci.$0();this.disposables=new tab.DisposableHolder;this.allowPanZoomActions=null;this.connectNode=null;this.domPanZoomRect=null;this.domDragImage=null;this.domDragMask=null;this.regionContent=new C;this.scroller=null;this.isScrolling=false;this.wasScrolling=false;this.waitingOnPanZoomServerResponse=null;this.paneTableViewModel=null;this.backgroundDiv=null;this.resetIsWaitingOnTransition=false;this.$8=null;this.$b=null;this.$a=null;this.$9=null;this.$6=false;this.$5=false;this.$d=null;this.$e=null;this.$c=null;this.$8=L;this.connectNode=$(cC);this.backgroundDiv=this.connectNode.find('.tvBackgroundContainer');this.$7=this.connectNode.find('.tvimagesContainer');this.allowPanZoomActions=cD;this.domPanZoomRect=new bR;this.$a=new bR;this.$b=cE;this.paneTableViewModel=cF;this.waitingOnPanZoomServerResponse='waitingOnServer';this.$c=cG;if(this.$8==='viz'){this.makeDomDrag()}this.get_toolModeViewModel().add_toolbarToolModeUpdated(ss.mkdel(this,this.updateForToolMode));this.$d=new cq};ci.__typeName='tab.TiledViewerRegion';ci.getCanvasElement=function(L){if(tab.FeatureFlags.isEnabled('MapboxVector')){return L.find('.tabCanvas').get(0)}return L.find('canvas').get(0)};ci.$0=function(){if(tab.FeatureFlags.isEnabled('MapboxVector')){return new bt}return new bl};global.tab.TiledViewerRegion=ci;var cj=function(L,cC,cD,cE,cF){this.$c=null;this.$d=null;this.$f=null;this.$k=null;this.$h=null;this.$i=null;this.$o=0;this.$p=0;this.$m=null;this.$b=null;this.$n=0;this.$g=null;this.$r=null;this.$q=0;this.$j=0;this.$l=false;this.$e=false;this.$1$1=null;this.$g=cE;this.$c=L;this.$k=cC;this.$r=cD;this.$l=cF;this.$f={x:0,y:0,w:0,h:0,r:''};this.$m={w:0,h:0};this.$d=new B;this.$d.add_imageLoaded(ss.mkdel(this,this.$5));this.$d.add_imageTimedOut(ss.mkdel(this,this.$6));this.$d.add_complete(ss.mkdel(this,this.$7));this.$i=[];this.$h=$('.tvimagesContainer',this.$c);this.$e=true};cj.__typeName='tab.TiledWindow';global.tab.TiledWindow=cj;var ck=function(L,cC){this.$5=null;this.$8=null;this.$7=false;this.$6=null;this.$2$1=null;this.$2$2=null;this.defaultPointerToolMode=null;this.currentModifierKeyToolMode=null;this.isDeferringModeChanges=false;spiff.BaseViewModel.call(this);this.set_isAppendMode(false);this.isDeferringModeChanges=false;if(L==='viz'){this.currentModifierKeyToolMode='no-tools'}this.setLockedPointerToolMode(cC)};ck.__typeName='tab.ToolModeViewModel';global.tab.ToolModeViewModel=ck;var cl=function(L,cC){tab.TooltipBaseMode.call(this,'disabled',L,cC)};cl.__typeName='tab.TooltipDisabledMode';global.tab.TooltipDisabledMode=cl;var cm=function(L,cC,cD,cE){this.$L=null;this.$N=null;this.$M=null;this.$K=null;this.$J=false;this.$I=false;tab.TooltipBaseMode.call(this,'smooth',L,cC);var cF=this.get_currentBehavior();cF.attach();cF.add_onMouseStop(ss.mkdel(this,this.$E));this.$K=cD;this.$I=cE;this.$L=cm.$0();this.$N=cm.$2();this.$M=cm.$1();this.$z();this.get_tooltip().add_prePosition(ss.mkdel(this,this.prepareForPositioning));this.get_tooltip().add_positionCalculated(ss.mkdel(this,this.handleUbertipButtons));this.get_tooltip().add_showed(ss.mkdel(this,this.$G));this.get_tooltip().add_closed(ss.mkdel(this,this.$F))};cm.__typeName='tab.TooltipResponsiveMode';cm.$0=function(){cm.$3++;return'mousemove.TooltipResponsiveMode'+cm.$3};cm.$2=function(){cm.$3++;return'touchmove.TooltipResponsiveMode'+cm.$3};cm.$1=function(){cm.$3++;return'mouseout.TooltipResponsiveMode'+cm.$3};global.tab.TooltipResponsiveMode=cm;var cn=function(L){this.$1=null;X.call(this,L)};cn.__typeName='tab.TrendLineHitTestLink';cn.hitTestTrendLines=function(L,cC,cD){var cE=Z.createEmptyHitTestResult();var cF=[];for(var cG=L.length-1;cG>=0;cG--){var cH=cn.$0(L[cG],cC,cD);if(cH.get_hitType()===3){if(cD){return[cH]}else{cF.push(cH)}}if(cD&&cH.get_hitType()===2&&cE.get_hitType()===0){cE=cH}}if(cD){if(cE.get_hitType()===0){return[Z.createEmptyHitTestResult()]}return[cE]}return cF};cn.$0=function(L,cC,cD){var cE=Z.createEmptyHitTestResult();if(cD){var cF=tab.RectXYUtil.dialate(cC,cr.visualPartNearHitTestExpansionPixels);var cG=cn.$1(L,cF);if(ss.isValue(cG)){cE=new Z.$ctor1(ss.unbox(cG),3,2)}}if(cE.get_hitType()===2||!cD){var cH=cn.$1(L,cC);if(ss.isValue(cH)){cE=new Z.$ctor1(ss.unbox(cH),3,3)}}return cE};cn.$1=function(L,cC){var cD=new Array;cD.push(L);while(cD.length>0){var cE=cD.pop();var cF=tab.RectXYUtil.intersectsWith(cE.get_boundingBox(),cC);if(cF){if(cE.get_nodeType()===4||cE.get_nodeType()===0){var cG=cE.get_children();cG.forEach(function(cH){cD.push(cH)})}else if(cE.get_nodeType()===5){return cE.get_objectId()}}}return null};global.tab.TrendLineHitTestLink=cn;var co=function(L,cC){this.$g=null;this.$b=0;this.$d=null;this.$e=null;this.$c=null;this.$f=null;this.$h=null;this.$g=L;var cD=L.$1;var cE=L.$2;var cF=L.$5*L.$0;this.$d=new Array(cF+1);this.$h=new Array(cF);this.$c=(cD?new Array(cF):null);this.$f=(cE?new Array(cF):null);this.$e=new Array(cC.markCount);this.$b=this.$2(cC)};co.__typeName='tab.UserPaneInfo';global.tab.UserPaneInfo=co;var cp=function(L,cC,cD,cE,cF){this.$6=null;this.$a=null;this.$8=null;this.$9=null;this.$3=null;this.$5=null;this.$4=null;this.$7=null;spiff.BaseViewModel.call(this);this.$6=L;this.$a=cC;this.$8=cD;this.$6.add_newVisualList(ss.mkdel(this,this.handleModelChange));if(ss.isValue(cE)){this.$9=cE.nodeSelection;this.$9.add_newSelection(ss.mkdel(this,this.$2))}if(ss.isValue(cF)){this.$3=cF.nodeSelection;this.$3.add_newSelection(ss.mkdel(this,this.$2))}if(ss.isValue(cE)||ss.isValue(cF)){this.$2()}var cG=ss.mkdel(this,function(){this.notifyPropertyChanged('font')});tab.ServerFontLoader.get_instance().add_fontPreparationComplete(cG);this.disposables.add$1(new tab.CallOnDispose(function(){tab.ServerFontLoader.get_instance().remove_fontPreparationComplete(cG)}))};cp.__typeName='tab.VisualListViewModel';global.tab.VisualListViewModel=cp;var cq=function(){};cq.__typeName='tab.VisualObjectBoundsComputerAndHitTester';global.tab.VisualObjectBoundsComputerAndHitTester=cq;var cr=function(){};cr.__typeName='tab.VisualPartsHitTest';global.tab.VisualPartsHitTest=cr;var cs=function(){};cs.__typeName='tab.VisualPartTargetState';global.tab.VisualPartTargetState=cs;var ct=function(L){var cC=function(cD,cE,cF){this.renderer=null;this.completeDocSize={w:0,h:0};this.containers=null;this.$n=null;this.$4$1=null;ss.makeGenericType(w,[L]).call(this,cD,cF);this.$n=cE;this.containers=$('.tvimagesContainer',this.$n);this.add_sizeChange(ss.mkdel(this,this.$l))};ss.registerGenericClassInstance(cC,ct,[L],{add_loadComplete:function(cD){this.$4$1=ss.delegateCombine(this.$4$1,cD)},remove_loadComplete:function(cD){this.$4$1=ss.delegateRemove(this.$4$1,cD)},get_docSize:function(){return this.completeDocSize},get_hasContent:function(){return true},destroy:function(){this.dispose()},dispose:function(){this.remove_sizeChange(ss.mkdel(this,this.$l));this.renderer=null;ss.makeGenericType(w,[L]).prototype.dispose.call(this)},refreshImages:function(cD){},reset:function(cD,cE){if(ss.isNullOrUndefined(cD)){return}var cF={w:cD.w,h:cD.h};var cG=ss.isValue(this.completeDocSize)&&!tab.SizeUtil.equals(cF,this.completeDocSize);this.completeDocSize=cF;this.containers.width(cD.w);this.containers.height(cD.h);if(cG){this.$m()}},copyContent:function(cD){cD.drawImage1(this.canvasElt,0,0)},redraw:function(){if(!this.get_needsRedraw()||ss.isNullOrUndefined(this.renderer)){return}this.renderer.reset();this.context.save();this.context.setClip(this.$k());tab.CanvasUtil.scaleCanvasDrawing(this.context,this.get_pixelRatio());this.renderer.set_renderOffset(this.scrollOffset);this.performRender();this.context.restore();this.postRenderFinalPass();this.clearDirty();this.raiseLoadComplete()},redrawFinished:function(){},raiseLoadComplete:function(){if(ss.isValue(this.$4$1)){this.$4$1(this,ss.EventArgs.Empty)}},onViewModelPropertyChanged:function(cD,cE){this.invalidate(false)},performRender:null,postRenderFinalPass:null,$k:function(){var cD=this.get_pixelRatio();var cE=this.get_dirtyRect();var cF=cE.x*cD;var cG=cE.y*cD;var cH=(cE.x+cE.w)*cD;var cI=(cE.y+cE.h)*cD;var cJ=Math.floor(cF);var cK=Math.floor(cG);return{x:cJ,y:cK,w:Math.ceil(cH)-cJ,h:Math.ceil(cI)-cK}},$l:function(){this.$m()},$m:function(){var cD=this.get_effectiveViewSize();var cE={x:Math.min(this.completeDocSize.w-cD.w,this.scrollOffset.x),y:Math.min(this.completeDocSize.h-cD.h,this.scrollOffset.y)};cE.x=Math.max(0,cE.x);cE.y=Math.max(0,cE.y);this.set_scrollPos(cE)}},function(){return ss.makeGenericType(w,[L])},function(){return[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[L]),spiff.IScrollable,bh]});return cC};ct.__typeName='tab.VisualRegionCanvasView$1';ss.initGenericClass(ct,a,1);global.tab.VisualRegionCanvasView$1=ct;var cu=function(L,cC,cD){cu.$ctor1.call(this,L.get_id(),L.get_hitObjectType(),cC,cD)};cu.__typeName='tab.VizContextMenuItemsHandler';cu.$ctor1=function(L,cC,cD,cE){this.$0=0;this.$2=0;this.$3=null;this.$1=null;this.$0=L;this.$3=cE;this.$2=cC;this.$1=cD};global.tab.VizContextMenuItemsHandler=cu;var cv=function(L){this.isHidden=false;this.location=null;this.vizOverlayDiv=null;this.$8=null;this.$7=null;this.$9=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.vizOverlayDiv=L;this.isHidden=true;this.$9={x:0,y:0}};cv.__typeName='tab.VizContextMenuViewModel';global.tab.VizContextMenuViewModel=cv;var cw=function(L,cC,cD,cE,cF,cG,cH){this.$0=null;this.$1$1=0;this.$1$2=null;this.$1$3=0;this.$1$4=0;this.$1$5=0;this.$1$6=null;this.$1$7=null;this.set_instanceId(++cw.$0);this.set_region(L);this.set_paneId(cC);this.set_paneColumnIndex(cD);this.set_paneRowIndex(cE);this.set_regionCoordinates(cF);this.set_pageCoordinates(cG);this.$0=cH};cw.__typeName='tab.VizHitInfo';global.tab.VizHitInfo=cw;var cx=function(L,cC){this.$0=null;this.$1=null;this.paneTable=null;this.region=null;this.lastEvent=null;this.$1$1=null;tab.Param.verifyValue(L,'paneTable');tab.Param.verifyValue(cC,'region');this.paneTable=L;this.region=cC;this.$1=new tab.Debouncer(ss.mkdel(this,function(){var cD=this.region.toLocalCoordsEvent(this.lastEvent,false);var cE=tab.PointUtil.add(cD,this.region.getLocalOffsetPoint(false));this.hitTest(cD,cE)}),250)};cx.__typeName='tab.VizHitTestDebouncer';global.tab.VizHitTestDebouncer=cx;var cy=function(){};cy.__typeName='tab.VizZoneFactory';global.tab.VizZoneFactory=cy;var cz=function(L,cC){this.$1=0;this.$0=null;ss.EventArgs.call(this);this.$1=L;this.$0=cC};cz.__typeName='tab.WorkerDoneEventArgs';global.tab.WorkerDoneEventArgs=cz;var cA=function(L){this.$0=0;ss.EventArgs.call(this);this.$0=L};cA.__typeName='tab.WorkerTimeoutEventArgs';global.tab.WorkerTimeoutEventArgs=cA;var cB=function(){};cB.__typeName='tab.ZoomComputer';cB.resolveDesiredZoom=function(L,cC){if(!L.get_hasPresModel()){return cC}var cD=ss.coalesce(L.get_intermediateTileLevels(),1);var cE=Math.floor(cC*cD)/cD;cE+=Math.log(ss.coalesce(L.get_maxStretch(),1))/Math.LN2;var cF=Math.ceil(cC*cD)/cD;cF+=Math.log(ss.coalesce(L.get_minShrink(),1))/Math.LN2;return((cC+0.05<cF)?Math.min(cE,cC):Math.max(cF,cC))};cB.resolveDesiredScale=function(L,cC){var cD=Math.log(cC)/Math.LN2;var cE=cB.resolveDesiredZoom(L.get_rasterMapSourceModel(),L.get_requestZoom()+cD);var cF=cE-L.get_requestZoom();var cG=Math.pow(2,cF);return cG};cB.incrementZoom=function(L,cC){var cD=L+cC;return cD};cB.combineTileZoomAndStretch=function(L,cC){return L+Math.log(cC)/Math.LN2};global.tab.ZoomComputer=cB;ss.initClass(b,a,{});ss.initClass(c,a,{});ss.initClass(d,a,{$4:function(){return this.$8.get(0)},$5:function(){return tab.DoubleUtil.roundToInt(this.$8.width())},$3:function(L){var cC=ss.mkdict(['backgroundColor',L.get_mapBGFillColor()]);this.$6.css(cC);this.$7.css(cC);var cD=ss.mkdict(['backgroundColor',L.get_mapHolderBackgroundColor()]);this.$8.css(cD)},$1:function(L,cC){var cD=ss.mkdict(['width',L+'px']);if(cC){this.$6.addClass('leaflet-zoom-anim').addClass('leaflet-zoom-animated');this.$7.addClass('leaflet-zoom-anim').addClass('leaflet-zoom-animated')}this.$6.css(cD);this.$7.css(cD)},$2:function(){this.$6.removeClass('leaflet-zoom-anim').removeClass('leaflet-zoom-animated');this.$7.removeClass('leaflet-zoom-anim').removeClass('leaflet-zoom-animated')}},spiff.Template,[ss.IDisposable]);ss.initClass(e,a,{$0:function(){return this.$1$1},$1:function(L){this.$1$1=L},$2:function(){return this.$1$2},$3:function(L){this.$1$2=L}});ss.initClass(f,a,{$1:function(){this.$3=[]},$2:function(L,cC,cD){if(ss.isValue(cD)){var cE=f.$0(L,'canvas');var cF=tab.RenderUtil.calculatePixelRatio();var cG=L[0];tab.CanvasUtil.setCanvasSizeAndDensify(cE,cF,{w:cG.offsetWidth,h:cG.offsetHeight})}else if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){f.$0(L,'div')}else{f.$0(L,'img');this.$3.push({name:cC,node:L})}},$0:function(L,cC,cD){if(this.$3.length>0){var cE=this.$3.length;for(var cF=0;cF<cE;cF++){var cG=this.$3[cF].node;if(ss.isValue(cG)){var cH=cC.formatRegionTileURL(L,this.$3[cF].name,cD);var cI=cG.children().first();var cJ=tab.RenderUtil.calculatePixelRatio(false);if(tab.DoubleUtil.isGreaterThanAndNotApproximatelyEqual(cJ,1)){cI.css('width',cG[0].offsetWidth+'px')}cI.attr('src',cH)}}}}});ss.initClass(g,a,{$2:function(){return this.$4},$3:function(L){this.$4=L},$0:function(L,cC){if(!ss.isValue(this.$4)){return false}return ss.referenceEquals(this.$4.getAttribute('src'),L)&&this.$1===cC}});ss.initEnum(h,a,{$3:0,$1:1,$0:2,$2:3});ss.initClass(i,a,{$1:function(){return this.$5},$0:function(){return this.$4}});ss.initClass(j,a,{$0:function(L){L.set_alpha(this.$1);L.set_lineJoin(this.$4);L.set_lineCap(this.$3);L.set_linePattern(this.$5);L.set_strokeStyle(this.$8);L.set_lineWidth(this.$6);L.set_textAngle(this.$a);L.set_font(this.$2);L.set_shapeFillStyle(this.$7);L.set_textFillStyle(this.$b);L.set_textAlign(this.$9)}});ss.initClass(k,a,{});ss.initInterface(bf,a,{get_template:null,get_mapsSearchViewRootElement:null});ss.initClass(l,a,{get_template:function(){return this},get_mapsSearchViewRootElement:function(){return this.$1}},spiff.Template,[ss.IDisposable,bf]);ss.initClass(m,a,{$7:function(){return this.$c},$4:function(){return this.$9},$5:function(){if(!this.$4()){}return this.$a},$6:function(){return(this.$9?this.$b:null)},$3:function(L,cC,cD){this.$a=L;this.$8=cC;this.$9=true;this.$b=cD},$0:function(){this.$9=false;this.$b=null},$2:function(L,cC){return this.$1(L,cC)&&this.$9},$1:function(L,cC){return this.$a===L&&this.$8===cC}});ss.initClass(n,a,{$d:function(L){this.$1$1=ss.delegateCombine(this.$1$1,L)},$e:function(L){this.$1$1=ss.delegateRemove(this.$1$1,L)},$f:function(L){this.$1$2=ss.delegateCombine(this.$1$2,L)},$g:function(L){this.$1$2=ss.delegateRemove(this.$1$2,L)},$8:function(){return!this.$9},$1:function(){this.$0()},$7:function(L){if(ss.isNullOrUndefined(L)){this.$5();return}if(this.$c!==-1){window.clearTimeout(this.$c);this.$c=-1}this.$b=L;this.$9=false;this.$0();var cC=true;var cD=L.get_imageNode();var cE=$(cD);if(ss.isNullOrUndefined(cD)){var cF=document.createElement('img');L.set_imageNode(cF);cD=cF;cE=$(cD)}else{cC=tab.DoubleUtil.roundToInt(cE.width())!==L.get_bounds().w||tab.DoubleUtil.roundToInt(cE.height())!==L.get_bounds().h;cD.style.visibility=''}if(cC){$(cD).css(ss.mkdict(['left',L.get_bounds().l+'px','top',L.get_bounds().t+'px']))}cE.on('load',ss.mkdel(this,this.$3));cE.on('error',ss.mkdel(this,this.$2));cE.on('abort',ss.mkdel(this,this.$3));this.$c=window.setTimeout(ss.mkdel(this,function(){this.$4()}),600000);var cG=cE.attr('src');if(!BrowserSupport.BrowserSupport.ImageLoadIsSynchronous()){cE.attr('src',L.get_src())}else{window.setTimeout(function(){cE.attr('src',L.get_src())},0)}if(ss.referenceEquals(L.get_src(),cG)&&!BrowserSupport.BrowserSupport.RaisesEventOnImageReassignment()){window.setTimeout(ss.mkdel(this,function(){this.$3(null)}),0)}},$0:function(){if(ss.isValue(this.$b)&&ss.isValue(this.$b.get_imageNode())){var L=$(this.$b.get_imageNode());if(ss.isValue(L)){L.on('load',ss.mkdel(this,this.$3));L.on('error',ss.mkdel(this,this.$3));L.on('abort',ss.mkdel(this,this.$3))}}},$2:function(L){if(ss.isValue(L.currentTarget)){L.currentTarget.style.visibility='none'}this.$3(L)},$3:function(L){window.clearTimeout(this.$c);this.$c=-1;if(this.$9){return}this.$9=true;this.$5()},$4:function(){this.$9=true;this.$c=-1;this.$0();this.$6()},$5:function(){if(ss.isValue(this.$1$1)){this.$1$1(this,new cz(this.$a,this.$b))}},$6:function(){if(ss.isValue(this.$1$2)){this.$1$2(this,new cA(this.$a))}}});ss.initClass(o,a,{$0:function(){return this.$1$1},$1:function(L){this.$1$1=L},$2:function(){return this.$1$2},$3:function(L){this.$1$2=L}});ss.initClass(p,a,{get_dragObjectDictionary:function(){if(ss.isNullOrUndefined(this.dragDictionary)){this.dragDictionary=ss.mkdict([s.movePointTargetHandler,2,s.resizeHandlerPre+s.SE,9,s.resizeHandlerPre+s.NE,7,s.resizeHandlerPre+s.SW,10,s.resizeHandlerPre+s.NW,8,s.resizeHandlerPre+s.n,3,s.resizeHandlerPre+s.s,5,s.resizeHandlerPre+s.e,4,s.resizeHandlerPre+s.w,6])}return this.dragDictionary},get_isDragging:function(){return this.dragType!==0&&ss.isValue(this.get_currentAnnotation())},get_isResizing:function(){return this.get_isDragging()&&this.dragType!==1&&this.dragType!==2&&(tab.FeatureFlags.isEnabled('AnnotationAreaResize')||tab.FeatureFlags.isEnabled('AnnotationMarkAndPointResize'))},get_isMovingPointTarget:function(){return this.get_isDragging()&&this.dragType===2&&tab.FeatureFlags.isEnabled('AnnotationMovePointTarget')},get_currentAnnotation:function(){return this.$2},set_currentAnnotation:function(L){this.$2=L},get_domRegion:function(){return this.vizRegion},set_domRegion:function(L){this.vizRegion=L},get_validRegion:function(){return this.convertToAbsolute$1({x:0,y:0,w:this.get_domRegion().w-2,h:this.get_domRegion().h-2})},get_snappingRegion:function(){var L=(ss.isValue(this.get_currentAnnotation())?this.get_currentAnnotation().areaRect.w:0);var cC=(ss.isValue(this.get_currentAnnotation())?this.get_currentAnnotation().areaRect.h:0);var cD=this.get_validRegion();cD.w=cD.w-L;cD.h=cD.h-cC;return cD},getShadow:function(L){if(!this.get_isDragging()||this.get_isMovingPointTarget()){return null}if(this.get_isResizing()){return this.convertToRelative$1(this.generateNewAnnotationRegion(this.convertToAbsolute(L)))}var cC=tab.PointUtil.subtract(L,this.dragOffset);var cD=this.get_snappingRegion();cD=this.convertToRelative$1(cD);var cE=tab.RectXYUtil.clampCoords(cC,cD);return{x:cE.x,y:cE.y,w:this.get_currentAnnotation().areaRect.w,h:this.get_currentAnnotation().areaRect.h}},canMoveAnnotation:function(L,cC){return L.get_hitObjectType()===2&&tab.FeatureFlags.isEnabled('AnnotationMove')&&ss.keyExists(cC,L.get_id())},onHandlerMouseDown:function(L,cC){this.dragType=this.get_dragObjectDictionary()[L];this.set_currentAnnotation(cC)},canDrag:function(L,cC){return tsConfig.is_authoring&&tsConfig.current_sheet_type!=='story'&&ss.isValue(cC)&&(this.get_isResizing()||this.canMoveAnnotation(L,cC)||this.get_isMovingPointTarget())},clearDrag:function(){this.dragOffset.x=0;this.dragOffset.y=0;this.set_currentAnnotation(null);this.dragType=0},dragStarted:function(L,cC,cD){if(this.canDrag(L,cC)){if(!this.get_isResizing()&&!this.get_isMovingPointTarget()&&this.canMoveAnnotation(L,cC)){this.dragType=1;this.set_currentAnnotation(cC[L.get_id()]);this.$1(cD,this.get_currentAnnotation())}return true}this.clearDrag();return false},$1:function(L,cC){this.dragOffset.x=L.x-cC.areaRect.x;this.dragOffset.y=L.y-cC.areaRect.y},dragEnded:function(L){if(!this.get_isDragging()){return false}if(this.dragType===1){var cC=tab.PointUtil.subtract(L,this.dragOffset);var cD=tab.RectXYUtil.clampCoords(cC,this.get_snappingRegion());tab.AnnotationClientCommands.moveAnnotation(this.get_currentAnnotation(),this.visualId,cD)}else if(this.dragType===2){var cE=tab.RectXYUtil.clampCoords(L,this.get_validRegion());tab.AnnotationClientCommands.movePointTargetAnnotation(this.get_currentAnnotation(),this.visualId,cE)}else if(this.dragType!==0){var cF=this.generateNewAnnotationRegion(L);if(ss.isValue(cF)){tab.AnnotationClientCommands.resizeAnnotation(this.get_currentAnnotation(),this.visualId,cF)}}this.clearDrag();return true},generateNewAnnotationRegion:function(L){var cC=this.get_currentAnnotation().areaRect;var cD={x:L.x,y:L.y};var cE=cC.x;var cF=cC.y;var cG=cC.x+cC.w;var cH=cC.y+cC.h;var cI=null;switch(this.dragType){case 9:{cI={x:cE,y:cF};break}case 7:{cI={x:cE,y:cH};break}case 8:{cI={x:cG,y:cH};break}case 10:{cI={x:cG,y:cF};break}case 3:{cI={x:cE,y:cH};cD.x=cG;break}case 5:{cI={x:cE,y:cF};cD.x=cG;break}case 4:{cI={x:cE,y:cF};cD.y=cH;cD.x=this.$0(cD.x,cE);break}case 6:{cI={x:cG,y:cF};cD.y=cH;cD.x=this.$0(cD.x,cG);break}default:{return null}}cD=tab.RectXYUtil.clampCoords(cD,this.get_validRegion());return tab.RectXYUtil.rectXYFromCorners$2(cD.x,cD.y,cI.x,cI.y)},$0:function(L,cC){if(this.get_currentAnnotation().annotateEnum==='area'){return L}if(this.dragType===4){return Math.max(cC+80,L)}if(this.dragType===6){return Math.min(cC-80,L)}return L},getMaxAnnotationBorderWidth:function(L){return Math.ceil(L.annotationShapeStyle.annotationShapeBorderStyle.strokeWidth)+1},convertToAbsolute:function(L){return tab.PointUtil.add(L,this.scrollOffset)},convertToRelative:function(L){return tab.PointUtil.subtract(L,this.scrollOffset)},convertToAbsolute$1:function(L){return tab.RectXYUtil.offsetRectXY(L,this.scrollOffset.x,this.scrollOffset.y)},convertToRelative$1:function(L){return tab.RectXYUtil.offsetRectXY(L,-this.scrollOffset.x,-this.scrollOffset.y)}});ss.initEnum(q,a,{none:0,move:1,movePointTarget:2,resizeN:3,resizeE:4,resizeS:5,resizeW:6,resizeNE:7,resizeNW:8,resizeSE:9,resizeSW:10});ss.initInterface(bb,a,{hitTest:null,clearCache:null},[ss.IDisposable]);ss.initClass(X,a,{hitTest:null,clearCache:function(){return},dispose:function(){return}},null,[ss.IDisposable,bb]);ss.initClass(r,a,{get_hitTestStructures:function(){if(ss.isValue(this.$0)){return this.$0}this.$0=[];var L=this.paneTableVM.get_visualModel().getAnnotationList();if(!ss.isValue(L)){return this.$0}for(var cC=0;cC<L.length;cC++){var cD=L[cC];var cE=tab.RecordCast.rectPresModelAsRectXY(cD.areaRect);this.$0.push(new T(cE,7,cD.annotationId));if(ss.isValue(cD.textRect)){this.$0.push(new T(tab.RecordCast.rectPresModelAsRectXY(cD.textRect),7,cD.annotationId))}}return this.$0},hitTest:function(L,cC){return r.getHitTestResult(L,this.get_hitTestStructures())},clearCache:function(){this.$0=null}},X,[ss.IDisposable,bb]);ss.initClass(s,a,{get_annotationDictionary:function(){return this.getAnnotationDictionary()},$b:function(){var L=[];if(this.visible){L=this.nonNullAnnotations()}return L},nonNullAnnotations:function(){return tab.ListExtensions.where(Object).call(null,_.values(this.selectedAnnotations),function(L){return ss.isValue(L)})},isCaretMenuOpened:function(){return ss.isValue(this.$d)&&!this.$d.isHidden},setBounds:function(L){this.dragHandler.set_domRegion(L);this.updateRegionScroll();this.incrementProps()},updateRegionScroll:function(){if(ss.isValue(tab.ApplicationModel.get_instance().pm)&&!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.dragHandler.get_domRegion().x=this.dragHandler.scrollOffset.x;this.dragHandler.get_domRegion().y=this.dragHandler.scrollOffset.y}else{this.dragHandler.get_domRegion().x=0;this.dragHandler.get_domRegion().y=0}},setContextMenuViewModel:function(L){this.$d=L},$6:function(L,cC){var cD=this.hoverAnnotation;var cE=_.keys(this.selectedAnnotations);if(!cC||!tab.FeatureFlags.isEnabled('RichTextSelectAnnotation')){ss.clearKeys(this.selectedAnnotations)}if(ss.keyExists(this.selectedAnnotations,L)&&!ss.referenceEquals(this.hoverAnnotation,this.selectedAnnotations[L])){delete this.selectedAnnotations[L]}else{this.hoverAnnotation=null;this.selectedAnnotations[L]=this.get_annotationDictionary()[L]}this.visible=tab.FeatureFlags.isEnabled('RichTextSelectAnnotation')&&ss.getKeyCount(this.selectedAnnotations)>0;if(!ss.referenceEquals(cD,this.hoverAnnotation)||!ss.referenceEquals(cE,_.keys(this.selectedAnnotations))){this.incrementProps()}},handleAnnotationClicked:function(L,cC,cD){if(tsConfig.current_sheet_type==='story'||!tsConfig.is_authoring){return}if(this.$a(L,cC,cD)){return}this.$6(L,cD)},onHover:function(L){var cC=this.hoverAnnotation;if(L.get_hitObjectType()!==2||ss.keyExists(this.selectedAnnotations,L.get_id())){this.hoverAnnotation=null;this.visible=this.$7()}else{this.hoverAnnotation=this.get_annotationDictionary()[L.get_id()];this.visible=true}if(!ss.referenceEquals(cC,this.hoverAnnotation)){this.incrementProps()}},clearSelection:function(){if(tsConfig.current_sheet_type==='story'||!tsConfig.is_authoring){return}ss.clearKeys(this.selectedAnnotations);this.dragHandler.clearDrag();this.visible=ss.isValue(this.hoverAnnotation);this.incrementProps()},hideAll:function(){this.visible=false;this.incrementProps()},scrollX:function(L){this.dragHandler.scrollOffset.x=L;this.updateRegionScroll();this.incrementProps()},scrollY:function(L){this.dragHandler.scrollOffset.y=L;this.updateRegionScroll();this.incrementProps()},dragStarted:function(L,cC){if(BrowserSupport.BrowserSupport.IsSafari()){window.getSelection().removeAllRanges()}if(this.dragHandler.dragStarted(L,this.selectedAnnotations,cC)){var cD=this.dragHandler.get_currentAnnotation();ss.clearKeys(this.selectedAnnotations);this.selectedAnnotations[cD.annotationId]=cD;this.incrementProps();return true}this.hoverAnnotation=null;return false},onDrag:function(L){this.$c=this.dragHandler.convertToRelative(L);this.incrementProps()},dragEnded:function(L){if(BrowserSupport.BrowserSupport.IsSafari()){window.getSelection().removeAllRanges()}this.dragHandler.dragEnded(L);this.incrementProps()},update:function(){var L=this.get_annotationDictionary();_.map(Object.keys(this.selectedAnnotations),ss.mkdel(this,function(cC){return this.selectedAnnotations[cC]=L[cC]}));this.visible=this.$7();this.incrementProps()},deleteSelectedAnnotations:function(){var L=Array.prototype.slice.call(ss.arrayFromEnumerable(Object.keys(this.selectedAnnotations)));this.clearSelection();if(L.length>0&&tab.FeatureFlags.isEnabled('RichTextDeleteAnnotation')&&tab.FeatureFlags.isEnabled('RichTextSelectAnnotation')){tab.AnnotationClientCommands.removeAnnotation(L,this.visualId)}},handleRightClick:function(L,cC){this.$9(L.get_id(),cC,'ContextMenu',false)},$8:function(L,cC,cD){this.$9(L,cC,'Chevron',cD)},$5:function(){this.dragHandler.clearDrag();this.incrementProps()},createUpdatedProps:function(){return{visible:this.visible,renderRegion:this.dragHandler.get_domRegion(),hoveredAnnotation:this.hoverAnnotation,annotations:this.$b(),scrollOffset:this.dragHandler.scrollOffset,draggingShadow:this.dragHandler.getShadow(this.$c),onHandlerMouseDown:ss.mkdel(this.dragHandler,this.dragHandler.onHandlerMouseDown),clearMouseUp:ss.mkdel(this,this.$5)}},$9:function(L,cC,cD,cE){if(!ss.keyExists(this.selectedAnnotations,L)){this.$6(L,cE)}var cF=new u(this.visualId,this.selectedAnnotations,cD,ss.mkdel(this,function(){this.clearSelection()}));this.$d.show(cC,[cF])},$a:function(L,cC,cD){if(ss.isNullOrUndefined(cC)||!tab.FeatureFlags.isEnabled('RichTextSelectAnnotation')||!cC.target.classList.contains('tabAuthoringAnnotationChevronIcon')||!ss.keyExists(this.get_annotationDictionary(),L)||ss.isNullOrUndefined(this.get_annotationDictionary()[L])){return false}var cE=this.get_annotationDictionary()[L];var cF={x:cE.areaRect.x+cE.areaRect.w,y:cE.areaRect.y};var cG=cC.target.getBoundingClientRect();var cH={x:cF.x-ss.Int32.trunc(cG.width),y:cF.y+ss.Int32.trunc(cG.height)};this.$8(L,cH,cD);return true},$7:function(){return this.nonNullAnnotations().length>0||ss.isValue(this.hoverAnnotation)},isDragging:function(){return this.dragHandler.get_isDragging()}},ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.IDisposable,tab.IViewModel,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(t,a,{});ss.initInterface(bj,a,{buildMenuItems:null,handleItemClicked:null});ss.initClass(u,a,{buildMenuItems:function(){var L=[];if(tab.FeatureFlags.isEnabled('RichTextDeleteAnnotation')&&this.$1.length>0){var cC=((this.$1.length>1)?tab.Strings.DeleteSelectedAnnotationFromVizContextMenu:tab.Strings.DeleteAnnotationFromVizContextMenu);L.push({value:'Delete Annotation',displayValue:cC,disabled:false})}if(this.$1.length===1){L.push({value:'Edit Annotation',displayValue:tab.Strings.EditAnnotationFromVizContextMenu,disabled:false})}return L},handleItemClicked:function(L){switch(L){case'Delete Annotation':{tab.AnnotationClientCommands.removeAnnotation(this.$1,this.$3);t.reportAnnotationTelemetry(null,'Delete',this.$2);break}case'Edit Annotation':{tab.RichTextClientCommands.createAnnotationRichTextEditor(this.$3.worksheet,this.$1);tab.FormattingTelemetryClient.logRichTextEditorEvent(['RichTextEditorOpenedBy',this.$2,'RichTextEditorOpenedFrom','Annotation']);break}default:{throw new ss.Exception('Unknown menu option '+L)}}if(!ss.staticEquals(this.$0,null)){this.$0()}}},null,[bj]);ss.initClass(v,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(cb,a,{get_dom:function(){return this.$5},get_pi:function(){return this.$9},set_pi:function(L){this.$9=L},get_dragStart:function(){return this.$6},get_connectNodePos:function(){return this.$3},get_totalScrollOffset:function(){return this.$c},get_drawOffsets:function(){return((tab.ApplicationModel.get_instance().get_isLocalRenderMode()||tsConfig.is_mobile)?{x:0,y:0}:this.get_totalScrollOffset())},get_autoScrollOffset:function(){return this.$2},get_tooltipAnchor:function(){return{x:this.$8.x+this.$c.x,y:this.$8.y+this.$c.y}},get_hitTestingBox:null,isSingleSelect:null,setSingleSelectPoint:function(L){this.$8={x:L.x,y:L.y}},dragStarted:function(L,cC,cD){this.$6={x:L,y:cC};this.$3=cD;this.$2={x:0,y:0}},recordScrollingOffsets:function(L){this.$c={x:L.x,y:L.y}},updateAndRenderShape:function(L){this.constrainShape(L);this.updateSpecificShape(this.$8);this.renderShape()},constrainShape:function(L){this.$8={x:L.pageX-this.$3.x,y:L.pageY-this.$3.y};if(ss.isInstanceOfType(this,x)){return}this.$8.y=Math.max(0,Math.min(this.$8.y,this.$3.h));this.$8.x=Math.max(0,Math.min(this.$8.x,this.$3.w))},shapeScrolled:function(L,cC){this.get_dragStart().x-=L;this.get_dragStart().y-=cC;this.$c.x+=L;this.$c.y+=cC;this.$2.x+=L;this.$2.y+=cC;this.updateSpecificShape(this.$8);this.renderShape()},updateSpecificShape:null,renderShape:null,createDomAndAppend:function(L){this.$5=$(this.$7);this.$5.addClass(this.$4);this.$5.css('display','none');this.$5.find('svg').attr('width',this.$b).attr('height',this.$a);L.append(this.$5)},show:null,hide:null,hitTest:function(L,cC,cD){var cE=cC||this.isSingleSelect();return(cE?this.$0(L,cD):this.$1(L,cD))},$0:function(L,cC){var cD={x:this.$8.x,y:this.$8.y,w:1,h:1};var cE=L.hitTestBoundingBoxes(cD,true,cC);return L.hitTestSingle(cD,cC,cE)},$1:function(L,cC){var cD=L.hitTestBoundingBoxes(this.get_hitTestingBox(),false,cC);var cE=[];var cF=this.get_hitTestingBox();for(var cG=cD.length-1;cG>=0;cG--){var cH=cD[cG];var cI=cH.get_objectId();if(cI<0){continue}var cJ=T.findPaneNode(cH);if(ss.isNullOrUndefined(cJ)){continue}var cK=cC.getPaneDrawInfoFromKey(cJ.get_paneKey());var cL=W.getTransformInfo(cK,cH);var cM=tab.RectXYUtil.intersect(cF,cJ.get_boundingBox());var cN=this.shapeAreaHit(cM,cK,cH,cL);if(cN){cE.push(new Z.$ctor1(cK.c.get('tuple_id').gv(cI),7,1))}}return cE},shapeAreaHit:null,sendSelectionCommand:null,updateLastState:function(L){if(this.isStateObjectTypeCorrect(L)){L.updateLastState()}},getStateDiff:function(L){if(this.isStateObjectTypeCorrect(L)){this.saveCurrentState(L);return L.getStateDiff()}var cC=new Array(1);cC[0]=this.get_hitTestingBox();return cC},retrieveStateObject:null,saveCurrentState:null,isStateObjectTypeCorrect:null});ss.initClass(x,a,{get_hitTestingBox:function(){return tab.RectXYUtil.nonemptyify(this.$f(true))},isSingleSelect:function(){return this.$i.radius<1},$f:function(L){return tab.CircleUtil.boundingBox((L?this.$j:this.$i))},updateSpecificShape:function(L){var cC=this.get_dragStart().x-this.get_connectNodePos().x;var cD=this.get_dragStart().y-this.get_connectNodePos().y;var cE=Math.sqrt(Math.pow(cC-L.x,2)+Math.pow(cD-L.y,2));this.$i={center:{x:cC+this.get_drawOffsets().x,y:cD+this.get_drawOffsets().y},radius:cE};this.$j={center:{x:cC+this.get_totalScrollOffset().x,y:cD+this.get_totalScrollOffset().y},radius:cE};if(this.$g()){this.$h()}},$g:function(){return ss.isValue(this.$k)&&ss.isValue(this.$k.get_radialSelectionDistanceInfoPresModel())&&this.$k.get_shouldShowDistance()},$h:function(){var L={x:this.$i.center.x+this.$i.radius,y:this.$i.center.y};var cC=this.$d(L);if(cC>0){this.displayDistance(cC)}},$d:function(L){var cC=this.$k.get_latLongRect();if(ss.isNullOrUndefined(cC)||this.$k.get_mapWidth()<=0||this.$k.get_mapHeight()<=0){return 0}var cD={x:this.$i.center.x%this.$k.get_mapWidth(),y:this.$i.center.y%this.$k.get_mapHeight()};var cE={x:cD.x+(L.x-this.$i.center.x),y:cD.y};var cF=(cC.maxLatitude-cC.minLatitude)/this.$k.get_mapHeight();var cG=cC.maxLatitude-cF*cD.y;var cH={item1:cC.minLongitude,item2:cG};var cI={item1:cC.maxLongitude,item2:cG};var cJ=O.haversineDistance(cH,cI,this.$k.get_earthRadius());var cK=cJ/this.$k.get_mapWidth();return Math.abs(cE.x-cD.x)*cK},displayDistance:function(L){var cC=this.get_dom().find('.tabDistanceReadout');cC.text(this.$e(L));var cD={x:ss.round(this.$i.center.x+this.$i.radius+this.$k.get_readoutOffsetPixels()),y:ss.round(this.$i.center.y)-ss.Int32.div(tab.DoubleUtil.roundToInt(cC.height()),2)};cC.css('left',cD.x+'px');cC.css('top',cD.y+'px')},$e:function(L){var cC=this.$k.get_smallUnitDisplay();if(L>=this.$k.get_unitTransition()){L/=this.$k.get_smallToLargeUnitDivisor();cC=this.$k.get_largeUnitDisplay()}var cD=tab.DoubleUtil.sigFigs(L,this.$k.get_sigFigs());var cE=0;if(cD!==0){var cF=Math.floor(Math.log(Math.abs(cD))/Math.log(10))+1;cE=Math.max(0,this.$k.get_sigFigs()-cF)}var cG=cD.toFixed(cE);if(this.$k.get_decimalMark()===','&&cG.indexOf('.')!==-1){cG=ss.replaceAllString(cG,'.',this.$k.get_decimalMark())}return ss.formatString('{0}  {1}',cG,cC)},formatReadoutTestHook:function(L){return this.$e(L)},computeRadialDistanceTestHook:function(L){return this.$d(L)},renderShape:function(){var L=this.get_dom().find('.circle_crosshair');var cC=this.get_dom().find('.circle_radius');this.get_dom().find('svg circle').attr('cx',this.$i.center.x.toString()).attr('cy',this.$i.center.y.toString()).attr('r',this.$i.radius.toString());L.eq(0).attr('x1',(this.$i.center.x-4).toString()).attr('x2',(this.$i.center.x+4).toString()).attr('y1',this.$i.center.y.toString()).attr('y2',this.$i.center.y.toString());L.eq(1).attr('x1',this.$i.center.x.toString()).attr('x2',this.$i.center.x.toString()).attr('y1',(this.$i.center.y-4).toString()).attr('y2',(this.$i.center.y+4).toString());cC.attr('x1',this.$i.center.x.toString()).attr('x2',(this.$i.center.x+this.$i.radius).toString()).attr('y1',this.$i.center.y.toString()).attr('y2',this.$i.center.y.toString())},show:function(){var L=this.get_dom().find('.tabDistanceReadout');var cC=this.get_dom().find('.circle_radius');if(this.$g()){L.css('font-size',this.$k.get_fontSizePixels());L.css('color',this.$k.get_fontColor());L.show();cC.show()}else{L.hide();cC.hide()}this.get_dom().show()},hide:function(){this.get_dom().hide()},shapeAreaHit:function(L,cC,cD,cE){var cF=this.$g();return W.circleAreaHit(cC,cD.get_boundingBox(),this.$j,cD.get_objectId(),cE,cC.markType,cF)},sendSelectionCommand:function(L,cC,cD,cE){var cF=this.$g();tab.SelectionClientCommands.selectCircleRegionAndDoUbertip(L,this.get_hitTestingBox(),this.$j,cC,cD,cE,cF)},retrieveStateObject:function(L){return(this.isStateObjectTypeCorrect(L)?L:new y)},saveCurrentState:function(L){if(this.isStateObjectTypeCorrect(L)){var cC=L;cC.saveCurrentState(this.$j)}},isStateObjectTypeCorrect:function(L){if(ss.isValue(L)){if(ss.referenceEquals(ss.getInstanceType(L),y)){return true}}return false}},cb);ss.initClass(cc,a,{updateLastState:null,getStateDiff:null});ss.initClass(y,a,{saveCurrentState:function(L){this.$0=tab.CircleUtil.clone(L)},updateLastState:function(){this.$1=this.$0},getStateDiff:function(){if(!tab.CircleUtil.isEmpty(this.$1)){return tab.CircleUtil.getChangedRects(this.$0,this.$1)}var L=new Array(1);L[0]=tab.CircleUtil.boundingBox(this.$0);return L}},cc);ss.initClass(z,a,{renderVisualListHelper:function(L,cC){var cD=L.get_visualListPM().drawItems;this.renderDrawItems(cD,L,cC,null)},renderDrawItems:function(L,cC,cD,cE){var cF=this.get_currentContext();var cG=cF.get_numberSavedStates();var cH=4;for(var cI=0;cI<L.length;++cI){var cJ=L[cI];if(true&&cI<cH&&cJ.type==='transform'){}else if(cJ.type==='draw-group'){var cK=cJ;this.$9(cC,cK,cD,cE)}else{this.$b(cF,cJ,cD,null,cE,false)}}while(cF.get_numberSavedStates()>cG){cF.restore()}},renderVisualList:function(L,cC){this.startCachingVisibleRect();var cD=this.get_visibleRect();if(ss.isValue(L.get_defaultBackgroundColor())){this.get_currentContext().set_shapeFillStyle(L.get_defaultBackgroundColor());this.get_currentContext().fillRect(cD.x,cD.y,cD.w,cD.h)}this.renderVisualListHelper(L,cC);this.stopCachingVisibleRect()},renderDrawItemList:function(L){this.renderDrawItems(L,null,null,null)},renderCanvasBorders:function(L){var cC=L.get_visualListPM().visualPart;var cD=L.get_visualListPM().drawItems;for(var cE=0;cE<cD.length;cE++){var cF=cD[cE];if(cF.type==='draw-pen'||cF.type==='draw-solid-brush'){this.renderDrawItemDefaultOptions(this.get_currentContext(),cF)}else if(cF.type==='draw-polyline'){var cG=this.get_currentCanvas().width;var cH=this.get_currentCanvas().height;var cI=cF;var cJ=cI.points;if(ss.contains(z.$b,cC)){if(Math.abs(cJ[3]-cJ[1])>=cH){var cK={};cK.type=cF.type;cK.points=[0,0,0,cH];this.renderDrawItemDefaultOptions(this.get_currentContext(),cK);cK.points[0]+=cG-1;cK.points[2]+=cG-1;this.renderDrawItemDefaultOptions(this.get_currentContext(),cK);return}}else if(ss.contains(z.$c,cC)){if(Math.abs(cJ[2]-cJ[0])>=this.get_currentCanvas().width){var cL={};cL.type=cF.type;cL.points=[0,0,cG,0];this.renderDrawItemDefaultOptions(this.get_currentContext(),cL);cL.points[1]+=cH-1;cL.points[3]+=cH-1;this.renderDrawItemDefaultOptions(this.get_currentContext(),cL);return}}}}},renderDrawItemDefaultOptions:function(L,cC){this.$b(L,cC,null,null,null,false)},$b:function(L,cC,cD,cE,cF,cG){if(!ss.isValue(L)||!ss.isValue(cC)){return}switch(cC.type){case'draw-pen':{{var cH=cC;L.set_lineJoin((ss.isValue(cH.lineJoin)?tab.CanvasRenderer.toCanvasLineJoin(cH.lineJoin):tab.TabRenderContext2D.defaultLineJoin));var cI=cH.linePattern||tab.TabRenderContext2D.defaultLinePattern;L.set_lineCap(z.resolveLineCap(cI,cH.lineCap));L.set_linePattern(cI);L.set_strokeStyle(tab.ColorModel.convertColorForCanvas(cH.color)||'rgb(0,0,0)');L.set_lineWidth(cH.strokeWidth||1)}break}case'draw-solid-brush':{{var cJ=cC;L.set_shapeFillStyle(tab.ColorModel.convertColorForCanvas(cJ.color))}break}case'draw-gradient-brush':{{var cK=cC;var cL=cK.pt1;var cM=cK.pt2;var cN=L.createLinearGradient(cL.x,cL.y,cM.x,cM.y);cN.addColorStop(0,tab.ColorModel.convertColorForCanvas(cK.color1));cN.addColorStop(1,tab.ColorModel.convertColorForCanvas(cK.color2));L.set_shapeFillStyle(cN)}break}case'draw-rect':{{var cO=cC;if(cO.points.length!==4){return}var cP=A.rectXYFromDrawRect(cO.points);L.strokeRect(cP.x,cP.y,cP.w,cP.h)}break}case'draw-fill-rect':{{var cQ=cC;if(cQ.points.length!==4){return}var cR=A.rectXYFromDrawRect(cQ.points);L.fillRect(cR.x,cR.y,cR.w,cR.h)}break}case'draw-ellipse':{{z.$2(L,cC,false)}break}case'draw-fill-ellipse':{{z.$2(L,cC,true)}break}case'draw-polyline':{{var cS=cC;var cT=cS.points;tab.CanvasRenderer.strokePath(L,cT,false,true)}break}case'draw-polygon':{{var cU=cC;tab.CanvasRenderer.strokePath(L,cU.points,true,true)}break}case'draw-fill-polygon':{{var cV=cC;tab.CanvasRenderer.fillPath(L,cV.points,true)}break}case'draw-fill-path':{{z.$3(L,cC,true)}break}case'draw-path':{{z.$3(L,cC,false)}break}case'clip-rect':{{var cW=cC;if(cW.points.length===4){if(true&&cW.points[2]-cW.points[0]===2){break}L.setClip({x:cW.points[0],y:cW.points[1],w:cW.points[2]-cW.points[0],h:cW.points[3]-cW.points[1]})}}break}case'draw-text':{{var cX=cC;if(cX.points.length!==2){return}var cY=cX.points[0];var cZ=cX.points[1];var da=-1;if(ss.isValue(cE)&&cE.w!==0&&cE.h!==0){var db;var dc;if(L.get_isTextAngleHorizontal()){db=((cE.x>cY)?cY:(cY-cE.x));dc=cE.w}else{db=((cE.y>cZ)?cZ:(cZ-cE.y));dc=cE.h}da=Math.max(db,dc-db)}this.renderText(cX.text,cY,cZ,da,null,cG)}break}case'draw-text-props':{{z.$0(L,cC)}break}case'transform':{{var dd=cC;if(ss.isValue(dd.transformOffset)&&dd.transformOffset.length===2){L.translate(dd.transformOffset[0],dd.transformOffset[1])}if(ss.isValue(dd.transformScale)&&dd.transformScale.length===2){L.scale(dd.transformScale[0],dd.transformScale[1])}if(ss.isValue(dd.transformAngle)){L.rotate(dd.transformAngle*Math.PI/180)}}break}case'transform-pop':{{var de=new j(L);L.restore();de.$0(L)}break}case'transform-push':{{L.save()}break}case'draw-antialias':{{var df=cC;L.set_shouldAntialias(df.state)}break}case'draw-image':{{var dg=cC;if(ss.isValue(cD)&&cD.has(dg.imageHash)){var dh=cD.get(dg.imageHash);if(ss.isValue(dh)&&dh.complete){L.save();if(ss.isValue(cF)){L.setClip(cF)}L.set_alpha(dg.alpha);L.drawImage4(dh,dg.destBox[0],dg.destBox[1],dg.destBox[2]-dg.destBox[0],dg.destBox[3]-dg.destBox[1]);L.restore()}}else{}}break}default:{{}break}}},$9:function(L,cC,cD,cE){var cF=ss.isValue(L)&&L.get_visualListPM().visualPart==='annotations';this.clearPrevTextRunInfo();var cG=this.get_currentContext();var cH=false;cC.extentsX=cC.extentsX||0;cC.extentsY=cC.extentsY||0;cC.extentsWidth=cC.extentsWidth||0;cC.extentsHeight=cC.extentsHeight||0;var cI={x:cC.extentsX,y:cC.extentsY,w:cC.extentsWidth,h:cC.extentsHeight};var cJ=tab.RectXYUtil.offsetRect(cG.dirtyRect,this.get_renderOffset());if(cC.extentsWidth>0&&cC.extentsHeight>0&&(!this.isRectVisible(cI)||!tab.RectXYUtil.intersectsWith(cJ,cI))){cH=true}var cK=this.$a(L,cC,cH);var cL=z.$6(cC.drawItems,cF);for(var cM=0;cM<cL.length;cM++){var cN=cL[cM];if(cK.$0()&&cN.type==='draw-solid-brush'){var cO=cN;cK.$2=tab.ColorModel.convertColorForCanvas(cO.color)}else{var cP=null;if(cK.$0()&&cN.type==='draw-text-props'){var cQ=cN;cK.$3=tab.ColorModel.convertColorForCanvas(cQ.color);cP=cG.get_textFillStyle()}if(!cH||z.$5(cN)){this.$b(cG,cN,cD,cI,cE,cF)}if(ss.isValue(cP)){cG.set_textFillStyle(cP)}}}if(cK.$0()){cG.set_shapeFillStyle(cK.$2);cG.set_textFillStyle(cK.$3)}},$a:function(L,cC,cD){var cE=null;if(!cD&&ss.isValue(L)){if(L.isSelected(cC)){cE=new i('selected')}else if(L.isBrushed(cC)){cE=new i('highlighted')}else if(L.isNodeOrAxisHovered(cC)){cE=new i('hover')}}if(ss.isNullOrUndefined(cE)){return new i('normal')}var cF=this.get_currentContext();cE.$2=cF.get_shapeFillStyle();cE.$3=cF.get_textFillStyle();switch(cE.$1()){case'selected':{cF.set_textFillStyle(this.$c.selectionTextColor.toRgba());cF.set_shapeFillStyle(this.$c.selectionBgColor.toRgba());break}case'highlighted':{cF.set_textFillStyle(this.$c.highlightTextColor.toRgba());cF.set_shapeFillStyle(this.$c.highlightBgColor.toRgba());break}case'hover':{cF.set_textFillStyle('rgb(0,0,0)');cF.set_shapeFillStyle('rgb(245,245,245)');break}}var cG=ss.isValue(cC.offsetX)||ss.isValue(cC.offsetY);if(cG){cC.offsetX=cC.offsetX||0;cC.offsetY=cC.offsetY||0;cF.translate(-cC.offsetX,-cC.offsetY)}cF.fillRect(cC.extentsX,cC.extentsY,cC.extentsWidth,cC.extentsHeight);if(cG){cF.translate(cC.offsetX,cC.offsetY)}return cE}},tab.CanvasRenderer);ss.initClass(A,a,{});ss.initClass(B,a,{add_complete:function(L){this.$1$1=ss.delegateCombine(this.$1$1,L)},remove_complete:function(L){this.$1$1=ss.delegateRemove(this.$1$1,L)},add_imageLoaded:function(L){this.$1$2=ss.delegateCombine(this.$1$2,L)},remove_imageLoaded:function(L){this.$1$2=ss.delegateRemove(this.$1$2,L)},add_imageTimedOut:function(L){this.$1$3=ss.delegateCombine(this.$1$3,L)},remove_imageTimedOut:function(L){this.$1$3=ss.delegateRemove(this.$1$3,L)},addImage:function(L){if(!ss.isValue(L)){return}for(var cC=0,cD=this.$3.length;cC<cD;cC++){if(!this.$3[cC].$8()){this.$2++;this.$3[cC].$7(L);return}}if(this.$3.length<2){var cE=new n(this.$3.length);cE.$d(ss.mkdel(this,this.onWorkerFinished));cE.$f(ss.mkdel(this,this.onWorkerTimedOut));this.$3.push(cE);this.$2++;cE.$7(L)}else{this.$1.push(L)}},clear:function(){ss.clear(this.$1)},destroy:function(){for(var L=0;L<this.$3.length;L++){var cC=this.$3[L];cC.$1()}ss.clear(this.$1);this.$1$2=null;this.$1$3=null;this.$1$1=null},onWorkerFinished:function(L,cC){if(ss.isValue(this.$1$2)){this.$1$2(this,new bd(cC.get_image()))}this.$0(cC.get_workerID())},onWorkerTimedOut:function(L,cC){if(ss.isValue(this.$1$3)){this.$1$3(this,ss.EventArgs.Empty)}this.$0(cC.get_workerID())},$0:function(L){this.$2--;if(this.$1.length===0){if(this.$2===0){if(ss.isValue(this.$1$1)){this.$1$1(this,ss.EventArgs.Empty)}}}else{this.$3[L].$7(this.$1.shift());this.$2++}}});ss.initInterface(bh,a,{add_loadComplete:null,remove_loadComplete:null,get_hasContent:null,refreshImages:null,destroy:null,reset:null},[spiff.IScrollable]);ss.initClass(C,a,{add_loadComplete:function(L){},remove_loadComplete:function(L){},get_canScrollX:function(){return false},get_canScrollY:function(){return false},get_docSize:function(){return{w:0,h:0}},get_actualViewSize:function(){return{w:0,h:0}},set_actualViewSize:function(L){},get_effectiveViewSize:function(){return{w:0,h:0}},get_scrollPos:function(){return{x:0,y:0}},set_scrollPos:function(L){},get_hasContent:function(){return false},setXPos:function(L){},setYPos:function(L){},refreshImages:function(L){},destroy:function(){},reset:function(L,cC){}},null,[spiff.IScrollable,bh]);ss.initClass(D,a,{render:function(){var L='fztButton';if(this.props.isSelected){L+=' selected'}var cC=['tab-fzt-toggle-button-icon',this.props.iconClassName,(this.props.shouldShowAppendSubIcon?'tab-select-tool-append-mode':null)].join(' ');var cD=(ss.isNullOrEmptyString(this.props.buttonTooltip)?null:spiff.DOMElements.div({className:'tab-mobileTooltip',key:'tooltipText'},this.props.buttonTooltip));var cE=(this.props.shouldShowFlyoutCaret?spiff.DOMElements.div({className:'tab-floating-toolbar-flyout-caret',key:'caretIcon'}):null);return spiff.EventForwarder.span(this.$0(),{className:L,title:this.props.buttonTooltip,role:'button'},[spiff.DOMElements.div({className:cC,key:'buttonIcon'}),cE,cD])},$1:function(L){this.props.onTap()},$0:function(){return{tap:ss.mkdel(this,this.$1)}}},React.Component);ss.initEnum(E,a,{radialSelect:'radialSelect',lassoSelect:'lassoSelect',rectangleSelect:'rectangleSelect',appendSelect:'appendSelect',pan:'pan',zoomHome:'zoomHome',close:'close',currentSelectionTool:'currentSelectionTool'},true);ss.initClass(F,a,{});ss.initClass(G,a,{render:function(){return(this.props.showToolbar?ss.mkdel(this,this.renderContainer)():null)},renderContainer:function(){return React.createElement(I,{getAnchorPosition:this.props.getAnchorPosition},[this.$2(),(this.props.showMapsSearch?ss.mkdel(this,this.$3)():null),this.$7()])},$2:function(){return spiff.EventForwarder.div(this.$0(),{className:'tab-floating-toolbar-close-button-container',role:'button',title:tab.Strings.PanZoomSelectToolsCloseButtonTooltipMobile,key:'closeButton'},[spiff.DOMElements.div({className:'tab-floating-toolbar-close-button'})])},$3:function(){return React.createElement(bx,this.props.mapsSearchProps)},$7:function(){var L=this.props.showTools||this.props.showPanAndZoom&&!this.props.isHomeButtonHidden;return spiff.DOMElements.div({className:['FloatingZoomToolbar','tabSuppressVizTooltipsAndOverlays'].join(' '),key:'tools'},(L?ss.mkdel(this,this.$6)():null),this.$8())},$6:function(){return spiff.DOMElements.div({className:'fztButtonContainer'},(this.props.showTools?ss.mkdel(this,this.$5)():null),((this.props.showTools&&this.props.showPanAndZoom)?ss.mkdel(this,this.$4)():null),((this.props.showPanAndZoom&&!this.props.isHomeButtonHidden)?ss.mkdel(this,this.$9)():null))},$5:function(){return spiff.DOMElements.div({className:'fztSelectionToolContainer'},React.createElement(D,this.props.selectedButtonProps))},$4:function(){return React.createElement(D,this.props.panButtonProps)},$9:function(){return React.createElement(D,this.props.homeButtonProps)},$8:function(){var L=spiff.DOMElements.div({className:'fztFlyOutContainer'},spiff.DOMElements.div({className:'fztFlyOutButtons'},React.createElement(D,this.props.radialSelectButtonProps),React.createElement(D,this.props.lassoSelectButtonProps),React.createElement(D,this.props.rectangleSelectButtonProps),React.createElement(D,this.props.appendSelectButtonProps)));return(this.props.isFlyoutCollapsed?null:L)},$1:function(L){this.props.onClose()},$0:function(){return{tap:ss.mkdel(this,this.$1)}}},React.Component);ss.initClass(H,a,{add_dismissRequested:function(L){this.$3$1=ss.delegateCombine(this.$3$1,L)},remove_dismissRequested:function(L){this.$3$1=ss.delegateRemove(this.$3$1,L)},add_toolSelectionRequested:function(L){this.$3$2=ss.delegateCombine(this.$3$2,L)},remove_toolSelectionRequested:function(L){this.$3$2=ss.delegateRemove(this.$3$2,L)},add_appendModeSettingRequested:function(L){this.$3$3=ss.delegateCombine(this.$3$3,L)},remove_appendModeSettingRequested:function(L){this.$3$3=ss.delegateRemove(this.$3$3,L)},add_zoomHomeRequested:function(L){this.$3$4=ss.delegateCombine(this.$3$4,L)},remove_zoomHomeRequested:function(L){this.$3$4=ss.delegateRemove(this.$3$4,L)},get_mapsSearchViewModel:function(){return this.$3$5},set_mapsSearchViewModel:function(L){this.$3$5=L},$k:function(){return this.$o['appendSelect'].isSelected},$l:function(){return this.$s.isSelected},$j:function(){return this.$x&&!this.$u&&!this.$v&&this.$r},$m:function(){return this.$t.isSelected&&!this.$j()},showToolbar:function(L){this.$w=true;this.$p=L;this.incrementProps();K.trackShow(this.$u,this.$x,this.$v,!this.$r)},hideToolbar:function(){if(!this.$w){return}this.$w=false;this.incrementProps()},showTools:function(L){this.$x=L;if(!L){this.$q=true}this.incrementProps()},showMapsSearch:function(){this.$u=true;this.incrementProps()},hideMapsSearch:function(){this.$u=false;this.incrementProps()},shouldEnablePanAndZoom:function(L){this.$v=L;this.incrementProps()},updateZoomHomeState:function(L){this.$r=L;this.incrementProps()},$f:function(L){if(L==='pan-map'){this.$h()}else{var cC=H.$0(L);this.$i(cC)}},$7:function(L){this.$o['appendSelect'].isSelected=L;this.$t.shouldShowAppendSubIcon=L;this.incrementProps()},$h:function(){this.$s.isSelected=true;this.$o[this.$n].isSelected=false;this.$t.isSelected=false;this.incrementProps()},$i:function(L){this.$o[this.$n].isSelected=false;this.$o[L].isSelected=true;this.$n=L;this.$t.iconClassName=this.$o[L].iconClassName;this.$t.buttonTooltip=this.$o[L].buttonTooltip;this.$t.isSelected=true;this.$s.isSelected=false;this.incrementProps()},$5:function(){this.$q=true;this.incrementProps()},$6:function(){var L=!this.$k();this.raiseActionEvent$1(Boolean).call(this,this.$3$3,L);this.$5();K.trackButtonPress('appendSelect'.toString())},$b:function(){this.$e('radialSelect')},$9:function(){this.$e('lassoSelect')},$c:function(){this.$e('rectangleSelect')},$a:function(){this.$e('pan')},$e:function(L){this.raiseActionEvent$1(Object).call(this,this.$3$2,H.$1(L));this.$5();K.trackButtonPress(L.toString())},$8:function(){this.raiseActionEvent(this.$3$4);this.$5();K.trackButtonPress('zoomHome'.toString())},$d:function(){if(this.$l()){this.raiseActionEvent$1(Object).call(this,this.$3$2,H.$1(this.$n))}else{this.$q=!this.$q;this.incrementProps()}K.trackButtonPress('currentSelectionTool'.toString())},$g:function(){this.raiseActionEvent(this.$3$1);K.trackButtonPress('close'.toString())},createInitialProps:function(){return{onClose:ss.mkdel(this,this.$g),homeButtonProps:{iconClassName:'tab-map-home',buttonTooltip:tab.Strings.PanZoomSelectToolsZoomHomeTooltip,onTap:ss.mkdel(this,this.$8)}}},createUpdatedProps:function(){var L=$.extend({},this.$t,{isSelected:this.$m()});return{mapsSearchProps:{viewModel:this.get_mapsSearchViewModel(),key:'mapsSearchContainer'},showToolbar:this.$w,showTools:this.$x,showMapsSearch:this.$u,showPanAndZoom:this.$v,panButtonProps:this.$s,radialSelectButtonProps:this.$o['radialSelect'],lassoSelectButtonProps:this.$o['lassoSelect'],rectangleSelectButtonProps:this.$o['rectangleSelect'],appendSelectButtonProps:this.$o['appendSelect'],selectedButtonProps:L,isFlyoutCollapsed:this.$q,isHomeButtonHidden:this.$r,getAnchorPosition:this.$p}}},ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.IDisposable,tab.IViewModel,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(I,a,{$0:function(){tab.ViewportChangeDetector.get_instance().add_viewportChanged(ss.mkdel(this,this.$2));tab.Application.get_instance().get_client().get_dashboardViewport().add_scrolled(ss.mkdel(this,this.$2))},$3:function(){tab.ViewportChangeDetector.get_instance().remove_viewportChanged(ss.mkdel(this,this.$2));tab.Application.get_instance().get_client().get_dashboardViewport().remove_scrolled(ss.mkdel(this,this.$2))},componentDidMount:function(){this.$5();this.$0();this.$2()},componentWillUnmount:function(){this.$3()},$5:function(){if(ss.isValue(this.$8)){this.$8.style.display='none'}},$6:function(){if(ss.isValue(this.$8)){this.$8.style.display=''}},$2:function(){if(ss.isNullOrUndefined(tab.ViewportChangeDetector.get_instance().get_lastViewportRect())){return}this.$5();tab.WindowHelper.cancelAnimationFrame(this.$9);this.$a=tab.DateUtil.get_nowAsTime();this.$9=tab.WindowHelper.requestAnimationFrame(ss.mkdel(this,this.$1))},$1:function(){var L=tab.DateUtil.get_nowAsTime();if(L-this.$a>=300){this.$4()}else{this.$9=tab.WindowHelper.requestAnimationFrame(ss.mkdel(this,this.$1))}},$4:function(){if(ss.isValue(this.$8)){var L=tab.Application.get_instance().get_client().get_dashboardViewport();var cC=tab.ViewportChangeDetector.get_instance().get_lastViewportRect();var cD={x:cC.l,y:cC.t};var cE=L.convertPointFromPageToDashboardCoords(cD);var cF={l:cE.x,t:cE.y,w:cC.w,h:cC.h};var cG=tab.RectUtil.intersect(cF,L.get_visibleRect());var cH=this.props.getAnchorPosition();var cI=L.convertPointFromPageToDashboardCoords(cH);this.$8.style.left=Math.max(cI.x,cG.l)+'px';this.$8.style.top=Math.max(cI.y,cG.t)+'px';this.$6()}},render:function(){return spiff.DOMElements.div({className:'tab-floating-toolbar-container',ref:this.$7},this.props.children)}},React.Component);ss.initClass(J,a,{});ss.initClass(K,a,{});ss.initClass(M,a,{get_currentToolMode:function(){return this.$8},set_currentToolMode:function(L){if(L!==this.$8){var cC=this.$8;this.$8=L;this.toolModeChanged(cC)}else if(L===this.api.defaultPointerToolMode()){this.updateFlyOutVisibility(false);this.updateButtonState(L,true)}},get_floatingToolbarType:function(){return this.toolbarType},dispose:function(){try{this.disposables.dispose()}catch(L){}if(ss.isValue(this.buttonContainer)){this.buttonContainer.remove()}if(ss.isValue(this.flyOutButtons)){this.flyOutButtons.remove()}if(ss.isValue(this.flyOutContainer)){this.flyOutContainer.remove()}this.api=null;this.buttonContainer=null;this.flyOutButtons=null;this.flyOutContainer=null;this.zoomInButton=null;this.zoomOutButton=null;this.zoomAreaButton=null;this.zoomHomeButton=null;this.flyOutButton=null;this.rectSelectButton=null;this.radialSelectButton=null;this.lassoSelectButton=null;this.panButton=null;spiff.Widget.prototype.dispose.call(this)},setZoomHomePossibility:function(L){this.canZoomHome=L;if(this.toolbarType==='homeOnlyToolbar'){this.setActiveState(this.canZoomHome)}},setActiveState:function(L){if(this.toolbarType==='homeOnlyToolbar'&&!this.canZoomHome){this.element.css({display:'none'})}else{this.element.css({display:(L?'':'none')})}if(!L){this.updateFlyOutVisibility(false)}},resetPointerToolMode:function(){this.set_currentToolMode(this.api.defaultPointerToolMode());this.api.setPointerToolMode(this.get_currentToolMode(),false);this.updateFlyOutVisibility(false)},resetVisualState:function(){this.updateFlyOutVisibility(false)},enableUserInteraction:function(L){this.element.css({'pointer-events':(L?'auto':'none')});this.$7=L},init:function(){this.createButtons();this.resetPointerToolMode();this.setActiveState(false)},createButtons:null,setupEventHandling:function(){if(ss.isValue(this.rectSelectButton)){this.disposables.add$1(this.rectSelectButton.onClick(ss.mkdel(this,function(){this.setToolMode('rectangular-selection',true);if(tsConfig.is_authoring){tab.FloatingToolbarClientCommands.setDefaultMapToolSelectionCommand('rectangular-selection')}})));this.disposables.add$1(this.rectSelectButton.onShiftClick(ss.mkdel(this,function(){this.setToolMode('rectangular-selection',true)})))}if(ss.isValue(this.panButton)){this.disposables.add$1(this.panButton.onClick(ss.mkdel(this,function(){this.setToolMode('pan-map',true);if(tsConfig.is_authoring){tab.FloatingToolbarClientCommands.setDefaultMapToolSelectionCommand('pan-map')}})));this.disposables.add$1(this.panButton.onShiftClick(ss.mkdel(this,function(){this.setToolMode('pan-map',true)})))}if(ss.isValue(this.radialSelectButton)){this.disposables.add$1(this.radialSelectButton.onClick(ss.mkdel(this,function(){this.setToolMode('radial-selection',true);if(tsConfig.is_authoring){tab.FloatingToolbarClientCommands.setDefaultMapToolSelectionCommand('radial-selection')}})));this.disposables.add$1(this.radialSelectButton.onShiftClick(ss.mkdel(this,function(){this.setToolMode('radial-selection',true)})))}if(ss.isValue(this.lassoSelectButton)){this.disposables.add$1(this.lassoSelectButton.onClick(ss.mkdel(this,function(){this.setToolMode('lasso-selection',true);if(tsConfig.is_authoring){tab.FloatingToolbarClientCommands.setDefaultMapToolSelectionCommand('lasso-selection')}})));this.disposables.add$1(this.lassoSelectButton.onShiftClick(ss.mkdel(this,function(){this.setToolMode('lasso-selection',true)})))}if(ss.isValue(this.zoomHomeButton)){this.disposables.add$1(this.zoomHomeButton.onClick(ss.mkdel(this,function(){this.clickZoomHome()})))}},updateFlyOutVisibility:function(L){if(ss.isValue(this.flyOutContainer)){this.flyOutContainer.css({display:(L?'':'none')})}},toggleFlyout:function(L){if(!this.$7){return}if(this.flyOutContainer.is(':visible')){this.updateFlyOutVisibility(false)}else{var cC=this.flyOutButton.element.position();var cD=tab.DoubleUtil.roundToInt(this.flyOutButton.element.width());this.flyOutContainer.css({top:cC.top+'px',left:cD+'px'});this.updateFlyOutVisibility(true)}},addButton:function(L,cC,cD){var cE=new spiff.Button($(document.createElement('div')));cE.set_hoverTooltipText(cD);var cF=cE;this.$6(L,cF,cC);return cF},addToggleButton:function(L,cC,cD){var cE=new spiff.ToggleButton($(document.createElement('span')));cE.set_hoverTooltipText(cD);var cF=cE;this.$6(L,cF,cC);return cF},addSpacer:function(){var L=$(document.createElement('div'));L.addClass('fztSpacer');this.buttonContainer.append(L)},$6:function(L,cC,cD){cC.element.addClass(cD);cC.element.addClass('fztButton');L.append(cC.element);this.disposables.add$1(cC)},setToolMode:function(L,cC){if(L===this.get_currentToolMode()){this.set_currentToolMode(this.api.defaultPointerToolMode())}else{this.set_currentToolMode(L)}this.api.setPointerToolMode(this.get_currentToolMode(),cC)},clickZoomHome:function(){if(this.canZoomHome){this.api.zoomHome()}},createButtonContainer:function(){this.buttonContainer=$("<div class='fztButtonContainer'/>");this.element.append(this.buttonContainer);if(ss.isValue(this.parent)){this.parent.append(this.element)}},createButtonFlyOut:function(){this.flyOutContainer=$("<div class='fztFlyOutContainer'/>");this.updateFlyOutVisibility(false);this.element.append(this.flyOutContainer);this.flyOutButtons=$("<div class='fztFlyOutButtons'/>");this.flyOutContainer.append(this.flyOutButtons)},updateButtonState:function(L,cC){switch(L){case'area-zoom':case'zoom-out':{this.selectButton(this.zoomAreaButton,cC);break}case'pan-map':{if(ss.isValue(this.panButton)){this.selectButton(this.panButton,cC)}break}case'rectangular-selection':{if(ss.isValue(this.rectSelectButton)){this.selectButton(this.rectSelectButton,cC)}break}case'radial-selection':{this.selectButton(this.radialSelectButton,cC);break}case'lasso-selection':{this.selectButton(this.lassoSelectButton,cC);break}default:{break}}},selectButton:function(L,cC){var cD=ss.safeCast(L,spiff.ToggleButton);if(ss.isValue(cD)){cD.set_selected(cC)}},toolModeChanged:function(L){this.updateButtonState(L,false);this.updateButtonState(this.get_currentToolMode(),true);this.updateFlyOutVisibility(false)}},spiff.Widget,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(N,a,{get_toolBarIsOffOrHome:function(){return ss.isNullOrUndefined(this.zoomToolbar)||this.zoomToolbar.get_floatingToolbarType()==='homeOnlyToolbar'},resetPointerToolbarMode:function(){if(ss.isNullOrUndefined(this.zoomToolbar)&&this.$1!=='hide'){this.createZoomToolbar()}if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.resetPointerToolMode();return true}return false},updateZoomToolbar:function(L){this.$1=L;if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.dispose();this.zoomToolbar=null;if(this.$1!=='hide'){this.createZoomToolbar();this.showFloatingZoomToolbar(true)}}if(this.$0.get_shouldEnableZoomHomeToolbar()&&ss.isNullOrUndefined(this.zoomToolbar)){this.createZoomToolbar()}if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.setZoomHomePossibility(this.$0.get_shouldEnableZoomHomeToolbar())}},determineToolbarType:function(){var L='fullToolbar';if(!this.$0.get_shouldShowTools()){L='homeOnlyToolbar'}else if(!this.$0.allowPanZoomActions()){L='disablePanZoomToolbar'}if(tsConfig.is_mobile){if(L==='fullToolbar'&&this.$0.isVizLargerThanScreen()){return'disablePanZoomToolbar'}}return L},showFloatingZoomToolbar:function(L){if(L&&this.$1!=='hide'&&ss.isNullOrUndefined(this.zoomToolbar)){this.createZoomToolbar()}if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.setZoomHomePossibility(this.$0.get_shouldEnableZoomHomeToolbar());this.zoomToolbar.setActiveState(L)}},createZoomToolbar:function(){if(!tsConfig.allow_filter){return}var L=tsConfig.is_mobile&&tab.GestureModelSettings.get_newModelEnabled();if(ss.isNullOrUndefined(this.zoomToolbar)&&!L){var cC=this.$0.get_zoomToolbarContainerDiv();var cD=this.$0.get_isMapSearchEnabled();var cE=this.$0.get_zoomToolbarOperations();var cF=this.determineToolbarType();var cG=this.$0.get_zoomToolbarOffset();var cH=tab.ObjectRegistry.resolve(M).call(null,[cC,cE,cF,cG,cD]);cH.addClass('tabSuppressVizTooltipsAndOverlays');this.zoomToolbar=cH}},enableUserInteraction:function(L){if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.enableUserInteraction(L)}},resetVisualState:function(){if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.resetVisualState()}},setToolMode:function(L,cC){if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.setToolMode(L,cC);return true}return false},dispose:function(){if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.dispose()}}},null,[ss.IDisposable]);ss.initClass(O,a,{});ss.initClass(P,a,{get_button:function(){return this.$a},$9:function(){var L={timeout:6000,enableHighAccuracy:true};window.navigator.geolocation.getCurrentPosition(ss.mkdel(this,this.$7),ss.mkdel(this,this.$8),L);if(tsConfig.is_mobile){K.trackButtonPress('gotoMyLocation')}},$7:function(L){var cC={};var cD=Math.abs(0.0063306021306998);var cE=Math.abs(L.coords.latitude);var cF=89.9936693978693;if(cE>cF){cC.minLatitude=((L.coords.latitude<0)?-90:(L.coords.latitude-cD));cC.maxLatitude=((L.coords.latitude<0)?(L.coords.latitude+cD):90)}else{cC.minLatitude=L.coords.latitude-cD;cC.maxLatitude=L.coords.latitude+cD}var cG;var cH=Math.cos(O.degreeToRad(cE));var cI=3.49343234718729E-05;if(cH<cI){cG=180}else{cG=0.7/(111.32*cH)}cC.minLongitude=L.coords.longitude-cG;cC.maxLongitude=L.coords.longitude+cG;tab.MapClientCommands.boundingBoxPan(this.$b,cC)},$6:function(L){var cC='';if(L.code===L.PERMISSION_DENIED){if(P.$0()){cC=tab.Strings.GotoMyLocationPermissionDeniedUnsecureConnection}else{cC=tab.Strings.GotoMyLocationPermissionDeniedError}}else if(L.code===L.TIMEOUT){cC=tab.Strings.GotoMyLocationTimeoutError}else if(L.code===L.POSITION_UNAVAILABLE){if(P.$0()){cC=tab.Strings.GotoMyLocationPermissionDeniedUnsecureConnection}else{cC=tab.Strings.GotoMyLocationPositionUnavailableError}}else{cC=tab.Strings.GotoMyLocationPositionUnavailableError}return cC},$8:function(L){var cC=this.$6(L);var cD=this.element.offset();var cE={x:tab.DoubleUtil.roundToInt(cD.left)+tab.DoubleUtil.roundToInt(this.element.width())+8,y:tab.DoubleUtil.roundToInt(cD.top)};if(tsConfig.is_mobile){cE.y+=ss.Int32.div(tab.DoubleUtil.roundToInt(this.element.height()),4)}tab.NotificationViewModel.showGeoLocationNotification(cC,-1,{x:cE.x,y:cE.y})}},spiff.Widget,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(Q,a,{$9:function(L,cC,cD,cE){var cF=[L,cC,cD,cE];tab.CanvasRenderer.strokePath(this.get_currentContext(),cF,false,true)},$a:function(L,cC,cD){this.get_currentContext().set_linePattern(cC);this.get_currentContext().set_lineCap(((cC==='solid')?'square':'butt'));this.get_currentContext().set_strokeStyle(tab.ColorModel.fromArgbInt(L).toString());this.get_currentContext().set_lineWidth(cD)},renderGridLines:function(L,cC){var cD=L.GridLines;var cE=L.TickPlacement;var cF=L.PaneCount;var cG=L.AxisOutput;var cH=cC.paneRect;var cI=cC.paneColumn;var cJ=cC.paneRow;var cK=cJ+cF.ColumnCount;if(!Q.$9(cD,cE,cI,cK)){return}this.get_currentContext().save();this.get_currentContext().set_lineJoin(tab.TabRenderContext2D.defaultLineJoin);this.get_currentContext().set_shouldAntialias(false);this.get_currentContext().setClip(cH);var cL=Q.$7(cG,cI);var cM=Q.$8(cG,cJ);var cN=(Q.$b(cD,cI)?Q.$0(cH,cD.ZeroPoint[cI],cL):Number.NaN);var cO=(Q.$c(cD,cK)?Q.$1(cH,cD.ZeroPoint[cK],cM):Number.NaN);if(Q.$a(cE)){if(Q.$5(cD)){this.$a(cD.X.LineColor,tab.EnumConversions.linePatternFromInt(cD.X.LineStyle),cD.X.LineWidth);var cP=ch.getTickPlacement(cE,cH,cI,cL,true);var cQ=cH.y;var cR=cH.y+cH.h;for(var cS=0;cS<cP.length;cS++){var cT=cP[cS];if(!(cT===cN)){this.$9(cT,cQ,cT,cR)}}}if(Q.$6(cD)){this.$a(cD.Y.LineColor,tab.EnumConversions.linePatternFromInt(cD.Y.LineStyle),cD.Y.LineWidth);var cU=ch.getTickPlacement(cE,cH,cK,cM,false);var cV=cH.x;var cW=cH.x+cH.w;for(var cX=0;cX<cU.length;cX++){var cY=cU[cX];if(!(cY===cO)){this.$9(cV,cY,cW,cY)}}}}if(!isNaN(cN)){this.$a(cD.X.ZeroLineColor,tab.EnumConversions.linePatternFromInt(cD.X.ZeroLineStyle),cD.X.ZeroLineWidth);var cZ=ss.round(cN);if(cZ>=cH.x&&cZ<=cH.x+cH.w){this.$9(cZ,cH.y,cZ,cH.y+cH.h)}}if(!isNaN(cO)){this.$a(cD.Y.ZeroLineColor,tab.EnumConversions.linePatternFromInt(cD.Y.ZeroLineStyle),cD.Y.ZeroLineWidth);var da=ss.round(cO);if(da>=cH.y&&da<=cH.y+cH.h){this.$9(cH.x,da,cH.x+cH.w,da)}}this.get_currentContext().restore()}},tab.CanvasRenderer);ss.initClass(bC,a,{renderMultipolygonMark:function(L,cC,cD){var cE=L.get_hasSelection();var cF=L.get_hasBrushing();var cG='colorOverrideNone';var cH=L.getUserPaneMarkRange(cC);var cI=cH.firstMark;var cJ=cH.lastMark;var cK=L.getUserPaneRectByIndex(cC);this.get_currentContext().save();switch(cD){case'normalUnderPass':{if(L.get_hasBackground()&&L.get_hasHalos()){if(cE||cF){cG='colorOverrideFog'}else{cG='colorOverrideNone'}{L.markWorldOffsets.forEach(ss.mkdel(this,function(cL,cM){bC.$d(this.get_currentContext(),cM);for(var cN=cI;cN<=cJ;cN++){if(cL.has(cN)){continue}if(!L.markNeedsDraw(cN)){continue}if(L.getMarkState(cN)!=='markStateNormal'){continue}this.drawMultipolygonMarkLayer(L,cN,'normalUnder',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cM,0)){this.get_currentContext().restore()}}))}if(cE||cF){cG='colorOverrideNone';{L.markWorldOffsets.forEach(ss.mkdel(this,function(cL,cM){bC.$d(this.get_currentContext(),cM);for(var cN=cI;cN<=cJ;cN++){if(cL.has(cN)){continue}if(!L.markNeedsDraw(cN)){continue}if(L.getMarkState(cN)!=='markStateHighlighted'){continue}this.drawMultipolygonMarkLayer(L,cN,'normalUnder',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cM,0)){this.get_currentContext().restore()}}))}}}break}case'normalOnPass':{if(cE||cF){cG='colorOverrideFog'}else{cG='colorOverrideNone'}{L.markWorldOffsets.forEach(ss.mkdel(this,function(cL,cM){bC.$d(this.get_currentContext(),cM);for(var cN=cI;cN<=cJ;cN++){if(cL.has(cN)){continue}if(!L.markNeedsDraw(cN)){continue}if(L.getMarkState(cN)!=='markStateNormal'){continue}this.drawMultipolygonMarkLayer(L,cN,'normalOn',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cM,0)){this.get_currentContext().restore()}}))}break}case'highlightedUnderPass':{break}case'highlightedOnPass':{if(cE||cF){cG='colorOverrideNone';{L.markWorldOffsets.forEach(ss.mkdel(this,function(cL,cM){bC.$d(this.get_currentContext(),cM);for(var cN=cI;cN<=cJ;cN++){if(cL.has(cN)){continue}if(!L.markNeedsDraw(cN)){continue}if(L.getMarkState(cN)!=='markStateHighlighted'){continue}this.drawMultipolygonMarkLayer(L,cN,'normalOn',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cM,0)){this.get_currentContext().restore()}}))}}break}case'selectedUnderPass':{if(cE||cF){cG='colorOverrideOpaque';{L.markWorldOffsets.forEach(ss.mkdel(this,function(cL,cM){bC.$d(this.get_currentContext(),cM);for(var cN=cI;cN<=cJ;cN++){if(cL.has(cN)){continue}if(!L.markNeedsDraw(cN)){continue}if(L.getMarkState(cN)!=='markStateSelected'){continue}this.drawMultipolygonMarkLayer(L,cN,'selectedUnder',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cM,0)){this.get_currentContext().restore()}}))}}break}case'selectedOnPass':{if(cE||cF){cG='colorOverrideOpaque';{L.markWorldOffsets.forEach(ss.mkdel(this,function(cL,cM){bC.$d(this.get_currentContext(),cM);for(var cN=cI;cN<=cJ;cN++){if(cL.has(cN)){continue}if(!L.markNeedsDraw(cN)){continue}if(L.getMarkState(cN)!=='markStateSelected'){continue}this.drawMultipolygonMarkLayer(L,cN,'normalOn',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cM,0)){this.get_currentContext().restore()}}))}}break}}this.get_currentContext().restore()},drawMultipolygonMarkLayer:function(L,cC,cD,cE){if(L.clipCase!==0){this.get_currentContext().save();this.clipRect(L.clipCase,L.c.get('cell_x').gv(cC),L.c.get('cell_y').gv(cC),L.c.get('clip_width').gv(cC),L.c.get('clip_height').gv(cC))}var cF=((cD!=='normalOn')?0:bC.$e());var cG='empty';var cH=L.getMarkGeometry(L.c.get('geometry').gv(cC));if(ss.isValue(cH)){cG=cH.geometryType}switch(cG){case'multiPolygon':{if(!L.hasPixelGeometry){this.get_currentContext().save();this.get_currentContext().translate(L.c.get('x').gv(cC),L.c.get('y').gv(cC));this.get_currentContext().scale(L.c.get('size').gv(cC),L.c.get('size').gv(cC))}tab.CanvasRenderer.createMultipolygonPath(this.get_currentContext(),cH);if(!L.hasPixelGeometry){this.get_currentContext().restore()}switch(cD){case'normalUnder':{{this.strokeCurrentPath(2-cF,L.c.get('halo_color').gv(cC)[cE])}break}case'selectedUnder':{{this.strokeCurrentPath(2-cF,L.c.get('selected_halo_color').gv(cC)[cE])}break}case'normalOn':{{this.fillCurrentPath(L.getMarkColors(cC)[cE])}if(L.c.get('draw_border').gv(cC)){this.strokeCurrentPath(1-cF,L.c.get('border_color').gv(cC)[cE])}break}default:{break}}break}case'multiLineString':{if(!L.hasPixelGeometry){this.get_currentContext().save();this.get_currentContext().translate(L.c.get('x').gv(cC),L.c.get('y').gv(cC));this.get_currentContext().scale(L.c.get('size').gv(cC),L.c.get('size').gv(cC))}tab.CanvasRenderer.createMultiLinePath(this.get_currentContext(),cH);if(!L.hasPixelGeometry){this.get_currentContext().restore()}switch(cD){case'normalUnder':{{tab.CanvasRenderer.fillMultiLineStringPath(this.get_currentContext(),L.c.get('size').gv(cC)+4,L.c.get('halo_color').gv(cC)[cE])}{tab.CanvasRenderer.fillMultiLineStringEndCaps(this.get_currentContext(),cH.multiLine,L.c.get('size').gv(cC)+4,2,L.c.get('halo_color').gv(cC)[cE])}break}case'selectedUnder':{{tab.CanvasRenderer.fillMultiLineStringPath(this.get_currentContext(),L.c.get('size').gv(cC)+4,L.c.get('selected_halo_color').gv(cC)[cE])}{tab.CanvasRenderer.fillMultiLineStringEndCaps(this.get_currentContext(),cH.multiLine,L.c.get('size').gv(cC)+4,2,L.c.get('selected_halo_color').gv(cC)[cE])}break}case'normalOn':{{tab.CanvasRenderer.fillMultiLineStringPath(this.get_currentContext(),L.c.get('size').gv(cC),L.getMarkColors(cC)[cE])}break}default:{break}}break}case'multiPoint':{if(!L.hasPixelGeometry){this.get_currentContext().save();this.get_currentContext().translate(L.c.get('x').gv(cC),L.c.get('y').gv(cC));this.get_currentContext().scale(L.c.get('size').gv(cC),L.c.get('size').gv(cC))}tab.CanvasRenderer.createMultipointPath(this.get_currentContext(),7,cH);if(!L.hasPixelGeometry){this.get_currentContext().restore()}switch(cD){case'normalUnder':{{this.strokeCurrentPath(2-cF,L.c.get('halo_color').gv(cC)[cE])}break}case'selectedUnder':{{this.strokeCurrentPath(2-cF,L.c.get('selected_halo_color').gv(cC)[cE])}break}case'normalOn':{{this.fillCurrentPath(L.getMarkColors(cC)[cE])}if(L.c.get('draw_border').gv(cC)){this.strokeCurrentPath(1-cF,L.c.get('border_color').gv(cC)[cE])}break}default:{break}}break}case'empty':{tab.CanvasRenderer.createPlaceholderPath(this.get_currentContext(),L.c.get('x').gv(cC),L.c.get('y').gv(cC),7);switch(cD){case'normalUnder':{{this.strokeCurrentPath(2-cF,L.c.get('halo_color').gv(cC)[cE])}break}case'selectedUnder':{{this.strokeCurrentPath(2-cF,L.c.get('selected_halo_color').gv(cC)[cE])}break}case'normalOn':{{this.fillCurrentPath(L.getMarkColors(cC)[cE])}if(L.c.get('draw_border').gv(cC)){this.strokeCurrentPath(1-cF,L.c.get('border_color').gv(cC)[cE])}break}default:{break}}break}default:{break}}if(L.clipCase!==0){this.get_currentContext().restore()}},renderAreaMark:function(L,cC,cD){var cE=L.get_hasSelection();var cF=L.get_hasBrushing();var cG='colorOverrideNone';var cH=L.getUserPaneMarkRange(cC);var cI=cH.firstMark;var cJ=cH.lastMark;var cK=L.getUserPaneRectByIndex(cC);var cL=L.get_lineDrawState();this.get_currentContext().save();switch(cD){case'normalUnderPass':{break}case'normalOnPass':{if(cE||cF){cG='colorOverrideFog'}else{cG='colorOverrideNone'}var cM=cL.get_lineAttributes();for(var cN=0;cN<cM.length;cN++){var cO=cM[cN];if(cO.get_lineState()!=='lineStateNormal'){continue}var cP=cO.worldOffsets;var cQ=cP.length;for(var cR=0;cR<cQ;cR++){var cS=cP[cR];bC.$d(this.get_currentContext(),cS);{for(var cT=0;cT<cO.marksNeedingDraw.length;cT++){var cU=cO.marksNeedingDraw[cT];this.drawAreaMarkLayer(L,cU,'edgeOn',cG,cO.startIndex)}}if(cS!==0){this.get_currentContext().restore()}}}break}case'highlightedUnderPass':{break}case'highlightedOnPass':{if(cE||cF){cG='colorOverrideNone';var cV=cL.get_lineAttributes();for(var cW=0;cW<cV.length;cW++){var cX=cV[cW];if(cX.get_lineState()!=='lineStateHighlighted'){continue}var cY=cX.worldOffsets;var cZ=cY.length;for(var da=0;da<cZ;da++){var db=cY[da];bC.$d(this.get_currentContext(),db);{for(var dc=0;dc<cX.marksNeedingDraw.length;dc++){var dd=cX.marksNeedingDraw[dc];this.drawAreaMarkLayer(L,dd,'edgeOn',cG,cX.startIndex)}}if(db!==0){this.get_currentContext().restore()}}}var de=cL.get_lineAttributes();for(var df=0;df<de.length;df++){var dg=de[df];if(dg.get_lineState()!=='lineStateHighlighted'){continue}var dh=dg.worldOffsets;var di=dh.length;for(var dj=0;dj<di;dj++){var dk=dh[dj];bC.$d(this.get_currentContext(),dk);if(!dg.get_allHighlighted()){{for(var dl=0;dl<dg.marksNeedingDraw.length;dl++){var dm=dg.marksNeedingDraw[dl];if(L.getMarkState(dm)==='markStateHighlighted'){this.drawAreaMarkLayer(L,dm,'highlightedUnder1',cG,dg.startIndex);this.drawAreaMarkLayer(L,dm,'highlightedUnder',cG,dg.startIndex)}}}{for(var dn=0;dn<dg.marksNeedingDraw.length;dn++){var dp=dg.marksNeedingDraw[dn];if(L.getMarkState(dp)==='markStateHighlighted'){this.drawAreaMarkLayer(L,dp,'highlightedOn1',cG,dg.startIndex);this.drawAreaMarkLayer(L,dp,'highlightedOn',cG,dg.startIndex)}}}}if(dk!==0){this.get_currentContext().restore()}}}}break}case'selectedUnderPass':{break}case'selectedOnPass':{if(cE||cF){cG='colorOverrideOpaque';var dq=cL.get_lineAttributes();for(var dr=0;dr<dq.length;dr++){var ds=dq[dr];if(ds.get_lineState()!=='lineStateSelected'){continue}var dt=ds.worldOffsets;var du=dt.length;for(var dv=0;dv<du;dv++){var dw=dt[dv];bC.$d(this.get_currentContext(),dw);{for(var dx=0;dx<ds.marksNeedingDraw.length;dx++){var dy=ds.marksNeedingDraw[dx];this.drawAreaMarkLayer(L,dy,'edgeOn',cG,ds.startIndex)}}if(dw!==0){this.get_currentContext().restore()}}}var dz=cL.get_lineAttributes();for(var dA=0;dA<dz.length;dA++){var dB=dz[dA];if(dB.get_lineState()!=='lineStateSelected'){continue}var dC=dB.worldOffsets;var dD=dC.length;for(var dE=0;dE<dD;dE++){var dF=dC[dE];bC.$d(this.get_currentContext(),dF);if(!dB.get_allHighlighted()){{for(var dG=0;dG<dB.marksNeedingDraw.length;dG++){var dH=dB.marksNeedingDraw[dG];if(L.getMarkState(dH)==='markStateHighlighted'){this.drawAreaMarkLayer(L,dH,'highlightedUnder1',cG,dB.startIndex);this.drawAreaMarkLayer(L,dH,'highlightedUnder',cG,dB.startIndex)}}}{for(var dI=0;dI<dB.marksNeedingDraw.length;dI++){var dJ=dB.marksNeedingDraw[dI];if(L.getMarkState(dJ)==='markStateHighlighted'){this.drawAreaMarkLayer(L,dJ,'highlightedOn1',cG,dB.startIndex);this.drawAreaMarkLayer(L,dJ,'highlightedOn',cG,dB.startIndex)}}}}if(dF!==0){this.get_currentContext().restore()}}}var dK=cL.get_lineAttributes();for(var dL=0;dL<dK.length;dL++){var dM=dK[dL];if(dM.get_lineState()!=='lineStateSelected'){continue}var dN=dM.worldOffsets;var dO=dN.length;for(var dP=0;dP<dO;dP++){var dQ=dN[dP];bC.$d(this.get_currentContext(),dQ);{for(var dR=0;dR<dM.marksNeedingDraw.length;dR++){var dS=dM.marksNeedingDraw[dR];if(L.getMarkState(dS)==='markStateSelected'){this.drawAreaMarkLayer(L,dS,'selectedUnder1',cG,dM.startIndex);this.drawAreaMarkLayer(L,dS,'selectedUnder',cG,dM.startIndex)}}}{for(var dT=0;dT<dM.marksNeedingDraw.length;dT++){var dU=dM.marksNeedingDraw[dT];if(L.getMarkState(dU)==='markStateSelected'){this.drawAreaMarkLayer(L,dU,'selectedOn1',cG,dM.startIndex);this.drawAreaMarkLayer(L,dU,'selectedOn',cG,dM.startIndex)}}}if(dQ!==0){this.get_currentContext().restore()}}}}break}}this.get_currentContext().restore()},drawAreaMarkLayer:function(L,cC,cD,cE,cF){var cG=L.c.get('l_neighbor').gv(cC);var cH=L.c.get('r_neighbor').gv(cC);var cI=L.clipCase;if(cI!==0){this.get_currentContext().save();this.clipRect(cI,L.c.get('cell_x').gv(cC),L.c.get('cell_y').gv(cC),L.c.get('clip_width').gv(cC),L.c.get('clip_height').gv(cC))}var cJ=L.drawBorder;switch(cD){case'edgeOn':{if(L.c.get('r_neighbor').gv(cC)!==-1){var cK=[Math.round(L.c.get('x1').gv(cC)),Math.round(L.c.get('y1').gv(cC)),Math.round(L.c.get('x1').gv(cH)),Math.round(L.c.get('y1').gv(cH)),Math.round(L.c.get('x_prev').gv(cH)),Math.round(L.c.get('y_prev').gv(cH)),Math.round(L.c.get('x_next').gv(cC)),Math.round(L.c.get('y_next').gv(cC))];this.get_currentContext().set_lineJoin('miter');this.$b(cK,L.getMarkColors(cF)[cE])}if(cJ&&L.c.get('r_neighbor').gv(cC)!==-1){var cL=[L.c.get('x1').gv(cC),L.c.get('y1').gv(cC),L.c.get('x1').gv(cH),L.c.get('y1').gv(cH)];this.$c(cL,1,L.c.get('border_color').gv(cC)[cE],true)}if(cJ&&L.c.get('r_neighbor').gv(cC)!==-1){var cM=[L.c.get('x_next').gv(cC),L.c.get('y_next').gv(cC),L.c.get('x_prev').gv(cH),L.c.get('y_prev').gv(cH)];this.$c(cM,1,L.c.get('border_color').gv(cC)[cE],true)}if(cJ&&(L.c.get('l_neighbor').gv(cC)!==-1&&L.c.get('r_neighbor').gv(cC)!==-1)){var cN=[L.c.get('x_prev').gv(cC),L.c.get('y_prev').gv(cC),L.c.get('x_next').gv(cC),L.c.get('y_next').gv(cC)];this.$c(cN,1,L.c.get('border_color').gv(cC)[cE],true)}if(cJ&&L.c.get('l_neighbor').gv(cC)===-1){var cO=[L.c.get('x1').gv(cC),L.c.get('y1').gv(cC),L.c.get('x_next').gv(cC),L.c.get('y_next').gv(cC)];this.$c(cO,1,L.c.get('border_color').gv(cC)[cE],true)}if(cJ&&L.c.get('r_neighbor').gv(cC)===-1){var cP=[L.c.get('x1').gv(cC),L.c.get('y1').gv(cC),L.c.get('x_prev').gv(cC),L.c.get('y_prev').gv(cC)];this.$c(cP,1,L.c.get('border_color').gv(cC)[cE],true)}if(!cJ&&L.c.get('r_neighbor').gv(cC)!==-1){var cQ=[L.c.get('x1').gv(cC),L.c.get('y1').gv(cC),L.c.get('x1').gv(cH),L.c.get('y1').gv(cH)];this.$c(cQ,1,L.getMarkColors(cF)[cE],true)}if(!cJ&&L.c.get('r_neighbor').gv(cC)!==-1){var cR=[L.c.get('x_next').gv(cC),L.c.get('y_next').gv(cC),L.c.get('x_prev').gv(cH),L.c.get('y_prev').gv(cH)];this.$c(cR,1,L.getMarkColors(cF)[cE],true)}if(!cJ&&(L.c.get('l_neighbor').gv(cC)!==-1&&L.c.get('r_neighbor').gv(cC)!==-1)){var cS=[L.c.get('x_prev').gv(cC),L.c.get('y_prev').gv(cC),L.c.get('x_next').gv(cC),L.c.get('y_next').gv(cC)];this.$c(cS,1,L.getMarkColors(cF)[cE],true)}if(!cJ&&L.c.get('l_neighbor').gv(cC)===-1){var cT=[L.c.get('x1').gv(cC),L.c.get('y1').gv(cC),L.c.get('x_next').gv(cC),L.c.get('y_next').gv(cC)];this.$c(cT,1,L.getMarkColors(cF)[cE],true)}if(!cJ&&L.c.get('r_neighbor').gv(cC)===-1){var cU=[L.c.get('x1').gv(cC),L.c.get('y1').gv(cC),L.c.get('x_prev').gv(cC),L.c.get('y_prev').gv(cC)];this.$c(cU,1,L.getMarkColors(cF)[cE],true)}break}case'selectedOn':{{tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),0+L.c.get('x1').gv(cC),0+L.c.get('y1').gv(cC),5,L.getMarkColors(cC)[cE])}break}case'selectedUnder':{{tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+L.c.get('x1').gv(cC),0+L.c.get('y1').gv(cC),5,L.c.get('selected_halo_color').gv(cC)[cE],4)}break}case'selectedOn1':{{tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),0+L.c.get('x').gv(cC),0+L.c.get('y').gv(cC),5,L.getMarkColors(cC)[cE])}break}case'selectedUnder1':{{tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+L.c.get('x').gv(cC),0+L.c.get('y').gv(cC),5,L.c.get('selected_halo_color').gv(cC)[cE],4)}break}case'highlightedOn':{{tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),0+L.c.get('x1').gv(cC),0+L.c.get('y1').gv(cC),5,L.getMarkColors(cC)[cE])}break}case'highlightedUnder':{{tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+L.c.get('x1').gv(cC),0+L.c.get('y1').gv(cC),5,L.c.get('selected_multi_prim_halo_color').gv(cC)[cE],4)}break}case'highlightedOn1':{{tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),0+L.c.get('x').gv(cC),0+L.c.get('y').gv(cC),5,L.getMarkColors(cC)[cE])}break}case'highlightedUnder1':{{tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+L.c.get('x').gv(cC),0+L.c.get('y').gv(cC),5,L.c.get('selected_multi_prim_halo_color').gv(cC)[cE],4)}break}default:{break}}if(cI!==0){this.get_currentContext().restore()}},renderMarkLabels:function(L,cC,cD){var cE=L.get_hasSelection();var cF=L.get_hasBrushing();var cG='colorOverrideNone';var cH=L.getUserPaneMarkRange(cC);var cI=cH.firstMark;var cJ=cH.lastMark;var cK=L.getUserPaneRectByIndex(cC);this.get_currentContext().save();var cL=this.$A(L);switch(cD){case'normalUnderPass':{if(cE||cF){cG='colorOverrideFog'}else{cG='colorOverrideNone'}{var cM=tab.RectXYUtil.offsetRect(this.get_currentContext().dirtyRect,this.get_renderOffset());for(var cN=cI;cN<=cJ;cN++){if(!L.markHasLabel(cN)||!L.markLabelNeedsDraw(cN,cM)){continue}if(L.getMarkLabelState(cN)!=='markStateNormal'){continue}if(L.get_clipLabelToCell()){this.get_currentContext().save();this.clipRect(3,L.c.get('cell_x').gv(cN),L.c.get('cell_y').gv(cN),L.c.get('clip_width').gv(cN),L.c.get('clip_height').gv(cN))}var cO=L.getMarkLabelInstanceOffsets(cN);var cP=cO.length;for(var cQ=0;cQ<cP;cQ++){var cR=cO[cQ];if(cR!==0){this.get_currentContext().save();this.get_currentContext().translate(cR,0)}this.drawMarkLabelLayer(L,cN,'normalUnder',cG);if(cR!==0){this.get_currentContext().restore()}}if(L.get_clipLabelToCell()){this.get_currentContext().restore()}}}cG='colorOverrideNone';{var cS=tab.RectXYUtil.offsetRect(this.get_currentContext().dirtyRect,this.get_renderOffset());for(var cT=cI;cT<=cJ;cT++){if(!L.markHasLabel(cT)||!L.markLabelNeedsDraw(cT,cS)){continue}if(L.getMarkLabelState(cT)!=='markStateHighlighted'){continue}if(L.get_clipLabelToCell()){this.get_currentContext().save();this.clipRect(3,L.c.get('cell_x').gv(cT),L.c.get('cell_y').gv(cT),L.c.get('clip_width').gv(cT),L.c.get('clip_height').gv(cT))}var cU=L.getMarkLabelInstanceOffsets(cT);var cV=cU.length;for(var cW=0;cW<cV;cW++){var cX=cU[cW];if(cX!==0){this.get_currentContext().save();this.get_currentContext().translate(cX,0)}this.drawMarkLabelLayer(L,cT,'normalUnder',cG);if(cX!==0){this.get_currentContext().restore()}}if(L.get_clipLabelToCell()){this.get_currentContext().restore()}}}cG='colorOverrideNone';{var cY=tab.RectXYUtil.offsetRect(this.get_currentContext().dirtyRect,this.get_renderOffset());for(var cZ=cI;cZ<=cJ;cZ++){if(!L.markHasLabel(cZ)||!L.markLabelNeedsDraw(cZ,cY)){continue}if(L.getMarkLabelState(cZ)!=='markStateSelected'){continue}if(L.get_clipLabelToCell()){this.get_currentContext().save();this.clipRect(3,L.c.get('cell_x').gv(cZ),L.c.get('cell_y').gv(cZ),L.c.get('clip_width').gv(cZ),L.c.get('clip_height').gv(cZ))}var da=L.getMarkLabelInstanceOffsets(cZ);var db=da.length;for(var dc=0;dc<db;dc++){var dd=da[dc];if(dd!==0){this.get_currentContext().save();this.get_currentContext().translate(dd,0)}this.drawMarkLabelLayer(L,cZ,'normalUnder',cG);if(dd!==0){this.get_currentContext().restore()}}if(L.get_clipLabelToCell()){this.get_currentContext().restore()}}}break}case'normalOnPass':{if(cE||cF){cG='colorOverrideFog'}else{cG='colorOverrideNone'}{var de=tab.RectXYUtil.offsetRect(this.get_currentContext().dirtyRect,this.get_renderOffset());for(var df=cI;df<=cJ;df++){if(!L.markHasLabel(df)||!L.markLabelNeedsDraw(df,de)){continue}if(L.getMarkLabelState(df)!=='markStateNormal'){continue}if(L.get_clipLabelToCell()){this.get_currentContext().save();this.clipRect(3,L.c.get('cell_x').gv(df),L.c.get('cell_y').gv(df),L.c.get('clip_width').gv(df),L.c.get('clip_height').gv(df))}var dg=L.getMarkLabelInstanceOffsets(df);var dh=dg.length;for(var di=0;di<dh;di++){var dj=dg[di];if(dj!==0){this.get_currentContext().save();this.get_currentContext().translate(dj,0)}var dk=this.get_currentContext().get_textAlign()==='end';var dl=L.getMarkLabelProperty('text_run_offset',df);var dm=L.getMarkLabelProperty('text_run_count',df);var dn=dm>1;for(var dp=0;dp<dm;dp++){var dq=dp+dl;if(dk){dq=dl+dm-dp-1}this.drawLabelRunLayer(L,df,'normalOn',cG,dq,dn,cL)}this.clearPrevTextRunInfo();if(dj!==0){this.get_currentContext().restore()}}if(L.get_clipLabelToCell()){this.get_currentContext().restore()}}}break}case'highlightedUnderPass':{break}case'highlightedOnPass':{if(cE||cF){cG='colorOverrideNone';{var dr=tab.RectXYUtil.offsetRect(this.get_currentContext().dirtyRect,this.get_renderOffset());for(var ds=cI;ds<=cJ;ds++){if(!L.markHasLabel(ds)||!L.markLabelNeedsDraw(ds,dr)){continue}if(L.getMarkLabelState(ds)!=='markStateHighlighted'){continue}if(L.get_clipLabelToCell()){this.get_currentContext().save();this.clipRect(3,L.c.get('cell_x').gv(ds),L.c.get('cell_y').gv(ds),L.c.get('clip_width').gv(ds),L.c.get('clip_height').gv(ds))}var dt=L.getMarkLabelInstanceOffsets(ds);var du=dt.length;for(var dv=0;dv<du;dv++){var dw=dt[dv];if(dw!==0){this.get_currentContext().save();this.get_currentContext().translate(dw,0)}var dx=this.get_currentContext().get_textAlign()==='end';var dy=L.getMarkLabelProperty('text_run_offset',ds);var dz=L.getMarkLabelProperty('text_run_count',ds);var dA=dz>1;for(var dB=0;dB<dz;dB++){var dC=dB+dy;if(dx){dC=dy+dz-dB-1}this.drawLabelRunLayer(L,ds,'highlightedOn',cG,dC,dA,cL)}this.clearPrevTextRunInfo();if(dw!==0){this.get_currentContext().restore()}}if(L.get_clipLabelToCell()){this.get_currentContext().restore()}}}}break}case'selectedUnderPass':{if(cE||cF){cG='colorOverrideOpaque';{var dD=tab.RectXYUtil.offsetRect(this.get_currentContext().dirtyRect,this.get_renderOffset());for(var dE=cI;dE<=cJ;dE++){if(!L.markHasLabel(dE)||!L.markLabelNeedsDraw(dE,dD)){continue}if(L.getMarkLabelState(dE)!=='markStateSelected'){continue}if(L.get_clipLabelToCell()){this.get_currentContext().save();this.clipRect(3,L.c.get('cell_x').gv(dE),L.c.get('cell_y').gv(dE),L.c.get('clip_width').gv(dE),L.c.get('clip_height').gv(dE))}var dF=L.getMarkLabelInstanceOffsets(dE);var dG=dF.length;for(var dH=0;dH<dG;dH++){var dI=dF[dH];if(dI!==0){this.get_currentContext().save();this.get_currentContext().translate(dI,0)}this.drawMarkLabelLayer(L,dE,'selectedUnder',cG);if(dI!==0){this.get_currentContext().restore()}}if(L.get_clipLabelToCell()){this.get_currentContext().restore()}}}}break}case'selectedOnPass':{if(cE||cF){cG='colorOverrideOpaque';{var dJ=tab.RectXYUtil.offsetRect(this.get_currentContext().dirtyRect,this.get_renderOffset());for(var dK=cI;dK<=cJ;dK++){if(!L.markHasLabel(dK)||!L.markLabelNeedsDraw(dK,dJ)){continue}if(L.getMarkLabelState(dK)!=='markStateSelected'){continue}if(L.get_clipLabelToCell()){this.get_currentContext().save();this.clipRect(3,L.c.get('cell_x').gv(dK),L.c.get('cell_y').gv(dK),L.c.get('clip_width').gv(dK),L.c.get('clip_height').gv(dK))}var dL=L.getMarkLabelInstanceOffsets(dK);var dM=dL.length;for(var dN=0;dN<dM;dN++){var dO=dL[dN];if(dO!==0){this.get_currentContext().save();this.get_currentContext().translate(dO,0)}var dP=this.get_currentContext().get_textAlign()==='end';var dQ=L.getMarkLabelProperty('text_run_offset',dK);var dR=L.getMarkLabelProperty('text_run_count',dK);var dS=dR>1;for(var dT=0;dT<dR;dT++){var dU=dT+dQ;if(dP){dU=dQ+dR-dT-1}this.drawLabelRunLayer(L,dK,'normalOn',cG,dU,dS,cL)}this.clearPrevTextRunInfo();if(dO!==0){this.get_currentContext().restore()}}if(L.get_clipLabelToCell()){this.get_currentContext().restore()}}}}break}}this.get_currentContext().restore()},drawMarkLabelLayer:function(L,cC,cD,cE){if(L.clipCase!==0){this.get_currentContext().save();this.clipRect(L.clipCase,L.c.get('cell_x').gv(cC),L.c.get('cell_y').gv(cC),L.c.get('clip_width').gv(cC),L.c.get('clip_height').gv(cC))}switch(cD){case'normalUnder':{{if(L.get_hasBackground()&&L.get_hasHalos()){var cF=L.getMarkLabelProperty('x',cC);var cG=L.getMarkLabelProperty('y',cC);var cH=L.getMarkLabelProperty('width',cC);var cI=-L.getMarkLabelProperty('height',cC);if(cI<0){cG+=cI;cI=Math.abs(cI)}var cJ=0;var cK=0;var cL;if(L.isMarkImpliedSelected(cC)){cL=L.c.get('selected_halo_color').gv(cC)['colorOverrideOpaque']}else{cL=L.getMarkLabelProperty('halo_color',cC)[cE]}bC.$c(this.get_currentContext(),cF+cJ,cG+cK,cH,cI,cL,0,0,false)}}{if(L.isMarkDebug(cC)){var cM=L.getMarkLabelProperty('x',cC);var cN=L.getMarkLabelProperty('y',cC);var cO=L.getMarkLabelProperty('width',cC);var cP=-L.getMarkLabelProperty('height',cC);if(cP<0){cN+=cP;cP=Math.abs(cP)}var cQ=0;var cR=0;var cS;if(L.isMarkImpliedSelected(cC)){cS=L.c.get('selected_halo_color').gv(cC)['colorOverrideOpaque']}else{cS=L.c.get('halo_color').gv(cC)[cE]}bC.$c(this.get_currentContext(),cM+cQ,cN+cR,cO,cP,cS,0,0,false)}}break}case'normalOn':{break}case'highlightedUnder':{{if(L.get_hasBackground()&&L.get_hasHalos()){var cT=L.getMarkLabelProperty('x',cC);var cU=L.getMarkLabelProperty('y',cC);var cV=L.getMarkLabelProperty('width',cC);var cW=-L.getMarkLabelProperty('height',cC);if(cW<0){cU+=cW;cW=Math.abs(cW)}var cX=0;var cY=0;var cZ;if(L.isMarkImpliedSelected(cC)){cZ=L.c.get('selected_halo_color').gv(cC)['colorOverrideOpaque']}else{cZ=L.getMarkLabelProperty('halo_color',cC)[cE]}bC.$c(this.get_currentContext(),cT+cX,cU+cY,cV,cW,cZ,0,0,false)}}{if(L.isMarkDebug(cC)){var da=L.getMarkLabelProperty('x',cC);var db=L.getMarkLabelProperty('y',cC);var dc=L.getMarkLabelProperty('width',cC);var dd=-L.getMarkLabelProperty('height',cC);if(dd<0){db+=dd;dd=Math.abs(dd)}var de=0;var df=0;var dg;if(L.isMarkImpliedSelected(cC)){dg=L.c.get('selected_halo_color').gv(cC)['colorOverrideOpaque']}else{dg=L.c.get('halo_color').gv(cC)[cE]}bC.$c(this.get_currentContext(),da+de,db+df,dc,dd,dg,0,0,false)}}break}case'highlightedOn':{break}case'selectedUnder':{break}default:{break}}if(L.clipCase!==0){this.get_currentContext().restore()}},drawTextRunLayer:function(L,cC,cD,cE,cF,cG,cH){if(L.clipCase!==0){this.get_currentContext().save();this.clipRect(L.clipCase,L.c.get('cell_x').gv(cC),L.c.get('cell_y').gv(cC),L.c.get('clip_width').gv(cC),L.c.get('clip_height').gv(cC))}switch(cD){case'normalUnder':{break}case'normalOn':{var cI=L.getTextRunProperty('text_style_id',cF);cH(cI);var cJ=L.$6(cI,cC,cE);var cK=L.getTextRunProperty('text_run',cF);var cL=L.getMarkLabelProperty('x',cC)+L.getTextRunProperty('text_run_x',cF);var cM=L.getMarkLabelProperty('y',cC)+L.getTextRunProperty('text_run_y',cF);var cN=(this.get_currentContext().get_isTextAngleHorizontal()?L.getMarkLabelProperty('width',cC):L.getMarkLabelProperty('height',cC));this.renderText(cK,cL,cM,cN,cJ,cG);break}case'highlightedUnder':{break}case'highlightedOn':{var cO=L.getTextRunProperty('text_style_id',cF);cH(cO);var cP=L.$6(cO,cC,cE);var cQ=L.getTextRunProperty('text_run',cF);var cR=L.getMarkLabelProperty('x',cC)+L.getTextRunProperty('text_run_x',cF);var cS=L.getMarkLabelProperty('y',cC)+L.getTextRunProperty('text_run_y',cF);var cT=(this.get_currentContext().get_isTextAngleHorizontal()?L.getMarkLabelProperty('width',cC):L.getMarkLabelProperty('height',cC));this.renderText(cQ,cR,cS,cT,cP,cG);break}case'selectedUnder':{break}default:{break}}if(L.clipCase!==0){this.get_currentContext().restore()}},drawLabelRunLayer:function(L,cC,cD,cE,cF,cG,cH){if(L.get_clipLabelToCell()&&L.clipCase!==0){this.get_currentContext().save();this.clipRect(L.clipCase,L.c.get('cell_x').gv(cC),L.c.get('cell_y').gv(cC),L.c.get('clip_width').gv(cC),L.c.get('clip_height').gv(cC))}switch(cD){case'normalUnder':{break}case'normalOn':{var cI=L.getTextRunProperty('text_style_id',cF);cH(cI);var cJ=L.$6(cI,cC,cE);var cK=L.getTextRunProperty('text_run',cF);var cL=L.getMarkLabelProperty('x',cC)+L.getTextRunProperty('text_run_x',cF);var cM=L.getMarkLabelProperty('y',cC)+L.getTextRunProperty('text_run_y',cF);var cN=(this.get_currentContext().get_isTextAngleHorizontal()?L.getMarkLabelProperty('width',cC):L.getMarkLabelProperty('height',cC));this.renderText(cK,cL,cM,cN,cJ,cG);break}case'highlightedUnder':{break}case'highlightedOn':{var cO=L.getTextRunProperty('text_style_id',cF);cH(cO);var cP=L.$6(cO,cC,cE);var cQ=L.getTextRunProperty('text_run',cF);var cR=L.getMarkLabelProperty('x',cC)+L.getTextRunProperty('text_run_x',cF);var cS=L.getMarkLabelProperty('y',cC)+L.getTextRunProperty('text_run_y',cF);var cT=(this.get_currentContext().get_isTextAngleHorizontal()?L.getMarkLabelProperty('width',cC):L.getMarkLabelProperty('height',cC));this.renderText(cQ,cR,cS,cT,cP,cG);break}case'selectedUnder':{break}default:{break}}if(L.get_clipLabelToCell()&&L.clipCase!==0){this.get_currentContext().restore()}},renderPieMark:function(L,cC,cD){var cE=L.get_hasSelection();var cF=L.get_hasBrushing();var cG='colorOverrideNone';var cH=L.getUserPaneMarkRange(cC);var cI=cH.firstMark;var cJ=cH.lastMark;var cK=L.getUserPaneRectByIndex(cC);var cL=L.get_lineDrawState();this.get_currentContext().save();switch(cD){case'normalUnderPass':{if(L.get_hasBackground()&&L.get_hasHalos()){if(cE||cF){cG='colorOverrideFog'}else{cG='colorOverrideNone'}var cM=cL.get_lineAttributes();for(var cN=0;cN<cM.length;cN++){var cO=cM[cN];var cP=cO.worldOffsets;var cQ=cP.length;for(var cR=0;cR<cQ;cR++){var cS=cP[cR];bC.$d(this.get_currentContext(),cS);{for(var cT=0;cT<cO.marksNeedingDraw.length;cT++){var cU=cO.marksNeedingDraw[cT];this.drawPieMarkLayer(L,cU,'normalUnder',cG)}}if(cS!==0){this.get_currentContext().restore()}}}}break}case'normalOnPass':{if(cE||cF){cG='colorOverrideFog'}else{cG='colorOverrideNone'}var cV=cL.get_lineAttributes();for(var cW=0;cW<cV.length;cW++){var cX=cV[cW];if(cX.get_lineState()!=='lineStateNormal'){continue}var cY=cX.worldOffsets;var cZ=cY.length;for(var da=0;da<cZ;da++){var db=cY[da];bC.$d(this.get_currentContext(),db);{for(var dc=0;dc<cX.marksNeedingDraw.length;dc++){var dd=cX.marksNeedingDraw[dc];this.drawPieMarkLayer(L,dd,'normalOn',cG)}}if(db!==0){this.get_currentContext().restore()}}}break}case'highlightedUnderPass':{break}case'highlightedOnPass':{if(cE||cF){var de=cL.get_lineAttributes();for(var df=0;df<de.length;df++){var dg=de[df];if(dg.get_lineState()!=='lineStateHighlighted'){continue}var dh=dg.worldOffsets;var di=dh.length;for(var dj=0;dj<di;dj++){var dk=dh[dj];bC.$d(this.get_currentContext(),dk);cG='colorOverrideFog';{for(var dl=0;dl<dg.marksNeedingDraw.length;dl++){var dm=dg.marksNeedingDraw[dl];if(L.getMarkState(dm)!=='markStateNormal'){continue}this.drawPieMarkLayer(L,dm,'normalOn',cG)}}cG='colorOverrideNone';{for(var dn=0;dn<dg.marksNeedingDraw.length;dn++){var dp=dg.marksNeedingDraw[dn];if(L.getMarkState(dp)!=='markStateHighlighted'){continue}this.drawPieMarkLayer(L,dp,'highlightedOn',cG)}}if(dk!==0){this.get_currentContext().restore()}}}}break}case'selectedUnderPass':{break}case'selectedOnPass':{if(cE||cF){var dq=cL.get_lineAttributes();for(var dr=0;dr<dq.length;dr++){var ds=dq[dr];if(ds.get_lineState()!=='lineStateSelected'){continue}var dt=ds.worldOffsets;var du=dt.length;for(var dv=0;dv<du;dv++){var dw=dt[dv];bC.$d(this.get_currentContext(),dw);cG='colorOverrideFog';{for(var dx=0;dx<ds.marksNeedingDraw.length;dx++){var dy=ds.marksNeedingDraw[dx];if(L.getMarkState(dy)!=='markStateNormal'){continue}this.drawPieMarkLayer(L,dy,'normalOn',cG)}}cG='colorOverrideNone';{for(var dz=0;dz<ds.marksNeedingDraw.length;dz++){var dA=ds.marksNeedingDraw[dz];if(L.getMarkState(dA)!=='markStateHighlighted'){continue}this.drawPieMarkLayer(L,dA,'highlightedOn',cG)}}cG='colorOverrideOpaque';{for(var dB=0;dB<ds.marksNeedingDraw.length;dB++){var dC=ds.marksNeedingDraw[dB];if(L.getMarkState(dC)!=='markStateSelected'){continue}this.drawPieMarkLayer(L,dC,'selectedUnder',cG)}}{for(var dD=0;dD<ds.marksNeedingDraw.length;dD++){var dE=ds.marksNeedingDraw[dD];if(L.getMarkState(dE)!=='markStateSelected'){continue}this.drawPieMarkLayer(L,dE,'selectedOn',cG)}}if(dw!==0){this.get_currentContext().restore()}}}}break}}this.get_currentContext().restore()},drawPieMarkLayer:function(L,cC,cD,cE){if(L.clipCase!==0){this.get_currentContext().save();this.clipRect(L.clipCase,L.c.get('cell_x').gv(cC),L.c.get('cell_y').gv(cC),L.c.get('clip_width').gv(cC),L.c.get('clip_height').gv(cC))}switch(cD){case'normalUnder':{var cF=L.c.get('size').gv(cC)/2;{var cG=L.c.get('theta').gv(cC);var cH=L.c.get('theta1').gv(cC);var cI=cG>cH;var cJ=L.c.get('halo_color').gv(cC)[cE];var cK=false;if(Math.abs(cG-cH)>=1){tab.CanvasRenderer.renderCircle(this.get_currentContext(),L.c.get('x').gv(cC),L.c.get('y').gv(cC),cF*2,cJ,4)}else{tab.CanvasRenderer.renderWedge(this.get_currentContext(),L.c.get('x').gv(cC),L.c.get('y').gv(cC),cF,cG,cH,cJ,4,cI,cK)}}break}case'normalOn':{var cL=L.c.get('size').gv(cC)/2;{var cM=L.c.get('theta').gv(cC);var cN=L.c.get('theta1').gv(cC);if(cM>cN){var cO=cM;cM=cN;cN=cO}var cP=L.c.get('x').gv(cC);var cQ=L.c.get('y').gv(cC);var cR=L.getMarkColors(cC)[cE];if(L.c.get('alpha').gv(cC)>=1){var cS=tab.CanvasRenderer.toCanvasAngle(cM);var cT=tab.CanvasRenderer.toCanvasAngle(cN);if(Math.abs(cT-cS)>=tab.CanvasRenderer.angleEpsilon){this.get_currentContext().beginPath();this.get_currentContext().set_lineCap('butt');this.get_currentContext().set_lineWidth(1.5);this.get_currentContext().set_strokeStyle(cR);this.get_currentContext().moveTo(cP,cQ);this.get_currentContext().lineTo(cP+Math.cos(cS)*cL,cQ+Math.sin(cS)*cL);this.get_currentContext().stroke()}}if(Math.abs(cM-cN)>=1){tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),cP,cQ,cL*2,cR)}else{this.renderFilledWedge(cP,cQ,cL,cM,cN,cR)}}if(L.c.get('draw_border').gv(cC)){var cU=L.c.get('theta').gv(cC);var cV=L.c.get('theta1').gv(cC);var cW=cU>cV;var cX=L.c.get('border_color').gv(cC)[cE];var cY=true;if(Math.abs(cU-cV)>=1){tab.CanvasRenderer.renderCircle(this.get_currentContext(),L.c.get('x').gv(cC),L.c.get('y').gv(cC),cL*2,cX,1)}else{tab.CanvasRenderer.renderWedge(this.get_currentContext(),L.c.get('x').gv(cC),L.c.get('y').gv(cC),cL,cU,cV,cX,1,cW,cY)}}break}case'highlightedUnder':{var cZ=L.c.get('size').gv(cC)/2;{var da=L.c.get('theta').gv(cC);var db=L.c.get('theta1').gv(cC);var dc=da>db;var dd=L.c.get('halo_color').gv(cC)[cE];var de=false;if(Math.abs(da-db)>=1){tab.CanvasRenderer.renderCircle(this.get_currentContext(),L.c.get('x').gv(cC),L.c.get('y').gv(cC),cZ*2,dd,4)}else{tab.CanvasRenderer.renderWedge(this.get_currentContext(),L.c.get('x').gv(cC),L.c.get('y').gv(cC),cZ,da,db,dd,4,dc,de)}}break}case'highlightedOn':{var df=L.c.get('size').gv(cC)/2;{var dg=L.c.get('theta').gv(cC);var dh=L.c.get('theta1').gv(cC);if(dg>dh){var di=dg;dg=dh;dh=di}var dj=L.c.get('x').gv(cC);var dk=L.c.get('y').gv(cC);var dl=L.getMarkColors(cC)[cE];if(L.c.get('alpha').gv(cC)>=1){var dm=tab.CanvasRenderer.toCanvasAngle(dg);var dn=tab.CanvasRenderer.toCanvasAngle(dh);if(Math.abs(dn-dm)>=tab.CanvasRenderer.angleEpsilon){this.get_currentContext().beginPath();this.get_currentContext().set_lineCap('butt');this.get_currentContext().set_lineWidth(1.5);this.get_currentContext().set_strokeStyle(dl);this.get_currentContext().moveTo(dj,dk);this.get_currentContext().lineTo(dj+Math.cos(dm)*df,dk+Math.sin(dm)*df);this.get_currentContext().stroke()}}if(Math.abs(dg-dh)>=1){tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),dj,dk,df*2,dl)}else{this.renderFilledWedge(dj,dk,df,dg,dh,dl)}}if(L.c.get('draw_border').gv(cC)){var dp=L.c.get('theta').gv(cC);var dq=L.c.get('theta1').gv(cC);var dr=dp>dq;var ds=L.c.get('border_color').gv(cC)[cE];var dt=true;if(Math.abs(dp-dq)>=1){tab.CanvasRenderer.renderCircle(this.get_currentContext(),L.c.get('x').gv(cC),L.c.get('y').gv(cC),df*2,ds,1)}else{tab.CanvasRenderer.renderWedge(this.get_currentContext(),L.c.get('x').gv(cC),L.c.get('y').gv(cC),df,dp,dq,ds,1,dr,dt)}}break}case'selectedUnder':{var du=L.c.get('size').gv(cC)/2;{var dv=L.c.get('theta').gv(cC);var dw=L.c.get('theta1').gv(cC);var dx=dv>dw;var dy=L.c.get('selected_halo_color').gv(cC)[cE];var dz=false;if(Math.abs(dv-dw)>=1){tab.CanvasRenderer.renderCircle(this.get_currentContext(),L.c.get('x').gv(cC),L.c.get('y').gv(cC),du*2,dy,4)}else{tab.CanvasRenderer.renderWedge(this.get_currentContext(),L.c.get('x').gv(cC),L.c.get('y').gv(cC),du,dv,dw,dy,4,dx,dz)}}break}case'selectedOn':{var dA=L.c.get('size').gv(cC)/2;{var dB=L.c.get('theta').gv(cC);var dC=L.c.get('theta1').gv(cC);if(dB>dC){var dD=dB;dB=dC;dC=dD}var dE=L.c.get('x').gv(cC);var dF=L.c.get('y').gv(cC);var dG=L.getMarkColors(cC)[cE];if(L.c.get('alpha').gv(cC)>=1){var dH=tab.CanvasRenderer.toCanvasAngle(dB);var dI=tab.CanvasRenderer.toCanvasAngle(dC);if(Math.abs(dI-dH)>=tab.CanvasRenderer.angleEpsilon){this.get_currentContext().beginPath();this.get_currentContext().set_lineCap('butt');this.get_currentContext().set_lineWidth(1.5);this.get_currentContext().set_strokeStyle(dG);this.get_currentContext().moveTo(dE,dF);this.get_currentContext().lineTo(dE+Math.cos(dH)*dA,dF+Math.sin(dH)*dA);this.get_currentContext().stroke()}}if(Math.abs(dB-dC)>=1){tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),dE,dF,dA*2,dG)}else{this.renderFilledWedge(dE,dF,dA,dB,dC,dG)}}if(L.c.get('draw_border').gv(cC)){var dJ=L.c.get('theta').gv(cC);var dK=L.c.get('theta1').gv(cC);var dL=dJ>dK;var dM=L.c.get('border_color').gv(cC)[cE];var dN=true;if(Math.abs(dJ-dK)>=1){tab.CanvasRenderer.renderCircle(this.get_currentContext(),L.c.get('x').gv(cC),L.c.get('y').gv(cC),dA*2,dM,1)}else{tab.CanvasRenderer.renderWedge(this.get_currentContext(),L.c.get('x').gv(cC),L.c.get('y').gv(cC),dA,dJ,dK,dM,1,dL,dN)}}break}default:{break}}if(L.clipCase!==0){this.get_currentContext().restore()}},renderTextMarks:function(L,cC,cD){var cE=L.get_hasSelection();var cF=L.get_hasBrushing();var cG='colorOverrideNone';var cH=L.getUserPaneMarkRange(cC);var cI=cH.firstMark;var cJ=cH.lastMark;var cK=L.getUserPaneRectByIndex(cC);this.get_currentContext().save();var cL=this.$A(L);switch(cD){case'normalUnderPass':{if(L.get_hasBackground()&&L.get_hasHalos()){if(cE||cF){cG='colorOverrideFog'}else{cG='colorOverrideNone'}{L.markWorldOffsets.forEach(ss.mkdel(this,function(cM,cN){bC.$d(this.get_currentContext(),cN);for(var cO=cI;cO<=cJ;cO++){if(cM.has(cO)){continue}if(!L.markNeedsDraw(cO)){continue}if(L.getMarkState(cO)!=='markStateNormal'){continue}this.drawTextMarkLayer(L,cO,'normalUnder',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cN,0)){this.get_currentContext().restore()}}))}{L.markWorldOffsets.forEach(ss.mkdel(this,function(cM,cN){bC.$d(this.get_currentContext(),cN);for(var cO=cI;cO<=cJ;cO++){if(cM.has(cO)){continue}if(!L.markNeedsDraw(cO)){continue}if(L.getMarkState(cO)!=='markStateHighlighted'){continue}this.drawTextMarkLayer(L,cO,'normalUnder',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cN,0)){this.get_currentContext().restore()}}))}}break}case'normalOnPass':{if(cE||cF){cG='colorOverrideFog'}else{cG='colorOverrideNone'}{L.markWorldOffsets.forEach(ss.mkdel(this,function(cM,cN){bC.$d(this.get_currentContext(),cN);for(var cO=cI;cO<=cJ;cO++){if(cM.has(cO)){continue}if(!L.markNeedsDraw(cO)){continue}if(L.getMarkState(cO)!=='markStateNormal'){continue}var cP=this.get_currentContext().get_textAlign()==='end';var cQ=L.c.get('text_run_offset').gv(cO);var cR=L.c.get('text_run_count').gv(cO);var cS=cR>1;for(var cT=0;cT<cR;cT++){var cU=cT+cQ;if(cP){cU=cQ+cR-cT-1}this.drawTextRunLayer(L,cO,'normalOn',cG,cU,cS,cL)}this.clearPrevTextRunInfo()}if(!tab.DoubleUtil.isApproximatelyEqual(cN,0)){this.get_currentContext().restore()}}))}break}case'highlightedUnderPass':{if(cE||cF){if(!(L.get_hasBackground()&&L.get_hasHalos())){cG='colorOverrideNone';{L.markWorldOffsets.forEach(ss.mkdel(this,function(cM,cN){bC.$d(this.get_currentContext(),cN);for(var cO=cI;cO<=cJ;cO++){if(cM.has(cO)){continue}if(!L.markNeedsDraw(cO)){continue}if(L.getMarkState(cO)!=='markStateHighlighted'){continue}this.drawTextMarkLayer(L,cO,'highlightedUnder',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cN,0)){this.get_currentContext().restore()}}))}}}break}case'highlightedOnPass':{if(cE||cF){cG='colorOverrideNone';{L.markWorldOffsets.forEach(ss.mkdel(this,function(cM,cN){bC.$d(this.get_currentContext(),cN);for(var cO=cI;cO<=cJ;cO++){if(cM.has(cO)){continue}if(!L.markNeedsDraw(cO)){continue}if(L.getMarkState(cO)!=='markStateHighlighted'){continue}var cP=this.get_currentContext().get_textAlign()==='end';var cQ=L.c.get('text_run_offset').gv(cO);var cR=L.c.get('text_run_count').gv(cO);var cS=cR>1;for(var cT=0;cT<cR;cT++){var cU=cT+cQ;if(cP){cU=cQ+cR-cT-1}this.drawTextRunLayer(L,cO,'normalOn',cG,cU,cS,cL)}this.clearPrevTextRunInfo()}if(!tab.DoubleUtil.isApproximatelyEqual(cN,0)){this.get_currentContext().restore()}}))}}break}case'selectedUnderPass':{if(cE||cF){cG='colorOverrideOpaque';{L.markWorldOffsets.forEach(ss.mkdel(this,function(cM,cN){bC.$d(this.get_currentContext(),cN);for(var cO=cI;cO<=cJ;cO++){if(cM.has(cO)){continue}if(!L.markNeedsDraw(cO)){continue}if(L.getMarkState(cO)!=='markStateSelected'){continue}this.drawTextMarkLayer(L,cO,'selectedUnder',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cN,0)){this.get_currentContext().restore()}}))}}break}case'selectedOnPass':{if(cE||cF){cG='colorOverrideOpaque';{L.markWorldOffsets.forEach(ss.mkdel(this,function(cM,cN){bC.$d(this.get_currentContext(),cN);for(var cO=cI;cO<=cJ;cO++){if(cM.has(cO)){continue}if(!L.markNeedsDraw(cO)){continue}if(L.getMarkState(cO)!=='markStateSelected'){continue}var cP=this.get_currentContext().get_textAlign()==='end';var cQ=L.c.get('text_run_offset').gv(cO);var cR=L.c.get('text_run_count').gv(cO);var cS=cR>1;for(var cT=0;cT<cR;cT++){var cU=cT+cQ;if(cP){cU=cQ+cR-cT-1}this.drawTextRunLayer(L,cO,'normalOn',cG,cU,cS,cL)}this.clearPrevTextRunInfo()}if(!tab.DoubleUtil.isApproximatelyEqual(cN,0)){this.get_currentContext().restore()}}))}}break}}this.get_currentContext().restore()},drawTextMarkLayer:function(L,cC,cD,cE){if(L.clipCase!==0){this.get_currentContext().save();this.clipRect(L.clipCase,L.c.get('cell_x').gv(cC),L.c.get('cell_y').gv(cC),L.c.get('clip_width').gv(cC),L.c.get('clip_height').gv(cC))}switch(cD){case'normalUnder':{{if(!(L.clipCase!==0&&L.useCellClipForSelection)){var cF=L.c.get('x').gv(cC);var cG=L.c.get('y').gv(cC);var cH=L.c.get('width').gv(cC);var cI=-L.c.get('height').gv(cC);if(cI<0){cG+=cI;cI=Math.abs(cI)}var cJ=-L.c.get('width').gv(cC)/2;var cK=L.c.get('height').gv(cC)/2;var cL;if(L.isMarkImpliedSelected(cC)){cL=L.c.get('selected_halo_color').gv(cC)['colorOverrideOpaque']}else{cL=L.c.get('halo_color').gv(cC)[cE]}bC.$c(this.get_currentContext(),cF+cJ,cG+cK,cH,cI,cL,0,0,false)}}{if(L.clipCase!==0&&L.useCellClipForSelection){var cM=L.c.get('x').gv(cC);var cN=L.c.get('y').gv(cC);var cO=L.c.get('clip_width').gv(cC);var cP=-L.c.get('clip_height').gv(cC);if(cP<0){cN+=cP;cP=Math.abs(cP)}var cQ=-L.c.get('clip_width').gv(cC)/2;var cR=L.c.get('clip_height').gv(cC)/2;var cS;if(L.isMarkImpliedSelected(cC)){cS=L.c.get('selected_halo_color').gv(cC)['colorOverrideOpaque']}else{cS=L.c.get('halo_color').gv(cC)[cE]}bC.$c(this.get_currentContext(),cM+cQ,cN+cR,cO,cP,cS,0,0,false)}}break}case'normalOn':{break}case'highlightedUnder':{{if(L.get_hasHaloHighlightColor()&&!(L.clipCase!==0&&L.useCellClipForSelection)){var cT=L.c.get('x').gv(cC);var cU=L.c.get('y').gv(cC);var cV=L.c.get('width').gv(cC);var cW=-L.c.get('height').gv(cC);if(cW<0){cU+=cW;cW=Math.abs(cW)}var cX=-L.c.get('width').gv(cC)/2;var cY=L.c.get('height').gv(cC)/2;var cZ;if(L.isMarkImpliedSelected(cC)){cZ=L.c.get('selected_halo_color').gv(cC)['colorOverrideOpaque']}else{cZ=L.c.get('highlighted_halo_color').gv(cC)[cE]}bC.$c(this.get_currentContext(),cT+cX,cU+cY,cV,cW,cZ,0,0,false)}}{if(L.get_hasHaloHighlightColor()&&(L.clipCase!==0&&L.useCellClipForSelection)){var da=L.c.get('x').gv(cC);var db=L.c.get('y').gv(cC);var dc=L.c.get('clip_width').gv(cC);var dd=-L.c.get('clip_height').gv(cC);if(dd<0){db+=dd;dd=Math.abs(dd)}var de=-L.c.get('clip_width').gv(cC)/2;var df=L.c.get('clip_height').gv(cC)/2;var dg;if(L.isMarkImpliedSelected(cC)){dg=L.c.get('selected_halo_color').gv(cC)['colorOverrideOpaque']}else{dg=L.c.get('highlighted_halo_color').gv(cC)[cE]}bC.$c(this.get_currentContext(),da+de,db+df,dc,dd,dg,0,0,false)}}break}case'selectedUnder':{{if(!(L.clipCase!==0&&L.useCellClipForSelection)){var dh=L.c.get('x').gv(cC);var di=L.c.get('y').gv(cC);var dj=L.c.get('width').gv(cC);var dk=-L.c.get('height').gv(cC);if(dk<0){di+=dk;dk=Math.abs(dk)}var dl=-L.c.get('width').gv(cC)/2;var dm=L.c.get('height').gv(cC)/2;var dn;if(L.isMarkImpliedSelected(cC)){dn=L.c.get('selected_halo_color').gv(cC)['colorOverrideOpaque']}else{dn=L.c.get('selected_halo_color').gv(cC)[cE]}bC.$c(this.get_currentContext(),dh+dl,di+dm,dj,dk,dn,0,0,false)}}{if(L.clipCase!==0&&L.useCellClipForSelection){var dp=L.c.get('x').gv(cC);var dq=L.c.get('y').gv(cC);var dr=L.c.get('clip_width').gv(cC);var ds=-L.c.get('clip_height').gv(cC);if(ds<0){dq+=ds;ds=Math.abs(ds)}var dt=-L.c.get('clip_width').gv(cC)/2;var du=L.c.get('clip_height').gv(cC)/2;var dv;if(L.isMarkImpliedSelected(cC)){dv=L.c.get('selected_halo_color').gv(cC)['colorOverrideOpaque']}else{dv=L.c.get('selected_halo_color').gv(cC)[cE]}bC.$c(this.get_currentContext(),dp+dt,dq+du,dr,ds,dv,0,0,false)}}break}default:{break}}if(L.clipCase!==0){this.get_currentContext().restore()}},renderBarMark:function(L,cC,cD){var cE=L.get_hasSelection();var cF=L.get_hasBrushing();var cG='colorOverrideNone';var cH=L.getUserPaneMarkRange(cC);var cI=cH.firstMark;var cJ=cH.lastMark;var cK=L.getUserPaneRectByIndex(cC);this.get_currentContext().save();this.get_currentContext().set_lineJoin('miter');switch(cD){case'normalUnderPass':{if(L.get_hasBackground()&&L.get_hasHalos()){if(cE||cF){cG='colorOverrideFog'}else{cG='colorOverrideNone'}{L.markWorldOffsets.forEach(ss.mkdel(this,function(cL,cM){bC.$d(this.get_currentContext(),cM);for(var cN=cI;cN<=cJ;cN++){if(cL.has(cN)){continue}if(!L.markNeedsDraw(cN)){continue}if(L.getMarkState(cN)!=='markStateNormal'){continue}this.drawBarMarkLayer(L,cK,cN,'normalUnder',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cM,0)){this.get_currentContext().restore()}}))}cG='colorOverrideNone';{L.markWorldOffsets.forEach(ss.mkdel(this,function(cL,cM){bC.$d(this.get_currentContext(),cM);for(var cN=cI;cN<=cJ;cN++){if(cL.has(cN)){continue}if(!L.markNeedsDraw(cN)){continue}if(L.getMarkState(cN)!=='markStateHighlighted'){continue}this.drawBarMarkLayer(L,cK,cN,'normalUnder',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cM,0)){this.get_currentContext().restore()}}))}}break}case'normalOnPass':{if(cE||cF){cG='colorOverrideFog'}else{cG='colorOverrideNone'}{L.markWorldOffsets.forEach(ss.mkdel(this,function(cL,cM){bC.$d(this.get_currentContext(),cM);for(var cN=cI;cN<=cJ;cN++){if(cL.has(cN)){continue}if(!L.markNeedsDraw(cN)){continue}if(L.getMarkState(cN)!=='markStateNormal'){continue}this.drawBarMarkLayer(L,cK,cN,'normalOn',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cM,0)){this.get_currentContext().restore()}}))}break}case'highlightedUnderPass':{break}case'highlightedOnPass':{if(cE||cF){cG='colorOverrideNone';{L.markWorldOffsets.forEach(ss.mkdel(this,function(cL,cM){bC.$d(this.get_currentContext(),cM);for(var cN=cI;cN<=cJ;cN++){if(cL.has(cN)){continue}if(!L.markNeedsDraw(cN)){continue}if(L.getMarkState(cN)!=='markStateHighlighted'){continue}this.drawBarMarkLayer(L,cK,cN,'highlightedOn',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cM,0)){this.get_currentContext().restore()}}))}}break}case'selectedUnderPass':{if(cE||cF){cG='colorOverrideOpaque';{L.markWorldOffsets.forEach(ss.mkdel(this,function(cL,cM){bC.$d(this.get_currentContext(),cM);for(var cN=cI;cN<=cJ;cN++){if(cL.has(cN)){continue}if(!L.markNeedsDraw(cN)){continue}if(L.getMarkState(cN)!=='markStateSelected'){continue}this.drawBarMarkLayer(L,cK,cN,'selectedUnder',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cM,0)){this.get_currentContext().restore()}}))}}break}case'selectedOnPass':{if(cE||cF){cG='colorOverrideOpaque';if(L.clipCase!==3){this.get_currentContext().save();this.get_currentContext().setClip(L.getInsetPaneClipRect(cC,2))}{L.markWorldOffsets.forEach(ss.mkdel(this,function(cL,cM){bC.$d(this.get_currentContext(),cM);for(var cN=cI;cN<=cJ;cN++){if(cL.has(cN)){continue}if(!L.markNeedsDraw(cN)){continue}if(L.getMarkState(cN)!=='markStateSelected'){continue}this.drawBarMarkLayer(L,cK,cN,'selectedOn',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cM,0)){this.get_currentContext().restore()}}))}if(L.clipCase!==3){this.get_currentContext().restore()}}break}}this.get_currentContext().restore()},drawBarMarkLayer:function(L,cC,cD,cE,cF){if(L.clipCase!==0){this.get_currentContext().save();this.clipRect(L.clipCase,L.c.get('cell_x').gv(cD),L.c.get('cell_y').gv(cD),L.c.get('clip_width').gv(cD),L.c.get('clip_height').gv(cD))}switch(cE){case'normalUnder':{var cG=ss.Int32.trunc(L.c.get('size').gv(cD)+0.5)/2;{if(L.scaleMarksInX&&L.scaleMarksInY){var cH=L.c.get('x').gv(cD);var cI=L.c.get('x1').gv(cD);var cJ=L.c.get('y').gv(cD);var cK=L.c.get('y1').gv(cD);var cL=Math.min(cH,cI);var cM=Math.min(cJ,cK);var cN=Math.abs(cI-cH)+0;var cO=Math.abs(cK-cJ)+0;bC.$a(this.get_currentContext(),cL,cM,cN,cO,L.c.get('halo_color').gv(cD)[cF],4,L.minBarWidth,L.minBarHeight,false)}}{if(!L.scaleMarksInX&&L.scaleMarksInY){var cP=L.c.get('x').gv(cD)-cG;var cQ=L.c.get('x').gv(cD)+cG;var cR=L.c.get('y').gv(cD);var cS=L.c.get('y1').gv(cD);var cT=Math.min(cP,cQ);var cU=Math.min(cR,cS);var cV=Math.abs(cQ-cP)+0;var cW=Math.abs(cS-cR)+0;bC.$a(this.get_currentContext(),cT,cU,cV,cW,L.c.get('halo_color').gv(cD)[cF],4,L.minBarWidth,L.minBarHeight,false)}}{if(L.scaleMarksInX&&!L.scaleMarksInY){var cX=L.c.get('x').gv(cD);var cY=L.c.get('x1').gv(cD);var cZ=L.c.get('y').gv(cD)-cG;var da=L.c.get('y').gv(cD)+cG;var db=Math.min(cX,cY);var dc=Math.min(cZ,da);var dd=Math.abs(cY-cX)+0;var de=Math.abs(da-cZ)+0;bC.$a(this.get_currentContext(),db,dc,dd,de,L.c.get('halo_color').gv(cD)[cF],4,L.minBarWidth,L.minBarHeight,false)}}{if(!L.scaleMarksInX&&!L.scaleMarksInY){var df=L.c.get('x').gv(cD)-cG;var dg=L.c.get('x').gv(cD)+cG;var dh=L.c.get('y').gv(cD)-cG;var di=L.c.get('y').gv(cD)+cG;var dj=Math.min(df,dg);var dk=Math.min(dh,di);var dl=Math.abs(dg-df)+0;var dm=Math.abs(di-dh)+0;bC.$a(this.get_currentContext(),dj,dk,dl,dm,L.c.get('halo_color').gv(cD)[cF],4,L.minBarWidth,L.minBarHeight,true)}}break}case'normalOn':{var dn=ss.Int32.trunc(L.c.get('size').gv(cD)+0.5)/2;{if(L.scaleMarksInX&&L.scaleMarksInY){var dp=L.c.get('x').gv(cD);var dq=L.c.get('x1').gv(cD);var dr=L.c.get('y').gv(cD);var ds=L.c.get('y1').gv(cD);var dt=Math.min(dp,dq);var du=Math.min(dr,ds);var dv=Math.abs(dq-dp)+0;var dw=Math.abs(ds-dr)+0;bC.$c(this.get_currentContext(),dt-0,du-0,dv+0,dw+0,L.getMarkColors(cD)[cF],L.minBarWidth,L.minBarHeight,false)}}{if(L.scaleMarksInX&&L.scaleMarksInY&&L.drawBorder){var dx=L.c.get('x').gv(cD);var dy=L.c.get('x1').gv(cD);var dz=L.c.get('y').gv(cD);var dA=L.c.get('y1').gv(cD);var dB=Math.min(dx,dy);var dC=Math.min(dz,dA);var dD=Math.abs(dy-dx)+0;var dE=Math.abs(dA-dz)+0;bC.$a(this.get_currentContext(),dB,dC,dD,dE,L.c.get('border_color').gv(cD)[cF],1,L.minBarWidth,L.minBarHeight,false)}}{if(!L.scaleMarksInX&&L.scaleMarksInY){var dF=L.c.get('x').gv(cD)-dn;var dG=L.c.get('x').gv(cD)+dn;var dH=L.c.get('y').gv(cD);var dI=L.c.get('y1').gv(cD);var dJ=Math.min(dF,dG);var dK=Math.min(dH,dI);var dL=Math.abs(dG-dF)+0;var dM=Math.abs(dI-dH)+0;bC.$c(this.get_currentContext(),dJ-0,dK-0,dL+0,dM+0,L.getMarkColors(cD)[cF],L.minBarWidth,L.minBarHeight,false)}}{if(!L.scaleMarksInX&&L.scaleMarksInY&&L.drawBorder){var dN=L.c.get('x').gv(cD)-dn;var dO=L.c.get('x').gv(cD)+dn;var dP=L.c.get('y').gv(cD);var dQ=L.c.get('y1').gv(cD);var dR=Math.min(dN,dO);var dS=Math.min(dP,dQ);var dT=Math.abs(dO-dN)+0;var dU=Math.abs(dQ-dP)+0;bC.$a(this.get_currentContext(),dR,dS,dT,dU,L.c.get('border_color').gv(cD)[cF],1,L.minBarWidth,L.minBarHeight,false)}}{if(L.scaleMarksInX&&!L.scaleMarksInY){var dV=L.c.get('x').gv(cD);var dW=L.c.get('x1').gv(cD);var dX=L.c.get('y').gv(cD)-dn;var dY=L.c.get('y').gv(cD)+dn;var dZ=Math.min(dV,dW);var ea=Math.min(dX,dY);var eb=Math.abs(dW-dV)+0;var ec=Math.abs(dY-dX)+0;bC.$c(this.get_currentContext(),dZ-0,ea-0,eb+0,ec+0,L.getMarkColors(cD)[cF],L.minBarWidth,L.minBarHeight,false)}}{if(L.scaleMarksInX&&!L.scaleMarksInY&&L.drawBorder){var ed=L.c.get('x').gv(cD);var ee=L.c.get('x1').gv(cD);var ef=L.c.get('y').gv(cD)-dn;var eg=L.c.get('y').gv(cD)+dn;var eh=Math.min(ed,ee);var ei=Math.min(ef,eg);var ej=Math.abs(ee-ed)+0;var ek=Math.abs(eg-ef)+0;bC.$a(this.get_currentContext(),eh,ei,ej,ek,L.c.get('border_color').gv(cD)[cF],1,L.minBarWidth,L.minBarHeight,false)}}{if(!L.scaleMarksInX&&!L.scaleMarksInY){var el=L.c.get('x').gv(cD)-dn;var em=L.c.get('x').gv(cD)+dn;var en=L.c.get('y').gv(cD)-dn;var eo=L.c.get('y').gv(cD)+dn;var ep=Math.min(el,em);var eq=Math.min(en,eo);var er=Math.abs(em-el)+0;var es=Math.abs(eo-en)+0;bC.$c(this.get_currentContext(),ep-0,eq-0,er+0,es+0,L.getMarkColors(cD)[cF],L.minBarWidth,L.minBarHeight,true)}}{if(!L.scaleMarksInX&&!L.scaleMarksInY&&L.drawBorder){var et=L.c.get('x').gv(cD)-dn;var eu=L.c.get('x').gv(cD)+dn;var ev=L.c.get('y').gv(cD)-dn;var ew=L.c.get('y').gv(cD)+dn;var ex=Math.min(et,eu);var ey=Math.min(ev,ew);var ez=Math.abs(eu-et)+0;var eA=Math.abs(ew-ev)+0;bC.$a(this.get_currentContext(),ex,ey,ez,eA,L.c.get('border_color').gv(cD)[cF],1,L.minBarWidth,L.minBarHeight,true)}}break}case'highlightedUnder':{var eB=ss.Int32.trunc(L.c.get('size').gv(cD)+0.5)/2;{if(L.scaleMarksInX&&L.scaleMarksInY){var eC=L.c.get('x').gv(cD);var eD=L.c.get('x1').gv(cD);var eE=L.c.get('y').gv(cD);var eF=L.c.get('y1').gv(cD);var eG=Math.min(eC,eD);var eH=Math.min(eE,eF);var eI=Math.abs(eD-eC)+0;var eJ=Math.abs(eF-eE)+0;bC.$a(this.get_currentContext(),eG,eH,eI,eJ,L.c.get('halo_color').gv(cD)[cF],4,L.minBarWidth,L.minBarHeight,false)}}{if(!L.scaleMarksInX&&L.scaleMarksInY){var eK=L.c.get('x').gv(cD)-eB;var eL=L.c.get('x').gv(cD)+eB;var eM=L.c.get('y').gv(cD);var eN=L.c.get('y1').gv(cD);var eO=Math.min(eK,eL);var eP=Math.min(eM,eN);var eQ=Math.abs(eL-eK)+0;var eR=Math.abs(eN-eM)+0;bC.$a(this.get_currentContext(),eO,eP,eQ,eR,L.c.get('halo_color').gv(cD)[cF],4,L.minBarWidth,L.minBarHeight,false)}}{if(L.scaleMarksInX&&!L.scaleMarksInY){var eS=L.c.get('x').gv(cD);var eT=L.c.get('x1').gv(cD);var eU=L.c.get('y').gv(cD)-eB;var eV=L.c.get('y').gv(cD)+eB;var eW=Math.min(eS,eT);var eX=Math.min(eU,eV);var eY=Math.abs(eT-eS)+0;var eZ=Math.abs(eV-eU)+0;bC.$a(this.get_currentContext(),eW,eX,eY,eZ,L.c.get('halo_color').gv(cD)[cF],4,L.minBarWidth,L.minBarHeight,false)}}{if(!L.scaleMarksInX&&!L.scaleMarksInY){var fa=L.c.get('x').gv(cD)-eB;var fb=L.c.get('x').gv(cD)+eB;var fc=L.c.get('y').gv(cD)-eB;var fd=L.c.get('y').gv(cD)+eB;var fe=Math.min(fa,fb);var ff=Math.min(fc,fd);var fg=Math.abs(fb-fa)+0;var fh=Math.abs(fd-fc)+0;bC.$a(this.get_currentContext(),fe,ff,fg,fh,L.c.get('halo_color').gv(cD)[cF],4,L.minBarWidth,L.minBarHeight,true)}}break}case'highlightedOn':{var fi=ss.Int32.trunc(L.c.get('size').gv(cD)+0.5)/2;{if(L.scaleMarksInX&&L.scaleMarksInY){var fj=L.c.get('x').gv(cD);var fk=L.c.get('x1').gv(cD);var fl=L.c.get('y').gv(cD);var fm=L.c.get('y1').gv(cD);var fn=Math.min(fj,fk);var fo=Math.min(fl,fm);var fp=Math.abs(fk-fj)+0;var fq=Math.abs(fm-fl)+0;bC.$c(this.get_currentContext(),fn-0,fo-0,fp+0,fq+0,L.getMarkColors(cD)[cF],L.minBarWidth,L.minBarHeight,false)}}{if(L.scaleMarksInX&&L.scaleMarksInY&&L.drawBorder){var fr=L.c.get('x').gv(cD);var fs=L.c.get('x1').gv(cD);var ft=L.c.get('y').gv(cD);var fu=L.c.get('y1').gv(cD);var fv=Math.min(fr,fs);var fw=Math.min(ft,fu);var fx=Math.abs(fs-fr)+0;var fy=Math.abs(fu-ft)+0;bC.$a(this.get_currentContext(),fv,fw,fx,fy,L.c.get('border_color').gv(cD)[cF],1,L.minBarWidth,L.minBarHeight,false)}}{if(!L.scaleMarksInX&&L.scaleMarksInY){var fz=L.c.get('x').gv(cD)-fi;var fA=L.c.get('x').gv(cD)+fi;var fB=L.c.get('y').gv(cD);var fC=L.c.get('y1').gv(cD);var fD=Math.min(fz,fA);var fE=Math.min(fB,fC);var fF=Math.abs(fA-fz)+0;var fG=Math.abs(fC-fB)+0;bC.$c(this.get_currentContext(),fD-0,fE-0,fF+0,fG+0,L.getMarkColors(cD)[cF],L.minBarWidth,L.minBarHeight,false)}}{if(!L.scaleMarksInX&&L.scaleMarksInY&&L.drawBorder){var fH=L.c.get('x').gv(cD)-fi;var fI=L.c.get('x').gv(cD)+fi;var fJ=L.c.get('y').gv(cD);var fK=L.c.get('y1').gv(cD);var fL=Math.min(fH,fI);var fM=Math.min(fJ,fK);var fN=Math.abs(fI-fH)+0;var fO=Math.abs(fK-fJ)+0;bC.$a(this.get_currentContext(),fL,fM,fN,fO,L.c.get('border_color').gv(cD)[cF],1,L.minBarWidth,L.minBarHeight,false)}}{if(L.scaleMarksInX&&!L.scaleMarksInY){var fP=L.c.get('x').gv(cD);var fQ=L.c.get('x1').gv(cD);var fR=L.c.get('y').gv(cD)-fi;var fS=L.c.get('y').gv(cD)+fi;var fT=Math.min(fP,fQ);var fU=Math.min(fR,fS);var fV=Math.abs(fQ-fP)+0;var fW=Math.abs(fS-fR)+0;bC.$c(this.get_currentContext(),fT-0,fU-0,fV+0,fW+0,L.getMarkColors(cD)[cF],L.minBarWidth,L.minBarHeight,false)}}{if(L.scaleMarksInX&&!L.scaleMarksInY&&L.drawBorder){var fX=L.c.get('x').gv(cD);var fY=L.c.get('x1').gv(cD);var fZ=L.c.get('y').gv(cD)-fi;var ga=L.c.get('y').gv(cD)+fi;var gb=Math.min(fX,fY);var gc=Math.min(fZ,ga);var gd=Math.abs(fY-fX)+0;var ge=Math.abs(ga-fZ)+0;bC.$a(this.get_currentContext(),gb,gc,gd,ge,L.c.get('border_color').gv(cD)[cF],1,L.minBarWidth,L.minBarHeight,false)}}{if(!L.scaleMarksInX&&!L.scaleMarksInY){var gf=L.c.get('x').gv(cD)-fi;var gg=L.c.get('x').gv(cD)+fi;var gh=L.c.get('y').gv(cD)-fi;var gi=L.c.get('y').gv(cD)+fi;var gj=Math.min(gf,gg);var gk=Math.min(gh,gi);var gl=Math.abs(gg-gf)+0;var gm=Math.abs(gi-gh)+0;bC.$c(this.get_currentContext(),gj-0,gk-0,gl+0,gm+0,L.getMarkColors(cD)[cF],L.minBarWidth,L.minBarHeight,true)}}{if(!L.scaleMarksInX&&!L.scaleMarksInY&&L.drawBorder){var gn=L.c.get('x').gv(cD)-fi;var go=L.c.get('x').gv(cD)+fi;var gp=L.c.get('y').gv(cD)-fi;var gq=L.c.get('y').gv(cD)+fi;var gr=Math.min(gn,go);var gs=Math.min(gp,gq);var gt=Math.abs(go-gn)+0;var gu=Math.abs(gq-gp)+0;bC.$a(this.get_currentContext(),gr,gs,gt,gu,L.c.get('border_color').gv(cD)[cF],1,L.minBarWidth,L.minBarHeight,true)}}break}case'selectedUnder':{var gv=ss.Int32.trunc(L.c.get('size').gv(cD)+0.5)/2;var gw=1;{var gx=L.c.get('x').gv(cD);var gy=L.c.get('x1').gv(cD);var gz=L.c.get('y').gv(cD);var gA=L.c.get('y1').gv(cD);var gB=Math.min(gx,gy);var gC=Math.min(gz,gA);var gD=Math.abs(gy-gx)+0;var gE=Math.abs(gA-gz)+0;if(L.scaleMarksInX&&L.scaleMarksInY&&!this.$9(cC,gB,gC,gD,gE)){bC.$a(this.get_currentContext(),gB,gC,gD,gE,L.c.get('selected_halo_color').gv(cD)[cF],4,L.minBarWidth,L.minBarHeight,false)}}{var gF=L.c.get('x').gv(cD);var gG=L.c.get('x1').gv(cD);var gH=L.c.get('y').gv(cD);var gI=L.c.get('y1').gv(cD);var gJ=Math.min(gF,gG);var gK=Math.min(gH,gI);var gL=Math.abs(gG-gF)+0;var gM=Math.abs(gI-gH)+0;if(L.scaleMarksInX&&L.scaleMarksInY&&this.$9(cC,gJ,gK,gL,gM)){bC.$c(this.get_currentContext(),gJ-2,gK-2,gL+4,gM+4,L.c.get('selected_halo_color').gv(cD)[cF],L.minBarWidth,L.minBarHeight,false)}}{if(L.scaleMarksInX&&L.scaleMarksInY&&L.drawBorder){var gN=L.c.get('x').gv(cD);var gO=L.c.get('x1').gv(cD);var gP=L.c.get('y').gv(cD);var gQ=L.c.get('y1').gv(cD);var gR=Math.min(gN,gO);var gS=Math.min(gP,gQ);var gT=Math.abs(gO-gN)+gw;var gU=Math.abs(gQ-gP)+gw;bC.$a(this.get_currentContext(),gR,gS,gT,gU,L.c.get('selected_halo_color').gv(cD)[cF],4,L.minBarWidth,L.minBarHeight,false)}}{var gV=L.c.get('x').gv(cD)-gv;var gW=L.c.get('x').gv(cD)+gv;var gX=L.c.get('y').gv(cD);var gY=L.c.get('y1').gv(cD);var gZ=Math.min(gV,gW);var ha=Math.min(gX,gY);var hb=Math.abs(gW-gV)+0;var hc=Math.abs(gY-gX)+0;if(!L.scaleMarksInX&&L.scaleMarksInY&&!this.$9(cC,gZ,ha,hb,hc)){bC.$a(this.get_currentContext(),gZ,ha,hb,hc,L.c.get('selected_halo_color').gv(cD)[cF],4,L.minBarWidth,L.minBarHeight,false)}}{var hd=L.c.get('x').gv(cD)-gv;var he=L.c.get('x').gv(cD)+gv;var hf=L.c.get('y').gv(cD);var hg=L.c.get('y1').gv(cD);var hh=Math.min(hd,he);var hi=Math.min(hf,hg);var hj=Math.abs(he-hd)+0;var hk=Math.abs(hg-hf)+0;if(!L.scaleMarksInX&&L.scaleMarksInY&&this.$9(cC,hh,hi,hj,hk)){bC.$c(this.get_currentContext(),hh-2,hi-2,hj+4,hk+4,L.c.get('selected_halo_color').gv(cD)[cF],L.minBarWidth,L.minBarHeight,false)}}{if(!L.scaleMarksInX&&L.scaleMarksInY&&L.drawBorder){var hl=L.c.get('x').gv(cD)-gv;var hm=L.c.get('x').gv(cD)+gv;var hn=L.c.get('y').gv(cD);var ho=L.c.get('y1').gv(cD);var hp=Math.min(hl,hm);var hq=Math.min(hn,ho);var hr=Math.abs(hm-hl)+gw;var hs=Math.abs(ho-hn)+gw;bC.$a(this.get_currentContext(),hp,hq,hr,hs,L.c.get('selected_halo_color').gv(cD)[cF],4,L.minBarWidth,L.minBarHeight,false)}}{var ht=L.c.get('x').gv(cD);var hu=L.c.get('x1').gv(cD);var hv=L.c.get('y').gv(cD)-gv;var hw=L.c.get('y').gv(cD)+gv;var hx=Math.min(ht,hu);var hy=Math.min(hv,hw);var hz=Math.abs(hu-ht)+0;var hA=Math.abs(hw-hv)+0;if(L.scaleMarksInX&&!L.scaleMarksInY&&!this.$9(cC,hx,hy,hz,hA)){bC.$a(this.get_currentContext(),hx,hy,hz,hA,L.c.get('selected_halo_color').gv(cD)[cF],4,L.minBarWidth,L.minBarHeight,false)}}{var hB=L.c.get('x').gv(cD);var hC=L.c.get('x1').gv(cD);var hD=L.c.get('y').gv(cD)-gv;var hE=L.c.get('y').gv(cD)+gv;var hF=Math.min(hB,hC);var hG=Math.min(hD,hE);var hH=Math.abs(hC-hB)+0;var hI=Math.abs(hE-hD)+0;if(L.scaleMarksInX&&!L.scaleMarksInY&&this.$9(cC,hF,hG,hH,hI)){bC.$c(this.get_currentContext(),hF-2,hG-2,hH+4,hI+4,L.c.get('selected_halo_color').gv(cD)[cF],L.minBarWidth,L.minBarHeight,false)}}{if(L.scaleMarksInX&&!L.scaleMarksInY&&L.drawBorder){var hJ=L.c.get('x').gv(cD);var hK=L.c.get('x1').gv(cD);var hL=L.c.get('y').gv(cD)-gv;var hM=L.c.get('y').gv(cD)+gv;var hN=Math.min(hJ,hK);var hO=Math.min(hL,hM);var hP=Math.abs(hK-hJ)+gw;var hQ=Math.abs(hM-hL)+gw;bC.$a(this.get_currentContext(),hN,hO,hP,hQ,L.c.get('selected_halo_color').gv(cD)[cF],4,L.minBarWidth,L.minBarHeight,false)}}{var hR=L.c.get('x').gv(cD)-gv;var hS=L.c.get('x').gv(cD)+gv;var hT=L.c.get('y').gv(cD)-gv;var hU=L.c.get('y').gv(cD)+gv;var hV=Math.min(hR,hS);var hW=Math.min(hT,hU);var hX=Math.abs(hS-hR)+0;var hY=Math.abs(hU-hT)+0;if(!L.scaleMarksInX&&!L.scaleMarksInY&&!this.$9(cC,hV,hW,hX,hY)){bC.$a(this.get_currentContext(),hV,hW,hX,hY,L.c.get('selected_halo_color').gv(cD)[cF],4,L.minBarWidth,L.minBarHeight,true)}}{var hZ=L.c.get('x').gv(cD)-gv;var ia=L.c.get('x').gv(cD)+gv;var ib=L.c.get('y').gv(cD)-gv;var ic=L.c.get('y').gv(cD)+gv;var id=Math.min(hZ,ia);var ie=Math.min(ib,ic);var ig=Math.abs(ia-hZ)+0;var ih=Math.abs(ic-ib)+0;if(!L.scaleMarksInX&&!L.scaleMarksInY&&this.$9(cC,id,ie,ig,ih)){bC.$c(this.get_currentContext(),id-2,ie-2,ig+4,ih+4,L.c.get('selected_halo_color').gv(cD)[cF],L.minBarWidth,L.minBarHeight,true)}}{if(!L.scaleMarksInX&&!L.scaleMarksInY&&L.drawBorder){var ii=L.c.get('x').gv(cD)-gv;var ij=L.c.get('x').gv(cD)+gv;var ik=L.c.get('y').gv(cD)-gv;var il=L.c.get('y').gv(cD)+gv;var im=Math.min(ii,ij);var io=Math.min(ik,il);var ip=Math.abs(ij-ii)+gw;var iq=Math.abs(il-ik)+gw;bC.$a(this.get_currentContext(),im,io,ip,iq,L.c.get('border_color').gv(cD)[cF],4,L.minBarWidth,L.minBarHeight,true)}}break}case'selectedOn':{var ir=ss.Int32.trunc(L.c.get('size').gv(cD)+0.5)/2;{if(L.scaleMarksInX&&L.scaleMarksInY){var it=L.c.get('x').gv(cD);var iu=L.c.get('x1').gv(cD);var iv=L.c.get('y').gv(cD);var iw=L.c.get('y1').gv(cD);var ix=Math.min(it,iu);var iy=Math.min(iv,iw);var iz=Math.abs(iu-it)+0;var iA=Math.abs(iw-iv)+0;bC.$c(this.get_currentContext(),ix-0,iy-0,iz+0,iA+0,L.getMarkColors(cD)[cF],L.minBarWidth,L.minBarHeight,false)}}{if(L.scaleMarksInX&&L.scaleMarksInY&&L.drawBorder){var iB=L.c.get('x').gv(cD);var iC=L.c.get('x1').gv(cD);var iD=L.c.get('y').gv(cD);var iE=L.c.get('y1').gv(cD);var iF=Math.min(iB,iC);var iG=Math.min(iD,iE);var iH=Math.abs(iC-iB)+0;var iI=Math.abs(iE-iD)+0;bC.$a(this.get_currentContext(),iF,iG,iH,iI,L.c.get('border_color').gv(cD)[cF],1,L.minBarWidth,L.minBarHeight,false)}}{if(!L.scaleMarksInX&&L.scaleMarksInY){var iJ=L.c.get('x').gv(cD)-ir;var iK=L.c.get('x').gv(cD)+ir;var iL=L.c.get('y').gv(cD);var iM=L.c.get('y1').gv(cD);var iN=Math.min(iJ,iK);var iO=Math.min(iL,iM);var iP=Math.abs(iK-iJ)+0;var iQ=Math.abs(iM-iL)+0;bC.$c(this.get_currentContext(),iN-0,iO-0,iP+0,iQ+0,L.getMarkColors(cD)[cF],L.minBarWidth,L.minBarHeight,false)}}{if(!L.scaleMarksInX&&L.scaleMarksInY&&L.drawBorder){var iR=L.c.get('x').gv(cD)-ir;var iS=L.c.get('x').gv(cD)+ir;var iT=L.c.get('y').gv(cD);var iU=L.c.get('y1').gv(cD);var iV=Math.min(iR,iS);var iW=Math.min(iT,iU);var iX=Math.abs(iS-iR)+0;var iY=Math.abs(iU-iT)+0;bC.$a(this.get_currentContext(),iV,iW,iX,iY,L.c.get('border_color').gv(cD)[cF],1,L.minBarWidth,L.minBarHeight,false)}}{if(L.scaleMarksInX&&!L.scaleMarksInY){var iZ=L.c.get('x').gv(cD);var ja=L.c.get('x1').gv(cD);var jb=L.c.get('y').gv(cD)-ir;var jc=L.c.get('y').gv(cD)+ir;var jd=Math.min(iZ,ja);var je=Math.min(jb,jc);var jf=Math.abs(ja-iZ)+0;var jg=Math.abs(jc-jb)+0;bC.$c(this.get_currentContext(),jd-0,je-0,jf+0,jg+0,L.getMarkColors(cD)[cF],L.minBarWidth,L.minBarHeight,false)}}{if(L.scaleMarksInX&&!L.scaleMarksInY&&L.drawBorder){var jh=L.c.get('x').gv(cD);var ji=L.c.get('x1').gv(cD);var jj=L.c.get('y').gv(cD)-ir;var jk=L.c.get('y').gv(cD)+ir;var jl=Math.min(jh,ji);var jm=Math.min(jj,jk);var jn=Math.abs(ji-jh)+0;var jo=Math.abs(jk-jj)+0;bC.$a(this.get_currentContext(),jl,jm,jn,jo,L.c.get('border_color').gv(cD)[cF],1,L.minBarWidth,L.minBarHeight,false)}}{if(!L.scaleMarksInX&&!L.scaleMarksInY){var jp=L.c.get('x').gv(cD)-ir;var jq=L.c.get('x').gv(cD)+ir;var jr=L.c.get('y').gv(cD)-ir;var js=L.c.get('y').gv(cD)+ir;var jt=Math.min(jp,jq);var ju=Math.min(jr,js);var jv=Math.abs(jq-jp)+0;var jw=Math.abs(js-jr)+0;bC.$c(this.get_currentContext(),jt-0,ju-0,jv+0,jw+0,L.getMarkColors(cD)[cF],L.minBarWidth,L.minBarHeight,true)}}{if(!L.scaleMarksInX&&!L.scaleMarksInY&&L.drawBorder){var jx=L.c.get('x').gv(cD)-ir;var jy=L.c.get('x').gv(cD)+ir;var jz=L.c.get('y').gv(cD)-ir;var jA=L.c.get('y').gv(cD)+ir;var jB=Math.min(jx,jy);var jC=Math.min(jz,jA);var jD=Math.abs(jy-jx)+0;var jE=Math.abs(jA-jz)+0;bC.$a(this.get_currentContext(),jB,jC,jD,jE,L.c.get('border_color').gv(cD)[cF],1,L.minBarWidth,L.minBarHeight,true)}}break}default:{break}}if(L.clipCase!==0){this.get_currentContext().restore()}},renderLineMark:function(L,cC,cD){var cE=L.get_hasSelection();var cF=L.get_hasBrushing();var cG='colorOverrideNone';var cH=L.getUserPaneMarkRange(cC);var cI=cH.firstMark;var cJ=cH.lastMark;var cK=L.getUserPaneRectByIndex(cC);var cL=L.get_lineDrawState();this.get_currentContext().save();switch(cD){case'normalUnderPass':{if(L.get_hasBackground()&&L.get_hasHalos()){if(cE||cF){cG='colorOverrideFog'}else{cG='colorOverrideNone'}var cM=cL.get_lineAttributes();for(var cN=0;cN<cM.length;cN++){var cO=cM[cN];if(cO.get_lineState()!=='lineStateNormal'){continue}var cP=cO.worldOffsets;var cQ=cP.length;for(var cR=0;cR<cQ;cR++){var cS=cP[cR];bC.$d(this.get_currentContext(),cS);{for(var cT=0;cT<cO.marksNeedingDraw.length;cT++){var cU=cO.marksNeedingDraw[cT];if(L.c.get('l_neighbor').gv(cU)!==-1||L.c.get('r_neighbor').gv(cU)!==-1){this.drawLineMarkLayer(L,cU,'normalUnder',cG)}}}{for(var cV=0;cV<cO.marksNeedingDraw.length;cV++){var cW=cO.marksNeedingDraw[cV];this.drawLineMarkLayer(L,cW,'edgeUnder',cG);if(L.c.get('l_neighbor').gv(cW)===-1&&L.c.get('r_neighbor').gv(cW)===-1||L.shouldShowMarker(cW)){this.drawLineMarkLayer(L,cW,'blobUnder',cG)}}}if(cS!==0){this.get_currentContext().restore()}}}var cX=cL.get_lineAttributes();for(var cY=0;cY<cX.length;cY++){var cZ=cX[cY];if(cZ.get_lineState()!=='lineStateHighlighted'){continue}var da=cZ.worldOffsets;var db=da.length;for(var dc=0;dc<db;dc++){var dd=da[dc];bC.$d(this.get_currentContext(),dd);{for(var de=0;de<cZ.marksNeedingDraw.length;de++){var df=cZ.marksNeedingDraw[de];if(L.c.get('l_neighbor').gv(df)!==-1||L.c.get('r_neighbor').gv(df)!==-1){this.drawLineMarkLayer(L,df,'normalUnder',cG)}}}{for(var dg=0;dg<cZ.marksNeedingDraw.length;dg++){var dh=cZ.marksNeedingDraw[dg];this.drawLineMarkLayer(L,dh,'edgeUnder',cG);if(L.c.get('l_neighbor').gv(dh)===-1&&L.c.get('r_neighbor').gv(dh)===-1||L.shouldShowMarker(dh)){this.drawLineMarkLayer(L,dh,'blobUnder',cG)}}}if(dd!==0){this.get_currentContext().restore()}}}}break}case'normalOnPass':{if(cE||cF){cG='colorOverrideFog'}else{cG='colorOverrideNone'}var di=cL.get_lineAttributes();for(var dj=0;dj<di.length;dj++){var dk=di[dj];if(dk.get_lineState()!=='lineStateNormal'){continue}var dl=dk.worldOffsets;var dm=dl.length;for(var dn=0;dn<dm;dn++){var dp=dl[dn];bC.$d(this.get_currentContext(),dp);var dq=true;if(L.get_hasGlobalTransparency()){if(L.markType==='line'){dq=dk.endIndex-dk.startIndex>1}if(dq){var dr=((!L.isWrappedDomain&&L.markType==='line')?dk.sloppyBoundingBox:null);this.beginOffScreenRender(dr);L.forceOpaqueColors=true}}{for(var ds=0;ds<dk.marksNeedingDraw.length;ds++){var dt=dk.marksNeedingDraw[ds];if(L.c.get('l_neighbor').gv(dt)!==-1||L.c.get('r_neighbor').gv(dt)!==-1){this.drawLineMarkLayer(L,dt,'normalOn',cG)}else{this.drawLineMarkLayer(L,dt,'blobOn',cG)}}}{for(var du=0;du<dk.marksNeedingDraw.length;du++){var dv=dk.marksNeedingDraw[du];this.drawLineMarkLayer(L,dv,'edgeOn',cG)}}if(L.get_hasGlobalTransparency()){if(dq){L.forceOpaqueColors=false;this.endOffScreenRender(L.globalAlpha)}}{for(var dw=0;dw<dk.marksNeedingDraw.length;dw++){var dx=dk.marksNeedingDraw[dw];if(L.shouldShowMarker(dx)){this.drawLineMarkLayer(L,dx,'blobOn',cG)}}}if(dp!==0){this.get_currentContext().restore()}}}break}case'highlightedUnderPass':{break}case'highlightedOnPass':{if(cE||cF){cG='colorOverrideNone';var dy=cL.get_lineAttributes();for(var dz=0;dz<dy.length;dz++){var dA=dy[dz];if(dA.get_lineState()!=='lineStateHighlighted'){continue}var dB=dA.worldOffsets;var dC=dB.length;for(var dD=0;dD<dC;dD++){var dE=dB[dD];bC.$d(this.get_currentContext(),dE);var dF=true;if(L.get_hasGlobalTransparency()){if(L.markType==='line'){dF=dA.endIndex-dA.startIndex>1}if(dF){var dG=((!L.isWrappedDomain&&L.markType==='line')?dA.sloppyBoundingBox:null);this.beginOffScreenRender(dG);L.forceOpaqueColors=true}}{for(var dH=0;dH<dA.marksNeedingDraw.length;dH++){var dI=dA.marksNeedingDraw[dH];if(!(L.getMarkState(dI)==='markStateHighlighted')){cG='colorOverrideFog'}if(!(L.getMarkState(dI)==='markStateHighlighted'&&!dA.get_allHighlighted())){if(L.c.get('l_neighbor').gv(dI)!==-1||L.c.get('r_neighbor').gv(dI)!==-1){this.drawLineMarkLayer(L,dI,'normalOn',cG)}else{this.drawLineMarkLayer(L,dI,'blobOn',cG)}}cG='colorOverrideNone'}}{for(var dJ=0;dJ<dA.marksNeedingDraw.length;dJ++){var dK=dA.marksNeedingDraw[dJ];if(L.getMarkState(dK)!=='markStateHighlighted'||L.c.get('r_neighbor').gv(dK)!==-1&&L.getMarkState(L.c.get('r_neighbor').gv(dK))!=='markStateHighlighted'){cG='colorOverrideFog'}this.drawLineMarkLayer(L,dK,'edgeOn',cG);cG='colorOverrideNone'}}if(L.get_hasGlobalTransparency()){if(dF){L.forceOpaqueColors=false;this.endOffScreenRender(L.globalAlpha)}}{for(var dL=0;dL<dA.marksNeedingDraw.length;dL++){var dM=dA.marksNeedingDraw[dL];if(!(L.getMarkState(dM)==='markStateHighlighted')){cG='colorOverrideFog'}if(!(L.getMarkState(dM)==='markStateHighlighted'&&!dA.get_allHighlighted())){if(L.shouldShowMarker(dM)){this.drawLineMarkLayer(L,dM,'blobOn',cG)}}cG='colorOverrideNone'}}{for(var dN=0;dN<dA.marksNeedingDraw.length;dN++){var dO=dA.marksNeedingDraw[dN];if(L.getMarkState(dO)==='markStateHighlighted'&&!dA.get_allHighlighted()){this.drawLineMarkLayer(L,dO,'highlightedUnder',cG)}}}{for(var dP=0;dP<dA.marksNeedingDraw.length;dP++){var dQ=dA.marksNeedingDraw[dP];if(L.getMarkState(dQ)==='markStateHighlighted'&&!dA.get_allHighlighted()){this.drawLineMarkLayer(L,dQ,'highlightedOn',cG)}}}if(dE!==0){this.get_currentContext().restore()}}}}break}case'selectedUnderPass':{if(cE||cF){cG='colorOverrideNone';var dR=cL.get_lineAttributes();for(var dS=0;dS<dR.length;dS++){var dT=dR[dS];if(dT.get_lineState()!=='lineStateSelected'){continue}var dU=dT.worldOffsets;var dV=dU.length;for(var dW=0;dW<dV;dW++){var dX=dU[dW];bC.$d(this.get_currentContext(),dX);{for(var dY=0;dY<dT.marksNeedingDraw.length;dY++){var dZ=dT.marksNeedingDraw[dY];this.drawLineMarkLayer(L,dZ,'selectedUnder1',cG);this.drawLineMarkLayer(L,dZ,'selectedEdgeUnder',cG)}}if(dX!==0){this.get_currentContext().restore()}}}}break}case'selectedOnPass':{if(cE||cF){cG='colorOverrideOpaque';var ea=cL.get_lineAttributes();for(var eb=0;eb<ea.length;eb++){var ec=ea[eb];if(ec.get_lineState()!=='lineStateSelected'){continue}var ed=ec.worldOffsets;var ee=ed.length;for(var ef=0;ef<ee;ef++){var eg=ed[ef];bC.$d(this.get_currentContext(),eg);{for(var eh=0;eh<ec.marksNeedingDraw.length;eh++){var ei=ec.marksNeedingDraw[eh];if(L.c.get('l_neighbor').gv(ei)!==-1||L.c.get('r_neighbor').gv(ei)!==-1){this.drawLineMarkLayer(L,ei,'normalOn',cG)}else{this.drawLineMarkLayer(L,ei,'blobOn',cG)}}}{for(var ej=0;ej<ec.marksNeedingDraw.length;ej++){var ek=ec.marksNeedingDraw[ej];this.drawLineMarkLayer(L,ek,'edgeOn',cG)}}{for(var el=0;el<ec.marksNeedingDraw.length;el++){var em=ec.marksNeedingDraw[el];if(L.shouldShowMarker(em)){this.drawLineMarkLayer(L,em,'blobOn',cG)}}}if(!ec.get_allHighlighted()){{for(var en=0;en<ec.marksNeedingDraw.length;en++){var eo=ec.marksNeedingDraw[en];if(L.getMarkState(eo)==='markStateHighlighted'){this.drawLineMarkLayer(L,eo,'highlightedUnder',cG)}}}{for(var ep=0;ep<ec.marksNeedingDraw.length;ep++){var eq=ec.marksNeedingDraw[ep];if(L.getMarkState(eq)==='markStateHighlighted'){this.drawLineMarkLayer(L,eq,'highlightedOn',cG)}}}}{for(var er=0;er<ec.marksNeedingDraw.length;er++){var es=ec.marksNeedingDraw[er];if(L.getMarkState(es)==='markStateSelected'){this.drawLineMarkLayer(L,es,'selectedUnder',cG)}}}{for(var et=0;et<ec.marksNeedingDraw.length;et++){var eu=ec.marksNeedingDraw[et];if(L.getMarkState(eu)==='markStateSelected'){this.drawLineMarkLayer(L,eu,'highlightedOn',cG)}}}if(eg!==0){this.get_currentContext().restore()}}}}break}}this.get_currentContext().restore()},drawLineMarkLayer:function(L,cC,cD,cE){var cF=L.c.get('l_neighbor').gv(cC);var cG=L.c.get('r_neighbor').gv(cC);switch(cD){case'normalUnder':{var cH=cG!==-1;var cI=L.lineInterpolation;{tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+L.c.get('x').gv(cC),0+L.c.get('y').gv(cC),L.c.get('size').gv(cC),L.c.get('halo_color').gv(cC)[cE],4)}if(cH&&(cI==='lim-step'||cI==='lim-jump')){tab.CanvasRenderer.renderCircle(this.get_currentContext(),L.c.get('x').gv(cG)-L.c.get('x').gv(cC)+L.c.get('x').gv(cC),0+L.c.get('y').gv(cC),L.c.get('size').gv(cC),L.c.get('halo_color').gv(cC)[cE],4)}break}case'normalOn':{{{tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),0+L.c.get('x').gv(cC),0+L.c.get('y').gv(cC),L.c.get('size').gv(cC),L.getMarkColors(cC)[cE])}}break}case'blobUnder':{{tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+L.c.get('x').gv(cC),0+L.c.get('y').gv(cC),L.c.get('size').gv(cC)+3,L.c.get('halo_color').gv(cC)[cE],4)}break}case'blobOn':{{{tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),0+L.c.get('x').gv(cC),0+L.c.get('y').gv(cC),L.c.get('size').gv(cC)+3,L.getMarkColors(cC)[cE])}}break}case'highlightedUnder':{{tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+L.c.get('x').gv(cC),0+L.c.get('y').gv(cC),L.c.get('size').gv(cC)+4,L.c.get('selected_multi_prim_halo_color').gv(cC)[cE],4)}break}case'highlightedOn':{{{tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),0+L.c.get('x').gv(cC),0+L.c.get('y').gv(cC),L.c.get('size').gv(cC)+4,L.getMarkColors(cC)[cE])}}break}case'selectedUnder':{{tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+L.c.get('x').gv(cC),0+L.c.get('y').gv(cC),L.c.get('size').gv(cC)+4,L.c.get('selected_halo_color').gv(cC)[cE],4)}break}case'selectedUnder1':{var cJ=cG!==-1;var cK=L.lineInterpolation;{tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+L.c.get('x').gv(cC),0+L.c.get('y').gv(cC),L.c.get('size').gv(cC),L.c.get('selected_multi_prim_halo_color').gv(cC)[cE],4)}if(cJ&&(cK==='lim-step'||cK==='lim-jump')){tab.CanvasRenderer.renderCircle(this.get_currentContext(),L.c.get('x').gv(cG)-L.c.get('x').gv(cC)+L.c.get('x').gv(cC),0+L.c.get('y').gv(cC),L.c.get('size').gv(cC),L.c.get('selected_multi_prim_halo_color').gv(cC)[cE],4)}break}case'edgeUnder':{var cL=cG!==-1;var cM=L.lineInterpolation;if(cL&&cM==='lim-linear'){this.$d(L.c.get('x').gv(cC),L.c.get('x').gv(cG),L.c.get('y').gv(cC),L.c.get('y').gv(cG),L.c.get('size').gv(cC),L.c.get('size').gv(cG),L.c.get('halo_color').gv(cC)[cE],4)}if(cL&&cM==='lim-step'){this.$d(L.c.get('x').gv(cC),L.c.get('x').gv(cG),L.c.get('y').gv(cC),L.c.get('y').gv(cC),L.c.get('size').gv(cC),L.c.get('size').gv(cC),L.c.get('halo_color').gv(cC)[cE],4)}if(cL&&cM==='lim-step'){this.$d(L.c.get('x').gv(cG),L.c.get('x').gv(cG),L.c.get('y').gv(cC),L.c.get('y').gv(cG),L.c.get('size').gv(cC),L.c.get('size').gv(cG),L.c.get('halo_color').gv(cC)[cE],4)}if(cL&&cM==='lim-jump'){this.$d(L.c.get('x').gv(cC),L.c.get('x').gv(cG),L.c.get('y').gv(cC),L.c.get('y').gv(cC),L.c.get('size').gv(cC),L.c.get('size').gv(cC),L.c.get('halo_color').gv(cC)[cE],4)}break}case'selectedEdgeUnder':{var cN=cG!==-1;var cO=L.lineInterpolation;if(cN&&cO==='lim-linear'){this.$d(L.c.get('x').gv(cC),L.c.get('x').gv(cG),L.c.get('y').gv(cC),L.c.get('y').gv(cG),L.c.get('size').gv(cC),L.c.get('size').gv(cG),L.c.get('selected_multi_prim_halo_color').gv(cC)[cE],4)}if(cN&&cO==='lim-step'){this.$d(L.c.get('x').gv(cC),L.c.get('x').gv(cG),L.c.get('y').gv(cC),L.c.get('y').gv(cC),L.c.get('size').gv(cC),L.c.get('size').gv(cC),L.c.get('selected_multi_prim_halo_color').gv(cC)[cE],4)}if(cN&&cO==='lim-step'){this.$d(L.c.get('x').gv(cG),L.c.get('x').gv(cG),L.c.get('y').gv(cC),L.c.get('y').gv(cG),L.c.get('size').gv(cC),L.c.get('size').gv(cG),L.c.get('selected_multi_prim_halo_color').gv(cC)[cE],4)}if(cN&&cO==='lim-jump'){this.$d(L.c.get('x').gv(cC),L.c.get('x').gv(cG),L.c.get('y').gv(cC),L.c.get('y').gv(cC),L.c.get('size').gv(cC),L.c.get('size').gv(cC),L.c.get('selected_multi_prim_halo_color').gv(cC)[cE],4)}break}case'edgeOn':{var cP=cG!==-1;var cQ=L.lineInterpolation;if(cP&&cQ==='lim-linear'){if(L.isLineSegmentVisible(cC,cG)){var cR=cE;if(L.isLineSegmentFiltered(cC,cG)){cE='colorOverrideFog'}this.$a(L.c.get('x').gv(cC),L.c.get('x').gv(cG),L.c.get('y').gv(cC),L.c.get('y').gv(cG),L.c.get('size').gv(cC),L.c.get('size').gv(cG),L.getMarkColors(cC)[cE],L.getMarkColors(cG)[cE])}}if(cP&&(cQ==='lim-step'||cQ==='lim-jump')){if(L.isLineSegmentVisible(cC,cG)){var cS=cE;if(L.isLineSegmentFiltered(cC,cG)){cE='colorOverrideFog'}this.$a(L.c.get('x').gv(cC),L.c.get('x').gv(cG),L.c.get('y').gv(cC),L.c.get('y').gv(cC),L.c.get('size').gv(cC),L.c.get('size').gv(cC),L.getMarkColors(cC)[cE],L.getMarkColors(cC)[cE])}}if(cP&&(cQ==='lim-step'||cQ==='lim-jump')){tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),L.c.get('x').gv(cG)-L.c.get('x').gv(cC)+L.c.get('x').gv(cC),0+L.c.get('y').gv(cC),L.c.get('size').gv(cC),L.getMarkColors(cC)[cE])}if(cP&&cQ==='lim-step'){if(L.isLineSegmentVisible(cC,cG)){var cT=cE;if(L.isLineSegmentFiltered(cC,cG)){cE='colorOverrideFog'}this.$a(L.c.get('x').gv(cG),L.c.get('x').gv(cG),L.c.get('y').gv(cC),L.c.get('y').gv(cG),L.c.get('size').gv(cC),L.c.get('size').gv(cG),L.getMarkColors(cC)[cE],L.getMarkColors(cG)[cE])}}break}default:{break}}if(L.clipCase!==0){this.get_currentContext().restore()}},renderShapeMark:function(L,cC,cD){var cE=L.get_hasSelection();var cF=L.get_hasBrushing();var cG='colorOverrideNone';var cH=L.getUserPaneMarkRange(cC);var cI=cH.firstMark;var cJ=cH.lastMark;var cK=L.getUserPaneRectByIndex(cC);switch(cD){case'normalUnderPass':{if(L.get_hasBackground()&&L.get_hasHalos()){if(cE||cF){cG='colorOverrideFog'}else{cG='colorOverrideNone'}{L.markWorldOffsets.forEach(ss.mkdel(this,function(cL,cM){bC.$d(this.get_currentContext(),cM);for(var cN=cI;cN<=cJ;cN++){if(cL.has(cN)){continue}if(!L.markNeedsDraw(cN)){continue}if(L.getMarkState(cN)!=='markStateNormal'){continue}this.drawShapeMarkLayer(L,cN,'normalUnder',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cM,0)){this.get_currentContext().restore()}}))}if(cE||cF){cG='colorOverrideNone';{L.markWorldOffsets.forEach(ss.mkdel(this,function(cL,cM){bC.$d(this.get_currentContext(),cM);for(var cN=cI;cN<=cJ;cN++){if(cL.has(cN)){continue}if(!L.markNeedsDraw(cN)){continue}if(L.getMarkState(cN)!=='markStateHighlighted'){continue}this.drawShapeMarkLayer(L,cN,'normalUnder',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cM,0)){this.get_currentContext().restore()}}))}}}break}case'normalOnPass':{if(cE||cF){cG='colorOverrideFog'}else{cG='colorOverrideNone'}{L.markWorldOffsets.forEach(ss.mkdel(this,function(cL,cM){bC.$d(this.get_currentContext(),cM);for(var cN=cI;cN<=cJ;cN++){if(cL.has(cN)){continue}if(!L.markNeedsDraw(cN)){continue}if(L.getMarkState(cN)!=='markStateNormal'){continue}this.drawShapeMarkLayer(L,cN,'normalOn',cG);if(L.drawBorder){this.drawShapeMarkLayer(L,cN,'border',cG)}}if(!tab.DoubleUtil.isApproximatelyEqual(cM,0)){this.get_currentContext().restore()}}))}break}case'highlightedUnderPass':{break}case'highlightedOnPass':{if(cE||cF){cG='colorOverrideNone';{L.markWorldOffsets.forEach(ss.mkdel(this,function(cL,cM){bC.$d(this.get_currentContext(),cM);for(var cN=cI;cN<=cJ;cN++){if(cL.has(cN)){continue}if(!L.markNeedsDraw(cN)){continue}if(L.getMarkState(cN)!=='markStateHighlighted'){continue}this.drawShapeMarkLayer(L,cN,'normalOn',cG);if(L.drawBorder){this.drawShapeMarkLayer(L,cN,'border',cG)}}if(!tab.DoubleUtil.isApproximatelyEqual(cM,0)){this.get_currentContext().restore()}}))}}break}case'selectedUnderPass':{if(cE||cF){cG='colorOverrideOpaque';{L.markWorldOffsets.forEach(ss.mkdel(this,function(cL,cM){bC.$d(this.get_currentContext(),cM);for(var cN=cI;cN<=cJ;cN++){if(cL.has(cN)){continue}if(!L.markNeedsDraw(cN)){continue}if(L.getMarkState(cN)!=='markStateSelected'){continue}this.drawShapeMarkLayer(L,cN,'selectedUnder',cG)}if(!tab.DoubleUtil.isApproximatelyEqual(cM,0)){this.get_currentContext().restore()}}))}}break}case'selectedOnPass':{if(cE||cF){cG='colorOverrideOpaque';{L.markWorldOffsets.forEach(ss.mkdel(this,function(cL,cM){bC.$d(this.get_currentContext(),cM);for(var cN=cI;cN<=cJ;cN++){if(cL.has(cN)){continue}if(!L.markNeedsDraw(cN)){continue}if(L.getMarkState(cN)!=='markStateSelected'){continue}this.drawShapeMarkLayer(L,cN,'normalOn',cG);if(L.drawBorder){this.drawShapeMarkLayer(L,cN,'border',cG)}}if(!tab.DoubleUtil.isApproximatelyEqual(cM,0)){this.get_currentContext().restore()}}))}}break}}},drawShapeMarkLayer:function(L,cC,cD,cE){var cF=L.c.get('shape_id').gv(cC);if(!bC.shapeHasLayerContent(cF,cD)){return}var cG=L.c.get('x').gv(cC);var cH=L.c.get('y').gv(cC);var cI=L.shouldStampThisShapeMark(cC);if(!cI){this.renderShapeMarkLayer(L,cG,cH,cC,cD,cE,false);return}var cJ=L.c.get('size').gv(cC);var cK=bC.$7(L,cC,cD,cE);var cL=bC.getShapeMarkSpriteSize(cF,cD,cJ)+2;var cM=cL/2;var cN=cH-cM;var cO=cG-cM;var cP=this.get_currentContext();var cQ=tab.ShapeManager.getCacheKey(cF,cD,cE,cK,cJ);var cR=tab.ApplicationModel.get_instance().get_shapeManager().getCachedStampCanvas(cQ);if(ss.isNullOrUndefined(cR)){var cS=function(){var cT=document.createElement('canvas');var cU=new tab.TabRenderContext2D(cT.getContext('2d'));tab.CanvasUtil.sizeCanvasWithHighDPISupport(cT,cU,{w:cL,h:cL});if(tab.FeatureParamsLookup.getBool(38)){cU.set_shapeFillStyle('rgba(255, 0, 0, 0.12)');cU.fillRect(0,0,cL,cL)}var cV=new bC(cT,cU);cV.renderShapeMarkLayer(L,cM,cM,cC,cD,cE,true);return cT};cR=tab.ApplicationModel.get_instance().get_shapeManager().generateCachedStampCanvas(cQ,cS)}if(ss.isValue(cR)){cP.drawImage3(cR,cO+0.5<<0,cN+0.5<<0,cL,cL)}else{this.renderShapeMarkLayer(L,cG,cH,cC,cD,cE,false)}},renderShapeMarkLayer:function(L,cC,cD,cE,cF,cG,cH){var cI=L.clipCase!==0&&!cH;if(cI){this.get_currentContext().save();this.clipRect(L.clipCase,L.c.get('cell_x').gv(cE),L.c.get('cell_y').gv(cE),L.c.get('clip_width').gv(cE),L.c.get('clip_height').gv(cE))}var cJ=L.c.get('shape_id').gv(cE);switch(cJ){case'shapeIDCircle':{this.$g(L,cC,cD,cE,cF,cG);break}case'shapeIDFilledCircle':{this.$j(L,cC,cD,cE,cF,cG);break}case'shapeIDUnscaledFilledCircle':{this.$z(L,cC,cD,cE,cF,cG);break}case'shapeIDSquare':{this.$w(L,cC,cD,cE,cF,cG);break}case'shapeIDFilledSquare':{this.$p(L,cC,cD,cE,cF,cG);break}case'shapeIDAsterisk':{this.$f(L,cC,cD,cE,cF,cG);break}case'shapeIDPlus':{this.$u(L,cC,cD,cE,cF,cG);break}case'shapeIDFilledPlus':{this.$n(L,cC,cD,cE,cF,cG);break}case'shapeIDTimes':{this.$x(L,cC,cD,cE,cF,cG);break}case'shapeIDFilledTimes':{this.$r(L,cC,cD,cE,cF,cG);break}case'shapeIDDiamond':{this.$h(L,cC,cD,cE,cF,cG);break}case'shapeIDFilledDiamond':{this.$k(L,cC,cD,cE,cF,cG);break}case'shapeIDTriangle':{this.$y(L,cC,cD,cE,cF,cG);break}case'shapeIDFilledTriangle':{this.$s(L,cC,cD,cE,cF,cG);break}case'shapeIDDownTriangle':{this.$i(L,cC,cD,cE,cF,cG);break}case'shapeIDFilledDownTriangle':{this.$l(L,cC,cD,cE,cF,cG);break}case'shapeIDLeftTriangle':{this.$t(L,cC,cD,cE,cF,cG);break}case'shapeIDFilledLeftTriangle':{this.$m(L,cC,cD,cE,cF,cG);break}case'shapeIDRightTriangle':{this.$v(L,cC,cD,cE,cF,cG);break}case'shapeIDFilledRightTriangle':{this.$o(L,cC,cD,cE,cF,cG);break}case'shapeIDFilledStar':{this.$q(L,cC,cD,cE,cF,cG);break}default:{bC.$b(this.get_currentContext(),L,cE,cF,cG);break}}if(cI){this.get_currentContext().restore()}},$g:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{{tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+cC,0+cD,L.c.get('size').gv(cE)*0.958333333333333,L.c.get('halo_color').gv(cE)[cG],4)}break}case'normalOn':{{tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+cC,0+cD,L.c.get('size').gv(cE)*0.958333333333333,L.getMarkColors(cE)[cG],2)}break}case'selectedUnder':{{tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+cC,0+cD,L.c.get('size').gv(cE)*0.958333333333333,L.c.get('selected_halo_color').gv(cE)[cG],4)}break}default:{break}}},$j:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{{tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+cC,0+cD,L.c.get('size').gv(cE)*0.979166666666667,L.c.get('halo_color').gv(cE)[cG],4)}break}case'normalOn':{{{tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),0+cC,0+cD,L.c.get('size').gv(cE)*0.979166666666667,L.getMarkColors(cE)[cG])}}break}case'selectedUnder':{{tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+cC,0+cD,L.c.get('size').gv(cE)*0.979166666666667,L.c.get('selected_halo_color').gv(cE)[cG],4)}break}case'border':{{tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+cC,0+cD,L.c.get('size').gv(cE)*0.979166666666667,L.c.get('border_color').gv(cE)[cG],1)}break}default:{break}}},$z:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{{tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+cC,0+cD,L.c.get('size').gv(cE),L.c.get('halo_color').gv(cE)[cG],4)}break}case'normalOn':{{{tab.CanvasRenderer.renderFilledCircle(this.get_currentContext(),0+cC,0+cD,L.c.get('size').gv(cE),L.getMarkColors(cE)[cG])}}break}case'selectedUnder':{{tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+cC,0+cD,L.c.get('size').gv(cE),L.c.get('selected_halo_color').gv(cE)[cG],4)}break}case'border':{{tab.CanvasRenderer.renderCircle(this.get_currentContext(),0+cC,0+cD,L.c.get('size').gv(cE),L.c.get('border_color').gv(cE)[cG],1)}break}default:{break}}},$w:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{{tab.CanvasRenderer.renderRectangle(this.get_currentContext(),cC+0,cD+0,L.c.get('size').gv(cE)*0.895833333333333,L.c.get('size').gv(cE)*0.895833333333333,L.c.get('halo_color').gv(cE)[cG],4)}break}case'normalOn':{{tab.CanvasRenderer.renderRectangle(this.get_currentContext(),cC+0,cD+0,L.c.get('size').gv(cE)*0.895833333333333,L.c.get('size').gv(cE)*0.895833333333333,L.getMarkColors(cE)[cG],2)}break}case'selectedUnder':{{tab.CanvasRenderer.renderRectangle(this.get_currentContext(),cC+0,cD+0,L.c.get('size').gv(cE)*0.895833333333333,L.c.get('size').gv(cE)*0.895833333333333,L.c.get('selected_halo_color').gv(cE)[cG],4)}break}default:{break}}},$p:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{{tab.CanvasRenderer.renderRectangle(this.get_currentContext(),cC+0,cD+0,L.c.get('size').gv(cE)*0.9375,L.c.get('size').gv(cE)*0.9375,L.c.get('halo_color').gv(cE)[cG],4)}break}case'normalOn':{{this.renderFilledRectangle(cC+0,cD+0,L.c.get('size').gv(cE)*0.9375,L.c.get('size').gv(cE)*0.9375,L.getMarkColors(cE)[cG])}break}case'selectedUnder':{{tab.CanvasRenderer.renderRectangle(this.get_currentContext(),cC+0,cD+0,L.c.get('size').gv(cE)*0.9375,L.c.get('size').gv(cE)*0.9375,L.c.get('selected_halo_color').gv(cE)[cG],4)}break}case'border':{{tab.CanvasRenderer.renderRectangle(this.get_currentContext(),cC+0,cD+0,L.c.get('size').gv(cE)*0.9375,L.c.get('size').gv(cE)*0.9375,L.c.get('border_color').gv(cE)[cG],1)}break}default:{break}}},$f:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{var cH=L.c.get('size').gv(cE)*0.958333333333333/2;var cI=0.899999976158142*cH;var cJ=L.c.get('size').gv(cE)*0.958333333333333/4;{{this.get_currentContext().set_lineCap('square');var cK=cC;var cL=cD;var cM=new Array(4);cM[0]=cK+0;cM[1]=cL+-cH;cM[2]=cK+0;cM[3]=cL+cH;this.$c(cM,4,L.c.get('halo_color').gv(cE)[cG],true)}}{{this.get_currentContext().set_lineCap('square');var cN=cC;var cO=cD;var cP=new Array(4);cP[0]=cN+-cI;cP[1]=cO+-cJ;cP[2]=cN+cI;cP[3]=cO+cJ;this.$c(cP,4,L.c.get('halo_color').gv(cE)[cG],true)}}{{this.get_currentContext().set_lineCap('square');var cQ=cC;var cR=cD;var cS=new Array(4);cS[0]=cQ+cI;cS[1]=cR+-cJ;cS[2]=cQ+-cI;cS[3]=cR+cJ;this.$c(cS,4,L.c.get('halo_color').gv(cE)[cG],true)}}break}case'normalOn':{var cT=L.c.get('size').gv(cE)*0.958333333333333/2;var cU=0.899999976158142*cT;var cV=L.c.get('size').gv(cE)*0.958333333333333/4;{{this.get_currentContext().set_lineCap('square');var cW=cC;var cX=cD;var cY=new Array(4);cY[0]=cW+0;cY[1]=cX+-cT;cY[2]=cW+0;cY[3]=cX+cT;this.$c(cY,2,L.getMarkColors(cE)[cG],true)}}{{this.get_currentContext().set_lineCap('square');var cZ=cC;var da=cD;var db=new Array(4);db[0]=cZ+-cU;db[1]=da+-cV;db[2]=cZ+cU;db[3]=da+cV;this.$c(db,2,L.getMarkColors(cE)[cG],true)}}{{this.get_currentContext().set_lineCap('square');var dc=cC;var dd=cD;var de=new Array(4);de[0]=dc+cU;de[1]=dd+-cV;de[2]=dc+-cU;de[3]=dd+cV;this.$c(de,2,L.getMarkColors(cE)[cG],true)}}break}case'selectedUnder':{var df=L.c.get('size').gv(cE)*0.958333333333333/2;var dg=0.899999976158142*df;var dh=L.c.get('size').gv(cE)*0.958333333333333/4;{{this.get_currentContext().set_lineCap('square');var di=cC;var dj=cD;var dk=new Array(4);dk[0]=di+0;dk[1]=dj+-df;dk[2]=di+0;dk[3]=dj+df;this.$c(dk,4,L.c.get('selected_halo_color').gv(cE)[cG],true)}}{{this.get_currentContext().set_lineCap('square');var dl=cC;var dm=cD;var dn=new Array(4);dn[0]=dl+-dg;dn[1]=dm+-dh;dn[2]=dl+dg;dn[3]=dm+dh;this.$c(dn,4,L.c.get('selected_halo_color').gv(cE)[cG],true)}}{{this.get_currentContext().set_lineCap('square');var dp=cC;var dq=cD;var dr=new Array(4);dr[0]=dp+dg;dr[1]=dq+-dh;dr[2]=dp+-dg;dr[3]=dq+dh;this.$c(dr,4,L.c.get('selected_halo_color').gv(cE)[cG],true)}}break}default:{break}}},$u:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{var cH=L.c.get('size').gv(cE)*0.916666666666667/2;{{this.get_currentContext().set_lineCap('square');var cI=cC;var cJ=cD;var cK=new Array(4);cK[0]=cI+0;cK[1]=cJ+-cH;cK[2]=cI+0;cK[3]=cJ+cH;this.$c(cK,4,L.c.get('halo_color').gv(cE)[cG],true)}}{{this.get_currentContext().set_lineCap('square');var cL=cC;var cM=cD;var cN=new Array(4);cN[0]=cL+-cH;cN[1]=cM+0;cN[2]=cL+cH;cN[3]=cM+0;this.$c(cN,4,L.c.get('halo_color').gv(cE)[cG],true)}}break}case'normalOn':{var cO=L.c.get('size').gv(cE)*0.916666666666667/2;{{this.get_currentContext().set_lineCap('square');var cP=cC;var cQ=cD;var cR=new Array(4);cR[0]=cP+0;cR[1]=cQ+-cO;cR[2]=cP+0;cR[3]=cQ+cO;this.$c(cR,2,L.getMarkColors(cE)[cG],true)}}{{this.get_currentContext().set_lineCap('square');var cS=cC;var cT=cD;var cU=new Array(4);cU[0]=cS+-cO;cU[1]=cT+0;cU[2]=cS+cO;cU[3]=cT+0;this.$c(cU,2,L.getMarkColors(cE)[cG],true)}}break}case'selectedUnder':{var cV=L.c.get('size').gv(cE)*0.916666666666667/2;{{this.get_currentContext().set_lineCap('square');var cW=cC;var cX=cD;var cY=new Array(4);cY[0]=cW+0;cY[1]=cX+-cV;cY[2]=cW+0;cY[3]=cX+cV;this.$c(cY,4,L.c.get('selected_halo_color').gv(cE)[cG],true)}}{{this.get_currentContext().set_lineCap('square');var cZ=cC;var da=cD;var db=new Array(4);db[0]=cZ+-cV;db[1]=da+0;db[2]=cZ+cV;db[3]=da+0;this.$c(db,4,L.c.get('selected_halo_color').gv(cE)[cG],true)}}break}default:{break}}},$n:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{var cH=L.c.get('size').gv(cE)*0.9375/2;var cI=cH/3;{{var cJ=cC;var cK=cD;var cL=new Array(24);cL[0]=cJ+-cI;cL[1]=cK+-cH;cL[2]=cJ+-cI;cL[3]=cK+-cI;cL[4]=cJ+-cH;cL[5]=cK+-cI;cL[6]=cJ+-cH;cL[7]=cK+cI;cL[8]=cJ+-cI;cL[9]=cK+cI;cL[10]=cJ+-cI;cL[11]=cK+cH;cL[12]=cJ+cI;cL[13]=cK+cH;cL[14]=cJ+cI;cL[15]=cK+cI;cL[16]=cJ+cH;cL[17]=cK+cI;cL[18]=cJ+cH;cL[19]=cK+-cI;cL[20]=cJ+cI;cL[21]=cK+-cI;cL[22]=cJ+cI;cL[23]=cK+-cH;this.get_currentContext().set_lineJoin('miter');this.$e(cL,4,L.c.get('halo_color').gv(cE)[cG])}}break}case'normalOn':{var cM=L.c.get('size').gv(cE)*0.9375/2;var cN=cM/3;{{var cO=cC;var cP=cD;var cQ=new Array(24);cQ[0]=cO+-cN;cQ[1]=cP+-cM;cQ[2]=cO+-cN;cQ[3]=cP+-cN;cQ[4]=cO+-cM;cQ[5]=cP+-cN;cQ[6]=cO+-cM;cQ[7]=cP+cN;cQ[8]=cO+-cN;cQ[9]=cP+cN;cQ[10]=cO+-cN;cQ[11]=cP+cM;cQ[12]=cO+cN;cQ[13]=cP+cM;cQ[14]=cO+cN;cQ[15]=cP+cN;cQ[16]=cO+cM;cQ[17]=cP+cN;cQ[18]=cO+cM;cQ[19]=cP+-cN;cQ[20]=cO+cN;cQ[21]=cP+-cN;cQ[22]=cO+cN;cQ[23]=cP+-cM;this.$b(cQ,L.getMarkColors(cE)[cG])}}break}case'selectedUnder':{var cR=L.c.get('size').gv(cE)*0.9375/2;var cS=cR/3;{{var cT=cC;var cU=cD;var cV=new Array(24);cV[0]=cT+-cS;cV[1]=cU+-cR;cV[2]=cT+-cS;cV[3]=cU+-cS;cV[4]=cT+-cR;cV[5]=cU+-cS;cV[6]=cT+-cR;cV[7]=cU+cS;cV[8]=cT+-cS;cV[9]=cU+cS;cV[10]=cT+-cS;cV[11]=cU+cR;cV[12]=cT+cS;cV[13]=cU+cR;cV[14]=cT+cS;cV[15]=cU+cS;cV[16]=cT+cR;cV[17]=cU+cS;cV[18]=cT+cR;cV[19]=cU+-cS;cV[20]=cT+cS;cV[21]=cU+-cS;cV[22]=cT+cS;cV[23]=cU+-cR;this.get_currentContext().set_lineJoin('miter');this.$e(cV,4,L.c.get('selected_halo_color').gv(cE)[cG])}}break}default:{break}}},$x:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{var cH=L.c.get('size').gv(cE)*0.875/2;{{this.get_currentContext().set_lineCap('square');var cI=cC;var cJ=cD;var cK=new Array(4);cK[0]=cI+-cH;cK[1]=cJ+-cH;cK[2]=cI+cH;cK[3]=cJ+cH;this.$c(cK,4,L.c.get('halo_color').gv(cE)[cG],true)}}{{this.get_currentContext().set_lineCap('square');var cL=cC;var cM=cD;var cN=new Array(4);cN[0]=cL+-cH;cN[1]=cM+cH;cN[2]=cL+cH;cN[3]=cM+-cH;this.$c(cN,4,L.c.get('halo_color').gv(cE)[cG],true)}}break}case'normalOn':{var cO=L.c.get('size').gv(cE)*0.875/2;{{this.get_currentContext().set_lineCap('square');var cP=cC;var cQ=cD;var cR=new Array(4);cR[0]=cP+-cO;cR[1]=cQ+-cO;cR[2]=cP+cO;cR[3]=cQ+cO;this.$c(cR,2,L.getMarkColors(cE)[cG],true)}}{{this.get_currentContext().set_lineCap('square');var cS=cC;var cT=cD;var cU=new Array(4);cU[0]=cS+-cO;cU[1]=cT+cO;cU[2]=cS+cO;cU[3]=cT+-cO;this.$c(cU,2,L.getMarkColors(cE)[cG],true)}}break}case'selectedUnder':{var cV=L.c.get('size').gv(cE)*0.875/2;{{this.get_currentContext().set_lineCap('square');var cW=cC;var cX=cD;var cY=new Array(4);cY[0]=cW+-cV;cY[1]=cX+-cV;cY[2]=cW+cV;cY[3]=cX+cV;this.$c(cY,4,L.c.get('selected_halo_color').gv(cE)[cG],true)}}{{this.get_currentContext().set_lineCap('square');var cZ=cC;var da=cD;var db=new Array(4);db[0]=cZ+-cV;db[1]=da+cV;db[2]=cZ+cV;db[3]=da+-cV;this.$c(db,4,L.c.get('selected_halo_color').gv(cE)[cG],true)}}break}default:{break}}},$r:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{var cH=L.c.get('size').gv(cE)*0.9375/2;var cI=L.c.get('size').gv(cE)*0.9375/4;{{var cJ=cC;var cK=cD;var cL=new Array(24);cL[0]=cJ+-cI;cL[1]=cK+-cH;cL[2]=cJ+-cH;cL[3]=cK+-cI;cL[4]=cJ+-cI;cL[5]=cK+0;cL[6]=cJ+-cH;cL[7]=cK+cI;cL[8]=cJ+-cI;cL[9]=cK+cH;cL[10]=cJ+0;cL[11]=cK+cI;cL[12]=cJ+cI;cL[13]=cK+cH;cL[14]=cJ+cH;cL[15]=cK+cI;cL[16]=cJ+cI;cL[17]=cK+0;cL[18]=cJ+cH;cL[19]=cK+-cI;cL[20]=cJ+cI;cL[21]=cK+-cH;cL[22]=cJ+0;cL[23]=cK+-cI;this.get_currentContext().set_lineJoin('miter');this.$e(cL,4,L.c.get('halo_color').gv(cE)[cG])}}break}case'normalOn':{var cM=L.c.get('size').gv(cE)*0.9375/2;var cN=L.c.get('size').gv(cE)*0.9375/4;{{var cO=cC;var cP=cD;var cQ=new Array(24);cQ[0]=cO+-cN;cQ[1]=cP+-cM;cQ[2]=cO+-cM;cQ[3]=cP+-cN;cQ[4]=cO+-cN;cQ[5]=cP+0;cQ[6]=cO+-cM;cQ[7]=cP+cN;cQ[8]=cO+-cN;cQ[9]=cP+cM;cQ[10]=cO+0;cQ[11]=cP+cN;cQ[12]=cO+cN;cQ[13]=cP+cM;cQ[14]=cO+cM;cQ[15]=cP+cN;cQ[16]=cO+cN;cQ[17]=cP+0;cQ[18]=cO+cM;cQ[19]=cP+-cN;cQ[20]=cO+cN;cQ[21]=cP+-cM;cQ[22]=cO+0;cQ[23]=cP+-cN;this.$b(cQ,L.getMarkColors(cE)[cG])}}break}case'selectedUnder':{var cR=L.c.get('size').gv(cE)*0.9375/2;var cS=L.c.get('size').gv(cE)*0.9375/4;{{var cT=cC;var cU=cD;var cV=new Array(24);cV[0]=cT+-cS;cV[1]=cU+-cR;cV[2]=cT+-cR;cV[3]=cU+-cS;cV[4]=cT+-cS;cV[5]=cU+0;cV[6]=cT+-cR;cV[7]=cU+cS;cV[8]=cT+-cS;cV[9]=cU+cR;cV[10]=cT+0;cV[11]=cU+cS;cV[12]=cT+cS;cV[13]=cU+cR;cV[14]=cT+cR;cV[15]=cU+cS;cV[16]=cT+cS;cV[17]=cU+0;cV[18]=cT+cR;cV[19]=cU+-cS;cV[20]=cT+cS;cV[21]=cU+-cR;cV[22]=cT+0;cV[23]=cU+-cS;this.get_currentContext().set_lineJoin('miter');this.$e(cV,4,L.c.get('selected_halo_color').gv(cE)[cG])}}break}default:{break}}},$h:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{var cH=L.c.get('size').gv(cE)*1.04166666666667/2;{{var cI=cC;var cJ=cD;var cK=new Array(8);cK[0]=cI+0;cK[1]=cJ+-cH;cK[2]=cI+-cH;cK[3]=cJ+0;cK[4]=cI+0;cK[5]=cJ+cH;cK[6]=cI+cH;cK[7]=cJ+0;this.get_currentContext().set_lineJoin('miter');this.$e(cK,4,L.c.get('halo_color').gv(cE)[cG])}}break}case'normalOn':{var cL=L.c.get('size').gv(cE)*1.04166666666667/2;{{var cM=cC;var cN=cD;var cO=new Array(8);cO[0]=cM+0;cO[1]=cN+-cL;cO[2]=cM+-cL;cO[3]=cN+0;cO[4]=cM+0;cO[5]=cN+cL;cO[6]=cM+cL;cO[7]=cN+0;this.get_currentContext().set_lineJoin('miter');this.$e(cO,2,L.getMarkColors(cE)[cG])}}break}case'selectedUnder':{var cP=L.c.get('size').gv(cE)*1.04166666666667/2;{{var cQ=cC;var cR=cD;var cS=new Array(8);cS[0]=cQ+0;cS[1]=cR+-cP;cS[2]=cQ+-cP;cS[3]=cR+0;cS[4]=cQ+0;cS[5]=cR+cP;cS[6]=cQ+cP;cS[7]=cR+0;this.get_currentContext().set_lineJoin('miter');this.$e(cS,4,L.c.get('selected_halo_color').gv(cE)[cG])}}break}default:{break}}},$k:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{var cH=L.c.get('size').gv(cE)*1.04166666666667/2;{{var cI=cC;var cJ=cD;var cK=new Array(8);cK[0]=cI+0;cK[1]=cJ+-cH;cK[2]=cI+-cH;cK[3]=cJ+0;cK[4]=cI+0;cK[5]=cJ+cH;cK[6]=cI+cH;cK[7]=cJ+0;this.get_currentContext().set_lineJoin('miter');this.$e(cK,4,L.c.get('halo_color').gv(cE)[cG])}}break}case'normalOn':{var cL=L.c.get('size').gv(cE)*1.04166666666667/2;{{var cM=cC;var cN=cD;var cO=new Array(8);cO[0]=cM+0;cO[1]=cN+-cL;cO[2]=cM+-cL;cO[3]=cN+0;cO[4]=cM+0;cO[5]=cN+cL;cO[6]=cM+cL;cO[7]=cN+0;this.$b(cO,L.getMarkColors(cE)[cG])}}break}case'selectedUnder':{var cP=L.c.get('size').gv(cE)*1.04166666666667/2;{{var cQ=cC;var cR=cD;var cS=new Array(8);cS[0]=cQ+0;cS[1]=cR+-cP;cS[2]=cQ+-cP;cS[3]=cR+0;cS[4]=cQ+0;cS[5]=cR+cP;cS[6]=cQ+cP;cS[7]=cR+0;this.get_currentContext().set_lineJoin('miter');this.$e(cS,4,L.c.get('selected_halo_color').gv(cE)[cG])}}break}default:{break}}},$y:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{var cH=L.c.get('size').gv(cE)*0.895833333333333/2;{{var cI=cC;var cJ=cD;var cK=new Array(6);cK[0]=cI+0;cK[1]=cJ+-cH;cK[2]=cI+-cH;cK[3]=cJ+cH;cK[4]=cI+cH;cK[5]=cJ+cH;this.get_currentContext().set_lineJoin('miter');this.$e(cK,4,L.c.get('halo_color').gv(cE)[cG])}}break}case'normalOn':{var cL=L.c.get('size').gv(cE)*0.895833333333333/2;{{var cM=cC;var cN=cD;var cO=new Array(6);cO[0]=cM+0;cO[1]=cN+-cL;cO[2]=cM+-cL;cO[3]=cN+cL;cO[4]=cM+cL;cO[5]=cN+cL;this.get_currentContext().set_lineJoin('miter');this.$e(cO,2,L.getMarkColors(cE)[cG])}}break}case'selectedUnder':{var cP=L.c.get('size').gv(cE)*0.895833333333333/2;{{var cQ=cC;var cR=cD;var cS=new Array(6);cS[0]=cQ+0;cS[1]=cR+-cP;cS[2]=cQ+-cP;cS[3]=cR+cP;cS[4]=cQ+cP;cS[5]=cR+cP;this.get_currentContext().set_lineJoin('miter');this.$e(cS,4,L.c.get('selected_halo_color').gv(cE)[cG])}}break}default:{break}}},$s:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{var cH=L.c.get('size').gv(cE)*0.916666666666667/2;{{var cI=cC;var cJ=cD;var cK=new Array(6);cK[0]=cI+0;cK[1]=cJ+-cH;cK[2]=cI+-cH;cK[3]=cJ+cH;cK[4]=cI+cH;cK[5]=cJ+cH;this.get_currentContext().set_lineJoin('miter');this.$e(cK,4,L.c.get('halo_color').gv(cE)[cG])}}break}case'normalOn':{var cL=L.c.get('size').gv(cE)*0.916666666666667/2;{{var cM=cC;var cN=cD;var cO=new Array(6);cO[0]=cM+0;cO[1]=cN+-cL;cO[2]=cM+-cL;cO[3]=cN+cL;cO[4]=cM+cL;cO[5]=cN+cL;this.$b(cO,L.getMarkColors(cE)[cG])}}break}case'selectedUnder':{var cP=L.c.get('size').gv(cE)*0.916666666666667/2;{{var cQ=cC;var cR=cD;var cS=new Array(6);cS[0]=cQ+0;cS[1]=cR+-cP;cS[2]=cQ+-cP;cS[3]=cR+cP;cS[4]=cQ+cP;cS[5]=cR+cP;this.get_currentContext().set_lineJoin('miter');this.$e(cS,4,L.c.get('selected_halo_color').gv(cE)[cG])}}break}default:{break}}},$i:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{var cH=L.c.get('size').gv(cE)*0.895833333333333/2;{{var cI=cC;var cJ=cD;var cK=new Array(6);cK[0]=cI+0;cK[1]=cJ+cH;cK[2]=cI+-cH;cK[3]=cJ+-cH;cK[4]=cI+cH;cK[5]=cJ+-cH;this.get_currentContext().set_lineJoin('miter');this.$e(cK,4,L.c.get('halo_color').gv(cE)[cG])}}break}case'normalOn':{var cL=L.c.get('size').gv(cE)*0.895833333333333/2;{{var cM=cC;var cN=cD;var cO=new Array(6);cO[0]=cM+0;cO[1]=cN+cL;cO[2]=cM+-cL;cO[3]=cN+-cL;cO[4]=cM+cL;cO[5]=cN+-cL;this.get_currentContext().set_lineJoin('miter');this.$e(cO,2,L.getMarkColors(cE)[cG])}}break}case'selectedUnder':{var cP=L.c.get('size').gv(cE)*0.895833333333333/2;{{var cQ=cC;var cR=cD;var cS=new Array(6);cS[0]=cQ+0;cS[1]=cR+cP;cS[2]=cQ+-cP;cS[3]=cR+-cP;cS[4]=cQ+cP;cS[5]=cR+-cP;this.get_currentContext().set_lineJoin('miter');this.$e(cS,4,L.c.get('selected_halo_color').gv(cE)[cG])}}break}default:{break}}},$l:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{var cH=L.c.get('size').gv(cE)*0.916666666666667/2;{{var cI=cC;var cJ=cD;var cK=new Array(6);cK[0]=cI+0;cK[1]=cJ+cH;cK[2]=cI+-cH;cK[3]=cJ+-cH;cK[4]=cI+cH;cK[5]=cJ+-cH;this.get_currentContext().set_lineJoin('miter');this.$e(cK,4,L.c.get('halo_color').gv(cE)[cG])}}break}case'normalOn':{var cL=L.c.get('size').gv(cE)*0.916666666666667/2;{{var cM=cC;var cN=cD;var cO=new Array(6);cO[0]=cM+0;cO[1]=cN+cL;cO[2]=cM+-cL;cO[3]=cN+-cL;cO[4]=cM+cL;cO[5]=cN+-cL;this.$b(cO,L.getMarkColors(cE)[cG])}}break}case'selectedUnder':{var cP=L.c.get('size').gv(cE)*0.916666666666667/2;{{var cQ=cC;var cR=cD;var cS=new Array(6);cS[0]=cQ+0;cS[1]=cR+L.c.get('size').gv(cE)*0.916666666666667/2;cS[2]=cQ+-cP;cS[3]=cR+-cP;cS[4]=cQ+cP;cS[5]=cR+-cP;this.get_currentContext().set_lineJoin('miter');this.$e(cS,4,L.c.get('selected_halo_color').gv(cE)[cG])}}break}default:{break}}},$t:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{var cH=L.c.get('size').gv(cE)*0.895833333333333/2;{{var cI=cC;var cJ=cD;var cK=new Array(6);cK[0]=cI+-cH;cK[1]=cJ+0;cK[2]=cI+cH;cK[3]=cJ+-cH;cK[4]=cI+cH;cK[5]=cJ+cH;this.get_currentContext().set_lineJoin('miter');this.$e(cK,4,L.c.get('halo_color').gv(cE)[cG])}}break}case'normalOn':{var cL=L.c.get('size').gv(cE)*0.895833333333333/2;{{var cM=cC;var cN=cD;var cO=new Array(6);cO[0]=cM+-cL;cO[1]=cN+0;cO[2]=cM+cL;cO[3]=cN+-cL;cO[4]=cM+cL;cO[5]=cN+cL;this.get_currentContext().set_lineJoin('miter');this.$e(cO,2,L.getMarkColors(cE)[cG])}}break}case'selectedUnder':{var cP=L.c.get('size').gv(cE)*0.895833333333333/2;{{var cQ=cC;var cR=cD;var cS=new Array(6);cS[0]=cQ+-cP;cS[1]=cR+0;cS[2]=cQ+cP;cS[3]=cR+-cP;cS[4]=cQ+cP;cS[5]=cR+cP;this.get_currentContext().set_lineJoin('miter');this.$e(cS,4,L.c.get('selected_halo_color').gv(cE)[cG])}}break}default:{break}}},$m:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{var cH=L.c.get('size').gv(cE)*0.916666666666667/2;{{var cI=cC;var cJ=cD;var cK=new Array(6);cK[0]=cI+-cH;cK[1]=cJ+0;cK[2]=cI+cH;cK[3]=cJ+-cH;cK[4]=cI+cH;cK[5]=cJ+cH;this.get_currentContext().set_lineJoin('miter');this.$e(cK,4,L.c.get('halo_color').gv(cE)[cG])}}break}case'normalOn':{var cL=L.c.get('size').gv(cE)*0.916666666666667/2;{{var cM=cC;var cN=cD;var cO=new Array(6);cO[0]=cM+-cL;cO[1]=cN+0;cO[2]=cM+cL;cO[3]=cN+-cL;cO[4]=cM+cL;cO[5]=cN+cL;this.$b(cO,L.getMarkColors(cE)[cG])}}break}case'selectedUnder':{var cP=L.c.get('size').gv(cE)*0.916666666666667/2;{{var cQ=cC;var cR=cD;var cS=new Array(6);cS[0]=cQ+-cP;cS[1]=cR+0;cS[2]=cQ+cP;cS[3]=cR+-cP;cS[4]=cQ+cP;cS[5]=cR+cP;this.get_currentContext().set_lineJoin('miter');this.$e(cS,4,L.c.get('selected_halo_color').gv(cE)[cG])}}break}default:{break}}},$v:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{var cH=L.c.get('size').gv(cE)*0.895833333333333/2;{{var cI=cC;var cJ=cD;var cK=new Array(6);cK[0]=cI+-cH;cK[1]=cJ+-cH;cK[2]=cI+-cH;cK[3]=cJ+cH;cK[4]=cI+cH;cK[5]=cJ+0;this.get_currentContext().set_lineJoin('miter');this.$e(cK,4,L.c.get('halo_color').gv(cE)[cG])}}break}case'normalOn':{var cL=L.c.get('size').gv(cE)*0.895833333333333/2;{{var cM=cC;var cN=cD;var cO=new Array(6);cO[0]=cM+-cL;cO[1]=cN+-cL;cO[2]=cM+-cL;cO[3]=cN+cL;cO[4]=cM+cL;cO[5]=cN+0;this.get_currentContext().set_lineJoin('miter');this.$e(cO,2,L.getMarkColors(cE)[cG])}}break}case'selectedUnder':{var cP=L.c.get('size').gv(cE)*0.895833333333333/2;{{var cQ=cC;var cR=cD;var cS=new Array(6);cS[0]=cQ+-cP;cS[1]=cR+-cP;cS[2]=cQ+-cP;cS[3]=cR+cP;cS[4]=cQ+cP;cS[5]=cR+0;this.get_currentContext().set_lineJoin('miter');this.$e(cS,4,L.c.get('selected_halo_color').gv(cE)[cG])}}break}default:{break}}},$o:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{var cH=L.c.get('size').gv(cE)*0.916666666666667/2;{{var cI=cC;var cJ=cD;var cK=new Array(6);cK[0]=cI+-cH;cK[1]=cJ+-cH;cK[2]=cI+-cH;cK[3]=cJ+cH;cK[4]=cI+cH;cK[5]=cJ+0;this.get_currentContext().set_lineJoin('miter');this.$e(cK,4,L.c.get('halo_color').gv(cE)[cG])}}break}case'normalOn':{var cL=L.c.get('size').gv(cE)*0.916666666666667/2;{{var cM=cC;var cN=cD;var cO=new Array(6);cO[0]=cM+-cL;cO[1]=cN+-cL;cO[2]=cM+-cL;cO[3]=cN+cL;cO[4]=cM+cL;cO[5]=cN+0;this.$b(cO,L.getMarkColors(cE)[cG])}}break}case'selectedUnder':{var cP=L.c.get('size').gv(cE)*0.916666666666667/2;{{var cQ=cC;var cR=cD;var cS=new Array(6);cS[0]=cQ+-cP;cS[1]=cR+-cP;cS[2]=cQ+-cP;cS[3]=cR+cP;cS[4]=cQ+cP;cS[5]=cR+0;this.get_currentContext().set_lineJoin('miter');this.$e(cS,4,L.c.get('selected_halo_color').gv(cE)[cG])}}break}default:{break}}},$q:function(L,cC,cD,cE,cF,cG){switch(cF){case'normalUnder':{var cH=L.c.get('size').gv(cE)*1.09166666666667;var cI=cH/2;var cJ=cH*0.3877;{{var cK=cC;var cL=cD;var cM=new Array(20);cM[0]=cK+0;cM[1]=cL+(-cI+cH*0.0246);cM[2]=cK+(-cI+cH*0.3817);cM[3]=cL+(-cI+cJ);cM[4]=cK+-cI;cM[5]=cL+(-cI+cJ);cM[6]=cK+(-cI+cH*0.3088);cM[7]=cL+(-cI+cH*0.612);cM[8]=cK+(-cI+cH*0.1909);cM[9]=cL+(-cI+cH*0.9751);cM[10]=cK+0;cM[11]=cL+(-cI+cH*0.7507);cM[12]=cK+(-cI+cH*0.8085);cM[13]=cL+(-cI+cH*0.9751);cM[14]=cK+(-cI+cH*0.6905);cM[15]=cL+(-cI+cH*0.612);cM[16]=cK+cI;cM[17]=cL+(-cI+cJ);cM[18]=cK+(-cI+cH*0.6176);cM[19]=cL+(-cI+cJ);this.get_currentContext().set_lineJoin('miter');this.$e(cM,4,L.c.get('halo_color').gv(cE)[cG])}}break}case'normalOn':{var cN=L.c.get('size').gv(cE)*1.09166666666667;var cO=cN/2;var cP=cN*0.3877;{{var cQ=cC;var cR=cD;var cS=new Array(20);cS[0]=cQ+0;cS[1]=cR+(-cO+cN*0.0246);cS[2]=cQ+(-cO+cN*0.3817);cS[3]=cR+(-cO+cP);cS[4]=cQ+-cO;cS[5]=cR+(-cO+cP);cS[6]=cQ+(-cO+cN*0.3088);cS[7]=cR+(-cO+cN*0.612);cS[8]=cQ+(-cO+cN*0.1909);cS[9]=cR+(-cO+cN*0.9751);cS[10]=cQ+0;cS[11]=cR+(-cO+cN*0.7507);cS[12]=cQ+(-cO+cN*0.8085);cS[13]=cR+(-cO+cN*0.9751);cS[14]=cQ+(-cO+cN*0.6905);cS[15]=cR+(-cO+cN*0.612);cS[16]=cQ+cO;cS[17]=cR+(-cO+cP);cS[18]=cQ+(-cO+cN*0.6176);cS[19]=cR+(-cO+cP);this.$b(cS,L.getMarkColors(cE)[cG])}}break}case'selectedUnder':{var cT=L.c.get('size').gv(cE)*1.09166666666667;var cU=cT/2;var cV=cT*0.3877;{{var cW=cC;var cX=cD;var cY=new Array(20);cY[0]=cW+0;cY[1]=cX+(-cU+cT*0.0246);cY[2]=cW+(-cU+cT*0.3817);cY[3]=cX+(-cU+cV);cY[4]=cW+-cU;cY[5]=cX+(-cU+cV);cY[6]=cW+(-cU+cT*0.3088);cY[7]=cX+(-cU+cT*0.612);cY[8]=cW+(-cU+cT*0.1909);cY[9]=cX+(-cU+cT*0.9751);cY[10]=cW+0;cY[11]=cX+(-cU+cT*0.7507);cY[12]=cW+(-cU+cT*0.8085);cY[13]=cX+(-cU+cT*0.9751);cY[14]=cW+(-cU+cT*0.6905);cY[15]=cX+(-cU+cT*0.612);cY[16]=cW+cU;cY[17]=cX+(-cU+cV);cY[18]=cW+(-cU+cT*0.6176);cY[19]=cX+(-cU+cV);this.get_currentContext().set_lineJoin('miter');this.$e(cY,4,L.c.get('selected_halo_color').gv(cE)[cG])}}break}default:{break}}},drawPredictionBandLayer:function(L,cC,cD,cE,cF,cG){switch(cD){case'normalUnder':{var cH=cF.qrgbColor;if(L.isTupleVisible(cF.tupleIds[cC])){if((cC===0||!L.isTupleVisible(cF.tupleIds[cC-1]))&&(cC+1>=cF.upperEnd.length||!L.isTupleVisible(cF.tupleIds[cC+1]))){var cI=ss.Int32.div(cF.widths[cC],2)+2.5;if(cF.useYAxis){var cJ=L.thisDomainToPixelY(cF.upperEnd[cC]);var cK=L.thisDomainToPixelY(cF.lowerEnd[cC]);var cL=L.thisDomainToPixelX(cF.oppositeAxis[cC]);{var cM=[cL-cI,cJ,cL-cI,cK,cL+cI,cK,cL+cI,cJ];this.$b(cM,L.getOneColorAlpha(cH,cE,cG))}}else{var cN=L.thisDomainToPixelX(cF.upperEnd[cC]);var cO=L.thisDomainToPixelX(cF.lowerEnd[cC]);var cP=L.thisDomainToPixelY(cF.oppositeAxis[cC]);{var cQ=[cN,cP-cI,cO,cP-cI,cO,cP+cI,cN,cP+cI];this.$b(cQ,L.getOneColorAlpha(cH,cE,cG))}}}else if(cC+1<cF.tupleIds.length&&L.isTupleVisible(cF.tupleIds[cC+1])){var cR=L.lineInterpolation;if(cF.useYAxis){var cS=L.thisDomainToPixelY(cF.upperEnd[cC]);var cT=L.thisDomainToPixelY(cF.lowerEnd[cC]);var cU=L.thisDomainToPixelX(cF.oppositeAxis[cC]);var cV=L.thisDomainToPixelX(cF.oppositeAxis[cC+1]);if(cR==='lim-step'||cR==='lim-jump'){{var cW=[cU,cT,cV,cT,cV,cS,cU,cS];this.$b(cW,L.getOneColorAlpha(cH,cE,cG))}}else{var cX=L.thisDomainToPixelY(cF.upperEnd[cC+1]);var cY=L.thisDomainToPixelY(cF.lowerEnd[cC+1]);{var cZ=[cU,cT,cV,cY,cV,cX,cU,cS];this.$b(cZ,L.getOneColorAlpha(cH,cE,cG))}}}else{var da=L.thisDomainToPixelX(cF.upperEnd[cC]);var db=L.thisDomainToPixelX(cF.lowerEnd[cC]);var dc=L.thisDomainToPixelX(cF.upperEnd[cC+1]);var dd=L.thisDomainToPixelX(cF.lowerEnd[cC+1]);var de=L.thisDomainToPixelY(cF.oppositeAxis[cC]);var df=L.thisDomainToPixelY(cF.oppositeAxis[cC+1]);if(cR==='lim-step'||cR==='lim-jump'){{var dg=[db,de,db,df,da,df,da,de];this.$b(dg,L.getOneColorAlpha(cH,cE,cG))}}else{{var dh=[db,de,dd,df,dc,df,da,de];this.$b(dh,L.getOneColorAlpha(cH,cE,cG))}}}}}break}}},renderPredictionBand:function(L,cC,cD,cE){var cF='colorOverrideNone';var cG=255;var cH=cD;var cI=0;var cJ=1;var cK=2;var cL=cI;for(var cM=0;cM<cH.lineTupleIds.length;cM++){var cN=cH.lineTupleIds[cM];if(L.isTupleSelected(cN)){cL=cK;break}if(cL!==cJ&&L.isTupleHighlighted(cN)){cL=cJ}}if(cL!==cK){for(var cO=0;cO<cH.tupleIds.length;cO++){var cP=cH.tupleIds[cO];if(L.isTupleSelected(cP)){cL=cK;break}if(cL!==cJ&&L.isTupleHighlighted(cP)){cL=cJ}}}switch(cC){case'normalUnderPass':{if(cL===cI&&cE==='underMark'){if(L.get_hasSelection()||L.get_hasBrushing()){cF='colorOverrideFog'}else{cF='colorOverrideNone'}var cQ=cH.tupleIds.length;for(var cR=0;cR<cQ;cR++){this.drawPredictionBandLayer(L,cR,'normalUnder',cF,cH,cG)}}break}case'highlightedUnderPass':{if(cL===cJ&&cE==='underMark'){var cS=cH.tupleIds.length;for(var cT=0;cT<cS;cT++){if(L.isTupleHighlighted(cH.tupleIds[cT])&&((cT===0||!L.isTupleVisible(cH.tupleIds[cT-1]))&&(cT+1>=cH.upperEnd.length||!L.isTupleVisible(cH.tupleIds[cT+1]))||cT+1<cH.tupleIds.length&&L.isTupleVisible(cH.tupleIds[cT+1])&&L.isTupleHighlighted(cH.tupleIds[cT+1]))){cF='colorOverrideNone'}else{cF='colorOverrideFog'}this.drawPredictionBandLayer(L,cT,'normalUnder',cF,cH,cG)}}break}case'selectedUnderPass':{if(cL===cK&&cE==='underMark'){cF='colorOverrideReplaceAlpha';cG=76.5;var cU=cH.tupleIds.length;for(var cV=0;cV<cU;cV++){this.drawPredictionBandLayer(L,cV,'normalUnder',cF,cH,cG)}}break}}},drawPredictionWhiskerLayer:function(L,cC,cD,cE,cF,cG){switch(cD){case'border':{if(L.isTupleVisible(cF.tupleIds[cC])){var cH=ss.Int32.div(cF.widths[cC]-1,2);if(cF.useYAxis){var cI=ss.Int32.trunc(L.thisDomainToPixelX(cF.oppositeAxis[cC]));var cJ=ss.Int32.trunc(L.thisDomainToPixelY(cF.upperEnd[cC]));var cK=ss.Int32.trunc(L.thisDomainToPixelY(cF.lowerEnd[cC]));var cL=cJ-0.5;var cM=cK+1.5;var cN=cI-0.5-cH;var cO=cI+1.5+cH;var cP=cJ+1.5;var cQ=cK-0.5;var cR=cI-0.5;var cS=cI+1.5;{var cT=[cN,cL,cO,cL,cO,cP,cS,cP,cS,cQ,cO,cQ,cO,cM,cN,cM,cN,cQ,cR,cQ,cR,cP,cN,cP];this.renderLineLoop(cT,1,L.getOneColorAlpha(cF.qrgbColor,cE,cG))}}else{var cU=ss.Int32.trunc(L.thisDomainToPixelY(cF.oppositeAxis[cC]));var cV=ss.Int32.trunc(L.thisDomainToPixelX(cF.lowerEnd[cC]));var cW=ss.Int32.trunc(L.thisDomainToPixelX(cF.upperEnd[cC]));var cX=cU-0.5-cH;var cY=cU+1.5+cH;var cZ=cV-0.5;var da=cW+1.5;var db=cU-0.5;var dc=cU+1.5;var dd=cV+1.5;var de=cW-0.5;{var df=[cZ,cX,dd,cX,dd,db,de,db,de,cX,da,cX,da,cY,de,cY,de,dc,dd,dc,dd,cY,cZ,cY];this.renderLineLoop(df,1,L.getOneColorAlpha(cF.qrgbColor,cE,cG))}}}break}case'normalUnder':{if(L.isTupleVisible(cF.tupleIds[cC])){var dg=ss.Int32.div(cF.widths[cC]-1,2);var dh=cF.qrgbColors[cC];if(cF.useYAxis){var di=ss.Int32.trunc(L.thisDomainToPixelX(cF.oppositeAxis[cC]));var dj=ss.Int32.trunc(L.thisDomainToPixelY(cF.upperEnd[cC]));var dk=ss.Int32.trunc(L.thisDomainToPixelY(cF.lowerEnd[cC]));{var dl=[di-dg,dj+0.5,di+dg+1,dj+0.5];this.$c(dl,1,L.getOneColorAlpha(dh,cE,cG),false)}{var dm=[di-dg,dk+0.5,di+dg+1,dk+0.5];this.$c(dm,1,L.getOneColorAlpha(dh,cE,cG),false)}{var dn=[di+0.5,dj+1,di+0.5,dk];this.$c(dn,1,L.getOneColorAlpha(dh,cE,cG),false)}}else{var dp=ss.Int32.trunc(L.thisDomainToPixelY(cF.oppositeAxis[cC]));var dq=ss.Int32.trunc(L.thisDomainToPixelX(cF.lowerEnd[cC]));var dr=ss.Int32.trunc(L.thisDomainToPixelX(cF.upperEnd[cC]));{var ds=[dq+0.5,dp-dg,dq+0.5,dp+dg+1];this.$c(ds,1,L.getOneColorAlpha(dh,cE,cG),false)}{var dt=[dr+0.5,dp-dg,dr+0.5,dp+dg+1];this.$c(dt,1,L.getOneColorAlpha(dh,cE,cG),false)}{var du=[dq+1,dp+0.5,dr,dp+0.5];this.$c(du,1,L.getOneColorAlpha(dh,cE,cG),false)}}}break}}},renderPredictionWhisker:function(L,cC,cD,cE){var cF='colorOverrideNone';var cG=255;var cH=cD;switch(cC){case'normalUnderPass':{if(!cH.renderOnTop&&cE==='underMark'){if(L.get_hasSelection()||L.get_hasBrushing()){cF='colorOverrideFog'}else{cF='colorOverrideNone'}var cI=cH.tupleIds.length;for(var cJ=0;cJ<cI;cJ++){if(!L.isTupleHighlighted(cH.tupleIds[cJ])&&!L.isTupleSelected(cH.tupleIds[cJ])){this.drawPredictionWhiskerLayer(L,cJ,'border',cF,cH,cG);this.drawPredictionWhiskerLayer(L,cJ,'normalUnder',cF,cH,cG)}}}break}case'normalOnPass':{if(cH.renderOnTop&&cE==='underLabel'){if(L.get_hasSelection()||L.get_hasBrushing()){cF='colorOverrideFog'}else{cF='colorOverrideNone'}var cK=cH.tupleIds.length;for(var cL=0;cL<cK;cL++){if(!L.isTupleHighlighted(cH.tupleIds[cL])&&!L.isTupleSelected(cH.tupleIds[cL])){this.drawPredictionWhiskerLayer(L,cL,'border',cF,cH,cG);this.drawPredictionWhiskerLayer(L,cL,'normalUnder',cF,cH,cG)}}}break}case'selectedUnderPass':{if(!cH.renderOnTop&&cE==='underMark'){var cM=cH.tupleIds.length;for(var cN=0;cN<cM;cN++){if(L.isTupleSelected(cH.tupleIds[cN])){cF='colorOverrideReplaceAlpha';cG=63.75;this.drawPredictionWhiskerLayer(L,cN,'border',cF,cH,cG);cF='colorOverrideReplaceAlpha';cG=cH.maxAlpha/255*255;this.drawPredictionWhiskerLayer(L,cN,'normalUnder',cF,cH,cG)}}}break}case'selectedOnPass':{if(cH.renderOnTop&&cE==='underLabel'){var cO=cH.tupleIds.length;for(var cP=0;cP<cO;cP++){if(L.isTupleSelected(cH.tupleIds[cP])){cF='colorOverrideReplaceAlpha';cG=63.75;this.drawPredictionWhiskerLayer(L,cP,'border',cF,cH,cG);cF='colorOverrideReplaceAlpha';cG=cH.maxAlpha/255*255;this.drawPredictionWhiskerLayer(L,cP,'normalUnder',cF,cH,cG)}}}break}case'highlightedUnderPass':{if(!cH.renderOnTop&&cE==='underMark'){cF='colorOverrideNone';var cQ=cH.tupleIds.length;for(var cR=0;cR<cQ;cR++){if(L.isTupleHighlighted(cH.tupleIds[cR])){this.drawPredictionWhiskerLayer(L,cR,'border',cF,cH,cG);this.drawPredictionWhiskerLayer(L,cR,'normalUnder',cF,cH,cG)}}}break}case'highlightedOnPass':{if(cH.renderOnTop&&cE==='underLabel'){cF='colorOverrideNone';var cS=cH.tupleIds.length;for(var cT=0;cT<cS;cT++){if(L.isTupleHighlighted(cH.tupleIds[cT])){this.drawPredictionWhiskerLayer(L,cT,'border',cF,cH,cG);this.drawPredictionWhiskerLayer(L,cT,'normalUnder',cF,cH,cG)}}}break}}},$9:function(L,cC,cD,cE,cF){var cG=1;var cH=2*cG;return!tab.RectXYUtil.completelyContains$1(L,ss.Int32.trunc(cC)-cG,ss.Int32.trunc(cD)-cG,ss.Int32.trunc(cE)+cH,ss.Int32.trunc(cF)+cH)},clipRect:function(L,cC,cD,cE,cF){if(L===0){return}this.get_currentContext().setClip(bC.$4(L,cC,cD,cE,cF))},$c:function(L,cC,cD,cE){var cF=this.get_currentContext();cF.set_linePattern('solid');cF.set_lineWidth(cC);cF.set_strokeStyle(cD);tab.CanvasRenderer.strokePath(cF,L,false,cE)},renderLineLoop:function(L,cC,cD){var cE=this.get_currentContext();cE.set_linePattern('solid');cE.set_lineWidth(cC);cE.set_strokeStyle(cD);tab.CanvasRenderer.strokePath(cE,L,true,false)},$d:function(L,cC,cD,cE,cF,cG,cH,cI){var cJ=this.get_currentContext();cJ.set_linePattern('solid');cJ.set_lineWidth(cI);cJ.set_strokeStyle(cH);var cK=Math.atan2(cE-cD,cC-L);var cL=Math.cos(cK);var cM=Math.sin(cK);cF/=2;cG/=2;var cN=cF*cM;var cO=cG*cM;var cP=cF*cL;var cQ=cG*cL;cJ.beginPath();cJ.moveTo(L+cN,cD-cP);cJ.lineTo(cC+cO,cE-cQ);cJ.lineTo(cC-cO,cE+cQ);cJ.lineTo(L-cN,cD+cP);cJ.closePath();cJ.stroke()},$a:function(L,cC,cD,cE,cF,cG,cH,cI){var cJ;var cK=this.get_currentContext();if(ss.referenceEquals(cH,cI)){cJ=cH}else{var cL=cK.createLinearGradient(L,cD,cC,cE);cL.addColorStop(0,cH);cL.addColorStop(1,cI);cJ=cL}if(cF===cG){cK.set_lineWidth(cF);cK.set_linePattern('solid');cK.set_strokeStyle(cJ);cK.beginPath();cK.moveTo(L,cD);cK.lineTo(cC,cE);cK.closePath();cK.stroke()}else{var cM=Math.atan2(cE-cD,cC-L);var cN=Math.cos(cM);var cO=Math.sin(cM);cF/=2;cG/=2;var cP=cF*cO;var cQ=cG*cO;var cR=cF*cN;var cS=cG*cN;cK.beginPath();cK.moveTo(L+cP,cD-cR);cK.lineTo(cC+cQ,cE-cS);cK.lineTo(cC-cQ,cE+cS);cK.lineTo(L-cP,cD+cR);cK.closePath();cK.set_shapeFillStyle(cJ);cK.fill()}},$e:function(L,cC,cD){var cE=this.get_currentContext();cE.set_lineWidth(cC);cE.set_strokeStyle(cD);tab.CanvasRenderer.strokePath(cE,L,true,true)},$b:function(L,cC){var cD=this.get_currentContext();cD.set_shapeFillStyle(cC);tab.CanvasRenderer.fillPath(cD,L,true)},$A:function(L){this.get_currentContext().set_shapeFillStyle(L.$6(0,-1,'colorOverrideNone'));var cC=this.createStyleSettersAndSetDominantStyle(L.get_textStyleColumns());return cC}},tab.CanvasRenderer);ss.initClass(R,a,{get_currentContext:function(){if(ss.isValue(this.$C)){return this.$C}return tab.CanvasRenderer.prototype.get_currentContext.call(this)},$B:function(L){var cC={};cC.dataValues=new Array(L);return cC},containsShape:function(L){return ss.isValue(this.$E[L.toString()])},renderSwatch:function(L,cC,cD){this.$C=L;var cE=(cD?'colorOverrideFog':'colorOverrideOpaque');this.drawShapeMarkLayer(this.$D,this.$E[cC.toString()],'normalOn',cE)}},bC);ss.initEnum(S,a,{noHit:0,areaHit:1,nearHit:2,exactHit:3});ss.initClass(T,a,{get_objectId:function(){return this.$4},get_worldOffset:function(){return this.$9},get_nodeType:function(){return this.$3},get_boundingBox:function(){return this.$0},get_labelBox:function(){return this.$2},get_children:function(){return this.$1},get_parent:function(){return this.$8},set_parent:function(L){this.$8=L},get_paneKey:function(){return this.$6},set_paneKey:function(L){this.$6=L},get_paneIndex:function(){return this.$5},set_paneIndex:function(L){this.$5=L},get_paneOrderIndex:function(){return this.$7},set_paneOrderIndex:function(L){this.$7=L},addNode:function(L){this.$1.push(L);L.set_parent(this)},addNodes:function(L){ss.arrayAddRange(this.$1,L);for(var cC=0;cC<L.length;cC++){var cD=L[cC];cD.set_parent(this)}},resetChildren:function(){ss.clear(this.$1)}});ss.initClass(U,a,{$0:function(L,cC,cD){var cE=[];if(L.length===0){return cE}var cF=new Array;for(var cG=0;cG<L.length;cG++){var cH=L[cG];var cI=this.$1[cH];cF.push(cI.hitTest(cC,cD))}do cE=[Z.tieBreakHits(cF.pop(),cE)];while(cF.length>0);return cE},getHitTestLink:function(L){return this.$1[L]},onTapHitTest:function(L,cC){return this.$0(this.$3,L,cC)},onHoverHitTest:function(L,cC){return this.$0(this.$2,L,cC)},clearCache:function(){var L=ss.getEnumerator(Object.keys(this.$1));try{while(L.moveNext()){var cC=L.current();this.$1[cC].clearCache()}}finally{L.dispose()}}});ss.initClass(V,a,{get_context2D:function(){return this.$2.getContext('2d')},debugDrawBoundingBoxesHierarchy:function(L){this.clear();this.$0(L)},debugDrawBoundingBoxesHierarchies:function(L){this.clear();for(var cC=0;cC<L.length;cC++){var cD=L[cC];this.$0(cD)}},clear:function(){this.get_context2D().clearRect(0,0,this.$2.width,this.$2.height)},done:function(){this.$4.style.position=this.$3;this.$1.removeChild(this.$2)},$0:function(L){var cC=new Array;cC.push(L);while(cC.length>0){var cD=cC.shift();if(cD.get_nodeType()===2){var cE=cD.get_boundingBox();this.get_context2D().save();if(V.$0%2===0){this.get_context2D().fillStyle='rgba(120, 255, 20, 0.1)'}else{this.get_context2D().fillStyle='rgba(20, 255, 120, 0.1)'}this.get_context2D().fillRect(cE.x,cE.y,cE.w,cE.h);this.get_context2D().restore();++V.$0}if(cD.get_nodeType()===3||cD.get_nodeType()===5){var cF=cD.get_boundingBox();this.get_context2D().save();this.get_context2D().fillStyle='rgba(255, 0, 0, 0.2)';this.get_context2D().fillRect(cF.x,cF.y,cF.w,cF.h);this.get_context2D().restore()}if(cD.get_nodeType()===4){var cG=cD.get_boundingBox();this.get_context2D().save();this.get_context2D().fillStyle='rgba(0, 0, 255, 0.2)';this.get_context2D().fillRect(cG.x,cG.y,cG.w,cG.h);this.get_context2D().restore()}var cH=cD.get_children();cH.forEach(function(cI){cC.push(cI)})}}});ss.initClass(W,a,{hitTestPanes:function(L){var cC=[];var cD=new Array;cD.push(this.$5);while(cD.length>0){var cE=cD.pop();var cF=tab.RectXYUtil.intersectsWith(cE.get_boundingBox(),L);if(cF){if(cE.get_nodeType()===1){cC.push(cE.get_paneKey())}else{var cG=cE.get_children();cG.forEach(function(cH){cD.push(cH)})}}}return cC},hitTest:function(L,cC,cD){if(tab.RectXYUtil.isEmpty(L)){return[]}var cE=this.hitTestBoundingBoxes(L,cC,cD);return(cC?this.hitTestSingle(L,cD,cE):this.$1(L,cD,cE))},hitTestSingle:function(L,cC,cD){var cE=L.x+ss.Int32.div(L.w,2);var cF=L.y+ss.Int32.div(L.h,2);var cG={};var cH=[];for(var cI=cD.length-1;cI>=0;cI--){var cJ=cD[cI];if(cJ.get_objectId()<0){continue}var cK=T.findPaneNode(cJ);if(ss.isNullOrUndefined(cK)){continue}if(ss.isNullOrUndefined(cG[cK.get_paneIndex()])){cG[cK.get_paneIndex()]=[];cH.push(cK)}cG[cK.get_paneIndex()].push(cJ)}var cL=[];var cM=[];var cN={};for(var cO=0;cO<cH.length;cO++){var cP=cH[cO];var cQ=cC.getPaneDrawInfoFromKey(cP.get_paneKey());var cR=tab.RectXYUtil.offsetRect(L,{x:-cQ.paneRect.x,y:-cQ.paneRect.y});var cS=cG[cP.get_paneIndex()];for(var cT=0;cT<cS.length;cT++){var cU=cS[cT];var cV=cQ.getMarkState(cU.get_objectId());var cW=cU.get_worldOffset();var cX=cQ.c.get('tuple_id').gv(cU.get_objectId());var cY=false;if(ss.isValue(cU.get_labelBox())){cY=tab.RectXYUtil.intersectsWithMoreThanSharedEdge(cU.get_labelBox(),L)}if(cY){cL.push(new Z.$ctor1(cX,8,3));cN[cX]={item1:cP.get_paneOrderIndex(),item2:cV}}var cZ=W.$0(cQ,cR,cU.get_objectId(),cW,cQ.markType);if(cZ){cL.push(new Z.$ctor1(cX,7,3));cN[cX]={item1:cP.get_paneOrderIndex(),item2:cV}}else if(cL.length===0){var da=W.$1(cQ,cR,cU.get_objectId(),cW,cQ.markType);if(da){var db;switch(cQ.markType){case'line':{db=bC.lineMarkGetDistanceToMark(cQ,cE,cF,cU.get_objectId());break}case'bar':case'square':{db=bC.barMarkGetDistanceToMark(cQ,cE,cF,cU.get_objectId());break}case'shape':{db=bC.shapeMarkGetDistanceToMark(cQ,cE,cF,cU.get_objectId());break}case'text':{db=bC.textMarkGetDistanceToMark(cQ,cE,cF,cU.get_objectId());break}case'area':{db=bC.areaMarkGetDistanceToMark(cQ,cE,cF,cU.get_objectId());break}default:{db=O.getSquaredDistanceToCenter(cU.get_boundingBox(),{x:cE,y:cF});break}}var dc=new Z.$ctor1(cX,7,2);cM.push({item1:dc,item2:db});cN[cX]={item1:cP.get_paneOrderIndex(),item2:cV}}else{}}}}if(cL.length>0){var dd=this.$4(cL,cN);if(dd.get_hitType()===3){return[dd]}}if(cM.length>0){var de=this.$3(cM,cN);if(de.get_hitType()===2){return[de]}}return[]},$1:function(L,cC,cD){var cE=[];for(var cF=cD.length-1;cF>=0;cF--){var cG=cD[cF];var cH=cG.get_objectId();if(cH<0){continue}var cI=T.findPaneNode(cG);if(ss.isNullOrUndefined(cI)){continue}var cJ=cC.getPaneDrawInfoFromKey(cI.get_paneKey());var cK=W.getTransformInfo(cJ,cG);var cL=W.rectangleAreaHit(cJ,cG.get_boundingBox(),L,cH,cK,cJ.markType);if(cL){cE.push(new Z.$ctor1(cJ.c.get('tuple_id').gv(cH),7,1))}}return cE},hitTestBoundingBoxes:function(L,cC,cD){if(tab.RectXYUtil.isEmpty(L)){return[]}var cE=[];var cF=new Array;var cG={};cF.push(this.$5);while(cF.length>0){var cH=cF.pop();var cI=L;if(cC&&ss.isValue(cD)&&cH.get_nodeType()===3){var cJ=T.findPaneNode(cH);if(ss.isValue(cJ)){var cK=cJ.get_paneKey();if(ss.keyExists(cG,cK)){cI=cG[cK]}else{var cL=cD.getPaneDrawInfoFromKey(cJ.get_paneKey());if(ss.isValue(cL)){var cM;switch(cL.markType){case'multipolygon':{cM=bC.multipolygonMarkGetHitTestExpansion(cL,cH.get_objectId());break}case'bar':case'square':{cM=bC.barMarkGetHitTestExpansion(cL,cH.get_objectId());break}case'shape':{cM=bC.shapeMarkGetHitTestExpansion(cL,cH.get_objectId());break}case'text':{cM=bC.textMarkGetHitTestExpansion(cL,cH.get_objectId());break}case'area':{cM=bC.areaMarkGetHitTestExpansion(cL,cH.get_objectId());break}default:{cM=null;break}}if(ss.isValue(cM)&&!tab.SizeUtil.isEmpty(cM)){cI=tab.RectXYUtil.outsetRectSizeF(cI,cM)}}cG[cK]=cI}}}var cN=tab.RectXYUtil.intersectsWithMoreThanSharedEdge(cH.get_boundingBox(),cI);if(!cN&&cC&&ss.isValue(cH.get_labelBox())){cN=tab.RectXYUtil.intersectsWithMoreThanSharedEdge(cH.get_labelBox(),L)}if(cN){if(cH.get_nodeType()===3){cE.push(cH)}else{var cO=cH.get_children();cO.forEach(function(cP){cF.push(cP)})}}}return cE},$4:function(L,cC){if(L.length===0){return Z.createEmptyHitTestResult()}var cD=Z.createEmptyHitTestResult();L.sort(function(cH,cI){return((cH.get_id()>cI.get_id())?-1:1)});for(var cE=0;cE<L.length;cE++){var cF=L[cE];if(!ss.keyExists(cC,cF.get_id())){continue}if(cC[cF.get_id()].item2==='markStateInvisible'){continue}if(cD.get_hitType()===0){cD=cF}else{var cG=this.$0(cF.get_id(),cD.get_id(),cC);if(cG>0){cD=cF}else if(cG===0){if(cF.get_hitObjectType()>cD.get_hitObjectType()){cD=cF}}}}return cD},$3:function(L,cC){if(L.length===0){return Z.createEmptyHitTestResult()}var cD=Z.createEmptyHitTestResult();var cE=null;L.sort(function(cJ,cK){return((cJ.item1.get_id()>cK.item1.get_id())?-1:1)});for(var cF=0;cF<L.length;cF++){var cG=L[cF];var cH=cG.item1;var cI=cG.item2;if(!ss.keyExists(cC,cH.get_id())){continue}if(cC[cH.get_id()].item2==='markStateInvisible'){continue}if(cD.get_hitType()===0){cD=cH;cE=cI}else if(ss.Nullable$1.lt(cI,cE)){cD=cH;cE=cI}else if(cI===cE&&this.$0(cH.get_id(),cD.get_id(),cC)>0){cD=cH}}return cD},$0:function(L,cC,cD){var cE=cD[L];var cF=cD[cC];var cG=this.$2(cE.item2);var cH=this.$2(cF.item2);if(cG>cH){return 1}if(cG===cH){var cI=cE.item1;var cJ=cF.item1;if(cI>cJ){return 1}if(cI===cJ){return 0}}return-1},$2:function(L){switch(L){case'markStateInvisible':{return 0}case'markStateNormal':{return 1}case'markStateHighlighted':{return 2}case'markStateSelected':{return 3}default:{return-1}}}});ss.initEnum(Y,a,{annotation:0,refLine:1,trendLine:2,marks:3});ss.initClass(Z,a,{get_id:function(){return this.$2},get_hitObjectType:function(){return this.$0},get_hitType:function(){return this.$1},get_shouldRenderOverlay:function(){return this.$3},get_overlayTargetType:function(){switch(this.$0){case 4:{return'semantic-ref-line'}case 5:case 6:{return'ref-line'}case 3:{return'trend-line'}case 7:case 8:{return'mark'}default:{return'unspecified'}}},get_tooltipTargetType:function(){switch(this.$0){case 4:{return'refline'}case 5:case 6:case 3:{return'visualparts'}case 7:case 8:{return'mark'}default:{return'unspecified'}}},doNotRenderOverlay:function(){this.$3=false}},null,[tab.IHitTestResult]);Z.$ctor1.prototype=Z.prototype;ss.initClass(ba,a,{});ss.initClass(bc,a,{get_imageNode:function(){return this.$2},set_imageNode:function(L){this.$2=L},get_index:function(){return this.$1},get_src:function(){return this.$3},get_bounds:function(){return this.$0},get_version:function(){return this.$4}});ss.initClass(bd,a,{get_image:function(){return this.$0}},ss.EventArgs);ss.initInterface(be,a,{get_enabled:null,zoomOnPoint:null,animateAnchorZoom:null,zoomRect:null,moveToBounds:null,panTo:null,updateLocalCenter:null,updateLocalMapDataForZoomAround:null,touchMove:null,touchEnd:null,pinchScale:null,splatOverlayToMapForTransition:null,createMap:null,destroyMap:null,resize:null,setScrollX:null,setScrollY:null,removeMarkOverlay:null},[ss.IDisposable]);ss.initClass(bg,a,{});ss.initInterface(bi,a,{createNonMarksRenderer:null,renderGridLines:null,createPaneDrawInfo:null});ss.initInterface(bk,a,{get_zoomToolbarContainerDiv:null,get_isMapSearchEnabled:null,get_shouldEnableZoomHomeToolbar:null,get_zoomToolbarOffset:null,get_zoomToolbarOperations:null,get_shouldShowTools:null,allowPanZoomActions:null,isVizLargerThanScreen:null});ss.initClass(bl,a,{get_enabled:function(){return ss.isValue(this.$h)&&this.$k.get_useFastMaps()},$e:function(){if(!tab.FeatureFlags.isEnabled('RuntimeComputeMapCenterInVTL')&&this.$k.get_allowLocalPanAndZoom()&&ss.isValue(this.$j)){return this.$j.$0()}else{return new L.LatLng(this.$k.get_centerLatitude(),this.$k.get_centerLongitude())}},$f:function(){if(!tab.FeatureFlags.isEnabled('RuntimeComputeMapCenterInVTL')&&this.$k.get_allowLocalPanAndZoom()&&ss.isValue(this.$j)){return this.$j.$2()}else{return this.$k.get_zoom()}},zoomOnPoint:function(cC,cD){var cE=$.Deferred();if(!this.get_enabled()){return cE.resolve(false)}this.$8(ss.mkdel(this,function(cF){var cG=cB.incrementZoom(this.$f(),cD);var cH;if(ss.isNullOrUndefined(cC)){cH=cF.getCenter()}else{cH=cF.containerPointToLatLng(new L.Point(cC.x,cC.y))}_.defer(ss.mkdel(this,function(){this.$a(cH,cG,true).done(function(){cE.resolve(true)})}))}));return cE},animateAnchorZoom:function(cC,cD){var cE=$.Deferred();if(!this.get_enabled()){return cE.resolve(false)}this.$8(ss.mkdel(this,function(cF){var cG=cF.containerPointToLatLng(new L.Point(cD.x,cD.y));_.defer(ss.mkdel(this,function(){this.$b(cG,cC).done(function(){cE.resolve(true)})}))}));return cE},zoomRect:function(cC){var cD=$.Deferred();if(!this.get_enabled()){return cD.resolve(false)}this.$8(ss.mkdel(this,function(cE){var cF=cE.containerPointToLatLng(new L.Point(cC.x,cC.y+cC.h));var cG=cE.containerPointToLatLng(new L.Point(cC.x+cC.w,cC.y));var cH=new L.LatLngBounds(cF,cG);var cI=new L.Point(cC.x+ss.Int32.div(cC.w,2),cC.y+ss.Int32.div(cC.h,2));var cJ=cE.containerPointToLatLng(cI);var cK=this.$6(cE,cH);var cL=this.$c(cE,cK);this.$a(cJ,cK,cL).done(function(){cD.resolve(cL)})}));return cD},moveToBounds:function(cC){var cD=$.Deferred();if(!this.get_enabled()){return cD.resolve(false)}this.$8(ss.mkdel(this,function(cE){var cF=new L.LatLng(cC.minLatitude,cC.minLongitude);var cG=new L.LatLng(cC.maxLatitude,cC.maxLongitude);var cH=new L.LatLngBounds(cF,cG);var cI=new L.LatLng((cC.maxLatitude+cC.minLatitude)*0.5,(cC.maxLongitude+cC.minLongitude)*0.5);var cJ=this.$6(cE,cH);var cK=this.$c(cE,cJ);this.$a(cI,cJ,cK).done(ss.mkdel(this,function(){if(!cK){this.removeMarkOverlay()}cD.resolve(cK)}))}));return cD},$6:function(L,cC){var cD=L.getBoundsZoom(cC,true);return cB.resolveDesiredZoom(this.$k.get_rasterMapSourceModel(),cD)},$c:function(L,cC){return Math.abs(L.getZoom()-cC)<=2},panTo:function(cC,cD){var cE=$.Deferred();if(!this.get_enabled()){return cE.resolve(false)}this.$8(ss.mkdel(this,function(cF){var cG=cF.latLngToContainerPoint(this.$e());var cH=new L.Point(cG.x-cC,cG.y-cD);var cI=cF.containerPointToLatLng(cH);var cJ=new Object;cJ.animate=false;var cK=cJ;cF.panTo(cI,cK);cE.resolve(true)}));return cE},updateLocalCenter:function(cC,cD){this.$8(ss.mkdel(this,function(cE){var cF=cE.latLngToContainerPoint(this.$e());var cG=new L.Point(cF.x-cC,cF.y-cD);var cH=cE.containerPointToLatLng(cG);var cI=this.$f();this.$j=new o(cH,cI)}))},updateLocalMapDataForZoomAround:function(cC,cD){if(tab.FeatureFlags.isEnabled('RuntimeComputeMapCenterInVTL')){return}this.$8(ss.mkdel(this,function(cE){var cF=Math.pow(2,cD-this.$f());var cG=cE.getSize().divideBy(2);var cH=cE.containerPointToLatLng(new L.Point(cC.x,cC.y));var cI=(new L.Point(cH.lat,cH.lng)).subtract(cG).multiplyBy(1-1/cF);var cJ=cE.containerPointToLatLng(cG.add(cI));this.$j=new o(cJ,cD)}))},touchMove:function(cC,cD,cE){if(isNaN(cE)||isNaN(cD)||isNaN(cC)){return}if(tab.DoubleUtil.isApproximatelyEqual(cE,1)&&!this.$o){this.panTo(cC,cD);return}this.$h.done(ss.mkdel(this,function(cF){if(!this.$o){var cG=cF.getPanes();$(cG.mapPane).addClass('leaflet-touching');$(cG.overlayPane).addClass('leaflet-touching');this.$i=new L.Point(cC,cD)}this.$o=true;tab.WindowHelper.cancelAnimationFrame(this.$q);this.$q=tab.WindowHelper.requestAnimationFrame(ss.mkdel(this,function(){var L=cB.combineTileZoomAndStretch(this.$f(),cE);this.$1(cF,L,cE,cC,cD)}))}))},pinchScale:function(L,cC,cD){},touchEnd:function(L,cC,cD){this.$8(ss.mkdel(this,function(cE){this.$9(cE);if(this.$o){var cF=cB.combineTileZoomAndStretch(this.$f(),cD);var cG=cB.resolveDesiredZoom(this.$k.get_rasterMapSourceModel(),cF);cD=Math.pow(2,cG-this.$f());this.$1(cE,cG,cD,L,cC)}this.$o=false}))},splatOverlayToMapForTransition:function(cC){if(ss.isNullOrUndefined(this.$h)){return}var cD=tabBootstrap.MetricsController.createContext('Leaflet Marks Splat',32,null);this.$h.done(ss.mkdel(this,function(cE){if(ss.isValue(this.$n)){return}var cF=tab.RenderUtil.calculatePixelRatio(true);if(!tab.CanvasUtil.canvasDensified(cC)){cF=1}var cG=Math.floor(2*cF);var cH={x:cG,y:cG,w:cC.width-2*cG,h:cC.height-2*cG};var cI=Math.floor(cE.latLngToContainerPoint(bl.$1(bl.$6)).y*cF);var cJ=Math.floor(cE.latLngToContainerPoint(bl.$1(bl.$8)).y*cF);if(cJ<cC.height){cH.h=cJ}if(cI>0){cH.y+=cI;cH.h-=cI}var cK=new Object;cK.pixelRatio=cF;var cL=cK;this.$n=new L.CanvasOverlay(cE.getBounds(),cL);cE.addLayer(this.$n);var cM=this.$n.getCanvas();var cN=tab.CanvasRenderer.getRenderContext(cM,'transparent');var cO={x:cG,y:cG,w:cH.w,h:cH.h};cN.drawImage5(cC,cH.x,cH.y,cH.w,cH.h,cO.x,cO.y,cO.w,cO.h);cC.width=cC.width;cD.dispose()}))},createMap:function(L,cC){this.$g=(new Date).getTime();bv.logMapCreateStart('Leaflet');tab.ModuleManager.loadCss(tsConfig.external_static_asset_prefix+'/css/leaflet.css');this.$k=cC;this.$j=null;this.$p=new d;this.$p.domRoot.appendTo(L);var cD=$.Deferred();var cE=$.Deferred();this.$h=cE;tab.ModuleManager.load$1('leaflet',[]).done(ss.mkdel(this,function(cF){this.$2(cE,cD)}));return cD},$2:function(cC,cD){if(!this.get_enabled()){cD.reject();return}var cE=this.$3();var cF=new L.Map(this.$p.$4(),cE);cF.once('load',function(L){bv.logMapCreateDone('Leaflet');cD.resolve()});cF.setView(this.$e(),this.$f());var cG=this.$4();this.$m=new L.TileLayer(this.$k.get_tileUrl(),cG);this.$m.once('load',ss.mkdel(this,function(L){var cJ=(new Date).getTime()-this.$g;bv.logInitialRenderComplete('Leaflet',cJ)}));this.$d();cF.addLayer(this.$m);this.$k.add_newMapServerInfo(ss.mkdel(this,this.$7));if(this.$k.get_hasWashout()&&this.$k.get_hasValidTileLayer()){var cH=this.$k.get_washoutColor();var cI=bl.$0(cH.toRgb());cG.opacity=cH.get_a();cF.addLayer(new L.TileLayer(cI,cG))}this.$p.$3(this.$k);this.$0(this.$f(),false);cC.resolve(cF)},$d:function(){var L=(this.$k.get_hasValidTileLayer()?1:0);this.$m.setOpacity(L)},destroyMap:function(){var L=$.Deferred();if(ss.isValue(this.$p)){this.$p.dispose();this.$p=null}var cC=ss.mkdel(this,function(){if(ss.isValue(this.$k)){this.$k.remove_newMapServerInfo(ss.mkdel(this,this.$7));this.$k=null}this.$l=null;L.resolve()});if(ss.isValue(this.$h)){this.$h.done(function(cD){cD.remove();cC()});this.$h=null}else{cC()}return L},$7:function(){this.$8(ss.mkdel(this,function(L){if(L._animatingZoom){window.setTimeout(ss.mkdel(this,this.$7),10)}else{this.$d();this.$j=null;var cC=this.$e();var cD=L.latLngToContainerPoint(L.getCenter());var cE=L.latLngToContainerPoint(cC);var cF=Math.abs(L.getZoom()-this.$f());if(cF>0.001){}var cG=cF<0.01&&cD.distanceTo(cE)<8;this.$a(cC,this.$f(),cG);this.$5(L)}}))},$5:function(L){var cC=$(L.getPanes().tilePane).find('.leaflet-tile-container');for(var cD=0;cD<cC.length;++cD){if(!tab.MiscUtil.isNullOrEmpty$3(cC[cD].style.visibility)){L._onZoomTransitionEnd();break}}},resize:function(L,cC){var cD={w:L,h:cC};if(tab.SizeUtil.equals(cD,this.$l)){return}this.$l=cD;this.$8(ss.mkdel(this,function(cE){tab.DomUtil.setMarginBox(cE.getContainer(),{l:0,t:0,w:cD.w,h:cD.h});cE.invalidateSize(false);this.$0(this.$f(),false);this.$p.$2()}))},setScrollX:function(L){this.$8(function(cC){cC.getContainer().style.left=-L+'px'})},setScrollY:function(L){this.$8(function(cC){cC.getContainer().style.top=-L+'px'})},removeMarkOverlay:function(){if(ss.isNullOrUndefined(this.$h)){return}this.$h.done(ss.mkdel(this,function(L){if(ss.isNullOrUndefined(this.$n)){return}L.removeLayer(this.$n);this.$n=null;this.$5(L);this.$9(L)}))},dispose:function(){this.destroyMap()},$3:function(){var L=new Object;L.zoomControl=false;L.attributionControl=false;return L},$4:function(){var L=new Object;L.maxZoom=100;L.maxNativeZoom=this.$k.get_maxZoom();L.minZoom=this.$k.get_minZoom();L.continuousZoom=true;L.intermediateTileLevels=ss.isValue(this.$k.get_rasterMapSourceModel().get_intermediateTileLevels())&&this.$k.get_rasterMapSourceModel().get_intermediateTileLevels()>1;var cC=this.$k.get_rasterMapSourceModel().get_mapTileSize();L.zoomOffset=tab.MapUtil.getLeafletZoomOffsetForTileSize(cC);L.tileSize=cC;return L},$b:function(L,cC){var cD=$.Deferred();var cE=new Object;cE.animate=true;var cF=cE;if(cC<0){return cD.resolve(false)}this.$h.done(ss.mkdel(this,function(cG){if(cG._animatingZoom){this.$5(cG)}cG.once('moveend',function(cH){cD.resolve(true)});cG.setZoomAround(L,cC,cF);this.$0(cC,true)}));return cD},$a:function(L,cC,cD){var cE=$.Deferred();var cF=new Object;cF.animate=cD;var cG=cF;if(cC<0){return cE.resolve(false)}this.$h.done(ss.mkdel(this,function(cH){if(cH._animatingZoom){this.$5(cH)}if(!tab.FeatureFlags.isEnabled('RuntimeComputeMapCenterInVTL')){this.$j=new o(L,cC)}cH.once('moveend',function(cI){cE.resolve(cD)});cH.setView(L,cC,cG);this.$0(cC,cD)}));return cE},$0:function(L,cC){var cD=L+tab.MapUtil.getLeafletZoomOffsetForTileSize(this.$k.get_rasterMapSourceModel().get_mapTileSize());var cE=tab.MapUtil.getVisiblePixelWidth(cD,this.$k.get_numWorldRepeats(),this.$k.get_rasterMapSourceModel().get_mapTileSize());var cF=this.$p.$5();var cG=Math.ceil((cF-cE)/2);cG=Math.max(cG,0);this.$p.$1(cG,cC)},$1:function(cC,cD,cE,cF,cG){var cH=new L.Point(cF,cG);cH=cH.subtract(this.$i);var cI=cC.containerPointToLayerPoint(cC.getSize().divideBy(2));var cJ=(new L.Point(0,0)).subtract(cH).divideBy(cE);var cK=cI.add(cJ);var cL=cC.layerPointToLatLng(cK);if(isNaN(cL.lat)||isNaN(cL.lng)){return}cC._animateZoom(cL,cD,cI,cE,cH);this.$0(cD,false)},$9:function(L){$(L.getPanes().mapPane).removeClass('leaflet-touching');$(L.getPanes().overlayPane).removeClass('leaflet-touching');tab.WindowHelper.cancelAnimationFrame(this.$q)},$8:function(L){if(!this.get_enabled()){return}this.$h.done(L)}},null,[ss.IDisposable,be]);ss.initClass(bm,a,{get_allHighlighted:function(){return this.highlightedCount>=this.endIndex-this.startIndex+1},get_lineState:function(){if(this.selectedCount>0){return'lineStateSelected'}else if(this.highlightedCount>0){return'lineStateHighlighted'}else{return'lineStateNormal'}}});ss.initClass(bn,a,{get_lineAttributes:function(){return this.$1},$0:function(L){ss.clear(this.$1);var cC=L.markCount;var cD=new bm(0);for(var cE=0;cE<cC;cE++){var cF=L.getMarkBounds(cE);tab.RectXYUtil.unionInPlace(cD.boundingBox,cF);var cG=L.getMarkState(cE);if(cG==='markStateSelected'){cD.selectedCount++;if(L.isMarkHighlighted(cE)){cD.highlightedCount++}}else if(cG==='markStateHighlighted'){cD.highlightedCount++}if(L.markNeedsDraw(cE)){cD.marksNeedingDraw.push(cE)}if(L.isMarkEndPrimitive(cE)){cD.worldOffsets=L.getWorldInstanceOffsets(cD.boundingBox.x,cD.boundingBox.x+cD.boundingBox.w);cD.endIndex=cE;cD.sloppyBoundingBox=tab.RectXYUtil.outsetRect(cD.boundingBox,4,4);this.$1.push(cD);cD=new bm(cE+1)}}}});ss.initClass(cx,a,{add_updated:function(L){this.$1$1=ss.delegateCombine(this.$1$1,L)},remove_updated:function(L){this.$1$1=ss.delegateRemove(this.$1$1,L)},get_current:function(){return this.$0},get_hasHit:function(){return ss.isValue(this.$0)&&ss.isValue(this.$0.get_result())&&this.$0.get_result().get_hitObjectType()!==0},dispose:function(){this.paneTable=null;this.$1.dispose();this.lastEvent=null;this.setCurrent(null)},isWithinLastHitTestDistance:function(L){if(this.get_hasHit()){var cC=this.region.toLocalCoordsEvent(L,false);return tab.PointUtil.isWithinDistance(this.$0.get_regionCoordinates(),cC,20)}return false},getLastHitTestDistance:function(L){if(ss.isValue(this.$0)&&ss.isValue(this.$0.get_result())){var cC=this.region.toLocalCoordsEvent(L,false);return tab.PointUtil.distance(this.$0.get_regionCoordinates(),cC)}return-1},getAsync:function(L){var cC=$.Deferred();if(this.isWithinLastHitTestDistance(L)){cC.resolve(this.$0)}else{var cD=null;cD=ss.mkdel(this,function(cE){this.remove_updated(cD);cC.resolve(cE)});this.add_updated(cD);this.update(L)}return cC.promise()},update:function(L){this.lastEvent=L;this.$1.invokeActionDelayed()},makePaneSpecId:function(L,cC){return cC*this.paneTable.get_numColumns()+L},setCurrent:function(L){this.$0=L;if(ss.isValue(this.$1$1)){this.$1$1(L)}},hitTest:null},null,[ss.IDisposable,tab.IVizHitTestDebouncer]);ss.initClass(bo,a,{hitTest:function(L,cC){var cD=this.$2.getPaneDrawInfoFromSelectionAnchor(L);if(ss.isValue(cD)){var cE=this.$2.onTapHitTest(L);var cF=this.makePaneSpecId(cD.paneColumn,cD.paneRow);this.setCurrent(new cw(this.region,cF,cD.paneColumn,cD.paneRow,L,cC,cE))}else{this.setCurrent(null)}}},cx,[ss.IDisposable,tab.IVizHitTestDebouncer]);ss.initClass(bp,a,{$0:function(){return this.$1.value()},onTapHitTest:function(L){if(ss.isNullOrUndefined(this.$0())){return Z.createEmptyHitTestResult()}return this.$0().onTapHitTest(L,true)[0]},onHoverHitTest:function(L){if(ss.isNullOrUndefined(this.$0())){return Z.createEmptyHitTestResult()}return this.$0().onHoverHitTest(L,true)[0]},clearCache:function(){this.$0().clearCache()},getPaneDrawInfoFromSelectionAnchor:function(L){var cC=bB.getPaneKeysByHitTesting(L,this.$2);if(cC.length===0){return null}return this.$2.getPaneDrawInfoFromKey(cC[0])},hitTestMarksAgainstSelectionShape:function(L){return bB.hitTestMarks(null,false,null,this.$2,L)}});ss.initClass(bq,a,{});ss.initClass(br,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(bs,a,{});ss.initClass(bt,a,{get_enabled:function(){return ss.isValue(this.$v)&&this.$y.get_useFastMaps()},$r:function(){return this.$1$1},$s:function(L){this.$1$1=L},$q:function(){if(!tab.FeatureFlags.isEnabled('RuntimeComputeMapCenterInVTL')&&this.$y.get_allowLocalPanAndZoom()&&ss.isValue(this.$x)){return this.$x.$0()}else{return new mapboxgl.LngLat(this.$y.get_centerLongitude(),this.$y.get_centerLatitude())}},$t:function(){if(!tab.FeatureFlags.isEnabled('RuntimeComputeMapCenterInVTL')&&this.$y.get_allowLocalPanAndZoom()&&ss.isValue(this.$x)){return this.$x.$2()}else{return this.$y.get_zoom()}},get_mapState:function(){if(this.$v.state()!=='resolved'){return null}var L=null;this.$v.done(function(cE){L=cE});var cC=new bu;cC.set_centerLatitude(L.getCenter().lat);cC.set_centerLongitude(L.getCenter().lng);cC.set_zoomLevel(L.getZoom());var cD=cC;return cD},zoomOnPoint:function(L,cC){return this.$9(ss.mkdel(this,function(cD){var cE=cB.incrementZoom(this.$t(),cC);var cF;if(ss.isNullOrUndefined(L)){cF=cD.getCenter()}else{cF=cD.unproject(new mapboxgl.Point(L.x,L.y))}this.$c(cD,cF,cE,true)}))},animateAnchorZoom:function(L,cC){return this.$9(ss.mkdel(this,function(cD){var cE=cD.unproject(new mapboxgl.Point(cC.x,cC.y));this.$b(cD,cE,L,true)}))},zoomRect:function(L){return this.$9(ss.mkdel(this,function(cC){var cD=cC.unproject(new mapboxgl.Point(L.x,L.y+L.h));var cE=cC.unproject(new mapboxgl.Point(L.x+L.w,L.y));var cF=new mapboxgl.LngLatBounds(cD,cE);this.$d(cC,cF,true)}))},moveToBounds:function(L){return this.$9(ss.mkdel(this,function(cC){var cD=new mapboxgl.LngLat(L.minLongitude,L.minLatitude);var cE=new mapboxgl.LngLat(L.maxLongitude,L.maxLatitude);var cF=new mapboxgl.LngLatBounds(cD,cE);this.$d(cC,cF,true)}))},panTo:function(L,cC){return this.$9(ss.mkdel(this,function(cD){var cE=cD.project(this.$q());var cF=new mapboxgl.Point(cE.x-L,cE.y-cC);var cG=cD.unproject(cF);var cH={animate:false};cD.panTo(cG,cH)}))},$9:function(L){var cC=$.Deferred();if(!this.$r()){return cC.resolve(false)}this.$k(ss.mkdel(this,function(cD){L(cD);this.$p(cD).done([function(){cC.resolve(true)}])}));return cC},updateLocalCenter:function(L,cC){this.$x=null;this.$j(ss.mkdel(this,function(cD){this.$p(cD).done([ss.mkdel(this,function(){var cE=cD.project(this.$q());var cF=new mapboxgl.Point(cE.x-L,cE.y-cC);var cG=cD.unproject(cF);var cH=this.$t();this.$x=new e(cG,cH)})])}))},updateLocalMapDataForZoomAround:function(L,cC){this.$x=null;this.$j(ss.mkdel(this,function(cD){this.$p(cD).done([ss.mkdel(this,function(){var cE=cD.getCenter();this.$x=new e(cE,cC)})])}))},pinchScale:function(L,cC,cD){if(!tab.DoubleUtil.isApproximatelyEqual(cD,1)){this.$k(ss.mkdel(this,function(cE){var cF=cB.combineTileZoomAndStretch(this.$t(),cD);var cG=new mapboxgl.Point(L,cC);var cH=cE.unproject(cG);this.$b(cE,cH,cF,false)}))}},touchMove:function(L,cC,cD){this.panTo(L,cC)},touchEnd:function(L,cC,cD){},splatOverlayToMapForTransition:function(L){this.$k(ss.mkdel(this,function(cC){var cD=this.$f(cC);if(ss.isNullOrUndefined(cD)){return}var cE=tab.RenderUtil.calculatePixelRatio(true);if(!tab.CanvasUtil.canvasDensified(L)){cE=1}var cF=Math.floor(2*cE);var cG=this.$2(cC);var cH=ss.Int32.trunc(cG.x*cE);var cI=ss.Int32.trunc(cG.y*cE);var cJ=ss.Int32.trunc(cG.w*cE);var cK=ss.Int32.trunc(cG.h*cE);var cL={x:cH+cF,y:cI+cF,w:cJ-2*cF,h:cK-2*cF};var cM={x:0+cF,y:0+cF,w:cJ-2*cF,h:cK-2*cF};var cN=cD.getCanvas();var cO=tab.CanvasRenderer.getRenderContext(cN,'transparent');cO.drawImage5(L,cL.x,cL.y,cL.w,cL.h,cM.x,cM.y,cM.w,cM.h);L.width=L.width;cD.play()}))},removeMarkOverlay:function(){this.$k(ss.mkdel(this,function(L){var cC=this.$f(L);if(ss.isNullOrUndefined(cC)){return}this.$4(L);L.once('render',function(cD){cC.pause()});cC.play()}))},createMap:function(L,cC){this.$u=(new Date).getTime();bv.logMapCreateStart('MapboxGLJS');this.$y=cC;this.$0();this.$x=null;var cD=$.Deferred();var cE=$.Deferred();this.$v=cE;tab.ModuleManager.load$1('mapbox-gl',[]).done(ss.mkdel(this,function(cF){this.$5(cE,cD,L)}));return cD},$5:function(L,cC,cD){if(!this.get_enabled()){cC.reject();return}var cE=this.$y.get_mapboxMapSourceModel();if(!cE.get_hasPresModel()){cC.reject();return}mapboxgl.accessToken=cE.get_accessToken();var cF=document.createElement('div');cD.append(cF);if(ss.isNullOrUndefined(document.getElementById('hideMapboxLogoStyle'))){cD.append(this.$7())}var cG=this.$6(cF,cE.get_styleUrl());var cH=new mapboxgl.Map(cG);cH.touchZoomRotate.disableRotation();cH.once('load',ss.mkdel(this,function(cI){bv.logMapCreateDone('MapboxGLJS');var cJ=document.createElement('canvas');cJ.width=cH.getCanvas().width;cJ.height=cH.getCanvas().height;cH.addSource('overlay_canvas_source',{type:'canvas',animate:false,canvas:cJ,coordinates:[[0,1],[1,1],[1,0],[0,0]]});cH.addLayer({id:'overlay_canvas_layer',source:'overlay_canvas_source',type:'raster',paint:{'raster-fade-duration':0}});this.$1(cH);this.$A=window.setInterval(ss.mkdel(this,function(){if(ss.isValue(this.$u)&&this.$l()>2500){var cK=ss.unbox(this.$w)-ss.unbox(this.$u);bv.logInitialRenderComplete('MapboxGLJS',cK);window.clearInterval(this.$A)}}),2500);this.$3(cH);this.$4(cH);this.$s(true);cC.resolve()}));cH.on('zoom',ss.mkdel(this,function(cI){this.$3(cH)}));cH.on('resize',ss.mkdel(this,function(cI){this.$3(cH);this.$4(cH)}));cH.on('styledata',ss.mkdel(this,function(cI){this.$o(cH)}));cH.once('render',ss.mkdel(this,function(cI){this.$3(cH)}));cH.setMaxBounds(null);cH.jumpTo({center:this.$q(),zoom:this.$t()});L.resolve(cH)},$l:function(){if(ss.isValue(this.$w)){return(new Date).getTime()-ss.unbox(this.$w)}return-1},$1:function(L){L.once('render',ss.mkdel(this,function(cC){this.$w=(new Date).getTime();if(this.$l()<2500){this.$1(L)}}))},$7:function(){var L=document.createElement('style');L.setAttribute('id','hideMapboxLogoStyle');L.innerHTML='a.mapboxgl-ctrl-logo {display: none}';return L},$0:function(){if(ss.isNullOrUndefined(this.$y)){return}this.$y.add_newMapServerInfo(ss.mkdel(this,this.$h));var L=this.$y.get_mapboxMapSourceModel();if(ss.isNullOrUndefined(L)){return}L.add_styleRefreshRequired(ss.mkdel(this,this.$i))},$8:function(){if(ss.isNullOrUndefined(this.$y)){return}this.$y.remove_newMapServerInfo(ss.mkdel(this,this.$h));var L=this.$y.get_mapboxMapSourceModel();if(ss.isNullOrUndefined(L)){return}L.remove_styleRefreshRequired(ss.mkdel(this,this.$i))},$6:function(L,cC){var cD={attributionControl:false,container:L,minZoom:this.$y.get_minZoom(),maxZoom:this.$y.get_maxZoom(),interactive:false,trackResize:false};if(ss.isNullOrUndefined(cC)){cD.style=bt.$0()}else{cD.style=cC}return cD},destroyMap:function(){var L=$.Deferred();this.$s(false);var cC=ss.mkdel(this,function(){if(ss.isValue(this.$y)){this.$8();this.$y=null}this.$z=null;L.resolve()});if(ss.isValue(this.$v)){this.$v.done(function(cD){cD.getContainer().remove();cD.remove();cC()});this.$v=null}else{cC()}return L},$h:function(){this.$j(ss.mkdel(this,function(L){this.$p(L).done([ss.mkdel(this,function(){this.$x=null;var cC=this.$q();L.stop();this.$c(L,cC,this.$t(),false)})])}))},$i:function(){this.$j(ss.mkdel(this,function(L){L.setStyle(this.$y.get_mapboxMapSourceModel().get_styleUrl())}))},resize:function(L,cC){var cD={w:L,h:cC};if(tab.SizeUtil.equals(cD,this.$z)){return}this.$z=cD;this.$j(function(cE){tab.DomUtil.setMarginBox(cE.getContainer(),{l:0,t:0,w:cD.w,h:cD.h});cE.resize()})},setScrollX:function(L){this.$j(function(cC){cC.getContainer().style.left=-L+'px'})},setScrollY:function(L){this.$j(function(cC){cC.getContainer().style.top=-L+'px'})},dispose:function(){this.destroyMap()},$j:function(L){if(!this.get_enabled()){return}this.$v.done(L)},$k:function(L){if(!this.get_enabled()||!this.$r()){return}this.$v.done(L)},$p:function(L){var cC=$.Deferred();if(L.isMoving()){L.once('moveend',function(cD){cC.resolve()})}else{cC.resolve()}return cC},$b:function(L,cC,cD,cE){this.$a(L,null,cC,cD,cE)},$c:function(L,cC,cD,cE){this.$a(L,cC,null,cD,cE)},$a:function(L,cC,cD,cE,cF){if(cE<0){return}if(!tab.FeatureFlags.isEnabled('RuntimeComputeMapCenterInVTL')&&ss.isValue(cC)){this.$x=new e(cC,cE)}var cG={center:cC,around:cD,zoom:cE,animate:cF,duration:250};L.easeTo(cG)},$d:function(L,cC,cD){var cE={linear:true,animate:cD,duration:250};L.fitBounds(cC,cE)},$n:function(L,cC,cD,cE){var cF=ss.safeCast(bs.replaceString(cC.filter,cD,cE),Array);if(ss.isNullOrUndefined(cF)){return}L.setFilter(cC.id,cF)},$m:function(L,cC,cD,cE){var cF=cC.layout;if(ss.isNullOrUndefined(cF)){return}var cG=cF['text-field'];if(ss.isNullOrUndefined(cG)){return}var cH=bs.replaceString(cF['text-field'],cD,cE);if(ss.isNullOrUndefined(cH)){return}L.setLayoutProperty(cC.id,'text-field',cH)},$o:function(L){if(ss.isNullOrUndefined(this.$y)){return}var cC=this.$y.get_mapboxMapSourceModel();if(!cC.get_hasPresModel()){return}var cD=L.getStyle().layers;for(var cE=0;cE<cD.length;cE++){var cF=cD[cE];this.$n(L,cF,cC.get_mapCodeFilterKeyword(),cC.get_mapCode());this.$m(L,cF,cC.get_languageCodePropertyKeyword(),cC.get_languageCode())}},$f:function(L){return L.getSource('overlay_canvas_source')},$e:function(L){var cC=L.getCanvas();var cD=ss.safeCast(cC.getContext('webgl'),WebGLRenderingContext);if(ss.isNullOrUndefined(cD)){cD=ss.safeCast(cC.getContext('experimental-webgl'),WebGLRenderingContext)}return cD},$4:function(L){var cC=this.$f(L);if(ss.isNullOrUndefined(cC)){return}var cD=cC.getCanvas();var cE=this.$2(L);var cF=tab.RenderUtil.calculatePixelRatio(true);cD.width=ss.Int32.trunc(cE.w*cF);cD.height=ss.Int32.trunc(cE.h*cF);if(cE.h===0){return}var cG=cE.x;var cH=cE.x+cE.w;var cI=cE.y;var cJ=cE.y+cE.h;var cK=[L.unproject([cG,cI]).toArray(),L.unproject([cH,cI]).toArray(),L.unproject([cH,cJ]).toArray(),L.unproject([cG,cJ]).toArray()];cC.setCoordinates(cK)},$3:function(L){var cC=this.$e(L);if(ss.isNullOrUndefined(cC)){return}var cD=this.$2(L);var cE=window.devicePixelRatio;cC.enable(3089);cC.scissor(ss.Int32.trunc(cD.x*cE),ss.Int32.trunc(0*cE),ss.Int32.trunc(cD.w*cE),ss.Int32.trunc(L.getContainer().offsetHeight*cE))},$g:function(L){return ss.Int32.trunc(L.project(bt.$5).x-L.project(bt.$2).x)},$2:function(L){var cC=this.$g(L)*this.$y.get_numWorldRepeats();var cD=ss.Int32.trunc(L.project(bt.$2).y);var cE=ss.Int32.trunc(L.project(bt.$5).y);var cF=L.project(L.getCenter());var cG=Math.max(ss.Int32.trunc(cF.x)-ss.Int32.div(cC,2),0);var cH=Math.min(ss.Int32.trunc(cF.x)+ss.Int32.div(cC,2),L.getContainer().offsetWidth);var cI=Math.min(Math.max(cD,0),L.getContainer().offsetHeight);var cJ=Math.min(Math.max(cE,0),L.getContainer().offsetHeight);return{x:cG,y:cI,w:cH-cG,h:cJ-cI}}},null,[ss.IDisposable,be]);ss.initClass(bu,a,{get_centerLatitude:function(){return this.$1$1},set_centerLatitude:function(L){this.$1$1=L},get_centerLongitude:function(){return this.$1$2},set_centerLongitude:function(L){this.$1$2=L},get_zoomLevel:function(){return this.$1$3},set_zoomLevel:function(L){this.$1$3=L}});ss.initClass(bv,a,{});ss.initClass(bw,a,{});ss.initClass(bx,a,{handleWidgetPropertyChanged:function(L,cC){},updateWidgetState:function(L){}},ss.makeGenericType(spiff.ReactSpiffAdapter$3,[by,Object,Object]));ss.initClass(by,a,{get_compositeSearchWidget:function(){return this.$l},get_isCollapsed:function(){return this.$m},set_isCollapsed:function(L){this.$m=L;this.mapsSearchView.toggleClass('tabMapsSearchViewCollapsed',this.$m);this.mapsSearchView.parent().toggleClass('tabMapsSearchContainerCollapsed',this.$m)},get_isVisible:function(){return this.$n},set_isVisible:function(L){if(tab.FeatureParamsLookup.getBool(28)===true){L=true}if(this.$n===L){return}this.$n=L;this.mapsSearchViewTemplate.get_template().domRoot.css('display',(this.$n?'':'none'))},$e:function(L){this.mapsSearchView.removeClass('tabMapsSearchViewTranslucent')},$f:function(L){this.mapsSearchView.addClass('tabMapsSearchViewTranslucent')},$b:function(L){this.$h();if(L.trim().length===0){this.handleRemoveSuggestionList()}else{this.$k();this.$j()}},showNewSuggestions:function(L,cC){if(!ss.referenceEquals(L,this.$l.get_textInputView().get_text())||ss.isNullOrUndefined(cC)){return}this.$o=tab.MiscUtil.dispose(this.$o);this.$o=[];for(var cD=0;cD<cC.length;cD++){var cE=cC[cD];this.$o.push(spiff.ListItemViewModel.newListItem(cD.toString(),cE,false,false,false))}this.get_compositeSearchWidget().showList(this.$o,this,this.mapsSearchView)},$k:function(){if(ss.isNullOrUndefined(this.$o)){return}this.get_compositeSearchWidget().showList(this.$o,this,this.mapsSearchView)},$9:function(L){var cC=$("<span class='tab-list-item-label'/>");var cD='<span/>';var cE=$(cD);var cF=$(cD);cE.addClass('tabMapsSearchViewSuggestionDisplayName');var cG=L.geographicSearchCandidateDisplayName;var cH=ss.trimEndString(this.$l.get_textInputView().get_text());if(ss.startsWithString(cG.toLowerCase(),cH.toLowerCase())){var cI=$(cD);cI.addClass('tabMapsSearchViewSuggestionActiveSearchText');cI.text(cG.substr(0,cH.length));cE.append(cI);var cJ=$(cD);cJ.text(cG.substr(cH.length));cE.append(cJ)}else{cE.text(L.geographicSearchCandidateDisplayName)}cC.append(cE);cF.addClass('tabMapsSearchViewSuggestionParentName');cF.text(L.geographicSearchCandidateParentName);cC.append(cF);return cC},handleEnterKeyPress:function(){this.$h();if(ss.isValue(this.get_compositeSearchWidget().get_listViewModel())){this.mapsSearchViewModel.moveMapToCandidateBounds(this.get_compositeSearchWidget().get_listViewModel().get_collection()[0].get_data());this.handleRemoveSuggestionList()}else{this.mapsSearchViewModel.commitToSearchString(this.get_compositeSearchWidget().get_textInputView().get_text())}},handleListItemClick:function(L){this.$h();this.handleRemoveSuggestionList();this.mapsSearchViewModel.moveMapToSuggestionListItem(L)},handleCollapseSearchWidget:function(){this.set_isCollapsed(true)},$d:function(L){this.set_isVisible(L)},$c:function(){this.get_compositeSearchWidget().get_textInputView().set_text('')},handleRemoveSuggestionList:function(){this.$l.removeList();this.$o=tab.MiscUtil.dispose(this.$o)},$a:function(){this.get_compositeSearchWidget().get_textInputView().get_inputElement().blur()},setGeoLocationButtonVisibility:function(L){if(L){this.gotoMyLocationButton.element.css('display','inline-block')}else{this.gotoMyLocationButton.element.css('display','none')}},handleSearchButtonClick:function(){this.$h();this.set_isCollapsed(!this.$m);if(!this.$m){if(!BrowserSupport.BrowserSupport.IsIE()){this.$l.get_textInputView().get_inputElement().focus()}if(this.get_compositeSearchWidget().get_textInputView().get_text().length>0){this.selectAllSearchText()}}},$j:function(){this.queryDelayTimer=window.setTimeout(ss.mkdel(this,this.$g),200)},$h:function(){this.queryDelayTimer=tab.MiscUtil.clearTimeout(this.queryDelayTimer)},$g:function(){this.mapsSearchViewModel.getSuggestionsForSearchString(this.get_compositeSearchWidget().get_textInputView().get_text());this.$h()},updateSearchTextValue:function(L){var cC=L.geographicSearchCandidateDisplayName;if(!ss.isNullOrEmptyString(L.geographicSearchCandidateParentName)){cC+=', '+L.geographicSearchCandidateParentName}this.get_compositeSearchWidget().setSearchText(cC)},selectAllSearchText:function(){tab.DomUtil.selectAllInputText(this.$l.get_textInputView().get_inputElement())},handleEnableUserInteraction:function(L){this.element.css({'pointer-events':(L?'auto':'none')})},createListItemContent:function(L){return this.$9(L.get_data())},$i:function(){var L=this.get_compositeSearchWidget().get_textInputView().get_inputElement();if(!ss.staticEquals(this.mapsSearchViewModel.get_focusInHandler(),null)){L.focusin(this.mapsSearchViewModel.get_focusInHandler())}if(!ss.staticEquals(this.mapsSearchViewModel.get_focusOutHandler(),null)){L.focusout(this.mapsSearchViewModel.get_focusOutHandler())}if(!ss.staticEquals(this.mapsSearchViewModel.get_keypressHandler(),null)){L.keypress(this.mapsSearchViewModel.get_keypressHandler())}},dispose:function(){this.$l.dispose();if(ss.isValue(this.gotoMyLocationButton)){this.gotoMyLocationButton.dispose()}ss.makeGenericType(spiff.BaseView$1,[bz]).prototype.dispose.call(this)}},ss.makeGenericType(spiff.BaseView$1,[bz]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[bz]),spiff.IListItemContentCreator]);ss.initClass(bz,a,{add_receivedNewSuggestions:function(L){this.$2$1=ss.delegateCombine(this.$2$1,L)},remove_receivedNewSuggestions:function(L){this.$2$1=ss.delegateRemove(this.$2$1,L)},add_updateTextInputValue:function(L){this.$2$2=ss.delegateCombine(this.$2$2,L)},remove_updateTextInputValue:function(L){this.$2$2=ss.delegateRemove(this.$2$2,L)},add_onMoveMapToBounds:function(L){this.$2$3=ss.delegateCombine(this.$2$3,L)},remove_onMoveMapToBounds:function(L){this.$2$3=ss.delegateRemove(this.$2$3,L)},add_searchWidgetCollapsed:function(L){this.$2$4=ss.delegateCombine(this.$2$4,L)},remove_searchWidgetCollapsed:function(L){this.$2$4=ss.delegateRemove(this.$2$4,L)},add_visibilityChanged:function(L){this.$2$5=ss.delegateCombine(this.$2$5,L)},remove_visibilityChanged:function(L){this.$2$5=ss.delegateRemove(this.$2$5,L)},add_userInteractionEnabled:function(L){this.$2$6=ss.delegateCombine(this.$2$6,L)},remove_userInteractionEnabled:function(L){this.$2$6=ss.delegateRemove(this.$2$6,L)},add_initialTextInputValueRestored:function(L){this.$2$7=ss.delegateCombine(this.$2$7,L)},remove_initialTextInputValueRestored:function(L){this.$2$7=ss.delegateRemove(this.$2$7,L)},add_suggestionListRemoved:function(L){this.$2$8=ss.delegateCombine(this.$2$8,L)},remove_suggestionListRemoved:function(L){this.$2$8=ss.delegateRemove(this.$2$8,L)},add_blurInputElementCalled:function(L){this.$2$9=ss.delegateCombine(this.$2$9,L)},remove_blurInputElementCalled:function(L){this.$2$9=ss.delegateRemove(this.$2$9,L)},get_visualID:function(){return this.$2},get_gotoMyLocationButtonEnabled:function(){return tab.FeatureParamsLookup.getBool(32)&&BrowserSupport.BrowserSupport.IsGeolocationSupported()},get_focusInHandler:function(){return this.$2$10},set_focusInHandler:function(L){this.$2$10=L},get_focusOutHandler:function(){return this.$2$11},set_focusOutHandler:function(L){this.$2$11=L},get_keypressHandler:function(){return this.$2$12},set_keypressHandler:function(L){this.$2$12=L},commitToSearchString:function(L){L=L.trim();this.sendGeographicSearchQuery(L,1,ss.mkdel(this,this.moveToTopGeographicCandidate))},getSuggestionsForSearchString:function(L){this.sendGeographicSearchQuery(L,5,ss.mkdel(this,this.processGeographicSuggestions))},moveMapToCandidateBounds:function(L){if(ss.isValue(this.$2$2)){this.$2$2(L)}if(ss.isValue(this.$2$3)){this.$2$3(L.mapLatLongRect)}tab.MapClientCommands.boundingBoxPan(this.$2,L.mapLatLongRect)},moveMapToSuggestionListItem:function(L){var cC=L.get_data();this.moveMapToCandidateBounds(cC)},moveToTopGeographicCandidate:function(L){var cC=L.geographicSearchCandidateList;if(cC.length===0){}else{var cD=cC[0];this.moveMapToCandidateBounds(cD)}},processGeographicSuggestions:function(L){if(!ss.isValue(this.$2$1)){return}var cC=[];for(var cD=0;cD<L.geographicSearchCandidateList.length;cD++){cC.push(L.geographicSearchCandidateList[cD])}this.$2$1(L.geographicSearchSearchString,cC)},sendGeographicSearchQuery:function(L,cC,cD){var cE=tsConfig.workbookLocale||'en_US'.toLowerCase();tab.MapClientCommands.geographicSearchQuery(this.$2,L,cE,cC,cD)},collapseSearchWidget:function(){this.raiseActionEvent(this.$2$4)},setVisible:function(L){this.raiseActionEvent$1(Boolean).call(this,this.$2$5,L)},enableUserInteraction:function(L){this.raiseActionEvent$1(Boolean).call(this,this.$2$6,L)},restoreInitialTextInputValue:function(){this.raiseActionEvent(this.$2$7)},removeSuggestionList:function(){this.raiseActionEvent(this.$2$8)},blurInputElement:function(){this.raiseActionEvent(this.$2$9)}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(bA,a,{});ss.initClass(bB,a,{hitTest:function(L,cC){var cD=(ss.isValue(L)?{x:L.x,y:L.y,w:1,h:1}:null);return bB.hitTestMarks(cD,cC,this.$0(),this.$2,null)},$0:function(){if(ss.isNullOrUndefined(this.$1)){this.$1=bB.buildHitTester(this.$2)}return this.$1},clearCache:function(){this.$1=null}},X,[ss.IDisposable,bb]);ss.initEnum(bD,a,{root:0,pane:1,bin:2,mark:3,lineSegmentUnionRect:4,trendLineSegment:5,userPane:6,annotation:7,refLine:8,refLineLabel:9});ss.initClass(bE,a,{setDefaultLabelLookupValues:function(){this.c.set('label_index',tab.VisualColumnIterator.create([-1]))},addLabelInfo:function(L,cC,cD){this.$j=bE.$3(L,cC,cD-cC);this.transformColumnData(this.$j);var cE=this.$j.get('tuple_id');var cF=[];if(ss.isValue(cE)){var cG=new Array(this.markCount);for(var cH=0;cH<this.markCount;cH++){cG[cH]=-1}for(var cI=0;cI<cE.length;cI++){var cJ=this.tupleToIndexMap.get(cE.v[(cE.c?0:cI)]);if(ss.isValue(cJ)){cG[cJ]=cI;cF.push(cJ)}}this.c.set('label_index',tab.VisualColumnIterator.create(cG))}cE=this.c.get('tuple_id');var cK=new Map;var cL=new Array(this.markCount);this.$d(cF,ss.mkdel(this,function(cR,cS){if(ss.isValue(cR)){var cT=bE.getMarkBoundingBox('label',cR,this,cS);cK.set(cE.v[(cE.c?0:cR)],cT);cL[cR]=cT}}));var cM=this.$1(cL);this.markLabelWorldOffsets=cM.$1;this.markLabelInstanceOffsets=cM.$0;var cN;if(this.$j.has('pane_flags')){var cO=this.$j.get('pane_flags');cN=cO.v[(cO.c?0:0)]}else{cN=0}var cP=cN;this.truncateLabelToCell=tab.SceneDataUtil.isPaneFlagSet(cP,'clip-to-cell-x');var cQ=ss.isValue(L.MarkLayoutData)&&ss.isValue(L.MarkLayoutData.TextCompositionInputKeys)&&L.MarkLayoutData.TextCompositionInputKeys.is_text_table===true;this.parseTextInfo(L.TextRunTable,L.TextStyleTable,true,cQ);this.sceneInfo.$1(this,cK)},get_paneIndex:function(){return this.$1$1},set_paneIndex:function(L){this.$1$1=L},get_hasLabels:function(){return ss.isValue(this.$j)},get_hasSelection:function(){return this.sceneInfo.get_hasSelection()},get_hasBrushing:function(){return this.sceneInfo.get_hasBrushing()},get_lineDrawState:function(){if(this.$k===null){this.$k=new bn(this)}return this.$k},get_hasBackground:function(){var L=this.c.has('pane_has_background');if(L){var cC=this.c.get('pane_has_background');L=cC.v[(cC.c?0:0)]===true}return L},get_hasHalos:function(){var L=this.c.has('has_halos');if(L){var cC=this.c.get('has_halos');L=cC.v[(cC.c?0:0)]===true}return L},get_hasHaloHighlightColor:function(){return this.c.has('highlighted_halo_color')&&this.c.get('highlighted_halo_color').isValid},get_borderColor:function(){var L;if(this.c.has('border_color')){var cC=this.c.get('border_color');L=cC.v[(cC.c?0:0)]}else{L=null}return L},get_textStyleColumns:function(){return this.$q},get_mapExtentOrPaneRect:function(){return this.mapExtents||this.paneRect},get_clipLabelToCell:function(){return this.truncateLabelToCell},get_paneDescriptorKey:function(){return this.paneMarks.get_paneKey()},get_hasGlobalTransparency:function(){return this.globalAlpha<1},get_extents:function(){return this.domainExtents},get_paneFlags:function(){return this.$n},set_paneFlags:function(L){this.$n=L;this.$8()},$e:function(){return this.sceneInfo.$i()},getTextRunProperty:function(L,cC){if(ss.isNullOrUndefined(this.$p)||!this.$p.has(L)||ss.isNullOrUndefined(this.$p.get(L))){return null}var cD=this.$p.get(L);return cD.v[(cD.c?0:cC)]},markHasLabel:function(L){return this.c.get('label_index').gv(L)!==-1},getOneColorAlpha:function(L,cC,cD){var cE=null;this.$h=this.$h||new Map;if(!this.$h.has(L)){cE=tab.ColorModel.fromArgbInt(L);var cF=tab.SceneDataUtil.createColorCollection(cE,this.foggedBackgroundColor,this.fogBlendFactor);this.$h.set(L,cF)}var cG=this.$h.get(L);if(cC==='colorOverrideReplaceAlpha'){cE=cE||tab.ColorModel.fromArgbInt(L);return tab.ColorModel.fromColorModelPlusAlpha(cE,cD/255).toRgba()}return cG[cC]},$5:function(L,cC){var cD=this.c.get(cC).gv(L);if(this.$i.has(L)){var cE={};cE['colorOverrideFog']=cD['colorOverrideFog'];cE['colorOverrideNone']=cD['colorOverrideFog'];cE['colorOverrideOpaque']=cD['colorOverrideFog'];cD=cE}return cD},getMarkColors:function(L){var cC='color';if(this.forceOpaqueColors&&this.c.get('opaque_color').isValid){cC='opaque_color'}return this.$5(L,cC)},getBorderColors:function(L){return this.$5(L,'border_color')},getMarkGeometry:function(L){return this.sceneInfo.$7(this.pdMarksKey,L)},isMarkPropertyConstant:function(L){return this.c.get(L).c},computeDirtyMarks:function(L){this.$g=new Map;var cC=tab.RectXYUtil.completelyContains(L,this.paneRect);var cD=this.c.get('tuple_id');for(var cE=0;cE<this.markCount;cE++){var cF=cD.v[(cD.c?0:cE)];if(!this.isTupleVisible(cF)){continue}if(cC){this.$g.set(cE,true);continue}if(this.markType==='line'||this.markType==='area'){this.$g.set(cE,true)}else{var cG=this.$7(cF);var cH=this.getMarkInstanceOffsets(cE);if(tab.RectXYUtil.intersectsWithAny$1(L,cG,cH)){this.$g.set(cE,true)}}}},clearDirtyMarks:function(){this.$g=null},markNeedsDraw:function(L){return ss.isValue(this.$g)&&this.$g.has(L)},markLabelNeedsDraw:function(L,cC){if(this.getMarkState(L)==='markStateInvisible'){return false}var cD=this.getMarkLabelBounds(L);var cE=this.getMarkLabelInstanceOffsets(L);return tab.RectXYUtil.intersectsWithAny$1(cC,cD,cE)},refreshMarkState:function(){this.$l=this.sceneInfo.computeTupleStates(this.c.get('tuple_id'));this.$i=this.sceneInfo.computeFilteredMarks(this.c.get('tuple_id'));this.$m=new Map;for(var L=0;L<this.markCount;L++){if(this.$3(L)){this.$m.set(L,true)}}if(this.$9()){this.$k=new bn(this)}},getMarkState:function(L){if(ss.isValue(this.$l)&&this.$l.length>L){return this.$l[L]}return this.$2(L)},getMarkLabelState:function(L){if(this.$9()){var cC=this.get_lineDrawState().get_lineAttributes();for(var cD=0;cD<cC.length;cD++){var cE=cC[cD];if(cE.startIndex<=L&&L<=cE.endIndex){switch(cE.get_lineState()){case'lineStateHighlighted':{return(this.$a(L)?'markStateHighlighted':this.getMarkState(L))}case'lineStateSelected':{if(this.markType==='pie'&&!this.$a(L)){return this.getMarkState(L)}return'markStateSelected'}case'lineStateNormal':{return'markStateNormal'}}return'markStateNormal'}}}return this.getMarkState(L)},getMarkLabelProperty:function(L,cC){if(this.markType==='text'){return this.c.get(L).gv(cC)}var cD=this.c.get('label_index').gv(cC);if(cD===-1){return null}var cE=this.$j.get(L);return cE.v[(cE.c?0:cD)]},getAllMarkBounds:function(){var L=new Array(this.markCount);var cC=this.c.get('tuple_id');var cD=this.c.get('label_index');for(var cE=0;cE<this.markCount;cE++){var cF=cC.v[(cC.c?0:cE)];var cG=this.sceneInfo.getMarkBoundingBox(cF);var cH=((cD.v[(cD.c?0:cE)]===-1)?null:this.sceneInfo.$6(cF));L[cE]={item1:cG,item2:cH}}return L},getMarkBounds:function(L){var cC=this.c.get('tuple_id');return this.$7(cC.v[(cC.c?0:L)])},getMarkIndexFromTupleId:function(L){return this.tupleToIndexMap.get(L)},containsTuple:function(L){return this.tupleToIndexMap.has(L)},getMarkLabelBounds:function(L){var cC=this.sceneInfo;var cD=this.c.get('tuple_id');return cC.$6(cD.v[(cD.c?0:L)])},getInsetPaneClipRect:function(L,cC){var cD=2*cC;var cE=this.getUserPaneRectByIndex(L);return{x:cE.x+cC,y:cE.y+cC,w:cE.w-cD,h:cE.h-cD}},getUserPaneRectByMark:function(L){if(this.hasUserPanes){return this.$f.$8(L)}else{return{x:0,y:0,w:this.paneRect.w,h:this.paneRect.h}}},getUserPaneRectByIndex:function(L){if(this.hasUserPanes){return this.$f.$7(L)}else{return{x:0,y:0,w:this.paneRect.w,h:this.paneRect.h}}},getUserPaneRectByTupleId:function(L){if(this.hasUserPanes){return this.$f.$8(this.getMarkIndexFromTupleId(L))}else{return{x:0,y:0,w:this.paneRect.w,h:this.paneRect.h}}},getUserPaneMarkCount:function(L){if(!this.hasUserPanes){return this.markCount}else{return this.$f.$5(L)}},getUserPaneMarkRange:function(L){if(!this.hasUserPanes){return{firstMark:0,lastMark:this.markCount-1}}else{return this.$f.$6(L)}},getUserPaneIndexByMark:function(L){if(!this.hasUserPanes){return 0}else{return this.$f.$4(L)}},initStaticProperties:function(){var L=this.c.has('draw_border');if(L){var cC=this.c.get('draw_border');L=cC.v[(cC.c?0:0)]}this.drawBorder=L;var cD=this.c.has('wrap_domain');if(cD){var cE=this.c.get('wrap_domain');cD=cE.v[(cE.c?0:0)]}this.isWrappedDomain=cD;var cF;if(this.c.has('alpha')){var cG=this.c.get('alpha');cF=cG.v[(cG.c?0:0)]}else{cF=1}this.globalAlpha=cF;var cH;if(this.c.has('line_interp')){var cI=this.c.get('line_interp');cH=cI.v[(cI.c?0:0)]}else{cH='lim-linear'}this.lineInterpolation=cH;var cJ;if(this.c.has('min_bar_width')){var cK=this.c.get('min_bar_width');cJ=cK.v[(cK.c?0:0)]}else{cJ=0}this.minBarWidth=cJ;var cL;if(this.c.has('min_bar_height')){var cM=this.c.get('min_bar_height');cL=cM.v[(cM.c?0:0)]}else{cL=0}this.minBarHeight=cL},$c:function(L){if(!this.hasUserPanes){var cC=this.getUserPaneRectByIndex(0);var cD=this.markCount;for(var cE=0;cE<cD;++cE){L(cE,cC)}}else{this.$f.$9(L)}},$d:function(L,cC){if(!this.hasUserPanes){var cD=this.getUserPaneRectByIndex(0);for(var cE=0;cE<L.length;cE++){var cF=L[cE];cC(cF,cD)}}else{this.$f.$a(L,cC)}},getMarkInstanceOffsets:function(L){if(!this.isWrappedDomain||ss.isNullOrUndefined(this.markInstanceOffsets)){return bE.$e}return this.markInstanceOffsets[L]},getMarkLabelInstanceOffsets:function(L){if(!this.isWrappedDomain||ss.isNullOrUndefined(this.markLabelInstanceOffsets)){return bE.$e}return this.markLabelInstanceOffsets[L]},getWorldInstanceOffsets:function(L,cC){if(!this.isWrappedDomain){return bE.$e}var cD=Math.min(ss.Int32.trunc(this.worldWidth),this.paneRect.w);L-=cD;cC+=cD;var cE=this.get_mapExtentOrPaneRect();var cF=Math.ceil((cE.x-cC)/this.worldWidth);var cG=Math.floor((cE.x+cE.w-L)/this.worldWidth);var cH=cG-cF+1;var cI=new Array(cH);var cJ=cF*this.worldWidth;for(var cK=0;cK<cH;cK++,cJ+=this.worldWidth){cI[cK]=cJ}return cI},getWorldOffsetBounds:function(L){var cC=[];var cD=this.getWorldInstanceOffsets(L.x,L.x+L.w);var cE=cD.length;for(var cF=0;cF<cE;cF++){var cG=cD[cF];if(cG!==0){var cH=tab.RectXYUtil.offsetRectXY(L,ss.Int32.trunc(cG)|0,0);cC.push(cH)}else{cC.push(L)}}return cC},isTupleSelected:function(L){return L!==0&&this.sceneInfo.$c(L)},isMarkSelected:function(L){var cC=this.c.get('tuple_id');return this.isTupleSelected(cC.v[(cC.c?0:L)])},isMarkImpliedSelected:function(L){var cC=this.c.get('tuple_id');var cD=cC.v[(cC.c?0:L)];return cD!==0&&this.sceneInfo.$b(cD)},isTupleHighlighted:function(L){return L!==0&&this.sceneInfo.$a(L)},isMarkHighlighted:function(L){var cC=this.c.get('tuple_id');var cD=cC.v[(cC.c?0:L)];return this.isTupleHighlighted(cD)},isTupleVisible:function(L){return L!==0&&this.sceneInfo.$d(L)},isLineSegmentVisible:function(L,cC){return this.getMarkState(L)!=='markStateInvisible'&&this.getMarkState(cC)!=='markStateInvisible'},isLineSegmentFiltered:function(L,cC){return this.$i.has(L)||this.$i.has(cC)},shouldStampThisShapeMark:function(L){if(this.$o){return true}if(ss.isNullOrUndefined(this.shapeMarkStampingDecision)){return false}if(L>=this.markCount){return false}return this.shapeMarkStampingDecision[L]},isMarkEndPrimitive:function(L){var cC=this.c.get('mark_flags').gv(L);return tab.SceneDataUtil.isMarkFlagSet(cC,'endprimitive')},isMarkDebug:function(L){var cC=this.c.get('mark_flags').gv(L);return tab.SceneDataUtil.isMarkFlagSet(cC,'debug')},shouldShowMarker:function(L){if(ss.isNullOrUndefined(this.$m)){return this.$3(L)}return this.$m.has(L)},$6:function(L,cC,cD){var cE=null;if(cC>=0&&!this.hasConstantColor&&this.markType==='text'){cE=this.getMarkColors(cC)}else if(ss.isValue(this.$q)&&this.$q.has('text_style_color')){var cF=this.$q.get('text_style_color');cE=cF.v[(cF.c?0:L)]}if(ss.isNullOrUndefined(cE)){return'black'}if(cC!==-1&&this.$i.has(cC)){cD='colorOverrideFog'}return cE[cD]},thisDomainToPixelX:function(L){return bE.domainToPixelX(L,this.domainExtents,this.paneRect)},thisDomainToPixelY:function(L){return bE.domainToPixelY(L,this.domainExtents,this.paneRect)},thisDomainToPixelWidth:function(L){return bE.domainToPixelWidth(L,this.domainExtents,this.paneRect)},thisDomainToPixelHeight:function(L){return bE.domainToPixelHeight(L,this.domainExtents,this.paneRect)},$9:function(){return this.markType==='line'||this.markType==='area'||this.markType==='pie'},$a:function(L){return this.getMarkLabelProperty('label_one_per_group',L)},$3:function(L){var cC=this.c.get('mark_flags').gv(L);return tab.SceneDataUtil.isMarkFlagSet(cC,'marked')||tab.SceneDataUtil.isMarkFlagSet(cC,'markediflabel')&&this.markHasLabel(L)&&!this.$a(L)},setUserPaneInfo:function(L){if(ss.isNullOrUndefined(L)){return}if(this.markType==='text'){return}this.$f=new co(L,this);this.userPaneCount=this.$f.$b;this.hasUserPanes=true},processColors:function(L){var cC=this.$b();if(ss.isNullOrUndefined(L)||!this.c.has('color_idx')){if(cC){this.$0()}return}var cD=tab.VisualColumnHelpers.buildColorTable(L,this.c,this.foggedBackgroundColor,this.fogBlendFactor);var cE=null;if(cC){cE=tab.VisualColumnHelpers.buildOpaqueColorTable(cD)}var cF=this.c.get('color_idx');var cG=cF.length;var cH=new Array(cG);var cI=(cC?new Array(cG):null);for(var cJ=0;cJ<cG;cJ++){var cK=cF.v[(cF.c?0:cJ)];cH[cJ]=cD[cK];if(cC){cI[cJ]=cE[cK]}}this.c.set('color',tab.VisualColumnIterator.create(cH));if(cC){this.c.set('opaque_color',tab.VisualColumnIterator.create(cI))}this.c.delete('color_idx')},$0:function(){var L=this.c.get('color');if(ss.isValue(L)){var cC=new Array(L.length);for(var cD=0;cD<L.length;++cD){cC[cD]=tab.SceneDataUtil.createOpaqueColorCollection(L.v[(L.c?0:cD)])}this.c.set('opaque_color',tab.VisualColumnIterator.create(cC))}},buildTupleLookup:function(){this.tupleToIndexMap.clear();var L=this.c.get('tuple_id');if(!ss.isNullOrUndefined(L)){var cC=L.length;for(var cD=0;cD<cC;cD++){this.tupleToIndexMap.set(L.v[(L.c?0:cD)],cD)}}},$7:function(L){return this.sceneInfo.getMarkBoundingBox(L)},$b:function(){return this.markType==='line'&&this.get_hasGlobalTransparency()},transformColumnData:function(L){var cC=tab.VisualColumnHelpers.transformColumn(L.get('alpha'),function(cS){return cS/255});for(var cD=0;cD<bE.$4.length;cD++){var cE=bE.$4[cD];var cF={$:cC&&cE==='text_style_color'};var cG;if(cF.$){var cH=L.get('alpha');cG=cH.v[(cH.c?0:0)]}else{cG=1}var cI={$:cG};tab.VisualColumnHelpers.transformColumn(L.get(cE),ss.mkdel({useAlpha:cF,colorAlpha:cI,$this:this},function(cS){var cT=tab.ColorModel.fromArgbInt(cS);if(this.useAlpha.$){cT=new tab.ColorModel(cT.get_r(),cT.get_g(),cT.get_b(),this.colorAlpha.$*cT.get_a())}return tab.SceneDataUtil.createColorCollection(cT,this.$this.foggedBackgroundColor,this.$this.fogBlendFactor)}))}tab.VisualColumnHelpers.transformColumn(L.get('shape_id'),function(cS){return tab.SceneDataUtil.shapeMapping[cS]||cS});tab.VisualColumnHelpers.transformColumn(L.get('line_interp'),function(cS){return tab.SceneDataUtil.lineInterpolationMapping[cS]||cS});if(ss.isValue(this.paneRect)&&ss.isValue(this.domainExtents)&&this.domainExtents.w!==0&&this.domainExtents.h!==0){bE.$d.forEach(ss.mkdel(this,function(cS,cT){var cU;var cV;var cW=cT+'_int';if(ss.contains(bE.$7,cT)){var cX=100*Math.max(1,this.paneRect.w);cU=this.domainExtents.w/cX;cV=this.domainExtents.x}else if(ss.contains(bE.$8,cT)){var cY=100*Math.max(1,this.paneRect.h);cU=this.domainExtents.h/cY;cV=this.domainExtents.y}else{cU=(bE.$d.get(cT).y-bE.$d.get(cT).x)/32767;cV=bE.$d.get(cT).x}var cZ=tab.VisualColumnHelpers.transformColumn(L.get(cW),function(da){return(ss.isValue(da)?(da*cU+cV):null)});if(cZ){L.set(cT,L.get(cW));L.delete(cW)}}));var cJ={x:0,y:0,w:this.paneRect.w,h:this.paneRect.h};for(var cK=0;cK<bE.$7.length;cK++){var cL=bE.$7[cK];tab.VisualColumnHelpers.transformColumn(L.get(cL),ss.mkdel(this,function(cS){return bE.domainToPixelX(cS,this.domainExtents,cJ)}))}for(var cM=0;cM<bE.$6.length;cM++){var cN=bE.$6[cM];tab.VisualColumnHelpers.transformColumn(L.get(cN),ss.mkdel(this,function(cS){return bE.domainToPixelWidth(cS,this.domainExtents,this.paneRect)}))}for(var cO=0;cO<bE.$8.length;cO++){var cP=bE.$8[cO];tab.VisualColumnHelpers.transformColumn(L.get(cP),ss.mkdel(this,function(cS){return bE.domainToPixelY(cS,this.domainExtents,cJ)}))}for(var cQ=0;cQ<bE.$5.length;cQ++){var cR=bE.$5[cQ];tab.VisualColumnHelpers.transformColumn(L.get(cR),ss.mkdel(this,function(cS){return bE.domainToPixelHeight(cS,this.domainExtents,this.paneRect)}))}}},$4:function(L,cC){var cD=new Map;if(!ss.isNullOrUndefined(L.font)){var cE=L.font;var cF=cE.length;var cG=new Array(cF);for(var cH=0;cH<cF;++cH){cG[cH]=bE.$1(L,cH)}cD.set('font',tab.VisualColumnIterator.create(cG));var cI=L;var cJ=_.keys(cI);for(var cK=0;cK<cJ.length;cK++){var cL=cJ[cK];if(!ss.contains(bE.$9,cL)){var cM=cI[cL];cD.set(cL,tab.VisualColumnIterator.create(tab.VisualColumnHelpers.copyArray(cM,0,cM.length)))}}if(cC){var cN=this.c.get('alpha').gv(0);if(ss.isValue(cN)){cD.set('alpha',tab.VisualColumnIterator.create([cN*255]))}}this.transformColumnData(cD);tab.VisualColumnHelpers.transformColumn(cD.get('text_orientation'),function(cO){return bE.textAngleInRad.get(cO)});tab.VisualColumnHelpers.transformColumn(cD.get('text_alignment'),function(cO){var cP='start';var cQ=cO;if(cQ===2){cP='end'}return cP})}return cD},prepareLeftRight:function(){var L=new Array(this.markCount);var cC=new Array(this.markCount);for(var cD=0;cD<this.markCount;++cD){L[cD]=-1;cC[cD]=-1}var cE=0;var cF=this.c.get('mark_flags');for(var cG=0;cG<this.markCount;cG++){var cH=cF.v[(cF.c?0:cG)];if(!tab.SceneDataUtil.isMarkFlagSet(cH,'end')){cC[cG]=cG+1;L[cG+1]=cG}if(tab.SceneDataUtil.isMarkFlagSet(cH,'closedprimitive')){cC[cG]=cE;L[cE]=cG}if(tab.SceneDataUtil.isMarkFlagSet(cH,'endprimitive')){cE=cG+1}}this.c.set('l_neighbor',tab.VisualColumnIterator.create(L));this.c.set('r_neighbor',tab.VisualColumnIterator.create(cC))},setupBoundingBoxes:function(){var L=this.c.get('tuple_id');var cC=new Map;var cD=new Array(this.markCount);this.$c(ss.mkdel(this,function(cN,cO){var cP=bE.getMarkBoundingBox(this.markType,cN,this,cO);cC.set(L.v[(L.c?0:cN)],cP);cD[cN]=cP}));if(this.markType==='pie'){var cE=new bn(this);var cF=cE.get_lineAttributes();for(var cG=0;cG<cF.length;cG++){var cH=cF[cG];var cI=[];var cJ=L.v[(L.c?0:cH.startIndex)];cI.push(cJ);var cK=tab.RectXYUtil.clone(cC.get(cJ));for(var cL=cH.startIndex+1;cL<=cH.endIndex;++cL){cJ=L.v[(L.c?0:cL)];cI.push(cJ);tab.RectXYUtil.unionInPlace(cK,cC.get(cJ))}this.sceneInfo.$0(this,cK,cI)}}var cM=this.$1(cD);this.markWorldOffsets=cM.$1;this.markInstanceOffsets=cM.$0;this.sceneInfo.$2(this,cC)},setupCustomShapePositions:function(){if(this.markType==='shape'&&this.sceneInfo.customShapes.length>0){var L=[];var cC=[];var cD=this.c.get('shape_id');var cE=this.c.get('x');var cF=this.c.get('y');var cG=this.c.get('size');for(var cH=0;cH<this.markCount;++cH){if(tab.SceneDataUtil.isCustomShape(cD.v[(cD.c?0:cH)])){var cI=cG.v[(cG.c?0:cH)]/2;L[cH]=Math.round(cE.v[(cE.c?0:cH)]-cI);cC[cH]=Math.round(cF.v[(cF.c?0:cH)]-cI)}}if(L.length>0){this.c.set('left',tab.VisualColumnIterator.create(L));this.c.set('top',tab.VisualColumnIterator.create(cC))}}},setupShapeMarkStampingMap:function(){if(this.markCount<bE.shapeMarkStampingRatio){return}if(BrowserSupport.BrowserSupport.IsIE()){this.shapeMarkStampingDecision=null;if(!this.sceneInfo.get_isSingleUserPane()){return}if(this.clipCase!==0){return}}var L=this.isMarkPropertyConstant('color');var cC=this.isMarkPropertyConstant('size');var cD=this.isMarkPropertyConstant('shape_id');if(cD){var cE=this.c.get('shape_id').gv(0);if(!tab.SceneDataUtil.isSupportedStampShape(cE)){return}if(L&&cC){this.$o=true;return}}var cF=this.c.get('size');var cG=this.c.get('shape_id');var cH={};var cI=new Array(this.markCount);for(var cJ=0;cJ<this.markCount;cJ++){cI[cJ]=false;var cK=[];if(!cC){cK.push(cF.v[(cF.c?0:cJ)])}if(!cD){var cL=cG.v[(cG.c?0:cJ)];if(!tab.SceneDataUtil.isSupportedStampShape(cL)){continue}cK.push(cL)}if(!L){var cM=this.getMarkColors(cJ);cK.push(cM['colorOverrideNone'])}var cN=cK.toString();if(!ss.keyExists(cH,cN)){cH[cN]=[]}cH[cN].push(cJ)}var cO=false;var cP=0;var cQ=_.keys(cH);for(var cR=0;cR<cQ.length;cR++){var cS=cQ[cR];var cT=cH[cS];if(cT.length>=bE.shapeMarkStampingRatio){for(var cU=0;cU<cT.length;cU++){var cV=cT[cU];cI[cV]=true;cP++}cO=true}}if(cP===this.markCount){this.$o=true;this.shapeMarkStampingDecision=null}else if(cO){this.shapeMarkStampingDecision=cI}else{this.shapeMarkStampingDecision=null}},parseTextInfo:function(L,cC,cD,cE){if(!ss.isNullOrUndefined(L)){this.$p=new Map;var cF=L;var cG=new ss.ObjectEnumerator(cF);try{while(cG.moveNext()){var cH=cG.current();var cI=cH.value;this.$p.set(cH.key,tab.VisualColumnIterator.create(cI))}}finally{cG.dispose()}if(!cD&&!cE){this.$p.set('text_run_x',this.$p.get('text_run_x_remote'));this.$p.set('text_run_y',this.$p.get('text_run_y_remote'))}}if(ss.isValue(cC)){this.$q=this.$4(cC,!cD)}},$1:function(L){var cC=new Map;var cD=null;if(!this.isWrappedDomain){cC.set(0,new Set);return new k(cC,cD)}var cE=L.length;cD=new Array(cE);for(var cF=0;cF<cE;cF++){var cG=L[cF];if(ss.isNullOrUndefined(cG)){continue}cD[cF]=this.getWorldInstanceOffsets(cG.x+this.paneRect.x,cG.x+cG.w+this.paneRect.x);var cH=cD[cF];for(var cI=0;cI<cH.length;cI++){var cJ=cH[cI];if(!cC.has(cJ)){cC.set(cJ,new Set);for(var cK=0;cK<this.markCount;cK++){cC.get(cJ).add(cK)}}cC.get(cJ).delete(cF)}}var cL=new k(cC,cD);return cL},$8:function(){this.scaleMarksInX=tab.SceneDataUtil.isPaneFlagSet(this.$n,'enable-scale-x');this.scaleMarksInY=tab.SceneDataUtil.isPaneFlagSet(this.$n,'enable-scale-y');this.useCellClipForSelection=tab.SceneDataUtil.isPaneFlagSet(this.$n,'clip-to-cell-for-selection');this.paneHasCellsX=tab.SceneDataUtil.isPaneFlagSet(this.$n,'has-cells-x');this.paneHasCellsY=tab.SceneDataUtil.isPaneFlagSet(this.$n,'has-cells-y')},$2:function(L){var cC=this.c.get('tuple_id');var cD=[cC.v[(cC.c?0:L)]];var cE=this.sceneInfo.computeTupleStates(tab.VisualColumnIterator.create(cD));return cE[0]}});bE.$ctor1.prototype=bE.prototype;ss.initClass(bF,a,{drawReferenceLineAndTrendLineGroup:function(L,cC,cD,cE,cF){var cG=false;var cH=null;var cI=null;var cJ=null;for(var cK=0;cK<L.length;cK++){var cL=L[cK];var cM=cL.type==='draw-fill-rect'||cL.type==='draw-text';var cN=cC==='hover'||cC==='selected';var cO=true;if(cM&&cN){var cP=tab.ColorModel.fromColorCode(cD.get_shapeFillStyle());if(cP.get_a()<1){if(cC==='hover'){continue}cO=false}}var cQ=cL.type==='draw-pen'||cL.type==='draw-solid-brush'||cL.type==='draw-text-props';if(cE||cQ){if((cQ||!cO)&&cG){cD.set_strokeStyle(cH.toString());cD.set_shapeFillStyle(cI.toString());cD.set_textFillStyle(cJ.toString());cG=false}if((ss.isValue(cF)||cC!=='normal')&&!cG&&!cQ&&cO){cH=tab.ColorModel.fromColorCode(cD.get_strokeStyle());cI=tab.ColorModel.fromColorCode(cD.get_shapeFillStyle());cJ=tab.ColorModel.fromColorCode(cD.get_textFillStyle());var cR=bF.$0(cH,cC,cL.type,cF);var cS=bF.$0(cI,cC,cL.type,cF);var cT=bF.$0(cJ,cC,cL.type,cF);cG=!ss.referenceEquals(cR,cH.toString())||!ss.referenceEquals(cS,cI.toString())||!ss.referenceEquals(cT,cJ.toString());if(cG){cD.set_strokeStyle(cR);cD.set_shapeFillStyle(cS);cD.set_textFillStyle(cT)}}this.renderVisualParts(cD,cL)}}if(cG){cD.set_strokeStyle(cH.toString());cD.set_shapeFillStyle(cI.toString());cD.set_textFillStyle(cJ.toString())}},renderScene:function(L){if(ss.isNullOrUndefined(L)){throw new ss.ArgumentNullException('paneTableVm','Cant render a null scene')}this.$w=L.get_scene();var cC=this.$w.scene;if(!ss.isValue(cC)){return}this.$u.setRenderOffsetNoTranslate(this.get_renderOffset());var cD=this.get_currentContext().get_numberSavedStates();var cE=L.get_mapServerModel().get_useFastMaps();if(!cE){this.$t(L.get_vizRegionMap(),L.get_drawFirstParts())}var cF=tab.RectXYUtil.offsetRect(this.get_currentContext().dirtyRect,this.get_renderOffset());var cG=3;cF=tab.RectXYUtil.outsetRect(cF,cG,cG);this.$w.prepareForDraw(cF);var cH=(ss.isValue(this.$w.get_runtimeData())?this.$w.get_runtimeData().get_annexedData().Panes:null);this.$m(cH,cE);this.$w.cleanupFromDraw();this.$t(L.get_vizRegionMap(),L.get_drawLastParts());while(this.get_currentContext().get_numberSavedStates()>cD){this.get_currentContext().restore()}},renderViewportBorders:function(L){if(ss.isNullOrUndefined(L)){throw new ss.ArgumentNullException('paneTableVm','Cant render a null scene')}this.$w=L.get_scene();var cC=this.$w.scene;if(ss.isNullOrUndefined(cC)){return}var cD=null;var cE=L.get_scene().get_runtimeData();if(cE===Object(cE)){cD=this.$b(L.get_scene().get_runtimeData().get_panes())}if(ss.isNullOrUndefined(cD)){return}var cF=[];var cG=this.get_currentCanvas().width-1;var cH=this.get_currentCanvas().height-1;var cI={x:0,y:0};var cJ={x:cG,y:0};var cK={x:0,y:cH};var cL={x:cG,y:cH};var cM=false;var cN=false;for(var cO=0;cO<cD.drawItems.length;cO++){var cP=cD.drawItems[cO];if(cP.type==='clip-rect'||cP.type==='transform'){continue}if(cP.type==='draw-polyline'){var cQ=tab.MiscUtil.cloneObject(cP);if(cQ.points[1]===cQ.points[3]){if(cM){bF.$1(cQ.points,cK,cL)}else{bF.$1(cQ.points,cI,cJ)}cM=true}else{if(cN){bF.$1(cQ.points,cJ,cL)}else{bF.$1(cQ.points,cI,cK)}cN=true}cF.push(cQ)}else{cF.push(cP)}}this.get_currentContext().save();this.$f(cF,null,'pane-borders');this.get_currentContext().restore()},renderAxisRulers:function(L,cC,cD){var cE=L.get_vizRegionMap()['axis-rules'];if(ss.isValue(cE)){var cF=function(cN,cO){var cP={type:'draw-polyline',points:new Array(4)};bF.$1(cP.points,cN,cO);return cP};var cG=tab.RenderUtil.calculatePixelRatio();var cH=this.get_currentCanvas().height-1;var cI=[];var cJ=cE.get_visualListPM().drawItems;for(var cK=0;cK<cJ.length;cK++){var cL=cJ[cK];if(cL.type==='draw-pen'){cI.push(cL)}else if(cL.type==='draw-polyline'){var cM=cL;if(cM.points[0]===cM.points[2]){cI.push(cF({x:0,y:-cD.y},{x:0,y:Math.round(cG*cC.h)-cD.y}))}else if(cM.points[1]===cM.points[3]){cI.push(cF({x:-cD.x,y:cH},{x:Math.round(cG*cC.w)-cD.x,y:cH}))}}}this.get_currentContext().save();this.$f(cI,null,'axis-rules');this.get_currentContext().restore()}},$b:function(L){for(var cC=0;cC<L.length;cC++){var cD=L[cC];for(var cE=0;cE<cD.drawPane.length;cE++){var cF=cD.drawPane[cE];if(cF.visualPart==='pane-borders'){return cF}}}return null},$t:function(L,cC){if(tab.MiscUtil.isNullOrEmpty$2(L)||ss.getKeyCount(L)===0){return}for(var cD=0;cD<cC.length;cD++){var cE=cC[cD];var cF=L[cE];if(!ss.contains(bN.blackListVisualParts,cE)&&cE!=='axis-rules'){if(ss.isValue(cF)){this.get_currentContext().save();var cG=this.$w.get_imageDictionary();this.$u.renderVisualListHelper(cF,cG);this.get_currentContext().restore()}}}},$r:function(L,cC){if(!ss.isValue(L)){return}this.get_currentContext().save();this.$f(L.drawItems,cC,L.visualPart);this.get_currentContext().restore()},$m:function(L,cC){if(!ss.isValue(L)){return}var cD=this.$9(L);if(!cC){this.$e(cD)}if(ss.isValue(this.$w.get_runtimeData().get_finalDataStore().GridLines)){this.$g(cD)}this.startCachingVisibleRect();this.$j(cD);this.stopCachingVisibleRect();this.$s(cD,'foreground')},$e:function(L){var cC=['background','decoration','ref-bands','cell-borders','misc'];for(var cD=0;cD<cC.length;cD++){var cE=cC[cD];for(var cF=0;cF<L.length;cF++){var cG=L[cF];var cH=cG.item1;var cI=cG.item2;var cJ=cH.DrawPanes;for(var cK=0;cK<cJ.length;cK++){var cL=cJ[cK];var cM=cL;var cN=tab.EnumConversions.visualPartFromInt(cM[0]);var cO=cN===cE;if(!cO&&cE==='misc'){cO=this.$a(cN)==='background'&&cC.indexOf(cN)<0}if(cO){var cP=tab.RuntimeUtil.visualListFromDrawPane(cL);this.$r(cP,cI)}}if(cE==='ref-bands'){this.$o(cI)}}}},$g:function(L){var cC=new Q(this.get_currentCanvas(),this.get_currentContext());for(var cD=0;cD<L.length;cD++){var cE=L[cD];var cF=cE.item1;var cG=cE.item2;var cH=cF.DrawPanes;for(var cI=0;cI<cH.length;cI++){var cJ=cH[cI];var cK=cJ;var cL=tab.EnumConversions.visualPartFromInt(cK[0]);if(cL==='decoration'){if(ss.isValue(cG)){cC.renderGridLines(this.$w.get_runtimeData().get_finalDataStore(),cG)}}}}},$s:function(L,cC){for(var cD=0;cD<L.length;cD++){var cE=L[cD];var cF=cE.item1;var cG=cE.item2;var cH=cF.DrawPanes;for(var cI=0;cI<cH.length;cI++){var cJ=cH[cI];var cK=cJ;var cL=tab.EnumConversions.visualPartFromInt(cK[0]);if(cC===this.$a(cL)){var cM=tab.RuntimeUtil.visualListFromDrawPane(cJ);this.$r(cM,cG)}}}},$o:function(L){if(ss.isValue(this.$w)&&ss.isValue(this.$w.get_referenceLines())){if(ss.isValue(L)){var cC=this.$w.get_referenceLines().getRefBands(L.get_paneDescriptorKey());this.$v.setRenderOffsetNoTranslate(this.get_renderOffset());for(var cD=0;cD<cC.length;cD++){var cE=cC[cD];this.$v.renderReferenceLines(cE,L,'normalUnderPass','background')}}}},$9:function(L){var cC=[];for(var cD=0;cD<L.length;cD++){var cE=L[cD];if(this.$c(cE)){cC.push({item1:cE,item2:this.$w.getPaneDrawInfoAssociatedWithPane(cE)})}}return cC},$j:function(L){for(var cC=0;cC<bF.$5.length;cC++){var cD=bF.$5[cC];for(var cE=0;cE<bF.$4.length;cE++){var cF=bF.$4[cE];for(var cG=0;cG<L.length;cG++){var cH=L[cG];var cI=cH.item1;var cJ=cH.item2;if(ss.isNullOrUndefined(cJ)){continue}if(cF==='marks'||cF==='label'){this.$i(cI.DrawPanes,cJ,cD,cF)}else{this.$p(cJ,cD,cF);this.$n(cI.PredictionMarks,cJ,cD,cF)}}}}},$f:function(L,cC,cD){if(!ss.isValue(L)){return}var cE=this.$w.get_imageDictionary();if(cD!=='ref-lines'&&cD!=='ref-bands'&&cD!=='trend-lines'){var cF=null;if(cD==='decoration'){if(ss.isValue(cC)){cF=cC.mapExtents}}this.$u.renderDrawItems(L,null,cE,cF)}else{var cG=this.$w.selections.refLineSelection;var cH=!cG.isEmpty;var cI=this.$w.selections.trendLineSelection;var cJ=!cI.isEmpty;var cK=this.$w.brushings.trendLineSelection;var cL=null;for(var cM=0;cM<L.length;cM++){var cN=L[cM];if(cN.type==='draw-group'){var cO=cN;var cP=false;var cQ=false;switch(cD){case'ref-lines':{cP=cG.isObjectSelected(cO.objectId);cQ=!cP&&(cH||cJ);break}case'ref-bands':{cQ=(cH||cJ)&&!cG.isObjectSelected(cO.objectId);break}case'trend-lines':{if(cO.objectId>2147483647){if(!cK.isEmpty){continue}cP=false;cQ=false}else{cP=cI.isObjectSelected(cO.objectId);cQ=!cP&&!cK.isObjectSelected(cO.objectId)&&(this.$w.get_hasBrushing()||this.$w.get_hasSelection())}break}}var cR=(cP?'selected':'normal');if(cQ&&ss.isNullOrUndefined(cL)){if(ss.isValue(cC)&&ss.isValue(cC.fogBlendFactor)&&ss.isValue(cC.foggedBackgroundColor)){cL={item1:cC.fogBlendFactor,item2:cC.foggedBackgroundColor}}else{var cS=tab.ColorModel.fromColorCode('rgba(255,255,255,255)');var cT=tab.SceneDataUtil.getFogBlendFactor(cS);var cU=tab.SceneDataUtil.applyFogToBackgroundColor(cS,cT);cL={item1:cT,item2:cU}}}this.drawReferenceLineAndTrendLineGroup(cO.drawItems,cR,this.get_currentContext(),true,(cQ?cL:null))}else{this.renderVisualParts(this.get_currentContext(),cN)}}}},renderVisualParts:function(L,cC){this.$u.renderDrawItemDefaultOptions(L,cC)},$c:function(L){return this.isRectVisible({x:L.Rect[0],y:L.Rect[1],w:L.Rect[2],h:L.Rect[3]})},$q:function(L,cC,cD,cE,cF,cG){this.get_currentContext().save();if(!L.skipClipping){this.get_currentContext().setClip(cG)}this.get_currentContext().translate(L.paneRect.x,L.paneRect.y);cF(L,cC,cD,cE);this.get_currentContext().restore()},$d:function(L,cC,cD){if(L.markCount===0){return}var cE=new bC(this.get_currentCanvas(),this.get_currentContext());cE.setRenderOffsetNoTranslate(this.get_renderOffset());if(!L.hasUserPanes){this.$q(L,0,cE,cC,cD,L.get_mapExtentOrPaneRect());return}var cF=L.userPaneCount;var cG=L.paneRect.x;var cH=L.paneRect.y;for(var cI=0;cI<cF;++cI){var cJ=L.getUserPaneRectByIndex(cI);cJ=tab.RectXYUtil.offsetRectXY(cJ,cG,cH);var cK=L.getUserPaneMarkCount(cI);if(cK>0&&this.isRectVisible(cJ)){this.$q(L,cI,cE,cC,cD,cJ)}}},$i:function(L,cC,cD,cE){for(var cF=0;cF<L.length;cF++){var cG=L[cF];var cH=cG;var cI=tab.EnumConversions.visualPartFromInt(cH[0]);if(cI==='marks'){if(cE==='marks'){this.$l(cC,cD);break}else if(cE==='label'){if(cC.get_hasLabels()){this.$k(cC,cD);break}}}}},$l:function(L,cC){this.$d(L,cC,ss.mkdel(this,this.$h))},$k:function(L,cC){this.$d(L,cC,function(cD,cE,cF,cG){cF.renderMarkLabels(cD,cE,cG)})},$h:function(L,cC,cD,cE){var cF=L.markType;switch(cF){case'shape':{{cD.renderShapeMark(L,cC,cE)}break}case'square':case'bar':{{cD.renderBarMark(L,cC,cE)}break}case'pie':{{cD.renderPieMark(L,cC,cE)}break}case'line':{{cD.renderLineMark(L,cC,cE)}break}case'area':{{cD.renderAreaMark(L,cC,cE)}break}case'text':{{cD.renderTextMarks(L,cC,cE)}break}case'multipolygon':{{cD.renderMultipolygonMark(L,cC,cE)}break}default:{break}}},$a:function(L){switch(L){case'background':case'decoration':case'ref-bands':case'cell-borders':{return'background'}case'mark-trails':case'marks':case'mark-labels':{return'marks'}case'borders':case'trend-lines':case'ref-lines':case'pane-borders':case'annotations':case'axis-rules':{return'foreground'}}return'background'},$p:function(L,cC,cD){if(ss.isValue(this.$w)&&ss.isValue(this.$w.get_referenceLines())){var cE=this.$w.get_referenceLines().getRefLines(L.get_paneDescriptorKey());for(var cF=0;cF<cE.length;cF++){var cG=cE[cF];this.$v.setRenderOffsetNoTranslate(this.get_renderOffset());this.$v.renderReferenceLines(cG,L,cC,cD)}}},$n:function(L,cC,cD,cE){if(!ss.isNullOrUndefined(L)){for(var cF=0;cF<L.length;cF++){var cG=L[cF];var cH=tab.RuntimeUtil.renderNodeFromPredictionMark(cG);switch(cH.type){case'prediction-band':{var cI=new bC(this.get_currentCanvas(),this.get_currentContext());cI.setRenderOffsetNoTranslate(this.get_renderOffset());cI.renderPredictionBand(cC,cD,cH,cE);break}case'prediction-whisker':{var cJ=new bC(this.get_currentCanvas(),this.get_currentContext());cJ.setRenderOffsetNoTranslate(this.get_renderOffset());cJ.renderPredictionWhisker(cC,cD,cH,cE);break}}}}}},tab.CanvasRenderer);ss.initClass(bG,a,{get_paneTableVM:function(){return this.get_viewModel()},get_paneTableRenderer:function(){return this.renderer},get_isContentOpaque:function(){return!this.get_paneTableVM().get_mapServerModel().get_useFastMaps()},get_backgroundFillColor:function(){return this.get_paneTableVM().get_visualModel().get_backgroundColor()},performRender:function(){var L={};L['viz']=this.get_paneTableVM().get_sheetId();{var cC=tabBootstrap.MetricsController.createContext('RNDRPT'.toString(),4,L);try{this.renderer.clear();this.get_paneTableRenderer().renderScene(this.get_paneTableVM())}finally{if(ss.isValue(cC)){cC.dispose()}}}},onViewModelPropertyChanged:function(L,cC){if(cC.get_propertyName()==='borderHighlight'){return}var cD=this.get_paneTableVM().getAndClearInvalidationRects();if(cD.length===0){this.invalidate(false)}else{var cE=tab.RectXYUtil.unionAll(cD);var cF=3;tab.RectXYUtil.outsetRectInPlace(cE,cF,cF);tab.RectXYUtil.offsetRectXYInPlace(cE,-this.get_scrollPos().x,-this.get_scrollPos().y);this.invalidateRect(cE,false)}},postRenderFinalPass:function(){this.get_paneTableRenderer().renderViewportBorders(this.get_paneTableVM());this.get_paneTableRenderer().renderAxisRulers(this.get_paneTableVM(),this.get_docSize(),this.get_scrollPos())}},ss.makeGenericType(ct,[bN]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[bN]),spiff.IScrollable,bh]);ss.initClass(bH,a,{update:function(L){var cC=ss.isValue(this.$0)&&_.isEqual(L,this.$0);if(!cC){this.$0=L}return cC},clear:function(){this.$0=null}});ss.initClass(bI,a,{get_regionGeometry:function(){return this.$1$1},set_regionGeometry:function(L){this.$1$1=L},get_visibleGeometry:function(){return this.$1$2},set_visibleGeometry:function(L){this.$1$2=L},get_geometryWithRegions:function(){return this.$1$3},set_geometryWithRegions:function(L){this.$1$3=L}});ss.initClass(bJ,a,{});ss.initClass(bK,a,{get_paneTableVM:function(){return this.get_viewModel()},get_lastTargetState:function(){return this.$Q},get_backgroundFillColor:function(){return this.get_paneTableVM().get_visualModel().get_backgroundColor()},clearOverlays:function(){this.$u();this.$v();this.$t();this.$o();this.$V=false},hoverOverWhitespace:function(){this.$N=false},setScrollPosition:function(L){this.set_scrollPos(L);this.$K=[];this.invalidate(true)},setDragOverlayTuples:function(L){this.$u();this.$v();this.$o();if(this.$V){return}this.$R=L;var cC=bK.$0(this.$L,L);var cD=cC.length;if(cD>0){var cE=this.get_paneTableVM().get_scene();var cF=[];for(var cG=0;cG<cD;cG++){var cH=cC[cG];var cI=this.$x(cH,cE);cF.push(cI)}var cJ=this.$W.get_shapeSelector();this.$U=cJ.retrieveStateObject(this.$U);var cK=cJ.getStateDiff(this.$U);var cL=cK.length;var cM=new Set;var cN=new Array(cL);for(var cO=0;cO<cL;cO++){var cP=cK[cO];var cQ={x:0,y:0,w:0,h:0};for(var cR=0;cR<cD;cR++){if(cM.has(cR)){continue}var cS=cF[cR];if(tab.RectXYUtil.intersectsWithAny(cP,cS)){cQ=tab.RectXYUtil.union(tab.RectXYUtil.unionAll(cS),cQ);cM.add(cR)}}cN[cO]=(tab.RectXYUtil.isEmpty(cQ)?cQ:tab.RectXYUtil.outsetRect(cQ,3,3))}cN=tab.RectXYUtil.reduceRectangles(cN);this.$K=cN;if(bK.$1){this.invalidate(false)}var cT=tab.RectXYUtil.unionAll(cN);cT=tab.RectXYUtil.offsetRect(cT,{x:-this.get_scrollPos().x,y:-this.get_scrollPos().y});this.invalidateRect(cT,true)}else{this.$K=[];this.clearDirty();this.$R=null}},setHoverOverlayTarget:function(L,cC){this.$Q='hover';if(!this.$O.$1(L,cC)){this.$N=false}if(this.$O.$2(L,cC)||ss.isValue(this.$L)&&this.$L.length>0){return false}this.$p();var cD=this.$y(L,cC);this.$z(cD);this.$O.$3(L,cC,cD);this.$E();return true},setPressedOverlayTarget:function(L,cC){this.$N=true;this.$Q='press';if(this.$S.$2(L,cC)){return false}this.$p();var cD=this.$y(L,cC);this.$z(cD);this.$S.$3(L,cC,cD);this.$E();return true},$D:function(L,cC){if(cC.get_propertyName()==='scene'){this.$J()}},performRender:function(){var L=tabBootstrap.MetricsController.createContext('Render Overlay Panetable',32,null);{if(this.$K.length>0||ss.isValue(this.$L)&&this.$L.length>0){this.$F()}else{this.renderer.clear();var cC=tab.RectXYUtil.offsetRect(this.get_dirtyRect(),{x:this.get_scrollPos().x,y:this.get_scrollPos().y});if(this.$O.$4()){if(this.$O.$8==='mark'){var cD=this.get_paneTableVM().get_scene().getPaneDrawInfoFromTupleId(this.$O.$5());if(!ss.isNullOrUndefined(cD)){this.$q(this.$O.$5(),cD,cC);bF.renderHoverOverlay(this.$O.$5(),cD,this.context)}}else{this.$H(this.$O);this.$I(this.$O)}}else if(this.$S.$4()){if(this.$S.$8==='mark'){var cE=this.get_paneTableVM().get_scene().getPaneDrawInfoFromTupleId(this.$S.$5());if(!ss.isNullOrUndefined(cE)){this.$q(this.$S.$5(),cE,cC);bF.renderPressedOverlay(this.$S.$5(),cE,this.context)}}else{this.$H(this.$S);this.$I(this.$S)}}}}L.dispose()},$s:function(L,cC,cD){var cE=tab.RectXYUtil.offsetRectXY(L,cC.paneRect.x,cC.paneRect.y);var cF=cC.mapExtents;if(ss.isValue(cF)){tab.RectXYUtil.intersectInPlace(cE,cF)}tab.RectXYUtil.intersectInPlace(cE,cD);this.context.setClip(cE);this.context.translate(cC.paneRect.x,cC.paneRect.y)},$q:function(L,cC,cD){var cE=cC.getUserPaneRectByTupleId(L);this.$s(cE,cC,cD)},$r:function(L,cC,cD){var cE=cC.getUserPaneRectByIndex(L);this.$s(cE,cC,cD)},$F:function(){var L=75;var cC=(new Date).getTime();if(ss.isNullOrUndefined(this.$R)){this.$R=this.$L}if(this.$K.length===0){var cD={x:this.get_scrollPos().x,y:this.get_scrollPos().y,w:this.get_effectiveViewSize().w,h:this.get_effectiveViewSize().h};this.$K.push(cD)}if(this.$R.length===0){this.renderer.clear();return}if(bK.$1){this.renderer.clear()}var cE={};var cF={};var cG={};var cH=this.get_paneTableVM().get_scene();for(var cI=0;cI<this.$R.length;cI++){var cJ=this.$R[cI];var cK=cH.getPaneDrawInfoFromTupleId(cJ);var cL=cK.paneDrawInfoKey;cE[cL]=ss.coalesce(cE[cL],new Set);cE[cL].add(cJ);cF[cL]=cK;var cM=cH.getMarkBoundingBox(cJ);var cN=cK.getWorldOffsetBounds(cM);cG[cJ]=cN}var cO=0;var cP=this.$K.length;for(var cQ=0;cQ<cP;cQ++){var cR=this.$K[cQ];this.context.clearRect(cR.x,cR.y,cR.w,cR.h);if(bK.$1){this.context.set_strokeStyle('rgb(255,0,0)');this.context.strokeRect(cR.x,cR.y,cR.w,cR.h)}var cS=new ss.ObjectEnumerator(cE);try{while(cS.moveNext()){var cT=cS.current();var cU=cF[cT.key];var cV=tab.RectXYUtil.intersect(cR,cU.get_mapExtentOrPaneRect());if(tab.RectXYUtil.isEmpty(cV)){continue}var cW=false;var cX=cU.hasUserPanes;var cY=-1;var cZ=false;var da=tab.SetUtilities.getValues(ss.Int32).call(null,cT.value);for(var db=0;db<da.length;db++){var dc=da[db];if(cO>=L){if((new Date).getTime()-cC>145){cZ=true;break}cO=0}++cO;if(!tab.RectXYUtil.intersectsWithAny(cV,cG[dc])){continue}var dd=0;if(cX){dd=cU.getUserPaneIndexByMark(cU.getMarkIndexFromTupleId(dc));if(dd!==cY){if(cW){this.context.restore();cW=false}cY=dd}}if(!cW){this.context.save();this.$r(dd,cU,cR);cW=true}bF.renderHoverOverlay(dc,cU,this.context)}if(cW){this.context.restore()}if(cZ){this.$V=true;this.renderer.clear();return}}}finally{cS.dispose()}}},$I:function(L){var cC=[];if(L.$7()==='hover'&&tsConfig.is_authoring){switch(L.$8){case'ref-line':{cC=this.get_paneTableVM().get_refLineVisualLists();break}case'trend-line':{cC=this.get_paneTableVM().get_trendLineVisualLists();break}}}for(var cD=0;cD<cC.length;cD++){var cE=cC[cD];var cF=[];ss.arrayAddRange(cF,cE.drawItems);this.$G(cF,L)}},$H:function(L){if(L.$8==='semantic-ref-line'&&L.$7()==='hover'&&tsConfig.is_authoring){var cC=this.get_paneTableVM().get_scene().get_referenceLines().getRefLineById(L.$5());var cD=this.$w();for(var cE=0;cE<cD.length;cE++){var cF=cD[cE];for(var cG=0;cG<cC.length;cG++){var cH=cC[cG];this.$T.renderReferenceLines(cH,cF,'selectedOnPass','underLabel')}}}},$w:function(){var L=[];var cC=this.get_paneTableVM().get_scene().get_runtimeData().safeFetchMarkPanes();for(var cD=0;cD<cC.length;cD++){var cE=cC[cD];var cF=this.get_paneTableVM().get_scene().getPaneDrawInfoAssociatedWithPane(cE);if(ss.isValue(cF)){L.push(cF)}}return L},$G:function(L,cC){var cD=cC.$7();var cE=cC.$5();this.context.save();var cF=this.renderer;var cG=ss.getEnumerator(L);try{while(cG.moveNext()){var cH=cG.current();if(cH.type==='draw-group'){var cI=cH;var cJ=true;if(this.$N){switch(cC.$8){case'ref-line':{cJ=!this.get_paneTableVM().get_scene().selections.refLineSelection.isObjectSelected(cI.objectId);break}case'trend-line':{cJ=!this.get_paneTableVM().get_scene().selections.trendLineSelection.isObjectSelected(cI.objectId);break}}}if(cJ){cF.drawReferenceLineAndTrendLineGroup(cI.drawItems,cD,this.context,cE===cI.objectId,null)}}else{cF.renderVisualParts(this.context,cH)}}}finally{cG.dispose()}this.context.restore()},postRenderFinalPass:function(){},redrawFinished:function(){this.$L=this.$R;this.$R=null;this.$W.get_shapeSelector().updateLastState(this.$U);this.$K=[];if(this.$V){this.$t()}},$E:function(){if(this.$M||tab.MiscUtil.isNullOrEmpty$1(this.$P)){this.$M=false;this.invalidate(true)}else{var L=tab.RectXYUtil.unionAll(this.$P);ss.clear(this.$P);var cC={x:-this.get_scrollPos().x,y:-this.get_scrollPos().y};L=tab.RectXYUtil.offsetRect(L,cC);L=tab.RectXYUtil.outsetRect(L,3,3);this.invalidateRect(L,true)}},$o:function(){if(this.$M||!tab.MiscUtil.isNullOrEmpty$1(this.$P)){this.$E()}},$J:function(){if(!this.$A(this.$O)){this.$O.$0()}if(!this.$A(this.$S)){this.$S.$0()}if(ss.isValue(this.$L)){var L=new Set;for(var cC=0;cC<this.$L.length;cC++){var cD=this.$L[cC];if(this.$B(cD)){L.add(cD)}}this.$L=tab.SetUtilities.getValues(ss.Int32).call(null,L)}},$A:function(L){if(!L.$4()){return false}switch(L.$8){case'mark':{return this.$B(L.$5())}case'ref-line':{return this.$C(this.get_paneTableVM().get_refLineVisualLists(),L.$5())}case'trend-line':{return this.$C(this.get_paneTableVM().get_trendLineVisualLists(),L.$5())}case'unspecified':default:{return false}}},$B:function(L){var cC=this.get_paneTableVM().get_visualModel().get_vizDataModel();var cD=this.get_paneTableVM().get_scene();return ss.isValue(cC)&&cC.hasTupleId(L)&&!cD.isMarkFiltered(L)},$C:function(L,cC){for(var cD=0;cD<L.length;cD++){var cE=L[cD];var cF=cE.drawItems;for(var cG=0;cG<cF.length;cG++){var cH=cF[cG];if(cH.objectId===cC){return true}}}return false},$p:function(){this.$u();this.$v();this.$t()},$y:function(L,cC){if(cC==='mark'){return this.$x(L)}else{return null}},$z:function(L){if(ss.isNullOrUndefined(L)){this.$M=true;ss.clear(this.$P);return}for(var cC=0;cC<L.length;cC++){var cD=L[cC];this.$P.push(cD)}},$x:function(L,cC){cC=cC||this.get_paneTableVM().get_scene();var cD=cC.getMarkBoundingBox(L);var cE=this.get_paneTableVM().get_scene().getPaneDrawInfoFromTupleId(L);var cF=cE.getWorldOffsetBounds(cD);return cF},$u:function(){if(this.$O.$4()){this.$z(this.$O.$6());this.$O.$0()}},$v:function(){if(this.$S.$4()){this.$z(this.$O.$6());this.$S.$0()}},$t:function(){if(ss.isValue(this.$L)){var L=this.get_paneTableVM().get_scene();for(var cC=0;cC<this.$L.length;cC++){var cD=this.$L[cC];ss.arrayAddRange(this.$P,this.$x(cD,L))}this.$L=null}this.$R=null;this.$K=[];this.$U=null}},ss.makeGenericType(ct,[bN]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[bN]),spiff.IScrollable,bh]);ss.initClass(bL,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(bM,a,{get_zoomToolbarContainerDiv:function(){return this.dom.view.get(0)},get_isMapSearchEnabled:function(){return this.get_paneTableVM().get_mapSearchEnabled()},get_shouldEnableZoomHomeToolbar:function(){return this.get_paneTableVM().shouldEnableZoomHomeToolbar()},get_geometryBundle:function(){return this.$3$1},set_geometryBundle:function(L){this.$3$1=L},get_geometry:function(){return this.get_geometryBundle().get_geometryWithRegions()},get_visibleGeometry:function(){return this.get_geometryBundle().get_visibleGeometry()},get_vizHitTestDebouncer:function(){return this.$3$2},set_vizHitTestDebouncer:function(L){this.$3$2=L},get_sortIndicators:function(){return this.get_paneTableVM().get_sortIndicators()},get_axisRegions:function(){return this.get_paneTableVM().get_axisRegions()},get_tableViewPosition:function(){return tab.PointUtil.fromPosition(this.dom.domRoot.offset())},get_sheetid:function(){return this.get_paneTableVM().get_sheetId()},get_session:function(){return this.get_controller().get_viewSession()},get_numColumns:function(){return(ss.isValue(this.get_geometry())?this.get_geometry().pi.xWidths.length:0)},get_numRows:function(){return(ss.isValue(this.get_geometry())?this.get_geometry().pi.yHeights.length:0)},get_paneSize:function(){var L=((this.get_numColumns()>0)?this.get_geometry().pi.xWidths[0]:0);var cC=((this.get_numRows()>0)?this.get_geometry().pi.yHeights[0]:0);return{w:L,h:cC}},get_scrollPosition:function(){return this.$10},set_scrollPosition:function(L){this.$10=L;this.$t(this.$10);this.$G()},get_controller:function(){var L=this.get_paneTableVM();var cC=L.get_viewController();return cC},get_visualId:function(){return this.get_paneTableVM().get_visualId()},get_isSameVisualID:function(){return ss.referenceEquals(this.get_visualId(),this.vizTooltip.get_visualIDPresModel())},get_paneTableVM:function(){return this.get_viewModel()},get_vizToolTip:function(){this.$d();return this.vizTooltip},get_tooltipMode:function(){return this.get_paneTableVM().get_visualModel().get_tooltipMode()},get_mapToolSelectionMode:function(){return this.get_paneTableVM().get_visualModel().get_defaultMapTool()},get_isTooltipAllowed:function(){return ss.isNullOrUndefined(tsConfig.allow_tooltip)||tsConfig.allow_tooltip},get_vizRegion:function(){return this.regions['viz']},set_vizRegion:function(L){this.regions['viz']=L},get_vizRegionDomNode:function(){return this.dom.view.children().first()},get_zoomToolbarOffset:null,get_zoomToolbarOperations:null,get_shouldDisablePanTool:function(){return this.get_paneTableVM().get_visualModel().get_vizNavigationSetting()==='fixed'},get_shouldShowTools:function(){var L=this.get_paneTableVM().get_visualModel().get_floatingToolbarVisibility()==='show'||this.get_paneTableVM().get_visualModel().get_floatingToolbarVisibility()==='auto'&&this.allowPanZoomActions();return L},get_geometryArgCache:function(){return this.$P},init:function(){this.$l();this.makeConnections();this.makeRegions();this.initEventHandlers();this.makeRegionContentProviders();if(tab.FeatureFlags.isEnabled('ReferenceLineDragDrop')){this.set_vizHitTestDebouncer(tab.MiscUtil.dispose$1(this.get_vizHitTestDebouncer()));if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.set_vizHitTestDebouncer(new bo(this,this.get_vizRegion(),this.get_paneTableVM().get_localRenderVizHitTester()))}else{this.set_vizHitTestDebouncer(new bZ(this,this.get_vizRegion()))}}},dispose:function(){this.$Q=true;if(ss.isValue(this.get_vizHitTestDebouncer())){this.get_vizHitTestDebouncer().dispose()}this.destroyInputHandlers();this.destroyRegions();this.disposables.dispose();this.disposeOfOverlays();if(ss.isValue(this.get_paneTableVM())){this.get_paneTableVM().remove_vizRegionMapChange(ss.mkdel(this,this.$I))}this.floatingZoomToolbarView.dispose();if(ss.isValue(this.$13)){this.$13.dispose()}if(ss.isValue(this.$N)){this.$N.dispose()}if(ss.isValue(this.$U)){this.$U.dispose()}if(ss.isValue(this.$V)){this.$V.dispose()}if(ss.isValue(this.vizTooltip)){this.vizTooltip.remove_tooltipClosed(ss.mkdel(this,this.onTooltipClosed));this.vizTooltip.remove_ubertipUpdated(ss.mkdel(this,this.maybeShowOverlayImages));this.vizTooltip.remove_ubertipCommandExecuted(ss.mkdel(this,this.onCommandExecuted));this.vizTooltip.remove_ubertipActionExecuted(ss.mkdel(this,this.onActionExecuted));this.vizTooltip.dispose()}if(ss.isValue(this.$X)){this.get_paneTableVM().remove_propertyChanged(ss.mkdel(this.$X,this.$X.$D));this.$X.dispose()}if(ss.isValue(this.mapsSearchView)){this.mapsSearchView.dispose()}ss.makeGenericType(spiff.BaseView$1,[tab.IPaneTableViewModel]).prototype.dispose.call(this)},$e:function(L,cC,cD){if(L.moveNext()&&!ss.staticEquals(L.current(),null)){L.current()(this,cC).done(ss.mkdel(this,function(cE){if(cE){cD.resolve(true);return}this.$e(L,cC,cD)}))}else{cD.resolve(false)}},initEventHandlers:function(){this.$9();this.makeInputHandlers();this.setupDrilling();this.setupSortIndicators();this.setupAxisContextMenuIndicator();this.refreshScrollingAndAxisIcons()},callAsyncVizDragHandlers:function(L,cC){var cD=$.Deferred();if(tab.FeatureFlags.isEnabled('ReferenceLineDragDrop')){this.$e(ss.getEnumerator(bM.$4),L,cD)}else{cD.resolve(false)}cD.done(ss.mkdel(this,function(cE){if(cE){this.get_vizToolTip().close();return}cC(L)}))},callVizDragHandlers:function(L,cC){if(tab.FeatureFlags.isEnabled('ReferenceLineDragDrop')){for(var cD=0;cD<bM.$8.length;cD++){if(bM.$8[cD](this,L)){this.get_vizToolTip().close();return}}}cC(L)},getVizDragApproval:function(L){if(ss.isValue(L)){for(var cC=0;cC<bM.$7.length;cC++){if(bM.$7[cC](L)){return true}}}return false},zoomHome:function(){tab.PanZoomCommands.requestRestoreFixedAxes(this.get_visualId());if(ss.isValue(this.mapsSearchView)){this.get_paneTableVM().get_mapsSearchViewModel().collapseSearchWidget();this.get_paneTableVM().get_mapsSearchViewModel().restoreInitialTextInputValue()}},doTiledViewerRefreshImages:function(L){this.refreshImages(L)},setPointerToolMode:function(L,cC){this.isPointerToolLocked=cC;if(this.isPointerToolLocked){this.get_paneTableVM().get_vizRegionToolModeViewModel().setLockedPointerToolMode(L)}this.get_paneTableVM().get_vizRegionToolModeViewModel().setPointerToolMode(L)},defaultPointerToolMode:function(){if(ss.isValue(this.get_vizRegion())){return this.get_paneTableVM().get_vizRegionToolModeViewModel().defaultPointerToolMode}return'rectangular-selection'},resetPointerToolMode:function(){var L=this.floatingZoomToolbarView.resetPointerToolbarMode();if(!L&&ss.isValue(this.get_vizRegion())){this.get_paneTableVM().get_vizRegionToolModeViewModel().resetPointerToolMode()}},connectTooltipEventHandlers:function(){var L=this.get_vizToolTip();L.add_tooltipClosed(ss.mkdel(this,this.onTooltipClosed));L.add_ubertipUpdated(ss.mkdel(this,this.maybeShowOverlayImages));L.add_ubertipCommandExecuted(ss.mkdel(this,this.onCommandExecuted));L.add_ubertipActionExecuted(ss.mkdel(this,this.onActionExecuted))},updateRegionBackgroundColor:function(){var L=this.get_paneTableVM().get_visualModel();var cC=[L.get_backgroundColor().toString(),L.get_paneBGColor(),L.get_headerBGColor()];if(ss.isValue(this.$L)&&_.isEqual(this.$L,cC)){return}this.$L=cC;var cD=!tab.ApplicationModel.get_instance().get_isLocalRenderMode();for(var cE=0;cE<bO.contentRegions.length;cE++){var cF=bO.contentRegions[cE];var cG=this.regionParts.getSelectorForRegion(cF);if(ss.isNullOrUndefined(cG)){continue}var cH=bM.$1(cC,cF);cG.css('background-color',cH);if(cD){var cI=$('.tvimagesContainer',cG);cI.css('background-color',cH)}}this.$D(cC[2])},$D:function(L){for(var cC=0;cC<bO.spacerRegions.length;cC++){var cD=bO.spacerRegions[cC];this.regionParts.getSelectorForRegion(cD).css('background-color',L)}},$k:function(L,cC){for(var cD=0;cD<bO.nonVizContentRegions.length;cD++){var cE=bO.nonVizContentRegions[cD];var cF=this.regionParts.getSelectorForRegion(cE);var cG=this.makeTiledWindow(cF,this.get_session(),this.get_controller(),ss.mkdel(this,this.$g),null);this.regions[cE].set_contentProvider(cG)}this.get_vizRegion().set_contentProvider(this.makeTiledWindow(L,this.get_session(),this.get_controller(),ss.mkdel(this,this.$g),cC))},makeRegionContentProvidersHelper:function(L,cC){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.get_paneTableVM().add_vizRegionMapChange(ss.mkdel(this,this.$I));var cD='transparent';var cE=new bG(this.get_paneTableVM(),this.getDomNodeForContentRegion(L),cD);var cF=$('.tvimagesContainer',L);cF.get(0).appendChild(cE.element.get(0));this.get_vizRegion().set_contentProvider(cE);this.$I();this.$X=this.makePaneTableOverlayView(this.getDomNodeForContentRegion(L));this.get_paneTableVM().add_propertyChanged(ss.mkdel(this.$X,this.$X.$D));cF.get(0).appendChild(this.$X.element.get(0))}else{this.$k(L,cC)}this.updateRegionBackgroundColor()},makePaneTableOverlayView:function(L){return new bK(this.get_paneTableVM(),L,this.get_vizRegion())},makeTiledWindowHelper:function(L,cC,cD,cE,cF,cG){var cH=new cj(this.getDomNodeForContentRegion(L),cC,cD,cE,cG);if(ss.isValue(cF)){cH.add_loadComplete(cF);this.disposables.add$1(new tab.CallOnDispose(function(){cH.remove_loadComplete(cF)}))}return cH},destroyRegions:function(){var L=ss.getEnumerator(Object.keys(this.regions));try{while(L.moveNext()){var cC=L.current();if(ss.isValue(this.regions[cC])){this.regions[cC].destroy()}}}finally{L.dispose()}},checkForHoverOverlay:null,isUserDragging:null,onTooltipClosed:function(){},$y:function(L){if(ss.keyExists(L.commandParams,'tupleId')){var cC=parseInt(L.commandParams['tupleId'].toString(),10);var cD=this.get_paneTableVM().get_scene().getPaneDrawInfoFromTupleId(cC);if(ss.isNullOrUndefined(cD)){return false}}if(ss.keyExists(L.commandParams,'selection')){var cE=L.commandParams['selection'];if(ss.isValue(cE)){try{var cF=JSON.parse(cE);if(cF.selectionType==='tuples'){for(var cG=0;cG<cF.objectIds.length;cG++){var cH=cF.objectIds[cG];var cI=this.get_paneTableVM().get_scene().getPaneDrawInfoFromTupleId(cH);if(ss.isNullOrUndefined(cI)){return false}}}}catch(cJ){return false}}}return true},onCommandExecuted:function(L,cC){if(ss.isNullOrUndefined(cC)||ss.isNullOrUndefined(cC.command)){return}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&ss.isValue(cC.command.command)&&!this.$y(cC.command.command)){return}if(cC.command.get_commandType()===7){this.get_session().executeCommand(cC.command)}else{tab.UberTipClientCommands.executeUbertipCommand(cC.command)}},onActionExecuted:function(L,cC){if(ss.isNullOrUndefined(cC)||ss.isNullOrUndefined(cC.action)){return}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&ss.isValue(cC.action.command)&&!this.$y(cC.action.command)){return}var cD=function(){L.hideSpinner()};var cE=function(cF){L.hideSpinner()};this.get_session().executeAction(cC.action,cE,cD)},doDoubleTap:function(L,cC,cD){if(!tsConfig.allow_filter){return}if(L.get_regionPart()!=='viz'||!this.allowPanZoomActionsOnDoubleTap()){return}if(this.get_paneTableVM().get_isMapWithBaseLayer()&&!L.allowMapZoomAtCurrentLevel(cD)){return}this.get_controller().incrementCacheVersion();var cE=tab.DeferLayoutImpl.get_instance();cE.setDeferLayoutUpdates(true);var cF=this.resolvePane(L.toLocalCoordsEvent(cC,false));L.zoomPoint(cF,L.toLocalCoordsEvent(cC,false),cD,true,cE);this.get_vizToolTip().close();this.disposeOfOverlays()},$o:function(L,cC){if(!ss.referenceEquals(L,this.get_controller().get_sheetName())){return}this.checkForHoverOverlay();if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.get_vizRegion().reset()}},dragOverride:function(L,cC){if(this.isUserDragging()){return}this.callVizDragHandlers(L,cC)},dragOverrideAsync:function(L,cC){if(this.isUserDragging()){return}this.callAsyncVizDragHandlers(L,cC)},clearSelection:function(){this.get_paneTableVM().clearAnnotationSelection();tab.SelectionClientCommands.clearAllSelections(this.get_visualId())},refreshImages:function(L){this.$Z+=1;var cC=ss.getEnumerator(Object.keys(this.regions));try{while(cC.moveNext()){var cD=cC.current();this.regions[cD].refreshImages(L)}}finally{cC.dispose()}this.$O.$0(L,this.get_session(),this.$g())},$w:function(L,cC){var cD=0;if(ss.isValue(L.title)&&this.dom.title.css('display')!=='none'){var cE=this.$13.minSizeHint();var cF={l:0,t:L.title.y,w:Math.max(L.title.w+cC.get_scrollWidth(),cE.w),h:Math.max(L.title.h,cE.h)};this.titleHeight=cF.h;var cG=tab.DomUtil.getMarginBoxJQ(this.dom.title);if(!_.isEqual(cF,cG)){tab.DomUtil.setAbsolutePositionBox(this.dom.title,cF);this.$13.handleNewTextRegion();cD=L.title.h+L.title.y}}return cD},$r:function(L,cC){var cD=0;if(ss.isValue(this.$N)&&this.dom.caption.css('display')!=='none'){var cE;if(ss.isValue(L.caption)){cD=L.caption.h+8+cC.get_scrollHeight();cE={l:L.caption.x,t:L.caption.y-cC.get_heightScrollOffset(),w:L.caption.w,h:L.caption.h}}else{cE={l:0,t:0,w:0,h:0}}var cF=tab.DomUtil.getMarginBoxJQ(this.dom.caption);if(!_.isEqual(cE,cF)){tab.DomUtil.setAbsolutePositionBox(this.dom.caption,cE);this.$N.handleNewTextRegion()}}return cD},updateGeometry:function(){this.$O.$1();this.$Z+=1;var L=this.get_geometryBundle().get_regionGeometry();var cC=this.get_geometryBundle().get_visibleGeometry();var cD=this.get_geometryBundle().get_geometryWithRegions();this.titleHeight=0;var cE=L.get_overallHeight();var cF=this.$w(cD,L);cE=Math.max(cE,cF);var cG=this.$r(cD,L);cE-=cG;this.$u(cC,cD);this.setGeometryForWebScrollbars(L,cE);this.refreshScrollingAndAxisIcons();this.setRegionResizersForWeb();this.refreshTooltipIfNeeded()},$u:function(L,cC){var cD=null;if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var cE=this.get_paneTableVM().get_vizRegionMap()['background'];if(ss.isValue(cE)){cD=cE.get_visualListPM().drawItems}}this.$s(L.uleftArea,cD,this.dom.topLeftSpacer,'uleft');if(ss.isValue(cC.uleft)){this.tlspacerAreaY=$.extend({},L.uleftArea);if(ss.isValue(cC.di)&&cC.uleft.h>=40){this.tlspacerAreaY.t=cC.uleft.y+cC.uleft.h-40;this.tlspacerAreaY.h=40}this.tlspacerAreaX=null;if(ss.isValue(cC.di)&&ss.isValue(cC.di.xy)&&ss.isValue(cC.di.xy[0])){var cF=18;var cG=cC.xheader;if(ss.isValue(cG)&&cG.h>cC.di.xs){var cH=cC.di.xy.length;for(var cI=0;cI<cH;cI++){if(cC.di.xy[cI][1]>0){this.tlspacerAreaX={l:this.tlspacerAreaY.l+this.tlspacerAreaY.w-cF,t:cC.uleft.y,w:cF,h:cC.uleft.h};this.tlspacerAreaY.w=this.tlspacerAreaX.l;break}}}}}else{this.tlspacerAreaY=null;this.tlspacerAreaX=null}this.$v(cC.yheader,this.dom.yLabel,'yheader',cC.ts,L.yheaderArea);this.$v(cC.leftaxis,this.dom.leftAxis,'leftaxis',cC.ts,L.leftaxisArea);this.$v(cC.rightaxis,this.dom.rightAxis,'rightaxis',cC.ts,L.rightaxisArea);this.$v(cC.xheader,this.dom.xLabel,'xheader',cC.ts,L.xheaderArea);this.$v(cC.bottomaxis,this.dom.bottomAxis,'bottomaxis',cC.ts,L.bottomaxisArea);this.$v(cC.topaxis,this.dom.topAxis,'topaxis',cC.ts,L.topaxisArea);this.$s(L.urightArea,cD,this.dom.topRightSpacer,'uright');this.$s(L.lleftArea,cD,this.dom.bottomLeftSpacer,'lleft');this.blspacerArea=L.lleftArea;this.$s(L.lrightArea,cD,this.dom.bottomRightSpacer,'lright');this.$v(cC.viz,this.dom.view,'viz',cC.ts,L.vizArea)},$s:function(L,cC,cD,cE){if(ss.isValue(L)){tab.DomUtil.setAbsolutePositionBox(cD,L);this.setRegionGeometryHelper(cD,L);cD.show();this.$O.$2(cD,cE,cC)}else{cD.hide()}},$v:function(L,cC,cD,cE,cF){if(ss.isValue(L)){tab.DomUtil.setAbsolutePositionBox(cC,cF);this.setRegionGeometryHelper(cC,cF);cC.show();this.regions[cD].setGeometry(L,cF,cE);if(cD==='viz'&&ss.isValue(this.$X)){this.$X.set_actualViewSize({w:cF.w,h:cF.h});this.$X.reset(L,cE)}}else{cC.hide()}},resolvePane:function(L){var cC=this.get_geometry().pi;var cD={canDragH:cC.hasXQAxis,canDragV:cC.hasYQAxis,x:0,y:0,w:0,h:0};bM.$2(L.x,cC.xWidths,cD);bM.$3(L.y,cC.yHeights,cD);return cD},allowPanZoomActions:null,allowPanZoomActionsOnDoubleTap:null,isVizLargerThanScreen:function(){if(ss.isValue(this.get_geometry())&&ss.isValue(this.get_geometry().viz)){var L=this.get_geometry().viz.w;var cC=this.get_geometry().viz.h;var cD=this.get_vizRegion();var cE=cD.get_contentProvider();var cF=cE.get_effectiveViewSize().w;var cG=cE.get_effectiveViewSize().h;return L>cF||cC>cG}return false},isOneVisiblePane:function(){if(ss.isValue(this.get_geometry())&&ss.isValue(this.get_geometry().viz)){var L,cC;var cD=this.get_geometry().viz.w;var cE=this.get_geometry().viz.h;var cF=this.get_geometry().pi.xWidths;var cG=this.get_geometry().pi.yHeights;cC=cF.length;for(L=0;L<cC;L++){if(Math.abs(cD-cF[L])>1){return false}}cC=cG.length;for(L=0;L<cC;L++){if(Math.abs(cE-cG[L])>1){return false}}}return true},maybeShowOverlayImages:null,createOverlayImageFromDataUri:function(L){var cC=new tab.OverlayImage(this.dom.view.find('.tvimagesContainer').get(0),'data:image/png;base64,'+L);return cC},createOverlayImageFromFile:function(L){var cC=new tab.OverlayImage(this.dom.view.find('.tvimagesContainer').get(0),this.get_session().formatSessionTempfileReference(L,false,false));return cC},updateOverlayTarget:function(L,cC,cD){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return}switch(cC){case'press':{this.$X.setPressedOverlayTarget(L,cD);break}case'hover':{this.$X.setHoverOverlayTarget(L,cD);break}default:{break}}},updateOverlayForLastTargetState:function(L,cC){this.updateOverlayTarget(L,this.$X.get_lastTargetState(),cC)},hoverOverWhitespace:function(){this.$X.hoverOverWhitespace()},updateHoveredCategoricalHeadersAndQuantitativeAxes:function(L,cC,cD){var cE=this.get_paneTableVM().get_vizRegionMap()[cD];if(ss.isNullOrUndefined(cE)){return}switch(cC){case'press':{cE.set_hoveredNodeOrAxis(null);break}case'hover':{cE.set_hoveredNodeOrAxis(L);break}default:{break}}},showOverlayImages:function(L,cC){if(ss.isValue(cC)&&ss.isValue(L)&&cC.length>0){this.disposeOfOverlayImages();for(var cD=1;cD<cC.length;++cD){var cE=L.clone();this.$W.push(cE);cE.show(cC[cD])}this.$W.push(L);L.show(cC[0])}},setRegionGeometryHelper:null,getDomNodeForContentRegion:null,clickTitle:function(L){},clickCaption:function(L){},makeConnections:function(){},makeMapsSearchViewConnections:null,makeRegions:null,makeInputHandlers:null,makeRegionContentProviders:null,setupDrilling:function(){},refreshScrollingAndAxisIcons:null,refreshTooltipIfNeeded:function(){},setupSortIndicators:function(){},setupAxisContextMenuIndicator:function(){},destroyInputHandlers:null,setGeometryForWebScrollbars:function(L,cC){},setRegionResizersForWeb:function(){},makeTooltipLegacyMode:null,makeTooltip:function(){if(this.get_isTooltipAllowed()&&this.get_tooltipMode()==='smooth'){return new cm(this.get_paneTableVM().get_tooltipContextProvider(),this.get_visualId(),this.dom.view,true)}else if(this.get_isTooltipAllowed()&&this.get_tooltipMode()==='sticky'){return this.makeTooltipLegacyMode(this.get_paneTableVM().get_tooltipContextProvider())}else{return new cl(this.get_paneTableVM().get_tooltipContextProvider(),this.get_visualId())}},onHoverOverlay:function(L,cC){if(this.isUserDragging()){return}if(this.wasPressOverlayJustUpdated){this.wasPressOverlayJustUpdated=false;return}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&L.get_regionPart()==='viz'){if(!this.isAnimationOccurring&&(L.get_toolModeViewModel().get_isSelectingToolActive()||!L.get_isDragTracking()&&L.get_toolModeViewModel().get_currentPointerToolMode()==='pan-map')){var cD=L.toLocalCoordsEvent(cC,false);var cE={x:cC.pageX,y:cC.pageY};this.lastVizHoverPoint=cD;if(this.get_vizToolTip().isHoverAllowed(cE)){this.hitTestAndSetHoverOverMarkOrVisualPartHelper(true)}}else{this.lastVizHoverPoint=null}}},hitTestAndSetHoverOverMarkOrVisualPartHelper:function(L){var cC=this.get_vizRegion();var cD=this.get_paneTableVM().get_localRenderVizHitTester().onHoverHitTest(this.lastVizHoverPoint);this.onHoverOverVisualPart(cC,cD.get_hitType()!==0);if(cD.get_hitType()===0){this.hoverOverWhitespace()}if(cD.get_shouldRenderOverlay()){if(!L){this.updateOverlayForLastTargetState(cD.get_id(),cD.get_overlayTargetType())}else{this.updateOverlayTarget(cD.get_id(),'hover',cD.get_overlayTargetType())}}else{this.disposeOfOverlayImages()}},onHoverOverVisualPart:null,$n:function(L,cC,cD,cE){this.$b();L.get_shapeSelector().setSingleSelectPoint(cC);var cF=this.get_vizRegion();var cG=this.get_paneTableVM().get_localRenderVizHitTester().onHoverHitTest(cC);var cH=cG.get_hitType()!==0;this.onHoverOverVisualPart(cF,cH);if(cH){switch(cG.get_hitObjectType()){case 7:case 8:{var cI=this.get_paneTableVM().get_scene().getMarkBoundingBox(cG.get_id());cC=bM.$0(cC,cI);var cJ=this.get_paneTableVM().get_visualModel().get_selectionsModel();var cK=cJ.tupleSelection.isObjectSelected(cG.get_id());var cL=this.get_paneTableVM().get_scene().getPaneDrawInfoFromTupleId(cG.get_id());var cM=cL.get_paneDescriptorKey();cD.hoverOverObject(cE,tab.PointUtil.add(cC,{x:this.get_geometry().viz.x,y:this.get_geometry().viz.y}),cC,cG.get_id(),cK,cM,'mark',L.get_regionPart());break}case 4:case 5:case 6:case 3:{this.$14=window.setTimeout(function(){cD.hoverOverCoordinates(cE,cC,'visualparts',L.get_regionPart(),null,null,false)},120);break}case 2:{if(cD.get_isTooltipShown()){cD.close()}break}default:{break}}}return cH},onHover:function(L,cC){if(this.isUserDragging()||this.get_paneTableVM().vizContextMenuOpened()){return}if(tab.BaseSession.get_waitHandler().isBusy()){return}var cD=this.get_vizToolTip();if(cD.get_isTooltipShown()&&cD.shownTooltipIsStatic()){return}var cE=L.toLocalCoordsEvent(cC,false);var cF=tab.PointUtil.add(cE,L.getLocalOffsetPoint(false));this.get_paneTableVM().handleAnnotationHover(cE);if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.$m(L,cD,cF,cE);return}var cG=false;var cH=this.getVisualListViewModelForRegion(L.get_regionPart());if(L.get_regionPart()==='viz'){cG=this.$n(L,cE,cD,cF)}else if(ss.isValue(cH)){var cI=cH.hitTestNodes(cE);if(ss.isValue(cI)){var cJ=tab.SelectionUtils.nodeSelectionFromDrawGroup(cI);var cK=tab.BrushingComputer.getTuplesAssociatedWithSelectedNodes(this.get_paneTableVM().get_visualModel(),[cJ]);cD.hoverOverHeader(cF,cE,'header',L.get_regionPart(),cK);cG=true}}if(!cG){cD.hoverOverWhitespace(cF,L.get_regionPart())}},$m:function(L,cC,cD,cE){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var cF=bM.guessTooltipTargetTypeFromRegion(L.get_regionPart());cC.hoverOverCoordinates(cD,cE,cF,L.get_regionPart(),null,null,false);return}},$b:function(){if(ss.isValue(this.$14)){window.clearTimeout(ss.unbox(this.$14));this.$14=null}},makeTiledWindow:null,shouldInformTooltipOfLocalTapOnViz:null,disposeOfOverlays:function(){this.disposeOfOverlayImages()},disposeOfOverlayImages:function(){for(var L=0;L<this.$W.length;L++){var cC=this.$W[L];if(ss.isValue(cC)){cC.dispose()}}ss.clear(this.$W);if(ss.isValue(this.$X)){this.$X.clearOverlays()}this.$Y=tab.MiscUtil.clearTimeout(this.$Y)},$t:function(L){if(ss.isValue(this.$X)){this.$X.setScrollPosition(L)}},checkForDragOverlays:function(){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(ss.isValue(this.$Y)){return}var L=(new Date).getTime()-this.$T;if(L>=30){this.$c()}else{this.$Y=window.setTimeout(ss.mkdel(this,this.$c),30-L)}}},$c:function(){this.$Y=null;var L=this.get_paneTableVM().get_localRenderVizHitTester().hitTestMarksAgainstSelectionShape(this.get_vizRegion().get_shapeSelector());var cC=Z.getIdsFromHitTestResults(L,true);this.$X.setDragOverlayTuples(cC);this.$T=(new Date).getTime()},updateRegionContentProvider:function(L,cC){this.regions[L].set_contentProvider(cC)},isSelectActionOnVizAllowed:function(L){return true},handleLocalTap:function(L,cC,cD,cE,cF,cG){var cH=false;if(this.isSelectActionOnVizAllowed(cC)){var cI=this.getVisualListViewModelForRegion(L.get_regionPart());if(L.get_regionPart()==='viz'){var cJ=ss.mkdel(this,function(cN){if(this.shouldInformTooltipOfLocalTapOnViz(cN,cG)){this.informTooltipOfLocalTapOnViz(cN,L,cD,cE)}});var cK=this.get_paneTableVM().get_localRenderVizHitTester().onTapHitTest(cE);bq.doSingleSelect(cK,cE,cC,cJ,cF,this.get_paneTableVM().get_visualId());cH=cK.get_hitType()!==0}else if(ss.isValue(cI)){var cL=cI.hitTestNodes(cE);if(ss.isValue(cL)){var cM=ss.mkdel(this,function(){this.get_vizToolTip().singleSelectCoordinates(cD,cE,L.get_regionPart(),'header',null)});cI.selectNode(cE,cL,cC,cM);cH=true}else{tab.SelectionClientCommands.clearAllSelections(this.get_visualId())}}if(!cH){this.get_vizToolTip().hoverOverWhitespace(cD,L.get_regionPart())}}},informTooltipOfLocalTapOnViz:function(L,cC,cD,cE){var cF=null;if(ss.isValue(this.get_paneTableVM())&&ss.isValue(this.get_paneTableVM().get_scene())&&L.get_tooltipTargetType()==='mark'){var cG=this.get_paneTableVM().get_scene().getPaneDrawInfoFromTupleId(L.get_id());if(ss.isValue(cG)){cF=cG.get_paneDescriptorKey()}}var cH=tab.ActionUtils.couldSheetFilterActionsModifyItself(this.get_visualId().worksheet)||tab.ActionUtils.couldSheetGroupActionsModifyItself(this.get_visualId().worksheet);var cI=!cH&&ss.isValue(cF)&&!ss.isNullOrUndefined(this.get_geometry().viz);if(!cI){this.get_vizToolTip().singleSelectCoordinates(cD,cE,cC.get_regionPart(),L.get_tooltipTargetType(),null)}else{this.get_vizToolTip().singleSelectComplete(cD,tab.PointUtil.add(cE,{x:this.get_geometry().viz.x,y:this.get_geometry().viz.y}),cE,L.get_id(),cF,L.get_tooltipTargetType(),cC.get_regionPart())}},$i:function(){this.$p()},$p:function(){var L=this.get_paneTableVM().get_visualModel();if(ss.isNullOrUndefined(L)){return}var cC=L.get_geometryModel().pm;this.$q(cC)},$q:function(L){f.$1(L,this.get_paneTableVM(),this.dom)},handleNewVisual:function(){if(this.get_paneTableVM().isInvalidSheet()){$('<div/>').text(tab.Strings.BaseClientInvalidSheet(this.get_paneTableVM().get_sheetId())).addClass('wcInvalidSheet').appendTo(this.get_template().domRoot).get(0);return}if(this.$Q){return}var L=this.get_paneTableVM().get_visualModel();if(ss.isNullOrUndefined(L)){return}this.$J(L);this.$C(L);this.$z();this.updateTooltipMode(L);var cC=L.get_geometryModel().pm;var cD=L.get_containerGeometry();var cE={containerBox:cD,geometry:cC};var cF=this.get_geometryArgCache().update(cE);if(cF){this.refreshScrollingAndAxisIcons()}else{this.set_geometryBundle(bJ.computeGeometry(cE));this.updateGeometry()}this.$K(L);this.floatingZoomToolbarView.setToolMode(this.defaultPointerToolMode(),true);this.updateRegionBackgroundColor();this.$B();this.$H();this.$F();this.$q(cC);this.$E(L);this.isAnimationOccurring=false;if(ss.isValue(this.get_paneTableVM().get_annotationSelectionChromeViewModel())){this.get_paneTableVM().updateAnnotationSelection()}},$K:function(L){this.updateMapsSearchView();if(L.get_isMap()&&this.get_shouldDisablePanTool()&&(this.get_paneTableVM().get_vizRegionToolModeViewModel().get_isPanToolActive()||this.get_paneTableVM().get_vizRegionToolModeViewModel().get_isZoomToolActive())){this.setPointerToolMode(L.get_defaultMapTool(),true)}this.get_paneTableVM().get_vizRegionToolModeViewModel().updateDefaultToolMode(this.allowPanZoomActions());this.floatingZoomToolbarView.updateZoomToolbar(L.get_floatingToolbarVisibility());if(tab.GestureModelSettings.get_newModelEnabled()){this.get_paneTableVM().get_floatingToolbarContainerVM().showTools(this.get_shouldShowTools());this.get_paneTableVM().get_floatingToolbarContainerVM().shouldEnablePanAndZoom(!this.get_shouldDisablePanTool());this.get_paneTableVM().get_floatingToolbarContainerVM().updateZoomHomeState(!this.get_paneTableVM().shouldEnableZoomHomeToolbar())}},updateMapsSearchView:function(){if(this.get_paneTableVM().get_mapSearchEnabled()){if(ss.isNullOrUndefined(this.get_paneTableVM().get_mapsSearchViewModel())||ss.isNullOrUndefined(this.mapsSearchView)){this.$a();this.buildMapsSearchView()}this.addMapsSearchViewToDomIfNeeded()}else{this.removeMapsSearchViewFromDomIfNeeded()}},$a:function(){this.get_paneTableVM().set_mapsSearchViewModel(new bz(this.get_paneTableVM().get_visualId()));this.get_paneTableVM().get_mapsSearchViewModel().add_onMoveMapToBounds(ss.mkdel(this,this.handleMoveMapToBounds));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_paneTableVM().get_mapsSearchViewModel().remove_onMoveMapToBounds(ss.mkdel(this,this.handleMoveMapToBounds))})))},buildMapsSearchView:function(){this.mapsSearchView=tab.ObjectRegistry.newView(by).call(null,[this.get_paneTableVM().get_mapsSearchViewModel()]);this.makeMapsSearchViewConnections();this.get_paneTableVM().get_mapsSearchViewModel().collapseSearchWidget();this.mapsSearchView.addClass('tabSuppressVizTooltipsAndOverlays')},addMapsSearchViewToDomIfNeeded:function(){if(!this.$S){this.mapsSearchView.addToDom(this.dom.view);this.$S=true}},removeMapsSearchViewFromDomIfNeeded:function(){if(ss.isValue(this.mapsSearchView)){if(this.$S){var L=this.mapsSearchView.element[0].parentNode;if(ss.isValue(L)){L.removeChild(this.mapsSearchView.element[0]);this.$S=false}}this.get_paneTableVM().get_mapsSearchViewModel().collapseSearchWidget();this.get_paneTableVM().get_mapsSearchViewModel().setVisible(false)}},handlePropertyChanged:function(L,cC){switch(cC.get_propertyName()){case'vizNavigationSetting':{this.$9();this.makeInputHandlers();break}case'borderHighlight':{this.dom.borders.toggleClass('tvBorderHighlight',this.get_paneTableVM().get_highlightBorder());break}case'images':{this.$p();break}default:{break}}},updateTooltipMode:function(L){if(ss.isValue(this.vizTooltip)&&L.get_tooltipMode()!==this.vizTooltip.get_currentTooltipMode()){this.vizTooltip.close();this.vizTooltip.dispose();this.vizTooltip=null}},$J:function(L){if(this.get_paneTableVM().get_hasTitle()){if(ss.isValue(this.$13)){return}this.dom.title.css('display','');var cC=new tab.TextRegionViewModel(L.get_titleModel());cC.options=new tab.TextRegionOptions(!tsConfig.is_authoring);var cD=cC;this.$13=new tab.TextRegionView(cD);this.$12='title'+this.$f();this.$13.element.attr('id',this.$12);this.$13.addToDom(this.dom.title)}else if(ss.isValue(this.$13)){this.dom.title.css('display','none');this.$13.get_viewModel().dispose();this.$13=null}},$E:function(L){if(tab.FeatureParamsLookup.getBool(53)){L.get_runtimeStatusView().addDebugViewToElement(this.dom.enclosingDiv)}},$C:function(L){if(this.get_paneTableVM().get_hasCaption()){if(ss.isValue(this.$N)){return}this.dom.caption.css('display','');var cC=new tab.TextRegionViewModel(L.get_captionModel());cC.options=new tab.TextRegionOptions(!tsConfig.is_authoring);var cD=cC;this.$N=new tab.TextRegionView(cD);this.$M='caption'+this.$f();this.$N.element.attr('id',this.$M);this.$N.addToDom(this.dom.caption)}else if(ss.isValue(this.$N)){this.dom.caption.css('display','none');this.$N.get_viewModel().dispose();this.$N=null;this.$M=''}},$A:function(){if(ss.isNullOrUndefined(this.$R)){var L='instructions'+this.$f();this.$R=$('<div/>').attr('id',L).css('display','none');this.$R.appendTo(this.dom.enclosingDiv)}var cC=tab.Strings.AccessibilityClearSelectionInstructions+' '+(bM.isViewDataAccessEnabled()?tab.Strings.AccessibilityViewDataInstructions:tab.Strings.AccessibilityViewDataDisabled);this.$R.text(cC)},$z:function(){this.dom.view.attr('tabindex','0').attr('role','img').attr('aria-describedby',ss.coalesce(this.$M,'')+' '+(ss.isValue(this.$R)?this.$R[0].id:''));if(this.get_paneTableVM().get_hasTitle()){this.dom.view.removeAttr('aria-label').attr('aria-labelledby',this.$12)}else{this.dom.view.removeAttr('aria-labelledby').attr('aria-label',tab.Strings.AccessibilityDataVisualizationTitleAttr)}},$x:function(){var L=this.dom.view;L.focus(ss.mkdel(this,function(cC){tab.SelectionClientCommands.setActiveZone(this.get_paneTableVM().get_zonePresModel().zoneId,null);this.$A()}));this.dom.domRoot.focus(ss.mkdel(this,function(cC){tab.SelectionClientCommands.setActiveZone(this.get_paneTableVM().get_zonePresModel().zoneId,null)}));L.keydown(ss.mkdel(this,function(cC){if(cC.which===13&&bM.isViewDataAccessEnabled()&&ss.referenceEquals(cC.target,cC.currentTarget)){cC.preventDefault();cC.stopPropagation();tab.ToolbarServerCommands.exportData()}else if(cC.which===27){cC.preventDefault();cC.stopPropagation();this.clearSelection()}}))},$f:function(){return tab.ModelUtils.findContentDashboard().getViewId(this.get_sheetid())},$h:function(){this.get_vizRegion().$4();this.get_vizRegion().$2(this.get_paneSize())},$B:function(){var L=this.get_paneTableVM().get_mapServerModel();var cC=L.get_hasPresModel()&&L.get_useFastMaps();this.get_vizRegion().$3(cC);this.get_vizRegion().$2(this.get_paneSize())},$H:function(){if(this.get_paneTableVM().get_isMap()){var L=ss.isNullOrUndefined(this.get_paneTableVM().get_mapScaleViewModel())||ss.isNullOrUndefined(this.$V);if(L&&ss.isValue(this.get_paneTableVM().get_mapServerModel())){this.get_paneTableVM().set_mapScaleViewModel(new tab.MapScaleViewModel(this.get_paneTableVM().get_mapServerModel().get_mapScaleInfoModel()));this.$V=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[tab.MapScaleViewModel,tab.MapScaleComponent,Object])).call(null,[this.get_paneTableVM().get_mapScaleViewModel()]);this.$V.addToDom(this.dom.view)}}else if(ss.isValue(this.$V)){this.$V.dispose();this.$V=null}},$F:function(){var L=this.get_paneTableVM().get_mapServerModel();if(ss.isValue(L)&&L.get_hasPresModel()&&L.get_isAttributionVisible()){if(ss.isNullOrUndefined(this.$U)){this.$U=new br;this.$U.attributionBackground.css('background-color',L.get_attributionBGColor());this.$U.attributionLink.text(L.get_attributionText());this.$U.attributionLink.css('color',L.get_attributionTextColor());this.$U.attributionLink.css('font-size',L.get_attributionTextSize());this.$U.attributionLink.attr('href',L.get_attributionUrl());this.$U.attributionLink.attr('target','_blank');this.dom.view.append(this.$U.domRoot);this.$G()}}else if(ss.isValue(this.$U)){this.$U.dispose();this.$U=null}},$G:function(){if(ss.isValue(this.$U)){var L=1;var cC=1;var cD=this.get_vizRegion().get_contentProvider().get_effectiveViewSize();var cE=this.get_vizRegion().get_contentProvider().get_docSize();var cF=Math.min(0,cD.h+this.$10.y-cE.h);cF+=L;var cG=Math.min(0,-this.$10.x);cG+=cC;this.$U.domRoot.css('bottom',cF+'px');this.$U.domRoot.css('left',cG+'px')}},$j:function(){var L=this.get_paneTableVM().get_tileCacheUrl();this.refreshImages(L)},$I:function(){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.get_vizRegion().$1();var L=ss.getEnumerator(Object.keys(this.get_paneTableVM().get_vizRegionMap()));try{while(L.moveNext()){var cC=L.current();var cD=tab.ModelUtils.visualPartToRegionMap[cC];if(ss.isValue(cD)&&ss.isValue(this.regions[cD])){var cE=ss.safeCast(this.regions[cD].get_contentProvider(),ce);if(!ss.isNullOrUndefined(cE)&&!ss.referenceEquals(cE.get_viewModel(),this.get_paneTableVM().get_vizRegionMap()[cC])){cE.destroy();cE=null}if(ss.isNullOrUndefined(cE)){var cF=this.regionParts.getSelectorForRegion(cD);if(ss.isValue(cF)){var cG=this.get_paneTableVM().get_vizRegionMap()[cC];var cH=new ce(cG,this.getDomNodeForContentRegion(cF),this.get_paneTableVM());cF.find('.tvimagesContainer').append(cH.element);this.updateRegionContentProvider(cD,cH);cH.invalidate(false);this.get_geometryArgCache().clear()}}else{this.regions[cD].$1()}}}}finally{L.dispose()}var cI=ss.getEnumerator(Object.keys(tab.ModelUtils.visualPartToRegionMap));try{while(cI.moveNext()){var cJ=cI.current();var cK=tab.ModelUtils.visualPartToRegionMap[cJ];if(!ss.keyExists(this.get_paneTableVM().get_vizRegionMap(),cJ)&&ss.isValue(this.regions[cK])){this.regions[cK].get_contentProvider().destroy();this.regions[cK].set_contentProvider(new C)}}}finally{cI.dispose()}}},$g:function(){return this.$11+'Z'+this.$Z},handleMoveMapToBounds:function(L){if(ss.isValue(this.get_vizRegion())&&(tab.FeatureParamsLookup.getBool(19)||tab.FeatureFlags.isEnabled('MapboxVector'))){this.get_vizRegion().moveMapToBounds(L)}},$9:function(){var L={tap:ss.mkdel(this,function(cF){cF.stopPropagation();cF.preventDefault();this.clearSelection()})};var cC=ss.mkdel(this,function(cF){this.disposables.add$1(new spiff.TableauEventHandler.$ctor1(cF.get(0),L))});for(var cD=0;cD<bO.regionsThatClearSelectionOnTap.length;cD++){var cE=bO.regionsThatClearSelectionOnTap[cD];cC(this.regionParts.getSelectorForRegion(cE))}},$l:function(){tab.ViewController.add_selectionChanged(ss.mkdel(this,this.$o));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.ViewController.remove_selectionChanged(ss.mkdel(this,this.$o))})))},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);var L=ss.mkdict(['top','0px','left','0px','right','0px','bottom','0px']);this.get_template().domRoot.css(L);this.handleNewVisual();if(this.get_paneTableVM().get_visualModel().get_isVisualValidAndUpToDate()){this.$j()}},checkForSuppressTooltipsAndOverlays:function(L){var cC=$(L);var cD=cC.hasClass('tabSuppressVizTooltipsAndOverlays')||cC.parents('.tabSuppressVizTooltipsAndOverlays').length>0;if(cD){this.disposeOfOverlayImages();var cE=this.get_vizToolTip();cE.clearTooltipWithFakeHover()}this.get_vizToolTip().suppress(cD)},$d:function(){if(ss.isNullOrUndefined(this.vizTooltip)||!this.get_isSameVisualID()){this.vizTooltip=this.makeTooltip();this.connectTooltipEventHandlers()}},getVisualListViewModelForRegion:function(L){var cC=tab.ModelUtils.regionToVisualPartMap[L];return this.get_paneTableVM().get_vizRegionMap()[cC]}},ss.makeGenericType(spiff.BaseView$1,[tab.IPaneTableViewModel]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[tab.IPaneTableViewModel]),tab.IPaneTableView,bk]);ss.initClass(bN,a,{add_vizRegionMapChange:function(L){this.$2$1=ss.delegateCombine(this.$2$1,L)},remove_vizRegionMapChange:function(L){this.$2$1=ss.delegateRemove(this.$2$1,L)},add_newPaneTable:function(L){this.$2$2=ss.delegateCombine(this.$2$2,L)},remove_newPaneTable:function(L){this.$2$2=ss.delegateRemove(this.$2$2,L)},add_textUpdated:function(L){this.$2$3=ss.delegateCombine(this.$2$3,L)},remove_textUpdated:function(L){this.$2$3=ss.delegateRemove(this.$2$3,L)},add_differentMarkBrushing:function(L){this.$2$4=ss.delegateCombine(this.$2$4,L)},remove_differentMarkBrushing:function(L){this.$2$4=ss.delegateRemove(this.$2$4,L)},add_differentMarkSelection:function(L){this.$2$5=ss.delegateCombine(this.$2$5,L)},remove_differentMarkSelection:function(L){this.$2$5=ss.delegateRemove(this.$2$5,L)},get_isMap:function(){return this.$D.get_isMap()},get_isMapWithBaseLayer:function(){return this.get_isMap()&&this.get_mapServerModel().get_hasPresModel()},get_mapSearchEnabled:function(){return tsConfig.allow_filter&&this.get_isMap()&&this.get_visualModel().get_geoSearchVisibility()==='on'&&!tab.ApplicationModel.get_instance().get_isOffline()},get_tooltipContextProvider:function(){return(tab.ApplicationModel.get_instance().get_isLocalRenderMode()?new tab.TooltipContextProvider(this.get_visualModel().get_selectionsModel()):null)},get_scene:function(){return this.$B},get_localRenderVizHitTester:function(){return this.$x},get_vizRegionMap:function(){return this.$G},get_refLineVisualLists:function(){return this.$r().get_refLineVisualLists()},get_trendLineVisualLists:function(){return this.$r().get_trendLineVisualLists()},get_drawFirstParts:function(){return this.$r().get_drawFirstParts()},get_drawLastParts:function(){return this.$r().get_drawLastParts()},get_zonePresModel:function(){return this.$D.get_zone().pm},get_viewController:function(){return this.$2$6},set_viewController:function(L){this.$2$6=L},get_sheetId:function(){return this.get_visualModel().get_worksheetName()},get_sortIndicators:function(){return this.$D.get_sortIndicatorsModel().get_sortIndicatorsPresModel()},get_axisRegions:function(){return this.$D.get_axisRegionModel()},get_selectionsModel:function(){return this.$D.get_selectionsModel()},get_tileCacheUrl:function(){return this.$D.get_tileCacheUrl()},get_hasTitle:function(){return this.get_zonePresModel().zoneCommon.hasTitle},get_hasCaption:function(){return this.get_zonePresModel().hasCaption},get_visualModel:function(){return this.$D},$r:function(){return this.$D.get_sceneModel()},get_visualId:function(){return this.$D.get_visualId()},get_mapServerModel:function(){return this.get_visualModel().get_mapServerModel()},get_vizContextMenuViewModel:function(){return this.$E},get_annotationSelectionChromeViewModel:function(){return this.$s},get_mapsSearchViewModel:function(){return this.$z},set_mapsSearchViewModel:function(L){this.$z=L},get_mapScaleViewModel:function(){return this.$y},set_mapScaleViewModel:function(L){this.$y=L},get_vizRegionToolModeViewModel:function(){return this.$F},get_floatingToolbarContainerVM:function(){return this.$2$7},set_floatingToolbarContainerVM:function(L){this.$2$7=L},get_smoothTooltipsOnboardingVM:function(){return this.$2$8},set_smoothTooltipsOnboardingVM:function(L){this.$2$8=L},get_highlightBorder:function(){return this.borderHighlighted},set_highlightBorder:function(L){if(this.borderHighlighted===L){return}this.borderHighlighted=L;this.notifyPropertyChanged('borderHighlight')},get_annotationDictionary:function(){var L={};var cC=this.get_visualModel().getAnnotationList();for(var cD=0;cD<cC.length;cD++){var cE=cC[cD];L[cE.annotationId]=cE}return L},$l:function(){var L=$.Deferred();this.deferredResizerFactory=L.promise();if(tsConfig.is_authoring&&(tab.FeatureFlags.isEnabled('WebAuthoringResizeHeaders')||tab.FeatureFlags.isEnabled('WebAuthoringResizeHeadersPhase2'))){tab.ModuleManager.load(tab.IResizeHeadersModule).call(null,[]).done(function(cC){L.resolve(cC)})}},$j:function(){if(tab.FeatureFlags.isEnabled('WebAuthoringResizeHeaders')&&tsConfig.is_authoring&&ss.isValue(this.$D.resizeInfoModel)){var L=$.Deferred();this.deferredHeaderResizerManagerViewModel=L.promise();this.deferredResizerFactory.done(ss.mkdel(this,function(cC){L.resolve(cC.newHeaderResizerManagerViewModel(this.$D.resizeInfoModel,this.$D.get_visualId()))}))}},$i:function(){if(tab.FeatureFlags.isEnabled('WebAuthoringResizeHeaders')&&tab.FeatureFlags.isEnabled('WebAuthoringResizeHeadersPhase2')&&tsConfig.is_authoring&&ss.isValue(this.$D.resizeInfoModel)){var L=$.Deferred();this.deferredCellResizerManagerViewModel=L.promise();this.deferredResizerFactory.done(ss.mkdel(this,function(cC){L.resolve(cC.newCellResizerManagerViewModel(this.$D.resizeInfoModel,this.$D.get_visualId()))}))}},$k:function(){if(tsConfig.is_authoring&&!tsConfig.is_mobile&&(tab.FeatureFlags.isEnabled('RichTextCreateBlankAreaAnnotation')||tab.FeatureFlags.isEnabled('RichTextCreateBlankPointAndMarkAnnotation')||tab.FeatureFlags.isEnabled('RichTextCreateAnnotationAndOpenEditor')||tab.FeatureFlags.isEnabled('RichTextDeleteAnnotation'))){this.$E=new cv(null)}},$h:function(){if(tsConfig.is_authoring&&tsConfig.current_sheet_type!=='story'&&!tsConfig.is_mobile&&(tab.FeatureFlags.isEnabled('RichTextSelectAnnotation')||tab.FeatureFlags.isEnabled('RichTextDeleteAnnotation'))){var L=ss.mkdel(this,function(){return this.get_annotationDictionary()});this.$s=new s(this.get_visualId(),L);this.$s.setContextMenuViewModel(this.$E);if(ss.isValue(this.get_vizRegionToolModeViewModel())){this.get_vizRegionToolModeViewModel().add_toolbarToolModeUpdated(ss.mkdel(this,this.$e));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_vizRegionToolModeViewModel().remove_toolbarToolModeUpdated(ss.mkdel(this,this.$e))})))}if(ss.isValue(this.$D.get_zone().get_dashboardModel())){this.$D.get_zone().get_dashboardModel().add_activeZoneChanged(ss.mkdel(this,function(){if(this.$D.get_zone().get_dashboardModel().get_activeZoneID()!==this.$D.get_zone().get_zoneId()&&this.$D.get_zone().get_dashboardModel().get_activeZoneID()!==0){this.$s.clearSelection()}}))}}},$e:function(L){if(L==='area-zoom'){this.clearAnnotationSelection()}},handleRightClick:function(L,cC){if(ss.isValue(this.$s)&&L.get_hitObjectType()===2){this.$s.handleRightClick(L,cC)}else if(tab.FeatureFlags.isEnabled('RichTextCreateBlankAreaAnnotation')||tab.FeatureFlags.isEnabled('RichTextCreateBlankPointAndMarkAnnotation')||tab.FeatureFlags.isEnabled('RichTextCreateAnnotationAndOpenEditor')){if(ss.isValue(this.$s)){this.$s.clearSelection()}var cD=new cu(L,cC,this.get_visualId());this.$E.show(cC,[cD])}},hideAnnotations:function(){if(ss.isValue(this.get_annotationSelectionChromeViewModel())){this.get_annotationSelectionChromeViewModel().hideAll()}},handleMouseWheelScroll:function(){if(this.$D.get_isMap()){this.hideAnnotations()}},handleAnnotationDragStarted:function(L){var cC=this.get_localRenderVizHitTester().onTapHitTest(L);if(this.get_vizRegionToolModeViewModel().get_isZoomToolActive()){this.hideAnnotations();return false}else if(ss.isValue(this.get_annotationSelectionChromeViewModel())){if(this.get_annotationSelectionChromeViewModel().dragStarted(cC,L)){return true}if(this.get_vizRegionToolModeViewModel().get_isPanToolActive()){this.hideAnnotations()}else{this.clearAnnotationSelection()}}return false},handleDrag:function(L){if(ss.isValue(this.get_annotationSelectionChromeViewModel())){this.get_annotationSelectionChromeViewModel().onDrag(L)}},handleDragEnded:function(L){if(ss.isValue(this.get_annotationSelectionChromeViewModel())){if(this.get_vizRegionToolModeViewModel().get_isZoomToolActive()){this.get_annotationSelectionChromeViewModel().hideAll()}this.get_annotationSelectionChromeViewModel().dragEnded(L)}},vizContextMenuOpened:function(){return ss.isValue(this.$E)&&!this.$E.isHidden||ss.isValue(this.get_annotationSelectionChromeViewModel())&&this.get_annotationSelectionChromeViewModel().isCaretMenuOpened()},canDeleteAnnotationWithKeystroke:function(){return ss.isValue(this.get_annotationSelectionChromeViewModel())&&tab.FeatureFlags.isEnabled('RichTextDeleteAnnotation')&&tab.FeatureFlags.isEnabled('RichTextSelectAnnotation')},isAnnotationDragging:function(){if(ss.isValue(this.get_annotationSelectionChromeViewModel())){return this.get_annotationSelectionChromeViewModel().isDragging()}return false},dispose:function(){if(ss.isValue(this.$z)){this.$z.dispose()}if(ss.isValue(this.$y)){this.$y.dispose()}if(ss.isValue(this.$E)){this.$E.dispose()}if(ss.isValue(this.$s)){this.$s.dispose()}if(ss.isValue(this.$D)){if(ss.isValue(this.$D.get_selectionsModel().tupleSelection)){this.$D.get_selectionsModel().remove_newSelections(ss.mkdel(this,this.$c))}this.$D.get_impliedSelectionModel().remove_newSelection(ss.mkdel(this,this.$c));if(ss.isValue(this.$D.get_brushingsModel().tupleSelection)){this.$D.get_brushingsModel().remove_newSelections(ss.mkdel(this,this.$3))}if(ss.isValue(this.$D.get_sceneModel())){this.$D.get_sceneModel().remove_newSceneModel(ss.mkdel(this,this.$b))}this.$D.remove_newHiddenTuples(ss.mkdel(this,this.$8));this.$D.remove_newFilteredTuples(ss.mkdel(this,this.$7));this.$D.remove_brushingFromActionChanged(ss.mkdel(this,this.$4));this.$D.remove_colorDictionaryChanged(ss.mkdel(this,this.$5));this.$D.remove_vizNavigationSettingChanged(ss.mkdel(this,this.$g));this.$D.remove_newVisual(ss.mkdel(this,this.$f));this.$D.remove_newVisual(ss.mkdel(this,this.$a));this.$D.remove_emptyHighlightFogAllChanged(ss.mkdel(this,this.$6));this.$u=tab.MiscUtil.dispose$1(this.$u)}var L=new ss.ObjectEnumerator(this.$G);try{while(L.moveNext()){var cC=L.current();cC.value.dispose()}}finally{L.dispose()}this.$F.dispose();this.get_floatingToolbarContainerVM().dispose();this.get_smoothTooltipsOnboardingVM().dispose();spiff.BaseViewModel.prototype.dispose.call(this)},getAndClearInvalidationRects:function(){var L=this.$w;this.$w=[];return L},handleAnnotationClicked:function(L){this.clearAnnotationSelection();tab.RichTextClientCommands.createAnnotationRichTextEditor(this.get_sheetId(),L);tab.FormattingTelemetryClient.logRichTextEditorEvent(['RichTextEditorOpenedBy','DoubleClick','RichTextEditorOpenedFrom','Annotation'])},handleAnnotationHover:function(L){if(ss.isValue(this.get_annotationSelectionChromeViewModel())&&!this.get_vizRegionToolModeViewModel().get_isZoomToolActive()){this.get_annotationSelectionChromeViewModel().onHover(this.get_localRenderVizHitTester().onHoverHitTest(L))}},$9:function(){this.notifyPropertyChanged('images')},$g:function(){this.notifyPropertyChanged('vizNavigationSetting')},$c:function(){var L=this.$D.get_selectionsModel().computeSelectionsDiff(this.$C,this.$v,this.$D.get_impliedSelectionModel());if(!ss.staticEquals(this.$2$5,null)&&bN.$1(L,this.$D.get_selectionsModel(),this.$D.get_impliedSelectionModel())){this.$2$5()}this.$C=this.$D.get_selectionsModel().createSelectionsToken();this.$v=this.$D.get_impliedSelectionModel().createSelectionToken();this.$p(L,'selection')},$3:function(){var L=this.$D.get_brushingsModel().computeSelectionsDiff(this.$t,null,null);if(!ss.staticEquals(this.$2$4,null)&&bN.$1(L,this.$D.get_brushingsModel(),null)){this.$2$4()}this.$t=this.$D.get_brushingsModel().createSelectionsToken();this.$B.setEmptyHighlightFogAll(this.$D.get_emptyHighlightFogAll());this.$p(L,'brushing')},$p:function(L,cC){if(!L.get_invalidateViz()){if(L.get_objectIds().length===0){return}var cD=this.$B.getMarksInvalidationRects(L.get_objectIds());this.$2(cD)}this.notifyPropertyChanged(cC)},$4:function(){this.$B.setIsTargetOfBrushingAction(this.$D.get_isBrushedFromAction());this.notifyPropertyChanged('brushing')},$6:function(){this.$B.setEmptyHighlightFogAll(this.$D.get_emptyHighlightFogAll());this.$A=true},$8:function(){var L=tab.SelectionsModel.computeTupleDictionaryDifference(this.$D.get_hiddenTuples(),this.$B.get_hiddenTuples());if(L.length===0){return}var cC=this.$B.getMarksInvalidationRects(L);this.$2(cC);this.$B.set_hiddenTuples(this.$D.get_hiddenTuples());this.$m()},$7:function(){var L=tab.SelectionsModel.computeTupleDictionaryDifference(this.$D.get_filteredTuples(),this.$B.get_filteredTuples());if(L.length===0){return}var cC=this.$B.getMarksInvalidationRects(L);this.$2(cC);this.$B.set_filteredTuples(this.$D.get_filteredTuples());this.$m()},$5:function(){this.$A=true},$2:function(L){ss.arrayAddRange(this.$w,L)},$d:function(){this.$m()},handleAnnotationSelection:function(L,cC,cD){this.handleAnnotationSelection$1(this.get_localRenderVizHitTester().onTapHitTest(L),cC,cD)},handleAnnotationSelection$1:function(L,cC,cD){if(ss.isNullOrUndefined(this.get_annotationSelectionChromeViewModel())||!tab.FeatureFlags.isEnabled('RichTextSelectAnnotation')){return}if(ss.isNullOrUndefined(L)||L.get_hitObjectType()!==2){this.clearAnnotationSelection()}else{this.get_annotationSelectionChromeViewModel().handleAnnotationClicked(L.get_id(),cD,cC==='toggle')}},deleteSelectedAnnotations:function(){if(ss.isNullOrUndefined(this.get_annotationSelectionChromeViewModel())){return}this.get_annotationSelectionChromeViewModel().deleteSelectedAnnotations()},clearAnnotationSelection:function(){if(ss.isNullOrUndefined(this.get_annotationSelectionChromeViewModel())){return}this.get_annotationSelectionChromeViewModel().clearSelection()},updateAnnotationSelection:function(){if(ss.isNullOrUndefined(this.get_annotationSelectionChromeViewModel())){return}this.get_annotationSelectionChromeViewModel().update()},scrollX:function(L){if(ss.isValue(this.get_annotationSelectionChromeViewModel())){this.get_annotationSelectionChromeViewModel().scrollX(L)}if(ss.isValue(this.get_vizContextMenuViewModel())){this.get_vizContextMenuViewModel().get_scrollOffset().x=L}},scrollY:function(L){if(ss.isValue(this.get_annotationSelectionChromeViewModel())){this.get_annotationSelectionChromeViewModel().scrollY(L)}if(ss.isValue(this.get_vizContextMenuViewModel())){this.get_vizContextMenuViewModel().get_scrollOffset().y=L}},updateGeometry:function(L){if(ss.isValue(this.get_annotationSelectionChromeViewModel())){this.get_annotationSelectionChromeViewModel().setBounds(L)}},$b:function(){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return}var L=false;var cC=ss.getEnumerator(Object.keys(this.$r().get_visualListModels()));try{while(cC.moveNext()){var cD=cC.current();var cE=this.$r().get_visualListModels()[cD];var cF=this.$G[cD];if(ss.isValue(cF)&&ss.referenceEquals(cF.get_visualList(),cE)){}else{tab.MiscUtil.dispose$1(this.$G[cD]);delete this.$G[cD];if(ss.contains(bN.blackListVisualParts,cD)){this.$G[cD]=new cp(cE,this.get_visualId(),tab.ModelUtils.visualPartToRegionMap[cD],this.$D.get_selectionsModel(),this.$D.get_brushingsModel())}else{this.$G[cD]=new cp(cE,this.get_visualId(),tab.ModelUtils.visualPartToRegionMap[cD],null,null)}L=true}}}finally{cC.dispose()}var cG=Object.keys(this.$G);var cH=ss.getEnumerator(cG);try{while(cH.moveNext()){var cI=cH.current();if(!ss.keyExists(this.$r().get_visualListModels(),cI)){tab.MiscUtil.dispose$1(this.$G[cI]);delete this.$G[cI];L=true}}}finally{cH.dispose()}var cJ=this.get_visualModel().get_backgroundColor().toString();var cK=ss.getEnumerator(Object.keys(this.$G));try{while(cK.moveNext()){var cL=cK.current();this.$G[cL].set_defaultBackgroundColor(cJ)}}finally{cK.dispose()}if(L){this.$o()}this.$A=true},$f:function(){if(this.$A){this.$q();this.$m()}this.$A=false},$o:function(){if(ss.isValue(this.$2$1)){this.$2$1()}},$q:function(){bN.updateSceneInfoFromVisualModel(this.$B,this.$D);if(this.$B.customShapes.length>0){this.$u=this.$u||new ca(ss.mkdel(this,function(){this.notifyPropertyChanged('images')}));this.$u.initialize(this.$B.customShapes)}if(ss.isValue(this.$D)&&ss.isValue(this.$D.pm)&&ss.isValue(this.$D.pm.imageDictionary)){this.$B.updateImageMap(this.$D.pm.imageDictionary,ss.mkdel(this,this.$9))}},$m:function(){this.$x.clearCache();this.notifyPropertyChanged('scene')},isInvalidSheet:function(){return _.any(this.$D.get_invalidSheets(),ss.mkdel(this,function(L){return _.isEqual(this.get_visualId(),L)}))},$a:function(){this.raiseActionEvent(this.$2$2)},shouldEnableZoomHomeToolbar:function(){return this.get_visualModel().get_hasModifiedAxes()},$n:function(){if(!ss.staticEquals(this.$2$3,null)){this.$2$3()}}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel,tab.IPaneTableViewModel]);ss.initClass(bO,a,{$0:function(){var L={};L['uleft']=this.$1.topLeftSpacer;L['uright']=this.$1.topRightSpacer;L['lleft']=this.$1.bottomLeftSpacer;L['lright']=this.$1.bottomRightSpacer;L['title']=this.$1.title;L['caption']=this.$1.caption;L['xheader']=this.$1.xLabel;L['yheader']=this.$1.yLabel;L['leftaxis']=this.$1.leftAxis;L['rightaxis']=this.$1.rightAxis;L['bottomaxis']=this.$1.bottomAxis;L['topaxis']=this.$1.topAxis;L['viz']=this.$1.view;return L},getSelectorForRegion:function(L){return this.$2[L]}});ss.initClass(bP,a,{get_hitTestingBox:function(){return((this.$k.length===0)?{x:0,y:0,w:0,h:0}:tab.RectXYUtil.nonemptyify(this.$g(true)))},get_autoScrollAdjustment:function(){return((tab.ApplicationModel.get_instance().get_isLocalRenderMode()||tsConfig.is_mobile)?this.get_autoScrollOffset():{x:0,y:0})},isSingleSelect:function(){return this.$k.length===0},$g:function(L){var cC=(L?this.$l:this.$k);var cD=cC[0].x;var cE=cD;var cF=cC[0].y;var cG=cF;for(var cH=0;cH<cC.length;cH++){var cI=cC[cH];if(cI.x<cD){cD=cI.x}else if(cI.x>cE){cE=cI.x}if(cI.y<cF){cF=cI.y}else if(cI.y>cG){cG=cI.y}}return{x:cD,y:cF,w:cE-cD,h:cG-cF}},updateSpecificShape:function(L){if(this.$k.length===0){var cC=this.get_dragStart().x-this.get_connectNodePos().x;var cD=this.get_dragStart().y-this.get_connectNodePos().y;this.$d(cC,cD)}var cE=L.x;var cF=L.y;this.$d(cE,cF)},renderShape:function(){if(ss.isNullOrEmptyString(this.$p)){return}this.get_dom().find('svg path').attr('d',this.$p);this.$i=tab.MiscUtil.clearTimeout(this.$i);this.$i=window.setTimeout(ss.mkdel(this,function(){this.$f()}),300);this.get_dom().css('display','')},$f:function(){this.$i=tab.MiscUtil.clearTimeout(this.$i);this.get_dom().find('svg path').attr('d',this.$p+'Z')},show:function(){this.$e();this.renderShape();this.get_dom().find('.selectionShape').show()},hide:function(){this.get_dom().find('.selectionShape').hide()},shapeAreaHit:function(L,cC,cD,cE){var cF=cD.get_objectId();var cG=cC.markType;var cH=W.rectangleAreaHit(cC,cD.get_boundingBox(),L,cF,cE,cG);if(!cH){return false}var cI=0;var cJ=0;if(cE.get_transformType()===3){cI=cE.get_translateX();cJ=cE.get_translateY()}var cK=this.$h(cI,cJ);return W.polyAreaHit(cC,cD.get_boundingBox(),cK,cF,cE,cG)},sendSelectionCommand:function(L,cC,cD,cE){tab.SelectionClientCommands.selectPolyRegionAndDoUbertip(L,this.get_hitTestingBox(),this.$l,cC,cD,cE)},retrieveStateObject:function(L){return(this.isStateObjectTypeCorrect(L)?L:new bQ)},saveCurrentState:function(L){if(this.isStateObjectTypeCorrect(L)){var cC=L;cC.saveCurrentState(this.$l)}},isStateObjectTypeCorrect:function(L){if(ss.isValue(L)){if(ss.referenceEquals(ss.getInstanceType(L),bQ)){return true}}return false},$e:function(){ss.clear(this.$k);ss.clear(this.$l);ss.clearKeys(this.$j);this.$p='';this.$n=null;this.$o=null},$d:function(L,cC){var cD=2;var cE=1;if(this.$m&&ss.isValue(this.$n)&&ss.isValue(this.$o)){if(Math.abs(L-ss.unbox(this.$n))<cD&&Math.abs(cC-ss.unbox(this.$o))<cD){return}}var cF=L+this.get_drawOffsets().x+this.get_autoScrollAdjustment().x;var cG=cC+this.get_drawOffsets().y+this.get_autoScrollAdjustment().y;var cH=L+this.get_totalScrollOffset().x;var cI=cC+this.get_totalScrollOffset().y;var cJ=false;var cK=false;var cL=false;var cM=this.$l.length;if(this.$m){if(cM>1){var cN=this.$l[cM-1];var cO=this.$l[cM-2];var cP=Math.abs(cH-cO.x);var cQ=Math.abs(cH-cN.x);var cR=Math.abs(cI-cO.y);var cS=Math.abs(cI-cN.y);cJ=cR<=cE&&cS<=cE;if(cJ){cJ=bP.$0(cH,cN.x,cO.x)}else{cK=cP<=cE&&cQ<=cE;if(cK){cK=bP.$0(cI,cN.y,cO.y)}else{cL=cP*cS===cR*cQ&&bP.$0(cH,cN.x,cO.x)}}}}var cT=cM-1;if(cJ){this.$k[cT].x=cF;this.$l[cT].x=cH}else if(cK){this.$k[cT].y=cG;this.$l[cT].y=cI}else if(cL){this.$k[cT].x=cF;this.$k[cT].y=cG;this.$l[cT].x=cH;this.$l[cT].y=cI}else{this.$k.push({x:cF,y:cG});this.$l.push({x:cH,y:cI})}this.$p='';var cU=this.get_autoScrollAdjustment();var cV='M';for(var cW=0;cW<this.$k.length;cW++){var cX=this.$k[cW];this.$p+=cV+(cX.x-cU.x)+','+(cX.y-cU.y);cV='L'}this.$n=L;this.$o=cC},$h:function(L,cC){var cD=0;var cE=this.$l.length;var cF=L.toString()+':'+cC.toString();var cG=this.$j[cF];if(ss.isNullOrUndefined(cG)){cG=new Array(cE*2);this.$j[cF]=cG}else{cD=ss.Int32.div(cG.length,2);if(this.$m){cD-=1}cG.length=cE*2}var cH=Math.round(L);var cI=Math.round(cC);for(var cJ=cD,cK=cD*2;cJ<cE;cJ++,cK+=2){var cL=this.$l[cJ];cG[cK]=cL.x-cH;cG[cK+1]=cL.y-cI}return cG}},cb);ss.initClass(bQ,a,{saveCurrentState:function(L){if(L.length<this.$1){}this.$0=ss.arrayClone(L)},updateLastState:function(){this.$1=Math.max(0,this.$0.length-1)},getStateDiff:function(){if(this.$0.length===0){return[]}var L=this.$0[0].y;var cC=L;var cD=this.$0[0].x;var cE=cD;for(var cF=this.$1,cG=this.$0.length;cF<cG;cF++){L=Math.min(L,this.$0[cF].y);cC=Math.max(cC,this.$0[cF].y);cD=Math.min(cD,this.$0[cF].x);cE=Math.max(cE,this.$0[cF].x)}var cH=new Array(1);cH[0]=tab.RectXYUtil.nonemptyify({x:cD,y:L,w:cE-cD,h:cC-L});return cH}},cc);ss.initClass(bR,a,{get_hitTestingBox:function(){return tab.RectXYUtil.nonemptyify(this.$e)},isSingleSelect:function(){return this.$d.w<=1&&this.$d.h<=1},updateSpecificShape:function(L){var cC=this.get_dragStart().x-this.get_connectNodePos().x;var cD=this.get_dragStart().y-this.get_connectNodePos().y;var cE=Math.round(Math.min(L.x,cC));var cF=Math.round(Math.max(L.x,cC));var cG=Math.round(Math.min(L.y,cD));var cH=Math.round(Math.max(L.y,cD));var cI=cF-cE;var cJ=cH-cG;this.$d={x:cE+this.get_drawOffsets().x,y:cG+this.get_drawOffsets().y,w:cI,h:cJ};this.$e={x:cE+this.get_totalScrollOffset().x,y:cG+this.get_totalScrollOffset().y,w:cI,h:cJ}},renderShape:function(){var L={l:this.$d.x,t:this.$d.y,w:this.$d.w,h:this.$d.h};tab.DomUtil.setMarginBoxJQ(this.get_dom(),L);this.get_dom().css('display','')},show:function(){this.get_dom().addClass('tvdrag_marquee')},hide:function(){this.get_dom().removeClass('tvdrag_marquee')},shapeAreaHit:function(L,cC,cD,cE){return W.rectangleAreaHit(cC,cD.get_boundingBox(),L,cD.get_objectId(),cE,cC.markType)},sendSelectionCommand:function(L,cC,cD,cE){tab.SelectionClientCommands.selectRectRegionAndDoUbertip(L,this.get_hitTestingBox(),cC,cD,cE,'default',null)},retrieveStateObject:function(L){return(this.isStateObjectTypeCorrect(L)?L:new bS)},saveCurrentState:function(L){if(this.isStateObjectTypeCorrect(L)){var cC=L;cC.saveCurrentState(this.get_hitTestingBox())}},isStateObjectTypeCorrect:function(L){if(ss.isValue(L)){if(ss.referenceEquals(ss.getInstanceType(L),bS)){return true}}return false}},cb);ss.initClass(bS,a,{saveCurrentState:function(L){this.$0=tab.RectXYUtil.clone(L)},updateLastState:function(){this.$1=this.$0},getStateDiff:function(){if(!tab.RectXYUtil.isEmpty(this.$1)){return tab.RectXYUtil.getChangedRects(this.$1,this.$0)}var L=new Array(1);L[0]=this.$0;return L}},cc);ss.initClass(bT,a,{renderReferenceLines:function(L,cC,cD,cE){switch(cD){case'normalUnderPass':{if(cE==='background'&&L.get_hasFill()){this.$G(L,cC)}break}case'selectedOnPass':{if(cE==='underLabel'&&L.get_hasLine()){this.$K(L,cC)}if(cE==='foreground'&&L.get_hasLabel()){this.$J(L,cC)}break}}},$D:function(L){var cC=this.get_currentContext();cC.set_lineJoin(tab.CanvasRenderer.toCanvasLineJoin(L.get_lineJoin()));cC.set_lineCap(z.resolveLineCap(L.get_linePattern(),L.get_lineCap()));cC.set_linePattern(L.get_linePattern());cC.set_strokeStyle(L.get_lineColor().toString());cC.set_lineWidth(L.get_lineWidth());cC.set_shouldAntialias(false)},$K:function(L,cC){this.$H(L,cC,ss.mkdel(this,function(cD){this.$D(L)}),ss.mkdel(this,function(cD,cE){var cF=L.getLinePixelPosition(ss.mkdel(cC,cC.thisDomainToPixelX),ss.mkdel(cC,cC.thisDomainToPixelY),cD);var cG=L.getEndPoints(cE,cF);tab.CanvasRenderer.strokePath(this.get_currentContext(),cG,false,true)}))},$J:function(L,cC){this.$H(L,cC,ss.mkdel(this,function(cD){this.$E(L,cD)}),ss.mkdel(this,function(cD,cE){var cF=L.getLinePixelPosition(ss.mkdel(cC,cC.thisDomainToPixelX),ss.mkdel(cC,cC.thisDomainToPixelY),cD);var cG=L.computeLabelBoxPosition(cE,cF,cD);this.$I(L,cD,cG)}))},$G:function(L,cC){this.$H(L,cC,null,ss.mkdel(this,function(cD,cE){var cF=L.getLinePixelPosition(ss.mkdel(cC,cC.thisDomainToPixelX),ss.mkdel(cC,cC.thisDomainToPixelY),cD);if(L.get_hasFillBelow()){this.$F(L,cE,cF,0)}if(L.get_hasFillAbove()){this.$F(L,cE,cF,1)}}))},$H:function(L,cC,cD,cE){var cF=cC.get_paneIndex();var cG=L.getRange(cF);if(cG.item2<=cG.item1){return}this.get_currentContext().save();this.get_currentContext().setClip(cC.paneRect);var cH=this.$L(L,cC);if(!ss.staticEquals(cD,null)){cD(cG.item1)}for(var cI=cG.item1;cI<cG.item2;cI++){var cJ=L.getCellClipInfo(cI);if(cJ.item1!==0){this.get_currentContext().save();cH=this.$C(cJ,cC)}cE(cI,cH);if(cJ.item1!==0){this.get_currentContext().restore()}}this.get_currentContext().restore()},$E:function(L,cC){var cD=L.getTextStyle(cC);if(ss.isValue(cD)){var cE=cD.item1;var cF=cD.item2;this.get_currentContext().set_textFillStyle(tab.ColorModel.fromArgbInt(cE.text_style_color[cF]).toString());this.get_currentContext().set_textAngle(bE.getTextAngleInRad(cE.text_orientation[cF]));this.get_currentContext().set_shouldUnderlineText(cE.underline[cF]);this.get_currentContext().set_textAlign(this.$M(L,cC));this.get_currentContext().set_font(this.$B(cE,cF))}},$B:function(L,cC){var cD=new ss.StringBuilder;if(tab.EnumConversions.tableauFontStyleFromInt(L.font_style[cC])==='font-style-italic'){cD.append('italic ')}if(tab.EnumConversions.fontWeightFromInt(L.font_weight[cC])==='font-weight-bold'){cD.append('bold ')}var cE=L.font[cC];cE=z.$1(cE);var cF=L.font_size[cC];cD.append(cF+'pt '+cE);return cD.toString()},$M:function(L,cC){return(L.isTextAlignEnd(cC)?'end':tab.TabRenderContext2D.defaultTextAlign)},$I:function(L,cC,cD){this.get_currentContext().translate(cD.x,cD.y);if(!this.get_currentContext().get_isTextAngleHorizontal()){this.get_currentContext().rotate(this.get_currentContext().get_textAngle());this.get_currentContext().set_textAngle(0)}this.get_currentContext().set_shouldAntialias(false);this.get_currentContext().set_shapeFillStyle(L.get_labelBackgroundColor().toString());this.get_currentContext().fillRect(0,0,Math.ceil(L.getLabelWidth(cC)),Math.ceil(L.getLabelHeight(cC)));this.get_currentContext().set_shouldAntialias(true);var cE=L.getTextRunOffset(cC);var cF=L.getTextRunCount(cC);var cG=L.getLabelWidth(cC);var cH=cF>1;for(var cI=cE;cI<cE+cF;cI++){var cJ=L.getTextRunPosition(cI);this.renderText(L.getTextRun(cI),cJ.x,cJ.y,cG,this.get_currentContext().get_textFillStyle(),cH)}},$C:function(L,cC){this.clipRect(L.item1,cC.thisDomainToPixelX(L.item2),cC.thisDomainToPixelY(L.item3),cC.thisDomainToPixelWidth(1),cC.thisDomainToPixelHeight(1));return this.get_currentContext().get_currentClipRect()},$L:function(L,cC){var cD=cC.paneRect;if(L.get_scope()===2&&ss.isValue(cC.$e())){cD=cC.$e()}return cD},$F:function(L,cC,cD,cE){if(L.get_fillColorCount()>cE&&L.getFillColor(cE).get_a()>0){this.get_currentContext().set_shapeFillStyle(L.getFillColor(cE).toString());var cF=L.getFillRect(cC,cD,cE);this.get_currentContext().fillRect(cF.x,cF.y,cF.w,cF.h)}}},bC);ss.initClass(bU,a,{hitTest:function(L,cC){var cD=(ss.isValue(L)?{x:L.x,y:L.y,w:1,h:1}:null);var cE=Z.createEmptyHitTestResult();var cF=[];if(ss.isValue(this.$6.get_referenceLines())){var cG=this.hitTestRefLinesModel(this.$6.get_referenceLines(),L,cC);if(cC){cE=cG[0]}else{cF=cG}}var cH=bU.hitTestRefLines(this.paneTableVM.get_refLineVisualLists(),cD,cC);if(cC){cE=Z.tieBreak(cH[0],cE)}return bU.$5(cC,cE,cF.concat.apply(cF,cH))},hitTestRefLinesModel:function(L,cC,cD){this.$0(L);if(cD){return[this.$4(cC)]}else{return this.$3(cC)}},clearCache:function(){this.$5=null},$0:function(L){if(ss.isValue(this.$5)){return}this.$5=[];var cC=this.$2();for(var cD=0;cD<cC.length;cD++){var cE=cC[cD];var cF=L.getRefLines(cE.get_paneDescriptorKey());var cG=this.$1(cF,cE);this.$5.push(cG)}},$1:function(L,cC){var cD=new T(cC.paneRect,1);for(var cE=0;cE<L.length;cE++){var cF=L[cE];if(cF.get_hasFill()){continue}var cG=cC.get_paneIndex();var cH=cF.getRange(cG);var cI=((cF.get_scope()===2&&ss.isValue(this.$6.$i()))?this.$6.$i():cC.paneRect);for(var cJ=cH.item1;cJ<cH.item2;cJ++){var cK=cF.getCellClipInfo(cJ);var cL=cK.item1;if(cL!==0){cI=bC.$4(cL,cC.thisDomainToPixelX(cK.item2),cC.thisDomainToPixelY(cK.item3),cC.thisDomainToPixelWidth(1),cC.thisDomainToPixelHeight(1))}var cM=cF.getLinePixelPosition(ss.mkdel(cC,cC.thisDomainToPixelX),ss.mkdel(cC,cC.thisDomainToPixelY),cJ);var cN=cF.getHitTestBound(cM,cI,1);var cO=new T(cN,8,cF.get_id());cD.addNode(cO);if(cF.get_hasLabel()){var cP=cF.computeLabelBoxPosition(cI,cM,cJ);var cQ={x:cP.x,y:cP.y,w:Math.ceil(cF.getLabelWidth(cJ)),h:Math.ceil(cF.getLabelHeight(cJ))};var cR=tab.RectXYUtil.intersect(cQ,cI);var cS=new T(cR,9,cF.get_id());cD.addNode(cS)}}}return cD},$4:function(L){var cC=Z.createEmptyHitTestResult();for(var cD=this.$5.length-1;cD>=0;cD--){var cE=this.$5[cD];if(cE.get_nodeType()!==1||!tab.RectXYUtil.inRect(cE.get_boundingBox(),L)){continue}for(var cF=cE.get_children().length-1;cF>=0;cF--){var cG=cE.get_children()[cF];if(cG.get_nodeType()!==8&&cG.get_nodeType()!==9){continue}var cH=bU.$6(cG,L);cC=bU.$7(cC,cH);if(cC.get_hitType()===3){return cC}}}return cC},$3:function(L){var cC=[];for(var cD=this.$5.length-1;cD>=0;cD--){var cE=this.$5[cD];if(cE.get_nodeType()!==1||!tab.RectXYUtil.inRect(cE.get_boundingBox(),L)){continue}for(var cF=cE.get_children().length-1;cF>=0;cF--){var cG=cE.get_children()[cF];if(cG.get_nodeType()!==8&&cG.get_nodeType()!==9){continue}var cH=bU.$0(cG,L);if(cH.get_hitType()===3){cC.push(cH)}}}return cC},$2:function(){var L=[];var cC=this.$6.get_runtimeData().safeFetchMarkPanes();for(var cD=0;cD<cC.length;cD++){var cE=cC[cD];var cF=ba.$2(this.$6,cE);for(var cG=0;cG<cF.length;cG++){var cH=cF[cG];var cI=this.$6.getPaneDrawInfo(cH);if(ss.isValue(cI)){L.push(cI)}}}return L}},X,[ss.IDisposable,bb]);ss.initClass(bV,a,{get_neededWidth:function(){return this.$2},get_neededHeight:function(){return this.$1},get_scrollableWidth:function(){return this.$a},get_scrollableHeight:function(){return this.$9},get_scrollXLeft:function(){return this.$7},get_scrollYTop:function(){return this.$8},get_widthScrollOffset:function(){return this.$d},get_heightScrollOffset:function(){return this.$0},get_viewWidth:function(){return this.$c},get_viewHeight:function(){return this.$b},get_scrollWidth:function(){return this.$6},get_scrollHeight:function(){return this.$5},get_overallWidth:function(){return this.$4},get_overallHeight:function(){return this.$3},getVisibleGeometry:function(L,cC){var cD={};cD.uleftArea=null;if(ss.isValue(L.uleft)){cD.uleftArea={l:L.uleft.x,t:L.uleft.y,w:Math.min(L.uleft.w,cC-this.get_scrollWidth()),h:L.uleft.h}}cD.yheaderArea=null;if(ss.isValue(L.yheader)){cD.yheaderArea={l:L.yheader.x,t:L.yheader.y,w:Math.min(L.yheader.w,cC-this.get_scrollWidth()),h:this.get_viewHeight()}}cD.leftaxisArea=null;if(ss.isValue(L.leftaxis)){cD.leftaxisArea={l:L.leftaxis.x,t:L.leftaxis.y,w:L.leftaxis.w,h:this.get_viewHeight()}}cD.rightaxisArea=null;if(ss.isValue(L.rightaxis)){cD.rightaxisArea={l:L.rightaxis.x-this.get_widthScrollOffset(),t:L.rightaxis.y,w:L.rightaxis.w,h:this.get_viewHeight()}}cD.xheaderArea=null;if(ss.isValue(L.xheader)){cD.xheaderArea={l:L.xheader.x,t:L.xheader.y,w:this.get_viewWidth(),h:L.xheader.h}}cD.bottomaxisArea=null;if(ss.isValue(L.bottomaxis)){cD.bottomaxisArea={l:L.bottomaxis.x,t:L.bottomaxis.y-this.get_heightScrollOffset(),w:this.get_viewWidth(),h:L.bottomaxis.h}}cD.topaxisArea=null;if(ss.isValue(L.topaxis)){cD.topaxisArea={l:L.topaxis.x,t:L.topaxis.y,w:this.get_viewWidth(),h:L.topaxis.h}}cD.urightArea=null;if(ss.isValue(L.uright)){cD.urightArea={l:L.uright.x-this.get_widthScrollOffset(),t:L.uright.y,w:Math.min(L.uright.w,cC-this.get_scrollWidth()),h:L.uright.h}}cD.lleftArea=null;if(ss.isValue(L.lleft)){cD.lleftArea={l:L.lleft.x,t:L.lleft.y-this.get_heightScrollOffset(),w:L.lleft.w,h:L.lleft.h}}cD.lrightArea=null;if(ss.isValue(L.lright)){cD.lrightArea={l:L.lright.x-this.get_widthScrollOffset(),t:L.lright.y-this.get_heightScrollOffset(),w:L.lright.w,h:L.lright.h}}cD.vizArea=null;if(ss.isValue(L.viz)){cD.vizArea={l:L.viz.x,t:L.viz.y,w:this.get_viewWidth(),h:this.get_viewHeight()}}return cD}});ss.initClass(bW,a,{});ss.initClass(bX,a,{get_hasSelection:function(){return ss.isValue(this.selections)&&this.selections.get_hasPaneTableObjectSelection()},get_hasBrushing:function(){return this.$q||ss.isValue(this.brushings)&&this.brushings.get_hasPaneTableObjectSelection()||ss.isValue(this.$p)&&!this.$p.isEmpty||this.$k},get_imageDictionary:function(){return this.$n},get_hiddenTuples:function(){return this.$o},set_hiddenTuples:function(L){this.$o=L||new Map},get_isSingleUserPane:function(){return this.scene.panes.length===1&&ss.isNullOrUndefined(this.sceneUserPaneInfo)},get_filteredTuples:function(){return this.$l},set_filteredTuples:function(L){this.$l=L||new Map},get_referenceLines:function(){return this.$1$1},set_referenceLines:function(L){this.$1$1=L},get_runtimeData:function(){return this.$v},set_runtimeData:function(L){this.$v=L},$i:function(){return this.$1$2},$j:function(L){this.$1$2=L},setSceneData:function(L,cC,cD,cE,cF,cG,cH,cI,cJ,cK){this.$s.clear();this.$m.clear();this.$r.clear();this.$u.clear();this.$t.clear();this.sceneUserPaneInfo=null;this.scene=L;this.$v=cI;this.set_referenceLines(cJ);this.$j(cK);this.set_hiddenTuples(cG);this.set_filteredTuples(cH);if(ss.isValue(L)&&(ss.isValue(L.pdMarksMap)||ss.isValue(L.runtimeFinalDatastore))){this.customShapes=bX.extractCustomShapes(cI);if(ss.isValue(cI.get_annexedData().Panes)){var cL=cI.get_annexedData().Panes;if(ss.isValue(L.userPaneInfo)){this.sceneUserPaneInfo=new bY(L.userPaneInfo)}this.$e(cI);for(var cM=0;cM<cL.length;cM++){var cN=cL[cM];var cO=cN.DrawPanes;for(var cP=0;cP<cO.length;++cP){var cQ=cO[cP];var cR=tab.EnumConversions.visualPartFromInt(cQ[0]);var cS=cQ[1];if(cR==='marks'){var cT=new tab.PaneMarksInfo.$ctor1(cI.get_finalDataStore().Viewpoint.PerPaneExtents,cI.get_paneStoreTable(),cS,L.currentPage,cN.Row,cN.Column);var cU=cT.get_paneKey();var cV=bX.getPaneMarksKey$1(cU,cT.get_paneId(),cS);var cW=new bE.$ctor1(cU,this,cN,cT,cF,cV,cI.get_finalDataStore(),cS);this.$u.set(cV,cW)}}}}}if(ss.isValue(cC)){this.selections=cC;this.$p=cD}if(ss.isValue(cE)){this.brushings=cE}this.colorModel=bg.extractInteractionColors(this.scene)},getMarkBoundingBox:function(L){if(this.$s.has(L)){return this.$s.get(L)}else{return bX.$1}},$7:function(L,cC){if(this.$t.has(L)&&cC>=0&&cC<this.$t.get(L).length){return this.$t.get(L)[cC]}return null},computeFilteredMarks:function(L){var cC=new Set;var cD=this.$l.size;if(cD===0){return cC}var cE=0;if(!ss.isNullOrUndefined(L)){cE=L.length}for(var cF=0;cF<cE;cF++){var cG=L.v[(L.c?0:cF)];if(this.$l.has(cG.toString())){cC.add(cF);if(cC.size===cD){break}}}return cC},computeTupleStates:function(L){var cC=this.get_hasSelection();var cD=this.selections;var cE=(ss.isValue(cD)?cD.tupleSelection:null);var cF=new Set;if(ss.isValue(cE)){tab.SetUtilities.addAll(ss.Int32).call(null,cF,cE.get_ids())}var cG=this.get_hasBrushing();var cH=this.brushings;var cI=(ss.isValue(cH)?cH.tupleSelection:null);var cJ=new Set;if(ss.isValue(cI)){tab.SetUtilities.addAll(ss.Int32).call(null,cJ,cI.get_ids())}var cK=new Set;if(ss.isValue(this.$p)){tab.SetUtilities.addAll(ss.Int32).call(null,cK,this.$p.get_ids())}var cL=0;if(!ss.isNullOrUndefined(L)){cL=L.length}var cM=new Array(cL);for(var cN=0;cN<cL;cN++){var cO=L.v[(L.c?0:cN)];var cP='markStateNormal';if(this.$o.has(cO.toString())){cP='markStateInvisible'}else if(cC&&cF.has(cO)){cP='markStateSelected'}else if(cG&&(cJ.has(cO)||cK.has(cO))){cP='markStateHighlighted'}cM[cN]=cP}return cM},prepareForDraw:function(L){this.$4(L);this.$f()},cleanupFromDraw:function(){this.$3()},$6:function(L){if(this.$r.has(L)){return this.$r.get(L)}else{return bX.$1}},getMarksInvalidationRects:function(L){var cC=[];for(var cD=0;cD<L.length;cD++){var cE=L[cD];var cF=this.$8(cE);for(var cG=0;cG<cF.length;cG++){var cH=cF[cG];cC.push(cH)}}return cC},$8:function(L){var cC=false;var cD=[];var cE=this.$v.get_panes();for(var cF=0;cF<cE.length;cF++){var cG=cE[cF];if(_.isArray(cG.renderNodes)&&cG.renderNodes.length>0){cC=true;break}}var cH=this.getPaneDrawInfoFromTupleId(L);if(ss.isNullOrUndefined(cH)){return cD}var cI=cH.markType;if(cC){cD.push(cH.paneRect)}else if(cI==='area'||cI==='line'){cD.push(cH.paneRect)}else{var cJ=this.$5(L);var cK=cH.getWorldOffsetBounds(cJ);for(var cL=0;cL<cK.length;cL++){var cM=cK[cL];cD.push(cM)}var cN=this.$6(L);if(!tab.RectXYUtil.isNull(cN)){var cO=cH.getWorldOffsetBounds(cN);for(var cP=0;cP<cO.length;cP++){var cQ=cO[cP];cD.push(cQ)}}}return cD},updateImageMap:function(L,cC){if(ss.isValue(L)&&ss.isValue(L.imageMap)){var cD=new ss.ObjectEnumerator(L.imageMap);try{while(cD.moveNext()){var cE=cD.current();var cF=cE.key;if(!this.$n.has(cF)){var cG=cE.value;var cH={$:document.createElement('img')};cH.$.src='data:image/jpeg;base64,'+cG;this.$n.set(cF,cH.$);var cI={$:null};cI.$=ss.mkdel({imgElt:cH,imageFinishedLoad:cI},function(){if(ss.isValue(cC)){cC()}this.imgElt.$.removeEventListener('load',this.imageFinishedLoad.$,false)});cH.$.addEventListener('load',cI.$,false)}}}finally{cD.dispose()}this.$n.forEach(ss.mkdel(this,function(cJ,cK){if(!ss.keyExists(L.imageMap,cK)){this.$n.delete(cK)}}))}},$c:function(L){return this.get_hasSelection()&&this.selections.tupleSelection.isObjectSelected(L)},$a:function(L){return this.get_hasBrushing()&&(ss.isValue(this.brushings)&&this.brushings.tupleSelection.isObjectSelected(L)||this.$b(L))},$b:function(L){return ss.isValue(this.$p)&&this.$p.isObjectSelected(L)},$d:function(L){return!this.$o.has(L.toString())},isMarkFiltered:function(L){return this.$l.has(L.toString())},setLabelInfo:function(L,cC){var cD=L.get_annexedData().LabelStore;if(ss.isValue(cD)&&ss.isValue(cD.Panes)){for(var cE=0;cE<cD.Panes.length;cE++){var cF=cD.Panes[cE];var cG=cF.DrawPanes;for(var cH=0;cH<cG.length;++cH){var cI=cG[cH];var cJ=tab.EnumConversions.visualPartFromInt(cI[0]);var cK=cI[1];var cL=new tab.PaneMarksInfo.$ctor1(L.get_finalDataStore().Viewpoint.PerPaneExtents,L.get_labelsPaneStoreTable(),cK,cC,cF.Row,cF.Column);if(cJ==='marks'){var cM=bX.getPaneMarksKey$1(cL.get_paneKey(),cL.get_paneId(),cK);if(this.$u.has(cM)){var cN=this.$u.get(cM);var cO=cD.PDMarks[cL.get_paneKey()];tab.FontNotificationUtil.notifyFontsFromMarkLayoutOutput(cO);cN.addLabelInfo(cO,cL.get_startIndex(),cL.get_endIndex())}}}}}},getPaneDrawInfo:function(L){var cC=null;if(ss.isValue(L)){cC=this.$u.get(bX.getPaneMarksKey(L))}return cC},getPaneDrawInfo$1:function(L,cC,cD){var cE=new tab.PaneMarksInfo.$ctor1(this.$v.get_finalDataStore().Viewpoint.PerPaneExtents,this.$v.get_paneStoreTable(),L,this.$g,cC,cD);return this.$u.get(bX.getPaneMarksKey(cE))},getPaneDrawInfoFromKey:function(L){return this.$u.get(L)},getPaneDrawInfoFromTupleId:function(L){var cC=null;tab.MapUtility.forEachWithInterrupt(String,bE).call(null,this.$u,function(cD){if(cD.containsTuple(L)){cC=cD;throw new tab.LoopBreakException}});return cC},getPaneDrawInfoAssociatedWithPane:function(L){var cC=L.DrawPanes;for(var cD=0;cD<cC.length;cD++){var cE=cC[cD];var cF=cE;var cG=tab.EnumConversions.visualPartFromInt(cF[0]);if(cG==='marks'){var cH=cF[1];return this.getPaneDrawInfo$1(cH,L.Row,L.Column)}}return null},setIsTargetOfBrushingAction:function(L){this.$q=L},setEmptyHighlightFogAll:function(L){this.$k=L},$2:function(L,cC){bX.$0(L,cC,this.$s)},$1:function(L,cC){bX.$0(L,cC,this.$r)},$0:function(L,cC,cD){tab.RectXYUtil.offsetRectXYInPlace(cC,L.paneRect.x,L.paneRect.y);for(var cE=0;cE<cD.length;cE++){var cF=cD[cE];this.$m.set(cF,cC)}},$9:function(L){return ss.isInstanceOfType(L,Float32Array)||ss.isInstanceOfType(L,Array)},$e:function(L){if(!ss.isValue(L)){return}var cC=L.get_finalDataStore();var cD=cC.Viewpoint.PerPaneExtents;var cE=cC.PDMarks;var cF=L.get_geometries();var cG=_.keys(cE);for(var cH=0;cH<cG.length;cH++){var cI=cG[cH];if(!ss.keyExists(cF,cI)){continue}var cJ=cF[cI];var cK=cE[cI];var cL=cK.MarkLayoutData.Parameters.pane_flags;var cM=tab.SceneDataUtil.isPaneFlagSet(cL,'enable-scale-x')&&tab.SceneDataUtil.isPaneFlagSet(cL,'enable-scale-y');var cN=null;var cO=null;var cP=false;if(cM){var cQ=L.get_annexedData().Panes;for(var cR=0;cR<cQ.length;cR++){var cS=cQ[cR];for(var cT=0;cT<cS.DrawPanes.length;cT++){var cU=cS.DrawPanes[cT];var cV=cU;var cW=cV[1];if(ss.referenceEquals(cD.PaneKey[cW],cI)){cN=tab.DoubleRectXYUtil.constructDoubleRectXY(cD.DomainLeft[cW],cD.DomainTop[cW],cD.DomainRight[cW],cD.DomainBottom[cW]);cO={x:0,y:0,w:cD.pane_px_right[cW]-cD.pane_px_left[cW],h:cD.pane_px_bottom[cW]-cD.pane_px_top[cW]};cP=true;break}}if(cP){break}}}var cX=cJ.length;var cY=new Array(cX);for(var cZ=0;cZ<cX;cZ++){var da;cY[cZ]=null;if(this.$9(cJ[cZ])){if(cJ[cZ].length<1){continue}var db=new tab.LinearFloatGeometryDecoder(cJ[cZ]);da=db.processEncodedGeometry()}else{var dc;if(ss.isInstanceOfType(cJ[cZ],Uint8Array)){dc=tab.Utf8TextDecoder.decode(cJ[cZ])}else{dc=cJ[cZ]}if(tab.MiscUtil.isNullOrEmpty$3(dc)){continue}da=JSON.parse(dc)}if(O.isGeometryPresModelFeatureEmpty(da)){continue}if(cM&&cP){O.domainToPixelGeometry(da,cN,cO,true)}cY[cZ]=da}this.$t.set(cI,cY)}},$5:function(L){var cC=this.$m.get(L);if(ss.isNullOrUndefined(cC)){cC=this.getMarkBoundingBox(L)}return cC},$4:function(L){this.$u.forEach(function(cC){cC.computeDirtyMarks(L)})},$3:function(){this.$u.forEach(function(L){L.clearDirtyMarks()})},$f:function(){this.$u.forEach(function(L){L.refreshMarkState()})}});ss.initClass(bY,a,{});bY.$0.prototype=bY.prototype;ss.initClass(bZ,a,{hitTest:function(L,cC){var cD=new tab.HitTestSceneCmd;cD.c['pt1']=tab.PointUtil.toPresModel(L);cD.c['visualIdPresModel']=this.region.get_visualId();cD.invoke().done(ss.mkdel(this,function(cE){var cF=cE.$$c['sceneElements'];if(ss.isValue(cF)&&cF.length>0&&ss.isValue(this.paneTable)){var cG=new tab.SceneElementModel(cF[0]);var cH=cG.get_paneId();var cI=this.makePaneSpecId(cH.get_columnIndex(),cH.get_rowIndex());var cJ=new Z(cG);this.setCurrent(new cw(this.region,cI,cH.get_columnIndex(),cH.get_rowIndex(),L,cC,cJ))}else{this.setCurrent(null)}}))}},cx,[ss.IDisposable,tab.IVizHitTestDebouncer]);ss.initClass(ca,a,{dispose:function(){this.$2=null;tab.ApplicationModel.get_instance().get_shapeManager().remove_shapeLoaded(ss.mkdel(this,this.onShapeLoaded))},initialize:function(L){this.$3.clear();for(var cC=0;cC<L.length;cC++){var cD=L[cC];this.$0(cD)}this.$1()},$0:function(L){if(tab.SceneDataUtil.isCustomShape(L)&&!tab.ApplicationModel.get_instance().get_shapeManager().hasShape(L)){this.$3.add(L)}},onShapeLoaded:function(L){if(!this.$3.has(L)){return}this.$3.delete(L);this.$1()},$1:function(){if(this.$3.size===0&&ss.isValue(this.$2)){this.$2()}}},null,[ss.IDisposable]);ss.initClass(cd,a,{});ss.initClass(ce,a,{get_displayListRenderer:function(){return this.renderer},get_visualListVM:function(){return this.get_viewModel()},get_backgroundFillColor:function(){return this.$p.get_visualModel().get_backgroundColor()},$o:function(L,cC){if(cC.get_propertyName()==='images'){this.invalidate(false)}},performRender:function(){var L=tabBootstrap.MetricsController.createContext('RNDRRG'.toString(),32,null);try{this.get_displayListRenderer().clear();this.get_displayListRenderer().renderVisualList(this.get_visualListVM(),this.$p.get_scene().get_imageDictionary())}finally{if(ss.isValue(L)){L.dispose()}}},postRenderFinalPass:function(){this.get_displayListRenderer().renderCanvasBorders(this.get_visualListVM())},onViewModelPropertyChanged:function(L,cC){if(cC.get_propertyName()==='HoverNode'){var cD={x:-this.get_scrollPos().x,y:-this.get_scrollPos().y};this.invalidateRect(this.get_visualListVM().dirtyRect(cD),true)}else{ss.makeGenericType(ct,[cp]).prototype.onViewModelPropertyChanged.call(this,L,cC)}}},ss.makeGenericType(ct,[cp]),[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[cp]),spiff.IScrollable,bh]);ss.initClass(cf,a,{$0:function(){this.$2=false;window.clearTimeout(this.$4);if(ss.isValue(this.$5)){this.$1(this.$5);this.$5=null}},$1:function(L){this.setState({visible:L.visible,transitionDurationMs:L.transitionDurationMs,transitionDelayMs:L.transitionDelayMs,animationId:this.state.animationId+1})},componentWillReceiveProps:function(L){var cC=L.transitionDelayMs>0;var cD=this.$2&&cC;if(cD){this.$5=L}else{this.$5=null;this.$1(L)}},shouldComponentUpdate:function(L,cC){var cD=this.state.animationId!==cC.animationId;return cD},componentWillUpdate:function(L,cC){this.$2=true;var cD=cC.transitionDelayMs+cC.transitionDurationMs+200;this.$4=window.setTimeout(ss.mkdel(this,this.$0),cD)},componentWillUnmount:function(){window.clearTimeout(this.$4)},render:function(){var L={opacity:(this.state.visible?1:0),transitionDuration:tab.DomUtil.toMsString(this.state.transitionDurationMs),transitionDelay:tab.DomUtil.toMsString(this.state.transitionDelayMs)};return spiff.DOMElements.div({className:'tab-smooth-tooltips-tip',style:L,onTransitionEnd:this.$3},spiff.DOMElements.p({className:'tip-text',children:tab.Strings.SmoothTooltipsOnboardingText}))}},React.Component);ss.initClass(cg,a,{$7:function(L){this.$a=true;this.$9=100;this.$8=(L?150:0);this.incrementProps()},$5:function(L){this.$a=false;this.$9=300;this.$8=(L?1000:0);this.incrementProps()},createSuppressTipCookie:function(){tab.CookieHelper.setCookie('twoFingerScrollOnboardingTipWasAcknowledged',true.toString(),'/',null)},$6:function(){var L=tab.CookieHelper.getValueForCookie('twoFingerScrollOnboardingTipWasAcknowledged');var cC=tab.MiscUtil.toBoolean(L,false);return tab.GestureModelSettings.get_onboardingEnabled()&&tsConfig.is_mobile&&!cC},showTipImmediatelyIfNotSuppressed:function(){if(this.$6()){this.$7(false)}},hideTipWithDelayIfNotSuppressed:function(){if(this.$a){this.$5(true)}},hideTipImmediatelyIfNotSuppressed:function(){this.$5(false)},suppressTip:function(){if(this.$6()){this.$5(false);this.createSuppressTipCookie()}},createUpdatedProps:function(){return{visible:this.$a,transitionDurationMs:this.$9,transitionDelayMs:this.$8}}},ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.IDisposable,tab.IViewModel,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ch,a,{});ss.initClass(ci,a,{get_isDragTracking:function(){return false},get_isScrollable:function(){return this.get_contentProvider().get_canScrollX()||this.get_contentProvider().get_canScrollY()},get_name:function(){return this.get_regionPart().toString()},get_regionPart:function(){return this.$8},get_visualId:function(){return this.paneTableViewModel.get_visualId()},get_sheetid:function(){return this.$b},get_contentProvider:function(){return this.regionContent},set_contentProvider:function(L){this.regionContent.remove_loadComplete(ss.mkdel(this,this.onRegionContentLoadComplete));this.regionContent=L;this.regionContent.add_loadComplete(ss.mkdel(this,this.onRegionContentLoadComplete))},get_shapeSelector:function(){return this.$a},get_visualObjectBoundsComputerAndHitTester:function(){return this.$d},get_toolModeViewModel:function(){return this.$c},sendSelectionCommand:function(L,cC,cD,cE){this.get_shapeSelector().sendSelectionCommand(L,cC,cD,cE)},turnOnWindowLogging:function(){if(!ss.isValue(ci.windowLog)){ci.windowLog=tab.Logger.getLoggerWithName('WindowAppender')}},reset:function(){this.get_toolModeViewModel().handleDeferredModeChangeIfNeeded();if(this.shouldResetVisualState()){return}this.resetVisualState()},resetVisualState:function(){this.backgroundMap.removeMarkOverlay();this.setViewportBorderVisibility(false);this.hideDomDrag();this.$e=tab.MiscUtil.dispose$1(this.$e)},destroy:function(){this.disposables.dispose();this.allowPanZoomActions=null;this.regionContent.remove_loadComplete(ss.mkdel(this,this.onRegionContentLoadComplete));this.regionContent.destroy();this.backgroundMap.destroyMap();this.backgroundMap.dispose();this.get_toolModeViewModel().remove_toolbarToolModeUpdated(ss.mkdel(this,this.updateForToolMode));this.$e=tab.MiscUtil.dispose$1(this.$e)},setGeometry:function(L,cC,cD){if(this.regionContent.get_hasContent()){this.regionContent.set_actualViewSize({w:cC.w,h:cC.h});this.regionContent.reset(L,cD);this.$9={x:0,y:0,w:L.w,h:L.h};this.updateSelectorShape(this.get_toolModeViewModel().get_currentPointerToolMode())}},refreshImages:function(L){this.regionContent.refreshImages(L)},onZoomBoxMouseMove:function(L){this.onSelectorMouseMove(L,this.domPanZoomRect)},onMarqueeMouseMove:function(L){this.onSelectorMouseMove(L,this.$a)},onSelectorMouseMove:function(L,cC){L.preventDefault();cC.recordScrollingOffsets({x:this.scroller.get_scrollPos().x,y:this.scroller.get_scrollPos().y});var cD=cC.get_connectNodePos();var cE=L.get_gestureInfo().pageX-cD.x;var cF=L.get_gestureInfo().pageY-cD.y;var cG=((cE<0)?cE:((cE>cD.w)?(cE-cD.w):0));var cH=((cF<0)?cF:((cF>cD.h)?(cF-cD.h):0));var cI=this.determineScrollDirection(0,cG);var cJ=this.determineScrollDirection(1,cH);var cK=((Math.max(Math.abs(cG),Math.abs(cH))>15)?'fast':'slow');if(cI!==0||cJ!==0){this.startScrolling(cI,cJ,cK);cC.constrainShape(L.get_gestureInfo())}else{this.stopScrolling();cC.updateAndRenderShape(L.get_gestureInfo())}},$0:function(L){var cC=true;if(ss.isNullOrUndefined(L)){return false}if(this.get_regionPart()==='bottomaxis'){cC=tab.SelectionUtils.isQuantitative(L)}if(cC){return true}return false},onRightClickAxis:function(L){var cC=this.toLocalCoordsEvent(L,false);var cD=tab.ModelUtils.regionToVisualPartMap[this.get_regionPart()];var cE=this.paneTableViewModel.get_vizRegionMap()[cD];if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()||ss.isNullOrUndefined(cE)){tab.AxisAuthoringTelemetry.logRightClickAxisEvent();return}var cF=cE.hitTestNodes(cC);if(this.$0(cF)){tab.AxisAuthoringTelemetry.logRightClickAxisEvent()}},onDoubleTapAxis:function(L){if(L.get_isRightClickEvent()){return}var cC=this.toLocalCoordsEvent(L,false);var cD=tab.ModelUtils.regionToVisualPartMap[this.get_regionPart()];var cE=this.paneTableViewModel.get_vizRegionMap()[cD];if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()||ss.isNullOrUndefined(cE)){tab.EditAxisDialogCommands.showEditAxisDialogInServerRenderedMode(this.get_visualId(),cC,this.get_regionPart());return}var cF=cE.hitTestNodes(cC);if(this.$0(cF)){tab.EditAxisDialogCommands.showEditAxisDialogInBrowserRenderedMode(cF.node)}},debugWindowLog:function(L){if(ss.isValue(ci.windowLog)){}},toLocalCoords:function(L,cC){var cD=this.getLocalOffsetPoint(cC);var cE={x:L.x-cD.x,y:L.y-cD.y};return cE},toLocalCoordsRect:function(L,cC){var cD=this.getLocalOffset(cC);var cE={x:cD.x,y:cD.y};var cF={x:L.x-cE.x,y:L.y-cE.y,w:L.w,h:L.h};return cF},toLocalCoordsEvent:function(L,cC){var cD={x:L.get_gestureInfo().pageX,y:L.get_gestureInfo().pageY};return this.toLocalCoords(cD,cC)},getLocalOffset:function(L){var cC=tab.DomUtil.getRectXY(this.connectNode);if(L){return cC}cC.x-=this.regionContent.get_scrollPos().x;cC.y-=this.regionContent.get_scrollPos().y;return cC},getLocalOffsetPoint:function(L){var cC=this.getLocalOffset(L);var cD={x:cC.x,y:cC.y};return cD},moveMapToBounds:function(L){if(this.paneTableViewModel.get_visualModel().get_shouldUpdate()){this.backgroundMap.splatOverlayToMapForTransition(ci.getCanvasElement(this.connectNode));this.setViewportBorderVisibility(true);this.backgroundMap.moveToBounds(L)}},isExistingSelection:function(){var L=tab.ModelUtils.getVisualModelFromVisualId(this.get_visualId()).get_selectionsModel().tupleSelection;return L.get_ids().length!==0},$1:function(){this.get_contentProvider().set_scrollPos({x:0,y:0})},suppressTooltips:function(){},zoomPoint:function(L,cC,cD,cE,cF){if(this.resetIsWaitingOnTransition){return}if(this.paneTableViewModel.get_visualModel().shouldDoLocalCommand()&&this.waitingOnPanZoomServerResponse!=='normal'){return}this.setWaitingOnPanZoomServerResponseState();this.suppressTooltips();var cG=(L.canDragH?cD:1);var cH=(L.canDragV?cD:1);var cI=cC||this.getCenterPoint(L);var cJ=((cD>1)?1:-1);var cK=this.paneTableViewModel.get_visualModel().get_tileCacheUrl();if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()||tab.ViewSession.canUseTileCacheUrl(cK)){this.$e=new spiff.Glass;this.$e.show();this.animateZoomOnPoint(L,cI,cG,cH)}var cL=ss.mkdel(this,function(){this.reset()});var cM=ss.mkdel(this,function(){var cN=1/cD;if(cE){tab.PanZoomCommands.zoomDoubleClick(cI,cD>1,cF,cN,cL,this.$b)}else if(cD>1){tab.PanZoomCommands.zoomIn(cI,cI,cN,cL,this.$b)}else{tab.PanZoomCommands.zoomOut(cI,cN,cL,this.$b)}});this.backgroundMap.zoomOnPoint(cC,cJ).done(function(cN){cM()})},makeDomDrag:function(){this.domPanZoomRect.createDomAndAppend(this.connectNode);this.domDragImage=$('<div></div>');this.addHiddenDiv(this.domDragImage,'tvdrag_image',this.domPanZoomRect.get_dom());this.domDragMask=$('<div></div>');this.addHiddenDiv(this.domDragMask,'tvdrag_mask',this.domPanZoomRect.get_dom())},hideDomDrag:function(){if(this.$8!=='viz'||!this.$5){return}this.domDragMask.css('display','none');this.domDragImage.css('display','none');this.domPanZoomRect.get_dom().css('display','none');this.get_shapeSelector().get_dom().css('display','none');this.domDragImage.html('');this.$5=false},showDomDragImage:function(L){this.$5=true;this.setViewportBorderVisibility(true);if(this.backgroundMap.get_enabled()){this.backgroundMap.splatOverlayToMapForTransition(ci.getCanvasElement(this.connectNode))}else{var cC=(tab.ApplicationModel.get_instance().get_isLocalRenderMode()?this.scroller.get_scrollPos():{x:0,y:0});var cD={l:L.x-cC.x+1,t:L.y-cC.y+1,w:L.w+1-2,h:L.h+1-2};var cE=this.$7.clone();if(ss.isInstanceOfType(this.regionContent,bG)){var cF=ci.getCanvasElement(cE);var cG=tab.CanvasRenderer.getRenderContext(cF,'transparent');this.regionContent.copyContent(cG)}cE.removeClass();cE.addClass('tvdrag_imageContainer');this.domDragImage.append(cE);this.domDragImage.css('display','');var cH=1;tab.DomUtil.setMarginBoxJQ(cE,{l:-cD.l-cH,t:-cD.t-cH,w:tab.DoubleUtil.roundToInt(cE.width())-2,h:tab.DoubleUtil.roundToInt(cE.height())-2});tab.DomUtil.setMarginBoxJQ(this.domDragImage,{l:cC.x+cH,t:cC.y+cH,w:cD.w-2,h:cD.h-2});this.domDragMask.css('background-color',this.getPanZoomFillColor());this.domDragMask.css('display','');tab.DomUtil.setMarginBoxJQ(this.domPanZoomRect.get_dom(),cD);this.domPanZoomRect.get_dom().css('display','')}},getCenterPoint:function(L){var cC=Math.floor(L.w/2)+L.x;var cD=Math.floor(L.h/2)+L.y;return{x:cC,y:cD}},addHiddenDiv:function(L,cC,cD){L.addClass(cC);L.css('display','none');cD.append(L)},animateZoomOnPoint:function(L,cC,cD,cE){var cF=((cD<1)?-1:((cD>1)?1:0));var cG=((cE<1)?-1:((cE>1)?1:0));var cH={x:cF,y:cG};var cI=this.getCenterPoint(L);var cJ=Math.floor((cI.x-cC.x)*cH.x*cD);var cK=Math.floor((cI.y-cC.y)*cH.y*cE);var cL={scale:1,scaleX:1,scaleY:1,translateX:0,translateY:0,transformOrigin:null,time:0};cL.translateX=cJ;cL.translateY=cK;cL.scaleX=cD;cL.scaleY=cE;cL.time=777;this.showDomDragImage(L);this.animateZoomWithCSSTransitions(cL)},mapIsBrowserRendered:function(){return this.backgroundMap.get_enabled()},animateAnchorZoomClient:function(L,cC,cD){this.showDomDragImage(L);if(this.mapIsBrowserRendered()){this.backgroundMap.animateAnchorZoom(cD,cC)}},animateAnchorZoom:function(L,cC,cD){var cE=1/cD;var cF=((L.x>0)?(cC.x%L.x):cC.x);var cG=((L.y>0)?(cC.y%L.y):cC.y);var cH={x:cF,y:cG};var cI={scaleX:cE,scaleY:cE,time:500,scale:1,translateX:0,translateY:0,transformOrigin:null};this.showDomDragImage(L);cI.transformOrigin=cH;this.animateZoomWithCSSTransitions(cI)},animateZoomWithCSSTransitions:function(L){var cC=this.domDragImage.get(0);this.get_toolModeViewModel().deferModeChanges();this.resetIsWaitingOnTransition=true;window.setTimeout(ss.mkdel(this,function(){tableau.util.transform(cC,L);this.$6=true;var cD=500;window.setTimeout(ss.mkdel(this,function(){this.resetIsWaitingOnTransition=false;if(!this.get_toolModeViewModel().isDeferringModeChanges){this.reset()}}),cD)}),50)},stopScrolling:null,startScrolling:null,determineScrollDirection:null,onRegionContentLoadComplete:function(L,cC){if(this.waitingOnPanZoomServerResponse==='waitingOnLocal'){this.waitingOnPanZoomServerResponse='waitingOnServer'}else if(this.waitingOnPanZoomServerResponse==='waitingOnServer'){this.waitingOnPanZoomServerResponse='normal'}if(this.$8==='viz'){if(!this.isScrolling&&this.$5){this.hideDomDrag()}if(this.$6){tableau.util.transform(this.domDragImage.get(0),null);this.$6=false}}},getPanZoomFillColor:function(){var L='rgb(255,255,255)';if(this.$8==='viz'){if(this.paneTableViewModel.get_mapServerModel().get_hasPresModel()){L=this.paneTableViewModel.get_mapServerModel().get_mapBGFillColor()}else if(ss.isValue(this.paneTableViewModel.get_scene().scene)){L=this.paneTableViewModel.get_scene().scene.bgColor}}return L},$4:function(){if(this.backgroundMap.get_enabled()){this.backgroundMap.destroyMap();this.$3(true)}},$3:function(L){if(this.$8!=='viz'){return}this.setViewportBorderVisibility(false);if(L){if(!this.backgroundMap.get_enabled()){this.backgroundMap.createMap(this.backgroundDiv,this.paneTableViewModel.get_mapServerModel())}}else{this.backgroundMap.destroyMap()}},$2:function(L){if(this.$8!=='viz'){return}if(this.backgroundMap.get_enabled()){this.backgroundMap.resize(L.w,L.h)}},setViewportBorderVisibility:function(L){this.paneTableViewModel.set_highlightBorder(L)},updateForToolMode:function(L){this.updateSelectorShape(L)},updateSelectorShape:function(L){if(ss.isValue(this.$a)){if(ss.isValue(this.$a.get_dom())){this.$a.get_dom().remove()}this.$a=null}switch(L){case'lasso-selection':{this.$a=new bP(this.$9,tab.ApplicationModel.get_instance().get_isLocalRenderMode());break}case'radial-selection':{var cC=this.paneTableViewModel.get_mapServerModel();this.$a=new x(this.$9,cC.get_radialSelectionDistanceInfoModel());break}case'rectangular-selection':default:{this.$a=new bR;break}}this.$a.createDomAndAppend(this.connectNode)},shouldResetVisualState:function(){return!tsConfig.is_mobile&&this.resetIsWaitingOnTransition},setWaitingOnPanZoomServerResponseState:function(){var L=this.paneTableViewModel.get_visualModel();if(L.shouldDoLocalCommand()&&L.get_runtimeReady()){this.waitingOnPanZoomServerResponse='waitingOnLocal'}else{this.waitingOnPanZoomServerResponse='waitingOnServer'}},isWaitingOnPanZoomServerResponse:function(){return this.waitingOnPanZoomServerResponse!=='normal'},allowMapZoomAtCurrentLevel:function(L){if(L<1){var cC=this.paneTableViewModel.get_mapServerModel();var cD=(cC.get_hasPresModel()?cC.get_zoom():1);return tab.MapUtil.allowZoomAtCurrentLevel(cD,1/L)}return true},updateLocalMapDataForZoomAround:function(L,cC){this.backgroundMap.updateLocalMapDataForZoomAround(L,cC)},handleRightClickHitTestServerWithCallback:function(L,cC){var cD=new tab.HitTestSceneCmd;cD.c['pt1']=tab.PointUtil.toPresModel(L);cD.c['visualIdPresModel']=this.get_visualId();cD.invoke().done(function(cE){var cF=cE.$$c['sceneElements'];if(ss.isValue(cF)&&cF.length>0){var cG=new tab.SceneElementModel(cF[0]);var cH=new Z(cG);cC(cH)}})}});ss.initClass(cj,a,{add_loadComplete:function(L){this.$1$1=ss.delegateCombine(this.$1$1,L)},remove_loadComplete:function(L){this.$1$1=ss.delegateRemove(this.$1$1,L)},get_actualViewSize:function(){return{w:this.$c.clientWidth,h:this.$c.clientHeight}},set_actualViewSize:function(L){},get_effectiveViewSize:function(){return this.get_actualViewSize()},get_scrollPos:function(){return{x:this.get_left(),y:this.get_top()}},set_scrollPos:function(L){this.set_left(L.x);this.set_top(L.y);this.$3(false)},get_canScrollX:function(){return this.get_docSize().w>this.get_effectiveViewSize().w},get_canScrollY:function(){return this.get_docSize().h>this.get_effectiveViewSize().h},get_docSize:function(){return{w:this.$f.w,h:this.$f.h}},get_hasContent:function(){return true},get_left:function(){return this.$j},set_left:function(L){this.$j=L;if(this.$l){this.$c.scrollLeft=L}},get_top:function(){return this.$q},set_top:function(L){this.$q=L;if(this.$l){this.$c.scrollTop=L}},destroy:function(){this.$d.destroy();if(this.$n>0){this.$k.decrementWait();tab.ImageTileTracker.decrementPendingCount();this.$n=0}this.$g=null;this.$r=null},refreshImages:function(L){if(this.$2()){return}if(ss.isNullOrUndefined(L)){return}this.$b=L;this.$1();this.$3(!tab.ProgressiveLoader.get_progressiveLoadEnabled()||!this.$e);this.$e=false},reset:function(L,cC){var cD=this.$f;this.$f=L;var cE=this.$m;this.$m=cC;if(this.$2()){return}if(this.$4(cD,cE)){return}this.$o=Math.ceil(this.$f.w/this.$m.w);this.$p=Math.ceil(this.$f.h/this.$m.h);this.$8();this.$a()},$8:function(){this.$h.width(this.$f.w);this.$h.height(this.$f.h)},$a:function(){var L=this.$f.h-this.$c.offsetHeight;var cC=this.$f.w-this.$c.offsetWidth;L=Math.max(0,L);cC=Math.max(0,cC);this.set_top(Math.min(this.get_top(),L));this.set_left(Math.min(this.get_left(),cC))},$4:function(L,cC){return tab.RegionRectUtil.sizesAreEqual(L,this.$f)&&tab.SizeUtil.equals(cC,this.$m)},$2:function(){if(ss.isNullOrUndefined(this.$f)){return true}return this.$f.w===0&&this.$f.h===0},setXPos:function(L){this.set_scrollPos({x:L,y:this.get_scrollPos().y})},setYPos:function(L){this.set_scrollPos({x:this.get_scrollPos().x,y:L})},$0:function(L){var cC=$(L);if(!!cC.prop('_deferredClear')){cC.prop('_deferredClear',null);cC.empty()}},$3:function(L){if(!ss.isValue(L)){L=false}if(this.$2()){return}if(!ss.isValue(this.$b)){return}this.$d.clear();if(!ss.isValue(this.$k)){return}var cC=this.get_left();var cD=cC+this.$c.clientWidth;var cE=this.get_top();var cF=cE+this.$c.clientHeight;var cG=Math.max(Math.floor(cC/this.$m.w),0);var cH=Math.min(Math.ceil(cD/this.$m.w),this.$o);var cI=Math.max(Math.floor(cE/this.$m.h),0);var cJ=Math.min(Math.ceil(cF/this.$m.h),this.$p);var cK=this.$n;this.$n=Math.max((cH-cG)*(cJ-cI),0);if(cK<=0&&this.$n>0){if(L){this.$k.incrementWait(false,true)}tab.ImageTileTracker.incrementPendingCount()}var cL='';var cM=0;if(ss.isValue(this.$g)){cL=this.$g()}if(ss.isValue(this.$r)){cM=this.$r.get_cacheVersion()}var cN=false;for(var cO=cG;cO<cH;cO++){var cP=Math.min(this.$m.w,this.$f.w-cO*this.$m.w);for(var cQ=cI;cQ<cJ;++cQ){var cR=Math.min(this.$m.h,this.$f.h-cQ*this.$m.h);var cS=cQ*this.$o+cO;var cT={l:cO*this.$m.w,t:cQ*this.$m.h,w:cP,h:cR};var cU=this.$k.formatTileURL(this.$b,this.$f.r,cO,cQ,'',cL);if(ss.isValue(this.$i[cS])&&this.$i[cS].$0(cU,cM)){if(L){this.$9()}var cV=this.$i[cS].$2();var cW=cV.width!==cT.w||cV.height!==cT.h;if(cW){$(cV).css(ss.mkdict(['left',cT.l+'px','top',cT.t+'px']));tab.RenderUtil.ensureImageEltSize(cV,cT)}}else{cN=true;this.$i[cS]=this.$i[cS]||new g;var cX=new bc(this.$i[cS].$2(),cS,cU,cT,cM);this.$d.addImage(cX)}}}if(!cN){this.$h.each(ss.mkdel(this,function(cY,cZ){this.$0(cZ)}))}},$1:function(){this.$i=[];this.$h.prop('_deferredClear',true)},$9:function(){if(this.$n>0){this.$n--;if(this.$n===0){this.$k.decrementWait();tab.ImageTileTracker.decrementPendingCount()}}},$5:function(L,cC){this.$9();if(ss.isValue(cC.get_image().get_imageNode())){var cD=cC.get_image().get_imageNode();tab.RenderUtil.ensureImageEltSize(cD,cC.get_image().get_bounds());var cE=cC.get_image().get_index();var cF=this.$r.get_cacheVersion();if(!ss.isValue(this.$i[cE])){return}if((!ss.isValue(this.$i[cE].$2())||!ss.referenceEquals($(this.$i[cE].$2()).attr('src'),$(cD).attr('src')))&&cC.get_image().get_version()===cF){this.$i[cE].$3(cD);this.$i[cE].$1=cF;var cG=cD;var cH=0;var cI=this.$h.length;this.$h.each(ss.mkdel(this,function(cJ,cK){this.$0(cK);cK.appendChild(cG);if(cH<cI-1){cG=cG.cloneNode(false)}cH++}))}}},$6:function(L,cC){this.$9()},$7:function(L,cC){if(ss.isValue(this.$1$1)){this.$1$1(this,ss.EventArgs.Empty)}}},null,[spiff.IScrollable,bh]);ss.initClass(ck,a,{add_toolbarToolModeUpdated:function(L){this.$2$1=ss.delegateCombine(this.$2$1,L)},remove_toolbarToolModeUpdated:function(L){this.$2$1=ss.delegateRemove(this.$2$1,L)},add_appendModeUpdated:function(L){this.$2$2=ss.delegateCombine(this.$2$2,L)},remove_appendModeUpdated:function(L){this.$2$2=ss.delegateRemove(this.$2$2,L)},get_isAppendMode:function(){return this.$7},set_isAppendMode:function(L){if(this.$7!==L){this.$7=L;this.raiseActionEvent$1(Boolean).call(this,this.$2$2,this.$7)}},get_currentToolbarToolMode:function(){return this.$5},set_currentToolbarToolMode:function(L){if(tsConfig.allow_filter){this.$5=L}},get_currentPointerToolMode:function(){return((this.currentModifierKeyToolMode==='no-tools')?this.get_currentToolbarToolMode():this.currentModifierKeyToolMode)},get_isPanToolActive:function(){return this.get_currentPointerToolMode()==='pan-map'},get_isSelectingToolActive:function(){return this.get_currentPointerToolMode()==='rectangular-selection'||this.get_currentPointerToolMode()==='lasso-selection'||this.get_currentPointerToolMode()==='radial-selection'},get_isZoomToolActive:function(){return this.get_currentPointerToolMode()==='area-zoom'||this.get_currentPointerToolMode()==='zoom-out'},initializeToolModesForVizRegion:function(L){this.defaultPointerToolMode=this.$3(L);this.$5=this.defaultPointerToolMode;this.resetPointerToolMode()},setPointerToolMode:function(L){if(ss.isNullOrUndefined(L)){L=this.defaultPointerToolMode}this.$4(L)},$3:function(L){if(tsConfig.is_mobile){var cC='pan-map';if(L||tab.GestureModelSettings.get_newModelEnabled()){if(L&&tab.GestureModelSettings.get_newModelEnabled()){cC='pan-map'}else{cC=this.$8;if(cC==='area-zoom'){cC='rectangular-selection'}}}return cC}else{return this.$8}},updateDefaultToolMode:function(L){this.defaultPointerToolMode=this.$3(L)},setLockedPointerToolMode:function(L){this.$8=L},resetPointerToolMode:function(){this.setPointerToolMode(this.defaultPointerToolMode)},$4:function(L){if(!tsConfig.is_mobile){if(this.$2(L)){return}}this.set_currentToolbarToolMode(L);this.raiseActionEvent$1(Object).call(this,this.$2$1,L)},deferModeChanges:function(){this.isDeferringModeChanges=true},handleDeferredModeChangeIfNeeded:function(){if(tsConfig.is_mobile){return}this.isDeferringModeChanges=false;if(ss.isValue(this.$6)){var L=ss.unbox(this.$6);this.$6=null;this.currentModifierKeyToolMode='no-tools';this.$4(L)}},$2:function(L){if(this.isDeferringModeChanges){this.$6=L;return true}return false}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(cl,a,{get_multiSelectCompleteBehavior:function(){return'disabled'},get_currentTooltipMode:function(){return'none'},getSingleSelectBehaviorCallback:function(L){return function(){}},buildBehaviorsDictionary:function(){var L=new tab.DisabledTooltipBehavior;this.tooltipBehaviors['disabled']=L},suppressHoverIfNecesary:function(){}},tab.TooltipBaseMode);ss.initClass(cm,a,{get_ubertipShouldEnforceButtonOrdering:function(){return true},get_currentTooltipMode:function(){return'smooth'},dispose:function(){var L=this.tooltipBehaviors['smooth'];L.remove_onMouseStop(ss.mkdel(this,this.$E));this.get_tooltip().remove_prePosition(ss.mkdel(this,this.prepareForPositioning));this.get_tooltip().remove_positionCalculated(ss.mkdel(this,this.handleUbertipButtons));this.get_tooltip().remove_showed(ss.mkdel(this,this.handleUbertipButtons));this.get_tooltip().remove_closed(ss.mkdel(this,this.$F));this.$A();tab.TooltipBaseMode.prototype.dispose.call(this)},buildBehaviorsDictionary:function(){var L=tab.ObjectRegistry.newLegacyTooltipBehavior(tab.ITooltipBehavior).call(null,tab.ITooltipBehavior,this.get_tooltip());var cC=new tab.SmoothTooltipBehavior(this.get_tooltip());this.tooltipBehaviors['sticky']=L;this.tooltipBehaviors['smooth']=cC},getSingleSelectBehaviorCallback:function(L){return ss.mkdel(this,function(cC){this.$H(L,cC)})},$H:function(L,cC){this.get_currentBehavior().singleSelectComplete(L);if(this.get_tooltip().get_isShown()){this.triggerUbertipButtonUpdate()}if(!this.isUbertipObjectSelected(cC)){this.switchTooltipMode('smooth');this.$B();if(tab.GestureModelSettings.get_newModelEnabled()&&tsConfig.is_mobile&&this.get_tooltip().get_isShown()){this.get_tooltip().close()}}},shouldShowCommandButtons:function(){var L=tab.TooltipBaseMode.prototype.shouldShowCommandButtons.call(this);var cC=this.get_ubertip().get_model();if(!L||ss.isNullOrUndefined(cC)){return L}var cD=cC.tupleId===0;if(!cD){L=this.isUbertipObjectSelected(cC)}return L},getSingleSelectBehavior:function(L){return'sticky'},getHoverBehavior:function(L){var cC=this.get_defaultBehaviorType();if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(L==='header'||L==='visualparts'){cC='sticky'}else if(L==='mark'){cC='smooth'}else{}}else if(L==='header'){cC='sticky'}else{cC='smooth'}return cC},onPanOrDragStart:function(L){this.$A();tab.TooltipBaseMode.prototype.onPanOrDragStart.call(this,L)},onDragEnd:function(L){this.get_tooltip().close();this.$z();tab.TooltipBaseMode.prototype.onDragEnd.call(this,L)},onBehaviorSwitch:function(){if(this.get_currentBehaviorType()==='smooth'){this.$z();this.get_tooltip().allowMouseEventPassthrough(true)}else{this.$A();this.get_tooltip().allowMouseEventPassthrough(false)}},$G:function(){this.handleUbertipButtons();this.get_tooltip().allowMouseEventPassthrough(this.get_currentBehaviorType()==='smooth')},$F:function(){this.get_ubertip().hideMenuActionsAndCommandButtons(true);this.get_tooltip().allowMouseEventPassthrough(false)},$C:function(L){if(this.readyForHover&&this.get_currentBehaviorType()==='smooth'&&this.get_isTooltipShown()){this.get_currentBehavior().onMouseMove(L)}},$D:function(L){this.get_tooltip().allowMouseEventPassthrough(false);if(this.get_currentBehaviorType()==='sticky'&&this.get_tooltip().isInSafeZone({x:L.pageX,y:L.pageY},false)){return}if(this.get_isTooltipShown()){this.get_tooltip().close()}},$E:function(L){if(ss.isNullOrUndefined(this.get_ubertip().get_model())){return}if(!this.$I){return}var cC=false;var cD=this.isUbertipObjectSelected(this.get_ubertip().get_model());if(cD){cC=this.switchTooltipMode('sticky')}this.$B();if(cC&&this.get_tooltip().get_isShown()){this.triggerUbertipButtonUpdate()}},$B:function(){if(!this.get_tooltip().get_isShown()&&ss.isValue(this.get_tooltip().get_lastLocation())&&this.get_currentBehaviorType()==='sticky'&&tab.TooltipBaseMode.isUbertipHtmlEmpty(this.get_ubertip().get_model())&&this.get_ubertip().hasActionsOrSummaryOrCommands()){this.get_tooltip().show(this.get_tooltip().get_body().children()[0],this.get_tooltip().get_lastLocation())}else if(this.get_tooltip().get_isShown()&&this.get_currentBehaviorType()==='smooth'&&tab.TooltipBaseMode.isUbertipHtmlEmpty(this.get_ubertip().get_model())){this.get_tooltip().close()}},$z:function(){if(this.$J){return}if(tsConfig.is_mobile){this.$K.on(this.$N,ss.mkdel(this,this.$C))}else{this.$K.on(this.$L,ss.mkdel(this,this.$C))}this.$K.on(this.$M,ss.mkdel(this,this.$D));this.$J=true},$A:function(){if(!this.$J){return}if(tsConfig.is_mobile){this.$K.off(this.$N)}else{this.$K.off(this.$L)}this.$K.off(this.$M);this.$J=false}},tab.TooltipBaseMode);ss.initClass(cn,a,{get_hitTestStructures:function(){if(ss.isValue(this.$1)){return this.$1}this.$1=[];var L=this.paneTableVM.get_trendLineVisualLists();if(!ss.isValue(L)){return this.$1}for(var cC=0;cC<L.length;cC++){var cD=L[cC];this.$0(cD)}return this.$1},$0:function(L){var cC=L.drawItems;var cD=1;for(var cE=0;cE<cC.length;cE++){var cF=cC[cE];if(cF.type==='draw-group'){var cG=cF;for(var cH=0;cH<cG.drawItems.length;cH++){var cI=cG.drawItems[cH];switch(cI.type){case'draw-pen':{var cJ=cI;if(ss.isValue(cJ.strokeWidth)){cD=cJ.strokeWidth}break}case'draw-path':{var cK=cI;var cL=ba.buildTrendLineHitTestStructure(cK,cD,cG.objectId);this.$1.push(cL);break}default:{break}}}}}},hitTest:function(L,cC){return cn.hitTestTrendLines(this.get_hitTestStructures(),{x:L.x,y:L.y,w:1,h:1},cC)},clearCache:function(){this.$1=null}},X,[ss.IDisposable,bb]);ss.initClass(co,a,{$3:function(L,cC,cD){var cE={x:0,y:0,w:L.w,h:L.h};if(cC>=0&&this.$g.$1){var cF=this.$g.$3[cC];var cG=this.$g.$3[cC+1];cE.x+=Math.round(cF);cE.w=Math.round(cG-cF)}if(cD>=0&&this.$g.$2){var cH=this.$g.$4[cD];var cI=this.$g.$4[cD+1];cE.y+=Math.round(cH);cE.h=Math.round(cI-cH)}return cE},$7:function(L){return this.$h[L]},$8:function(L){var cC=this.$e[L];return this.$h[cC]},$4:function(L){return this.$e[L]},$5:function(L){return this.$d[L+1]-this.$d[L]},$6:function(L){return{firstMark:this.$d[L],lastMark:this.$d[L+1]-1}},$2:function(L){var cC=L.c.get('user_pane_col');var cD=L.c.get('user_pane_row');var cE=L.paneRect;var cF=L.markCount;var cG=0;var cH=-1;var cI=-1;var cJ=ss.isNullOrUndefined(cD);var cK=ss.isNullOrUndefined(cC);if(!cJ||!cK){for(var cL=0;cL<cF;++cL){var cM=(cK?-1:cC.v[(cC.c?0:cL)]);var cN=(cJ?-1:cD.v[(cD.c?0:cL)]);if(cM!==cH||cN!==cI){this.$1(cL,cG,cM,cN,cE);cH=cM;cI=cN;cG+=1}}}this.$d[cG]=cF;this.$0(cG);return cG},$0:function(L){if(L===0){return}var cC=L-1;var cD=this.$d[cC];var cE=this.$d[L];for(var cF=cD;cF<cE;++cF){this.$e[cF]=cC}},$1:function(L,cC,cD,cE,cF){if(ss.isValue(this.$c)){this.$c[cC]=cD}if(ss.isValue(this.$f)){this.$f[cC]=cE}this.$h[cC]=this.$3(cF,cD,cE);this.$d[cC]=L;this.$0(cC)},$9:function(L){for(var cC=0;cC<this.$b;++cC){var cD=this.$7(cC);var cE=this.$6(cC);var cF=cE.firstMark;var cG=cE.lastMark;for(var cH=cF;cH<=cG;++cH){L(cH,cD)}}},$a:function(L,cC){var cD=-1;var cE=null;for(var cF=0;cF<L.length;cF++){var cG=L[cF];var cH=this.$e[cG];if(cH!==cD){cD=cH;cE=this.$7(cH)}cC(cG,cE)}}});ss.initClass(cp,a,{get_visualList:function(){return this.$6},get_groupItemNodes:function(){return this.$6.get_groupItemNodes()},get_visualListPM:function(){return this.$6.get_visualListPresModel()},get_defaultBackgroundColor:function(){return this.$5},set_defaultBackgroundColor:function(L){this.$5=L},get_hoveredNodeOrAxis:function(){return this.$4},set_hoveredNodeOrAxis:function(L){if(!ss.referenceEquals(this.$4,L)){this.$7=this.$4;this.$4=L;this.notifyPropertyChanged('HoverNode')}},dirtyRect:function(L){var cC={x:0,y:0,w:0,h:0};var cD=[this.$7,this.$4];for(var cE=0;cE<cD.length;cE++){var cF=cD[cE];if(ss.isValue(cF)){var cG={x:cF.extentsX,y:cF.extentsY,w:cF.extentsWidth,h:cF.extentsHeight};cC=tab.RectXYUtil.union(cC,cG)}}return tab.RectXYUtil.offsetRect(cC,L)},isNodeOrAxisHovered:function(L){return ss.referenceEquals(L,this.$4)},isSelected:function(L){return ss.isValue(this.$9)&&this.$9.isNodeSelected(L)},isBrushed:function(L){return ss.isValue(this.$3)&&this.$3.isNodeSelected(L)},selectNode:function(L,cC,cD,cE){tab.SelectionClientCommands.selectNode(this.$8,L,cD,this.$6,cC,this.$a,cE)},hitTestNodes:function(L){var cC=_.find(this.get_groupItemNodes(),function(cD){var cE=cD.extentsX||0;var cF=cD.extentsY||0;var cG={x:cE,y:cF,w:cD.extentsWidth,h:cD.extentsHeight};return tab.RectXYUtil.inRect(cG,L)});return cC},handleModelChange:function(){this.notifyPropertyChanged('visualList')},$2:function(){this.notifyPropertyChanged('selection')},dispose:function(){this.$6.remove_newVisualList(ss.mkdel(this,this.handleModelChange));if(ss.isValue(this.$9)){this.$9.remove_newSelection(ss.mkdel(this,this.$2))}if(ss.isValue(this.$3)){this.$3.remove_newSelection(ss.mkdel(this,this.$2))}spiff.BaseViewModel.prototype.dispose.call(this)}},spiff.BaseViewModel,[ss.IDisposable,tab.IViewModel]);ss.initClass(cq,a,{computeBoundsOfSelectedMarks:function(L,cC){var cD=L.get_selectionsModel().tupleSelection;var cE={x:0,y:0,w:0,h:0};var cF=cD.get_ids();for(var cG=0;cG<cF.length;cG++){var cH=cF[cG];var cI=cC.getMarkBoundingBox(cH);cE=tab.RectXYUtil.union(cE,cI)}return cE},computeBoundsOfSelectedNodes:function(L,cC){var cD=L.get_selectionsModel().nodeSelection;var cE={x:0,y:0,w:0,h:0};var cF=cC;if(ss.isNullOrUndefined(cF)){return cE}var cG=cF.get_groupItemNodes();for(var cH=0;cH<cG.length;cH++){var cI=cG[cH];if(!cD.isNodeSelected(cI)){continue}var cJ=cI.extentsX||0;var cK=cI.extentsY||0;var cL={x:cJ,y:cK,w:cI.extentsWidth,h:cI.extentsHeight};cE=tab.RectXYUtil.union(cE,cL)}return cE},computeBoundsOfSelectedRefLines:function(L,cC){var cD=L.get_selectionsModel().refLineSelection;var cE={x:0,y:0,w:0,h:0};if(cD.isEmpty){return cE}for(var cF=0;cF<cC.length;cF++){var cG=cC[cF];for(var cH=0;cH<cG.drawItems.length;cH++){var cI=cG.drawItems[cH];var cJ=cI;if(!cD.isObjectSelected(cJ.objectId)){continue}for(var cK=0;cK<cJ.drawItems.length;cK++){var cL=cJ.drawItems[cK];if(cL.type!=='draw-polyline'&&cL.type!=='draw-fill-rect'){continue}var cM=cL;if(cM.points.length<4){continue}var cN={x:cM.points[0],y:cM.points[1]};var cO={x:cM.points[2],y:cM.points[3]};var cP=tab.RectXYUtil.rectXYFromCorners$1(cN,cO);cP=tab.RectXYUtil.nonemptyify(cP);cE=tab.RectXYUtil.union(cE,cP)}}}return cE},computeBoundsOfSelectedTrendLines:function(L,cC){var cD=L.get_selectionsModel().trendLineSelection;var cE={x:0,y:0,w:0,h:0};if(cD.isEmpty){return cE}var cF=new cn(cC);var cG=cF.get_hitTestStructures();var cH=new Array;for(var cI=0;cI<cG.length;cI++){var cJ=cG[cI];cH.push(cJ)}while(cH.length!==0){var cK=cH.pop();if(cK.get_nodeType()===4||cK.get_nodeType()===0){var cL=cK.get_children();for(var cM=0;cM<cL.length;cM++){var cN=cL[cM];cH.push(cN)}}else if(cK.get_nodeType()===5){if(cD.isObjectSelected(cK.get_objectId())){cE=tab.RectXYUtil.union(cE,cK.get_boundingBox())}}}return cE}});ss.initClass(cr,a,{});ss.initEnum(cs,a,{normal:'normal',hover:'hover',press:'press',highlighted:'highlighted',selected:'selected'},true);ss.initClass(cu,a,{buildMenuItems:function(){var L=[];if(tab.FeatureFlags.isEnabled('RichTextCreateBlankPointAndMarkAnnotation')){L.push({value:'Annotate Mark',displayValue:tab.Strings.CreateMarkAnnotationFromVizContextMenu,disabled:this.$2!==7});L.push({value:'Annotate Point',displayValue:tab.Strings.CreatePointAnnotationFromVizContextMenu,disabled:false})}if(tab.FeatureFlags.isEnabled('RichTextCreateBlankAreaAnnotation')){L.push({value:'Annotate Area',displayValue:tab.Strings.CreateAreaAnnotationFromVizContextMenu,disabled:false})}return L},handleItemClicked:function(L){switch(L){case'Annotate Mark':{tab.AnnotationClientCommands.createMarkAnnotation(this.$1,[this.$0],this.$3);t.reportCreatedAnnotationTelemetry('Mark');break}case'Annotate Area':{tab.AnnotationClientCommands.createAreaAnnotation(this.$1,this.$3);t.reportCreatedAnnotationTelemetry('Area');break}case'Annotate Point':{tab.AnnotationClientCommands.createPointAnnotation(this.$1,this.$3);t.reportCreatedAnnotationTelemetry('Point');break}default:{throw new ss.Exception('Unknown menu option '+L)}}}},null,[bj]);cu.$ctor1.prototype=cu.prototype;ss.initClass(cv,a,{get_scrollOffset:function(){if(ss.isValue(tab.ApplicationModel.get_instance().pm)&&tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return this.$9}return{x:0,y:0}},set_scrollOffset:function(L){this.$9.x=L.x;this.$9.y=L.y},setAnchorEl:function(L){this.vizOverlayDiv=L;this.incrementProps()},show:function(L,cC){var cD=tab.PointUtil.subtract(L,this.get_scrollOffset());this.$7=cC;this.location=cD;this.isHidden=false;this.incrementProps()},createInitialProps:function(){return{hide:ss.mkdel(this,this.$6),handleItemClicked:ss.mkdel(this,this.handleItemClicked)}},createUpdatedProps:function(){return{vizOverlayDiv:this.vizOverlayDiv,location:this.location,isHidden:this.isHidden,hide:ss.mkdel(this,this.$6),handleItemClicked:ss.mkdel(this,this.handleItemClicked),menuOptions:this.$5()}},$5:function(){if(ss.isNullOrUndefined(this.$7)){return[]}this.$8={};var L=[];for(var cC=0;cC<this.$7.length;cC++){var cD=this.$7[cC];var cE=cD.buildMenuItems();L=L.concat.apply(L,cE);for(var cF=0;cF<cE.length;cF++){var cG=cE[cF];this.$8[cG.value]=cD}}return L},$6:function(){this.$7=null;this.isHidden=true;this.$8=null;this.incrementProps()},handleItemClicked:function(L){if(ss.keyExists(this.$8,L)){this.$8[L].handleItemClicked(L)}this.isHidden=true;this.incrementProps()}},ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.IDisposable,tab.IViewModel,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(cw,a,{get_instanceId:function(){return this.$1$1},set_instanceId:function(L){this.$1$1=L},get_region:function(){return this.$1$2},set_region:function(L){this.$1$2=L},get_visualId:function(){return this.get_region().get_visualId()},get_sheetId:function(){return this.get_region().get_sheetid()},get_regionPart:function(){return this.get_region().get_regionPart()},get_paneId:function(){return this.$1$3},set_paneId:function(L){this.$1$3=L},get_paneColumnIndex:function(){return this.$1$4},set_paneColumnIndex:function(L){this.$1$4=L},get_paneRowIndex:function(){return this.$1$5},set_paneRowIndex:function(L){this.$1$5=L},get_regionCoordinates:function(){return this.$1$6},set_regionCoordinates:function(L){this.$1$6=L},get_pageCoordinates:function(){return this.$1$7},set_pageCoordinates:function(L){this.$1$7=L},get_result:function(){return this.$0}},null,[tab.IVizHitInfo]);ss.initClass(cy,a,{createPaneTableView:null,createPaneTableViewModel:function(L){return new bN(L)},addVizDragHandler:function(L){bM.addVizDragHandler(L)},addAsyncVizDragHandler:function(L){bM.addAsyncVizDragHandler(L)},addVizDragApprover:function(L){bM.addVizDragApprover(L)},computeVizScrollCapabilities:function(L){return bJ.computeVizScrollCapabilities(L)}},null,[tab.IVizZoneModule]);ss.initClass(cz,a,{get_workerID:function(){return this.$1},get_image:function(){return this.$0}},ss.EventArgs);ss.initClass(cA,a,{get_workerID:function(){return this.$0}},ss.EventArgs);ss.initClass(cB,a,{});(function(){b.$1='MapControl_CreateMap_Start';b.$0='MapControl_CreateMap_Done';b.$2='MapControl_InitialRenderComplete'})();(function(){c.$1='MapControlType';c.$0='ElapsedTime'})();(function(){d.$0="<div><div class='tabLeafletMapHolder' /><div class='tabLeftBarnDoor' /><div class='tabRightBarnDoor' /></div>"})();(function(){bg.defaultHighlightBgColor=new tab.ColorModel(245,245,171,1);bg.defaultSelectionBgColor=new tab.ColorModel(140,196,211,1);bg.defaultHighlightTextColor=new tab.ColorModel(0,0,0,1);bg.defaultSelectionTextColor=new tab.ColorModel(0,0,0,1);var L=new bg;L.highlightBgColor=bg.defaultHighlightBgColor;L.selectionBgColor=bg.defaultSelectionBgColor;L.highlightTextColor=bg.defaultHighlightTextColor;L.selectionTextColor=bg.defaultSelectionTextColor;bg.defaultColors=L})();(function(){z.$8='rgb(0,0,0)';z.$7='rgb(245,245,245)';z.$b=['x-labels','bottom-axis','top-axis'];z.$c=['y-labels','left-axis','right-axis'];z.$a=new tab.FifoCache(20);z.$9=true})();(function(){l.$0="<div class='tabMapsSearchContainer'><div class='tabMapsSearchView'></div></div>"})();(function(){t.annotationEventType='Annotations';t.annotationType='AnnotationType';t.annotationAction='Action';t.annotationActionFrom='ActionFrom';t.annotationCreateType='Create';t.annotationDeleteType='Delete';t.annotationMarkType='Mark';t.annotationAreaType='Area';t.annotationPointType='Point';t.annotationFromContextMenu='Context Menu'})();(function(){u.deleteAnnotationMenuItem='Delete Annotation';u.editAnnotationMenuItem='Edit Annotation'})();(function(){s.resizeHandlerPre='tabAnnotationResizeHandler';s.e='E';s.w='W';s.n='N';s.s='S';s.SE='SE';s.SW='SW';s.NE='NE';s.NW='NW';s.movePointTargetIcon='tabAnnotationPointTargetIcon';s.movePointTargetHandler='tabAnnotationPointTarget';s.resizeHandlesArea=[s.resizeHandlerPre+s.SE,s.resizeHandlerPre+s.SW,s.resizeHandlerPre+s.NE,s.resizeHandlerPre+s.NW,s.resizeHandlerPre+s.e,s.resizeHandlerPre+s.w,s.resizeHandlerPre+s.n,s.resizeHandlerPre+s.s];s.resizeHandlesPointAndMark=[s.resizeHandlerPre+s.e,s.resizeHandlerPre+s.w]})();(function(){p.regionPadding=2;p.$0=80})();(function(){Z.$0=ss.mkdict(['no-hit',0,'area-hit',1,'near-hit',2,'exact-hit',3]);Z.$1=ss.mkdict(['annotations',2,'ref-lines',5,'trend-lines',3,'ref-bands',5,'marks',7,'mark-labels',8])})();(function(){v.$0="<canvas class='tabCanvas'></canvas>"})();(function(){O.halfPI=0.5*Math.PI;O.onePI=Math.PI;O.oneAndHalfPI=1.5*Math.PI;O.twoPI=2*Math.PI;O.$a=Math.PI*0.15})();(function(){bC.$f=0.400000005960464;bC.$g='rgb(255,255,255)'})();(function(){x.$5='tvdrag_svg_div';x.$8='circle_radius';x.$0='circle_crosshair';x.$1=4;x.$3='tabDistanceReadout';x.$4="<div class='tabDistanceReadout'></div>";x.$6="<line class='circle_crosshair' x1='0' y1='0' x2='0' y2='0'></line>";x.$2="<line class='circle_crosshair' x1='0' y1='0' x2='0' y2='0'></line><line class='circle_crosshair' x1='0' y1='0' x2='0' y2='0'></line>";x.$9="<line class='circle_radius'x1='0' y1='0' x2='0' y2='0'></line>";x.$7="<div>\n                                                <svg class='selectionShape'>\n                                                    <circle class='tvdrag_svg_marquee'></circle><line class='circle_crosshair' x1='0' y1='0' x2='0' y2='0'></line><line class='circle_crosshair' x1='0' y1='0' x2='0' y2='0'></line><line class='circle_radius'x1='0' y1='0' x2='0' y2='0'></line></svg><div class='tabDistanceReadout'></div></div>"})();(function(){B.$0=2})();(function(){F.type='Viz_FloatingToolbar_ButtonPress';F.buttonName='ButtonName'})();(function(){I.repositionTimeoutMs=300})();(function(){bz.$0=5})();(function(){P.telemetryToolName='gotoMyLocation';P.$4=0.7;P.$7=110.574;P.$8=111.32;P.$2=90;P.$1=180;P.$5=6000;P.$3=8;P.$6="<div class='tabGotoMyLocationButtonContainer'></div>"})();(function(){by.widgetClassName='tabMapsSearchView';by.$0='tabMapsSearchViewCollapsed';by.$1='tabMapsSearchContainerCollapsed';by.widgetClassNameTranslucent='tabMapsSearchViewTranslucent';by.suggestionDisplayClassName='tabMapsSearchViewSuggestionDisplayName';by.suggestionActiveSearchTextClassName='tabMapsSearchViewSuggestionActiveSearchText';by.suggestionParentClassName='tabMapsSearchViewSuggestionParentName';by.queryDelayTimerMs=200;by.suppressVizTooltipsAndOverlays='tabSuppressVizTooltipsAndOverlays';tab.ObjectRegistry.registerType(by,by).call(null)})();(function(){G.closeButtonContainerClass='tab-floating-toolbar-close-button-container';G.closeButtonClass='tab-floating-toolbar-close-button';G.toolButtonsRootClass='FloatingZoomToolbar';G.toolButtonsContainerClass='fztButtonContainer';G.selectionToolContainerClass='fztSelectionToolContainer';G.toolFlyoutContainerClass='fztFlyOutContainer';G.toolFlyoutButtonsClass='fztFlyOutButtons'})();(function(){J.type='Viz_FloatingToolbar_Show';J.mapsSearchShown='MapsSearchShown';J.toolsShown='ToolsShown';J.panAvailable='PanAvailable';J.homeShown='HomeShown'})();(function(){M.$0="<div class='FloatingZoomToolbar'></div>"})();(function(){bE.shapeMarkStampingRatio=32;bE.$c='_int';bE.$a=32767;bE.$b=100;bE.$9=['font','font_size','font_style','font_weight'];bE.$4=['color','border_color','halo_color','selected_halo_color','highlighted_halo_color','selected_multi_prim_halo_color','text_style_color','background_color'];bE.$7=['x','x1','x_prev','x_next','cell_x'];bE.$6=['clip_width'];bE.$8=['y','y1','y_prev','y_next','cell_y'];bE.$5=['clip_height'];bE.$e=null;bE.textAngleInRad=null;bE.$d=null})();(function(){bX.$1={x:0,y:0,w:0,h:0}})();(function(){cr.visualPartNearHitTestExpansionPixels=7})();(function(){bU.$9=7;bU.$8=1})();(function(){U.$7=[0,3,2,1];U.$5=[3,2,1,0];U.$6=[3,2,1];U.$8=[0]})();(function(){V.$1=null;V.$0=0})();(function(){cB.$0=0.05})();(function(){bl.$4=100;bl.$2='/css/leaflet.css';bl.$5=2;bl.$9=10;bl.$a=0.01;bl.$7=8;bl.$3='leaflet-touching';bl.$6={item1:90,item2:0};bl.$8={item1:-90,item2:0}})();(function(){cw.$0=0})();(function(){cx.hitTestDelay=250;cx.maxHitTestDistance=20})();(function(){br.$0="<div class='tabMapAttribution'><div class='tabMapAttributionBackground' /><a class='tabMapAttributionLink'></a></div>"})();(function(){bt.$3='overlay_canvas_layer';bt.$4='overlay_canvas_source';bt.$2=[-180,85.05113];bt.$5=[180,-85.05113];bt.$1=2500})();(function(){bw.mapboxGLJS='MapboxGLJS';bw.leaflet='Leaflet'})();(function(){cu.createMarkAnnotationMenuItem='Annotate Mark';cu.createPointAnnotationMenuItem='Annotate Point';cu.createAreaAnnotationMenuItem='Annotate Area'})();(function(){cp.propertyHoverNode='HoverNode'})();(function(){cg.twoFingerScrollOnboardingTipWasAcknowledgedCookie='twoFingerScrollOnboardingTipWasAcknowledged';cg.fadeInDurationMs=100;cg.fadeOutDurationMs=300;cg.fadeInDelayMs=150;cg.fadeOutDelayMs=1000})();(function(){var L=[];L.push('left-axis');L.push('right-axis');L.push('y-labels');L.push('x-labels');L.push('top-axis');L.push('bottom-axis');L.push('title');L.push('caption');L.push('background');bN.blackListVisualParts=L;bN.zoomToolbarTopOffset=10;bN.vizNavigationSettingPropertyName='vizNavigationSetting';bN.borderHighlightPropertyName='borderHighlight';bN.imageLoadedPropertyName='images';bN.sceneChangedPropertyName='scene'})();(function(){bF.$3='rgba(0,0,0,1)';bF.$2='rgba(255,255,255,255)';bF.$5=['normalUnderPass','normalOnPass','highlightedUnderPass','highlightedOnPass','selectedUnderPass','selectedOnPass'];bF.$4=['background','underMark','marks','underLabel','label','foreground']})();(function(){bK.$2=3;bK.$3=145;bK.$1=false})();(function(){bL.$0="<div class='tvViewportBorder tvLeftBorder' /><div class='tvViewportBorder tvRightBorder' /><div class='tvViewportBorder tvTopBorder' /><div class='tvViewportBorder tvBottomBorder' />"})();(function(){bO.scrollableXRegions=['xheader','bottomaxis','topaxis','viz'];bO.scrollableYRegions=['yheader','leftaxis','rightaxis','viz'];bO.scrollableRegions=['xheader','bottomaxis','topaxis','yheader','leftaxis','rightaxis','viz'];bO.axisRegions=['leftaxis','rightaxis','bottomaxis','topaxis'];bO.headerRegions=['yheader','xheader','leftaxis','rightaxis','bottomaxis','topaxis','uleft','uright'];bO.regionsThatMightContainCategoricalHeader=['yheader','xheader','bottomaxis','topaxis'];bO.nonVizContentRegions=['yheader','leftaxis','rightaxis','xheader','bottomaxis','topaxis'];bO.contentRegions=['yheader','leftaxis','rightaxis','xheader','bottomaxis','topaxis','viz'];bO.regionsThatClearSelectionOnTap=['uleft','uright','lleft','lright','caption'];bO.spacerRegions=['uleft','uright','lleft','lright']})();(function(){cm.$3=0})();(function(){bM.suppressVizTooltipsAndOverlays='tabSuppressVizTooltipsAndOverlays';bM.titleClass='tab-tvTitle';bM.$5=8;bM.$6=30;bM.$4=[];bM.$8=[];bM.$7=[]})();(function(){bP.$5='M';bP.$4='L';bP.$1='Z';bP.$2='tvdrag_svg_div';bP.$3="<div><svg class='selectionShape'><path class='tvdrag_svg_marquee'></path></svg></div>";bP.$6=300})();(function(){bR.$1='<div></div>';bR.$0='tvdrag';bR.$2='tvdrag_marquee'})();(function(){bW.$0=null;tab.ModuleManager.register(bi).call(null,'RuntimeUI',null).andMarkAsAlreadyLoadedInGlobalNamespace()})();(function(){cf.rootElementClass='tab-smooth-tooltips-tip';cf.textClass='tip-text';cf.transitionEndFailSafeTimeoutMs=200})();(function(){ci.windowLog=null;ci.paneBorderMaskSize=2;ci.canvasBorderPixels=1;ci.zoomAnimationTime=777;ci.minZoomAnimationTime=500;ci.zoomToAnchorAnimationTime=500})()})();;
/*! BEGIN SpiffUIWeb */
(function(){'dont use strict';var a={};global.spiff=global.spiff||{};ss.initAssembly(a,'spiffuiweb');var b=function(){};b.__typeName='spiff.ChangeSpotlightedItemMode';global.spiff.ChangeSpotlightedItemMode=b;var c=function(i){spiff.ComboBoxView.call(this,i,new spiff.ComboBoxTemplate)};c.__typeName='spiff.ComboBoxViewWeb';global.spiff.ComboBoxViewWeb=c;var d=function(){this.$w=null;this.$v=null;this.$3$1=null;this.$3$2=null;this.$3$3=null;spiff.CompositeSearchWidget.call(this,new spiff.CompositeSearchWidgetTemplate);this.compositeSearchWidgetTemplate.get_textInputView().get_inputElement().keydown(ss.mkdel(this,this.$u));this.set_spotlightedItemLogic(null)};d.__typeName='spiff.CompositeSearchWidgetWeb';global.spiff.CompositeSearchWidgetWeb=d;var e=function(){};e.__typeName='spiff.ICompositeSearchWidgetSpotlightedItemLogic';global.spiff.ICompositeSearchWidgetSpotlightedItemLogic=e;var f=function(i){this.$t=0;this.$u=0;spiff.MenuView.call(this,i,new g);this.updateMenu();this.menuViewModel.add_menuItemFocusChanged(ss.mkdel(this,this.$l));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.menuViewModel.remove_menuItemFocusChanged(ss.mkdel(this,this.$l))})));this.menuDisposables.add$1(spiff.EventUtil.bindWithDispose(this.element,'keypress',ss.mkdel(this,this.$r)));this.menuDisposables.add$1(spiff.EventUtil.bindWithDispose(this.element,'keydown',ss.mkdel(this,this.$q)))};f.__typeName='spiff.MenuViewWeb';f.$0=function(i){return i.prop('scrollHeight')>i.prop('clientHeight')+1};global.spiff.MenuViewWeb=f;var g=function(){spiff.MenuTemplate.call(this)};g.__typeName='spiff.MenuViewWebTemplate';global.spiff.MenuViewWebTemplate=g;var h=function(i){spiff.UberPopupView.call(this,i,new spiff.UberPopupTemplate)};h.__typeName='spiff.UberPopupViewWeb';global.spiff.UberPopupViewWeb=h;ss.initEnum(b,a,{moveUp:0,moveDown:1,moveToFirst:2,moveToLast:3,moveToListItem:4});ss.initClass(c,a,{},spiff.ComboBoxView,[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[spiff.ComboBoxViewModel])]);ss.initClass(d,a,{add_spotlightedListItemChanged:function(i){this.$3$1=ss.delegateCombine(this.$3$1,i)},remove_spotlightedListItemChanged:function(i){this.$3$1=ss.delegateRemove(this.$3$1,i)},add_tabKeyPressed:function(i){this.$3$2=ss.delegateCombine(this.$3$2,i)},remove_tabKeyPressed:function(i){this.$3$2=ss.delegateRemove(this.$3$2,i)},get_spotlightedItemLogic:function(){return this.$3$3},set_spotlightedItemLogic:function(i){this.$3$3=i},resetSpotlightedItem:function(){var i=this.$w;this.$w=null;this.$t(i)},$t:function(i){if(ss.referenceEquals(i,this.$w)){return}this.$v=(ss.isValue(this.$w)?this.get_listViewModel().get_collection()[this.$w]:null);if(ss.isValue(this.$w)){this.get_listViewModel().spotlightItemAtIndex(ss.unbox(this.$w))}else{this.get_listViewModel().clearSpotlighting()}if(ss.staticEquals(this.$3$1,null)){return}this.$3$1(this.$v)},handleRemoveList:function(){this.resetSpotlightedItem();spiff.CompositeSearchWidget.prototype.handleRemoveList.call(this)},changeSpotlightedListItem:function(i,j){if(ss.isNullOrUndefined(this.get_listViewModel())||this.get_listViewModel().get_collection().length===0||i===4&&ss.isNullOrUndefined(j)){this.resetSpotlightedItem();return}var k=null;var l=this.$w;if(i===4){k=ss.indexOf(this.get_listViewModel().get_collection(),j);this.$w=k}if(ss.isNullOrUndefined(this.get_spotlightedItemLogic())){return}this.$w=this.get_spotlightedItemLogic().calculateNewSpotlightedItemIndex(l,i,k);this.$t(l)},$u:function(i){switch(i.which){case 38:{if(ss.isValue(this.get_listViewModel())){i.preventDefault();this.changeSpotlightedListItem(0,null)}break}case 40:{if(ss.isValue(this.get_listViewModel())){i.preventDefault();this.changeSpotlightedListItem(1,null)}break}case 36:{if(ss.isValue(this.get_listViewModel())&&ss.isValue(this.$w)){i.preventDefault();this.changeSpotlightedListItem(2,null)}break}case 35:{if(ss.isValue(this.get_listViewModel())&&ss.isValue(this.$w)){i.preventDefault();this.changeSpotlightedListItem(3,null)}break}case 9:{if(!ss.staticEquals(this.$3$2,null)){i.preventDefault();this.$3$2()}break}}}},spiff.CompositeSearchWidget,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initInterface(e,a,{calculateNewSpotlightedItemIndex:null});ss.initClass(f,a,{onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.dom.domRoot.focus()},showSubmenu:function(i,j,k){$('body').append(k.domRoot);spiff.SpiffBrowserViewport.getViewport(ss.mkdel(this,function(l){this.$s(l,j,k);k.domRoot.show()}))},buildMenu:function(i,j){spiff.MenuView.prototype.buildMenu.call(this,i,j);i.domRoot.on('mouseenter'+this.get_eventNamespace(),'.tabMenuItem',ss.mkdel(this,this.$n))},$s:function(i,j,k){var l=tab.DoubleUtil.roundToInt(k.domRoot.outerWidth(false));var m=tab.DoubleUtil.roundToInt(k.domRoot.outerHeight(false));var n=tab.DoubleUtil.roundToInt(j.outerWidth(false));var o=tab.PointUtil.fromPosition(tab.DomUtil.getPageOffset$1(j));var p=o.x+n;var q=o.y-parseInt(k.domRoot.children('.tabMenuContent').css('padding-top'));var r=i.getVisibleRoom({x:p,y:q});var s=null;if(r.roomBelow>=m){}else if(r.roomAbove+r.roomBelow>m){q-=ss.Int32.trunc(m-r.roomBelow)}else{var t=5;q-=ss.Int32.trunc(r.roomAbove);s=r.roomAbove-5+r.roomBelow}if(r.roomRight<l){p=Math.max(0,p-l-n)}var u={};u['top']=q+'px';u['left']=p+'px';u['max-height']=(ss.isValue(s)?(s+'px'):'');u['z-index']=tab.DomUtil.getComputedZIndex(j[0]);k.domRoot.css(u)},shown:function(i){spiff.MenuView.prototype.shown.call(this,i);var j=this.menuViewModel.get_focusedItem();var k=this.menuViewModel.get_menu().menuItems;if(ss.isValue(j)){this.$p(j)}else if(ss.isValue(k)){for(var l=0;l<k.length;l++){if(k[l].enabled){this.menuViewModel.set_focusedItem(k[l]);break}}}},onSized:function(){var i=this.dom.domRoot;if(f.$0(i)){i.css('overflow-y','scroll')}else{i.css('overflow-y','hidden')}},$n:function(i){if(i.pageX===this.$t&&i.pageY===this.$u){return}this.$t=i.pageX+0;this.$u=i.pageY+0;var j=$(i.currentTarget);var k=spiff.MenuView.getMenuItem(j);this.$o(spiff.MenuView.getMenuItemLevel(j));if(ss.isValue(k)){this.menuViewModel.set_focusedItem(k);if(ss.isValue(k.subMenu)){this.activateSubmenu(k,j)}}},$o:function(i){if(i<1){this.menuViewModel.hide();return}for(var j=this.menuStack.length-1;j>=i;j--){var k={$:this.menuStack[j]};k.$.domRoot.fadeOut(50,ss.mkdel({subMenu:k},function(){this.subMenu.$.dispose()}));ss.removeAt(this.menuStack,j)}},$q:function(i){var j=0,k,l,m;$sm1:for(;;){switch(j){case 0:{k=this.menuViewModel.get_focusedItem();l=this.menuViewModel.findMenuForMenuItem(k)||this.menuViewModel.get_menu();if(ss.isNullOrUndefined(l)){return}if(i.which===32||i.which===13){if(ss.isNullOrUndefined(k)){return}if(ss.isValue(k.subMenu)){this.$k()}else{this.menuViewModel.clickMenuItem(k)}j=1;continue $sm1}else if(i.which===36){this.menuViewModel.iterateFocus(1,-1);j=1;continue $sm1}else if(i.which===35){this.menuViewModel.iterateFocus(-1,l.menuItems.length);j=1;continue $sm1}else if(i.which===40){this.menuViewModel.iterateFocus(1,null);j=1;continue $sm1}else if(i.which===38){this.menuViewModel.iterateFocus(-1,null);j=1;continue $sm1}else if(i.which===39){this.$k();j=1;continue $sm1}else if(i.which===27){if(this.menuStack.length<=1){this.menuViewModel.hide()}else{j=2;continue $sm1}j=1;continue $sm1}else if(i.which===37){j=2;continue $sm1}else{return}j=1;continue $sm1}case 2:{if(!ss.referenceEquals(l,this.menuViewModel.get_menu())){m=this.getElementForMenuItem(k);if(ss.isNullOrUndefined(m)){return}this.$o(spiff.MenuView.getMenuItemLevel(m)-1);this.menuViewModel.set_focusedItem(this.menuViewModel.findItemContainingSubMenu(l))}j=1;continue $sm1}case 1:{i.preventDefault();i.stopPropagation();j=-1;break $sm1}default:{break $sm1}}}},$r:function(i){if(i.which>=97&&i.which<=122||i.which>=65&&i.which<=90||i.which>=48&&i.which<=57||i.which>127){this.menuViewModel.focusByNamePrefix(String.fromCharCode(i.which))}},$k:function(){if(ss.isValue(this.menuViewModel.get_focusedItem())&&ss.isValue(this.menuViewModel.get_focusedItem().subMenu)){var i=this.getElementForMenuItem(this.menuViewModel.get_focusedItem());if(ss.isValue(i)){this.activateSubmenu(this.menuViewModel.get_focusedItem(),i);var j=((this.menuViewModel.get_focusedItem().subMenu.menuItems.length>0)?this.menuViewModel.get_focusedItem().subMenu.menuItems[0]:null);if(ss.isValue(j)){this.menuViewModel.set_focusedItem(j)}}}},$l:function(i,j){var k=this.getElementForMenuItem(i);if(ss.isNullOrUndefined(k)){return}k.toggleClass('tabMenuFocusedItem',j);if(!j){return}this.$m(i);if(k.is(':visible')){var l=this.getMenuElementForMenuItem(i);if(ss.isNullOrUndefined(l)){return}var m=tab.DoubleUtil.roundToInt(k.position().top);if(m<0){l.scrollTop(tab.DoubleUtil.roundToInt(l.scrollTop())+m)}else{var n=tab.DoubleUtil.roundToInt(l.height());var o=m+tab.DoubleUtil.roundToInt(k.outerHeight());if(n<o){l.scrollTop(tab.DoubleUtil.roundToInt(l.scrollTop())+(o-n))}}}},$p:function(i){var j=this.getElementForMenuItem(i);j.toggleClass('tabMenuFocusedItem',true);var k=this.dom.domRoot;k.scrollTop(tab.DoubleUtil.roundToInt(k.scrollTop())+tab.DoubleUtil.roundToInt(j.position().top)-ss.Int32.div(tab.DoubleUtil.roundToInt(j.height()),2));this.$m(i)},$m:function(i){var j=this.getElementForMenuItem(i);if(i.isTextInput){this.element.removeAttr('aria-activedescendant');j.find('input').focus()}else{var k='tab-'+i.id;j.attr('id',k);this.element.attr('aria-activedescendant',k).focus()}}},spiff.MenuView,[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[spiff.MenuViewModel])]);ss.initClass(g,a,{},spiff.MenuTemplate,[ss.IDisposable]);ss.initClass(h,a,{get_uberPopupShadowHeight:function(){return 2}},spiff.UberPopupView,[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[spiff.UberPopupViewModel])]);(function(){tab.ObjectRegistry.registerType(spiff.ComboBoxView,c).call(null)})();(function(){tab.ObjectRegistry.registerType(spiff.CompositeSearchWidget,d).call(null)})();(function(){tab.ObjectRegistry.registerType(spiff.MenuView,f).call(null)})();(function(){tab.ObjectRegistry.registerType(spiff.UberPopupView,h).call(null)})()})();;
/*! BEGIN UIWeb */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqluiweb');var b=function(g,h){tab.ApplicationViewModel.call(this,g,h);$(window).on(this.createNamespacedEventName('resize'),ss.mkdel(this,function(){this.resize(false)}))};b.__typeName='tab.ApplicationViewModelWeb';global.tab.ApplicationViewModelWeb=b;var c=function(g){this.$y=null;this.$A=null;this.$z=null;tab.DataHighlighterView.call(this,g,new tab.DataHighlighterViewTemplate);this.$y=this.get_compositeSearchWidget();this.$y.add_listItemMouseEnter(ss.mkdel(this,this.$t));this.$y.add_listItemMouseMove(ss.mkdel(this,this.$u));this.$y.add_spotlightedListItemChanged(ss.mkdel(this,this.$x));this.$y.add_tabKeyPressed(ss.mkdel(this,this.$s));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$y.remove_listItemMouseEnter(ss.mkdel(this,this.$t));this.$y.remove_listItemMouseMove(ss.mkdel(this,this.$u));this.$y.remove_spotlightedListItemChanged(ss.mkdel(this,this.$x));this.$y.remove_tabKeyPressed(ss.mkdel(this,this.$s))})));this.$y.set_spotlightedItemLogic(this)};c.__typeName='tab.DataHighlighterViewWeb';global.tab.DataHighlighterViewWeb=c;var d=function(g){this.$2=false;this.$3='vertical';this.$1$1=false;this.$2=g;this.forgetInputDevice()};d.__typeName='tab.ScrollAdjuster';global.tab.ScrollAdjuster=d;var e=function(){};e.__typeName='tab.ScrollAdjusterUtil';e.getProperty=function(g,h){return g[h]};e.adjustVerticalScrollDeltaForMap=function(g){if(g%tab.MapUtil.defaultWheelDeltaIncrement!==0){var h=Math.abs(g);if(h>0&&h<tab.MapUtil.defaultWheelDeltaIncrement){h=tab.MapUtil.defaultWheelDeltaIncrement}var i=ss.Int32.div(h+ss.Int32.div(tab.MapUtil.defaultWheelDeltaIncrement,2),tab.MapUtil.defaultWheelDeltaIncrement);if(g<0){i*=-1}g=tab.MapUtil.defaultWheelDeltaIncrement*i}return g};global.tab.ScrollAdjusterUtil=e;var f=function(g,h){this.$0=null;this.$1=null;this.$0=g.get(0);this.$1=h.get(0)};f.__typeName='tab.WebScroller';global.tab.WebScroller=f;ss.initClass(b,a,{destroy:function(){$(window).off(this.createNamespacedEventName('resize'));tab.ApplicationViewModel.prototype.destroy.call(this)}},tab.ApplicationViewModel,[tab.IWidget,tab.IAppendableView,ss.IDisposable,tab.IClient,tab.IApiStorytellingClient]);ss.initClass(c,a,{$x:function(g){this.$z=g;if(ss.isValue(this.$z)){var h=this.$z.get_data();this.get_viewModel().highlightItems([h.objectId])}else if(this.currentListPopulationMode===2){this.get_viewModel().restoreSearchResultsHighlighting()}else{this.get_viewModel().clearHighlighting()}},$r:function(g){if(ss.isNullOrUndefined(g.get_data())){return}this.$y.changeSpotlightedListItem(4,g);if(ss.isNullOrUndefined(this.$A)){var h=$(document).find('.tabDataHighlighterViewSearchResultList');this.$A=spiff.EventUtil.bindWithDispose(h,'mouseleave',ss.mkdel(this,this.$v));this.disposables.add$1(this.$A)}},$t:function(g){this.$r(g)},$u:function(g){this.$r(g)},$v:function(g){this.$y.resetSpotlightedItem();this.$w()},removeList:function(){this.$w();tab.DataHighlighterView.prototype.removeList.call(this)},$w:function(){if(ss.isNullOrUndefined(this.$A)){return}this.$A.dispose();this.$A=null},handleEnterKeyPress:function(){if(ss.isValue(this.$z)){this.handleListItemSelected(this.$z);return}tab.DataHighlighterView.prototype.handleEnterKeyPress.call(this)},handleListItemSelected:function(g){this.removeList();tab.DataHighlighterView.prototype.handleListItemSelected.call(this,g)},$s:function(){var g;if(ss.isNullOrUndefined(this.$z)){var h=this.$y.get_listViewModel();if(ss.isNullOrUndefined(h)||h.get_collection().length===0){return}var i=this.get_compositeSearchWidget().get_textInputView().get_text().trim().length;if(i===0){this.removeList();return}g=h.get_collection()[0].get_data()}else{g=this.$z.get_data()}this.get_compositeSearchWidget().setSearchText(g.text);this.dataHighlighterViewModel.sendSearchQuery(g.text,false)},populateAndDisplayList:function(g,h){tab.DataHighlighterView.prototype.populateAndDisplayList.call(this,g,h);this.$y.resetSpotlightedItem()},calculateNewSpotlightedItemIndex:function(g,h,i){var j=this.get_compositeSearchWidget().get_listViewModel().get_collection().length-(this.notShownResultsListItemIsVisible?2:1);if(h===4){if(ss.Nullable$1.gt(i,j)){i=j}return i}if(ss.isNullOrUndefined(g)){return 0}var k=g;switch(h){case 1:{k=ss.Nullable$1.add(k,1);if(ss.Nullable$1.gt(k,j)){k=j}break}case 0:{k=ss.Nullable$1.sub(k,1);if(ss.Nullable$1.lt(k,0)){k=null}break}case 2:{k=0;break}case 3:{k=j;break}}return k}},tab.DataHighlighterView,[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[tab.DataHighlighterViewModel]),spiff.IListItemContentCreator,spiff.ICompositeSearchWidgetSpotlightedItemLogic]);ss.initClass(d,a,{get_isFromTouchpad:function(){return this.$1$1},set_isFromTouchpad:function(g){this.$1$1=g},forgetInputDevice:function(){this.set_isFromTouchpad(false)},normalizeScrollWheelDeltas:function(g){var h=e.getProperty(g,'axis');var i=e.getProperty(g,'wheelDelta');var j=e.getProperty(g,'wheelDeltaY');var k=e.getProperty(g,'wheelDeltaX');var l=e.getProperty(g,'deltaY');var m=e.getProperty(g,'deltaX');var n=e.getProperty(g,'deltaMode');var o=e.getProperty(g,'detail');var p=0,q=0;var r=0,s=0;if(ss.isValue(o)){q=ss.unbox(o)}if(ss.isValue(i)){q=-ss.unbox(i)/120}if(ss.isValue(j)){q=-ss.unbox(j)/120}if(ss.isValue(k)){p=-ss.unbox(k)/120}if(ss.isValue(h)&&h===1){p=q;q=0}r=ss.Int32.trunc(p*10);s=ss.Int32.trunc(q*10);if(ss.isValue(l)){s=ss.unbox(l)}if(ss.isValue(m)){r=ss.unbox(m)}if((r!==0||s!==0)&&ss.isValue(n)){if(ss.unbox(n)===1){var t=(BrowserSupport.BrowserSupport.IsMac()?20:40);r*=t;s*=t}else if(ss.unbox(n)===2){r*=800;s*=800}}this.$0(s);return((this.get_isFromTouchpad()&&this.$2)?this.$1(r,s):{x:r,y:s})},$0:function(g){var h=Math.abs(g);if(h%4.000244140625===0){this.set_isFromTouchpad(false)}else if(h>0&&h<4.000244140625){this.set_isFromTouchpad(true)}},$1:function(g,h){var i=((g!==0&&h!==0)?this.$3:((g===0)?'vertical':'horizontal'));if(this.$3==='vertical'){g=0}if(this.$3==='horizontal'){h=0}this.$3=i;return{x:g,y:h}}});ss.initClass(e,a,{});ss.initClass(f,a,{get_canScrollX:function(){return this.get_maxScroll().x>0},get_canScrollY:function(){return this.get_maxScroll().y>0},get_scrollPos:function(){var g=(ss.isNullOrUndefined(this.$0)?0:$(this.$0).scrollLeft());var h=(ss.isNullOrUndefined(this.$1)?0:tab.DoubleUtil.roundToInt($(this.$1).scrollTop()));return{x:g,y:h}},get_maxScroll:function(){return{x:(ss.isNullOrUndefined(this.$0)?0:(this.$0.scrollWidth-this.$0.offsetWidth)),y:(ss.isNullOrUndefined(this.$1)?0:(this.$1.scrollHeight-this.$1.offsetHeight))}},get_visibleArea:function(){return{w:(ss.isNullOrUndefined(this.$0)?0:this.$0.offsetWidth),h:(ss.isNullOrUndefined(this.$1)?0:this.$1.offsetHeight)}},scrollX:function(g){if(this.get_canScrollX()){this.$0.scrollLeft+=g}},scrollY:function(g){if(this.get_canScrollY()){this.$1.scrollTop+=g}},setScrollTarget:function(g){},refresh:function(){}},null,[spiff.IScroller]);(function(){tab.ObjectRegistry.registerType(tab.DataHighlighterView,c).call(null)})();(function(){d.$0=40;d.$1=20;d.$2=800;d.$3=120;d.$6=10;d.$4=4.000244140625;d.$5=1})()})();;
/*! BEGIN VizZoneWeb */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqlvizzoneweb');var b=function(){};b.__typeName='tab.$0';var c=function(){this.$5=false;this.$6=false;this.$7=false;this.$4=false;this.$3=false;this.$1=false;this.$2=false;this.$8=true;this.$9=null;this.$a=null};c.__typeName='tab.$1';var d=function(){this.$0=null;this.$1=0};d.__typeName='tab.$2';var e=function(C,D,E,F,G,H){this.$4=null;this.$2=null;this.$3=0;this.$0=null;this.$5=null;this.$1=false;this.$4=C;this.$2=D;this.$3=E;this.$0=F;this.$5=G;this.$1=H};e.__typeName='tab.$3';var f=function(C,D,E){this.$1=0;this.$2=0;this.$0=0;this.$1=C;this.$2=D;this.$0=E};f.__typeName='tab.$4';var g=function(C){this.$9=10;spiff.PureRenderComponent.call(this,C)};g.__typeName='tab.AnnotationSelectionChromeComponent';global.tab.AnnotationSelectionChromeComponent=g;var h=function(C,D){this.$n=null;this.$o=null;this.$s=null;this.$t=null;this.$q=null;this.$r=null;this.$p=null;v.call(this,$(document.createElement('div')),$(D),C);this.element.addClass('tab-tiledViewerAxisContextMenu');this.$n=spiff.LabelButton.newNativeButton();this.$n.element.addClass('tab-tvAxisContextMenuButton');this.$n.element.css('border','0');this.$n.element.css('position','absolute');this.$n.element.css('padding','0px');this.element.append(this.$n.element);this.$o=this.$n.element;this.$o.addClass('axisContextMenuDropdownArrow');this.$r=null;this.$t=null;D.appendChild(this.element.get(0));this.$9();this.set_enabled(true);this.$o.css('display','none')};h.__typeName='tab.AxisContextMenu';global.tab.AxisContextMenu=h;var i=function(C){this.$4=0;this.$2=0;this.$3=0;this.$4=C;this.$2=1;this.$3=0};i.__typeName='tab.ContinuousScrollZoom';global.tab.ContinuousScrollZoom=i;var j=function(){};j.__typeName='tab.CursorKey';global.tab.CursorKey=j;var k=function(C,D){this.$3=0;this.$6=0;this.$2=0;this.$5=0;this.$1=false;this.$4=0;this.$2=0;this.$3=0;this.$6=1;this.$5=C;this.$1=D};k.__typeName='tab.DiscreteScrollZoom';global.tab.DiscreteScrollZoom=k;var l=function(C,D){this.$w=null;this.$x=null;this.$y=null;this.$q=null;this.$r=null;this.$t=false;this.$u=null;this.$s=null;this.$v=null;this.$z=null;v.call(this,$(document.createElement('div')),$(D),C);this.$w=this.get_parentViewer().get_inputHandlers();this.element.addClass('tab-tiledViewerDrill');this.$q=$("<span class='tab-tvLevelDrillDown tab-levelDrillingIcon tvDrillDown' />").appendTo(this.element);this.$x=new spiff.Button(this.$q);this.$x.add_press(ss.mkdel(this,this.$f));this.$r=$("<span class='tab-tvLevelDrillUp tab-levelDrillingIcon tvDrillUp' />").appendTo(this.element);this.$y=new spiff.Button(this.$r);this.$y.add_press(ss.mkdel(this,this.$g));D.appendChild(this.element.get(0));this.$i();this.turnDrillWidgetsOff()};l.__typeName='tab.Drilling';global.tab.Drilling=l;var m=function(C){this.$0=null;this.$0=C};m.__typeName='tab.FloatingZoomToolbarOperationsWeb';global.tab.FloatingZoomToolbarOperationsWeb=m;var n=function(C,D,E,F,G){tab.FloatingZoomToolbar.call(this,C,D,E,F,G);this.init()};n.__typeName='tab.FloatingZoomToolbarWeb';global.tab.FloatingZoomToolbarWeb=n;var o=function(C){this.$0=null;this.$0=C};o.__typeName='tab.HoverApi';global.tab.HoverApi=o;var p=function(){};p.__typeName='tab.IScrollZoom';global.tab.IScrollZoom=p;var q=function(C){this.$j=null;this.$i=null;this.$k=null;this.$c=new tab.DisposableHolder;this.$b=null;this.$f=null;this.$g=false;this.$h=null;this.$e=false;this.$d=false;tab.Param.verifyValue(C,'tooltip');this.$j=C;this.$i=[];this.$k=q.$0()};q.__typeName='tab.LegacyTooltipBehavior';q.$0=function(){q.$6++;return'mousemove.LegacyTooltipBehavior'+q.$6.toString()};global.tab.LegacyTooltipBehavior=q;var r=function(C){this.$u=null;tab.MapsSearchView.call(this,C,tab.MapsSearchView.newMapsSearchViewTemplate());this.get_compositeSearchWidget().get_textInputView().get_inputElement().mouseup(ss.mkdel(this,this.$r));var D=this.get_compositeSearchWidget();D.add_spotlightedListItemChanged(ss.mkdel(this,this.$q));D.add_tabKeyPressed(ss.mkdel(this,this.$s));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){D.remove_spotlightedListItemChanged(ss.mkdel(this,this.$q));D.remove_tabKeyPressed(ss.mkdel(this,this.$s))})));D.set_spotlightedItemLogic(this)};r.__typeName='tab.MapsSearchViewWeb';global.tab.MapsSearchViewWeb=r;var s=function(C,D){this.$3=null;this.$2(C,D)};s.__typeName='tab.PaneTableMouseCapture';s.$0=function(){return!tsConfig.is_mobile&&BrowserSupport.BrowserSupport.AddEventListener()};global.tab.PaneTableMouseCapture=s;var t=function(){this.scrollX=null;this.scrollY=null;tab.PaneTableTemplate.call(this,$("<div class='tab-tiledViewer placeholder'><div class='tab-clip'><h2 class='tab-tvTitle tvimagesNS'></h2><div class='tab-tvTLSpacer tvimagesNS'><img></img></div><div class='tab-tvTRSpacer tvimagesNS'><img></img></div><div class='tab-tvBLSpacer tvimagesNS'><img></img></div><div class='tab-tvBRSpacer tvimagesNS'><img></img></div><div class='tab-tvYLabel tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvLeftAxis tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvRightAxis tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvXLabel tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvBottomAxis tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvTopAxis tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvView tvimagesNS'><div class='tvScrollContainer'><div class='tvBackgroundContainer'></div><div class='tvimagesContainer'></div></div><div class='tvViewportBorders'></div></div><div class='tab-tvCaption tvimagesNS'></div><div class='tab-tvScrollX tvimages'><div class='tvimagesContainer'></div></div><div class='tab-tvScrollY tvimages'><div class='tvimagesContainer'></div></div></div></div>"));var C=ss.mkdel(this,this.getElementBySelector);this.scrollX=C('.tab-tvScrollX');this.scrollY=C('.tab-tvScrollY')};t.__typeName='tab.PaneTableTemplateWeb';global.tab.PaneTableTemplateWeb=t;var u=function(C){this.$2m={};this.$2f=null;this.$2j=false;this.$2l=false;this.$2h=null;this.$2v=null;this.$2q=null;this.drillWidget=null;this.sortWidget=null;this.axisContextMenuWidget=null;this.$2s=null;this.$2t=null;this.scrollAdjuster=null;this.$2k=null;this.$2n=false;this.$2r=null;this.$2i=null;this.$2w=null;this.$2o=false;this.$2e=null;this.$2u=null;this.$2g=null;this.$2p=null;this.deferredHeaderResizerManager=null;this.deferredCellResizerManager=null;this.deferredAxisResizerManager=null;tab.PaneTableView.call(this,C,new t);this.$2f=this.dom;this.$2a();this.$2o=false;var D={tap:ss.mkdel(this,function(E){this.$2p={x:E.pageX,y:E.pageY};this.refreshScrollingAndAxisIcons();if(ss.referenceEquals(E.currentTarget,E.target)){this.clearSelection()}})};this.$1C();this.$1B();this.$1A();this.$1E();this.$1D();this.disposables.add$1(new s(document.body,this));this.disposables.add$1(new spiff.TableauEventHandler.$ctor1(this.dom.enclosingDiv.get(0),D));this.init()};u.__typeName='tab.PaneTableViewWeb';u.$1=function(C,D){return C.x>D.pageX||C.x+C.w<=D.pageX||C.y>D.pageY||C.y+C.h<=D.pageY};u.$0=function(C,D){var E=ss.round(D['clientX']);var F=ss.round(D['clientY']);var G={x:E,y:F};var H=C.toLocalCoords(G,false);return H};u.$3=function(C,D){if(C.get_regionPart()==='viz'){return tab.SelectActionResolver.fromNormalizedEvent(D,1)}return tab.SelectActionResolver.fromNormalizedEvent(D,2)};u.$2=function(){};global.tab.PaneTableViewWeb=u;var v=function(C,D,E){this.$6=0;this.$8=null;this.$7=null;this.$2$1=null;spiff.Widget.call(this,C);this.$6=v.$0.length;v.$0.push(this);this.$8=D;this.set_parentViewer(E)};v.__typeName='tab.SortDrillBase';global.tab.SortDrillBase=v;var w=function(C,D){this.$D=null;this.$z=null;this.$B=null;this.$E=null;this.$A=null;this.$F=null;this.$H=null;this.$G=null;this.$C=null;v.call(this,$(document.createElement('div')),$(D),C);this.element.addClass('tab-tiledViewerSort');this.$B=this.$b();this.$D=spiff.LabelButton.newNativeButton();this.$D.element.addClass('tab-tvSortIndicator');this.$D.element.css('border','0');this.$D.element.css('position','absolute');this.$D.element.css('padding','0px');this.element.append(this.$D.element);this.$z=this.$D.element;$(D).find('.tab-tiledViewerSort').remove();D.appendChild(this.element.get(0));this.$9();this.$s();this.$z.css('display','none')};w.__typeName='tab.Sorting';global.tab.Sorting=w;var x=function(){this.geometry=null;this.visibleGeometry=null;this.sortIndicators=null;this.axisRegions=null;this.posTVx=0;this.posTVy=0;this.dom=null;this.sheetid=null;this.layoutSession=null;this.session=null;this.inputHandlers=null;this.tlspacerAreaX=null;this.tlspacerAreaY=null;this.blspacerArea=null;this.regions=null;this.titleHeight=0};x.__typeName='tab.TiledViewerModel';global.tab.TiledViewerModel=x;var y=function(C,D,E,F,G,H,I,J,K){this.$M=false;this.$U=null;this.$P=null;this.$O=null;this.$S=null;this.$T=null;this.$N=null;this.$Q=false;this.$R=false;tab.TiledViewerRegion.call(this,C,D,H,I,J,K);this.$P=E;if(this.get_regionPart()==='viz'){y.$2();tab.ModifierKeyState.add_modifierKeysChanged(ss.mkdel(this,this.$p));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.ModifierKeyState.remove_modifierKeysChanged(ss.mkdel(this,this.$p))})))}this.$M=true;this.scroller=new tab.WebScroller(F,G)};y.__typeName='tab.TiledViewerRegionWeb';y.$2=function(){if(ss.isValue(y.$6)){return}var C='default';y.$6={};y.$6['zoomIn']=(BrowserSupport.BrowserSupport.IsIE()?'crosshair':('url('+tableau.util.assetUrl('cursors/zoomin.png',true)+') 8 7, '+C));y.$6['zoomOut']=(BrowserSupport.BrowserSupport.IsIE()?'crosshair':('url('+tableau.util.assetUrl('cursors/zoomout.png',true)+') 8 7, '+C));y.$6['panDrag']=(BrowserSupport.BrowserSupport.IsIE()?'move':('url('+tableau.util.assetUrl('cursors/pandrag.png',true)+') 9 9, '+C));y.$6['rectSelect']=(BrowserSupport.BrowserSupport.IsIE()?'crosshair':('url('+tableau.util.assetUrl('cursors/rectdrag.png',true)+') 2 2, '+C));y.$6['lassoSelect']=(BrowserSupport.BrowserSupport.IsIE()?'crosshair':('url('+tableau.util.assetUrl('cursors/lassodrag.png',true)+') 2 2, '+C));y.$6['radialSelect']=(BrowserSupport.BrowserSupport.IsIE()?'crosshair':('url('+tableau.util.assetUrl('cursors/radialdrag.png',true)+') 2 2, '+C));y.$6['rectExtended']=(BrowserSupport.BrowserSupport.IsIE()?'crosshair':('url('+tableau.util.assetUrl('cursors/rectdragextended.png',true)+') 2 2, '+C));y.$6['lassoExtended']=(BrowserSupport.BrowserSupport.IsIE()?'crosshair':('url('+tableau.util.assetUrl('cursors/lassodragextended.png',true)+') 2 2, '+C));y.$6['radialExtended']=(BrowserSupport.BrowserSupport.IsIE()?'crosshair':('url('+tableau.util.assetUrl('cursors/radialdragextended.png',true)+') 2 2, '+C));y.$6['dragSelect']='crosshair';y.$6['select']='pointer';y.$6['defaultKey']='default'};y.$0=function(C){return C.shiftKey&&!spiff.EventUtil.isCtrlKey(C)};y.$1=function(C){return!C.altKey&&C.shiftKey&&spiff.EventUtil.isCtrlKey(C)};global.tab.TiledViewerRegionWeb=y;var z=function(C,D){tab.TooltipBaseLegacyMode.call(this,C,D);this.get_tooltip().add_showed(ss.mkdel(this,this.showCommandAreaAndActions))};z.__typeName='tab.TooltipLegacyMode';global.tab.TooltipLegacyMode=z;var A=function(C){this.$3=null;spiff.PureRenderComponent.call(this,C)};A.__typeName='tab.VizContextMenuComponent';global.tab.VizContextMenuComponent=A;var B=function(){tab.VizZoneFactory.call(this)};B.__typeName='tab.VizZoneWebFactory';global.tab.VizZoneWebFactory=B;ss.initEnum(b,a,{$3:0,$1:1,$2:2,$0:3});ss.initClass(c,a,{$0:function(){return!this.$5&&!this.$7&&!this.$6&&!this.$4&&!this.$3&&!this.$1&&!this.$2}});ss.initClass(d,a,{});ss.initClass(e,a,{});ss.initClass(f,a,{});ss.initClass(g,a,{render:function(){return(this.props.visible?this.$8():null)},$1:function(){var C=new Object;C.iconClassName='tabAuthoringAnnotationChevronIcon';C.customClassName='tabAuthoringAnnotationChevron';return React.createElement(spiff.IconButtonComponent,C)},$7:function(C){var D=[];if(this.props.annotations.length!==1){return D}if(C.annotateEnum==='area'&&tab.FeatureFlags.isEnabled('AnnotationAreaResize')){D=_.map(tab.AnnotationSelectionChromeViewModel.resizeHandlesArea,ss.mkdel(this,function(E){return this.$4(C,E,null,null)}))}if((C.annotateEnum==='point'||C.annotateEnum==='mark')&&tab.FeatureFlags.isEnabled('AnnotationMarkAndPointResize')){D=_.map(tab.AnnotationSelectionChromeViewModel.resizeHandlesPointAndMark,ss.mkdel(this,function(E){return this.$4(C,E,null,null)}))}return D},$4:function(C,D,E,F){return spiff.DOMElements.div({className:D,style:E,onMouseDown:ss.mkdel(this,function(G){if(G.button===0){this.props.onHandlerMouseDown(D,C)}}),onMouseUp:ss.mkdel(this,function(G){if(G.button===0){this.props.clearMouseUp()}}),onClick:ss.mkdel(this,function(G){this.props.clearMouseUp()})},F)},$5:function(){if(this.props.annotations.length!==1||!tab.FeatureFlags.isEnabled('AnnotationMovePointTarget')){return null}var C=this.props.annotations[0];if(C.annotateEnum==='point'){var D=spiff.DOMElements.div({className:tab.AnnotationSelectionChromeViewModel.movePointTargetIcon});return this.$4(C,tab.AnnotationSelectionChromeViewModel.movePointTargetHandler,this.$6(C),D)}return null},$6:function(C){return{left:C.targetPoint.x-ss.Int32.div(this.$9,2)-this.props.scrollOffset.x,top:C.targetPoint.y-ss.Int32.div(this.$9,2)-this.props.scrollOffset.y}},$2:function(C){return{left:C.areaRect.x-this.props.scrollOffset.x,top:C.areaRect.y-this.props.scrollOffset.y,width:C.areaRect.w,height:C.areaRect.h}},$3:function(){var C=this.props.draggingShadow;return{left:C.x,top:C.y,width:C.w,height:C.h}},$0:function(C,D){return{key:C.annotationId,className:(D?'tabAnnotationHoverChrome':'tabAnnotationSelectionChrome'),style:this.$2(C)}},$8:function(){var C=this.props.renderRegion;var D={className:'tabAnnotationSelectionChromeHolder',style:{left:C.x,top:C.y,width:C.w,height:C.h,position:'absolute'}};var E=_.map(this.props.annotations,ss.mkdel(this,function(G){return spiff.DOMElements.div(this.$0(G,false),this.$1(),this.$7(G))}));if(ss.isValue(this.props.hoveredAnnotation)){var F=this.props.hoveredAnnotation;E.push(spiff.DOMElements.div(this.$0(F,true),this.$1()))}if(ss.isValue(this.props.draggingShadow)){E.push(spiff.DOMElements.div({key:'draggingAnnotation',className:'tabAnnotationDraggingChrome',style:this.$3()}))}return spiff.DOMElements.div(D,E,this.$5())}},spiff.PureRenderComponent);ss.initClass(v,a,{get_enabled:function(){return ss.isValue(this.$7)},set_enabled:function(C){if(this.get_widgetFeatureEnabled()){if(C){if(ss.isNullOrUndefined(this.$7)){this.$7=spiff.EventUtil.bindWithDispose(this.$8,'mousemove',ss.mkdel(this,function(D){this.onMouseMove(D)}))}}else{this.$7=tab.MiscUtil.dispose$1(this.$7)}}},get_widgetFeatureEnabled:null,get_parentViewer:function(){return this.$2$1},set_parentViewer:function(C){this.$2$1=C},get_scrollAmount:function(){var C=this.get_parentViewer().get_domWeb().scrollX.get(0);var D=this.get_parentViewer().get_domWeb().scrollY.get(0);return{x:C.scrollLeft,y:D.scrollTop}},dispose:function(){ss.remove(v.$0,this);this.element.remove();this.$7=tab.MiscUtil.dispose$1(this.$7);spiff.Widget.prototype.dispose.call(this)},isOtherActiveInRect:function(C){for(var D=0;D<v.$0.length;D++){if(D!==this.$6){var E=v.$0[D];if(E.isActiveInRect(C)){return true}}}return false},isActiveInRect:function(C){return false},onMouseMove:null,getSIRegionFromName:function(C,D){var E,F;var G=ss.replaceAllString(D,'Area','');var H=C.get_sortIndicators();var I=H.sortIndicatorRegions;for(E=0,F=I.length;E<F;E++){if(ss.referenceEquals(I[E].sortRegion.toString(),G)){return I[E]}}return null},showNodeAt:function(C,D,E){$(C).css('top',D+'px');$(C).css('left',E+'px');$(C).css('display','')},getWidgetPos:function(C,D,E){if(C==='level'){if(E==='y'){return{x:D.l+ss.Int32.div(D.w,2)-4,y:D.t+2}}else{return{x:D.l+2,y:D.t+ss.Int32.div(D.h,2)-4}}}else{return{x:D['x']+2,y:D['y']+2}}},hideNode:function(C){$(C).css('display','none')},regionHitTest:function(C,D){var E=C;var F=new ss.ObjectEnumerator(E);try{while(F.moveNext()){var G=F.current();if(ss.isValue(G.value)&&tab.RectUtil.inRect(G.value,D)){return G.key}}}finally{F.dispose()}return null},clone:function(C){if(ss.isNullOrUndefined(C)){return C}return this.mixin(new Object,C)},mixin:function(C,D){var E=D;var F=new ss.ObjectEnumerator(E);try{while(F.moveNext()){var G=F.current();var H=C[G.key];if(ss.isNullOrUndefined(H)||!ss.referenceEquals(H,E[G.key])){C[G.key]=E[G.key]}}}finally{F.dispose()}return C},getPaneTableViewMousePositionFromCoordinates:function(C,D,E){return{x:C-E.get_tableViewPosition().x,y:D-E.get_tableViewPosition().y}},getJQueryMousePositionFromPaneTableViewCoordinates:function(C,D){return{left:C+this.get_parentViewer().get_tableViewPosition().x,top:D+this.get_parentViewer().get_tableViewPosition().y}},repositionAndShowElement:function(C,D){C.style.width=D.w+'px';C.style.height=D.h+'px';this.showNodeAt(C,D.y,D.x)},computeTvButtonRectFromUnrolledRegionCoordinates:function(C,D,E,F){C.y-=F.y-E.y;C.x-=F.x-E.x;var G={x:C.x+2,y:C.y+2};var H={x:C.x+C.w-2,y:C.y+C.h-2};if(tab.RectUtil.inRect(D,G)&&tab.RectUtil.inRect(D,H)){return C}return null},clearButtonImageClass:function(C,D){var E=ss.formatString('({0}\\w+)?',C);var F=new RegExp(E,'g');var G=D.className;var H=G.replace(F,'').trim();D.className=H}},spiff.Widget,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(h,a,{get_widgetFeatureEnabled:function(){return tab.FeatureFlags.isEnabled('EditAxisWebAffordance')&&tsConfig.is_authoring},dispose:function(){this.set_parentViewer(null);this.$n.element.remove();this.$n.dispose();this.$p.dispose();this.$o.off('mouseout');v.prototype.dispose.call(this)},setLocalCoords:function(C){this.$q=C},onUpdate:function(){this.$s=this.get_parentViewer().get_visibleGeometry();this.$g(this.get_parentViewer().get_capturedPaneTableViewMousePosition())},hideAxisContextMenuIcon:function(){this.hideNode(this.$o.get(0))},onMouseMove:function(C){this.$h(C)},isActiveInRect:function(C){return false},$9:function(){var C={tap:ss.mkdel(this,function(D){this.$j(D)})};this.$p=new spiff.TableauEventHandler.$ctor1(this.$o.get(0),C);this.disposables.add$1(this.$p);this.$o.mouseout(ss.mkdel(this,this.$i))},$h:function(C){if(C.button>0){return}var D=this.getPaneTableViewMousePositionFromCoordinates(C.pageX,C.pageY,this.get_parentViewer());this.$g(D)},$l:function(C){this.$t=null;if(ss.isNullOrUndefined(C)){return}else if(C.indexOf('leftaxis'.toString())!==-1){this.$t='leftaxis'}else if(C.indexOf('rightaxis'.toString())!==-1){this.$t='rightaxis'}else if(C.indexOf('topaxis'.toString())!==-1){this.$t='topaxis'}else if(C.indexOf('bottomaxis'.toString())!==-1){this.$t='bottomaxis'}},$b:function(){return this.$t==='bottomaxis'||this.$t==='topaxis'},$c:function(){return this.$t==='leftaxis'||this.$t==='rightaxis'},$d:function(C){if(this.$c()){C.y+=this.get_scrollAmount().y}if(this.$b()){C.x+=this.get_scrollAmount().x}return C},$g:function(C){if(ss.isNullOrUndefined(C)||!this.get_widgetFeatureEnabled()){return}var D=this.regionHitTest(this.$s,C);this.$l(D);if(ss.isNullOrUndefined(this.$t)){this.hideAxisContextMenuIcon();return}var E=this.$s;this.$k(E[D])},$j:function(C){spiff.EventUtil.stopEvent(C);tab.AxisAuthoringTelemetry.logAxisCaretClickEvent();this.$m(true);this.$a(C.pageX,C.pageY);this.$f()},$i:function(C){this.$m(false);C.stopPropagation()},$m:function(C){this.$o.toggleClass('active',C)},$a:function(C,D){var E=this.getPaneTableViewMousePositionFromCoordinates(C,D,this.get_parentViewer());var F=this.regionHitTest(this.$s,E);if(ss.isNullOrUndefined(F)){return}var G=this.$s;E.x-=G[F].l;E.y-=G[F].t;E=this.$d(E);this.setLocalCoords(E)},$f:function(){var C=new spiff.ShowMenuOptions(this.$o,false);C.cursorPosition=this.getJQueryMousePositionFromPaneTableViewCoordinates(this.$r.x,this.$r.y+this.$r.h);var D=new tab.BuildServerAxisContextMenuCmd;D.c['visualIdPresModel']=this.get_parentViewer().get_visualId();D.c['regionPoint']=tab.PointUtil.toPresModel(this.$q);D.c['r']=this.$t;D.invoke().then(ss.mkdel(this,function(E){if(this.$o.css('display')==='none'){this.$o.css('display','')}var F=E.$$c['commands'];var G=tab.WidgetUtil.menuViewModelFromCommands(F,tab.WidgetUtil.commandMenuItemClicked,null,null,null);G.show(C);tab.AxisAuthoringTelemetry.logAxisContextMenuShownEvent()}))},$k:function(C){var D,E;var F=this.get_parentViewer().get_axisRegions();var G=this.get_parentViewer().get_capturedPaneTableViewMousePosition();for(D=0,E=F.length;D<E;D++){var H=F[D];if(H.r!==this.$t){continue}var I=tab.RecordCast.rectPresModelAsRectXY(H.itemRect);var J=tab.RecordCast.rectPresModelAsRectXY(H.regionRect);if(ss.isNullOrUndefined(I)||ss.isNullOrUndefined(J)){continue}var K=this.$e(C,J);if(tab.RectXYUtil.inRect(I,K)){var L=H.itemRect;var M={x:L.x+L.w-14-2,y:L.y+3,w:14,h:14};M=this.computeTvButtonRectFromUnrolledRegionCoordinates(M,C,G,K);if(ss.isValue(M)){this.$r={x:M.x,y:M.y,w:M.w,h:M.h};this.$m(false);this.repositionAndShowElement(this.$o.get(0),this.$r);return}}}this.hideAxisContextMenuIcon()},$e:function(C,D){var E=this.get_parentViewer().get_capturedPaneTableViewMousePosition();var F={x:E.x,y:E.y};F.y+=D.y-C.t;F.x+=D.x-C.l;return this.$d(F)}},v,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initInterface(p,a,{update:null,currentZoomFactor:null,currentZoomLevel:null});ss.initClass(i,a,{update:function(C){var D=this.$1(C);this.$2*=D;this.$3=tab.MapUtil.convertZoomFactorToZoomLevel(this.$2);this.$0();return true},currentZoomFactor:function(){return this.$2},currentZoomLevel:function(){return this.$4-this.$3},$1:function(C){var D=0.00025;var E=C;if(Math.abs(E)*D>=1){E=3600}var F=0;if(Math.abs(E)<=5){F=0.02}else if(Math.abs(E)<=10){F=0.01}else if(Math.abs(E)<=50){F=0.002}else if(Math.abs(E)<=100){F=0.001}else if(Math.abs(E)<=200){F=0.0005}else{F=D}var G=1+E*-F;return G},$0:function(){if(this.currentZoomLevel()<=0){this.$2=1/tab.MapUtil.getZoomFactorForDesiredZoomLevel(this.$4,0);this.$3=tab.MapUtil.convertZoomFactorToZoomLevel(this.$2)}}},null,[p]);ss.initEnum(j,a,{zoomIn:'zoomIn',zoomOut:'zoomOut',panDrag:'panDrag',rectSelect:'rectSelect',lassoSelect:'lassoSelect',radialSelect:'radialSelect',rectExtended:'rectExtended',lassoExtended:'lassoExtended',radialExtended:'radialExtended',dragSelect:'dragSelect',select:'select',defaultKey:'defaultKey'},true);ss.initClass(k,a,{update:function(C){if(this.$1){this.$4++;if(this.$4%tab.MapUtil.touchEventSamplingRate!==0){return false}}this.$2+=tab.ScrollAdjusterUtil.adjustVerticalScrollDeltaForMap(C);this.$3=ss.Int32.div(this.$2,tab.MapUtil.defaultWheelDeltaIncrement)*tab.MapUtil.minimumZoomLevelIncrement;this.$6=tab.MapUtil.calculateZoomFactor(this.$2);this.$0();return true},currentZoomFactor:function(){return 1/this.$6},currentZoomLevel:function(){return this.$5-this.$3},$0:function(){if(!tab.MapUtil.allowZoomAtCurrentLevelLeaflet(this.$5,this.$3)||!tab.MapUtil.allowZoomAtCurrentLevel(this.$5,this.$6)){this.$3=this.$5;this.$6=tab.MapUtil.getZoomFactorForDesiredZoomLevel(this.$5,0);this.$2=tab.MapUtil.getScrollDeltaForZoomFactor(this.$6)}}},null,[p]);ss.initClass(l,a,{get_widgetFeatureEnabled:function(){return tsConfig.allow_filter},dispose:function(){v.prototype.dispose.call(this);this.set_parentViewer(null);this.$x.dispose();this.$y.dispose()},onUpdate:function(){this.$t=false;this.$v=this.get_parentViewer().get_geometry();this.$z=this.get_parentViewer().get_visibleGeometry();this.$c(this.get_parentViewer().get_capturedPaneTableViewMousePosition())},onMouseMove:function(C){this.$d(C)},isActiveInRect:function(C){if($(this.$q.get(0)).css('display')!=='none'||$(this.$r.get(0)).css('display')!=='none'){if(ss.isValue(this.$s)&&tab.RectXYUtil.intersectsWith(this.$s,C)){return true}}return false},turnDrillWidgetsOff:function(){var C=['bottomaxis','xheader','yheader'];for(var D=0;D<C.length;D++){var E=C[D];if(ss.isValue(this.$w[E])){this.$w[E].unsuppressHover()}}this.hideNode(this.$q.get(0));this.hideNode(this.$r.get(0));this.$u=new d},$i:function(){this.set_enabled(true)},$d:function(C){if(C.button>0){return}var D=this.getPaneTableViewMousePositionFromCoordinates(C.pageX,C.pageY,this.get_parentViewer());this.$c(D)},$b:function(C){var D=new c;if(ss.isValue(this.$z.xheaderArea)){D.$5=tab.RectUtil.inRect(this.$z.xheaderArea,C)}if(ss.isValue(this.$z.leftaxisArea)){D.$2=tab.RectUtil.inRect(this.$z.leftaxisArea,C)}D.$9=this.get_parentViewer().tlspacerAreaX;D.$a=this.get_parentViewer().tlspacerAreaY;if(D.$5&&ss.isValue(D.$9)&&ss.isValue(D.$a)&&ss.isValue(this.$z.uleftArea)){D.$a.w=D.$9.l;D.$8=false}if(ss.isValue(this.$z.bottomaxisArea)&&!D.$5){D.$6=tab.RectUtil.inRect(this.$z.bottomaxisArea,C)}if(ss.isValue(this.$z.yheaderArea)&&!D.$5&&!D.$6){D.$7=tab.RectUtil.inRect(this.$z.yheaderArea,C)}if(ss.isValue(D.$a)&&!D.$5&&!D.$6&&ss.isValue(this.$z.yheaderArea)){D.$4=tab.RectUtil.inRect(D.$a,C)}if(ss.isValue(D.$9)&&!D.$4&&!D.$7&&!D.$6&&ss.isValue(this.$z.xheaderArea)){D.$3=tab.RectUtil.inRect(D.$9,C)}var E=this.get_parentViewer().blspacerArea;if(ss.isValue(E)&&!D.$4&&!D.$3){D.$1=tab.RectUtil.inRect(E,C)}return D},$l:function(C,D){if(C.$0()){this.turnDrillWidgetsOff()}else if(C.$3){C.$8=false;this.$n(D)}else if(C.$5){C.$8=false;this.$n(D)}else if(C.$7){this.$o(D)}else if(C.$6||C.$1){this.$m()}else if(C.$2){this.$k()}else if(C.$4){this.$o(D)}if(C.$8&&ss.isValue(C.$a)&&ss.isValue(this.$z.uleftArea)){C.$a.w=this.$z.uleftArea.w}},$a:function(C){if(ss.isNullOrUndefined(C)){return false}if(this.$t){return false}var D=new Object;if(ss.isNullOrUndefined(this.$v)||ss.isNullOrUndefined(this.$v.di)||ss.referenceEquals(this.$v.di,D)||!tsConfig.allow_filter){return false}return true},$c:function(C){if(this.$a(C)){var D=this.$b(C);this.$l(D,C)}},$f:function(){this.$e('down')},$g:function(){this.$e('up')},$e:function(C){this.$t=true;if(tsConfig.allow_filter&&!ss.isNullOrUndefined(this.$u.$0)){var D=((this.$u.$0.toString()==='yheader')?'rows-shelf':'columns-shelf');var E=false;if(C==='up'){E=true}tab.FilterClientCommands.levelDrill(this.get_parentViewer().get_visualId(),this.$u.$1,D,E)}this.turnDrillWidgetsOff()},$n:function(C){var D=this.$v.di.xs+this.get_parentViewer().titleHeight;var E=this.$9(C.y,D,this.$v.di.xy);if(E.$0>=0&&E.$0<this.$v.di.xy.length){this.$p('x',E,this.$v.di.xy)}else{this.turnDrillWidgetsOff()}},$k:function(){if(ss.isNullOrUndefined(this.$z.leftaxisArea)){return}var C=this.$v.di.yx.length-1;if(C<0){return}var D=Math.min(this.$z.leftaxisArea.l,17);var E={l:this.$z.leftaxisArea.l-D,t:this.$z.leftaxisArea.t,w:this.$z.leftaxisArea.w+D,h:this.$z.leftaxisArea.h};this.$h(E,this.$v.di.yx[C][1],'y');this.$u.$1=C;this.$u.$0='yheader'},$o:function(C){var D=this.$9(C.x,this.$v.di.ys,this.$v.di.yx);var E=D.$0;if(E>=0&&E<this.$v.di.yx.length){this.$p('y',D,this.$v.di.yx)}else{this.turnDrillWidgetsOff()}},$m:function(){if(ss.isNullOrUndefined(this.$z.bottomaxisArea)){return}var C=this.$v.di.xy.length-1;var D=Math.min(this.$z.bottomaxisArea.l,20);var E=null;if(D===0){E={l:this.$z.bottomaxisArea.l+17-7,t:this.$z.bottomaxisArea.t,w:this.$z.bottomaxisArea.w+17,h:this.$z.bottomaxisArea.h}}else{E={l:this.$z.bottomaxisArea.l-D-7,t:this.$z.bottomaxisArea.t,w:this.$z.bottomaxisArea.w+D,h:this.$z.bottomaxisArea.h}}this.$h(E,this.$v.di.xy[C][1],'x');this.$u.$1=C;this.$u.$0='bottomaxis'},$p:function(C,D,E){var F;var G=0;if(C==='x'){if(ss.isValue(this.$z.uleftArea)){G=Math.min(this.$z.xheaderArea.l,17)}F={l:this.$z.xheaderArea.l-G-7,t:D.$1,w:this.$z.xheaderArea.w+G,h:D.$2-D.$1}}else{if(ss.isValue(this.$z.uleftArea)){G=Math.min(this.$z.yheaderArea.t,17)}F={l:D.$1,t:this.$z.yheaderArea.t-G,w:D.$2-D.$1,h:this.$z.yheaderArea.h+G}}this.$h(F,E[D.$0][1],C);this.$u.$1=D.$0;this.$u.$0=C+'header'},$j:function(C,D,E){var F=this.getWidgetPos('level',D,E);var G=tab.DoubleUtil.roundToInt(this.$q.outerHeight());var H=tab.DoubleUtil.roundToInt(this.$q.outerWidth());this.$s={x:F.x,y:F.y,w:H,h:G};if(this.isOtherActiveInRect(this.$s)){return}this.showNodeAt(C,F.y,F.x)},$h:function(C,D,E){switch(D){case 0:{this.hideNode(this.$q.get(0));this.hideNode(this.$r.get(0));break}case 1:{this.$j(this.$q.get(0),C,E);this.hideNode(this.$r.get(0));break}case 2:{this.$j(this.$r.get(0),C,E);this.hideNode(this.$q.get(0));break}case 3:{if(E==='x'){this.$j(this.$r.get(0),C,E);var F={l:C.l+17,t:C.t,w:C.w+17,h:C.h};this.$j(this.$q.get(0),F,E)}else if(E==='y'){this.$j(this.$r.get(0),C,E);var G={l:C.l+10,t:C.t,w:C.w+17,h:C.h};this.$j(this.$q.get(0),G,E)}break}}},$9:function(C,D,E){var F=-1;var G=D-1;var H=-1;if(ss.isNullOrUndefined(E)){return new f(-1,-1,-1)}while(G<C&&H<E.length-1){H+=1;F=G;G+=E[H][0]}if(G<C){return new f(-1,-1,-1)}return new f(F,G,H)}},v,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(m,a,{get_appendMode:function(){return false},set_appendMode:function(C){},zoomHome:function(){this.$0.zoomHome()},zoomIn:function(){this.$0.$2c(2)},zoomOut:function(){this.$0.$2c(0.5)},setPointerToolMode:function(C,D){this.$0.setPointerToolMode(C,D)},anyButtonTouched:function(){},defaultPointerToolMode:function(){return this.$0.defaultPointerToolMode()}});ss.initClass(n,a,{clickZoomHome:function(){tab.FloatingZoomToolbar.prototype.clickZoomHome.call(this);if(this.toolbarType==='homeOnlyToolbar'){this.setActiveState(false)}},$l:function(C){var D=tab.Strings.PanZoomSelectToolsRadialSelectionTooltip;this.radialSelectButton=this.addToggleButton(C,'buttonRadialSelect',D)},$m:function(C){var D=tab.Strings.PanZoomSelectToolsRectangularSelectionTooltip;this.rectSelectButton=this.addToggleButton(C,'buttonRectSelect',D)},$j:function(C){var D=tab.Strings.PanZoomSelectToolsLassoSelectionTooltip;this.lassoSelectButton=this.addToggleButton(C,'buttonLassoSelect',D)},$k:function(C){var D=tab.Strings.PanZoomSelectToolsPanTooltip;this.panButton=this.addToggleButton(C,'buttonPan',D)},createButtons:function(){this.createButtonContainer();if(this.toolbarType==='fullToolbar'){this.zoomInButton=this.addButton(this.buttonContainer,'buttonZoomIn',tab.Strings.PanZoomSelectToolsZoomInTooltip);this.zoomOutButton=this.addButton(this.buttonContainer,'buttonZoomOut',tab.Strings.PanZoomSelectToolsZoomOutTooltip);this.zoomHomeButton=this.addButton(this.buttonContainer,'buttonZoomHome',tab.Strings.PanZoomSelectToolsZoomHomeTooltip);this.addSpacer();this.flyOutButton=this.addButton(this.buttonContainer,'buttonFlyOut','');this.createButtonFlyOut();this.$i()}else if(this.toolbarType==='disablePanZoomToolbar'){if(this.geoSearchEnabled){this.zoomHomeButton=this.addButton(this.buttonContainer,'buttonZoomHome',tab.Strings.PanZoomSelectToolsZoomHomeTooltip)}this.$m(this.buttonContainer);this.$l(this.buttonContainer);this.$j(this.buttonContainer)}else{this.zoomHomeButton=this.addButton(this.buttonContainer,'buttonZoomHome',tab.Strings.PanZoomSelectToolsZoomHomeTooltip)}this.setupEventHandling()},$i:function(){if(this.toolbarType==='fullToolbar'){var C=tab.Strings.PanZoomSelectToolsZoomAreaTooltip;this.zoomAreaButton=this.addToggleButton(this.flyOutButtons,'buttonZoomArea',C);this.$k(this.flyOutButtons);this.$m(this.flyOutButtons);this.$l(this.flyOutButtons);this.$j(this.flyOutButtons)}},setupEventHandling:function(){tab.FloatingZoomToolbar.prototype.setupEventHandling.call(this);if(this.toolbarType==='fullToolbar'){this.disposables.add$1(this.zoomInButton.onClick(ss.mkdel(this,function(){this.api.zoomIn()})));this.disposables.add$1(this.zoomOutButton.onClick(ss.mkdel(this,function(){this.api.zoomOut()})));this.disposables.add$1(this.zoomAreaButton.onClick(ss.mkdel(this,function(){this.setToolMode('area-zoom',true);if(tsConfig.is_authoring){tab.FloatingToolbarClientCommands.setDefaultMapToolSelectionCommand('area-zoom')}})));this.disposables.add$1(this.zoomAreaButton.onShiftClick(ss.mkdel(this,function(){this.setToolMode('area-zoom',true)})));this.flyOutContainer.mouseout(ss.mkdel(this,this.$o));var C=this.flyOutButton.element;C.mouseout(ss.mkdel(this,this.$n));C.mouseenter(ss.mkdel(this,this.toggleFlyout))}if(this.geoSearchEnabled||this.toolbarType!=='disablePanZoomToolbar'){this.zoomHomeButton.add_hover(ss.mkdel(this,this.$p));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.zoomHomeButton.remove_hover(ss.mkdel(this,this.$p))})))}},$p:function(){if(!this.canZoomHome){this.zoomHomeButton.element.removeClass(this.zoomHomeButton.get_hoverClass())}},$o:function(C){var D=this.flyOutContainer.offset();if(D.top>=C.pageY){this.updateFlyOutVisibility(false);return}var E=tab.DoubleUtil.roundToInt(D.left)+tab.DoubleUtil.roundToInt(this.flyOutContainer.width());var F=tab.DoubleUtil.roundToInt(D.top)+tab.DoubleUtil.roundToInt(this.flyOutContainer.height());if(C.pageX>=E||C.pageY>=F){this.updateFlyOutVisibility(false)}},$n:function(C){var D=this.flyOutButton.element.offset();if(D.left>=C.pageX||D.top>=C.pageY){this.updateFlyOutVisibility(false);return}var E=tab.DoubleUtil.roundToInt(D.top)+tab.DoubleUtil.roundToInt(this.flyOutButton.element.height());if(C.pageY>=E){this.updateFlyOutVisibility(false)}}},tab.FloatingZoomToolbar,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(o,a,{dispose:function(){this.$0=null},unsuppressHover:function(C){var D=this.$0.get_inputHandlers()[C.get_regionPart()];if(ss.isValue(D)){D.unsuppressHover()}var E=this.$0.get_responsiveMouseHandler();if(ss.isValue(E)){E.unsuppressHover()}},suppressHover:function(C){var D=this.$0.get_inputHandlers()[C.get_regionPart()];if(ss.isValue(D)){D.suppressHover()}var E=this.$0.get_responsiveMouseHandler();if(ss.isValue(E)){E.suppressHover()}}},null,[ss.IDisposable]);ss.initClass(q,a,{attach:function(){this.$j.add_showed(ss.mkdel(this,this.$7));this.$j.add_closed(ss.mkdel(this,this.$5));this.$j.add_disposed(ss.mkdel(this,this.$a));var C={};spiff.EventHandleSpecExtensions.setHandler(C,'hover',ss.mkdel(this,this.$8));this.$c.add$1(new spiff.TableauEventHandler.$ctor1(this.$j.element[0],C));$(window.document.documentElement).on(this.$k,ss.mkdel(this,this.$6))},detach:function(){this.$0();this.$c.dispose();if(ss.isValue(this.$j)){this.$j.remove_showed(ss.mkdel(this,this.$7));this.$j.remove_closed(ss.mkdel(this,this.$5));this.$j.remove_disposed(ss.mkdel(this,this.$a))}this.$9()},dispose:function(){this.detach()},disposeTooltip:function(){this.dispose()},shownTooltipIsSticky:function(){return true},isHoverAllowed:function(C){return!(this.$j.get_isShown()&&this.$j.isInSafeZone(C,!this.$d))},shouldShowCommandButtons:function(){return true},handleUbertipMenuToggle:function(C){this.$e=C},handleUbertipMenuClose:function(){this.$j.close()},hoverOverObject:function(C,D,E,F){this.showTooltip(C)},hoverOverWhitespace:function(C){if(this.$j.get_isShown()&&!this.$j.isInSafeZone(C,false)){this.$j.close()}},multiSelectComplete:function(C){this.showTooltip(C)},singleSelectComplete:function(C){this.showTooltip(C)},selectionMoved:function(C){},repositionWithinRegion:function(C){},onPanningOrDragging:function(){if(this.$j.get_isShown()){this.$j.close()}},onScroll:function(){if(this.$j.get_isShown()){this.$j.close()}},mouseDown:function(C,D){this.$j.close()},showTooltip:function(C){if(spiff.DragDropManager.get_isDragging()){return}if(this.$j.get_isShown()&&tab.PointUtil.equals(this.$j.get_location(),C)){return}if(this.$j.get_isShown()&&this.$j.isInSafeZone(C,false)){return}this.$j.show(this.$j.get_body().children()[0],C)},$7:function(){this.$0();this.$g=false;this.$d=false;this.$h=new Date;this.$j.set_lastLocation({x:this.$j.get_calculatedShownArgs().origX,y:this.$j.get_calculatedShownArgs().origY});this.$1(10000)},$5:function(){this.$j.element.off('.LegacyTooltipBehavior');this.$j.set_lastLocation(null);this.$0();this.$h=null;this.$d=false},$6:function(C){var D=this.$j.get_lastLocation();this.$j.set_lastLocation({x:C.pageX,y:C.pageY});if(ss.isNullOrUndefined(D)||!this.$j.get_isShown()){return}if(this.$4(this.$j.get_lastLocation())){this.$d=true;return}if(!this.$e&&!this.$j.isInSafeZone(this.$j.get_lastLocation(),!this.$d)){this.$j.close();return}var E=tab.PointUtil.distance(D,this.$j.get_lastLocation());var F=new Date-this.$h;if(E>10&&F>500){this.$g=true;if(ss.isValue(this.$b)){ss.remove(this.$i,ss.unbox(this.$b));this.$b=tab.MiscUtil.clearTimeout(this.$b)}this.$2()}else if(this.$g){if(!ss.isValue(this.$b)){this.$b=this.$1(1200)}}},$2:function(){this.$f=tab.MiscUtil.clearTimeout(this.$f);this.$f=window.setTimeout(ss.mkdel(this,function(){if(ss.isNullOrUndefined(this.$b)){this.$b=this.$1(1200)}}),250)},$9:function(){$(window.document.documentElement).off(this.$k)},$4:function(C){if(ss.isNullOrUndefined(C)){return false}var D=this.$3();return tab.RectUtil.inRect(D,C)},$3:function(){var C=this.$j.element.position();var D={l:tab.DoubleUtil.roundToInt(C.left),t:tab.DoubleUtil.roundToInt(C.top),w:tab.DoubleUtil.roundToInt(this.$j.element.width()),h:tab.DoubleUtil.roundToInt(this.$j.element.height())};return D},$1:function(C){var D=window.setTimeout(ss.mkdel(this,function(){if(this.$4(this.$j.get_lastLocation())){return}this.$j.close()}),C);this.$i.push(D);return D},$8:function(C){if(this.$4(this.$j.get_lastLocation())){return}this.$0()},$a:function(C,D){this.dispose()},$0:function(){for(var C=0;C<this.$i.length;C++){var D=this.$i[C];window.clearTimeout(D)}ss.clear(this.$i);this.$b=tab.MiscUtil.clearTimeout(this.$b);this.$f=tab.MiscUtil.clearTimeout(this.$f)}},null,[tab.ITooltipBehavior,ss.IDisposable]);ss.initClass(r,a,{updateSearchTextValue:function(C){this.$t(C,true)},$t:function(C,D){tab.MapsSearchView.prototype.updateSearchTextValue.call(this,C);if(D===true){this.selectAllSearchText()}},$r:function(C){if(this.get_compositeSearchWidget().get_textInputView().get_text().length===0){return}var D=this.get_compositeSearchWidget().get_textInputView().get_inputElement().prop('selectionStart');var E=this.get_compositeSearchWidget().get_textInputView().get_inputElement().prop('selectionEnd');if(ss.isValue(D)&&ss.isValue(E)&&!ss.referenceEquals(D,E)){return}this.selectAllSearchText()},$q:function(C){this.$u=C;if(ss.isValue(C)){var D=C.get_data();this.$t(D,false)}},handleEnterKeyPress:function(){if(ss.isValue(this.$u)){this.mapsSearchViewModel.moveMapToCandidateBounds(this.$u.get_data());this.get_compositeSearchWidget().removeList();return}tab.MapsSearchView.prototype.handleEnterKeyPress.call(this)},$s:function(){if(ss.isNullOrUndefined(this.get_compositeSearchWidget().get_listViewModel())||ss.isValue(this.queryDelayTimer)||ss.isValue(this.$u)){return}var C=this.get_compositeSearchWidget();C.changeSpotlightedListItem(2,null)},handleSearchButtonClick:function(){tab.MapsSearchView.prototype.handleSearchButtonClick.call(this);if(this.mapsSearchViewModel.get_gotoMyLocationButtonEnabled()){this.setGeoLocationButtonVisibility(!this.get_isCollapsed())}},handleCollapseSearchWidget:function(){tab.MapsSearchView.prototype.handleCollapseSearchWidget.call(this);if(this.mapsSearchViewModel.get_gotoMyLocationButtonEnabled()){this.setGeoLocationButtonVisibility(!this.get_isCollapsed())}},calculateNewSpotlightedItemIndex:function(C,D,E){if(D===4){return E}var F=this.get_compositeSearchWidget().get_listViewModel().get_collection().length-1;if(ss.isNullOrUndefined(C)){switch(D){case 1:case 2:{return 0}case 0:case 3:{return F}}}var G=C;switch(D){case 1:{G=ss.Nullable$1.add(G,1);if(ss.Nullable$1.gt(G,F)){G=0}break}case 0:{G=ss.Nullable$1.sub(G,1);if(ss.Nullable$1.lt(G,0)){G=F}break}case 2:{G=0;break}case 3:{G=F;break}}return G}},tab.MapsSearchView,[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[tab.MapsSearchViewModel]),spiff.IListItemContentCreator,spiff.ICompositeSearchWidgetSpotlightedItemLogic]);ss.initClass(s,a,{$2:function(C,D){tab.Param.verifyValue(C,'element');tab.Param.verifyValue(D,'handler');if(s.$0()){this.$1();document.addEventListener('mousemove',ss.mkdel(this,this.$0),true);this.$3=D}},$1:function(){if(s.$0()){document.removeEventListener('mousemove',ss.mkdel(this,this.$0),true)}this.$3=null},$0:function(C){if(ss.isValue(this.$3)){this.$3.handleCapturedMouseMove(C)}},dispose:function(){this.$1()}},null,[ss.IDisposable]);ss.initClass(t,a,{exportAsAxisResizerDomElements:function(){var C=new tab.AxisResizerDomElements(this.topLeftSpacer,this.topRightSpacer,this.bottomLeftSpacer,this.view,this.topAxis,this.rightAxis,this.bottomAxis,this.leftAxis);return C}},tab.PaneTableTemplate,[ss.IDisposable]);ss.initClass(u,a,{get_inputHandlers:function(){return this.$2m},get_domWeb:function(){return this.$2f},get_responsiveMouseHandler:function(){return this.$2r},$2d:function(){return this.getWebRegion('viz')},get_zoomToolbarOffset:function(){var C=41;var D=10;if(this.get_paneTableVM().get_mapSearchEnabled()){D+=C}return D},get_zoomToolbarOperations:function(){return new m(this)},get_capturedPaneTableViewMousePosition:function(){return this.$1w()},$1C:function(){if(tsConfig.is_authoring&&tab.FeatureFlags.isEnabled('WebAuthoringResizeHeaders')&&ss.isValue(this.get_paneTableVM().deferredHeaderResizerManagerViewModel)&&ss.isValue(this.get_paneTableVM().deferredResizerFactory)){var C=$.Deferred();this.deferredHeaderResizerManager=C.promise();this.get_paneTableVM().deferredHeaderResizerManagerViewModel.done(ss.mkdel(this,function(D){this.get_paneTableVM().deferredResizerFactory.done(ss.mkdel(this,function(E){C.resolve(E.newHeaderResizerManager(D,this.get_domWeb().yLabel,this.get_domWeb().xLabel))}))}))}},$1B:function(){if(tsConfig.is_authoring&&tab.FeatureFlags.isEnabled('WebAuthoringResizeHeaders')&&tab.FeatureFlags.isEnabled('WebAuthoringResizeHeadersPhase2')&&ss.isValue(this.get_paneTableVM().deferredCellResizerManagerViewModel)&&ss.isValue(this.get_paneTableVM().deferredResizerFactory)){var C=$.Deferred();this.deferredCellResizerManager=C.promise();this.get_paneTableVM().deferredCellResizerManagerViewModel.done(ss.mkdel(this,function(D){this.get_paneTableVM().deferredResizerFactory.done(ss.mkdel(this,function(E){C.resolve(E.newCellResizerManager(D,this.get_domWeb().yLabel,this.get_domWeb().xLabel))}))}))}},$1A:function(){if(tsConfig.is_authoring&&tab.FeatureFlags.isEnabled('WebAuthoringResizeAxes')&&ss.isValue(this.get_paneTableVM().deferredResizerFactory)){var C=$.Deferred();this.deferredAxisResizerManager=C.promise();this.get_paneTableVM().deferredResizerFactory.done(ss.mkdel(this,function(D){C.resolve(D.newAxisResizerManager(this.get_domWeb().exportAsAxisResizerDomElements(),this.get_paneTableVM().get_visualId()))}))}},$1E:function(){if(tsConfig.is_authoring&&ss.isValue(this.get_paneTableVM().get_vizContextMenuViewModel())&&(tab.FeatureFlags.isEnabled('RichTextCreateAnnotationAndOpenEditor')||tab.FeatureFlags.isEnabled('RichTextCreateBlankAreaAnnotation')||tab.FeatureFlags.isEnabled('RichTextCreateBlankPointAndMarkAnnotation'))){this.get_paneTableVM().get_vizContextMenuViewModel().setAnchorEl(this.get_vizRegionDomNode().get(0));tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[tab.VizContextMenuViewModel,A,Object])).call(null,[this.get_paneTableVM().get_vizContextMenuViewModel()])}},$1D:function(){if(tsConfig.is_authoring&&ss.isValue(this.get_paneTableVM().get_annotationSelectionChromeViewModel())&&tab.FeatureFlags.isEnabled('RichTextSelectAnnotation')){var C=this.get_vizRegionDomNode().get(0).getBoundingClientRect();var D={x:0,y:0,w:ss.Int32.trunc(C.width),h:ss.Int32.trunc(C.height)};this.get_paneTableVM().updateGeometry(D);var E=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[tab.AnnotationSelectionChromeViewModel,g,Object])).call(null,[this.get_paneTableVM().get_annotationSelectionChromeViewModel()]);E.addToDom(this.get_vizRegionDomNode())}},$2c:function(C){if(this.get_paneTableVM().get_isMapWithBaseLayer()&&!this.$2d().allowMapZoomAtCurrentLevel(C)){return}var D=this.resolvePane({x:1,y:1});this.disposeOfOverlays();this.get_paneTableVM().hideAnnotations();this.$2d().$K(D,C)},initEventHandlers:function(){var C=null;var D=null;var E=ss.thisFix(ss.mkdel(this,function(){C=tab.MiscUtil.dispose$1(C);D=tab.MiscUtil.dispose$1(D);tab.PaneTableView.prototype.initEventHandlers.call(this)}));var F=this.dom.domRoot[0];C=spiff.EventUtil.addEventListenerWithDispose(F,'mouseenter',E,true);D=spiff.EventUtil.addEventListenerWithDispose(F,'touchstart',E,true);this.disposables.add$1(C);this.disposables.add$1(D)},getDomNodeForContentRegion:function(C){return C.get(0)},connectTooltipEventHandlers:function(){tab.PaneTableView.prototype.connectTooltipEventHandlers.call(this);this.get_vizToolTip().add_mouseExitedTooltip(ss.mkdel(this,this.$1R))},makeConnections:function(){this.$2f.scrollX.scroll(ss.mkdel(this,function(C){this.$1V()}));this.$2f.scrollY.scroll(ss.mkdel(this,function(C){this.$1W()}));this.dom.domRoot.on('wheel',ss.mkdel(this,this.$1T));this.dom.domRoot.mouseout(ss.mkdel(this,this.onMouseOut));this.dom.domRoot.mousemove(ss.mkdel(this,this.onMouseMove));this.dom.view.mouseover(ss.mkdel(this,this.onViewMouseOver));this.dom.view.mouseout(ss.mkdel(this,this.onViewMouseOut));this.dom.view.mousemove(ss.mkdel(this,this.onViewMouseMove));this.dom.domRoot.attr('tabindex','-1');this.disposables.add$1(spiff.EventUtil.bindWithDispose(this.dom.domRoot,'keyup',ss.mkdel(this,this.$1Q)))},makeMapsSearchViewConnections:function(){if(ss.isValue(this.mapsSearchView)){this.get_paneTableVM().get_mapsSearchViewModel().set_focusInHandler(ss.mkdel(this,function(C){this.checkForSuppressTooltipsAndOverlays(C.target)}));this.get_paneTableVM().get_mapsSearchViewModel().set_focusOutHandler(ss.mkdel(this,function(C){this.checkForSuppressTooltipsAndOverlays(C.relatedTarget)}));this.get_paneTableVM().get_mapsSearchViewModel().set_keypressHandler(ss.mkdel(this,function(C){this.checkForSuppressTooltipsAndOverlays(C.target)}))}},makeRegions:function(){var C=this.makeHoverApi();ss.clearKeys(this.regions);var D=function(){return false};for(var E=0;E<tab.PaneTableViewRegionParts.nonVizContentRegions.length;E++){var F=tab.PaneTableViewRegionParts.nonVizContentRegions[E];var G=this.regionParts.getSelectorForRegion(F);var H=new tab.ToolModeViewModel(F,this.get_paneTableVM().get_visualModel().get_defaultMapTool());this.regions[F]=new y(F,G.get(0),C,this.$2f.scrollX,this.$2f.scrollY,D,this.get_sheetid(),this.get_paneTableVM(),H)}var I=ss.mkdel(this,this.allowPanZoomActions);this.set_vizRegion(new y('viz',this.get_vizRegionDomNode().get(0),C,this.$2f.scrollX,this.$2f.scrollY,I,this.get_sheetid(),this.get_paneTableVM(),this.get_paneTableVM().get_vizRegionToolModeViewModel()));this.get_paneTableVM().get_vizRegionToolModeViewModel().initializeToolModesForVizRegion(I())},getWebRegion:function(C){return ss.safeCast(this.regions[C],y)},makeTooltipLegacyMode:function(C){return new z(C,this.get_visualId())},cancelHover:function(){},makeInputHandlers:function(){var C=ss.getEnumerator(Object.keys(this.$2m));try{while(C.moveNext()){var D=C.current();this.$2m[D]=tab.MiscUtil.dispose$1(this.$2m[D])}}finally{C.dispose()}ss.clearKeys(this.$2m);for(var E=0;E<tab.PaneTableViewRegionParts.nonVizContentRegions.length;E++){var F=tab.PaneTableViewRegionParts.nonVizContentRegions[E];var G=this.regionParts.getSelectorForRegion(F);var H=this.makeMouseSpec(this.getWebRegion(F));this.$2m[F]=new spiff.TableauEventHandler.$ctor1(G.get(0),H)}this.$2b();var I=this.get_vizRegionDomNode();if(tab.FeatureFlags.isEnabled('ReferenceLineDragDrop')){var J={hoverDelay:20,hover:ss.mkdel(this,function(N){this.get_vizHitTestDebouncer().update(N)})};var K=ss.mkdel(this,function(N){this.onHitTestUpdated(this.$2d(),N)});this.get_vizHitTestDebouncer().add_updated(K);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_vizHitTestDebouncer().remove_updated(K)})));this.$2v=new spiff.TableauEventHandler.$ctor1(I.get(0),J);this.disposables.add$1(this.$2v)}var L={};spiff.EventHandleSpecExtensions.setHandler(L,'dragStart',function(N){});this.$2h=new spiff.TableauEventHandler.$ctor1(document.body,L);this.disposables.add$1(this.$2h);if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var M={hover:ss.mkdel(this,function(N){this.onHoverOverlay(this.$2d(),N)}),hoverDelay:0};this.$2r=new spiff.TableauEventHandler.$ctor1(I.get(0),M);this.disposables.add$1(this.$2r)}this.$1H();I.addClass('tvmodeRectSelect');this.$1u()},$1u:function(){if(tsConfig.is_mobile_device){return}var C=ss.mkdel(this,function(E){if(!this.$2j){E.stopPropagation()}this.makeHoverApi().suppressHover(this.regions['viz'])});var D=ss.mkdel(this,function(E){if(!this.$2j){E.stopPropagation()}this.makeHoverApi().unsuppressHover(this.regions['viz'])});this.get_vizRegionDomNode().children().on(this.createNamespacedEventName('touchstart'),C).on(this.createNamespacedEventName('touchend'),D)},$2b:function(){this.$2m['viz']=tab.MiscUtil.dispose$1(this.$2m['viz']);var C=this.makeMouseSpec(this.$2d());this.$2m['viz']=new spiff.TableauEventHandler.$ctor1(this.get_vizRegionDomNode().get(0),C)},updateTooltipMode:function(C){tab.PaneTableView.prototype.updateTooltipMode.call(this,C);if(ss.isNullOrUndefined(this.vizTooltip)){this.$2b()}},updateGeometry:function(){tab.PaneTableView.prototype.updateGeometry.call(this);this.$25();this.$26();var C=this.get_vizRegionDomNode().get(0);var D=C.getBoundingClientRect();var E={x:0,y:0,w:ss.Int32.trunc(D.width),h:ss.Int32.trunc(D.height)};this.get_paneTableVM().updateGeometry(E)},$1H:function(){var C=ss.mkdel(this,function(I){var J={hover:ss.mkdel(this,function(L){this.$1P(this.getWebRegion(I),L)}),hoverDelay:0,firstTouch:ss.mkdel(this,function(L){this.$1O(this.getWebRegion(I))})};var K=this.regionParts.getSelectorForRegion(I);this.disposables.add$1(new spiff.TableauEventHandler.$ctor1(K.get(0),J));K.mouseout(ss.mkdel(this,function(L){this.$1S(I)}))});for(var D=0;D<tab.PaneTableViewRegionParts.regionsThatMightContainCategoricalHeader.length;D++){var E=tab.PaneTableViewRegionParts.regionsThatMightContainCategoricalHeader[D];C(E)}if(tab.FeatureFlags.isEnabled('EditAxisWebAffordance')&&tsConfig.is_authoring){var F=tab.ListExtensions.where(Object).call(null,tab.PaneTableViewRegionParts.axisRegions,function(I){return!ss.contains(tab.PaneTableViewRegionParts.regionsThatMightContainCategoricalHeader,I)});for(var G=0;G<F.length;G++){var H=F[G];C(H)}}},makeHoverApi:function(){if(ss.isNullOrUndefined(this.$2k)){this.$2k=new o(this);this.disposables.add$1(this.$2k)}return this.$2k},doAnnotationDoubleTap:function(C,D){if(tsConfig.current_sheet_type!=='story'&&tsConfig.is_authoring&&tab.FeatureFlags.isEnabled('RichTextEditingAnnotation')){var E=this.getHitTestResults(C,D);if(E.get_hitObjectType()===2){this.get_paneTableVM().handleAnnotationClicked([E.get_id()]);return true}}return false},makeMouseSpec:function(C){var D={hover:ss.mkdel(this,function(G){this.onHover(C,G)}),hoverDelay:(tab.ApplicationModel.get_instance().get_isLocalRenderMode()?120:150)};var E=this.get_paneTableVM().get_visualModel().get_tooltipMode();if(E!=='sticky'){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&C.get_regionPart()==='viz'){D.hoverDelay=0}else{var F=tab.FeatureParamsLookup.getInt(12);D.hoverDelay=ss.coalesce(F,120)}}D.firstTouch=ss.mkdel(this,function(G){this.$1N(C,G)});D.tap=ss.mkdel(this,function(G){this.$1X(C,G)});if(tab.FeatureFlags.isEnabled('EditAxisDialog')&&tsConfig.is_authoring&&ss.contains(tab.PaneTableViewRegionParts.axisRegions,C.get_regionPart())){D.doubleTap=ss.mkdel(C,C.onDoubleTapAxis);D.rightClick=ss.mkdel(C,C.onRightClickAxis)}if(C.get_regionPart()==='viz'){D.dragStart=ss.mkdel(this,function(G){this.dragOverride(G,ss.mkdel(this,function(H){this.$1M(C,G)}))});if(tsConfig.allow_filter){if(tab.FeatureFlags.isEnabled('RichTextCreateBlankAreaAnnotation')||tab.FeatureFlags.isEnabled('RichTextCreateBlankPointAndMarkAnnotation')||tab.FeatureFlags.isEnabled('RichTextDeleteAnnotation')){D.rightClick=ss.mkdel(this,function(G){this.onRightClickViz(C,C.toLocalCoordsEvent(G,false))})}D.doubleTap=ss.mkdel(this,function(G){this.$1J(C,G)});D.press=function(G){u.$2()};D.cancelPotentialDoubleTap=ss.mkdel(this,function(G){this.$1I()});D.pressDragStart=ss.mkdel(this,function(G){this.dragOverride(G,ss.mkdel(this,function(H){this.$1U(C,G)}))})}}return D},makeRegionContentProviders:function(){var C=ss.mkdel(this,function(D,E){this.get_vizRegion().reset()});this.makeRegionContentProvidersHelper(this.get_vizRegionDomNode(),C);this.$2t=this.makeTiledWindow(this.$2f.scrollY,null,null,null,null);this.$2s=this.makeTiledWindow(this.$2f.scrollX,null,null,null,null)},makeTiledWindow:function(C,D,E,F,G){return this.makeTiledWindowHelper(C,D,E,F,G,true)},shouldInformTooltipOfLocalTapOnViz:function(C,D){return!this.get_paneTableVM().vizContextMenuOpened()&&C.get_hitObjectType()!==2},refreshScrollingAndAxisIcons:function(){var C=this.$2q;this.$2q=null;if(typeof(C)==='function'){C()}this.tryUpdateSortDrillAndContextMenuWidgets()},tryUpdateSortDrillAndContextMenuWidgets:function(){if(ss.isValue(this.drillWidget)){this.drillWidget.onUpdate()}if(ss.isValue(this.sortWidget)){this.sortWidget.onUpdate()}if(ss.isValue(this.axisContextMenuWidget)){this.axisContextMenuWidget.onUpdate()}},destroyRegions:function(){tab.PaneTableView.prototype.destroyRegions.call(this);this.$2t.destroy();this.$2s.destroy()},destroyInputHandlers:function(){var C=ss.getEnumerator(Object.keys(this.$2m));try{while(C.moveNext()){var D=C.current();this.$2m[D]=tab.MiscUtil.dispose$1(this.$2m[D])}}finally{C.dispose()}ss.clearKeys(this.$2m);if(ss.isValue(this.vizTooltip)){this.vizTooltip.remove_mouseExitedTooltip(ss.mkdel(this,this.$1R))}this.$20()},refreshImages:function(C){tab.PaneTableView.prototype.refreshImages.call(this,C);this.$2t.refreshImages(C);this.$2s.refreshImages(C)},onTooltipClosed:function(){tab.PaneTableView.prototype.onTooltipClosed.call(this);this.disposeOfOverlayImages();this.$1l(false)},$1R:function(C){var D=tab.DomUtil.getRectXY(this.dom.view);if(D.x>C.x||D.x+D.w<=C.x||D.y>C.y||D.y+D.h<=C.y){this.disposeOfOverlays();if(this.get_vizToolTip().get_isTooltipShown()){this.get_vizToolTip().clearTooltipWithFakeHover()}}},onViewMouseOver:function(C){this.$2n=true;this.floatingZoomToolbarView.showFloatingZoomToolbar(true);if(ss.isValue(this.mapsSearchView)&&this.get_paneTableVM().get_mapSearchEnabled()){this.get_paneTableVM().get_mapsSearchViewModel().setVisible(true)}this.checkForSuppressTooltipsAndOverlays(C.target)},$1F:function(C){var D=tab.DomUtil.getRectXY(this.dom.domRoot);return u.$1(D,C)},$1G:function(C){var D=tab.DomUtil.getRectXY(this.dom.view);return u.$1(D,C)},isPointOutsideOfRelevantVizRegions:function(C){if(!this.$1G(C)){return false}if(!u.$1(tab.DomUtil.getRectXY(this.dom.yLabel),C)){return false}if(!u.$1(tab.DomUtil.getRectXY(this.dom.xLabel),C)){return false}if(!u.$1(tab.DomUtil.getRectXY(this.dom.caption),C)){return false}if(!u.$1(tab.DomUtil.getRectXY(this.dom.leftAxis),C)){return false}if(!u.$1(tab.DomUtil.getRectXY(this.dom.rightAxis),C)){return false}if(!u.$1(tab.DomUtil.getRectXY(this.dom.bottomAxis),C)){return false}if(!u.$1(tab.DomUtil.getRectXY(this.dom.topAxis),C)){return false}return true},onMouseOut:function(C){if(this.$1F(C)){if(ss.isValue(this.sortWidget)){this.sortWidget.onMouseOutOfParentPaneTableView()}if(ss.isValue(this.drillWidget)){this.drillWidget.turnDrillWidgetsOff()}if(ss.isValue(this.axisContextMenuWidget)){this.axisContextMenuWidget.hideAxisContextMenuIcon()}}if(this.isPointOutsideOfRelevantVizRegions(C)){this.get_vizToolTip().clearTooltipWithFakeHover();this.$1m()}},$1m:function(){if(!this.$2j){this.disposeOfOverlayImages()}},onMouseMove:function(C){var D=this.get_vizToolTip();if(D.get_isTooltipShown()&&!D.shownTooltipIsStatic()&&this.$1G(C)){var E=tab.DomUtil.getRectXY(this.dom.view);D.hoverOverWhitespace({x:E.x,y:E.y},'viz')}},onViewMouseOut:function(C){this.$2n=false;this.$2p=null;var D=this.get_vizToolTip();if(this.$1G(C)){this.floatingZoomToolbarView.showFloatingZoomToolbar(false);if(ss.isValue(this.mapsSearchView)){this.get_paneTableVM().get_mapsSearchViewModel().setVisible(false)}if(D.get_isTooltipShown()&&!D.shownTooltipIsStatic()){var E=tab.DomUtil.getRectXY(this.dom.view);D.hoverOverWhitespace({x:E.x,y:E.y},'viz')}}if(!D.get_isTooltipShown()){this.$1m()}this.checkForSuppressTooltipsAndOverlays(C.relatedTarget);this.get_vizToolTip().onMouseLeaveTheView()},onViewMouseMove:function(C){this.$2n=true;this.checkForSuppressTooltipsAndOverlays(C.target)},setupSortIndicators:function(){this.sortWidget=new w(this,this.dom.domRoot.get(0));this.disposables.add$1(this.sortWidget)},setupAxisContextMenuIndicator:function(){this.axisContextMenuWidget=new h(this,this.dom.domRoot.get(0));this.disposables.add$1(this.axisContextMenuWidget)},setupDrilling:function(){this.drillWidget=new l(this,this.dom.domRoot.get(0));this.disposables.add$1(this.drillWidget)},setRegionGeometryHelper:function(C,D){if(ss.isValue(C)&&C.children().first().hasClass('tvScrollContainer')){tab.DomUtil.setAbsolutePositionBox(C.children().first(),{l:0,t:0,w:D.w,h:D.h})}},setGeometryForWebScrollbars:function(C,D){var E=C.get_scrollWidth()>0;var F=C.get_scrollHeight()>0;this.$1Y(C,E);this.$1Z(C,D,F);var G=!!(F^E);this.scrollAdjuster=new tab.ScrollAdjuster(G);this.$23(C,E,F)},$1Y:function(C,D){var E=this.$2f.scrollY;if(D){var F=Math.max(tab.Metrics.get_minScrollHeight(),C.get_viewHeight());var G={l:C.get_overallWidth(),t:C.get_scrollYTop(),w:C.get_scrollWidth(),h:F};tab.DomUtil.setAbsolutePositionBox(E,G)}E.toggle(D)},$1Z:function(C,D,E){var F=this.$2f.scrollX;if(E){var G=Math.max(tab.Metrics.get_minScrollWidth(),C.get_viewWidth());var H={l:C.get_scrollXLeft(),t:D,w:G,h:C.get_scrollHeight()};tab.DomUtil.setAbsolutePositionBox(F,H)}F.toggle(E)},$23:function(C,D,E){this.$24(C,D);this.$22(C,E)},$24:function(C,D){this.$2t.setYPos(this.$1y());var E=(D?{x:0,y:0,w:1,h:C.get_scrollableHeight(),r:null}:null);this.$2t.reset(E,this.get_geometry().ts)},$22:function(C,D){this.$2s.setXPos(this.$1x());var E=(D?{x:0,y:0,w:C.get_scrollableWidth(),h:1,r:null}:null);this.$2s.reset(E,this.get_geometry().ts)},maybeShowOverlayImages:function(C){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var D=null;if(ss.isValue(C)&&ss.isValue(C.overlayImage)){D=this.createOverlayImageFromDataUri(C.overlayImage)}else if(ss.isValue(C.overlayImageKey)){D=this.createOverlayImageFromFile(C.overlayImageKey)}this.showOverlayImages(D,C.overlayAnchors)}},setRegionResizersForWeb:function(){this.$1t();this.$28();this.$1s()},$1t:function(){if(tsConfig.is_authoring&&tab.FeatureFlags.isEnabled('WebAuthoringResizeHeaders')&&ss.isValue(this.deferredHeaderResizerManager)){this.deferredHeaderResizerManager.done(function(C){C.handleResizerUpdate()})}},$1s:function(){if(this.$1k()){this.deferredCellResizerManager.done(ss.mkdel(this,function(C){C.scrollX(this.$1x())}));this.deferredCellResizerManager.done(ss.mkdel(this,function(C){C.scrollY(this.$1y())}));this.deferredCellResizerManager.done(function(C){C.handleCellResizerUpdate()})}},$1k:function(){if(tsConfig.is_authoring&&tab.FeatureFlags.isEnabled('WebAuthoringResizeHeaders')&&tab.FeatureFlags.isEnabled('WebAuthoringResizeHeadersPhase2')&&ss.isValue(this.deferredCellResizerManager)){return true}return false},$28:function(){if(tsConfig.is_authoring&&tab.FeatureFlags.isEnabled('WebAuthoringResizeAxes')&&ss.isValue(this.deferredAxisResizerManager)){this.deferredAxisResizerManager.done(function(C){C.setAxisResizers()})}},$2a:function(){this.$2e=null;this.$2u=null;if(ss.isValue(this.scrollAdjuster)){this.scrollAdjuster.forgetInputDevice()}},$27:function(){return ss.isValue(this.$2e)},$1T:function(C){var D=null;if(ss.isValue(C['originalEvent'])){D=C['originalEvent']}var E=this.scrollAdjuster.normalizeScrollWheelDeltas(D);this.get_paneTableVM().handleMouseWheelScroll();if(this.isOneVisiblePane()&&this.get_paneTableVM().get_isMap()&&this.allowPanZoomActions()){if(!this.$1G(C)){var F=this.get_paneTableVM().get_visualModel().shouldDoLocalCommand()&&this.$2d().isWaitingOnPanZoomServerResponse();if(!this.$27()&&F){return}else{this.$1r(this.$2d(),D,E.y);C.preventDefault();return}}}var G=this.$1y();var H=this.$1x();this.$2f.scrollY.scrollTop(G+E.y);this.$2f.scrollX.scrollLeft(H+E.x);if(G!==this.$1y()){this.$26();C.preventDefault()}if(H!==this.$1x()){this.$25();C.preventDefault()}this.get_vizToolTip().onScroll();this.disposeOfOverlays()},$1p:function(){var C=this.get_paneTableVM().get_mapServerModel();var D=(C.get_hasPresModel()?C.get_zoom():1);if(C.get_hasPresModel()&&C.get_rasterMapSourceModel().get_hasPresModel()){return new k(D,this.scrollAdjuster.get_isFromTouchpad())}else{return new i(D)}},$1r:function(C,D,E){if(!this.$27()){this.$2e=u.$0(C,D);this.$2u=this.$1p()}if(this.$2o){return}if(!this.$2u.update(E)){return}this.$1j(C);C.setWaitingOnPanZoomServerResponseState();this.$1n();this.$2w=window.setTimeout(ss.mkdel(this,function(){this.$2o=true;var F=function(){C.reset()};tab.PanZoomCommands.zoomWithAnchorPoint(C.get_regionPart(),this.$2e,1/this.$2u.currentZoomFactor(),F,ss.mkdel(this,function(){this.$2o=false}),this.get_sheetid());C.updateLocalMapDataForZoomAround(this.$2e,this.$2u.currentZoomLevel());this.$2a()}),500)},$1j:function(C){this.isAnimationOccurring=true;var D=this.resolvePane(this.$2e);if(C.mapIsBrowserRendered()){C.animateAnchorZoomClient(D,this.$2e,this.$2u.currentZoomLevel())}else{C.animateAnchorZoom(D,this.$2e,1/this.$2u.currentZoomFactor())}this.disposeOfOverlays()},$1W:function(){this.get_vizToolTip().onScroll();this.$26()},$26:function(){var C=this.$1y();for(var D=0;D<tab.PaneTableViewRegionParts.scrollableYRegions.length;D++){var E=tab.PaneTableViewRegionParts.scrollableYRegions[D];this.getWebRegion(E).setYPos(C)}this.set_scrollPosition({x:this.$1x(),y:C});if(this.$1k()){this.deferredCellResizerManager.done(function(F){F.scrollY(C)})}this.get_paneTableVM().scrollY(C)},$1V:function(){this.get_vizToolTip().onScroll();this.$25()},$25:function(){var C=this.$1x();for(var D=0;D<tab.PaneTableViewRegionParts.scrollableXRegions.length;D++){var E=tab.PaneTableViewRegionParts.scrollableXRegions[D];this.getWebRegion(E).setXPos(C)}this.set_scrollPosition({x:C,y:this.$1y()});if(this.$1k()){this.deferredCellResizerManager.done(function(F){F.scrollX(C)})}this.get_paneTableVM().scrollX(C)},$1Q:function(C){if(this.$2d().get_isDragTracking()){return}if(!ss.referenceEquals(C.target,this.element.get(0))&&!ss.referenceEquals(C.target,this.dom.view.get(0))&&!ss.referenceEquals(C.target,this.dom.view.find('.tvimagesContainer').get(0))){return}if(C.which===46){this.get_paneTableVM().deleteSelectedAnnotations()}if(C.which===27){this.get_paneTableVM().clearAnnotationSelection()}var D;switch(C.which){case 68:{D='lasso-selection';break}case 83:{D='radial-selection';break}case 65:{D='rectangular-selection';break}case 90:{D='area-zoom';break}case 70:{D='pan-map';break}default:{return}}if(D===this.get_paneTableVM().get_vizRegionToolModeViewModel().get_currentPointerToolMode()){D=this.defaultPointerToolMode()}var E=this.floatingZoomToolbarView.setToolMode(D,true);if(!E){this.setPointerToolMode(D,true)}},checkForHoverOverlay:function(){this.$1l(true)},$1l:function(C){if(ss.isValue(this.lastVizHoverPoint)&&this.$2n){this.hitTestAndSetHoverOverMarkOrVisualPartHelper(C)}else{this.disposeOfOverlayImages()}},$1P:function(C,D){var E=C.toLocalCoordsEvent(D,false);var F=this.getVisualListViewModelForRegion(C.get_regionPart());if(ss.isNullOrUndefined(E)||this.isUserDragging()||!tab.ApplicationModel.get_instance().get_isLocalRenderMode()||ss.isNullOrUndefined(F)){return}var G=F.hitTestNodes(E);if(ss.isValue(G)){var H=tab.SelectionUtils.isCategoricalAndTupleAssociatedHeader(G.node);var I=tab.FeatureFlags.isEnabled('EditAxisWebAffordance')&&tab.SelectionUtils.isQuantitative(G)&&tsConfig.is_authoring;G=((H||I)?G:null)}var J=tab.ModelUtils.regionToVisualPartMap[C.get_regionPart()];this.updateHoveredCategoricalHeadersAndQuantitativeAxes(G,'hover',J)},$1O:function(C){var D=this.getVisualListViewModelForRegion(C.get_regionPart());if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()||ss.isNullOrUndefined(D)){return}var E=tab.ModelUtils.regionToVisualPartMap[C.get_regionPart()];this.updateHoveredCategoricalHeadersAndQuantitativeAxes(null,'press',E)},$1S:function(C){var D=tab.ModelUtils.regionToVisualPartMap[C];var E=this.get_paneTableVM().get_vizRegionMap()[D];if(ss.isValue(E)){E.set_hoveredNodeOrAxis(null)}},isUserDragging:function(){return spiff.DragDropManager.get_isDragging()||y.isDragTrackingInAnyRegion},onHoverOverVisualPart:function(C,D){var E=C;E.setMouseOverMarkOrVisualPart(D)},$1N:function(C,D){if(ss.isValue(this.mapsSearchView)){this.get_paneTableVM().get_mapsSearchViewModel().removeSuggestionList()}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&C.get_regionPart()==='viz'){var E=C.toLocalCoordsEvent(D,false);var F=this.get_paneTableVM().get_localRenderVizHitTester().onTapHitTest(E);if(F.get_shouldRenderOverlay()){this.wasPressOverlayJustUpdated=true;this.updateOverlayTarget(F.get_id(),'press',F.get_overlayTargetType())}}},$1v:function(){var C=this.get_paneTableVM().get_selectionsModel().get_allLegendSelections();for(var D=0;D<C.length;D++){var E=C[D];if(!E.isEmpty){return true}}return false},isSelectActionOnVizAllowed:function(C){return C==='simple'||!this.$1v()},onHitTestUpdated:function(C,D){this.$1q();if(this.getVizDragApproval(D)){var E=C.toLocalCoords(D.get_pageCoordinates(),false);this.$1o(E)}},$1o:function(C){var D=$('<div class="tabDragIcon" ></div>');if(BrowserSupport.BrowserSupport.IsIE()){D.css('cursor','alias')}else{D.css('cursor','-webkit-grab');D.css('cursor','-moz-grab');D.css('cursor','grab')}D.css('position','absolute');var E=20;D.css('top',C.y-E+'px');D.css('left',C.x-E+'px');D.css('height',40+'px');D.css('width',40+'px');var F=this.makeMouseSpec(this.$2d());this.get_vizRegionDomNode().append(D);if(!tsConfig.is_mobile_device){var G=function(H){H.stopPropagation()};this.get_vizRegionDomNode().on(this.createNamespacedEventName('touchstart'),G).on(this.createNamespacedEventName('touchend'),G)}this.$2i=new spiff.TableauEventHandler.$ctor1(D.get(0),F)},disposeOfOverlays:function(){this.$1q();tab.PaneTableView.prototype.disposeOfOverlays.call(this)},$1q:function(){this.$2i=tab.MiscUtil.dispose$1(this.$2i);this.get_vizRegionDomNode().children('.tabDragIcon').remove()},handleTapServerCall:function(C,D,E,F){var G=ss.mkdel(this,function(){if(this.get_paneTableVM().get_localRenderVizHitTester().onTapHitTest(F).get_hitObjectType()===2){return}if(!tsConfig.allow_select){this.makeHoverApi().unsuppressHover(C)}var I=tab.PaneTableView.guessTooltipTargetTypeFromRegion(C.get_regionPart());this.get_vizToolTip().singleSelectCoordinates(E,F,C.get_regionPart(),I,null)});var H={x:F.x,y:F.y,w:0,h:0};tab.SelectionClientCommands.selectRectRegionAndDoUbertip(C.get_regionPart(),H,D,this.get_paneTableVM().get_visualId(),G,'default',null);this.refreshScrollingAndAxisIcons();this.dom.domRoot.focus()},$1X:function(C,D){if(D.get_isRightClickEvent()){return}if(this.$2l){this.$2l=false;return}this.$2p={x:D.pageX,y:D.pageY};D.stopPropagation();this.get_vizToolTip().onTap();if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.disposeOfOverlays()}if(D.originalEvent['button']>1){return}var E=C.toLocalCoordsEvent(D,false);var F=tab.PointUtil.add(E,C.getLocalOffsetPoint(false));if(this.allowPanZoomActions()&&C.get_toolModeViewModel().get_isZoomToolActive()){var G=this.resolvePane(C.toLocalCoordsEvent(D,false));C.$J(D,G);return}var H=u.$3(C,D);this.get_paneTableVM().handleAnnotationSelection(E,H,D);if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.handleLocalTap(C,H,F,E,'default',false)}else{this.handleTapServerCall(C,H,F,E)}},getHitTestResults:function(C,D){return this.get_paneTableVM().get_localRenderVizHitTester().onTapHitTest(C.toLocalCoordsEvent(D,false))},onRightClickViz:function(C,D){if(ss.isNullOrUndefined(this.get_paneTableVM().get_vizContextMenuViewModel())||tsConfig.current_sheet_type==='story'||!tsConfig.is_authoring||!(tab.FeatureFlags.isEnabled('RichTextCreateBlankAreaAnnotation')||tab.FeatureFlags.isEnabled('RichTextDeleteAnnotation')||tab.FeatureFlags.isEnabled('RichTextCreateBlankPointAndMarkAnnotation')||tab.FeatureFlags.isEnabled('RichTextCreateAnnotationAndOpenEditor'))){return}if(ss.isValue(this.vizTooltip)){this.vizTooltip.clearTooltipWithFakeHover()}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.get_paneTableVM().handleRightClick(this.get_paneTableVM().get_localRenderVizHitTester().onTapHitTest(D),D)}else{C.handleRightClickHitTestServerWithCallback(D,ss.mkdel(this,function(E){this.get_paneTableVM().handleRightClick(E,D)}))}},$1J:function(C,D){if(!this.isPointerToolLocked){this.resetPointerToolMode()}if(this.doAnnotationDoubleTap(C,D)){return}var E=((D.shiftKey&&!spiff.EventUtil.isCtrlKey(D))?0.5:2);this.doDoubleTap(C,D,E)},$1M:function(C,D){if(D.get_isRightMouseEvent()){return}var E=this.resolvePane(C.toLocalCoordsEvent(D,false));this.$1z();var F=this.get_paneTableVM().handleAnnotationDragStarted(C.toLocalCoordsEvent(D,false));this.$29();if(F){return}if(!tsConfig.allow_filter){this.setPointerToolMode(C.get_toolModeViewModel().get_currentPointerToolMode(),false)}else{switch(C.get_toolModeViewModel().get_currentPointerToolMode()){case'pan-map':case'area-zoom':case'zoom-out':{var G=!D.shiftKey;this.setPointerToolMode(C.get_toolModeViewModel().get_currentPointerToolMode(),G);break}}}this.$21(C);if(ss.isValue(this.drillWidget)){this.drillWidget.set_enabled(false)}if(ss.isValue(this.sortWidget)){this.sortWidget.set_enabled(false)}if(ss.isValue(this.mapsSearchView)){this.get_paneTableVM().get_mapsSearchViewModel().enableUserInteraction(false)}this.floatingZoomToolbarView.enableUserInteraction(false);C.$j(D,E)},$1K:function(C){var D=this.$2d();D.$i(C);if(this.get_paneTableVM().get_vizRegionToolModeViewModel().get_isSelectingToolActive()){this.checkForDragOverlays();this.$2j=true}this.get_paneTableVM().handleDrag(this.get_vizRegion().toLocalCoordsEvent(C,false))},$1L:function(C){this.$2l=C.type==='mousedown';this.get_vizToolTip().onDragEnd(null);this.disposeOfOverlays();this.$2j=false;this.$2d().$h(C,this.get_vizToolTip());this.$20();if(!this.isPointerToolLocked){this.resetPointerToolMode()}if(ss.isValue(this.drillWidget)){this.drillWidget.set_enabled(true)}if(ss.isValue(this.sortWidget)){this.sortWidget.set_enabled(true)}if(ss.isValue(this.mapsSearchView)){this.get_paneTableVM().get_mapsSearchViewModel().enableUserInteraction(true)}this.get_paneTableVM().handleDragEnded(this.get_vizRegion().toLocalCoordsEvent(C,false));this.floatingZoomToolbarView.enableUserInteraction(true)},$1U:function(C,D){var E=this.resolvePane(C.toLocalCoordsEvent(D,false));this.$1z();if(this.get_paneTableVM().handleAnnotationDragStarted(C.toLocalCoordsEvent(D,false))){return}this.$29();if(!tsConfig.allow_filter){this.setPointerToolMode(C.get_toolModeViewModel().get_currentPointerToolMode(),false)}else{switch(C.get_toolModeViewModel().get_currentPointerToolMode()){case'pan-map':{var F=!D.shiftKey;this.setPointerToolMode(C.get_toolModeViewModel().get_currentPointerToolMode(),F);break}case'zoom-out':case'area-zoom':{break}}}C.$j(D,E);this.$21(C)},$1I:function(){if(!this.isPointerToolLocked){this.resetPointerToolMode()}},$21:function(C){this.lastVizHoverPoint=null;this.get_vizToolTip().onPanOrDragStart(null);this.$1q();if(!C.get_toolModeViewModel().get_isSelectingToolActive()){this.disposeOfOverlays()}},$20:function(){var C={};spiff.EventHandleSpecExtensions.removeHandler(C,'dragMove');spiff.EventHandleSpecExtensions.removeHandler(C,'dragEnd');if(ss.isValue(this.$2h)){this.$2h.update(C)}this.$2g=tab.MiscUtil.dispose$1(this.$2g)},$1z:function(){var C={};spiff.EventHandleSpecExtensions.setHandler(C,'dragMove',ss.mkdel(this,this.$1K));spiff.EventHandleSpecExtensions.setHandler(C,'dragEnd',ss.mkdel(this,this.$1L));this.$2h.update(C);tab.WindowHelper.clearSelection();tab.MiscUtil.dispose$1(this.$2g);this.$2g=new spiff.Glass;this.$2g.show()},$29:function(){var C=this.$2d();C.setCursor(C.determineDragSelectionCursor(),this.$2g.element)},$1n:function(){this.$2w=tab.MiscUtil.clearTimeout(this.$2w)},allowPanZoomActions:function(){return this.$1i('other')},allowPanZoomActionsOnDoubleTap:function(){return this.$1i('doubleTap')},$1i:function(C){if(!tsConfig.allow_filter){return false}if(this.get_paneTableVM().get_visualModel().get_vizNavigationSetting()==='fixed'){return false}if(ss.isNullOrUndefined(this.get_geometry())){return false}var D=this.get_geometry().pi;switch(C){case'doubleTap':{var E=D.hasXQAxis&&D.hasYQAxis;var F=this.floatingZoomToolbarView.get_toolBarIsOffOrHome();if(!this.get_paneTableVM().get_isMap()&&E&&F){return false}return E}case'other':default:{return D.hasXQAxis||D.hasYQAxis}}},$1y:function(){return tab.DoubleUtil.roundToInt(this.$2f.scrollY.scrollTop())},$1x:function(){return this.$2f.scrollX.scrollLeft()},$1w:function(){if(ss.isNullOrUndefined(this.$2p)){return null}return{x:this.$2p.x-this.get_tableViewPosition().x,y:this.$2p.y-this.get_tableViewPosition().y}},handleCapturedMouseMove:function(C){this.$2p={x:C.pageX,y:C.pageY}},handleCapturedMouseComplete:function(C){}},tab.PaneTableView,[tab.IWidget,tab.IAppendableView,ss.IDisposable,ss.makeGenericType(tab.IView$1,[tab.IPaneTableViewModel]),tab.IPaneTableView,tab.IZoomToolbarContainer,spiff.IMouseCaptureEventHandler]);ss.initClass(w,a,{get_widgetFeatureEnabled:function(){return ss.isValue(this.$F)&&tsConfig.allow_filter},dispose:function(){this.set_parentViewer(null);this.$D.element.remove();this.$D.dispose();this.$C.dispose();v.prototype.dispose.call(this)},onUpdate:function(){this.$H=this.get_parentViewer().get_visibleGeometry();this.$F=this.get_parentViewer().get_sortIndicators();if(!ss.staticEquals(this.$G,null)){this.$G();this.$G=null}this.$h(this.get_parentViewer().get_capturedPaneTableViewMousePosition())},onMouseOutOfParentPaneTableView:function(){this.$g()},$g:function(){if(!this.$j()){return}var C=new RegExp('(sortInd\\w+)?','g');this.$z.get(0).className=this.$z.get(0).className.replace(C,'');this.$z.css('display','none');this.$E=null;if(tab.FeatureFlags.isEnabled('IntuitiveSorting')){this.$B.css('display','none')}},onMouseMove:function(C){this.$i(C)},isActiveInRect:function(C){if(ss.isValue(this.$E)&&this.$E.$1&&tab.RectXYUtil.intersectsWith(C,this.$A)){return true}return false},$b:function(){if(!tab.FeatureFlags.isEnabled('IntuitiveSorting')){return null}var C=spiff.LabelButton.newNativeButton();C.element.addClass('sortDropdownSolid');C.element.css('border','0');C.element.css('position','absolute');C.element.css('padding','0px');C.element.css('background-color','transparent');C.element.append("<span class='sortIndicatorDropdownArrow sortDropdownSolid'></span>");C.element.click(ss.mkdel(this,this.$n));C.element.hide();this.element.append(C.element);return C.element},$s:function(){this.$F=this.get_parentViewer().get_sortIndicators();this.set_enabled(true)},$9:function(){var C={tap:ss.mkdel(this,function(D){this.$m(D)}),hover:ss.mkdel(this,function(D){this.$l(D)})};this.$C=new spiff.TableauEventHandler.$ctor1(this.$z.get(0),C);this.disposables.add$1(this.$C);this.$z.mouseout(ss.mkdel(this,this.$k))},$i:function(C){if(C.button>0){return}var D=this.getPaneTableViewMousePositionFromCoordinates(C.pageX,C.pageY,this.get_parentViewer());this.$h(D)},$h:function(C){if(ss.isNullOrUndefined(C)){return}if(ss.isNullOrUndefined(this.$F)||!tsConfig.allow_filter){return}var D=this.regionHitTest(this.$H,C);if(ss.isValue(D)){var E=this.get_parentViewer().get_domWeb().scrollX.get(0);var F=this.get_parentViewer().get_domWeb().scrollY.get(0);var G={x:E.scrollLeft,y:F.scrollTop};var H=this.$H;var I=this.getSIRegionFromName(this.get_parentViewer(),D);this.$p(I,H[D],C,G)}else{this.$g()}},$x:function(C,D,E){var F;var G=C.sortIndicatorItems[D];var H=this.$E;if(!C.isHorizontal){F=((G.sortIndicatorState.sortOrder==='asc')?'Left':'Right')}else{F=((G.sortIndicatorState.sortOrder==='asc')?'Up':'Down')}var I=G.sortIndicatorState.isSorted;var J=(I?'Solid':'Hollow');this.$E=new e(C,G,D,F,J,E);var K=G.tooltipText;if(I&&!ss.isNullOrEmptyString(K)){this.$D.element.attr('title',K)}else{this.$D.element.removeAttr('title')}if(ss.isNullOrUndefined(H)||!ss.referenceEquals(H.$0,F)||!ss.referenceEquals(H.$5,J)||H.$1!==E){this.$y()}},$y:function(){if(ss.isNullOrUndefined(this.$E)){return}this.clearButtonImageClass('sortInd',this.$z.get(0));this.$r()},$r:function(){this.$z.addClass(this.$c())},$c:function(){var C='';if(tab.FeatureFlags.isEnabled('IntuitiveSorting')){var D=this.$E.$2;if(ss.isValue(D)){if(D.sortIndicatorState.sortIndicatorType==='alphabetic'){C='Alphabetic'}else if(D.sortIndicatorState.sortIndicatorType==='nested'){C='Nested'}}}var E='sortInd'+C+this.$E.$5+this.$E.$0+(this.$E.$1?'Active':'');return E},$d:function(C){return((C==='alphabetic')?'asc':'desc')},$v:function(){if(!this.$j()){return}var C=this.$E.$2;var D=this.$E.$4;var E=this.$d(C.sortIndicatorState.sortIndicatorType);if(!C.sortIndicatorState.isSorted){C.sortIndicatorState.isSorted=true;C.sortIndicatorState.sortOrder=E}else if(C.sortIndicatorState.sortOrder===E){C.sortIndicatorState.sortOrder=((E==='asc')?'desc':'asc')}else{C.sortIndicatorState.sortOrder=E;C.sortIndicatorState.isSorted=false}this.$x(D,this.$E.$3,this.$E.$1)},$l:function(C){if(this.isOtherActiveInRect(this.$A)){return}if(this.$j()&&!this.$E.$1){this.$E.$1=true;this.$y()}C.stopPropagation()},$k:function(C){if(!this.$j()){return}var D=$(this.$z.get(0)).offset();var E=tab.DoubleUtil.roundToInt($(this.$z.get(0)).outerHeight());var F=tab.DoubleUtil.roundToInt($(this.$z.get(0)).outerWidth());if(D.left>C.pageX||D.left+F<=C.pageX||D.top>C.pageY||D.top+E<=C.pageY){this.$E.$1=false;this.$y();C.stopPropagation()}},$m:function(C){spiff.EventUtil.stopEvent(C);this.$v();this.$z.addClass('clicked');this.$G=ss.mkdel(this,function(){this.$z.removeClass('clicked')});var D=this.$e(C);tab.SortServerCommands.sortFromIndicator(D,this.get_scrollAmount(),this.get_parentViewer().get_visualId())},$f:function(){return this.$E.$2.sortIndicatorState.sortIndicatorType},$n:function(C){spiff.EventUtil.stopEvent(C);this.$t(this.$B)},$e:function(C){var D=this.getPaneTableViewMousePositionFromCoordinates(C.pageX,C.pageY,this.get_parentViewer());var E=this.regionHitTest(this.$H,D);if(ss.isNullOrUndefined(E)){return null}var F=this.getSIRegionFromName(this.get_parentViewer(),E);var G=F.regionRect;var H=this.$H;D.y+=G.y-H[E].t;D.x+=G.x-H[E].l;return D},$t:function(C){var D=this.$E.$2.sortIndicatorMenu;if(ss.isNullOrUndefined(D)){return}var E=ss.mkdel(this,function(){this.get_parentViewer().tryUpdateSortDrillAndContextMenuWidgets()});var F=tab.WidgetUtil.menuViewModelFromCommands(D,ss.mkdel(this,this.$o),E,null,ss.mkdel(this,this.$a));if(ss.isValue(F)){F.show(new spiff.ShowMenuOptions(C,false))}},$a:function(C){return ss.mkdel(this,function(){tab.SortServerCommands.sortFromCommandItem(C,this.get_parentViewer().get_visualId())})},$o:function(C){tab.WidgetUtil.commandMenuItemClicked(C)},$u:function(C,D,E,F){if(this.isOtherActiveInRect(E)){return}var G=null;if(tab.FeatureFlags.isEnabled('IntuitiveSorting')){var H=C.sortIndicatorItems[D];if(ss.isValue(H.sortIndicatorMenu)){var I=H.sortIndicatorMenu['commandItems'.toString()];if(I.length>0){G=H.menuButtonRect}}}this.$A=E;this.$x(C,D,F);this.repositionAndShowElement(this.$z.get(0),E);this.$w(G)},$w:function(C){if(ss.isValue(C)){this.$q(this.$B.get(0),C)}else if(ss.isValue(this.$B)){this.$B.css('display','none')}},$q:function(C,D){this.repositionAndShowElement(C,tab.RecordCast.rectPresModelAsRectXY(D))},$j:function(){return ss.isValue(this.$E)},$p:function(C,D,E,F){if(ss.isNullOrUndefined(C)){this.$g();return}if(ss.isValue(this.$E)&&ss.isValue(this.$E.$4)&&C.sortRegion!==this.$E.$4.sortRegion){this.$g()}var G={x:E.x,y:E.y};var H=C.regionRect;G.y+=H.y-D.t;G.x+=H.x-D.l;if(C.canScrollY){G.y+=F.y}if(C.canScrollX){G.x+=F.x}var I=C.sortIndicatorItems;for(var J=0,K=I.length;J<K;J++){if(ss.isNullOrUndefined(I[J].itemRect)){continue}if(ss.isNullOrUndefined(I[J].buttonRect)){continue}var L=tab.RecordCast.rectPresModelAsRectXY(I[J].itemRect);if(tab.RectXYUtil.inRect(L,G)){var M=tab.RecordCast.rectPresModelAsRectXY(I[J].buttonRect);var N=this.clone(M);N=this.computeTvButtonRectFromUnrolledRegionCoordinates(N,D,E,G);if(ss.isValue(N)){this.$u(C,J,N,tab.RectXYUtil.inRect(N,G));return}}}this.$g()}},v,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(x,a,{});ss.initClass(y,a,{$L:function(){return this.get_toolModeViewModel().get_isAppendMode()},get_isDragTracking:function(){return this.$Q},$C:function(C){this.$Q=C;y.isDragTrackingInAnyRegion=C},destroy:function(){this.$P=null;tab.TiledViewerRegion.prototype.destroy.call(this)},setXPos:function(C){if(this.regionContent.get_hasContent()){this.regionContent.setXPos(C);this.backgroundMap.setScrollX(C)}},setYPos:function(C){if(this.regionContent.get_hasContent()){this.regionContent.setYPos(C);this.backgroundMap.setScrollY(C)}},resetVisualState:function(){tab.TiledViewerRegion.prototype.resetVisualState.call(this);if(this.isScrolling){this.wasScrolling=false;return}if(!this.$M){return}this.$P.unsuppressHover(this)},setMouseOverMarkOrVisualPart:function(C){if(this.$R!==C){this.$R=C;this.$B()}},$j:function(C,D){this.$O(C,D)},$z:function(C,D){this.$E(this.get_shapeSelector());this.$D(C)},$I:function(C,D){this.$E(this.domPanZoomRect);this.$D(C);this.domPanZoomRect.set_pi(D)},$i:function(C){if(this.get_isDragTracking()){this.$S(C)}},$h:function(C,D){this.get_toolModeViewModel().updateDefaultToolMode(this.allowPanZoomActions());if(this.get_isDragTracking()){this.$T(C,D)}},$J:function(C,D){var E=this.toLocalCoordsEvent(C,false);this.paneTableViewModel.hideAnnotations();if(!this.get_toolModeViewModel().get_isZoomToolActive()){}var F=((this.get_toolModeViewModel().get_currentPointerToolMode()==='zoom-out')?0.5:2);this.zoomPoint(D,E,F,false,null)},$k:function(C){var D=Math.floor(C.w/2)+C.x;var E=Math.floor(C.h/2)+C.y;return{x:D,y:E}},$K:function(C,D){this.zoomPoint(C,null,D,false,null)},$q:function(){},$G:function(C){if(ss.isValue(C)){C.hide()}},$E:function(C){if(ss.isValue(C)){C.show()}},updateForToolMode:function(C){tab.TiledViewerRegion.prototype.updateForToolMode.call(this,C);this.$B();switch(C){case'no-tools':{this.$S=ss.mkdel(this,this.$r);this.$T=ss.mkdel(this,this.$r);this.$O=ss.mkdel(this,this.$r);this.$N=ss.mkdel(this,this.$r);break}case'rectangular-selection':case'lasso-selection':case'radial-selection':{this.$S=ss.mkdel(this,this.onMarqueeMouseMove);this.$T=ss.mkdel(this,this.$r);this.$O=ss.mkdel(this,this.$z);this.$N=ss.mkdel(this,this.$y);break}case'pan-map':{this.$S=ss.mkdel(this,this.$s);this.$T=ss.mkdel(this,this.$t);this.$O=ss.mkdel(this,this.$u);this.$N=ss.mkdel(this,this.$r);break}case'area-zoom':case'zoom-out':{this.$S=ss.mkdel(this,this.onZoomBoxMouseMove);this.$T=ss.mkdel(this,this.$w);this.$O=ss.mkdel(this,this.$I);this.$N=ss.mkdel(this,this.$H);break}}},$n:function(C){return!C.shiftKey&&spiff.EventUtil.isCtrlKey(C)&&this.get_toolModeViewModel().get_isSelectingToolActive()},$o:function(C){return C.altKey&&(this.get_toolModeViewModel().get_isZoomToolActive()||C.shiftKey&&spiff.EventUtil.isCtrlKey(C))},$p:function(C){var D=C;if(D.altKey&&!D.ctrlKey&&!BrowserSupport.BrowserSupport.IsMac()){D.preventDefault()}if(!tsConfig.allow_filter){return}var E=this.get_toolModeViewModel().currentModifierKeyToolMode;var F=this.get_toolModeViewModel().get_isAppendMode();this.get_toolModeViewModel().set_isAppendMode(this.$n(D));if(!this.get_isDragTracking()){if(this.allowPanZoomActions()){if(y.$0(D)){this.get_toolModeViewModel().currentModifierKeyToolMode='pan-map'}else if(y.$1(D)){this.get_toolModeViewModel().currentModifierKeyToolMode='area-zoom'}else if(this.$o(D)){this.get_toolModeViewModel().currentModifierKeyToolMode='zoom-out'}else{this.get_toolModeViewModel().currentModifierKeyToolMode='no-tools'}}else{this.get_toolModeViewModel().currentModifierKeyToolMode='no-tools'}}if(E!==this.get_toolModeViewModel().currentModifierKeyToolMode||F!==this.get_toolModeViewModel().get_isAppendMode()){this.$B()}},startScrolling:function(C,D,E){this.stopScrolling();if(!(C!==0&&this.scroller.get_canScrollX()||D!==0&&this.scroller.get_canScrollY())){return}if(!ss.isValue(this.$U)){this.$m(C,D,E)}var F=((E==='fast')?15:200);this.$U=window.setInterval(ss.mkdel(this,function(){this.$m(C,D,E)}),F);this.isScrolling=true},stopScrolling:function(){if(ss.isValue(this.$U)){window.clearInterval(ss.unbox(this.$U))}this.$U=null;this.wasScrolling=this.isScrolling;this.isScrolling=false},$m:function(C,D,E){var F=0;var G=0;if(C!==0){F=this.$f(0,C);this.scroller.scrollX(F)}if(D!==0){G=this.$f(1,D);this.scroller.scrollY(G)}this.get_shapeSelector().shapeScrolled(F,G);this.get_shapeSelector().get_dom().css('display','');if(F===0&&C!==0||G===0&&D!==0){var H=((F===0)?0:C);var I=((G===0)?0:D);this.startScrolling(H,I,E)}},$f:function(C,D){var E=((C===0)?this.scroller.get_scrollPos().x:this.scroller.get_scrollPos().y);var F=((C===0)?this.scroller.get_maxScroll().x:this.scroller.get_maxScroll().y);var G=D*15;var H=Math.max(0,Math.min(E+G,F));return H-E},determineScrollDirection:function(C,D){var E=((C===0)?this.scroller.get_scrollPos().x:this.scroller.get_scrollPos().y);var F=((C===0)?this.scroller.get_maxScroll().x:this.scroller.get_maxScroll().y);var G=((D<0)?-1:((D>0)?1:0));if(G===-1&&E===0||G===1&&E>=F){G=0}return G},suppressTooltips:function(){this.$P.suppressHover(this)},setCursor:function(C,D){D.css('cursor',C)},$A:function(C){this.setCursor(C,this.connectNode)},$l:function(){var C=this.get_toolModeViewModel().get_currentPointerToolMode();if(C==='no-tools'){C=this.get_toolModeViewModel().defaultPointerToolMode}return C},$B:function(){var C=this.$l();switch(C){case'area-zoom':{this.$A(y.$6['zoomIn']);break}case'zoom-out':{this.$A(y.$6['zoomOut']);break}default:{this.$A((this.$R?y.$6['select']:y.$6['defaultKey']));break}}},determineDragSelectionCursor:function(){if(this.paneTableViewModel.isAnnotationDragging()){return y.$6['defaultKey']}var C=this.$l();switch(C){case'area-zoom':{return y.$6['zoomIn']}case'zoom-out':{return y.$6['zoomOut']}case'lasso-selection':{return(this.$L()?y.$6['lassoExtended']:y.$6['lassoSelect'])}case'radial-selection':{return(this.$L()?y.$6['radialExtended']:y.$6['radialSelect'])}case'rectangular-selection':{return(this.$L()?y.$6['rectExtended']:y.$6['rectSelect'])}case'pan-map':{return y.$6['panDrag']}default:{return y.$6['defaultKey']}}},$D:function(C){if(C.originalEvent['button']>1){return}if(this.get_isDragTracking()){return}this.$C(true);C.preventDefault();this.$P.suppressHover(this);var D=C.get_gestureInfo();this.domPanZoomRect.set_pi(null);this.domPanZoomRect.dragStarted(D.startX,D.startY,this.getLocalOffset(true));this.get_shapeSelector().dragStarted(D.startX,D.startY,this.getLocalOffset(true));this.$B()},$F:function(C,D){if(!this.get_isDragTracking()){return}this.$C(false);this.$G(D);this.stopScrolling();this.$B()},$w:function(C,D){this.$v(C,D,this.domPanZoomRect)},$r:function(C,D){this.$v(C,D,this.get_shapeSelector())},$v:function(C,D,E){if(!this.get_isDragTracking()){return}var F=C.originalEvent;if(F['button']>1){return}this.$F(C,E);this.$P.suppressHover(this);this.$N(C,D)},$s:function(C){spiff.EventUtil.stopEvent(C);var D=C.get_gestureInfo();var E=D.pageX-this.domPanZoomRect.get_dragStart().x;var F=D.pageY-this.domPanZoomRect.get_dragStart().y;if(ss.isNullOrUndefined(this.domPanZoomRect.get_pi())||!this.domPanZoomRect.get_pi().canDragH){E=0}if(ss.isNullOrUndefined(this.domPanZoomRect.get_pi())||!this.domPanZoomRect.get_pi().canDragV){F=0}var G=1;E+=G;F+=G;tab.DomUtil.setMarginBoxJQ(this.domDragImage,{l:E,t:F,w:tab.DoubleUtil.roundToInt(this.domDragImage.width()),h:tab.DoubleUtil.roundToInt(this.domDragImage.height())});this.backgroundMap.panTo(D.deltaX,D.deltaY)},$t:function(C,D){if(!this.get_isDragTracking()){return}if(C.originalEvent['button']>1){return}spiff.EventUtil.stopEvent(C);this.$F(C,null);var E=C.get_gestureInfo();this.$P.suppressHover(this);var F=this.toLocalCoords(this.domPanZoomRect.get_dragStart(),false);var G={x:E.pageX-this.domPanZoomRect.get_dragStart().x,y:E.pageY-this.domPanZoomRect.get_dragStart().y};if(ss.isNullOrUndefined(this.domPanZoomRect.get_pi())||!this.domPanZoomRect.get_pi().canDragH){G.x=0}if(ss.isNullOrUndefined(this.domPanZoomRect.get_pi())||!this.domPanZoomRect.get_pi().canDragV){G.y=0}this.$x(C,F,G)},$x:function(C,D,E){this.setWaitingOnPanZoomServerResponseState();this.resetIsWaitingOnTransition=false;this.backgroundMap.updateLocalCenter(E.x,E.y);var F=ss.mkdel(this,function(){this.reset()});var G=ss.mkdel(this,function(){this.reset()});tab.PanZoomCommands.pan(this.get_regionPart(),D,E,G,F,this.get_sheetid())},$u:function(C,D){if(this.waitingOnPanZoomServerResponse!=='normal'){return}this.$D(C);this.domPanZoomRect.set_pi(D);this.resetIsWaitingOnTransition=true;this.get_toolModeViewModel().deferModeChanges();this.showDomDragImage(D)},$y:function(C,D){if(!tsConfig.allow_select){this.$P.unsuppressHover(this);return}var E=this.get_shapeSelector().get_tooltipAnchor();var F=this.get_regionPart();var G=tab.PointUtil.add(E,this.getLocalOffsetPoint(false));var H=this.get_shapeSelector().get_hitTestingBox();var I=ss.mkdel(this,function(){D.multiSelectComplete(G,H,F);if(ss.isValue(this.$P)){this.$P.unsuppressHover(this)}});var J=tab.SelectActionResolver.fromNormalizedEvent(C,0);if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var K=this.paneTableViewModel.get_localRenderVizHitTester().hitTestMarksAgainstSelectionShape(this.get_shapeSelector());var L=tab.LocalRenderVizSelectionDispatcher.doMultiSelect(K,J,I,this.paneTableViewModel.get_visualId());if(!L||!tsConfig.allow_tooltip){this.$P.unsuppressHover(this)}}else{this.get_shapeSelector().sendSelectionCommand(F,J,this.get_visualId(),I)}},$H:function(C,D){var E=tab.DomUtil.getRectXY(this.domPanZoomRect.get_dom());var F=this.toLocalCoordsRect(E,false);this.setWaitingOnPanZoomServerResponseState();var G=this.domPanZoomRect.get_pi();if(F.w<4&&F.h<4){this.$J(C,G)}if(!this.get_toolModeViewModel().get_isZoomToolActive()){}var H=this.getCenterPoint(G);this.$g(G,H,F);var I=ss.mkdel(this,function(){this.reset()});if(this.get_toolModeViewModel().get_currentPointerToolMode()==='zoom-out'){var J=0.5;if(!this.allowMapZoomAtCurrentLevel(J)){return}var K=ss.mkdel(this,function(){tab.PanZoomCommands.zoomOut(H,J,I,this.get_sheetid())});this.backgroundMap.zoomOnPoint(H,-1).done(function(O){K()}).done(ss.mkdel(this,function(){this.get_toolModeViewModel().currentModifierKeyToolMode='area-zoom'}))}else{var L=2;var M=1/L;var N=ss.mkdel(this,function(){tab.PanZoomCommands.zoomIn(F,H,M,I,this.get_sheetid())});this.backgroundMap.zoomRect(F).done(function(O){N()})}},$g:function(C,D,E){var F=this.$k(E);var G=E.w;var H=E.h;var I=C.w/G;var J=C.h/H;if(C.canDragH&&C.canDragV){var K=Math.min(I,J);var L=this.paneTableViewModel.get_mapServerModel();if(L.get_hasPresModel()){K=tab.ZoomComputer.resolveDesiredScale(L,K)}I=J=K}else if(!C.canDragV){J=1;F.y=D.y}else if(!C.canDragH){I=1;F.x=D.x}else{return}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()||tab.ViewSession.canUseTileCacheUrl(this.paneTableViewModel.get_tileCacheUrl())){this.animateZoomOnPoint(C,F,I,J)}}},tab.TiledViewerRegion);ss.initClass(z,a,{onMoving:function(){this.get_tooltip().close()},onDragEnd$1:function(){this.get_tooltip().close()},buildBehaviorsDictionary:function(){var C=new q(this.get_tooltip());this.tooltipBehaviors['sticky']=C},dispose:function(){this.get_tooltip().remove_showed(ss.mkdel(this,this.showCommandAreaAndActions));tab.TooltipBaseMode.prototype.dispose.call(this)}},tab.TooltipBaseLegacyMode);ss.initClass(A,a,{render:function(){return(this.props.isHidden?null:this.$1())},componentWillMount:function(){this.$3=$('<div>').css({visibility:'hidden',position:'relative'})[0];this.$3.className='VizContextMenu-MenuAnchor';this.$2(this.props)},componentWillUpdate:function(C){this.$2(C)},componentWillUnmount:function(){if(this.props.vizOverlayDiv.contains(this.$3)){this.props.vizOverlayDiv.removeChild(this.$3)}},$2:function(C){if(!C.isHidden){C.vizOverlayDiv.appendChild(this.$3);this.$3.style.top=100*C.location.y/C.vizOverlayDiv.clientHeight+'%';this.$3.style.left=100*C.location.x/C.vizOverlayDiv.clientWidth+'%'}else if(C.isHidden&&C.vizOverlayDiv.contains(this.$3)){C.vizOverlayDiv.removeChild(this.$3)}},$1:function(){var C={testId:'VizContextMenu',allowAutoPosition:true,anchorEl:this.$3,anchorOrigin:{vertical:0,horizontal:0},menuItemInfos:this.props.menuOptions,requestCloseAll:ss.mkdel(this,this.$0),onSelect:this.props.handleItemClicked};return React.createElement(SharedWidgets.FlyoutListMenuWidget,C)},$0:function(){if(!ss.staticEquals(this.props.hide,null)){this.props.hide()}}},spiff.PureRenderComponent);ss.initClass(B,a,{createPaneTableView:function(C){return new u(C)}},tab.VizZoneFactory,[tab.IVizZoneModule]);(function(){v.$0=[]})();(function(){h.axisContextMenuElementClassName='tab-tiledViewerAxisContextMenu'})();(function(){l.$2=17;l.$1=7;l.$3=10;l.$0=20})();(function(){tab.ObjectRegistry.registerType(tab.FloatingZoomToolbar,n).call(null)})();(function(){q.$1='.LegacyTooltipBehavior';q.$2=500;q.$3=250;q.$4=10000;q.$5=1200;q.$6=0;tab.ObjectRegistry.registerType(tab.ITooltipBehavior,q).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.MapsSearchView,r).call(null)})();(function(){t.htmlTemplate="<div class='tab-tiledViewer placeholder'><div class='tab-clip'><h2 class='tab-tvTitle tvimagesNS'></h2><div class='tab-tvTLSpacer tvimagesNS'><img></img></div><div class='tab-tvTRSpacer tvimagesNS'><img></img></div><div class='tab-tvBLSpacer tvimagesNS'><img></img></div><div class='tab-tvBRSpacer tvimagesNS'><img></img></div><div class='tab-tvYLabel tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvLeftAxis tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvRightAxis tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvXLabel tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvBottomAxis tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvTopAxis tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvView tvimagesNS'><div class='tvScrollContainer'><div class='tvBackgroundContainer'></div><div class='tvimagesContainer'></div></div><div class='tvViewportBorders'></div></div><div class='tab-tvCaption tvimagesNS'></div><div class='tab-tvScrollX tvimages'><div class='tvimagesContainer'></div></div><div class='tab-tvScrollY tvimages'><div class='tvimagesContainer'></div></div></div></div>"})();(function(){A.$1='VizContextMenu';A.$0='VizContextMenu-MenuAnchor'})();(function(){y.isDragTrackingInAnyRegion=false;y.$3=15;y.$4=15;y.$5=200;y.$6=null})();(function(){tab.ObjectRegistry.registerType(tab.TooltipBaseLegacyMode,z).call(null)})();(function(){w.sortingElementClassName='tab-tiledViewerSort';w.$0='sortInd'})();(function(){u.$5=500;u.$4=10})()})();